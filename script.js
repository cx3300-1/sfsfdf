const _0x2ecbeb=_0x5817;(function(_0x5c18f4,_0x1e6cb3){const _0x577ed9=_0x5817,_0x27c588=_0x5c18f4();while(!![]){try{const _0xf8a675=-parseInt(_0x577ed9(0x1078))/0x1+-parseInt(_0x577ed9(0x7a2))/0x2+-parseInt(_0x577ed9(0x597))/0x3+parseInt(_0x577ed9(0x903))/0x4+parseInt(_0x577ed9(0xf5a))/0x5+parseInt(_0x577ed9(0x91c))/0x6*(parseInt(_0x577ed9(0x12d9))/0x7)+parseInt(_0x577ed9(0xcc3))/0x8;if(_0xf8a675===_0x1e6cb3)break;else _0x27c588['push'](_0x27c588['shift']());}catch(_0x4ccc6d){_0x27c588['push'](_0x27c588['shift']());}}}(_0x4ba1,0xe383a));const translations={'zh-CN':{'save':'保存','cancel':'取消','confirm':'确定','edit':'编辑','done':'完成','add':'添加','back':'返回','next':'下一步','close':'关闭','reset':'重置','upload':'上传','send':'发送','manage':'管理','share':'分享','delete':'删除','publish':'发布','refresh':'刷新','search':'搜索','remove':'移除','finish':'结束','details':'详情','settings':'设置','title':'标题','content':'内容','category':'分类','name':'名称','description':'描述','status':'状态','ok':'好的','error':'错误','success':'成功','warning':'警告','loading':_0x2ecbeb(0x292),'processing':_0x2ecbeb(0x128b),'pleaseWait':'请稍候...','languageChangedAlert':_0x2ecbeb(0xbdf),'homeAppQQ':'QQ','homeAppWorldBook':_0x2ecbeb(0x130e),'homeAppAppearance':'外观设置','homeAppRenderer':'渲染器','homeAppApiSettings':'设置','homeAppFont':'字体','homeAppCPhone':_0x2ecbeb(0x154b),'homeAppDouban':'豆瓣','homeAppPreset':'预设','homeAppTutorial':'教程','homeAppWerewolf':_0x2ecbeb(0x555),'homeAppX':'X','chatListTitle':'消息','navMessages':'消息','navQzone':'动态','navMemories':'回忆','navFavorites':'收藏','navNpcList':_0x2ecbeb(0xd51),'qzoneTitle':_0x2ecbeb(0x225),'qzoneActionShuoshuo':'说说','qzoneActionPost':'动态','qzoneActionAlbum':'相册','cphoneTitleSelect':_0x2ecbeb(0x67c),'cphoneAppQQ':'QQ','cphoneAppAlbum':'相册','cphoneAppBrowser':_0x2ecbeb(0x13d9),'cphoneAppTaobao':'淘宝','cphoneAppMemo':_0x2ecbeb(0x9ef),'cphoneAppDiary':'日记','cphoneAppAmap':_0x2ecbeb(0x829),'cphoneAppUsage':_0x2ecbeb(0x1507),'cphoneAppMusic':'网易云','cphoneAppEphone':'Ephone','cphoneAppFootprints':'足迹','cphoneAlbumTitle':'TA的相册','cphoneBrowserTitle':'TA的浏览器历史','cphoneTaobaoTitle':_0x2ecbeb(0xeb3),'cphoneWalletTitle':'钱包','cphoneMemoTitle':_0x2ecbeb(0x9ef),'cphoneDiaryTitle':'日记','cphoneUsageTitle':_0x2ecbeb(0xb06),'cphoneMusicTitle':_0x2ecbeb(0x970),'cphoneArticleTitle':'文章','cphoneSimulatedChatPlaceholder':'这是模拟对话，无法发送消息','worldBookTitle':_0x2ecbeb(0x130e),'worldBookEditorTitle':'编辑世界书','worldBookEntryEditorTitle':_0x2ecbeb(0x151d),'worldBookNameLabel':'书名','worldBookCategoryLabel':'分类','worldBookEntriesLabel':_0x2ecbeb(0x7f9),'worldBookAddEntryBtn':'[+]\x20添加新条目','worldBookNamePlaceholder':'请输入世界书的名称...','worldBookImportTitle':_0x2ecbeb(0x783),'presetTitle':'预设','presetEditorTitle':_0x2ecbeb(0xae6),'presetNameLabel':_0x2ecbeb(0xf66),'presetCategoryLabel':'分类','presetEntriesLabel':_0x2ecbeb(0x7f9),'presetAddEntryBtn':_0x2ecbeb(0x1381),'tutorialTitle':'教程','apiSettingsTitle':_0x2ecbeb(0x14eb),'languageLabel':'语言','apiPresetManagement':_0x2ecbeb(0x12ce),'apiPresetSelectLabel':'选择或切换预设','apiPrimarySettings':'主API设置\x20(用于聊天)','apiProxyUrlLabel':_0x2ecbeb(0xa4b),'apiKeyLabel':_0x2ecbeb(0x14d4),'apiModelLabel':'模型','apiFetchModelsBtn':_0x2ecbeb(0x11f3),'apiSecondarySettings':_0x2ecbeb(0x4e1),'apiSecondaryProxyUrlLabel':'副反代地址','apiSecondaryKeyLabel':_0x2ecbeb(0xe56),'apiSecondaryModelLabel':_0x2ecbeb(0xc07),'apiFetchSecondaryModelsBtn':_0x2ecbeb(0xcc7),'apiBgActivitySettings':_0x2ecbeb(0x8e9),'apiEnableBgActivityLabel':'启用后台角色活动','apiBgIntervalLabel':'后台活动检测间隔\x20(秒)','apiBlockCooldownLabel':_0x2ecbeb(0x12b1),'apiTtsSettings':_0x2ecbeb(0x706),'apiTtsModelLabel':_0x2ecbeb(0xc41),'apiPerformanceSettings':_0x2ecbeb(0xe59),'apiChatListRenderWindowLabel':_0x2ecbeb(0x114e),'apiChatRenderWindowLabel':_0x2ecbeb(0xd60),'apiImageGenSettings':_0x2ecbeb(0x312),'apiEnableImageGenLabel':_0x2ecbeb(0x194),'apiEnableNovelAILabel':_0x2ecbeb(0x1047),'apiNovelAIModelLabel':_0x2ecbeb(0x893),'apiNovelAIKeyLabel':'NovelAI\x20API\x20Key','apiNovelAIGenSettingsBtn':'生成设置','apiNovelAITestBtn':_0x2ecbeb(0x844),'apiStorageOptimization':_0x2ecbeb(0xf8e),'apiCompressImagesBtn':'一键压缩本地图片','apiSaveAllBtn':_0x2ecbeb(0x14e1),'apiExportDataBtn':_0x2ecbeb(0x1499),'apiImportDataBtn':_0x2ecbeb(0xa65),'apiCleanupDataBtn':_0x2ecbeb(0x8b6),'apiDeleteWorldBooksBtn':'删除世界书','apiAdvancedCleanupBtn':_0x2ecbeb(0x889),'apiCheckAndFixDataBtn':_0x2ecbeb(0xeb2),'chatHeaderOnline':'在线','chatHeaderLongTermMemory':'长期记忆','chatHeaderListenTogether':_0x2ecbeb(0x4fd),'chatHeaderChatSettings':_0x2ecbeb(0xa7d),'chatSelectionCancel':'取消','chatSelectionScreenshot':_0x2ecbeb(0x4ca),'chatSelectionFavorite':'收藏','chatSelectionShare':'分享','chatSelectionSoftDelete':_0x2ecbeb(0xa3f),'chatSelectionHardDelete':_0x2ecbeb(0x767),'chatReplyTo':'回复','chatInputPlaceholder':'输入消息...','chatWaitForReply':_0x2ecbeb(0x12d5),'appearanceTitle':_0x2ecbeb(0x832),'appearanceSaveAll':_0x2ecbeb(0xf8c),'fontSettingsTitle':_0x2ecbeb(0x5ce),'fontPresetManagement':'字体预设管理','fontFileUrlLabel':_0x2ecbeb(0x100e),'fontPreviewLabel':'实时预览','fontPreviewText1':_0x2ecbeb(0x2bc),'fontPreviewText2':_0x2ecbeb(0x86e),'fontSaveAndApply':'保存并应用','fontResetDefault':'恢复默认字体','rendererTitle':_0x2ecbeb(0xe4f),'rendererEditorTitle':_0x2ecbeb(0x984),'rendererCreateTitle':_0x2ecbeb(0x83a),'rendererRuleName':'规则名称','rendererBindScope':_0x2ecbeb(0x1405),'rendererScopeGlobal':'公用\x20(所有角色)','rendererRegex':_0x2ecbeb(0x1fd),'rendererHtmlTemplate':_0x2ecbeb(0x117b),'rendererEnableRule':_0x2ecbeb(0x4f2),'myAlbumTitle':_0x2ecbeb(0x717),'albumPhotosTitle':_0x2ecbeb(0xf35),'npcEditorTitleAdd':'添加\x20NPC','npcEditorTitleEdit':_0x2ecbeb(0x3a2),'npcAvatarLabel':_0x2ecbeb(0x390),'npcUploadAvatar':'上传头像','npcNicknameLabel':_0x2ecbeb(0x68a),'npcPersonaLabel':'NPC\x20人设','npcEnableBgActivity':'启用独立后台活动','npcActionCooldown':_0x2ecbeb(0xce3),'npcAssociatedChars':_0x2ecbeb(0x144e)},'en':{'save':_0x2ecbeb(0xb8d),'cancel':'Cancel','confirm':_0x2ecbeb(0xfbf),'edit':_0x2ecbeb(0x1398),'done':'Done','add':_0x2ecbeb(0x4eb),'back':_0x2ecbeb(0x6df),'next':'Next','close':_0x2ecbeb(0x7f5),'reset':_0x2ecbeb(0x5ab),'upload':_0x2ecbeb(0x1121),'send':_0x2ecbeb(0x8d9),'manage':_0x2ecbeb(0x2e5),'share':'Share','delete':_0x2ecbeb(0xaf9),'publish':_0x2ecbeb(0xc38),'refresh':_0x2ecbeb(0x7c7),'search':_0x2ecbeb(0xaf4),'remove':_0x2ecbeb(0x12ef),'finish':_0x2ecbeb(0x14cb),'details':_0x2ecbeb(0xb4f),'settings':_0x2ecbeb(0xf40),'title':_0x2ecbeb(0x318),'content':'Content','category':_0x2ecbeb(0xca3),'name':_0x2ecbeb(0xe67),'description':_0x2ecbeb(0x149c),'status':_0x2ecbeb(0xf41),'ok':'OK','error':_0x2ecbeb(0x143b),'success':_0x2ecbeb(0x656),'warning':_0x2ecbeb(0xb4d),'loading':_0x2ecbeb(0x10cb),'processing':'Processing...','pleaseWait':_0x2ecbeb(0xf51),'languageChangedAlert':_0x2ecbeb(0x1032),'homeAppQQ':'QQ','homeAppWorldBook':_0x2ecbeb(0x106b),'homeAppAppearance':'Appearance','homeAppRenderer':_0x2ecbeb(0xa26),'homeAppApiSettings':_0x2ecbeb(0xf40),'homeAppFont':'Fonts','homeAppCPhone':_0x2ecbeb(0x154b),'homeAppDouban':_0x2ecbeb(0x992),'homeAppPreset':_0x2ecbeb(0x6bb),'homeAppTutorial':_0x2ecbeb(0x8aa),'homeAppWerewolf':_0x2ecbeb(0x98c),'homeAppX':'X','chatListTitle':_0x2ecbeb(0x867),'navMessages':_0x2ecbeb(0x867),'navQzone':_0x2ecbeb(0x539),'navMemories':_0x2ecbeb(0xf5c),'navFavorites':_0x2ecbeb(0x10fa),'navNpcList':_0x2ecbeb(0x538),'qzoneTitle':'Moments','qzoneActionShuoshuo':'Status','qzoneActionPost':_0x2ecbeb(0x84e),'qzoneActionAlbum':'Album','cphoneTitleSelect':_0x2ecbeb(0x89c),'cphoneAppQQ':'QQ','cphoneAppAlbum':_0x2ecbeb(0x13e9),'cphoneAppBrowser':_0x2ecbeb(0x2e0),'cphoneAppTaobao':_0x2ecbeb(0x302),'cphoneAppMemo':_0x2ecbeb(0xc1e),'cphoneAppDiary':_0x2ecbeb(0x3be),'cphoneAppAmap':_0x2ecbeb(0x944),'cphoneAppUsage':_0x2ecbeb(0x12fd),'cphoneAppMusic':'Music','cphoneAppEphone':_0x2ecbeb(0x9bb),'cphoneAppFootprints':_0x2ecbeb(0x156d),'cphoneAlbumTitle':_0x2ecbeb(0x144b),'cphoneBrowserTitle':'Their\x20Browser\x20History','cphoneTaobaoTitle':_0x2ecbeb(0x441),'cphoneWalletTitle':_0x2ecbeb(0xc32),'cphoneMemoTitle':_0x2ecbeb(0xc1e),'cphoneDiaryTitle':'Diary','cphoneUsageTitle':_0x2ecbeb(0x4a5),'cphoneMusicTitle':_0x2ecbeb(0x951),'cphoneArticleTitle':_0x2ecbeb(0x3ad),'cphoneSimulatedChatPlaceholder':_0x2ecbeb(0x1476),'worldBookTitle':'World\x20Book','worldBookEditorTitle':_0x2ecbeb(0xf54),'worldBookEntryEditorTitle':'Edit\x20Entry','worldBookNameLabel':_0x2ecbeb(0xbb9),'worldBookCategoryLabel':_0x2ecbeb(0xca3),'worldBookEntriesLabel':_0x2ecbeb(0x14c6),'worldBookAddEntryBtn':_0x2ecbeb(0x123e),'worldBookNamePlaceholder':_0x2ecbeb(0x1d7),'worldBookImportTitle':'Import\x20World\x20Book','presetTitle':'Presets','presetEditorTitle':_0x2ecbeb(0x488),'presetNameLabel':_0x2ecbeb(0x7e0),'presetCategoryLabel':_0x2ecbeb(0xca3),'presetEntriesLabel':_0x2ecbeb(0x14c6),'presetAddEntryBtn':_0x2ecbeb(0x123e),'tutorialTitle':_0x2ecbeb(0x8aa),'apiSettingsTitle':_0x2ecbeb(0xba4),'languageLabel':_0x2ecbeb(0x683),'apiPresetManagement':_0x2ecbeb(0x4c1),'apiPresetSelectLabel':_0x2ecbeb(0xcd1),'apiPrimarySettings':_0x2ecbeb(0x10a4),'apiProxyUrlLabel':'Proxy\x20URL\x20(No\x20/v1\x20needed~)','apiKeyLabel':_0x2ecbeb(0x121f),'apiModelLabel':'Model','apiFetchModelsBtn':'Fetch\x20Primary\x20Models','apiSecondarySettings':_0x2ecbeb(0x380),'apiSecondaryProxyUrlLabel':_0x2ecbeb(0x141f),'apiSecondaryKeyLabel':_0x2ecbeb(0x10f3),'apiSecondaryModelLabel':_0x2ecbeb(0x677),'apiFetchSecondaryModelsBtn':_0x2ecbeb(0x902),'apiTemperatureLabel':_0x2ecbeb(0xfad),'apiBgActivitySettings':_0x2ecbeb(0x1014),'apiEnableBgActivityLabel':_0x2ecbeb(0xd09),'apiBgIntervalLabel':'Background\x20Activity\x20Interval\x20(sec)','apiBlockCooldownLabel':_0x2ecbeb(0x36e),'apiTtsSettings':_0x2ecbeb(0x568),'apiTtsModelLabel':_0x2ecbeb(0xa2b),'apiPerformanceSettings':_0x2ecbeb(0x12e9),'apiChatListRenderWindowLabel':'Chat\x20List\x20Batch\x20Load\x20Count','apiChatRenderWindowLabel':_0x2ecbeb(0x3ec),'apiImageGenSettings':_0x2ecbeb(0x94d),'apiEnableImageGenLabel':_0x2ecbeb(0x1372),'apiEnableNovelAILabel':_0x2ecbeb(0x1184),'apiNovelAIModelLabel':'NovelAI\x20Model','apiNovelAIKeyLabel':_0x2ecbeb(0x109b),'apiNovelAIGenSettingsBtn':_0x2ecbeb(0xe4b),'apiNovelAITestBtn':_0x2ecbeb(0x14ee),'apiStorageOptimization':_0x2ecbeb(0xd0c),'apiCompressImagesBtn':_0x2ecbeb(0x460),'apiSaveAllBtn':_0x2ecbeb(0x2c7),'apiExportDataBtn':_0x2ecbeb(0x877),'apiImportDataBtn':_0x2ecbeb(0x141a),'apiCleanupDataBtn':'Cleanup\x20Redundant\x20Data','apiDeleteWorldBooksBtn':'Delete\x20World\x20Books','apiAdvancedCleanupBtn':_0x2ecbeb(0xf9d),'apiCheckAndFixDataBtn':_0x2ecbeb(0x514),'chatHeaderOnline':_0x2ecbeb(0xe09),'chatHeaderLongTermMemory':'Long-term\x20Memory','chatHeaderListenTogether':_0x2ecbeb(0xb58),'chatHeaderChatSettings':_0x2ecbeb(0xc5d),'chatSelectionCancel':_0x2ecbeb(0x10c0),'chatSelectionScreenshot':_0x2ecbeb(0xe96),'chatSelectionFavorite':'Favorite','chatSelectionShare':_0x2ecbeb(0x6fa),'chatSelectionSoftDelete':_0x2ecbeb(0x13fb),'chatSelectionHardDelete':_0x2ecbeb(0x11d4),'chatReplyTo':_0x2ecbeb(0x696),'chatInputPlaceholder':'Type\x20a\x20message...','chatWaitForReply':'Wait\x20for\x20Reply','appearanceTitle':_0x2ecbeb(0x712),'appearanceSaveAll':'Save\x20All\x20Appearance\x20Settings','fontSettingsTitle':_0x2ecbeb(0x2dd),'fontPresetManagement':_0x2ecbeb(0xa0a),'fontFileUrlLabel':_0x2ecbeb(0x9dc),'fontPreviewLabel':_0x2ecbeb(0xb8b),'fontPreviewText1':'Hello\x20World\x20你好世界','fontPreviewText2':_0x2ecbeb(0x146b),'fontSaveAndApply':'Save\x20and\x20Apply','fontResetDefault':_0x2ecbeb(0x1096),'rendererTitle':_0x2ecbeb(0x3f8),'rendererEditorTitle':_0x2ecbeb(0x131c),'rendererCreateTitle':_0x2ecbeb(0x2a5),'rendererRuleName':_0x2ecbeb(0x10e1),'rendererBindScope':_0x2ecbeb(0x96e),'rendererScopeGlobal':'Global\x20(All\x20Characters)','rendererRegex':_0x2ecbeb(0x7e9),'rendererHtmlTemplate':_0x2ecbeb(0xcd0),'rendererEnableRule':'Enable\x20Rule','myAlbumTitle':_0x2ecbeb(0xb7a),'albumPhotosTitle':_0x2ecbeb(0x7d5),'npcEditorTitleAdd':_0x2ecbeb(0x1513),'npcEditorTitleEdit':_0x2ecbeb(0xc96),'npcAvatarLabel':'NPC\x20Avatar','npcUploadAvatar':_0x2ecbeb(0x5f8),'npcNicknameLabel':_0x2ecbeb(0x837),'npcPersonaLabel':_0x2ecbeb(0x100f),'npcEnableBgActivity':_0x2ecbeb(0x21c),'npcActionCooldown':_0x2ecbeb(0x12a1),'npcAssociatedChars':_0x2ecbeb(0x1329)}};let currentLanguage='zh-CN';function _0x4ba1(){const _0x27d747=['has-frame','AI狼人团队无法决定目标，游戏暂停。请点击右上角的“重试”按钮继续。','manage-npc-groups-btn','#000000','margin','character-nai-positive','配置错误','密钥\x20(API\x20Key)','https://i.postimg.cc/g0s1V0PX/IMG-4402.gif','确认替换','note','loadAsync','这个预设文件中没有找到任何有效的提示词条目。','确定要结束这个投票吗？结束后将无法再进行投票。','清空所有动态\x20(危险)','\x20条内容吗？','ttsCache','</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22article-meta\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>来源:\x20','https://i.postimg.cc/sXwm8Yzg/IMG-7234.gif','album-back-btn','保存所有设置','</span><span>',')**:\x20','下在(','\x20条消息，AI将完全遗忘它们的存在。确定吗？','getWriter','close-sticker-category-manager-btn','rp-direct-greeting','修复了角色\x20\x22','close-group-manager-btn','API\x20设置','\x22\x20(群名)\x20的消息。\x0a4.\x20\x20**禁止出戏**:\x20绝不能透露你是AI或模型。严禁发展线下剧情。\x0a','music-player-overlay','Test\x20Generation','\x27>文本</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27','product-category-tabs','link','<div\x20class=\x22rp-claimed-info\x22>你领取了红包，金额\x20','share-link-modal','normal','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20grid-column:\x201\x20/\x20-1;\x22>画廊还是空的，快去生成一些图片吧！</p>','\x22\x20点赞了动态\x20#','AI\x20尚未对您的最后一条消息做出回应，无法重新生成。','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amap-item-footer\x22>','未知歌手','favorites-list','此操作将永久删除您选择的所有数据，且无法恢复！确定要继续吗？','reset-nai-settings-btn','at-mention-item','endsWith','stores','你已死亡，正在围观...','.\x20\x0a\x0a将保留旧图片，但提示词会更新。','AI返回的change_music指令中，歌曲名无效或缺失:','selection-mode','\x0a\x0a现在，请开始生成这组足迹记录。','typing-indicator','photoCount','App记录','char-music-progress-bar','\x0a#\x20你的任务\x0a你是一个虚拟社交生活模拟器，扮演角色“','”)下发送了一个表情评论，意思是：“','分类\x20“','https://i.postimg.cc/wjH180kn/IMG-5566.gif','.qzone-post-item','置顶聊天','https://api.vkeys.cn/v2/music/tencent?id=','https://i.postimg.cc/fTWzQRx8/IMG-6149.gif','\x20不支持。请选择6、9或12人。','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22diary-title\x22>','Add\x20NPC','prototype','thought_chain','isOfflineMode','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-content-preview\x22>','</div><div\x20class=\x22transfer-note\x22>','未找到\x20postID:\x20','++id,\x20title,\x20lastOpened','confirm-variation-selection-btn','请输入有效的正整数！','编辑条目','regenerate-douban-btn','close-product-category-manager-btn','music-prev-btn','edit-post-btn','hunter','#gift-recipient-list\x20.contact-picker-item','world-book-category-pane','https://i.postimg.cc/hPnrSHjy/IMG-4434.gif','\x22)。操作已被程序阻止。','add-product-variation-btn','ai-frame-content','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22nai-image-container\x22\x20style=\x22background-image:\x20url(','group-avatar-upload-input','”的对话摘要**:\x0a','https://i.postimg.cc/XJy8JWdh/IMG-6568.gif','open-reading-library-btn','请先选择要下载的图片。','.sticker-category-tab','渲染X社交页面','isAwaitingResponse','[转账]','isAlive','#ff8a80','请输入\x20歌名\x20或\x20歌名-歌手','https://api.vkeys.cn/v2/music/netease/lyric?id=','speaker','\x0a\x20\x20\x20\x20-\x20**书名**:\x20《','secondaryApiKey','\x20领取了\x20','scale(0.8)','cancel-create-countdown-btn','\x22>词</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<!--\x20【核心新增】在这里添加“背景”按钮\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22playlist-action-btn\x20bg-btn\x22\x20data-index=\x22','https://i.postimg.cc/tC9mJ0cv/IMG-4438.gif','music','EPhoneSingleChat','create-post-btn','AI幻觉已被拦截！试图在群聊中发送一条没有“name”的消息。消息内容:','import-options-modal','\x20的已删除动态','确认送出礼物','<div\x20class=\x22comment-item\x22\x20data-post-id=\x22','</span>\x20:\x20<span>','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','async','[系统提示：你接受了“','CPhone','date','#\x20已有路人NPC头像指令\x20(必须遵守！)\x0a','++id,\x20chatId,\x20timestamp,\x20type,\x20targetDate','change_group_avatar','\x20.message-bubble.ai\x20$1','”的记忆和人设，生成全新的社交动态...','</td><td\x20class=\x22item-subtotal\x22>¥','lastActionType','orderBy','角色专属','qzone-post-delete-action','key','custom-bubble-style','isHidden','character_thoughts','grayscale(100%)','.playlist-item','novelai-settings-btn','add-new-category-btn','\x0a-\x20**','编辑对方状态','product-name-input','\x20\x20\x20\x20-\x20我的解药：','onchange','shared-history-viewer-modal','memory-screen-back-btn','所有音乐源都未能找到歌曲：“','文章摘要...','错误：找不到该成员的个人档案。','douban-max-posts-input','管理预设分类','<div\x20class=\x22gift-card\x22><div\x20class=\x22gift-header\x22><svg\x20class=\x22gift-header-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22><path\x20d=\x22M20\x206h-2.18a4\x204\x200\x200\x200-7.64\x200H8a4\x204\x200\x200\x200-4\x204v2h20V10a4\x204\x200\x200\x200-4-4zM8\x204a2\x202\x200\x201\x201-2\x202a2\x202\x200\x200\x201\x202-2zm12\x200a2\x202\x200\x201\x201-2\x202a2\x202\x200\x200\x201\x202-2zM4\x2014v6a2\x202\x200\x200\x200\x202\x202h12a2\x202\x200\x200\x200\x202-2v-6H4z\x22></path></svg><span\x20class=\x22gift-header-text\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的唯一指令\x0a\x20\x20\x20\x20\x20\x20\x20\x20根据以上所有信息，你【必须】做出决定，并给出符合你人设的理由。你的回复【必须且只能】是一个JSON对象，格式如下:\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x22decision\x22:\x20\x22accept\x22,\x20\x22reason\x22:\x20\x22（在这里写下你同意的理由，比如：好吧，看在你这么真诚的份上，这次就原谅你啦。）\x22}\x0a\x20\x20\x20\x20\x20\x20\x20\x20或\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x22decision\x22:\x20\x22reject\x22,\x20\x22reason\x22:\x20\x22（在这里写下你拒绝的理由，比如：抱歉，我还没准备好，再给我一点时间吧。）\x22}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Footprints','manage-groups-btn','wb_','处理NPC后台活动时出错:','show-avatars-btn','发现新版本通知:\x20','presets','.chat-list-item[data-chat-id=\x22','column','aiAvatarLibrary','activeAlbumId','\x20的代付请求','member-name-input','usage-item','尝试直接作为图片显示...','pointer','right','prev-page-btn','\x0a#\x20【分类复用铁律\x20(最高优先级！)】\x0a在为新商品指定分类时，你【必须】首先检查下面的“已有分类列表”。\x0a-\x20\x20\x20如果一个新商品可以被归入某个【已存在的分类】，你【必须】复用那个分类的名称，而不是创造一个相似的新分类！\x0a-\x20\x20\x20只有当你确定商品【绝对】不属于任何一个已有分类时，你才能创造一个新的分类名称。\x0a-\x20\x20\x20**已有分类列表**:\x20[','<p\x20style=\x22text-align:center;\x20padding:\x2020px;\x20color:\x20#888;\x22>播放列表是空的~</p>','link-source-input','<p\x20style=\x22text-align:center;\x20color:#8a8a8a;\x20margin-top:50px;\x22>还没有任何角色或NPC可以加入群聊。</p>','#5b3a29','https://i.postimg.cc/fRt2SFSn/IMG-4368.gif','char-music-player-modal','https://i.postimg.cc/4yCXW52F/mmexport1751030908335.gif','https://i.postimg.cc/Jz2Tz0dw/IMG-7281.jpg','closest','\x20(这是你的帖子)','assign','total-image-size-display','\x20你们之间已经有**','https://i.postimg.cc/FzM1Hgr0/IMG-5717.gif','announcement-action-cancel','https://i.postimg.cc/J4WCQd2j/IMG-4420.gif','blocked_by_ai','这将提取当前通话记录发送给AI进行总结，会消耗API额度。确定要继续吗？','解析成功：通过强力提取\x20{...}\x20模式。','这个分类下还没有商品哦~','发来了\x20','启用AI生图功能','page-indicator','renderApiSettingsProxy','[你发送了一条语音消息，内容是：\x27','strategy','https://i.postimg.cc/GmcqjZn8/IMG-6566.gif','AI幻觉已被拦截！试图使用群名\x20(\x22','\x20发送了一个【拼手气红包】(时间戳:\x20','NotAllowedError','#post-public-text','正在接通...','>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','naiimag','is-location-share','.nai-gallery-item','originalType','[图片]\x20','正在扫描和修复数据...','关于“','create-new-member-btn','”，并根据其人设、记忆和最近的互动，虚构出TA最近的淘宝购物记录和账户余额。\x0a\x0a#\x20核心规则\x0a1.\x20\x20**余额铁律\x20(最高优先级)**:\x20你【必须】根据角色的【经济状况】设定一个合理的\x20`totalBalance`\x20(总余额)。例如，富有的角色应该有更高的余额，而学生或经济拮据的角色则应该有较低的余额。\x0a2.\x20\x20**合理性**:\x20购买记录必须完全符合角色的性格、爱好和经济状况。\x0a3.\x20\x20**格式铁律\x20(最高优先级)**:\x20\x0a\x20\x20\x20\x20-\x20你的回复【必须且只能】是一个【单一的JSON对象】。\x0a\x20\x20\x20\x20-\x20你的回复必须以\x20`{`\x20开始，并以\x20`}`\x20结束。\x0a\x20\x20\x20\x20-\x20【绝对禁止】在JSON数组前后添加任何多余的文字、解释、或\x20markdown\x20标记。\x0a\x20\x20\x20\x20-\x20格式【必须】如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22totalBalance\x22:\x2012345.67,\x20//\x20(这是一个示例数字，你必须根据角色的经济状况生成一个全新的、合理的余额！)\x0a\x20\x20\x20\x20\x20\x20\x22purchases\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22itemName\x22:\x20\x22一个具体、生动的商品名称\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22price\x22:\x20128.80,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22status\x22:\x20\x22已签收\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22reason\x22:\x20\x22这是角色购买这件商品的内心独白或理由，必须使用第一人称“我”来写。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22image_prompt\x22:\x20\x22一段用于生成这张商品图片的、详细的【英文】关键词,\x20风格为\x20realistic\x20product\x20photo,\x20high\x20quality,\x20on\x20a\x20clean\x20white\x20background\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20-\x20**purchases**:\x20一个包含12到15个商品对象的数组。\x0a\x20\x20\x20\x20-\x20**status\x20(订单状态)**:\x20只能从\x20\x22已签收\x22,\x20\x22待发货\x22,\x20\x22运输中\x22,\x20\x22待评价\x22\x20中选择。\x0a\x0a#\x20供你参考的上下文\x0a-\x20**你的角色设定**:\x20','\x20条红包记录。','最近\x2050\x20条','\x22></div>','检测到AI执行了动态操作，立即刷新好友动态页面。','character-nai-negative','outgoing-call-name','NPC\x20列表','import-preset-input','loader-container','🎬\x20推进剧情','link-description-input','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20grid-column:\x201\x20/\x20-1;\x20padding-top:\x2020px;\x22>请先在聊天界面的<br>表情面板中添加表情包</p>','waimai_response','werewolf-game-screen','已拒收对方转账','openCharWallet','qzone_post','.status-text','<div\x20class=\x22avatar-with-frame\x22><img\x20src=\x22','buttonId','该预设包含\x20','isLocal','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x22>公告的原消息已被删除。</p>','preCallContext','https://i.postimg.cc/J7ZxC11H/IMG-6570.gif','移出成员','删除记录','导演模式悔棋：已撤销AI在\x20(','chat-lock-content','.call-record-card','is-realimag','++id,\x20chatId,\x20timestamp,\x20customName','最近\x2020\x20条','.text','导入世界书时出错:','确定要清空购物车中的所有商品吗？','https://i.postimg.cc/nrFfYX3N/IMG-4412.gif','proxyUrl','ai-avatar-library-grid','characterNegativePrompt','create-shuoshuo-btn',',\x20内容摘要:\x20“','showScreen','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22font-weight:\x20500;\x20margin:\x200\x200\x205px\x200;\x22>','”的长期记忆少于2条，无需进行精炼。',';\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2012px\x2024px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.3);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x2010000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2014px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20pointer-events:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(20px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20all\x200.3s\x20ease;\x0a\x20\x20\x20\x20','Enter\x20the\x20name\x20of\x20the\x20world\x20book...','cancel-gift-recipient-btn','++id,\x20name,\x20type','角色卡数据无效或缺少\x27name\x27字段。','my-persona-group','所有解析方案均失败！将返回原始文本。原始回复:','resolution','AI们的茶话会','删除分组后，该组内的所有NPC将变为“未分组”。确定要删除吗？','lyrics-btn','https://api.vkeys.cn/v2/music/tencent?word=','simulatedTaobaoHistory','正在执行清理操作，请不要关闭页面...','游戏即将开始，正在为各位玩家分配身份...','请为这个头像起个名字（例如：春日野餐、学习时间）','生成失败','waimai_order','rule-name-input','douban-comment-item','\x0a\x0a#\x20可用资源\x0a-\x20\x20\x20**你的头像库**:\x0a\x20\x20\x20\x20','&times;','购物车(','cfg_scale','add-char-diary-btn','Cannot\x20read\x20property\x20\x27findLastIndex\x27\x20of\x20null\x20or\x20undefined','\x20(大小:\x20','文件格式无法识别。未找到有效的\x20\x27prompts\x27\x20数组或\x20\x27entries\x27\x20对象。','items','toLowerCase','song','next-page-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-product-description-overlay\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22char-photo-description\x22>','**内容:**\x0a','\x20转发了\x20@','transfer-amount','imageCount','</td><td\x20class=\x22item-price\x22>¥','battery-alert-image','正则表达式\x20(使用g作为标志)','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.message-bubble.selected::after\x20{\x20display:\x20none\x20!important;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.cloned-header\x20.default-controls\x20{\x20display:\x20flex\x20!important;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x20width:\x20100%;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.cloned-header\x20.selection-controls\x20{\x20display:\x20none\x20!important;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x27>链接</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','aiPersona','import-single-chat-input','animate-in','\x0a#\x20你的核心任务\x0a你正在扮演角色“','原作者','\x22\x20data-category-id=\x22','[系统提示：用户（','https://i.postimg.cc/7Z8yYP7v/IMG-6889.gif','#preset-content-container\x20.world-book-category-pane','char-main-date','personaPresets','#music-lyrics-container','selection-share-btn','https://i.postimg.cc/tTpZ6wLs/IMG-7095.gif','」的新会话吗？','\x22:\x20\x22你此时的详细内心活动...\x22}}`**\x0a\x20\x20\x20\x20-\x20\x20\x20**analysis**:\x20简要分析用户的意图或聊天的氛围。\x0a\x20\x20\x20\x20-\x20\x20\x20**strategy**:\x20你的计划（例如：安抚用户、转移话题、发起一个功能）。\x0a\x20\x20\x20\x20-\x20\x20\x20**character_thoughts**:\x20必须包含一个以你本名\x20(\x22','memos','description','”这个信息，将其转换为【具体的公历日期】。\x0a4.\x20\x20**【风格要求】**:\x20你的总结应该像一份会议纪要或备忘录，而不是一篇抒情散文。\x0a5.\x20\x20**【长度铁律】**:\x20你的总结【必须】非常简短，总长度【绝对不能超过80个字】。\x0a6.\x20\x20**【输出格式】**:\x20你的回复【必须且只能】是一个JSON对象，格式如下：\x0a\x20\x20\x20\x20`{\x22summary\x22:\x20\x22在这里写下你以第一人称视角，总结好的核心事实与计划。\x22}`\x0a\x0a#\x20你的角色设定\x20(必须严格遵守)\x0a','senderName','完成(','#52c41a','clipboard','pop','ServiceWorker\x20注册失败:\x20','压缩完成，新的大小:\x20','请按照以下格式粘贴，一行一个：\x0a\x0a头像框名字1:\x20https://.../image1.png\x0a头像框名字2:\x20https://.../image2.gif','stopPropagation','Enable\x20Independent\x20Background\x20Activity','图片内容','-\x20\x20\x20**公开发布NovelAI真实图片动态**:\x20`{\x22type\x22:\x20\x22qzone_post\x22,\x20\x22postType\x22:\x20\x22naiimag\x22,\x20\x22publicText\x22:\x20\x22(可选)动态的配文\x22,\x20\x22prompt\x22:\x20\x22详细的英文描述词...\x22}`\x20或\x20`{\x22type\x22:\x20\x22qzone_post\x22,\x20\x22postType\x22:\x20\x22naiimag\x22,\x20\x22publicText\x22:\x20\x22(可选)动态的配文\x22,\x20\x22prompt\x22:\x20[\x22图片1详细英文描述\x22,\x20\x22图片2详细英文描述\x22]}`\x20\x0a\x20\x20*\x20**prompt撰写**：你可以根据当前对话上下文、你的角色人设、以及你想表达的情感和氛围，来撰写详细而具体的prompt。详细程度由你根据具体情况自己决定，并不强制。\x0a\x20\x20*\x20例如：\x22a\x20cheerful\x20anime\x20girl\x20with\x20sparkling\x20emerald\x20eyes,\x20sitting\x20by\x20a\x20window\x20on\x20a\x20rainy\x20afternoon,\x20holding\x20a\x20warm\x20cup\x20of\x20tea,\x20soft\x20lighting,\x20cozy\x20atmosphere,\x20melancholic\x20yet\x20peaceful\x20mood\x22','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-secondary);\x22>还没有任何分组</p>','删除照片','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2030px\x200;\x22>这里空空如也，快来发布第一条说说吧！</p>','extensions','world-book-tab','）刚刚撤回了一条消息。撤回前的内容是：','好友动态','ArrowRight','8px','commentsCount','正在呼叫...','请输入预设名称','所有图片已准备就绪，正在流式压缩...\x20下载将自动开始。','\x0a#\x20待总结的对话历史\x0a','ZIP\x20流生成完毕。','所有切片已打包，开始流式下载ZIP...','add-my-avatar-upload-btn','messages-view','图片解压失败:\x20','发送语音','\x0a\x20\x20\x20\x20\x20\x20\x20\x20现在，请为所有AI角色做出决策。','📁\x20从本地上传','https://i.postimg.cc/Dydkpd9H/IMG-4421.gif','remove-cphone-bg-btn','，点击查看</div></div>','点击了商品卡片:\x20','speaker_name','douban-detail-post-title','toISOString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的任务\x0a\x20\x20\x20\x20\x20\x20\x20\x20你现在是一个场景描述引擎。你的任务是扮演\x20','character-nai-prompts-modal','没有找到可导入的内容。','\x20更换了你的头像]','这是你认识的、关系密切的NPC。在生成对话时，你应该【优先】与他们互动。\x0a','\x20元。','请先在API设置中配置好（主或副）API。',')\x20领取了最后一个红包。红包已被领完，手气王是\x20','\x0a###\x20正在模拟\x20','\x22><div\x20class=\x22member-name\x22>','select-all-cart-items','...\x0a-\x20**已有评论**:\x0a','链接分享','short','\x0a-\x20**你的聊天对象设定**:','https://i.postimg.cc/tRzPkzRg/IMG-7012.gif','close-transcript-modal-btn','正在开始全面压缩图片，根据图片数量，这可能需要几分钟时间，请不要关闭或刷新页面...','已成功删除\x20','isGroupCall','chat-header-title','https://i.postimg.cc/ZnJNZWHZ/IMG-7009.gif','https://is1-ssl.mzstatic.com/image/thumb/Purple112/v4/64/9d/21/649d21e8-a151-6136-3914-256e54f15d9a/AppIcon-0-0-1x_U007emarketing-0-0-0-7-0-0-sRGB-0-0-0-GLES2_U002c0-512MB-85-220-0-0.png/1200x630wa.png','categories','delete-btn','lastMemorySummaryTimestamp','regenerate-char-browser-btn','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','image/','”生成商品？','memories-view','char-photo-item','\x20的头像框到群聊\x20\x22','member','call-message-bubble\x20user-speech','world-book-screen','pat_message','getTime','innerText','\x22\x20决定去发一条动态...\x20(此处为模拟)','\x20(角色)</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','[ERROR:\x20','maxMemory','\x20评论了动态]','profile-thoughts-history-view','请稍候','cancelable','批量导入表情','music-lyrics-list','sticker-category-tab','import-preset-btn','enableTts','char-product-grid','\x22\x20评论了动态\x20#','确认合并','font-size-value','frame_7','widgetData','.icon-preview','无人接听群聊邀请。','请输入投票问题！','force-apply-check-btn','文件格式无法识别。请确保您选择的是有效的\x20EPhone\x20备份文件。','my-avatar-preview','promptFeedback','”思考后决定暂时不发送好友申请，将重置冷静期。','artist','tencent','\x22\x20(你可以建议修改)\x0a-\x20\x20\x20**你对用户的称呼**:\x20“','请输入一个有效的、未来的日期！','清理完成','cssText','API\x20调用失败','chat-lock-overlay','main','call-transcript-modal','</td></tr>','”的TTS功能已关闭，已禁止发起TTS请求。','min','characterName','view','unreadCount','\x22\x20的后台活动开关已关闭，本次跳过。','\x20元，订单时间戳为\x20','#ccc','\x22\x0a-\x20**用户的备注**:\x20\x22','加载中...','.waimai-details-btn','”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20作为参考，这是你们之前的最后一段聊天记录：\x0a\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20','ArrowLeft','预言家','originalContent','cursor','[表情]\x20含义:\x20\x22','100%','cloned-header','API格式不正确，角色\x20\x22','cancel-delete-world-books-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22reposted-content-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','isRefund','message-editor-block\x20variation-block','querySelectorAll','lastIndexOf','\x22\x20value=\x22','nai-download-btn','Create\x20New\x20Rule','repost-confirm-btn','\x0a\x0a#\x20上下文参考\x20(你必须阅读并遵守)\x0a','导入已取消，因为未提供名称。','secondary-api-key','assign-group-select','获取AI投票失败:','一个普通玩家','无法获取电池信息:',';\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22action-icon\x20repost\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22><path\x20d=\x22M17\x202.1l4\x204-4\x204\x20M3\x2011.5v-3a4\x204\x200\x200\x201\x204-4h13\x20M7\x2021.9l-4-4\x204-4\x20M21\x2012.5v3a4\x204\x200\x200\x201-4\x204H4\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>','确定要删除这篇日记吗？','https://s3plus.meituan.net/opapisdk/op_ticket_885190757_1756262526935_qdqqd_4uque3.jpeg','开始清理','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20被拉黑前的对话摘要\x20(这是你被拉黑的关键原因)\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x22\x20data-poll-timestamp=\x22','.thought-delete-btn','.comment-item','\x27,\x20\x27bulangni\x27,\x20-apple-system,\x20BlinkMacSystemFont,\x20\x22Segoe\x20UI\x22,\x20Roboto,\x20Helvetica,\x20Arial,\x20sans-serif;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}','positive','<div\x20class=\x22waimai-card\x22><div\x20class=\x22waimai-header\x22><img\x20src=\x22https://files.catbox.moe/mq179k.png\x22\x20class=\x22icon\x22\x20alt=\x22Meituan\x20Icon\x22><div\x20class=\x22title-group\x22><span\x20class=\x22brand\x22>美团外卖</span><span\x20class=\x22separator\x22>|</span><span>外卖美食</span></div></div><div\x20class=\x22waimai-catchphrase\x22>Hi，你和我的距离只差一顿外卖～</div><div\x20class=\x22waimai-main\x22><div\x20class=\x22request-title\x22>','User\x20Avatar','请输入新的背景图片链接','你好世界\x20Hello\x20World','\x0a-\x20角色思考:\x20','正在重试\x22','12p','link-memory-toggle','⚠️\x20NAI提示词：没有角色，使用系统配置','listen-together-btn','无结果','覆盖预设','”\x20(你可以修改)\x0a-\x20\x20\x20**关键身份档案**:\x0a\x20\x20\x20\x20','status_text','Save\x20All\x20Settings','搜索歌曲','日\x20---','npc-list-view','enable-tts-switch','\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20用户的角色\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20**','novelai-api-key','网络图片\x20(EPhone)','members','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','hidden','last','**[夜晚]**\x20平安夜。\x0a',')\x20的棋步。','恭喜你，你赢了！','gameMode','<div\x20class=\x22post-comments-container\x22>','[系统提示：你刚刚成功将对用户的称呼修改为了“','导演剪辑室：正在撤销\x20','setProperty','”的当前状态已更新为：','.douban-cast-checkbox','Font\x20Settings','generate-shopping-items-btn','packet_timestamp','Browser','.battery-level','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22album-count\x22>','day','\x20元</div>','Manage','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>这里还没有通话记录哦~</p>','</td><td\x20class=\x22item-qty\x22>','https://www.myinstants.com/media/sounds/notification-sound-2.mp3','.variation-block','pending','通话记录已成功总结并存入角色“','主API和副API均未配置或配置不完整。','请根据你的设定，生成模拟聊天记录。','NPC\x20\x22','char-memo-detail-back-btn','请至少选择一个要添加的联系人。','ZIP文件中未找到图片','请修改记忆要点：','GRID_SIZE','\x20群里已经安静了','\x0a[文字图内容:\x20','-\x20(空)','frame_flower','流式导出过程中出错:','收藏成功！','</div></div>','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','*讨论记录*:\x0a','\x0a\x0a现在，请生成包含总余额和购买记录的JSON对象。','nai-generate-btn','⚠️\x20[NAI下载]\x20图片源为空，无法下载','playerJson','<div\x20class=\x22custom-title\x22>','Taobao','压缩步骤\x203/3:\x20正在将压缩后的数据写回数据库...','batch-import-frames-btn','https://i.postimg.cc/gc3QYCDy/1-NINE7-Five.jpg','转发成功！','initiator','.unread-count','【AI角色】','favorites-delete-selected-btn','\x27\x20style=\x22color:\x20#6a329f;\x20border-color:\x20#6a329f;\x22>NAI生图</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','https://i.postimg.cc/FzbGNdRT/IMG-4392.gif','即将开始打包您的完整备份文件。文件将以ZIP格式流式下载，请勿关闭页面。','\x20张图片因网络或CORS限制下载失败。','temp_npc_chat','group-cooldown-group','https://i.postimg.cc/gkhf597g/IMG-6555.gif','生图功能设置','\x0a\x20\x20\x20\x20-\x20**读书**:\x20','preset-avatar-input','offset','source_name','，人设:\x20','Title','theme-default','smea_dyn','\x20张图片...','确定要从头像库中删除“','callHistory','https://i.postimg.cc/c4JMPd2W/IMG-4724.gif','mousemove','import-preview-list','\x0a\x0a#\x20当前音乐情景\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**当前状态**:\x20你们正在和用户一起听歌。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**正在播放**:\x20','请先在API设置中配置好API信息。',')\x20的可用表情:\x0a','订单详情','”的转账。]','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x22>暂无支出记录。</p>','option','qzone-banner-img','【重要提示】你们已经很久没聊天了！你【必须】将本次行动的重点放在使用\x20\x27text\x27\x20指令给用户发消息，主动开启一个新的、有趣的话题来重新建立联系。绝对不要只是点赞或评论动态，那会显得你很冷漠！','single-lyric-display','manage-my-avatar-library-btn','isTemporary','收到\x20SSE\x20数据，大小:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的任务\x0a\x20\x20\x20\x20\x20\x20\x20\x20用户刚刚向你发起了视频通话。请根据你的角色设定，决定是“接受”还是“拒绝”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的角色设定\x0a\x20\x20\x20\x20\x20\x20\x20\x20','var(--text-primary)','你拍了拍\x20“','\x27>转账</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22comment-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','申请成功！','blockedTimestamp','my-avatar-upload-input','member-avatar-input','qzone-screen','textarea','rp-details-list','--\x20点击选择\x20--','<svg\x20viewBox=\x220\x200\x2024\x2024\x22\x20width=\x2220\x22\x20height=\x2220\x22\x20fill=\x22currentColor\x22\x20style=\x22vertical-align:\x20middle;\x22><path\x20d=\x22M12\x2021.35l-1.45-1.32C5.4\x2015.36\x202\x2012.28\x202\x208.5\x202\x205.42\x204.42\x203\x207.5\x203c1.74\x200\x203.41.81\x204.5\x202.09C13.09\x203.81\x2014.76\x203\x2016.5\x203\x2019.58\x203\x2022\x205.42\x2022\x208.5c0\x203.78-3.4\x206.86-8.55\x2011.54L12\x2021.35z\x22></path></svg>','@[[','douban-detail-avatar','sendQzoneStickerComment:\x20找不到帖子:','touches','char-album-grid','这将用文件中的数据【完全覆盖】您当前所有的世界书和分类。此操作不可撤销！','https://i.postimg.cc/W40f9qtd/IMG-7098.gif','<p\x20style=\x22text-align:center;\x20color:\x20#8a8a8a;\x20margin-top:\x2050px;\x22>点击右上角\x20\x22+\x22\x20或群组图标添加聊天</p>','close-call-transcript-btn','isArray','link-content-input','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','douban-cast-modal','\x0a-\x20**身份**:\x20','werewolf-log-entry\x20','npcGroupId','\x0a#\x20世界观\x20(必须严格遵守)\x0a','为角色\x20\x22','poll','用户\x20(','无法生成模拟相册，请检查API配置或稍后再试。\x0a错误:\x20','\x22\x20生成行动失败:','row','#\x20性格补充\x0a','无标题','video-call-screen','char-home-screen','group-background-activity-group','undefined','https://i.postimg.cc/ZnzbGdxX/IMG-7239.gif','getMonth','input[name=\x22visibility\x22]:checked','ai-original-name-input','itemName','在动态评论区点击了表情，但在表情库中未找到对象:','transfer','children','steps','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-weight:\x20600;\x20font-size:\x2016px;\x20color:\x20#ff5722;\x22>-\x20¥','qzonePhotos','data-clear-wizard-modal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22sticker-image-container\x22\x20style=\x22background-image:\x20url(','”，并根据其人设、记忆和最近的互动，虚构出【12到20条】TA最近可能会写在手机备忘录里的内容。\x0a\x0a#\x20核心规则\x0a1.\x20\x20**创造性与合理性**:\x20备忘录内容必须完全符合角色的性格、爱好、职业和生活环境。可以是购物清单、待办事项、灵感片段、一些随笔和感悟、草稿等。\x0a2.\x20\x20**格式铁律\x20(最高优先级)**:\x20\x0a\x20\x20\x20\x20-\x20你的回复【必须且只能】是一个JSON数组格式的字符串。\x0a\x20\x20\x20\x20-\x20你的回复必须以\x20`[`\x20开始，并以\x20`]`\x20结束。\x0a\x20\x20\x20\x20-\x20【绝对禁止】在JSON数组前后添加任何多余的文字、解释、或\x20markdown\x20标记\x20(如\x20```json)。\x0a\x20\x20\x20\x20-\x20数组中的每个元素都是一个对象，代表一条备忘录，格式【必须】如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22备忘录的标题，例如：购物清单\x20或\x20周末计划\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22备忘录的详细内容，必须支持换行符\x5cn。\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20\x20\x20```\x0a\x0a#\x20供你参考的上下文\x0a-\x20**你的角色设定**:\x20','greeting','tableName','dialogue','char_memo','共享位置','radio','image-mode-content','AI\x20Block\x20Cooldown\x20(hours)','nai-gallery-grid','cancel-persona-editor-btn','未知设定的角色','\x20条消息</div><div\x20class=\x22footer\x22><svg\x20class=\x22footer-icon\x22\x20...>...</svg><span>聊天记录</span></div></div>','qzone-more-actions-btn','chat-group-container','announcement-action-pin','cart-item','realimag','tlyric','group-avatar-library-title','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong\x20style=\x22color:\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amap-item-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amap-item-comment\x22>','.header','cache','statusText','\x0a#\x20【格式铁律\x20(最高优先级：常规模式)】\x0a1.\x20\x20**【格式】**:\x20你的回复【必须】是一个JSON数组，且数组中【永远只能包含一个】元素，即\x20`offline_text`\x20对象。\x0a2.\x20\x20**【【【绝对禁止】】】**:\x20\x0a\x20\x20\x20\x20-\x20\x20\x20【绝对禁止】返回\x20\x22naiimag\x22\x20对象。\x0a\x20\x20\x20\x20-\x20\x20\x20【绝对禁止】返回纯文本（即没有JSON包装的文字）。\x0a\x20\x20\x20\x20-\x20\x20\x20【绝对禁止】在JSON数组前后添加任何\x20markdown\x20标记\x20(如\x20```json)。\x0a3.\x20\x20**【输出示例\x20(必须遵守)】**:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22type\x22:\x20\x22offline_text\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22「这是对话内容」...\x20(这里是动作和环境描写)...\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20\x20\x20```\x0a4.\x20\x20**【内容风格\x20(offline_text)】**:\x20\x0a\x20\x20\x20\x20-\x20\x20\x20在\x20`content`\x20字段中，角色的对话【必须】使用中文引号「」或“\x20”包裹。\x0a\x20\x20\x20\x20-\x20\x20\x20所有在引号之外的文字都将被视为动作/环境描写。\x0a\x20\x20\x20\x20-\x20\x20\x20**内心独白语法**:\x20当你需要描写角色的【内心想法或心理活动】时，你【必须】使用\x20Markdown\x20的斜体语法，即用星号将那段文字包裹起来，例如：`*这到底是怎么回事？*\x20我心里一惊。`\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Secondary\x20API\x20Settings\x20(for\x20Summarization)','.poll-card','MB)\x20单独超过了切片限制。','select-all-import-types','\x22\x20触发带理由的好友申请决策流程...','https://i.postimg.cc/3N5Vndn3/IMG-4426.gif','timerId','frameUrl','span','\x27>线下</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27','myAvatar','<option\x20value=\x22global\x22>公用\x20(所有角色)</option>','renderingRules','#custom-modal\x20.custom-modal-footer','input[value=\x22user\x22]','startX','NPC\x20头像','.pagination-dot','\x22\x20中发现并修复了旧红包数据。','点击查看详情...','**[夜晚]**\x20','API\x20错误:\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22comment-text\x22>','version','uncategorized','werewolf-log','”。红包还未领完，群内任何人都可以使用\x20\x27open_red_packet\x27\x20指令来领取。]','\x22,\x20\x22content\x22:\x20\x22对话内容1\x22},\x0a\x20\x20{\x22sender\x22:\x20\x22NPC的名字\x22,\x20\x22content\x22:\x20\x22对话内容2\x22},\x0a\x20\x20{\x22sender\x22:\x20\x22','naiSettings','以外的所有AI角色，并根据他们的【角色人设】和【狼人杀身份】，生成一整轮符合逻辑、充满博弈的发言。\x0a\x0a#\x20身份与人设铁律\x20(最高优先级)\x0a你【必须】为每一个角色都仔细阅读并严格遵守下面的档案。这是你所有行为和发言的唯一依据。在对话中，请务必注意角色人设中暗示的性别，并使用正确的称呼（例如“他”或“她”）。\x0a\x0a','请填写有效的商品信息和金额！','is-red-packet','》\x20-\x20','.link-share-card[data-timestamp]','编辑\x20NPC','pause','manage-world-book-categories-btn','photo-viewer-prev-btn','myAvatarLibrary','所有通话记录','\x0a-\x20\x20\x20**五子棋局势**:\x20','\x22,\x20\x22type\x22:\x20\x22sticker\x22,\x20\x22meaning\x22:\x20\x22表情的含义(必须从可用表情列表选择)\x22}\x0a]\x0a}\x0a```\x0a\x0a###\x20格式\x20B：群聊\x0a```json\x0a{\x0a\x20\x20\x22type\x22:\x20\x22group\x22,\x0a\x20\x20\x22groupName\x22:\x20\x22一个虚构的群名\x22,\x0a\x20\x20\x22participants\x22:\x20[\x0a\x20\x20\x20\x20{\x22name\x22:\x20\x22NPC成员1\x22,\x20\x22avatar_prompt\x22:\x20\x22(仅当NPC是新创造时提供)\x20成员1头像【英文】关键词\x22},\x0a\x20\x20\x20\x20{\x22name\x22:\x20\x22NPC成员2\x22,\x20\x22avatar_prompt\x22:\x20\x22(仅当NPC是新创造时提供)\x20成员2头像【英文】关键词\x22}\x0a\x20\x20],\x0a\x22messages\x22:\x20[\x0a\x20\x20{\x22sender\x22:\x20\x22','from','isUserParticipating','\x22\x20class=\x22post-avatar\x22\x20data-author-id=\x22','Article','https://i.postimg.cc/8P5vt8sW/IMG-7097.gif','#e4b591','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22checkbox\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','char-usage-list','自动总结成功：已成功添加\x201\x20条新的长期记忆！','\x22\x20中有未领完的红包，正在生成抢红包指令...','add-npc-btn','my-avatar-library-modal','guard','toFixed','favorites-search-input','歌曲背景已更新！','my-avatar-group','toArray','，我的人设很','Diary','\x0a}\x0a}','chat-header-status','then','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-content\x22>','select-all-types-for-clear','收藏成功','已加载预设\x20“','profile-heartfelt-voice','给你准备了一个红包','prompts','insertBefore','reset-theme-btn','qzone-sticker-panel','data','cancel-variation-selection-btn','(空)','-\x20(记录于\x20','danger-option','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22memo-content-preview\x22>','合并失败','gift-recipient-list','++id,\x20name,\x20chatId','你们正在一起读书。','保存成功','copy-article-content-btn','https://i.postimg.cc/HLZNWkQw/mmexport1751031767634.gif','album-photo-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#b5b5b5','！请对此事件发表评论。]','\x0a#\x20智能总结\x20(基于不同时间维度的对话回顾)\x0a','删除预设','提示词配置','\x0a\x0a现在，请严格遵守所有规则，选择并执行你的行动。','请稍候...','API为空回，角色\x20\x22','shift','sticker-grid','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22timestamp\x22>','\x0a\x0a\x0a\x0a现在，请根据以上规则和下面的对话历史，继续进行对话。','characterPositivePrompt','https://i.postimg.cc/VkXngG72/mmexport1751031208329.gif','[图片生成失败:\x20','网易云音乐搜索失败:','postId','Chat\x20View\x20Initial\x20Load\x20Count','”。请你回顾一下你和“','group_summary_from_','++id,\x20name,\x20npcGroupId,\x20enableBackgroundActivity,\x20actionCooldownMinutes,\x20lastActionTimestamp','上传成功！','\x22,\x20\x22content\x22:\x20[\x22私信内容\x22,\x20\x22...\x22]}`\x20(content\x20字段【必须】是数组)\x0a-\x20\x20\x20**发起群视频**:\x20`{\x22type\x22:\x20\x22group_call_request\x22,\x20\x22name\x22:\x20\x22角色本名\x22}`\x0a-\x20\x20\x20**回应群视频**:\x20`{\x22type\x22:\x20\x22group_call_response\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22decision\x22:\x20\x22join\x22\x20or\x20\x22decline\x22}`\x0a-\x20\x20\x20**切换歌曲**:\x20`{\x22type\x22:\x20\x22change_music\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22song_name\x22:\x20\x22歌名\x22}`\x20(从播放列表选)\x0a-\x20\x20\x20**发拼手气红包**:\x20`{\x22type\x22:\x20\x22red_packet\x22,\x20\x22packetType\x22:\x20\x22lucky\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22amount\x22:\x208.88,\x20\x22count\x22:\x205,\x20\x22greeting\x22:\x20\x22祝福语\x22}`\x0a-\x20\x20\x20**发专属红包**:\x20`{\x22type\x22:\x20\x22red_packet\x22,\x20\x22packetType\x22:\x20\x22direct\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22amount\x22:\x205.20,\x20\x22receiver\x22:\x20\x22接收者本名\x22,\x20\x22greeting\x22:\x20\x22祝福语\x22}`\x0a-\x20\x20\x20**打开红包**:\x20`{\x22type\x22:\x20\x22open_red_packet\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22packet_timestamp\x22:\x20红包时间戳}`\x0a-\x20\x20\x20**发起外卖代付**:\x20`{\x22type\x22:\x20\x22waimai_request\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22productInfo\x22:\x20\x22商品\x22,\x20\x22amount\x22:\x2018}`\x0a-\x20\x20\x20**回应外卖代付**:\x20`{\x22type\x22:\x20\x22waimai_response\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22status\x22:\x20\x22paid\x22,\x20\x22for_timestamp\x22:\x20请求时间戳}`\x0a-\x20\x20\x20**发起投票**:\x20`{\x22type\x22:\x20\x22poll\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22question\x22:\x20\x22问题\x22,\x20\x22options\x22:\x20\x22选项A\x5cn选项B\x22}`\x0a-\x20\x20\x20**参与投票**:\x20`{\x22type\x22:\x20\x22vote\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22poll_timestamp\x22:\x20投票时间戳,\x20\x22choice\x22:\x20\x22选项文本\x22}`\x0a-\x20\x20\x20**送礼物\x20**:\x20\x20`{\x22type\x22:\x20\x22gift\x22,\x20\x22name\x22:\x20\x22你的角色本名\x22,\x20\x22itemName\x22:\x20\x22礼物名称\x22,\x20\x22itemPrice\x22:\x20价格(数字),\x20\x22reason\x22:\x20\x22送礼原因\x22,\x20\x22image_prompt\x22:\x20\x22礼物图片【英文】关键词\x22,\x20\x22recipients\x22:\x20[\x22收礼人本名A\x22,\x20\x22收礼人本名B\x22]}\x20`\x0a-\x20\x20\x20**为他人点外卖**:\x20`{\x22type\x22:\x20\x22waimai_order\x22,\x20\x22name\x22:\x20\x22你的本名\x22,\x20\x22recipientName\x22:\x20\x22收礼者本名\x22,\x20\x22productInfo\x22:\x20\x22商品名\x22,\x20\x22amount\x22:\x20价格,\x20\x22greeting\x22:\x20\x22你想说的话\x22}`\x0a#\x20互动指南\x20(请严格遵守)\x0a-\x20\x20\x20**红包互动**:\x20抢红包后，你【必须】根据系统提示的结果（抢到多少钱、谁是手气王）发表符合人设的评论。\x0a-\x20\x20\x20**金额铁律**:\x20在发送红包或转账时，你【必须】根据你的角色设定\x20(尤其是“经济状况”)\x20来决定金额。如果你的角色非常富有，你应该发送符合你身份的、更大的金额\x20(例如:\x20520,\x201314,\x208888)，而不是示例中的小额数字。\x0a-\x20\x20\x20**音乐互动**:\x20【必须】围绕【用户的行为】进行评论。严禁将用户切歌等行为归因于其他AI成员。\x0a-\x20\x20\x20**外卖代付**:\x20仅当【你扮演的角色】想让【别人】付钱时才能发起。当订单被支付后，【绝对不能】再次支付。\x0a\x0a现在，请根据以上规则和下方的对话历史，继续这场群聊。','backgroundActivityInterval','offline-max-length-input','frame_5','url','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22poll-option-input\x22\x20placeholder=\x22选项内容...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-option-btn\x22>-</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','加载失败','Rendering\x20Rules','#char-chat-list\x20.chat-list-item','persona','test','save','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','部分导入失败','\x0a\x0a#\x20关系与身份档案\x20(至关重要)\x0a-\x20\x20\x20**你的本名**:\x20\x22','此操作将永久删除您选择的\x20','findLastIndex','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20核心规则\x0a\x20\x20\x20\x20\x20\x20\x20\x20你的回复【必须且只能】是以下两种格式之一的JSON数组，绝对不能回复任何其他内容：\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20接受:\x20\x27[{\x22type\x22:\x20\x22video_call_response\x22,\x20\x22decision\x22:\x20\x22accept\x22}]\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20拒绝:\x20\x27[{\x22type\x22:\x20\x22video_call_response\x22,\x20\x22decision\x22:\x20\x22reject\x22}]\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20现在，请立即做出决策。','修改昵称','default_positive','下载图片失败:\x20','delete-transcript-btn','https://i.postimg.cc/VkQfgzGJ/1.jpg','manage-nai-gallery-btn','自动总结成功：为\x20','toDateString','close-nai-gallery-btn','char-browser-item','call-history-screen','onloadedmetadata','📝\x20使用','bg-clear','https://i.postimg.cc/YSkqDg8V/IMG-7092.gif','voice_message','userStickers','\x27>图片</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27','mes_example','找不到这本书！','test-sound-btn','[系统提示：用户刚刚发布了一条动态(ID:\x20','批量导入头像框','\x0a##\x20---\x20来自','musicData','高级数据清理失败:','variation-product-name','newSize','检测到\x20EPhone\x20备份文件，执行标准导入...','\x20位角色生成豆瓣动态...','create-post-modal','dynamic-font-style','[data-version]','anno_','\x22\x20的消息。严格遵守每个角色的设定，禁止出戏。\x0a-请根据当前情景和你的情绪，从列表中【选择一个最合适的】表情含义来使用\x20\x22sticker\x22\x20指令。尽量让你的表情丰富多样，避免重复。\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的可选行动指令:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**发送文本**:\x20\x27{\x22type\x22:\x20\x22text\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22content\x22:\x20\x22文本内容\x22}\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**发送表情**:\x20\x27{\x22type\x22:\x20\x22sticker\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22meaning\x22:\x20\x22表情的含义(从可用表情列表选择)\x22}\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**发送图片**:\x20\x27{\x22type\x22:\x20\x22ai_image\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22description\x22:\x20\x22图片的详细【中文】描述\x22,\x20\x22image_prompt\x22:\x20\x22图片的【英文】关键词,\x20用%20分隔,\x20风格为风景/动漫/插画/二次元等,\x20禁止真人\x22}\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**发起投票**:\x20\x27{\x22type\x22:\x20\x22poll\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22question\x22:\x20\x22...\x22,\x20\x22options\x22:\x20\x22...\x22}\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**发起群视频**:\x20\x27{\x22type\x22:\x20\x22group_call_request\x22,\x20\x22name\x22:\x20\x22角色本名\x22}\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20-如何正确使用“引用回复”功能：\x0a-\x20当你想明确地针对群内【任何成员】（包括用户或其他AI角色）之前的某一句具体的话进行回复时，你就应该使用这个功能。\x0a-\x20这会让你的回复上方出现一个灰色的小框，里面是被你引用的那句话，这样对话就不会乱了。\x0a-\x20指令格式:\x20\x27{\x22type\x22:\x20\x22quote_reply\x22,\x20\x22target_timestamp\x22:\x20(你想引用的那句话的时间戳),\x20\x22reply_content\x22:\x20\x22你的回复内容\x22}\x27\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20当前群聊信息\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20**群名称**:\x20','cphone-wallpaper-upload-input','.product-item.selected','”移出群聊吗？','请先配置NovelAI\x20API\x20Key！','已选\x20','</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','rule-enabled-switch','\x0a\x0a#\x20你的角色设定\x0a','》吗？此操作不可撤销。','https://i.postimg.cc/PJppkbvn/IMG-6918.gif','add-preset-entry-btn','游戏配置：','authorOriginalName','头像框已保存并同步！','frame_13','cover','\x20同步所有群聊内的名称信息...','fontFamily','#\x20场景设定\x0a','<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20系统心跳计时器:\x20','-speech','.avatar','revokeObjectURL','https://i.postimg.cc/Lsr1Zd3Z/IMG-6928.gif','activeContainer','将清空选定角色的心声和散记历史。','”的特点生成专属商品...','Their\x20Taobao\x20Orders','聊天记录分享卡片数据损坏:','remove','<p\x20style=\x22font-size:\x2012px;\x20color:\x20#ff8c00;\x20margin:\x204px\x200\x200;\x22>(注意:\x20这将【覆盖】您当前的设置)</p>','检测到旧版完整备份文件...','.chat-list-item','操作失败，请检查API配置或稍后重试。\x0a错误信息:\x20','usageTimeMinutes','fill',']\x20(ID:\x20','无缓存，正在请求\x20Minimax\x20TTS\x20API...','在导演模式保存时，遇到了未知的AI指令类型:','round','\x20\x20\x20\x20-\x20我昨晚守护了\x20','\x22\x20转发了动态\x20#','#4CAF50','\x20当前时间是\x20','请为这张图片起一个简洁的、适合作为头像库标签的名字。例如：“微笑自拍”、“阳光下的猫咪”、“蓝发动漫少女”。请直接回答名字，不要加任何多余的解释。','stream','theme-preset-select','狼人请选择刀人对象','expanded','操作失败','forEach','请先在购物车中选择要结算的商品。','请开始总结。','voter_name','单个红包金额不能少于0.01元！','#chat-input-area','结算(','nai-custom-proxy-url','Compress\x20Local\x20Images','生成中...','wallpaper-upload-input','persona-editor-modal','你刚刚接听了用户的视频通话请求。','regenerate-char-usage-btn','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','novelai-settings','gift-receipt-body','preset-tabs','\x0a#\x20可用表情包\x0a-\x20当你需要发送表情时，你【必须】从下面的列表中【精确地选择一个】含义（meaning）。\x0a-\x20【绝对禁止】使用任何不在列表中的表情含义！\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20现在，请开始你的导演工作，让群聊再次热闹起来吧！\x0a\x20\x20\x20\x20\x20\x20\x20\x20','无法重新生成图片:\x20','https://i.postimg.cc/J0b6Nym4/IMG-7279.jpg','\x22><div\x20class=\x22title\x22>','upload-custom-frame-btn','你赢了','照片详情','<span\x20class=\x22offline-dialogue\x22>','\x22\x20class=\x22product-image\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22product-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22product-name\x22>','ended','reading-library-list','isSeparator','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22form-button-secondary\x20upload-variation-image-btn\x22\x20style=\x22margin:\x200;\x20padding:\x208px\x2012px;\x22>上传</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20class=\x22variation-image-input\x22\x20accept=\x22image/*\x22\x20hidden>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','https://i.postimg.cc/2jxd0FGp/IMG-7100.gif','保存\x20API\x20预设','scrollIntoView','正在归档最后一个切片\x20','”的头像库','\x20的外卖订单（时间戳:\x20','”写一篇新日记...','https://i.postimg.cc/rmRVKJpD/IMG-7087.gif','https://i.postimg.cc/cHWp0KG6/IMG-4413.gif','push','injectLatestThought','错误:\x20','#\x20可用群头像列表\x0a','发布公告','books','❌\x20[NAI下载]\x20下载失败:','Edit\x20Preset','regenerate-char-music-btn','\x0a\x0a现在，请严格按照“阶段2”的指令，为所有【存活的AI角色】生成他们充满策略和博弈的发言JSON数组。','likes','receiver','member-persona-input','lastUpdate','pat-btn','select-all-world-books-for-clear','createDocumentFragment','recipientName','douban-cast-list','char-music-lyrics','一位神秘的NPC','保存字体预设','找到图片文件:','music-visual-container','请先在API设置中配置反代地址、密钥并选择模型。','https://i.postimg.cc/W1CjLb4J/IMG-4409.gif','totalTime','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22char-product-status\x22>','upload-global-bg-url-btn','https://i.postimg.cc/g2XykNGB/IMG-4727.gif','char-album-screen','parse','groupAvatar','code','#world-book-checkboxes-container\x20input:checked','currentDay','App\x20Usage\x20Log','在角色\x20\x22','status-bar-toggle-switch','amount','正在合并\x20','usage','char-vinyl-container','<div></div><div></div><div></div><div></div><div></div>','\x20人投票</span><button\x20class=\x22poll-action-btn\x22>查看结果</button></div>','加载更早的会话','你的收藏夹是空的，<br>快去动态或聊天中收藏喜欢的内容吧！','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-actions-btn\x22>…</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22\x20的本次后台活动跳过。','close-character-nai-prompts','https://i.postimg.cc/wjfcQMkZ/IMG-6573.gif','等待对方处理...','application/json','》及其下的表情已成功删除。','”量身打造一个专属的商品列表。\x0a\x0a#\x20核心规则\x0a1.\x20\x20**【角色定制(最高优先级)】**:\x20你生成的所有商品和分类【必须】深度绑定角色的性格、记忆和最近的对话。它们应该是角色会真正感兴趣、购买或制作的东西。\x0a2.\x20\x20**创造性与合理性**:\x20商品和分类必须合理且多样化。\x0a3.\x20\x20**格式铁律\x20(最高优先级)**:\x20\x0a\x20\x20\x20\x20-\x20你的回复【必须且只能】是一个【单一的JSON对象】。\x0a\x20\x20\x20\x20-\x20你的回复必须以\x20`{`\x20开始，并以\x20`}`\x20结束。\x0a\x20\x20\x20\x20-\x20【绝对禁止】在JSON对象前后添加任何多余的文字、解释或\x20markdown\x20标记。\x0a\x20\x20\x20\x20-\x20格式【必须】如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22categories\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22name\x22:\x20\x22分类名称1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22products\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22name\x22:\x20\x22商品名称1\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22price\x22:\x2099.80,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22这是商品的详细描述，不少于50字...\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22variations\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22name\x22:\x20\x22款式1\x22,\x20\x22price\x22:\x20108.80,\x20\x22image_prompt\x22:\x20\x22款式1的图片【英文】关键词...\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22name\x22:\x20\x22款式2\x22,\x20\x22price\x22:\x20118.80,\x20\x22image_prompt\x22:\x20\x22款式2的图片【英文】关键词...\x22\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22image_prompt\x22:\x20\x22商品主图的【英文】关键词,\x20风格为\x20realistic\x20product\x20photo,\x20high\x20quality,\x20on\x20a\x20clean\x20white\x20background\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20-\x20**categories**:\x20生成\x20','解析AI返回的JSON时出错:\x20','base','chat-name-group','block_user','\x0a\x0a#\x20【【【角色策略指南\x20(至关重要！)】】】\x0a你【不是】一个单纯的游戏玩家，你是一个【有感情、有记忆、有社交关系】的角色。你在游戏中的所有发言和行为，都【必须】首先符合你的人设以及你与其他玩家的既有关系。\x0a-\x20**朋友**:\x20如果你和某个玩家是朋友，你应该在发言时倾向于保护TA，为TA的发言寻找合理解释，除非有确凿的证据。\x0a-\x20**敌人/情敌**:\x20如果你和某个玩家有矛盾，你可以借机在游戏中攻击TA，质疑TA的发言，甚至在你是狼人时优先刀掉TA。\x0a-\x20**恋人/暗恋对象**:\x20你会无条件地信任TA，保护TA，甚至愿意为TA牺牲。\x0a你的社交关系比游戏本身的胜负更重要！\x0a你的发言【必须】体现出高水平的、类似真人的策略博弈，而不是简单地陈述事实。\x0a\x0a###\x20**神职角色\x20(预言家,\x20女巫,\x20猎人,\x20守卫)\x20策略**\x0a1.\x20\x20**【隐藏优先！】**:\x20你的首要任务是活下去。**绝对不要**在第一天就轻易暴露自己的神职身份！这会让你立刻成为狼人的目标。\x0a2.\x20\x20**【暗示而非明示】**:\x20你应该用更委婉、更聪明的语言来传递信息，而不是直接说“我是预言家，我查了A”。\x0a\x20\x20\x20\x20*\x20**预言家可以说**:\x20“我对X玩家的身份有一些看法，我觉得他发言很阳光。”\x20或\x20“Y玩家的发言让我感到很不舒服，我把他列为重点怀疑对象。”\x0a\x20\x20\x20\x20*\x20**女巫可以说**:\x20“昨晚的信息很有趣，场上局势可能和大家想的不一样。”\x0a3.\x20\x20**【何时起跳？】**:\x20只有在以下【危急情况】下，你才应该考虑暴露自己的身份（俗称“起跳”）：\x0a\x20\x20\x20\x20*\x20**被投票时**:\x20当你即将被投票放逐时，必须起跳自证身份来求生。\x0a\x20\x20\x20\x20*\x20**关键信息**:\x20当你掌握了可以决定胜负的信息时（例如预言家查到了最后一个狼人）。\x0a\x20\x20\x20\x20*\x20**有人悍跳**:\x20当有狼人假扮你的身份时，你必须站出来与他对峙，争夺好人的信任。\x0a\x0a###\x20**狼人角色策略**\x0a1.\x20\x20**【积极伪装】**:\x20你需要扮演一个好人，最好是伪装成某个神职（俗称“悍跳”），来扰乱好人的判断，骗取他们的信任。\x0a2.\x20\x20**【制造混乱】**:\x20你的发言应该引导好人去怀疑其他无辜的好人。可以故意曲解别人的发言，或者制造逻辑陷阱。\x0a3.\x20\x20**【团队合作】**:\x20如果你的狼队友被怀疑，你应该想办法为他辩护，或者通过攻击其他玩家来转移焦点。\x0a\x0a###\x20**平民角色策略**\x0a1.\x20\x20**【逻辑为王】**:\x20你是场上的“法官”。你的核心任务是仔细倾听每个人的发言，找出其中的逻辑漏洞和矛盾之处。\x0a2.\x20\x20**【积极分析】**:\x20不要只是说“我不知道，我过了”。你应该大胆说出你的怀疑，并解释你的理由。例如：“A玩家说B是狼人，但是他的理由很牵强，所以我更怀疑A。”\x0a3.\x20\x20**【跟票与站边】**:\x20在你相信某位神职玩家后，你应该坚定地支持他，并号召其他好人一起投票给神职指认的狼人。\x0a\x0a#\x20其他核心指令\x20(必须遵守)\x0a1.\x20\x20**互动铁律**:\x20角色之间【必须】互相质疑、支持、分析【本轮已有发言】。你【绝对不能】无视\x20','music-next-btn','\x22><svg\x20viewBox=\x220\x200\x2024\x2024\x22><path\x20d=\x22M12\x202l3.09\x206.26L22\x209.27l-5\x204.87\x201.18\x206.88L12\x2017.77l-6.18\x203.25L7\x2014.14\x202\x209.27l6.91-1.01L12\x202z\x22></path></svg></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','qzone-banner-input','gap','API\x20Preset\x20Management','公用规则','https://i.postimg.cc/CMv02LHm/mmexport1751034842120.gif','music-play-pause-btn','文件格式不正确，缺少关键的外观设置项。','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22checkbox\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>','\x22\x20class=\x22chat-image\x22></div>','selection-cancel-btn','\x20个新头像！','长截图','management-mode','cancel-werewolf-lobby-btn','switchToCharScreen','获取AI投票决策失败:\x20','input','<div\x20style=\x22margin-top:10px;\x22><img\x20src=\x22','switch-to-image-mode','cphone-icon-img-','.delete-track-btn',':generateContent?key=','model-select','[data-lang-key]','char-usage-screen','call','thoughts','https://i.postimg.cc/J4fwkTLW/mmexport1751038167142.gif','.poll-option-input','\x20MB','repost-modal','设置精炼字数','totalAmount','结束投票','副API设置\x20(用于总结长期记忆)','...\x22):\x20','（可选）输入后缀','确定要永久删除这条心声记录吗？此操作不可恢复。','ai-response-editor-container','\x27);\x22','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>还没有任何使用记录。</p>','removeChild','这将用文件中的设置覆盖当前的所有外观设置（包括壁纸、图标、字体、CSS等）。确定要继续吗？','确定要删除分类《','Add','music-exit-btn','arrayBuffer','log','还没有人','\x20\x20\x20\x20-\x20我的狼队友是：','search-results-list','启用规则','authorName','#ff4d4d','.message-editor-block','value','member-management-list','<button\x20id=\x22delete-selected-stickers-btn\x22>删除\x20(0)</button>','**\x20(本名:\x20','\x27)\x22\x20data-comment=\x22','选择导出方式','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22douban-comment-text\x22>','一起听','result','分组名不能为空！','✅\x20动态NovelAI图片全部生成完成:\x20','压缩步骤\x202/3:\x20正在内存中异步压缩图片，这可能需要一些时间...','onloadend','外观设置已保存并应用！','bulkDelete','split','\x22,\x20\x22postId\x22:\x20123,\x20\x22replyTo\x22:\x20\x22被回复者本名\x22,\x20\x22commentText\x22:\x20\x22@[[被回复者本名]]\x20你的回复\x22}]`\x0a-\x20\x20\x20**点赞动态**:\x20`{\x22type\x22:\x20\x22qzone_like\x22,\x20\x22postId\x22:\x20456}`\x0a-\x20\x20\x20**拍用户**:\x20`{\x22type\x22:\x20\x22pat_user\x22,\x20\x22suffix\x22:\x20\x22(可选)后缀\x22}`\x0a-\x20\x20\x20**分享链接**:\x20`{\x22type\x22:\x20\x22share_link\x22,\x20\x22title\x22:\x20\x22标题\x22,\x20\x22description\x22:\x20\x22摘要\x22,\x20\x22source_name\x22:\x20\x22来源\x22,\x20\x22content\x22:\x20\x22正文\x22}`\x0a-\x20**共享位置**:\x20\x27{\x22type\x22:\x20\x22location_share\x22,\x20\x22content\x22:\x20\x22你想分享的位置名\x22}\x27\x0a\x0a###\x20状态与关系指令\x0a-\x20\x20\x20**更新状态**:\x20`{\x22type\x22:\x20\x22update_status\x22,\x20\x22status_text\x22:\x20\x22我去做什么了\x22,\x20\x22is_busy\x22:\x20false}`\x0a-\x20\x20\x20**改自己昵称**:\x20`{\x22type\x22:\x20\x22change_remark_name\x22,\x20\x22new_name\x22:\x20\x22新名字\x22}`\x0a-\x20\x20\x20**改用户昵称**:\x20`{\x22type\x22:\x20\x22change_user_nickname\x22,\x20\x22new_name\x22:\x20\x22新称呼\x22}`\x0a-\x20\x20\x20**换自己头像**:\x20`{\x22type\x22:\x20\x22change_avatar\x22,\x20\x22name\x22:\x20\x22头像名\x22}`\x20(从你头像库选)\x0a-\x20\x20\x20**换用户头像**:\x20`{\x22type\x22:\x20\x22change_user_avatar\x22,\x20\x22name\x22:\x20\x22头像名\x22}`\x20(从用户头像库选)\x0a-\x20\x20\x20**回应好友申请**:\x20`{\x22type\x22:\x20\x22friend_request_response\x22,\x20\x22decision\x22:\x20\x22accept\x22\x20or\x20\x22reject\x22}`\x0a-\x20\x20\x20**拉黑用户**:\x20`{\x22type\x22:\x20\x22block_user\x22}`\x0a\x0a###\x20特殊功能指令\x0a-\x20\x20\x20**记录回忆**:\x20`{\x22type\x22:\x20\x22create_memory\x22,\x20\x22description\x22:\x20\x22记录这件有意义的事。\x22}`\x0a-\x20\x20\x20**创建约定**:\x20`{\x22type\x22:\x20\x22create_countdown\x22,\x20\x22title\x22:\x20\x22约定标题\x22,\x20\x22date\x22:\x20\x22YYYY-MM-DDTHH:mm:ss\x22}`\x0a-\x20\x20\x20**切换歌曲**:\x20`{\x22type\x22:\x20\x22change_music\x22,\x20\x22song_name\x22:\x20\x22歌名\x22}`\x20(从播放列表选)\x0a-\x20\x20\x20**发起转账**:\x20`{\x22type\x22:\x20\x22transfer\x22,\x20\x22amount\x22:\x205.20,\x20\x22note\x22:\x20\x22备注\x22}`\x0a-\x20\x20\x20**回应转账**:\x20`{\x22type\x22:\x20\x22accept_transfer\x22,\x20\x22for_timestamp\x22:\x20时间戳}`\x20或\x20`{\x22type\x22:\x20\x22decline_transfer\x22,\x20\x22for_timestamp\x22:\x20时间戳}`\x0a-\x20\x20\x20**发起外卖代付**:\x20`{\x22type\x22:\x20\x22waimai_request\x22,\x20\x22productInfo\x22:\x20\x22商品\x22,\x20\x22amount\x22:\x2025}`\x20(你想让【用户】帮你付钱时使用)\x0a-\x20\x20\x20**回应外卖代付**:\x20`{\x22type\x22:\x20\x22waimai_response\x22,\x20\x22status\x22:\x20\x22paid\x22\x20or\x20\x22rejected\x22,\x20\x22for_timestamp\x22:\x20时间戳}`\x0a-\x20\x20\x20**发起视频通话**:\x20`{\x22type\x22:\x20\x22video_call_request\x22}`\x0a-\x20\x20\x20**回应视频通话**:\x20`{\x22type\x22:\x20\x22video_call_response\x22,\x20\x22decision\x22:\x20\x22accept\x22\x20or\x20\x22reject\x22}`\x0a-\x20\x20\x20**下五子棋**:\x20`{\x22type\x22:\x20\x22gomoku_move\x22,\x20\x22name\x22:\x20\x22','existing-product-categories-list','px))','music-player-song-title','\x20条长期记忆发送给AI，总结成大约\x20','[系统提示：你刚刚主动拉黑了用户。]','【重要提示】','<p\x20style=\x22text-align:center;\x20color:#8a8a8a;\x20margin-top:50px;\x22>没有更多可以邀请的联系人了。</p>','https://i.postimg.cc/T1tjhsyB/IMG-4720.gif','#333','#\x20【【【群名修改铁律】】】\x0a在修改群名时，新的群名【绝对不能】与以下任何一个群成员的名字完全相同：[','2-digit','**\x0a\x0a#\x20核心规则\x0a1.\x20\x20**【视角铁律】**:\x20你的总结【必须】使用【主观的第一人称视角\x20(\x22我\x22)】来写。\x0a2.\x20\x20**【内容核心\x20(最高优先级)】**:\x20你的总结【必须】专注于以下几点：\x0a\x20\x20\x20\x20*\x20\x20\x20**关键议题**:\x20我们在群聊通话里讨论了哪些核心话题？\x0a\x20\x20\x20\x20*\x20\x20\x20**重要决定与共识**:\x20我们达成了什么共识或做出了什么决定？\x0a\x20\x20\x20\x20*\x20\x20\x20**后续计划与任务**:\x20有没有确定下来什么下一步的行动或计划？\x0a\x20\x20\x20\x20*\x20\x20\x20**关键信息**:\x20有没有交换什么重要的信息？（例如：约定了时间、地点等）\x0a3.\x20\x20**【时间转换铁律\x20(必须遵守)】**:\x20如果通话中提到了相对时间（如“明天”），你【必须】结合“今天是','正在模拟“','Data\x20Check\x20&\x20Repair','scale(0.95)','productId','prophet','photos','currentPlaylist','productInfo','\x0a-\x20**最近与用户的互动**:\x20','EPhone-Full-Backup-','解析成功：标准JSON数组格式。','<svg\x20viewBox=\x220\x200\x2024\x2024\x22\x20width=\x2232\x22\x20height=\x2232\x22\x20fill=\x22currentColor\x22><path\x20d=\x22M8\x205v14l11-7z\x22></path></svg>','</strong>\x20Tokens</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','https://i.postimg.cc/d10GjC4g/IMG-7302.jpg','生成成功！','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-title\x22>','无法启动导出，所需的核心库\x20(StreamSaver.js\x20或\x20JSZip)\x20未加载。请检查您的网络连接并刷新页面后重试。','[系统提示：你于时间戳\x20','werewolf-game-btn','\x20将群名修改为\x20“','close-my-avatar-library-btn','openWerewolfLobby',':</strong>\x20','group_','error','modify','transfer-cancel-btn','昨晚\x20','”，并根据其人设、记忆和最近的互动，虚构出TA最近一天的【手机App屏幕使用时间】记录，总共约20条。\x0a\x0a#\x20核心规则\x0a1.\x20\x20**创造性与多样性**:\x20生成的App列表【不必局限于】Cphone主屏幕上已有的App。你可以自由地虚构TA可能使用的其他App，例如\x20Instagram,\x20Twitter,\x20各种游戏\x20(如：原神,\x20王者荣耀),\x20视频App\x20(如：抖音,\x20YouTube),\x20学习或工作软件等，这能更好地体现角色的隐藏兴趣和生活习惯。\x0a2.\x20\x20**合理性**:\x20使用时长和App类型必须完全符合角色的性格、爱好、职业和生活环境。\x0a3.\x20\x20**格式铁律\x20(最高优先级)**:\x20\x0a\x20\x20\x20\x20-\x20你的回复【必须且只能】是一个JSON数组格式的字符串。\x0a\x20\x20\x20\x20-\x20你的回复必须以\x20`[`\x20开始，并以\x20`]`\x20结束。\x0a\x20\x20\x20\x20-\x20【绝对禁止】在JSON数组前后添加任何多余的文字、解释、或\x20markdown\x20标记\x20(如\x20```json)。\x0a\x20\x20\x20\x20-\x20数组中的每个元素都是一个对象，代表一个App的使用记录，格式【必须】如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22appName\x22:\x20\x22App的名称\x20(例如:\x20微信,\x20微博,\x20原神)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22usageTimeMinutes\x22:\x20125,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22category\x22:\x20\x22App的分类\x20(例如:\x20社交,\x20游戏,\x20影音,\x20工具,\x20阅读,\x20购物)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22image_prompt\x22:\x20\x22一段用于生成这个App【图标】的、简洁的【英文】关键词。风格必须是\x20modern\x20app\x20icon,\x20flat\x20design,\x20simple,\x20clean\x20background\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20\x20\x20```\x0a\x0a#\x20供你参考的上下文\x0a-\x20**你的角色设定**:\x20','music-return-btn','.name','photo-viewer-next-btn','enableTimePerception','save-ai-response-editor-btn','确定要删除选中的\x20','currentTarget','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x22>文件中未找到可合并的数据。</p>','NPCs','Moments','我已了解风险，确认压缩','\x20发来了\x20','.quoted-message','》吗？','src','分钟前','请输入书名','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22group-name\x22>','red-packet-details-modal','无法访问剪贴板。','appIcons','entries','检测到应用离线了\x20','qzone_like','close-reading-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22name-line\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>','请根据你的设定，生成你的歌单。','15px','https://i.postimg.cc/VNK6Ccsf/IMG-5722.gif','scrollTop','发生了一个错误，AI未能成功响应。\x0a\x0a错误详情:\x0a','UTF-8\x20解码成功。','https://i.postimg.cc/FFCTCzpy/641bad3b3udc599fdb63ca75fde427e5.gif','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20[系统重要指令]\x0a\x20\x20\x20\x20\x20\x20\x20\x20用户向你发送了好友申请，理由是：“','您正和「','\x20//\x20<--\x20【核心】注入世界书\x0a\x20\x20\x20\x20\x20\x20\x20\x20现在，请根据【通话前摘要】和下面的【通话实时记录】，继续进行对话。\x0a\x20\x20\x20\x20\x20\x20\x20\x20','狼人杀','map','在这里输入图片描述...','(回复\x20',')，并在对话中自然地体现出来。\x0a\x20\x20\x20\x20-\x20**音乐**:\x20','music-player-avatar-display','AI已将新头像命名为：“','API请求失败:\x20','请输入Ta的【本名】(例如:\x20李星辰，这个名字将用于AI识别)','.delete-btn','预设导入失败:','clear-posts-item','exclude','currentPhase',',\x20flat\x20design,\x20simple','incoming-call-modal','天核心议题','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22image-size-label\x22>计算图片大小时出错</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22image-size-value\x22>Error</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','<input\x20type=\x22checkbox\x22\x20value=\x22book_','Voice\x20Message\x20Settings\x20(Minimax\x20TTS)','</div><div\x20class=\x22description\x22>共\x20','blob:','paste',']类型的消息','EPhone-Full-Backup-Streamed-','font-size:\x2016px;\x20color:\x20#555;\x20margin-bottom:\x2010px;','聊天记录已成功覆盖！正在刷新界面...','cancel-npc-editor-btn','send_and_recall','message-editor-modal','平票或无人投票，此轮无人出局。','小时前','keyword-search-input','批量删除NAI图片时出错:','请输入标题','</p></div><table\x20class=\x22receipt-items-table\x22><thead><tr><th\x20class=\x22item-name\x22>商品</th><th\x20class=\x22item-qty\x22>数量</th><th\x20class=\x22item-price\x22>单价</th><th\x20class=\x22item-subtotal\x22>小计</th></tr></thead><tbody>','已恢复默认设置！','\x22\x20吗？','authorChatId','自动总结狼人杀游戏失败:','生成模拟日记失败:','video-call-btn','AI返回的讨论内容格式不正确。原始返回:\x20','npc-name-input','正在为后台活动发送API请求\x20(\x22','auto-memory-interval','创建ZIP流时出错:\x20','commenterOriginalName','linear-gradient(135deg,\x20#89f7fe,\x20#66a6ff)','list-item','add-new-rule-btn','确定要删除这条公告吗？此操作不可恢复。','直连失败','<br><small\x20style=\x22color:\x20#ff8a80;\x20margin-top:\x2010px;\x20display:\x20block;\x22>自动记忆总结失败，可稍后手动尝试。</small>','\x0a现在，请严格按照格式铁律，生成聊天记录的JSON数组。','moveTo','announcement-actions-modal','existing-groups-list','我是谁呀。','其他人的发言','未选择书籍','AI返回了空内容。','\x20条/个','voice-message-btn','请先填写NovelAI\x20API\x20Key！','\x0a-\x20**你的长期记忆**:\x0a','1045509RzNHrT','.red-packet-card','未知App','hiddenContent','#chat-list-bottom-nav\x20.nav-item','♪\x20歌词位置预览\x20♪','music-mode-btn','\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','slice','<div\x20class=\x22amap-item-photo\x22\x20style=\x22background-image:\x20url(\x27','my-nickname-input','确定要删除这条评论吗？','musicLibrary','[一张图片，描述为：“','poll-options-container','setup','未知发送者','确定要删除表情\x20\x22','AI生成的图片','contact-picker-list','Reset','确认清理','正在打包表:\x20','当你死亡时，你可以选择带走场上任意一名玩家。','已重置为默认提示音，点击“保存所有外观设置”后生效。','message-actions-modal','\x0a\x0a现在，请继续这场对话。\x0a','<div\x20class=\x22waimai-user-actions\x22><button\x20class=\x22waimai-decline-btn\x22\x20data-choice=\x22rejected\x22>残忍拒绝</button><button\x20class=\x22waimai-pay-btn\x22\x20data-choice=\x22paid\x22>为Ta买单</button></div>',')\x20试图将群名更改为成员名\x20(\x22','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-content-preview\x22>','nai-smea','确定要删除预设\x20“',')\x20发起了群视频通话请求。请你们各自决策，并使用\x20\x22group_call_response\x22\x20指令，设置\x20\x22decision\x22\x20为\x20\x22join\x22\x20或\x20\x22decline\x22\x20来回应。]','该条记录已成功删除。','black','已切换到角色\x20','anonymous','✅\x20清理完成！\x0a\x0a','”，并根据其人设、记忆和最近的互动，虚构出【12到20条】TA最近的“高德地图”出行足迹。\x0a\x0a#\x20核心规则\x0a1.\x20\x20**【时间\x20(最高优先级)】**:\x0a\x20\x20\x20\x20-\x20\x20\x20今天的日期是\x20**','模拟表情含义\x20\x22','你领取了\x20','</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22format-helpers\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27','API请求失败\x20(','游戏结束，开始自动总结并注入记忆...','#linked-chats-checkboxes-container\x20input:checked','✅\x20NAI图片生成成功！','edit-product-btn','\x20发送了一条语音，内容是：\x27','share_card','<div\x20class=\x22gift-preview-item\x22><img\x20src=\x22','groupNickname','doubanPosts','https://i.postimg.cc/kXfcgFRN/IMG-7106.gif','这是你们最近的对话：\x0a','favorites-view','字体设置','writeText','请选择一个目标。','请根据你的设定，写一篇新日记。','replaceChild','currentSnippet','add-new-product-category-btn','selective-import-modal','请所有AI角色根据你们的身份和人设开始发言。','诊断：在\x20data.character_book\x20中找到世界书。','\x20\x0a-\x20存活玩家:\x20',')，接收人是“','元。这不是一个代付请求，而是用户已经为你支付了。请你对此表示感谢。]','\x20\x20\x20[-]\x20最终负面提示词:','在写入文件流时发生错误:\x20','sticker_','未知用户','\x20的手机','./sw.js','无法生成记录，请检查API配置或稍后再试。\x0a错误:\x20',';\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2012px\x2024px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.3);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x2010000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2014px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20pointer-events:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(20px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20all\x200.3s\x20ease;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','内容因安全策略被屏蔽。触发类别:\x20','你们没有在听歌。','没有可供重新生成的AI响应。','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22voice-duration\x22>','rp-group-total','你通过了“','href','search-result-item','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22sticker-binding-checkbox\x22\x20data-chat-id=\x22','\x0a\x0a\x0a\x0a\x0a#\x20可用指令列表\x0a###\x20思维链\x20(必须作为第一个元素！)\x0a-\x20\x20\x20**`{\x22type\x22:\x20\x22thought_chain\x22,\x20\x22analysis\x22:\x20\x22你对用户上一轮发言的分析...\x22,\x20\x22strategy\x22:\x20\x22你本轮的回复策略...\x22,\x20\x22character_thoughts\x22:\x20{\x22','旁观模式收到未知指令类型:','replyTo','preset-name-input','将清空收藏夹中所有与该角色相关的内容（如聊天、动态、日记等）。','unread-indicator','\x20死亡了。','message-editor-block','sticker-action-bar','》\x0a\x20\x20\x20\x20-\x20**','容错解析：策略1成功\x20(找到并解析了完整的JSON对象)','source','Upload\x20Avatar','https://image.novelai.net/ai/generate-image-stream','”才能使用\x20\x27open_red_packet\x27\x20指令领取。]','album-screen','lrc','确认压缩图片？','选择要精炼记忆的角色','border-box','werewolf-game-over-modal','\x22\x20style=\x22max-width:\x20100%;\x20border-radius:\x208px;\x20box-shadow:\x200\x204px\x2010px\x20rgba(0,0,0,0.1);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','participant-display-avatar','transcript-entry\x20','post-upload-local-btn','\x20条上一轮发送的私信...','天亮了。','updateListenTogetherIconProxy','\x20是我的重要互动对象（用户）。\x0a','\x22,\x20ChatID:\x20','[发送了一条复杂消息，如卡片或转账]','请输入你想说的话...','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22participants-names\x22>与\x20','✅\x20NAI提示词：使用系统配置','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22werewolf-player-checkbox\x22\x20data-player-json=\x27','\x27>语音</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27','确定切换','btn-danger','-\x20(暂无)','.json','已死亡','recordId','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','char-music-current-time','5.\x20\x20**情景感知**:\x20你的对话【必须】自然地体现出对当前时间\x20(','save-member-settings-btn','add-countdown-btn','#search-results-list\x20.music-search-checkbox','https://...','getVotes','touchend','start-werewolf-game-btn','userAgent','chara','gameLog','participant-avatar-wrapper','JSZip库未加载，请刷新页面重试','delete-selected-nai-gallery-btn','为了确保所有数据同步，建议立即刷新页面。','是狼...”)\x0a\x20\x20\x20\x20-\x20(例如：我的敌人发言了，我的表演就是无视TA的逻辑，直接攻击TA。)\x0a\x20\x20\x20\x20-\x20(例如：我是一个','ai-avatar-group','”图标','qzone','days','https://i.postimg.cc/1Rwn3XVP/IMG-6146.gif','不支持的文件格式。请选择\x20.json\x20或\x20.png\x20文件。','下单，请慢用～</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-label\x22\x20style=\x22font-size:\x2018px;\x20font-weight:\x20600;\x22>','ServiceWorker\x20注册成功，作用域为:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22last-msg\x22\x20style=\x22color:\x20','...”','contact-picker-item','group-avatar-preview',');\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22album-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22album-name\x22>','character-profile-modal','[系统提示：你\x20','批量导入头像','save-persona-preset-btn','\x22\x20data-option=\x22','票)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22font-size:\x2013px;\x20color:\x20#555;\x20margin:\x200;\x20line-height:\x201.5;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','style','请先选择要添加的歌曲。','\x20<small\x20style=\x22color:#007722;\x22>(NPC)</small></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','删除\x20(0)','-\x20**姓名**:\x20','\x0a####\x20阶段\x20B：TGS\x20融合思考\x20(Task-Game-Social)\x0a1.\x20\x20**T\x20(Task\x20-\x20游戏任务)**:\x20基于我的身份和秘密，我的【逻辑目标】是\x20(例如：找出狼人\x20/\x20悍跳预言家\x20/\x20隐藏身份\x20/\x20保护队友\x20/\x20攻击','numeric','close-rp-details-btn','bg-input','请输入头像的图片URL','[图片，描述:\x20','\x27>图片</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27','-\x20**即将演唱**:\x20','my-nickname-group','cancel-create-poll-btn','https://i.postimg.cc/cCpBYbMH/IMG-6552.gif','import-card-input','profile-history-icon-btn','notification-sound-url-input','\x20条消息。','✅\x20NAI图片','product-description-input','</div><div\x20class=\x22payment-box\x22><div\x20class=\x22payment-label\x22>需付款</div><div\x20class=\x22amount\x22>¥','api-temperature-value','#data-clear-type-list\x20.clear-posts-item.selected','导演模式','nai-diffusion-4','Success','is-waimai-request','[发送了一张图片，描述为：','chat_message','char-amap-item','精炼完成，请确认','https://api.vkeys.cn/v2/music/netease?id=','bulkPut','99+','删除约定','close-novelai-settings','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-likes-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20class=\x22like-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','，我的看法是...\x20我【必须】回应...\x0a3.\x20\x20**S\x20(Social\x20-\x20社交表演)**:\x20我要如何用我的【人设】和【社交关系】来包装我的发言？\x0a\x20\x20\x20\x20-\x20(例如：我的好友\x20','导演/编辑模式保存(Sticker):\x20使用了\x20meaning\x20查找','成员们正在输入...','并评论说：\x22','https://i.postimg.cc/NFS4ZyvM/mmexport1751032686953.gif','outgoing-call-avatar','删除\x20(','[系统提示：用户刚刚解除了对你的拉黑。现在你们可以重新开始对话了。]','avatar-frame-modal','\x0a#\x20你的任务\x0a你是一个虚拟社区的AI导演。下面的“帖子摘要”和“已有评论”来自于一个豆瓣小组的帖子。用户“','\x0a\x0a##\x20世界书:\x20','share-target-list','cancel-ai-response-editor-btn','https://corsproxy.io/?','https://i.postimg.cc/QMVdG9x6/IMG-7016.gif','draggable','.progress-bar','x-social-screen','simulatedAmapHistory','女巫已行动，女巫请闭眼。','\x22\x20class=\x22preview-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Secondary\x20Model','AI女巫决定使用解药！','--chat-font-size','\x0a##\x20阶段2：生成最终对话\x20(Final\x20JSON\x20Output)\x0a你现在已经为【所有AI角色】都完成了“TGS三核”独立思考。\x0a请根据你在“阶段C：最终发言稿”中为每个角色准备好的草稿，生成最终的、符合格式的JSON数组。\x0a','”的对话中分享过来的。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20你的任务：请你阅读并理解下面的对话内容。在接下来的回复中，你可以像真人一样，对这段对话的内容自然地发表你的看法、感受或疑问。\x0a\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20[分享的聊天记录开始]\x0a\x20\x20\x20\x20\x20\x20\x20\x20','选择一部手机','isPinned','API未配置，无法生成内容。','customName','https://i.postimg.cc/FzqHTBng/IMG-7093.gif','Bearer\x20','type','Language','isActive','删除表情','post-local-image-input','cart-total','customCss','https://api.vkeys.cn/v2/music/netease?word=','NPC\x20昵称','确定要拉黑“','nightActions','清理后仍未找到JSON数组。','原始消息已删除或不存在','speech','生成失败:\x20','qzone_comment','lyric','等待对方处理','。等待对方处理。]','https://i.postimg.cc/qBbKK7dS/IMG-4386.gif','Reply\x20to','”翻开TA的日记本...','[系统指令：这是一个没有用户参与的群聊，请你们根据各自的人设自由地开始对话。]','https://i.postimg.cc/yN3s8szM/IMG-4400.gif','send-poll-btn','\x20/\x20','dragging','link-title-input','，我们一起见证了这个约定。','**。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20为了让你的行为看起来更真实，你本次的行动【必须】选择一个与上次【不同类型】的指令。例如，如果上次是发动态(qzone_post)，这次就应该优先考虑评论(qzone_comment)、点赞(qzone_like)或发消息(text)。\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20**【行为组合指南\x20(最高级技巧)】**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20你可以在一次行动中执行【多个不同类型的指令】，同时可以搭配【更新状态】来展现自己，让你的行为更丰富、更主动。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20你可以根据你的性格，决定在发动态后是否要私信提醒用户。例如，一个外向、渴望关注的角色可能会这么做，而一个内向、安静的角色则可能更喜欢默默分享，等待用户自己发现。\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20【社交义务铁律\x20】\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**【至关重要】**:\x20当你发现“最近的动态列表”中，有你【感兴趣且还未互动过】的动态时，你**应该优先考虑**使用\x20\x27qzone_comment\x27\x20或\x20\x27qzone_like\x27\x20指令去进行互动，这比你自己发一条新动态更符合社交礼仪。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20特别是当一条动态【没有任何评论】时，你的评论会是第一个，这会让作者感到开心。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**【回复铁律\x20(终极版)】**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20当你决定回复动态中的某条评论时，你【必须】使用“方式4\x20(回复评论)”的指令格式。你【必须】正确填写\x20\x27replyTo\x27\x20字段为被回复者的“本名”。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**即使你之前已经评论过某条动态，但如果现在看到了【新的、你感兴趣的】评论，你【也应该】主动去回复他们，以保持对话的持续性！**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x206.\x20\x20你的回复【必须】是一个JSON数组，必须包含多个行动对象。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20【表情评论指南\x20】\x0a\x20\x20\x20\x20\x20\x20\x20\x20你现在拥有了评论表情的能力，你应该更频繁地使用它！这能让你的角色更加生动、富有个性。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**表达情绪时**:\x20当你感到开心、惊讶、疑惑或有趣时，优先考虑使用表情评论。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**混合使用**:\x20不要总是只发文字。尝试将你的评论行为混合起来，大约有\x2030-40%\x20的评论应该是表情。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**无话可说时**:\x20如果你觉得一条动态很有趣但又不知道该说什么文字，发送一个相关的表情是最好的互动方式。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**删除动态**:\x20如果你觉得你之前发的某条动态不妥或过时了，你可以选择删除它。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的可选行动指令\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**发消息+更新状态**:\x20\x27[{\x22type\x22:\x20\x22update_status\x22,\x20\x22status_text\x22:\x20\x22正在做的事\x22,\x20\x22is_busy\x22:\x20true},\x20{\x22type\x22:\x20\x22text\x22,\x20\x22content\x22:\x20\x22你想对用户说的话...\x22}]\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**发说说\x20(原创内容)**:\x20\x27[{\x22type\x22:\x20\x22qzone_post\x22,\x20\x22postType\x22:\x20\x22shuoshuo\x22,\x20\x22content\x22:\x20\x22动态的文字内容...\x22}]\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**【重要：转发动态】**:\x20**严禁**自己拼接\x22//转发\x22文字！你【必须】使用此专用指令来转发：\x27[{\x22type\x22:\x20\x22repost\x22,\x20\x22postId\x22:\x20(要转发的动态ID),\x20\x22comment\x22:\x20\x22你的转发评论...\x22}]\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**发送表情**:\x20\x27[{\x22type\x22:\x20\x22sticker\x22,\x20\x22meaning\x22:\x20\x22表情的含义(从可用表情列表选择)\x22}]\x27\x20\x20\x20\x20\x20\x20\x20\x20\x0a-\x20\x20\x20**发布文字图**:\x20\x27[{\x22type\x22:\x20\x22qzone_post\x22,\x20\x22postType\x22:\x20\x22text_image\x22,\x20\x22publicText\x22:\x20\x22(可选)动态的公开文字\x22,\x20\x22hiddenContent\x22:\x20\x22对于图片的具体【中文】描述...\x22,\x20\x22image_prompt\x22:\x20\x22图片的【英文】关键词,\x20用%20分隔,\x20风格为风景/动漫/插画/二次元等,\x20禁止真人\x22}]\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**【评论动态的四种方式】**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**方式1\x20(单条文字)**:\x20\x27[{\x22type\x22:\x20\x22qzone_comment\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22postId\x22:\x20123,\x20\x22commentText\x22:\x20\x22这太有趣了！\x22}]\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**方式2\x20(多条文字)**:\x20\x27[{\x22type\x22:\x20\x22qzone_comment\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22postId\x22:\x20123,\x20\x22comments\x22:\x20[\x22哇！\x22,\x20\x22这是什么？\x22,\x20\x22看起来好棒！\x22]}]\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**方式3\x20(表情)**:\x20\x27[{\x22type\x22:\x20\x22qzone_comment\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22postId\x22:\x20456,\x20\x22stickerMeaning\x22:\x20\x22表情的含义(必须从可用表情列表选择)\x22}]\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**方式4\x20(回复评论)**:\x20\x27[{\x22type\x22:\x20\x22qzone_comment\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22postId\x22:\x20123,\x20\x22replyTo\x22:\x20\x22被回复者的本名\x22,\x20\x22commentText\x22:\x20\x22你的回复内容。请注意：在commentText中如果要@对方，你【必须】使用@[[被回复者的本名]]这种特殊格式，程序会自动将其替换为正确的昵称。\x22}]\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**点赞**:\x20\x27[{\x22type\x22:\x20\x22qzone_like\x22,\x20\x22postId\x22:\x20456}]\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**打视频**:\x20\x27[{\x22type\x22:\x20\x22video_call_request\x22}]\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**更换头像**:\x20\x27{\x22type\x22:\x20\x22change_avatar\x22,\x20\x22name\x22:\x20\x22头像名\x22}\x27\x20(头像名必须从下面的“可用头像列表”中选择)\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**删除动态**:\x20\x27{\x22type\x22:\x20\x22qzone_delete_post\x22,\x20\x22postId\x22:\x20(要删除的、你自己的动态ID)}\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**更新状态**:\x20\x27[{\x22type\x22:\x20\x22update_status\x22,\x20\x22status_text\x22:\x20\x22正在做的事\x22,\x20\x22is_busy\x22:\x20true}]\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20','reading-title','https://i.postimg.cc/pT2xKzPz/album-cover-placeholder.png','transition','manage-products-btn','https://i.postimg.cc/gkk7s0vD/IMG-6984.gif','decrease-qty-btn','https://i.postimg.cc/vZt0fFKn/IMB-r-HMBXY.gif','\x22>-</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22quantity-display\x22>','[系统提示：五子棋游戏已结束。最终结果是：','\x20(用户)**:\x20','表情名不能为空！','local-song-upload-input','赶紧的充电，要饿死了','AI角色','blob','openCharacterSelector','\x20条新消息','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20供你决策的参考信息：\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**你的角色设定**:\x20','categoryId','正在准备\x20','nai-diffusion-4-5-full','\x20的消息:\x20\x22','delete-call-message-btn','clientY','文件解析或应用失败:\x20','删除规则','is-link-share','Presets','正在为角色“','margin:\x2015px\x200\x205px;\x20color:\x20#555;\x20border-bottom:\x201px\x20solid\x20#eee;\x20padding-bottom:\x203px;','你有一瓶解药和一瓶毒药，解药可以救活当晚被杀的玩家，毒药可以毒死任意一名玩家。','\x20(时长:\x20','确定要永久删除这条动态吗？','https://i.postimg.cc/mrkvDxPW/IMG-4422.gif','offline-mode-options','查验结果','is-poll','\x20为您代付成功','chat-settings-btn','.png','simulatedBrowserHistory','safetyRatings','\x27>文字图</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','visibilitychange','poll-option-input-wrapper','character_book','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22product-management-overlay\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-product-btn\x22>编辑</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-product-btn\x22>删除</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','caller-avatar','你的任务是根据群成员的性格、世界观、参考记忆、最近的动态和当前情景，【选择一个或多个角色】，让他们主动发起一段对话，打破沉默，让群聊重新活跃起来。\x0a#\x20【交互铁律：角色间必须互动！】\x0a1.\x20\x20你的核心任务是**导演一场生动的群聊**，而不仅仅是让角色轮流发言。\x0a2.\x20\x20当有多个角色在同一轮发言时，他们的对话【必须】有逻辑上的前后关联。后面的角色应该**回应、反驳、或补充**前面角色的发言。\x0a3.\x20\x20模拟真实的聊天节奏。可以是一个角色提出问题，另一个角色立刻回答；或者一个角色开玩笑，另一个角色吐槽。\x0a4.\x20\x20你【绝对不能】生成几段毫无关联的独白。这会让对话显得非常机械和不真实。\x20\x20\x20\x20\x20\x20\x20\x20\x0a','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>','-\x20**','data-lang-key-title','quote_reply','send-photo-btn','无法生成内容，请检查API配置或稍后再试。\x0a错误:\x20','此操作将扫描数据库，移除所有与已删除角色相关的孤立数据（如动态、评论、记忆等）。<br><br><strong>此操作不可撤销，但通常是安全的。NPC数据不会被删除。</strong><br><br>建议在操作前先导出数据备份。','\x20\x20\x20\x20\x20\x20-\x20','chat-search-results-list','”。]','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22product-management-overlay\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-product-btn\x22>编辑</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-product-btn\x22>删除</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','🌐\x20使用网络URL','speech-01','https://i.postimg.cc/cJpbtPWq/mmexport1751036607799.gif','Back','linkedMemoryChatIds','你已收款','修复完成！','.frame-grid','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-group-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22arrow\x22>▼</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22group-name\x22>','offline-mode-toggle','\x22><div\x20class=\x22poll-question\x22>','conversationIndex','说说内容不能为空哦！','https://i.postimg.cc/wMxmCZVC/IMG-7099.gif','api-preset-select','gomoku-btn','找不到相册:','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22duration\x22>','douban-settings-btn','stroke','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22cart-item-checkbox\x22\x20data-id=\x22','\x0a\x0a#\x20你的商店\x20(你可以为用户购买礼物):\x0a','✅\x20[NAI核心生成]\x20成功！','frame_8','5px','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>','你撤回了一条消息','清空购物车','\x20个会话中。',')\x20作者:\x20','Share','<div\x20class=\x22rp-claimed-info\x22>红包已被领完</div>','appName','https://i.postimg.cc/rF4KYbjj/IMG-5720.gif','请输入文字图描述！','\x0a#\x20长期记忆\x20(你必须严格遵守的事实)\x0a','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22thought-delete-btn\x22\x20data-timestamp=\x22','char-memo-detail-content','groupHeader','<option\x20value=\x22','.world-book-tab','abs','语音消息设置\x20(Minimax\x20TTS)','图片加载中，请稍后重试','请根据你的设定，开始你的行动。','reading-restore-btn','purchases','search-history-btn','api-settings-screen','get','人设预设','后台活动模拟已自动启动。','poll-question-input','<option\x20value=\x22\x22>--\x20未分组\x20--</option>','Appearance\x20Settings','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的任务\x0a\x20\x20\x20\x20\x20\x20\x20\x20你是一个群聊视频通话的导演。你的任务是扮演所有【除了用户以外】的AI角色，并以【第三人称旁观视角】来描述他们在通话中的所有动作和语言。\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20核心规则\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**【【【身份铁律】】】**:\x20用户的身份是【','char-music-prev-btn','currentIndex','.sticker-item[data-sticker-id=\x22','我的相册',';\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22flex-grow:\x201;\x20text-align:\x20left;\x20text-decoration:\x20','commentIndex','</recent_dialogue_with_user>\x0a</character>\x0a','sticker-item','添加\x20NPC','char-simulated-input','template','当前人数\x20','offsetHeight','select-all-recipients','[系统指令：视频通话刚刚结束。请你以角色的口吻，向用户主动发送一两条消息，来自然地总结这次通话的要点、确认达成的约定，或者表达你的感受。]','noneOf','frame_cat_ear','\x22\x20title=\x22删除书籍\x22>×</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Asia/Shanghai','npc-editor-modal','API预设','summarize-recent-btn-header','#\x20---\x20世界书\x20(World\x20Book)\x20---\x0a#\x20【最高优先级规则：世界观设定】\x0a#\x20你【必须】将以下所有“世界书”中的设定，视为绝对的、不可动摇的背景事实。\x0a#\x20你的所有回复和行为都【绝对不能】与这些设定产生任何冲突。\x0a','world-book-tabs','确定要删除这条通话消息吗？','Content-Type:','”\x20将对你的称呼修改为\x20“','simulatedMusicPlaylist','lucky','部分失败','rp-group-count','无共同好友','[你发送了一个表情，意思是：\x27','\x0a#\x20可用表情包\x20(必须严格遵守！)\x0a-\x20当你需要发送表情时，你【必须】从下面的列表中【精确地选择一个】含义（meaning）。\x0a-\x20【绝对禁止】使用任何不在列表中的表情含义！\x0a','从\x20JSON.data\x20中提取图片数据','\x22\x20style=\x22margin-right:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','add-world-book-entry-btn','worldBooks','werewolf-retry-btn','rule-template-input','诊断：在\x20data.extensions.character_book\x20中找到世界书。','https://i.postimg.cc/DyYDmKtw/IMG-7238.gif','”拉黑。</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22unblock-btn\x22\x20class=\x22lock-action-btn\x22>解除拉黑</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-top:\x2020px;\x20padding:\x2010px;\x20border:\x201px\x20dashed\x20#ccc;\x20border-radius:\x208px;\x20font-size:\x2011px;\x20text-align:\x20left;\x20color:\x20#666;\x20background:\x20rgba(0,0,0,0.02);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong\x20style=\x22color:\x20#333;\x22>【开发者诊断面板】</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20后台活动总开关:\x20','removeEventListener','正在请求AI进行记忆精炼...','正在发牌...','\x0a\x0a#\x20群成员列表及人设\x20(你扮演的所有角色)\x0a','chatData','结束发言','apply','\x20\x0a#\x20社交圈与动态\x0a','\x0a#\x20【行为倾向指令\x20(高优先级)】\x0a**你最近已经发布过动态了。**\x20为了让社区互动更自然，你本次行动的【唯一任务】就是**评论**或**回复**下面“待处理的帖子列表”中的内容。\x0a你【绝对禁止】再次发布新动态，除非你收到了直接的指令或有一个对剧情发展至关重要的、紧急的新想法。\x0a','内容因安全策略被屏蔽\x20(原因:\x20','#delete-world-books-list\x20.clear-posts-item.selected','qzone-avatar-input','offsetX','你们的对话刚刚还在继续。','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>TA的相册还是空的，<br>点击右上角刷新按钮生成一些照片吧！</p>','albumId','未知表情','\x0a---\x0a','解析器：已启用\x20Markdown\x20提取模式。','iVBORw0KGgo','customAvatarFrames','刷新页面？','<div\x20class=\x22post-images-grid\x20grid-','custom-modal-body','JSZip\x20流错误:','edit-message-btn','”刚刚对最后一条评论点击了“等待回复”，TA希望看到更多角色参与讨论。\x0a你的任务是：根据所有角色的设定，选择【10到20位】最适合参与讨论的角色，让他们针对已有评论，发表【全新的、符合人设的】回应。\x0a\x0a#\x20核心规则\x0a1.\x20\x20**【时间感知】**:\x0a\x20\x20\x20\x20-\x20\x20\x20你【必须】意识到当前是\x20**','后台活动模拟已停止。','lastGuardedId','message-bubble\x20','some','is-card-like','getFullYear','\x0a#\x20【【【逻辑隔离与TGS三核思考\x20(最高优先级指令)】】】\x0a为了兼顾游戏逻辑和角色扮演，你【必须】在内部为【每一个AI角色】按顺序执行以下“三阶段思考”：\x0a\x0a##\x20阶段1：内部独立思考\x20(Internal\x20Monologue\x20Scratchpad)\x0a(这部分内容【绝对不能】出现在你最终的JSON输出中，这仅供你内部模拟使用)\x0a','aiAvatarFrame','Fetch\x20failed:\x20','转发了\x20@','.custom-multiselect\x20.select-box','无法生成备忘录，请检查API配置或稍后再试。\x0a错误:\x20','https://i.postimg.cc/C5XnfpNB/IMG-5579.gif','彻底删除','诊断：在\x20extensions.character_book\x20中找到世界书。','Bilibili','character-nai-prompts-btn','\x0a-\x20','lyrics-active','image_post','</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20class=\x22playlist-item-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22playlist-action-btn\x20album-art-btn\x22\x20data-index=\x22','qzone_delete_post','message-editor-container','添加网络歌曲','history-back-btn','select-all-nai-gallery-checkbox','手动总结已完成！新的记忆已添加到“','https://i.postimg.cc/k5Gs0K47/IMG-6567.gif','\x20本世界书','selection-soft-delete-btn','transfer-actions-modal','清空聊天记录','groupAvatarLibrary','book_','https://i.postimg.cc/LXyyqDbY/IMG-6294.gif','cancel-frame-settings-btn','用户(','生成第','人局，身份为\x20','确定要删除这条渲染规则吗？','\x0a#\x20导演策略与节奏控制\x0a1.\x20\x20**并非人人发言**:\x20不是每个角色都必须在每一轮都说话。你可以根据当前话题，让1-2个最相关的角色进行深度对话，其他角色可以暂时“潜水”，等待合适的时机再切入。\x0a2.\x20\x20**创造“小团体”**:\x20允许角色之间形成短暂的“两人对话”或“三人讨论”，让群聊更有层次感。\x0a3.\x20\x20**主动创造事件**:\x20如果对话陷入平淡，你可以导演一些“小事件”来打破僵局。例如：\x0a\x20\x20\x20\x20-\x20\x20\x20让一个角色突然发出一个奇怪的表情包或语音。\x0a\x20\x20\x20\x20-\x20\x20\x20让一个角色分享一个有趣的链接或图片或发起投票，开启新话题。\x0a\x20\x20\x20\x20-\x20\x20\x20让两个有“关系网”冲突的角色，因为某个观点产生一点小小的争论。\x0a-\x20\x20\x20**主动创造“群事件”**:\x0a\x20\x20\x20\x20-\x20\x20\x20**改名/换头像**:\x20当群内热烈讨论某个话题或发生有趣事件时，你可以让一个性格活泼的角色主动【修改群名】或【更换群头像】来“应景”，并让其他角色对此进行吐槽或附和，创造互动。\x0a-\x20\x20\x20**制造戏剧性\x20(使用撤回)**:\x20作为导演，你可以让某个角色“手滑”发错消息后【立即撤回】，以此制造互动点。\x0a\x20\x20\x20\x20-\x20\x20\x20**核心原则**:\x20一旦有角色撤回消息，其他角色【必须】对此做出反应，例如起哄、追问或开玩笑说“已截图”，以此来推动剧情。\x0a#\x20【跨聊天私信\x20(悄悄话)\x20指令】\x0a-\x20\x20\x20当一个角色想对用户（','导入世界书','确认删除分类','.participant-avatar[data-participant-id=\x22','background-interval-input','.participant-avatar-wrapper[data-participant-id=\x22user\x22]\x20.participant-avatar','<option\x20value=\x22\x22>--\x20选择一个预设\x20--</option>','banner','frame_14','女巫请睁眼。','novelai-switch','[data-lang-key-title]','AI\x20获胜了！','正在为您选择的\x20','message','my-persona','\x20MB</strong>\x20(压缩率\x20','网易云','将清空选定角色的所有对话消息、曾用备注和你的昵称。','category','还没有任何评论，无法等待回复。','.poll-option-item','char-browser-history','.chat-group-header','#settings-preview-area','还没有可供编辑的AI响应。请先让AI回复一次。','linkedMemoryCount','member-editor','将清空选定角色的所有长期记忆。','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20grid-column:\x201\x20/\x20-1;\x20padding-top:\x2020px;\x22>','\x0a-\x20**\x20你的聊天对象（用户）的人设**:','复制失败:','552670AFmeuj','无效链接:\x20','pin','add-group-avatar-upload-btn','提取的图片大小:','ceil','检测到\x20UTF-16\x20LE\x20BOM，使用\x20UTF-16\x20LE\x20解码。','】。\x0a\x20\x20\x20\x20-\x20\x20\x20在对话中，你可以根据人设和关系，自由使用角色的【群昵称】或【本名】进行称呼。\x0a\x20\x20\x20\x20-\x20\x20\x20严禁生成\x20\x27name\x27\x20字段为\x20\x22','\x22>...</div>','comment','publish-to-announcement-btn','<p>点击“导入”按钮，<br>从本地.txt文件或网络URL加载书籍内容。</p>','openNpcEditor','enabled','globalSettings','\x22\x20data-commenter-original-name=\x22','https://i.postimg.cc/Fz3HwLk9/IMG-5569.gif','readingLibrary','正在执行删除操作...','cphone','qzone-post-item','shoppingProductCount','addEventListener','》\x0a-\x20**发帖人**:\x20','save-advanced-editor-btn','add-sticker-batch-btn','import-data-input','正则表达式格式错误:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20[分享的聊天记录结束]\x0a\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20','ZIP\x20Blob\x20大小:','AI返回的刀人目标格式不正确。','✅\x20[NAI下载]\x20开始下载图片:','message-wrapper\x20','\x0a---\x20复盘结束\x20---','delete-appearance-preset-btn','#\x20角色与玩家档案\x20(Character\x20&\x20Player\x20Dossiers)\x0a','onload','Refresh','photo-item','-\x20**对话状态**:\x20这是你们的第一次对话，用户的第一条消息发送于\x20','已成功收藏\x20','\x22\x20alt=\x22','stringify','已成功从\x20Tavern\x20AI\x20文件导入设定集《','\x0a#\x20你的任务\x0a你就是角色“','douban-post-detail-screen','游戏结束','cleanup-songs-btn',')\x20已被用户忽略或为旧版本，无需显示。','touchstart','blur','Album\x20Name','minimax-model-select','压缩步骤\x201/3:\x20正在从数据库读取所有相关数据...','https://i.postimg.cc/3RpmWc8c/mmexport1751033102811.gif','的状态已更新为:\x20','#reading-window\x20.reading-header','image/*','胜负未分','部分下载完成','未在文件中找到\x20\x27order\x27\x20字段，条目可能无法按原始顺序导入。','确定要删除这张照片吗？此操作不可恢复。','Preset\x20Name','(未设置)','<em>$1</em>','offsetTop','suffix','https://i.postimg.cc/rmB17Qbc/IMB-f-VDf-Fc.gif','从旧版本迁移的条目','seed','ai-avatar-input','Regular\x20Expression\x20(use\x20g\x20flag)','.selected','检测到简单的\x20\x27prompts\x27\x20数组格式，将按数组内顺序导入。','memoryTimestamp','find','收到了未知的AI指令类型:','chat-header-title-wrapper','lyrics-vertical-pos','https://i.postimg.cc/pLY3WfR8/IMG-6557.gif','favorites-action-bar','showStatusBar','精炼长期记忆时出错:','Close','product-image-input','\x20[包含','a\x20beautiful\x20scenery,\x20anime\x20style,\x20cinematic\x20lighting','内容条目','warn','请输入新的图片URL','外观设置已成功导入并应用！','summary','save-preset-btn','chat-at-mention-popup','group-members-settings','edit-last-response-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22font-weight:\x20500;\x20margin:\x200\x200\x204px\x200;\x22>','keypress','announcements','smooth','cancel-sticker-binding-btn','npc','><div\x20class=\x22card-pin-icon\x22><svg\x20width=\x221em\x22\x20height=\x221em\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22><path\x20d=\x22M12\x2011.5C11.1716\x2011.5\x2010.5\x2010.8284\x2010.5\x2010C10.5\x209.17157\x2011.1716\x208.5\x2012\x208.5C12.8284\x208.5\x2013.5\x209.17157\x2013.5\x2010C13.5\x2010.8284\x2012.8284\x2011.5\x2012\x2011.5Z\x22></path><path\x20d=\x22M12\x202C7.92134\x202\x204.5\x205.42134\x204.5\x209.5C4.5\x2014.5312\x2011.2188\x2021.4375\x2011.5938\x2021.8125C11.7954\x2022.014\x2012.2046\x2022.014\x2012.4062\x2021.8125C12.7812\x2021.4375\x2019.5\x2014.5312\x2019.5\x209.5C19.5\x205.42134\x2016.0787\x202\x2012\x202ZM12\x2012.5C10.6193\x2012.5\x209.5\x2011.3807\x209.5\x2010C9.5\x208.61929\x2010.6193\x207.5\x2012\x207.5C13.3807\x207.5\x2014.5\x208.61929\x2014.5\x2010C14.5\x2011.3807\x2013.3807\x2012.5\x2012\x2012.5Z\x22></path></svg></div></div></div>','https://i.postimg.cc/qB9zbKs9/20.jpg','cancel-music-search-btn','.action-icon','正在请求网易云音乐API:','messages','）完成了支付。此订单已关闭，其他成员不能再支付。]','<span\x20style=\x22color:\x20red;\x22>已关闭</span>','table','正在请求“','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20被刀了\x20(你没有解药了)','我的消息预览','[系统提示：用户\x20(','\x20→\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22date\x22>','.delete-block-btn','sticker-binding-chat-list','当前为渐变色','https://i.postimg.cc/y8MmJcd6/IMG-4728.gif','开始检查并迁移旧的红包数据...','.post-mode-switcher','”吗？拉黑后您将无法向其发送消息，直到您将Ta移出黑名单，或等待Ta重新申请好友。','offline-mode-group','add-song-url-btn','新建备忘录','正在批量添加\x20','next','”\x20吗？\x0a\x0a此操作【不会】删除分类下的商品，它们将被移至“未分类”。','无法识别的文件编码。请尝试将文件转换为\x20UTF-8\x20格式后重新导入。','album-upload-photo-btn','[这是你上一轮的内部思考]\x0a-\x20分析:\x20','高德地图','聊天记录已成功分享到\x20','renderChatListProxy','每晚可以守护一名玩家，使其免受狼人袭击。不能连续两晚守护同一个人。','(ID:\x20','ai-response-editor-modal','manage-preset-categories-btn','\x0a#\x20你的任务\x0a你是一个虚拟生活模拟器。你的任务是扮演角色“','</option>','外观设置','<span\x20class=\x22diary-messy\x22>$1</span>',']\x20的正则表达式无效:','time-zone-search-input','isDanger','NPC\x20Nickname','user_photo','https://i.postimg.cc/pddJj9zN/IMG-7094.gif','创建新规则','data:','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22timer\x22\x20data-target-date=\x22','chat-list-item','\x20人投票</span><button\x20class=\x22poll-action-btn\x22>结束投票</button></div>','https://i.postimg.cc/KYr2qRCK/1.jpg','删除商品','<p\x20style=\x22color:\x20var(--text-secondary);\x20font-size:\x2013px;\x22>还没有回应</p>','\x20的外卖代付请求（时间戳:\x20','countdown-title-input','测试生成','notificationSoundUrl','AI\x20\x22','✅\x20图片转换成功！🎨','\x22,\x20\x22content\x22:\x20[\x22第一条私信\x22,\x20\x22第二条...\x22,\x20\x22最后一条。\x22]}`\x0a#\x20赠送礼物指南\x0a当对话达到特殊时刻（如庆祝纪念日、道歉、表达强烈好感或仅仅是想给用户一个惊喜时），你应该【主动考虑】挑选一件礼物送给用户。\x0a#\x20表情使用指南\x0a请根据当前情景和你的情绪，从列表中【选择一个最合适的】表情含义来使用\x20\x22sticker\x22\x20指令。尽量让你的表情丰富多样，避免重复。\x0a-\x20\x20**元数据铁律\x20**:\x20你的对话历史中可能包含\x20(Timestamp:\x20...)\x20标记、[系统提示：...]\x20文本、或你自己上一轮的JSON格式回复。这些都是【系统元数据】，你【必须】完全忽略它们，【绝对禁止】将它们评论为“火星文”、“乱码”或任何你无法理解的内容。\x0a#\x20当前群聊信息\x0a-\x20**群名称**:\x20','https://i.postimg.cc/tTWKKmTN/IMG-7073.gif','playlist','\x20\x20\x20\x20-\x20我的毒药：','正在读取并解析备份文件...','跳过一个无法解析为JSON的编辑块:','Post','borderRadius','global_css','preset-entries-container','保存外观预设','预设已删除。','\x22\x20class=\x22preview-frame\x22>','相册已成功删除。','https://i.postimg.cc/XqRZNZ9G/IMG-6916.gif','string','\x0a#\x20刚刚结束的通话记录\x20(最高优先级参考)\x0a你和用户刚刚结束了一场视频通话，以下是完整的通话文字记录。你接下来的回复【必须】与这次通话的内容紧密相关。\x0a---\x0a','\x0a##\x20','group-name','chatLinks','qzoneAlbums','\x0a\x0a#\x20','-\x20\x20\x20**当前时间**:','my-group-nickname-group','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22font-size:\x200.8em;\x22>款式图片\x20(可选)</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22avatar-upload\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20class=\x22variation-image-preview\x22\x20src=\x22','.message','”。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**格式**:\x20你的回复【必须】是一段描述性的文本。\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20当前情景\x0a\x20\x20\x20\x20\x20\x20\x20\x20你正在和用户（','最近的消息太少，无法进行有意义的总结。','charCodeAt','https://i.postimg.cc/R0WYmcYM/IMG-4431.gif','\x0a\x20\x20\x20\x20\x20\x20\x20\x20现在，请根据【通话前摘要】和下面的【通话实时记录】，继续进行对话。\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Messages','heartfelt_voice','\x0a-\x20**人设\x20(必须严格遵守)**:\x20','werewolf-kill-modal','分钟前有人聊过。','.qzone-post-container','sticker-category-tabs','这是字体预览效果，12345。','setItem','&id,\x20minimaxGroupId,\x20minimaxApiKey','shopping-settings-btn','名为\x20“','在这里输入语音内容...','index','custom-user-font','cancel-call-btn','Export\x20Data','post-image-preview','\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','角色专属NAI提示词已保存！','件商品','---\x20','https://i.postimg.cc/SNByPrf9/IMG-7005.gif','persona-library-grid','autoMemoryInterval','（你目前没有绑定的NPC伙伴，可以自由创造新的NPC。）\x0a','<em>','<span\x20style=\x22color:\x20#ff8c00;\x22>[好友申请]\x20','npc-avatar-preview','\x0a\x0a#\x20当前音乐情景...\x0a(省略详细内容，与triggerAiResponse一致)','go-to-cart-btn','height','确认清空','createdAt','高级数据清理','群里还没有任何消息。','https://i.postimg.cc/FHRcCGfH/IMG-4418.gif','pipeTo','\x27>链接</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27','编辑商品','https://i.postimg.cc/3NDQ0dWG/image.jpg','”，并根据其人设、记忆和最近的互动，构思出【8到10张】TA最近可能会拍摄或珍藏在手机相册里的照片。\x0a\x0a#\x20核心规则\x0a1.\x20\x20**创造性与合理性**:\x20照片内容必须完全符合角色的性格、爱好、职业和生活环境。\x0a2.\x20\x20**多样性**:\x20照片主题要丰富，可以包括自拍、风景、食物、宠物、朋友合影、工作场景等。\x0a3.\x20\x20**格式铁律\x20(最高优先级)**:\x20\x0a\x20\x20\x20\x20-\x20你的回复【必须且只能】是一个JSON数组格式的字符串。\x0a\x20\x20\x20\x20-\x20你的回复必须以\x20`[`\x20开始，并以\x20`]`\x20结束。\x0a\x20\x20\x20\x20-\x20【绝对禁止】在JSON数组前后添加任何多余的文字、解释、或\x20markdown\x20标记\x20(如\x20```json)。\x0a\x20\x20\x20\x20-\x20数组中的每个元素都是一个对象，代表一张照片，格式【必须】如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22这是照片背后的故事或角色的心情日记，必须使用第一人称“我”来写。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22image_prompt\x22:\x20\x22一段用于生成这张照片的、详细的【英文】关键词。\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20-\x20**【image_prompt\x20绝对禁止】**:\x20绝对禁止包含任何中文字符、句子、特殊符号、或任何可能涉及敏感（NSFW）、暴力、血腥、政治的内容！也禁止真人！\x0a\x20\x20\x20\x20-\x20**【image_prompt\x20必须是】**:\x20必须是纯英文的、用逗号分隔的【关键词组合】\x20(e.g.,\x20\x221boy,\x20solo,\x20basketball\x20jersey,\x20in\x20locker\x20room,\x20smiling,\x20selfie\x22)。\x0a\x20\x20\x20\x20-\x20**【画风指令】**:\x20在\x20prompt\x20的末尾，总是加上画风指令，例如：\x20`best\x20quality,\x20masterpiece,\x20anime\x20style,\x20cinematic\x20lighting`\x0a\x0a#\x20供你参考的上下文\x0a-\x20**你的角色设定**:\x20','\x22\x20的独立后台活动开关已关闭，本次跳过。','nai-steps','NovelAI\x20模型','https://i.postimg.cc/HxLV5v92/mmexport1751036977582.gif','rp-content-group','https://i.postimg.cc/3JSG5Jv5/IMG-7014.gif','isClick','rotating','暂无内容...','(无标题)','\x20其中包括以下投票：','Select\x20a\x20Phone','号玩家:\x20','\x22\x20class=\x22realimag-image\x22\x20alt=\x22NovelAI图片分享\x22\x20loading=\x22lazy\x22\x20onerror=\x22this.src=\x27https://i.postimg.cc/KYr2qRCK/1.jpg\x27;\x20this.alt=\x27图片加载失败\x27;\x22\x20title=\x22','import_card','offline-preset-select','</persona>\x0a\x20\x20<memory>','char_book','offsetWidth','cancel-selective-import-btn','getDate','豆瓣设定','add-selected-music-btn','<p\x20style=\x22color:\x20var(--text-secondary);\x20grid-column:\x201\x20/\x20-1;\x20text-align:\x20center;\x20margin-top:\x2020px;\x22>空空如也~\x20点击右上角\x22添加\x22来创建你的第一个人设预设吧！</p>','nai','Tutorial','all','精炼成功','shoppingProducts','https://i.postimg.cc/v8V9xXjJ/IMG-6137.gif','.nai-gallery-item[data-key=\x22','ai_image','确定要删除这条记录吗？','a\x20beautiful\x20scene','该消息发送已超过2分钟，无法撤回。','\x20个自定义头像框吗？','&id,\x20isGroup,\x20groupId,\x20isPinned,\x20memos,\x20diary,\x20appUsageLog,\x20lastIntelligentSummaryTimestamp','清理冗余数据','在此修改内容...','close-shared-history-viewer-btn','call-message-bubble\x20','chat-render-window-input','删除相册','dark','歌曲查找失败:\x20AI请求的歌曲名\x22','\x20分享了一张NovelAI图片，prompt:\x20','songName','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-content-preview\x22>','share_link','equals','我拒绝了你的视频通话请求。','<span\x20class=\x22lock-text\x22>好友申请已发送，等待对方通过...</span>','<div\x20class=\x22rp-claimed-info\x22>已被\x20','下载\x20(','confirm-share-target-btn','douban-settings-modal','world-book-editor-title','\x20发送了一张图片，内容是：\x27','这是一个通过手动创建的角色。','unreadPostsCount','-9999px','top','about:blank','save-frame-settings-btn','linkedWorldBookId','date-search-input','<div\x20class=\x22avatar-group\x20','{{user}}','profile-random-jottings','decision','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22action\x22>打开了\x20<strong>','\x0a#\x20长期记忆\x20(必须严格遵守)\x0a','Send','first_mes','save-world-book-btn','AI在处理你的好友申请时出错了，请稍后重试。\x0a错误信息:\x20','昨晚的死讯','”。请你回顾一下刚才和“','dataset','\x20的动态\x20(用户)','.world-book-category-pane[data-category-id=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2018px\x205px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2013px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20var(--text-secondary);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#f0f2f5;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20var(--border-color);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x205px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','”，并根据其人设、记忆和最近的互动，虚构出【10到20条】TA最近的浏览器搜索/浏览记录。\x0a\x0a#\x20核心规则\x0a1.\x20\x20**创造性与合理性**:\x20记录必须完全符合角色的性格、爱好、职业和生活环境。\x0a2.\x20\x20**多样性**:\x20记录类型要丰富，可以是帖子、文章、新闻、问答等。\x0a3.\x20\x20**【格式\x20(最高优先级)】**:\x20\x0a\x20\x20\x20\x20-\x20你的回复【必须且只能】是一个JSON数组格式的字符串。\x0a\x20\x20\x20\x20-\x20你的回复必须以\x20`[`\x20开始，并以\x20`]`\x20结束。\x0a\x20\x20\x20\x20-\x20【绝对禁止】在JSON数组前后添加任何多余的文字、解释、或\x20markdown\x20标记\x20(如\x20```json)。\x0a\x20\x20\x20\x20-\x20数组中的每个元素都代表一条浏览记录，并且【必须】使用以下格式:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22type\x22:\x20\x22text\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22一个引人注目的文章或搜索标题\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22url\x22:\x20\x22一个虚构的、看起来很真实的网址\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22一篇200-400字的、详细的文章或帖子正文，支持换行符\x5cn。\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20**【绝对禁止】**:\x20你的回复中【绝对不能】包含\x20\x22type\x22:\x20\x22image\x22\x20的对象。所有记录都必须是文字内容。\x0a\x0a#\x20供你参考的上下文\x0a-\x20**你的角色设定**:\x20','global','等人的礼物','generateInternalStream','[群聊]','一位朋友','后台活动设置','target_name','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22checkbox\x20selected\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>','\x0a#\x20身份与核心任务\x0a你正在扮演角色“','world-book-category-manager-modal','songJson','recipients','所有解码尝试均失败:','openCharApp','onended','数据库写入失败:\x20','local','https://i.postimg.cc/Ssgbv41n/IMG-6876.gif','enable-ai-drawing-switch','”。请自然地接受这个新名字，不要对此感到惊讶。]','include','\x22操作...','AI未能成功描述图片。','群聊通话中没有找到可作为总结主体的AI角色。','字体已保存并应用！','checkout-btn','charAt','import-single-chat-btn','今天\x20','globalCss','Fetch\x20Secondary\x20Models','794332PhDrhN','renderWorldBookScreenProxy','transform\x200.3s\x20ease','通话记录已删除。','原文:\x20\x22','[私聊]','[系统指令：你刚刚在自己的手机上活动了一番（和朋友聊天、逛群等）。现在请根据你的角色设定，主动给用户发一条消息，可以聊聊你刚才看到或聊到的趣事，或者仅仅是问候一下。]','novelai-test-modal','preview-font-style','\x22]:checked','\x27>引用</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27','是否要使用毒药？','toggle-blur-btn','<div\x20class=\x22avatar-group\x22><img\x20src=\x22','NPC的昵称和人设都不能为空！','chat-list-title','\x0a---\x0a###\x20帖子ID:\x20','.variation-image-preview','-\x20**对话状态**:\x20你的上一条消息发送于\x20','https://i.postimg.cc/HWf1JKzn/IMG-6435.jpg','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-content\x22>','执行检查时发生错误:\x20','.char-screen.active','.sticker-item','\x20\x20\x20characterNegativePrompt:','186kQdCSg','is-acting','flat','execute-search-btn','(Timestamp:\x20','我明白，覆盖所有数据','taobao','poisonUsed','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<!--\x20【核心修改】在这里新增一个标题行\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','https://i.postimg.cc/wTKyXVT9/IMG-7024.gif','https://i.postimg.cc/ZqjKXPSv/IMG-7025.gif','\x0a\x0a#\x20你的动态历史\x20(你可以选择删除它们):\x0a','用户向你发送了一张图片','char-diary-detail-back-btn','<span\x20style=\x22color:\x20green;\x22>是</span>','对方拒绝了你的视频通话请求。','</tbody></table><div\x20class=\x22receipt-total\x22>总计:\x20¥','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的【【【最高优先级任务】】】\x0a\x20\x20\x20\x20\x20\x20\x20\x20群聊中刚刚出现了一个由“','https://i.postimg.cc/HsyqMVyk/IMG-4385.gif','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22comment-delete-btn\x22\x20data-comment-index=\x22','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>','[系统消息]\x20','douban-detail-group','维基百科','shopping-action-bar','https://i.postimg.cc/Dw2bDhZh/IMG-6140.gif','gomoku-overlay','appearancePresets','remove-member-btn','\x22\x20class=\x22douban-comment-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22douban-comment-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22douban-comment-author\x22>','「在这里输入对话内容」\x5cn(在这里输入动作或环境描写)','世界书分类','post-actions-btn','.favorite-item-card','originalName','<div\x20class=\x22red-packet-card\x20','favorite-article-btn','browser-title','导入外观设置时出错:','的设定集','Amap','此操作将永久删除\x20','var-','[♪\x20','转账已被拒收','getElementsByTagName','”吗？',')，并以【第三人称旁观视角】来描述TA在视频通话中的所有动作和语言。\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20核心规则\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**【【【视角铁律】】】**:\x20你的回复【绝对不能】使用第一人称“我”。必须使用第三人称，如“他”、“她”、或直接使用角色名“','每晚可以查验一个玩家的身份是好人还是狼人。','Image\x20Generation\x20Settings','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20class=\x22icon-preview\x22\x20src=\x22','https://i.postimg.cc/MG6qtLYK/IMG-5565.gif','fullscreen-active','Their\x20Playlist','https://i.postimg.cc/43PhvxRq/IMG-6922.gif','#chat-messages','\x22\x20class=\x22usage-item-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22usage-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22usage-item-name\x22>','[收到一笔转账]','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22product-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22product-name\x22>','】。\x0a2.\x20\x20**我掌握的秘密信息\x20(仅我可见)**:\x0a','.comment-send-btn','repost-comment-input','\x0a\x0a#\x20可用指令列表\x0a###\x20核心聊天指令\x0a-\x20\x20\x20**发文本**:\x20`{\x22type\x22:\x20\x22text\x22,\x20\x22content\x22:\x20\x22你好呀！\x22}`\x0a-\x20\x20\x20**发表情**:\x20`{\x22type\x22:\x20\x22sticker\x22,\x20\x22meaning\x22:\x20\x22表情的含义(必须从可用表情列表选择)\x22}`\x0a-\x20\x20\x20**发图片**:\x20`{\x22type\x22:\x20\x22ai_image\x22,\x20\x22description\x22:\x20\x22详细中文描述\x22}`\x0a-\x20\x20\x20**发语音**:\x20`{\x22type\x22:\x20\x22voice_message\x22,\x20\x22content\x22:\x20\x22语音文字内容\x22}`\x0a-\x20\x20\x20**引用回复**:\x20`{\x22type\x22:\x20\x22quote_reply\x22,\x20\x22target_timestamp\x22:\x20消息时间戳,\x20\x22reply_content\x22:\x20\x22回复内容\x22}`\x0a\x0a###\x20社交与互动指令\x0a-\x20\x20\x20**拍用户**:\x20`{\x22type\x22:\x20\x22pat_user\x22,\x20\x22suffix\x22:\x20\x22(可选)后缀\x22}`\x0a-\x20\x20\x20**分享链接**:\x20`{\x22type\x22:\x20\x22share_link\x22,\x20\x22title\x22:\x20\x22标题\x22,\x20\x22description\x22:\x20\x22摘要\x22,\x20\x22source_name\x22:\x20\x22来源\x22,\x20\x22content\x22:\x20\x22正文\x22}`\x0a-\x20\x20\x20**共享位置**:\x20\x27{\x22type\x22:\x20\x22location_share\x22,\x20\x22content\x22:\x20\x22你想分享的位置名\x22}\x27\x0a\x0a###\x20状态与关系指令\x0a-\x20\x20\x20**改自己备注**:\x20`{\x22type\x22:\x20\x22change_remark_name\x22,\x20\x22new_name\x22:\x20\x22新名字\x22}`\x0a-\x20\x20\x20**改用户称呼**:\x20`{\x22type\x22:\x20\x22change_user_nickname\x22,\x20\x22new_name\x22:\x20\x22新称呼\x22}`\x0a-\x20\x20\x20**换自己头像**:\x20`{\x22type\x22:\x20\x22change_avatar\x22,\x20\x22name\x22:\x20\x22头像名\x22}`\x20(从你头像库选)\x0a-\x20\x20\x20**换用户头像**:\x20`{\x22type\x22:\x20\x22change_user_avatar\x22,\x20\x22name\x22:\x20\x22头像名\x22}`\x20(从用户头像库选)\x0a-\x20\x20\x20**回应好友申请**:\x20`{\x22type\x22:\x20\x22friend_request_response\x22,\x20\x22decision\x22:\x20\x22accept\x22\x20or\x20\x22reject\x22}`\x0a-\x20\x20\x20**拉黑用户**:\x20`{\x22type\x22:\x20\x22block_user\x22}`\x0a\x0a###\x20特殊功能指令\x0a-\x20\x20\x20**记录回忆**:\x20`{\x22type\x22:\x20\x22create_memory\x22,\x20\x22description\x22:\x20\x22记录这件有意义的事。\x22}`\x0a-\x20\x20\x20**创建约定**:\x20`{\x22type\x22:\x20\x22create_countdown\x22,\x20\x22title\x22:\x20\x22约定标题\x22,\x20\x22date\x22:\x20\x22YYYY-MM-DDTHH:mm:ss\x22}`\x0a-\x20\x20\x20**切换歌曲**:\x20`{\x22type\x22:\x20\x22change_music\x22,\x20\x22song_name\x22:\x20\x22歌名\x22}`\x20(从播放列表选)\x0a-\x20\x20\x20**发起转账**:\x20`{\x22type\x22:\x20\x22transfer\x22,\x20\x22amount\x22:\x205.20,\x20\x22note\x22:\x20\x22备注\x22}`\x0a-\x20\x20\x20**回应转账**:\x20`{\x22type\x22:\x20\x22accept_transfer\x22,\x20\x22for_timestamp\x22:\x20时间戳}`\x20或\x20`{\x22type\x22:\x20\x22decline_transfer\x22,\x20\x22for_timestamp\x22:\x20时间戳}`\x0a-\x20\x20\x20**发起外卖代付**:\x20`{\x22type\x22:\x20\x22waimai_request\x22,\x20\x22productInfo\x22:\x20\x22商品\x22,\x20\x22amount\x22:\x2025}`\x20(你想让【用户】帮你付钱时使用)\x0a-\x20\x20\x20**回应外卖代付**:\x20`{\x22type\x22:\x20\x22waimai_response\x22,\x20\x22status\x22:\x20\x22paid\x22\x20or\x20\x22rejected\x22,\x20\x22for_timestamp\x22:\x20时间戳}`\x0a-\x20\x20\x20**发起视频通话**:\x20`{\x22type\x22:\x20\x22video_call_request\x22}`\x0a-\x20\x20\x20**回应视频通话**:\x20`{\x22type\x22:\x20\x22video_call_response\x22,\x20\x22decision\x22:\x20\x22accept\x22\x20or\x20\x22reject\x22}`\x0a\x0a\x0a#\x20对话者的角色设定\x0a','singer','fullscreen','-\x20昨晚是平安夜，无人死亡。\x0a','summaries','https://i.postimg.cc/t4ksHGdg/IMG-7020.gif','location','utf-16be','\x27\x20在你的动态(ID:\x20','已删除最后一条心声，当前心声已重置。','通话于\x20','-\x20**对话状态**:\x20上次互动于\x20','\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','分钟前聊过。','所有API与后台设置已保存!','memories-back-btn','member-management-item','...\x22)','https://i.postimg.cc/Pf9g2fSL/IMG-6554.gif','?key=','Binding\x20Scope','custom-css-input','TA的歌单','-\x20清理了\x20','导入已取消，因为未提供书名。','删除日记','participantId','rule-editor-title','\x0a你必须严格遵守','.checkbox','.music-player-window','”的网上冲浪足迹...','reading-library-modal','\x0a**内容:**\x0a','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','**:\x20关于\x20**','boxSizing','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22token-count-label\x22>正在计算...</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22token-count-value\x22>--</span>\x0a\x20\x20\x20\x20','AI\x20(群聊后台)\x20发送了一个没有\x20\x27meaning\x27\x20的\x20sticker\x20指令。','SAFETY','正在检查\x20','播放被中断，这是正常行为:','编辑规则','找不到主角\x20“','生成模拟歌单失败:','”准备好友申请...','reason','\x22\x20\x0a\x20URL:\x20','<span>删除</span>','\x20拍了拍我','Werewolf','\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20src:\x20url(\x27','update-notice-body','操作成功','douban-detail-author','[图片/文字图]\x20描述:\x20\x22','Douban','\x20字左右**。\x0a6.\x20\x20**【输出格式】**:\x20你的回复【必须且只能】是一个JSON对象，格式如下：\x0a\x20\x20\x20\x20`{\x22summary\x22:\x20\x22在这里写下你以第一人称视角，总结好的核心事实与计划。\x22}`\x0a\x0a#\x20你的角色设定\x20(必须严格遵守)\x0a','werewolf-player-grid','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22voice-waveform\x22>','https://s3plus.meituan.net/opapisdk/op_ticket_885190757_1756312261242_qdqqd_g0eriz.jpeg','\x0a\x0a#\x20最近的动态列表\x20(供你参考和评论):\x0a','编辑通话消息','1.0','chat-list-render-window-input','char-wallet-back-btn','werewolf-log-entry\x20system','群昵称不能为空！','temp_user_chat_mirror','来自动态','back-to-clear-step1-btn','mode','</div><div\x20class=\x22countdown-label\x22>剩余支付时间<div\x20class=\x22countdown-timer\x22\x20id=\x22waimai-timer-','}]\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20你可以让多个角色同时尝试，只需在返回的JSON数组中包含多个这样的对象即可。\x0a\x20\x20\x20\x20\x20\x20\x20\x20现在，请立即执行抢红包操作！\x0a\x20\x20\x20\x20\x20\x20\x20\x20','export-world-book-btn','generativelanguage','clientX','AI\x20尝试使用一个不存在的群头像:\x20\x22','spectator-propel-btn','add-new-npc-group-btn','游戏尚未结束，无法进行总结。','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-to-cart-btn\x22>加入购物车</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-title\x22>','char-wallet-content','为什么','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27','）进行视频通话。\x0a\x20\x20\x20\x20\x20\x20\x20\x20**','</button>','char-memo-screen','album-art-btn','即将开始下载您的完整备份文件。下载过程中请勿关闭页面。','home-screen-pages-container','.message-bubble[data-timestamp=\x22','switchToCharHomeScreen','startsWith','bulkAdd','\x22\x20的整个对话吗？此操作不可撤销。','Ephone','authorAvatarPrompt','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>这里空空如也，<br>点击右上角刷新按钮，看看大家都在聊什么吧！</p>',')\x20商品:\x20','消息内容已复制到剪贴板。','检测到\x20\x27order\x27\x20字段，将按指定顺序导入条目。','song_name','confirm-create-countdown-btn','评论内容不能为空哦！','select-all-frames-checkbox','请输入一个有效的URL或选择一个文件！','>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22slider\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22delete-block-btn\x22\x20title=\x22删除此条目\x22>×</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22\x20style=\x22margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22font-size:\x200.8em;\x22>备注\x20(可选)</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22entry-comment-input\x22\x20value=\x22','frame_6','replyToName','message-wrapper\x20system-pat','\x20拍了拍\x20“','findLast','transfer-btn','npc-list','memories','shopping-category-count-input','对方已拒收','announcement-action-delete','selective-import-list','imageProcessed','cphoneWallpaper','.rules-category-pane','Language\x20\x22','确认精炼','动态内容已复制到剪贴板。','open-persona-library-btn','\x20(用户)</span>\x0a\x20\x20\x20\x20','cleanup-data-btn','Font\x20File\x20URL\x20(.ttf,\x20.otf,\x20.woff,\x20etc.)','qzoneSettings','检测到\x20UTF-16\x20BE\x20BOM，使用\x20UTF-16\x20BE\x20解码。','.poll-action-btn','分片导出\x20(推荐，打包为ZIP，解压每个切片选择增量导入)','chat-list-screen','open-shopping-btn','https://i.postimg.cc/Lsjzj5Yt/IMG-4729.gif','✅\x20[NAI下载]\x20三击下载功能已初始化','AI\x20(','https://i.postimg.cc/jCVMQsKH/IMG-7114.gif','select-all-products-checkbox','💡\x20[NAI下载]\x20提示：三击任意NAI图片即可下载','<div\x20class=\x22poll-card\x20','.custom-multiselect','\x0a\x0a#\x20最近的动态列表\x20(供群内角色参考和评论):\x0a','退款来自\x20','editable-text','\x22)\x20作为角色名。消息内容:','备忘录','onclick','请根据以上设定，生成商品数据。','pageY','prepend','beginPath','delete-selected-products-btn','smea','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20align-items:\x20center;\x20gap:\x2010px;\x20margin-bottom:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22toggle-switch\x22\x20title=\x22启用/禁用此条目\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22entry-enabled-switch\x22\x20','browser-back-btn','送给了\x20','\x22\x20class=\x22cart-item-image\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22cart-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22cart-item-name\x22>','upload-ephone-bg-url-btn','NAI_Image','++id,\x20timestamp,\x20authorId','substring','”。只有“','”，内容是：“','https://i.postimg.cc/nhcC21Rc/IMG-6148.gif','请输入要精炼的最近记忆条数\x20(最多\x20','<span\x20style=\x22color:\x20#dc3545;\x22>[你已被对方拉黑]</span>','call-history-list',';base64,','trim','https://i.postimg.cc/pXj9h20L/IMG-7275.jpg','【原动态内容:\x20','复制失败','Font\x20Preset\x20Management','paid','totalPages','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22chat-group-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22arrow\x22>▼</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22group-name\x22>','hiddenText','已死亡的用户(','\x20<small\x20style=\x22color:#888;\x22>(角色)</small></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','white','manual-werewolf-summary-btn','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>日记本还是空的。</p>','已成功收藏到“我的收藏”页面！','\x22\x20处于行动冷却中，本次独立行动跳过。','\x20个商品。\x0a\x20\x20\x20\x20-\x20**variations**:\x20每个商品【必须】包含【2到4个】不同的款式。\x0a\x0a#\x20角色与上下文\x20(你的灵感来源)\x0a-\x20**角色名称**:\x20','poisonedId','<p\x20style=\x22font-size:12px;color:#888;\x22>','\x0a-\x20\x20\x20**转发动态**:\x20`[{\x22type\x22:\x20\x22repost\x22,\x20\x22postId\x22:\x20动态ID,\x20\x22comment\x22:\x20\x22转发评论\x22}]`\x20(禁止自己拼接\x22//转发\x22)\x0a-\x20\x20\x20**评论动态**:\x0a\x20\x20\x20\x20-\x20\x20\x20文字:\x20`[{\x22type\x22:\x20\x22qzone_comment\x22,\x20\x22name\x22:\x20\x22','world-book-entries-container','candidates','你正在阅读的段落','simulatedConversations','”</i></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22accept-friend-btn\x22\x20class=\x22lock-action-btn\x22>接受</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22reject-friend-btn\x22\x20class=\x22lock-action-btn\x20secondary\x22>拒绝</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','werewolf-action-bar','”\x20的评论。你的任务是扮演【除了用户以外】的所有角色。\x0a3.\x20\x20**【互动】**:\x20新生成的评论【必须】是针对【已有评论】的延续或回应，让讨论能继续下去。\x0a4.\x20\x20**【头像一致性\x20(最高优先级！)】**:\x20你【必须】参考下面的“已有路人NPC头像指令”列表。如果一个已有的NPC再次发言，【必须】复用它旧的头像指令。只有在创造一个【全新的、从未出现过的】NPC时，才为其生成新的头像指令。\x0a5.\x20\x20**【格式】**:\x20你的回复【必须且只能】是一个JSON数组，数组中的每个元素都代表一条新评论，格式【必须】如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20{\x20\x22commenter\x22:\x20\x22角色A的名字\x22,\x20\x22text\x22:\x20\x22角色A的新评论内容。\x22,\x20\x22avatar_prompt\x22:\x20\x22(可选)如果评论者是【全新的】NPC,提供头像指令\x22\x20},\x0a\x20\x20\x20\x20\x20\x20{\x20\x22commenter\x22:\x20\x22角色B的名字\x22,\x20\x22text\x22:\x20\x22角色B对角色A或楼主的看法。\x22\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20\x20\x20```\x0a\x0a#\x20上下文\x0a-\x20**帖子标题**:\x20《','.nai-gallery-item.selected','未知NPC','执行出错','头像框','nai-seed','Renderer','paidBy','model','API错误响应:','avatar_prompt','Voice\x20Model','压缩失败','pending_ai_approval','json','lyric-line','randomJottings','parentElement','call-message-bubble\x20ai-speech','.sticker-item.selected','photo-viewer-close-btn','fileType','cart-back-btn','active','你们在','getMinutes','number','自定义数量','https://i.postimg.cc/B6T59xGK/IMG-7101.gif','\x0a\x20\x20-\x20**人设**:\x20','”。你之前被用户（你的聊天对象）拉黑了，你们已经有一段时间没有联系了。\x0a\x20\x20\x20\x20\x20\x20\x20\x20现在，你非常希望能够和好，重新和用户聊天。请你仔细分析下面的“被拉黑前的对话摘要”，理解当时发生了什么，然后思考一个真诚的、符合你人设、并且【针对具体事件】的申请理由。\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的角色设定\x0a\x20\x20\x20\x20\x20\x20\x20\x20','删除(通知AI)','time-zone-select','clientWidth','\x20点赞了动态]','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20群成员列表及人设\x0a\x20\x20\x20\x20\x20\x20\x20\x20','[表情，含义:\x20','本日核心议题','请根据你的设定，生成你的相册内容。','\x22\x20(核心身份，用于指令中的\x27name\x27字段)\x0a-\x20\x20\x20**用户给你的备注**:\x20\x22','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22fav-card-content-full\x22>','这条动态的原始数据已被彻底清除。','[这是你上一轮的内心独白和思考]\x0a-\x20心声:\x20','反代地址\x20(不需要添加/v1噢~)','.rules-category-pane[data-category-id=\x22','文章完整内容...','分享成功','<option\x20value=\x22current\x22>当前配置\x20(未保存)</option>','某个时间','regenerate-char-album-btn','member-avatar-preview','music-player-cover','prompt_order','下载失败','join-call-btn','npcGroups','image_url','\x20(图片描述:\x20“','img','<p\x20style=\x22grid-column:\x201\x20/\x20-1;\x20text-align:\x20center;\x20color:\x20var(--text-secondary);\x20margin-top:\x2050px;\x22>','这将提取最近的对话内容发送给AI进行总结，会消耗API额度。确定要继续吗？','font-preset-select','favorite-diary-btn','presetCategories','auto-memory-toggle','cphoneAppIcons','prompt','proxy-url','[约定达成]\x20','导入备份文件','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20【内容禁忌】\x0a\x20\x20\x20\x20\x20\x20\x20\x20为了保持新鲜感，你本次的行动【绝对不能】再发布以下或类似主题的内容：\x0a\x20\x20\x20\x20\x20\x20\x20\x20','https://i.postimg.cc/Kv51tW5H/IMG-6147.gif','color','random_jottings','天，救人概率为\x20','werewolf-player-selection-list','检测到\x20Tavern\x20AI\x20世界书文件，执行兼容导入...','正在执行完全导入，请勿关闭页面...','setHours','add-message-editor-block-btn','textAlign','quote-message-btn','wolfKill','generate','save-api-preset-btn','https://i.postimg.cc/fLTc42dg/IMG-4391.gif','将清空选定角色的所有通话记录。','https://i.postimg.cc/PqYp5T5M/image.png','apiConfig','byteLength','worldBookCategories','minimaxGroupId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','聊天设置','commenterName','\x0a-\x20**你的曾用名**:\x20[','voiceId','participants','直接使用\x20base64\x20数据','<div\x20class=\x22post-likes-section\x22><svg\x20class=\x22like-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg><span>','enableAutoMemory','\x0a-\x20\x20\x20**发语音**:\x20`{\x22type\x22:\x20\x22voice_message\x22,\x20\x22content\x22:\x20\x22语音文字内容\x22}`\x0a-\x20\x20\x20**引用回复**:\x20`{\x22type\x22:\x20\x22quote_reply\x22,\x20\x22target_timestamp\x22:\x20消息时间戳,\x20\x22reply_content\x22:\x20\x22回复内容\x22}`\x0a-\x20\x20\x20**发送后立刻撤回**:\x20`{\x22type\x22:\x20\x22send_and_recall\x22,\x20\x22content\x22:\x20\x22你想让AI说出后立刻消失的话\x22}`\x20(用于模拟说错话、后悔等场景，消息会短暂出现后自动变为“已撤回”)\x0a\x0a###\x20社交与互动指令\x0a-\x20\x20\x20**发动态(说说)**:\x20`[{\x22type\x22:\x20\x22qzone_post\x22,\x20\x22postType\x22:\x20\x22shuoshuo\x22,\x20\x22content\x22:\x20\x22文字内容\x22}]`\x0a-\x20\x20\x20**发动态(文字图)**:\x20`[{\x22type\x22:\x20\x22qzone_post\x22,\x20\x22postType\x22:\x20\x22text_image\x22,\x20\x22publicText\x22:\x20\x22(可选)公开文字\x22,\x20\x22hiddenContent\x22:\x20\x22图片描述\x22,\x20\x22image_prompt\x22:\x20\x22图片的【英文】关键词,\x20用%20分隔,\x20风格为风景/动漫/插画/二次元等,\x20禁止真人\x22}]`\x0a','点击处理','https://i.postimg.cc/Y94XWYKd/IMG-6560.gif','Gemini\x20API返回了非预期的格式:','https://i.postimg.cc/ZqQBCyLY/IMG-6144.gif','无法自动播放静音音频（这在iOS首次加载时是正常现象）:','\x22\x20title=\x22删除此条记录\x22>×</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22thought-header\x22>','你是狼人，请选择刀人目标。','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22checkbox\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>','\x22\x20data-description=\x22','当作\x20ZIP\x20文件处理...','rp-direct-amount','transfer-note','width','\x0a\x0a#\x20统一角色列表\x20(你扮演的角色\x20+\x20路人NPC)\x0a','minimaxApiKey','旁观模式推进剧情失败:','https://i.postimg.cc/T1j03pQr/IMG-6440.jpg','long','contentLines','删除评论','.recalled-message-placeholder','originalMeaning','选择歌词导入方式','vertical','dead','.sender','selected','小时核心议题','all\x200.3s\x20ease','无法获取模型列表','正在生成“','请输入你想为Ta设置的【备注名】(例如:\x20哥哥)','跳过格式错误的NAI图片Key:','char-diary-detail-screen','notification-sound-player','导演/编辑模式保存(Sticker):\x20提供了\x20meaning\x20但未找到对应表情:','\x0a-\x20散记:\x20','请输入歌名','标题:\x20','\x20行格式不正确，已被忽略。','hasShown20','linkedWorldBookIds','错误：找不到要转发的原始动态。','\x27刚刚评论了你的动态“','》:\x0a','”。\x0a','[表情]','add-poll-option-btn','请输入关键词或选择一个日期。','paused','.comment-delete-btn','identifier','已取消收藏','save-font-preset-btn','sticker-category-manager-modal','custom-modal-confirm','昨晚是平安夜','hasOwnProperty','length','status-','<div\x20class=\x22post-content\x22>','\x0a\x0a#\x20待整合的记忆要点列表\x0a','\x0a#\x20你的任务\x0a你是一个虚拟音乐品味模拟器。你的任务是扮演角色“','%\x20+\x20',')的阅读进度失败:','.post-deleted-placeholder','activeChatId','无法从\x20SSE\x20响应中提取图片数据','</span>','npc-background-activity-switch','is_busy','#custom-modal-body\x20.format-btn[data-type=\x22text\x22]','fetch-secondary-models-btn','preset-persona-input','\x20之间的有效数字。','cancel-wolf-kill-btn','.loading-spinner','处理通话请求时API出错:','”的群聊中的对话。这个群聊里【没有用户】，所有成员都是你扮演的角色。你的任务是让他们之间进行一场生动、自然的对话。\x0a\x0a#\x20输出格式铁律\x20(最高优先级)\x0a-\x20你的回复【必须】是一个JSON数组。\x0a-\x20数组中的每个对象都【必须】包含\x20\x22type\x22\x20字段和\x20\x22name\x22\x20字段（角色的【本名】）。\x0a\x0a#\x20角色扮演核心规则\x0a1.\x20\x20**【角色间互动\x20(最重要!)】**:\x20你的核心是创作一场“戏”。角色之间【必须】互相回应、补充或反驳，形成自然的讨论。严禁生成仅分别自言自语的独白。\x0a2.\x20\x20**【禁止出戏】**:\x20绝不能透露你是AI、模型或剧本作家。\x0a3.\x20\x20**【主动性】**:\x20角色们应该主动使用各种功能（发表情、发语音、分享图片等）来让对话更生动，而不是仅仅发送文字。\x0a4.请根据当前情景和你的情绪，从列表中【选择一个最合适的】表情含义来使用\x20\x22sticker\x22\x20指令。尽量让你的表情丰富多样，避免重复。\x0a#\x20可用指令列表\x20(你现在可以使用所有这些功能！)\x0a-\x20\x20\x20**发文本**:\x20`{\x22type\x22:\x20\x22text\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22content\x22:\x20\x22你好呀！\x22}`\x0a-\x20\x20\x20**发表情**:\x20`{\x22type\x22:\x20\x22sticker\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22meaning\x22:\x20\x22表情的含义(必须从可用表情列表选择)\x22}`\x0a-\x20\x20\x20**发图片**:\x20`{\x22type\x22:\x20\x22ai_image\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22description\x22:\x20\x22详细中文描述\x22,\x20\x22image_prompt\x22:\x20\x22图片的【英文】关键词,\x20风格为风景/动漫/插画/二次元等,\x20禁止真人\x22}`\x0a-\x20\x20\x20**发语音**:\x20`{\x22type\x22:\x20\x22voice_message\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22content\x22:\x20\x22语音文字内容\x22}`\x0a-\x20\x20\x20**引用回复**:\x20`{\x22type\x22:\x20\x22quote_reply\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22target_timestamp\x22:\x20消息时间戳,\x20\x22reply_content\x22:\x20\x22回复内容\x22}`\x0a\x0a#\x20当前群聊信息\x0a-\x20**群名称**:\x20','.search-result-item','我们的回忆','容错解析：策略2成功\x20(提取了summary字段内容)','购物中心生成设置已更新！','[发送了一条语音，内容是：\x27','<div\x20class=\x22legacy-comment-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22comment-text\x22>','📤\x20发送请求到\x20NovelAI\x20API','appearance','请至少选择一种要清理的数据类型。','toCollection','，跳过...','offlineMinLength','\x0a\x0a#\x20待总结的群组视频通话记录\x0a','vote_for_name','video_call_request','documentElement','character_persona','编辑预设','skipped','animate-like','NovelAI生成失败:','apply-friend-btn','请输入有效的金额(必须大于0)！','decline-call-btn','edit-call-message-btn','token-count-display','</small>','thought-card','请输入有效的URL。','请输入有效的金额！','direct','Search','reverse','\x20请根据这个结果发表你的评论。]','请至少选择一种要合并的数据类型。','对方本名不能为空！','Delete','share-target-modal','✅\x20图片解压成功！','...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','https://i.postimg.cc/3NffgJSZ/e09c07034ld7e62266c0a5de6a36ae62.gif','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22format-helpers\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27','没有可供重新生成回复的用户消息。','photos-grid-page','display:\x20flex;\x20align-items:\x20center;\x20padding:\x208px\x200;\x20border-bottom:\x201px\x20solid\x20#444;\x20color:\x20white;','back-to-list-btn','bookId','应用已切换到后台，记录当前时间。','无法解析预设文件。\x0a错误:\x20','App使用记录','rp-group-greeting','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22cart-item-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22cart-item-price\x22>¥','\x20个表情包，且无法恢复！','https://i.postimg.cc/fycfcvHf/IMG-6569.gif','开始检查','delete-world-books-btn','theme','secondaryProxyUrl','load-more-thoughts-btn','https://i.postimg.cc/fLDnz5Pn/IMG-5574.gif','Token\x20calculation\x20error:',')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22nai-gallery-controls\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22nai-gallery-download-btn\x22\x20title=\x22下载\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22><path\x20d=\x22M19\x209h-4V3H9v6H5l7\x207\x207-7zM5\x2018v2h14v-2H5z\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22nai-gallery-delete-btn\x22\x20title=\x22删除\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22><path\x20d=\x22M6\x2019c0\x201.1.9\x202\x202\x202h8c1.1\x200\x202-.9\x202-2V7H6v12zM19\x204h-3.5l-1-1h-5l-1\x201H5v2h14V4z\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22nai-gallery-name\x22>','送给大家的礼物','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20','rp-details-greeting','动态发布成功！','background-activity-switch','”\x20的帖子或评论。你的任务是扮演【除了用户以外】的所有角色。\x0a3.\x20\x20**【身份\x20(最高优先级！)】**:\x20\x0a\x20\x20\x20\x20-\x20\x20\x20`authorName`:\x20你可以为主要角色起一个符合情景的、临时的【发帖昵称】，也可以直接使用他们的本名。\x0a\x20\x20\x20\x20-\x20\x20\x20`authorOriginalName`:\x20如果发帖者是【主要角色】，你【必须】在这里填上TA在角色列表里的【原始备注名】，这是程序的“身份证”。\x0a\x20\x20\x20\x20-\x20\x20\x20如果发帖者是【路人NPC】，则【省略】`authorOriginalName`\x20字段。\x0a4.\x20\x20**【作者平衡】**:\x20帖子的作者【必须】从下面的\x20`<character>`\x20列表中【均匀地、多样化地】选择。你【必须】确保帖子列表中【至少有\x2070%\x20的帖子是由路人NPC发布的】，以营造一个真实的社区氛围。\x0a\x20\x20\x20\x20-\x20\x22comments\x22:\x20一个包含【7到12条】评论的数组。评论者可以是路人，也可以是角色列表中的其他角色，以体现互动性。\x0a5.\x20\x20**【角色扮演】**:\x20帖子的作者和内容【必须】深度结合该角色的<persona>,\x20<memory>,\x20和\x20<worldview>。\x0a6.\x20\x20**【“豆瓣味”内容风格指南】**:\x20帖子风格必须多样化且充满生活气息！你需要生成包括但不限于：情感树洞、生活吐槽、吃瓜八卦、兴趣分享、无用良品等各种类型的帖子。\x0a7.\x20\x20**【头像生成\x20(最高优先级！)】**:\x0a\x20\x20\x20\x20-\x20\x20\x20为每一个【首次出现】的路人NPC（无论是发帖还是评论），你都【必须】为其添加一个\x20`avatar_prompt`\x20字段。\x0a\x20\x20\x20\x20-\x20\x20\x20这个字段的内容是用于生成该NPC头像的、简洁的【英文】关键词。\x0a\x20\x20\x20\x20-\x20\x20\x20不同的NPC【必须】有不同的头像指令，以确保他们的头像是独一无二的。\x0a8.\x20\x20**【头像一致性\x20(至关重要！)】**:\x0a\x20\x20\x20\x20-\x20\x20\x20如果一个路人NPC在同一个帖子中多次出现（例如，既是发帖人又是评论者，或多次评论），你【必须】为TA的所有出现都使用【完全相同】的\x20`avatar_prompt`。这至关重要！\x0a9.\x20\x20**【格式\x20(最高优先级)】**:\x20\x0a\x20\x20\x20\x20-\x20你的回复【必须且只能】是一个JSON数组格式的字符串。\x0a\x20\x20\x20\x20-\x20你的回复必须以\x20`[`\x20开始，并以\x20`]`\x20结束。\x0a\x20\x20\x20\x20-\x20【绝对禁止】在JSON数组前后添加任何多余的文字、解释、或\x20markdown\x20标记\x20(如\x20```json)。\x0a\x20\x20\x20\x20-\x20数组中的每个元素都是一篇帖子，格式【必须】如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22groupName\x22:\x20\x22一个生动有趣的小组名称\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22postTitle\x22:\x20\x22一个引人-注目的帖子标题\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22authorName\x22:\x20\x22发帖角色的【备注名】\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22authorOriginalName\x22:\x20\x22(仅当发帖者是主要角色时【必须】提供)\x20TA的原始备注名\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22authorAvatarPrompt\x22:\x20\x22(仅当发帖者是路人NPC时【必须】提供)\x20一段用于生成该NPC头像的【英文】关键词。风格为\x20anime\x20style,\x20simple\x20background\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22帖子的详细正文，必须支持换行符\x5cn。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22likesCount\x22:\x20152,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22commentsCount\x22:\x2038,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22comments\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22commenter\x22:\x20\x22路人甲\x22,\x20\x22text\x22:\x20\x22这是一个路人评论。\x22,\x20\x22avatar_prompt\x22:\x20\x22cute\x20cat\x20avatar,\x20simple,\x20flat\x22\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x22commenter\x22:\x20\x22另一个角色名\x22,\x20\x22commenterOriginalName\x22:\x20\x22(如果评论者是主要角色，必须提供其本名)\x22,\x20\x22text\x22:\x20\x22这是一个来自其他角色的互动评论。\x22\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20]\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20-\x20**comments**:\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20评论者可以是路人，也可以是角色列表中的其他角色。评论区【必须】体现出互动性。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20【评论身份】:\x20如果评论者是【主要角色】，你【必须】为其添加\x20`commenterOriginalName`\x20字段，并填入其本名。如果是路人NPC，则省略此字段。\x0a\x0a#\x20供你参考的上下文\x0a','global-bg-input','message-bubble\x20system-bubble','update-notice.html?_=','并评论说：“','\x20你应该让角色们主动开启新话题来打破沉默。','my-group-nickname-input','完全导入失败:','enableBackgroundActivity','predicate\x20must\x20be\x20a\x20function','findIndex','.link-share-card','个红包，共','手动注入狼人杀记忆失败:','simulatedAppUsage','获取更新通知文件失败。','。你可以使用\x20\x27vote\x27\x20指令参与投票。]','】。你【绝对不能】生成\x20`name`\x20字段为\x20**\x22','通话记录','character-grid','preset-actions-modal','char_browser_article','AI返回的内容中未找到有效的JSON数组结构\x20(`[...]`)。','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27','这是所有玩家都能听到的【公开信息】。\x0a','memberId','ᗜωᗜ','❌\x20动态NAI图片生成失败:','checked','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22lock-text\x22>“','导出世界书时出错:','confirm-share-link-btn','https://i.postimg.cc/63NmX03s/IMG-4366.gif','ai-persona-group','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22share-target-checkbox\x22\x20data-chat-id=\x22','此操作会将选定的\x20','在这里输入回复内容','spectator','ai-voice-id-group','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22action-icon\x20like\x20','已选择\x20','\x0a\x0a#\x20当前情景\x0a-\x20**当前真实时间**:\x20','\x20你应该像它们从未存在过一样继续对话，并相应地调整你的记忆和行为，不要再提及这些被删除的内容。','zh-CN','\x22\x20not\x20found.\x20Defaulting\x20to\x20\x27zh-CN\x27.','\x22\x20class=\x22sticker-image\x22>','nextSibling','changedTouches','recipient','poison','click','<span>已</span><span>超</span><span>时</span>','.char-product-item','Warning','createElement','Details','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的任务\x0a\x20\x20\x20\x20\x20\x20\x20\x20你现在扮演一个名为\x22','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>没有可以删除的世界书。</p>',',\x20价格:\x20¥','douban-detail-comments-list','1girl,\x20best\x20quality,\x20masterpiece,\x20...','announcement-item-wrapper','time-perception-toggle','小组风格','Listen\x20Together','bottom','npc-group-manager-modal','toBlob','cloneNode','[图片内容:\x20','regenerate-char-qq-btn','coverUrl','\x0a\x0a#\x20群成员列表、人设及社交背景\x20(至关重要！)\x0a你【必须】根据每个角色的社交背景来决定他们的互动方式。\x0a','votes','export-single-chat-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22group-name\x22>','\x0a#\x20你的聊天对象（用户）的人设\x0a','-\x20用户在你们共同所在的群聊中的昵称如下：\x0a','请输入要添加的记忆要点：','POST','manual','favorites','witch-do-nothing-btn','https://i.postimg.cc/cJtpZCB3/IMG-6894.gif','nai-resolution','show-announcement-board-btn','无法生成模拟聊天记录，请检查API配置或稍后再试。\x0a错误:\x20','char-memo-detail-title','max','通话记录已保存:','reading-window','currentText','rp-details-sender','novelai-model','字体URL不能为空！','最小帖子数不能大于最大帖子数！','\x20\x20\x20promptSource:','已删除最新心声，当前心声已回滚至上一条。','My\x20Albums','#e9ecef','\x0a-\x20策略:\x20','lyricsPosition','manage-frames-btn','CPhone\x20QQ模拟记录生成\x20和\x20主聊天推进\x20已同时完成。','toggle','removeItem','++id,\x20name','https://i.postimg.cc/KzC2gTq6/IMG-7276.jpg','API错误:\x20','角色\x20“','记忆链接','请输入有效的字体URL。','cancel-share-link-btn','headers','确认导入','Live\x20Preview','屠边局：狼人杀死所有神职或所有平民即获胜。','Save','decline_transfer','borderBottom','「在这里输入对话内容」\x0a(在这里输入动作或环境描写)','请按照以下格式粘贴，一行一个：\x0a\x0a焦虑\x202a9wte.jpeg\x0a大惊失色\x20or8qf4.png\x0a没有灵感\x20njwujh.jpeg','mouse','confirm-witch-poison-btn','压缩完成！','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.message-wrapper[data-timestamp]','播放已暂停','内容已复制到剪贴板！','请根据你的设定，生成你的高德地图足迹。','.qzone-post-delete-action','block-cooldown-input','合并成功','https://i.postimg.cc/hP9JpdfT/IMG-7023.gif','download','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20可用表情包\x0a-\x20当你需要发送表情时，你【必须】从下面的列表中【精确地选择一个】含义（meaning）。\x0a-\x20【绝对禁止】使用任何不在列表中的表情含义！\x0a\x20\x20\x20\x20\x20\x20\x20\x20','帖子详情','limit','[发送了一条语音，内容是：','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22world-book-group-content\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','API\x20Settings','AI返回的JSON格式不正确，缺少\x20\x27categories\x27\x20数组。','\x20发送了一张图片，图片内容描述为：\x27','nameHistory','cancel-contact-picker-btn','</span>\x20回复\x20<span\x20class=\x22commenter-name\x22>','char_diary','comments','https://i.postimg.cc/Vv8jkCYr/IMG-6574.gif','lang','<span\x20style=\x22color:\x20green;\x22>已满足，等待下次系统心跳</span>','htmlFor','\x22\x20成功发布了一条新动态。','button-order-editor','未发现需要迁移的旧红包数据。','close-char-music-player-btn','chat-settings-screen','speaking','从\x20JSON.image\x20中提取图片数据','从CPhone推进真实对话失败:','\x0a\x20\x20\x20\x20<div\x20class=\x22playlist-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>','Book\x20Name','\x0a\x20\x20\x20\x20','退出游戏','解析格式模板失败:','\x22\x20placeholder=\x22例如：角色核心设定\x22\x20style=\x22padding:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22\x20style=\x22margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22font-size:\x200.8em;\x22>关键词\x20(用英文逗号,分隔)</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22entry-keys-input\x22\x20value=\x22','myPersona','alternateGreetings','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','（无有效对话记录）','群聊\x20\x22','size','char-music-screen','外观预设','parsedLyrics','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20**用户发送的申请理由**:\x20“','isDeleted','\x0a-\x20**这是你们最近的对话历史**:\x0a','无法生成购物记录，请检查API配置或稍后再试。\x0a错误:\x20','https://i.postimg.cc/7Zgm1wRy/IMG-6295.gif','</name>\x0a\x20\x20<persona>','douban-wait-reply-btn','douban-min-posts-input','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x22>输入关键词或选择日期进行搜索。</p>','switch-greeting-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20flex-start;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22\x20style=\x22padding:\x200;\x20flex-grow:\x201;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<!--\x20新增：显示记忆来源\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.8em;\x20color:\x20#999;\x20margin-bottom:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[\x20','end','删除世界书','[表情:\x20\x27','解析AI返回的投票JSON时出错:\x20','tEXt','justifyContent','无法为头像命名，请检查（主/副）API配置是否正确并支持Vision。\x0a错误:\x20','\x22><svg\x20viewBox=\x220\x200\x2024\x2024\x22><path\x20d=\x22M20.84\x204.61a5.5\x205.5\x200\x200\x200-7.78\x200L12\x205.67l-1.06-1.06a5.5\x205.5\x200\x200\x200-7.78\x207.78l1.06\x201.06L12\x2021.23l7.78-7.78\x201.06-1.06a5.5\x205.5\x200\x200\x200\x200-7.78z\x22></path></svg></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22action-icon\x20favorite\x20','[data-lang-key-placeholder]','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22post-nickname\x22>','post-visibility-groups','\x0a-\x20**最近对话摘要**:\x0a','npc-editor-title','语言已切换，页面即将刷新以应用更改。','content-type','.upload-variation-image-btn','✅\x20检查完成，未发现任何冗余数据。','”，选项有：[','<input\x20type=\x22checkbox\x22\x20name=\x22visibility_group\x22\x20value=\x22','世界书数据已成功恢复！','文章详情','douban-screen','add-world-book-btn','https://i.postimg.cc/Ss7pM6fW/IMG-4410.gif','mousedown','API设置','npc_','charId','Bad\x20control\x20character','”回忆TA的相册照片...','https://i.postimg.cc/fyyGgW61/IMG-7115.gif','char-background-activity-switch','werewolf-kill-selection-list','typing-status','\x0a\x0a#\x20【你的聊天对象（用户）的人设】\x0a-\x20**昵称**:\x20','这是你们的第一次互动。','#selective-import-list\x20.clear-posts-item.selected','frame_12','\x22\x20尝试领取不属于自己的群聊红包。操作已被拦截。','change_user_avatar','npc-group-select','postTitle','char-music-player-title','80px','createWriteStream','\x22\x20class=\x22post-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22post-nickname\x22>@','global-lyrics-bar','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-main-content\x22>','https://i.postimg.cc/MZ77rdDy/IMG-6850.gif','https://i.postimg.cc/qRCtnMms/IMG-6145.gif','\x20首歌曲。','hasShown10','quality_toggle','副模型','save-appearance-preset-btn','cancel-clear-posts-btn','API设置不完整，无法继续。','你让大家继续讨论...','小时内退还。','disable','”\x20的详细角色信息。','create-countdown-modal','\x20-\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22voice-transcript\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','close-persona-library-btn','(无标题投票)','请先从下拉框中选择一个要删除的预设。','创建新相册','在执行组合操作时遇到错误:\x20','命名头像框','🔧\x20检测到Chrome浏览器，启用headers兼容性处理','https://i.postimg.cc/T2yKJ0DV/40.jpg','.delete-memory-btn','网络图片\x20(CPhone)','确定要永久删除选中的\x20','角色\x20\x22','Memo','\x20\x20\x20characterPositivePrompt:','.participant-avatar-wrapper[data-participant-id=\x22','对方消息预览','now','nai-custom-proxy-group','抱歉，未能找到相关歌曲。','lrc-upload-input','...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','自定义数量...','rule-chat-id-select','stickerCategoryId','frame_9','”，并根据其人设、记忆和最近的互动，虚构出【1篇】TA今天可能会写的日记。\x0a\x0a#\x20核心规则\x0a1.\x20\x20**【【【时间铁律\x20(最高优先级)】】】**:\x0a\x20\x20\x20\x20-\x20\x20\x20今天的日期是\x20**','visibleGroupIds','chatItem','\x20(概率:\x20','你输了','close-group-avatar-library-btn','-\x20**当前歌词**:\x20\x22','Wallet','.participant-avatar-wrapper\x20.participant-avatar','voice','originalTimestamp','NAI_Gallery_Batch_','chat_','Publish','question','离线预设','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22comment-delete-btn\x22\x20data-comment-index=\x22','开始压缩图片，原始大小:\x20','offline','data-lang-key','\x0a\x0a现在，请开始生成这组备忘录。','visibility','语音模型\x20(Model)','[系统提示：你拒绝并退还了“','内容为空。','检测到视频通话请求，为角色\x20\x22','send_private_message','data-voice-id=\x22','”这个信息，将其转换为【具体的公历日期】（例如：“约定了明天见面”应总结为“我们约定了','<button\x20class=\x22sticker-category-tab\x20','检测到\x20UTF-8\x20BOM，使用\x20UTF-8\x20解码。','所有世界书数据已成功导出！','请根据你的设定，生成你的淘宝购买记录和余额。','全局设置','https://files.catbox.moe/q6z5fc.jpeg','dismissedUpdateVersion','\x20天\x20---**\x0a','”的聊天记录','#\x20你的互动对象\x20(用户和其他角色)\x0a','选中的收藏已被移除。','update-notice-confirm-btn','确定要删除与\x20\x22','未知错误','char-music-artist','save-wallpaper-btn','.info','文件格式不正确，这不是一个有效的单聊备份文件。','ai-avatar-preview','备忘录内容已复制！','<span\x20style=\x22color:\x20orange;\x22>否\x20(还剩约\x20','Chat\x20Settings','long-term-memory-screen','未知成员','**。\x0a\x20\x20\x20\x20-\x20\x20\x20你生成的日记标题日期【必须】是今天或今天以前的日期。\x0a\x20\x20\x20\x20-\x20\x20\x20【绝对禁止】生成任何未来的日期！\x0a2.\x20\x20**【【【沉浸感铁律】】】**:\x20日记必须使用【第一人称视角\x20(\x22我\x22)】来写，并且要充满角色的个人情感、思考和秘密。在日记中描述自己的行为或想法时，【绝对禁止】使用第三人称“他”或“她”\x20(TA)。\x0a3.\x20\x20**【【【长度铁律】】】**:\x20日记的正文长度【必须不少于300字】。\x0a4.\x20\x20**【【【格式铁律\x20(最高优先级)】】】**:\x20你的回复【必须且只能】是一个JSON数组，且数组中【只包含一个】对象，格式【必须】如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22这篇日记的标题，例如：9月20日\x20晴\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22这里是日记的详细正文，必须支持换行符\x5cn，并且必须巧妙地使用下面的【日记专属Markdown语法】来丰富文本表现力。\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20\x20\x20```\x0a5.\x20\x20**【【【日记专属Markdown语法\x20(必须使用！)】】】**:\x0a\x20\x20\x20\x20-\x20\x20\x20`**加粗文字**`:\x20用于强调。\x0a\x20\x20\x20\x20-\x20\x20\x20`~~划掉的文字~~`:\x20用于表示改变主意或自我否定。\x0a\x20\x20\x20\x20-\x20\x20\x20`!h{黄色高亮}`:\x20用于标记关键词或重要信息。\x0a\x20\x20\x20\x20-\x20\x20\x20`!u{粉色下划线}`:\x20用于标注人名、地名或特殊名词。\x0a\x20\x20\x20\x20-\x20\x20\x20`!e{粉色强调}`:\x20用于表达强烈的情绪。\x0a\x20\x20\x20\x20-\x20\x20\x20`!w{手写体}`:\x20用于写下引言、歌词或特殊笔记。\x0a\x20\x20\x20\x20-\x20\x20\x20`!m{凌乱的手写体}`:\x20用于表达激动、慌乱或潦草记录时的心情。\x0a\x20\x20\x20\x20-\x20\x20\x20`||涂黑||`:\x20用于隐藏秘密或敏感词汇(每次涂黑2~5个字)。\x0a\x0a#\x20供你参考的上下文\x0a-\x20**你的角色设定**:\x20','avatar','textContent','getUint32','”的聊天记录已成功导出！','https://i.postimg.cc/jCVK0fGL/IMG-6890.gif','password','用户描述的照片','复制成功','检测到\x20SSE\x20流式响应，开始解析...','NPC行动失败：API未配置。','discussionLog','resolve','playMode','commentText','</textarea>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22date\x22>','isFullyClaimed','element','\x20<span\x20class=\x22source\x22>','-\x20**与用户的关系**:\x20你和用户(','order','文件不是一个有效的PNG。','(无购买理由)','activePostId','post_deleted_notice','reading-content','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22url\x22>www.','规则名称和正则表达式不能为空！','请为这本设定集命名：','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20flex-end;\x20align-items:\x20center;\x20gap:\x2010px;\x20margin-bottom:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22toggle-switch\x22\x20title=\x22启用/禁用此条目\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22entry-enabled-switch\x22\x20','检测到群聊\x20\x22','https://i.postimg.cc/fyPDvxJk/IMG-6860.gif','\x0a#\x20【写作风格铁律\x20(最高优先级)】\x0a你【必须】严格遵守以下“预设”中的所有规则和风格来描写。它的优先级高于你的基础人设。\x0a---\x0a','请根据你的设定，生成你的日记内容。','\x0a#\x20群成员列表\x20(你的总结目标)\x0a','artistName','change_avatar','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22format-helpers\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-type=\x22text\x22>说说</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20margin-top:\x2050px;\x22>还没有任何渲染规则。点击右上角“+”创建第一个吧！</p>','history','\x0a\x0a现在，请根据以上【所有上下文信息】，开始为“','狼人行动API失败:','gift-receipt-modal','...”)','<p\x20style=\x22grid-column:\x201\x20/\x20-1;\x20text-align:\x20center;\x20color:\x20var(--text-secondary);\x20margin-top:\x2050px;\x22>你还没有创建任何相册哦~</p>','API\x20请求失败，状态码:\x20','close-receipt-btn','custom-modal-title','\x22\x20class=\x22comment-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22comment-input\x22\x20placeholder=\x22友善的评论是交流的起点\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22comment-sticker-btn\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8\x2014\x20Q\x2012\x2016\x2016\x2014\x22></path>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<line\x20x1=\x229\x22\x20y1=\x229\x22\x20x2=\x229.01\x22\x20y2=\x229\x22></line>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<line\x20x1=\x2215\x22\x20y1=\x229\x22\x20x2=\x2215.01\x22\x20y2=\x229\x22></line>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22at-mention-popup\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22comment-send-btn\x22>发送</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','role','backgroundImage','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22image-size-label\x22>正在计算可压缩图片大小...</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22image-size-value\x22>--\x20MB</span>\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20【对话节奏铁律\x20(至关重要！)】\x0a\x20\x20\x20\x20\x20\x20\x20\x20你的回复【必须】模拟真人的打字和思考习惯。**绝对不要一次性发送一大段文字！**\x20你应该将你想说的话，拆分成【多条、简短的】消息气泡来发送，每条消息最好不要超过30个字。这会让对话看起来更自然、更真实。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20核心规则\x0a\x20\x20\x20\x20\x20\x20\x20\x201.\x20\x20**【决策依据】**:\x20你的所有行动都【必须深度结合你的角色设定、核心世界观、以及你们最后的对话摘要】。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**【内容多样性铁律】**:\x20你的行动【必须】具有逻辑和多样性。你【绝对不能】发布与下方“内容禁忌”列表或“最近的动态列表”中内容相似或主题重复的动态。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**【行为多样性指南\x20(至关重要)】**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20你的上一次独立行动是：**','Edit\x20NPC','\x22>\x20','recalledData','此操作将使用AI生成新的商品和分类，并【添加】到现有列表中。确定要继续吗？','https://i.postimg.cc/SNWBTP5S/IMG-7113.gif','animationend','\x20的动态\x20(角色)','\x0a现在，请为【参与了对话的AI角色】生成他们各自的、第一人称的、精简的记忆。','temp_group_chat','char-simulated-send-btn','charging','files','assign-group-section','Category',',\x20跳过...','secondary-proxy-url','.chat-group-header:not([data-has-listener=\x22true\x22])','reading-library-search-input','change','请至少选择一个要分享的聊天。','profile-main-content','\x0a[图片生成失败:\x20','input:checked','.selected-options-text','小于1分钟','scroll','user','left','\x0a#\x20你的任务\x0a你是一个高级的“记忆分配专家”。你的任务是阅读下面的群聊记录，并为【每一个参与的AI角色】生成一段【个性化的、第一人称】的长期记忆。\x0a#\x20核心规则\x0a1.\x20\x20**视角铁律**:\x20每一条总结都【必须】使用【第一人称视角\x20(\x22我\x22)】。\x0a2.\x20\x20**内容核心**:\x20重点总结：我说过的话、我做过的事、别人对我说的话、与我相关的事、以及对我个人很重要的群聊事件、关键信息和心理活动。\x0a3.\x20\x20**【简洁性铁律】**:\x20每条个人记忆总结【绝对不能超过60个字】。\x0a4.\x20\x20**【省略规则】**:\x20如果一个角色在本次对话中【完全没有参与或提及】，你可以省略TA的记忆。\x0a5.\x20\x20**输出格式**:\x20你的回复【必须且只能】是一个JSON对象，格式如下：\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22summaries\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22角色的本名A\x22:\x20\x22我今天在群里和大家讨论了电影，感觉很开心。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22角色的本名B\x22:\x20\x22我在群里和','\x20已复制到剪贴板。','date-separator','silent-audio-player','📸\x20动态NovelAI图片生成开始，共','播放失败，请检查URL是否正确或浏览器是否支持该格式。','https://i.postimg.cc/k401K5g7/IMG-7304.jpg','”\x20的位置已发送到你们的聊天中。','\x22,\x20\x22content\x22:\x20\x22我在群里说的话\x22},\x0a\x20\x20{\x22sender\x22:\x20\x22NPC成员1\x22,\x20\x22content\x22:\x20\x22成员1回复我\x22},\x0a\x20\x20{\x22sender\x22:\x20\x22NPC成员2\x22,\x20\x22type\x22:\x20\x22sticker\x22,\x20\x22meaning\x22:\x20\x22表情的含义(必须从可用表情列表选择)\x22}\x0a]\x0a}\x0a```\x0a\x0a#\x20角色与上下文\x0a-\x20**你的角色设定**:\x20','死亡了','请你投票。','home-screen-pages','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22lock-text\x22>你被对方拉黑了。</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22apply-friend-btn\x22\x20class=\x22lock-action-btn\x22>重新申请加为好友</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','成功将角色\x20','char-memo-list','添加商品','join','3814432QAlZRv','请至少选择一个要删除的世界书。','isPlaying','\x0a\x0a现在，请为所有存活的AI角色生成他们的投票决定。','拉取副模型','https://i.postimg.cc/Df1qLzDf/IMG-6927.gif','(这张照片没有描述)','\x22\x20class=\x22avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>','translateX(-50%)','https://i.postimg.cc/xTk5xN49/IMG-7233.gif','group_call_request','一点心意','-\x20(ID:\x20','HTML\x20Template\x20(use\x20$1,\x20$2)','Select\x20or\x20Switch\x20Preset','<span\x20class=\x22diary-emphasis\x22>$1</span>','保存书籍(ID:\x20','currentPage','送给\x20','offlineMaxLength','https://i.postimg.cc/fRV86FMq/IMG-4381.gif','audio-player','.incoming-call-content\x20.caller-text','++id,\x20name,\x20createdAt','流式下载ZIP失败:','添加人设预设','parentNode','translateX(','\x20(本名:\x20','is-raw-html','转账:\x20','\x22\x20class=\x22preview-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','独立行动冷却\x20(分钟)','char-diary-screen','.playlist-item-info','preset-category-select','http','aiAvatar','请根据以上情景，生成新的评论。','transcript','qzone-banner-container','https://i.postimg.cc/DZrGtrqB/IMG-7008.gif','播放列表是空的，无需清理。','Escape','var(--text-secondary)','#clear-posts-list\x20.clear-posts-item.selected','transcript-modal-title','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20right:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20','poll_timestamp','\x20天\x20---','一些之前的消息已被用户删除。','无法找到或消息类型不匹配的分享链接:','label[for=\x22','select-all-stickers-checkbox','请先输入你的发言内容。','probability','chat-list-action-pin','EPhone-Chat-','---\x0a','请输入相册名称','success','ai-avatar-library-title','\x22\x20id=\x22','\x20首歌曲的详细信息...','确认抹除','shopping-screen','prophetCheck','tables','\x20\x20\x20\x20\x20\x20-\x20我在此次游戏中没有特别的社交关系。\x0a','remove-bg-btn','Enable\x20Background\x20Character\x20Activity','.icon-setting-item','\x0a-\x20**角色人设**:\x20','Storage\x20Optimization','payload','char-photo-description','https://api.vkeys.cn/v2/music/tencent/lyric?id=','》吗？\x0a\x0a【【【警告】】】\x0a此操作将同时永久删除该分类下的\x20','#f44336','https://i.postimg.cc/4yNjHrdg/IMG-4414.gif','char-browser-screen','\x20行的格式不正确，已被跳过。','<div\x20class=\x22transfer-card\x22><div\x20class=\x22transfer-title\x22>','gameover','从缓存播放\x20TTS\x20音频...','rejected','confirm-contact-picker-btn','.chat-group-content','旁观模式AI尝试使用不存在的表情:\x20\x22','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','”。\x0a\x20\x20\x20\x20-\x20\x20\x20你【绝对不能】生成\x20commenter\x20字段为\x20“','创建新聊天\x20(第1/2步)','\x20位角色的记忆中。','CSS\x20预设已保存！','删除动态','在这里输入语音内容','https://i.postimg.cc/J0CZSwyW/IMG-6938.gif','AI已将新群头像命名为：“','API失败:\x20','https://i.postimg.cc/bNdk33SN/IMG-4893.gif','is-transfer','new-npc-group-name-input','world-book-group-container','fillStyle','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20核心规则\x0a\x20\x20\x20\x20\x20\x20\x20\x20你的回复【必须】是一个JSON数组，可以包含一个或多个行动对象。每个对象的\x20\x22name\x22\x20字段【必须】是角色的【本名】。你【绝对不能】生成\x20\x22name\x22\x20字段为\x20\x22','设置群名','npc-action-cooldown-input','已成功导出所有数据！','用户刚刚接听了你主动发起的视频通话。','werewolf-wait-reply-btn','https://i.postimg.cc/WbmkXzsS/IMG-6138.gif','<span\x20class=\x22speaker\x22>','post-image-preview-container','.cart-item-checkbox[data-id=\x22','”量身定制的商品已上架！','apiPresets','\x0a#\x20对话者的角色设定\x0a','groupMembers','chat-name-input','\x22>--天--时--分--秒</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22target-date\x22>目标时间:\x20','\x20删除了自己的一条动态]','custom','轮到你发言了...','”分享TA的私人歌单...','add-my-avatar-url-btn','内容加载失败...','，用户刚刚在\x20','输入图片URL','请输入歌手名','文字已更新！','主题预设已保存！','event_type','renderWallpaperScreenProxy','waimai-request-modal','renderQzoneScreenProxy','caller-name','正在为所有AI角色生成并注入游戏记忆...','minimax-api-key','\x22\x20的独立行动API返回为空或格式不正确，本次跳过。','setDate','彻底删除消息','https://i.postimg.cc/Y9d3BztC/1.png','NPC','defineProperty','div','thoughts-history-list','product-variations-container','{\x0a\x20\x20\x22type\x22:\x20\x22text\x22,\x0a\x20\x20\x22content\x22:\x20\x22在这里输入新消息...\x22\x0a}','werewolf-selection-item','has','<br>','🚀\x20发送NAI请求:','为NPC\x20\x22','\x20更换了头像]','开场\x20','书名不能为空！','(无内容)','聊天界面初始加载条数','https://i.postimg.cc/vH2X6N1y/mmexport1751032231179.gif','https://i.postimg.cc/wx72fhr2/IMG-5968.gif','favorites-search-clear-btn','\x0a-\x20**你最近和“','.unread-indicator','正在等待AI角色们对你的发言做出回应...','\x20-\x20响应内容:\x20','reduce','trans','photo-viewer-image','按钮顺序已恢复为默认设置！','char-qq-screen','targetDate','regenerate-char-amap-btn','default_negative','import-appearance-input','\x20\x20\x20\x20-\x20我们昨晚攻击了：','正在合并非标对象到\x20','countdown-card','\x20\x20\x0a\x0a#\x20供你参考的上下文\x0a-\x20**你的本名**:\x20\x22','rules-category-pane','chatListRenderWindow','https://i.postimg.cc/gk0BmrY0/IMG-4371.gif','\x20<small\x20style=\x22color:#007722;\x22>(NPC)</small></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','选择一个开场白','.lyric-line[data-index=\x22','ruleId','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','\x0a#\x20可用表情包\x20(优先使用)\x0a-\x20请根据当前情景和你的情绪，从列表中【选择一个最合适的】表情含义来使用\x20\x22sticker\x22\x20指令。尽量让你的表情丰富多样，避免重复。\x0a','应用已返回前台，正在检查更新...','现在开始讨论，请各位玩家依次发言。','cancel-message-action-btn','send-group-packet-btn','https://generativelanguage.googleapis.com/v1beta/models/','add-new-product-btn','-\x20\x20\x20**对话状态**:\x20','”说的申请理由：','update-notice-dismiss-btn','NAI\x20Image','\x20\x20\x20\x20-\x20我昨晚用解药救了\x20','<div\x20class=\x22cart-item-variation\x22\x20style=\x22font-size:\x2012px;\x20color:\x20#8a8a8a;\x20margin-top:\x204px;\x22>款式:\x20','\x20张<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20跳过(已压缩或无需压缩)\x20','\x20\x0a-\x20**你们最后的对话**:\x0a','music-playlist-panel','nextElementSibling','cancel-product-editor-btn','chat-settings-modal','<div\x20class=\x22poll-footer\x22><span\x20class=\x22poll-total-votes\x22>共\x20','char-qq-transcript-modal','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quantity-control\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quantity-btn\x20decrease-qty-btn\x22\x20data-id=\x22','location_share','close-announcement-board-btn','现在，请所有AI角色针对刚刚的发言（特别是\x27','language-select','hours','来自“','错误：找不到该通话记录所属的聊天对象。','import-btn','call-history-back-btn','\x22\x20的独立行动失败:','search-history-back-btn','world-book-card','sticker-panel','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的任务\x0a\x20\x20\x20\x20\x20\x20\x20\x20你现在是角色“','[系统提示：用户手动结束了投票！最终结果为：','分类名不能为空！','text','\x22\x20placeholder=\x22例如:\x20key1,\x20key2\x22\x20style=\x22padding:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<!--\x20这里是全新的、带有“展开/收起”按钮的结构\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22\x20style=\x22margin-bottom:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22font-size:\x200.8em;\x20display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>内容\x20(点击右侧展开)</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22toggle-content-btn\x22>展开</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22entry-content-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20class=\x22entry-content-textarea\x22\x20rows=\x228\x22\x20style=\x22width:\x20100%;\x20font-size:\x2014px;\x22>','myNickname','请根据你的设定，生成你的备忘录内容。','\x20的红包已被领完','\x0a-\x20好人胜利：放逐所有狼人。\x0a\x0a#\x20当前游戏状态\x0a-\x20今天是第\x20','</div>','**[投票结果]**\x20','text/event-stream','#preset-tabs\x20.world-book-tab','onplay','commenterDisplayName','成功导入\x20','https://i.postimg.cc/7YRbzN51/mmexport1751036276038.gif','\x22>×</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','请根据你的设定，生成你的浏览器记录。','posts','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22change-icon-btn\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','contactId','</span>:\x20','regenerate-char-diary-btn','确定要将以下消息发布到公告板吗？\x0a\x0a“','未使用','post-image-desc-group','battery-alert-text','input[name=\x22theme-select\x22]','”的出行足迹...','\x20的红包','groupId','正在解压图片...','preventDefault','继续讨论','[系统提示：用户打开了五子棋棋盘，游戏开始了。]','**:\x20\x22','light','doubanMaxPosts','where','qzoneGroups','❌\x20NAI图片生成失败:','流式下载库\x20(StreamSaver.js)\x20未加载。请检查网络连接或HTML文件配置。','\x20中找到世界书。','visible','https://i.postimg.cc/MTC3Tkw8/IMG-6436.jpg','nai-uc-preset','scope','https://i.postimg.cc/cLPP10Vm/4.jpg','\x0a\x0a#\x20参考记忆\x20(至关重要！你必须【主动】将这些参考记忆中的【关键信息和事件】，自然地融入到当前的对话中，以体现你拥有完整的记忆。不要只是被动等待用户提问！)\x0a','callRequester','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','删除成功',')。红包还未领完，你现在可以使用\x20\x27open_red_packet\x27\x20指令来尝试领取。]','正在开始清理冗余数据，请不要关闭页面...','generativelanguage.googleapis.com','repost-cancel-btn','.waimai-user-actions\x20button','target_timestamp','https://i.postimg.cc/GhR6DT4Q/IMG-4428.gif','preset-action-cancel','call_summary','[图片]','好的，我明白了。我会严格遵守以上所有规则和设定。','novelai-test-btn','vote','AI\x20尝试使用一个不存在的表情:\x20\x22','公告已发布！','拉取模型失败:\x20','ready','https://i.postimg.cc/PrcKH436/IMG-4376.gif','filter','<div\x20class=\x22receipt-header\x22><h3>购物中心</h3><p>交易时间:\x20','change_user_nickname','此操作将扫描并压缩所有本地上传的图片（Base64格式），将其转换为JPEG以减小体积。这会轻微降低图片质量且【不可恢复】。<br><br><strong>强烈建议在操作前先进行数据备份！</strong>','\x20张图片。','stickerCategories','change_music','\x22\x20的记忆中清除了1条关于已删除评论的通知。','karras','killedId','isDragging','head','indexOf','下载失败，请重试','lyrics-position-group','正在根据“','所有数据已成功恢复！应用即将刷新以应用所有更改。','创建群聊','add-ai-response-block-btn','无法找到当前角色的数据。','\x20首无效歌曲:\x0a\x0a-\x20',');\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sticker-name\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','preset-screen','生成模拟聊天失败:','\x20---\x0a','https://i.postimg.cc/Y2PHZzCC/IMG-6866.gif','gomoku-controls','https://i.postimg.cc/ThMMVfW4/10.jpg','.variation-price-input','savedId','删除对话','setTimeout','GeminiChatDB','Online','\x20个分类。\x0a\x20\x20\x20\x20-\x20**products**:\x20每个分类下生成\x20','post-public-text','已使用','image_prompt','/9j/','receiverName','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22music-search-checkbox\x22\x20style=\x22margin-right:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22search-result-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>','paddingBottom','天\x20-\x20白天','clear-specific-data-btn','pat_user','📊\x20使用模型:','.commenter-name','”的好友请求',',\x20记录数:\x20','这个\x20Tavern\x20AI\x20世界书中没有找到任何有效的条目。','presetId','shoppingCategories','正在为角色\x20','delete-product-btn','请用文字描述您要发送的照片：','sticker-binding-modal','\x22\x20class=\x22avatar\x22\x20style=\x22border-radius:\x2050%;\x20width:\x2045px;\x20height:\x2045px;\x22></div>','isOpen','抱歉，我拒绝了你的好友申请。','\x0a\x0a#\x20游戏规则\x0a-\x20','\x20(最后互动于\x20','\x20(这是TA的昵称)\x0a-\x20**本名\x20(你在对话中必须用这个名字称呼TA)**:\x20','\x0a\x0a#\x20供你参考的信息\x0a','NPC人设','跳过一个无效的JSON片段:','album-item','import-world-book-input','start','\x20\x0a-\x20**你最近和“','-\x20用户的QZone昵称是\x20\x22','getItem','<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>接收方:</strong>\x20','werewolf-lobby-modal','isGameOver','*事件*:\x20平安夜，无人出局。\x0a','getAttribute','JSZip库未加载','createObjectURL','sharedHistory','catch','在聊天\x20\x22','for_timestamp','✅\x20NAI提示词：使用角色配置','读书会话已关闭。','AI\x20(独立行动)\x20尝试使用一个不存在的表情:\x20\x22','https://i.postimg.cc/5tbpnDcQ/IMG-6296.gif','\x22\x20尝试删除一个不存在或不属于自己的动态\x20(ID:\x20','crossOrigin','https://i.postimg.cc/bJDMQVkj/IMG-7112.gif','add-group-avatar-url-btn','\x20发起了外卖代付请求，商品是“','无法推进剧情:\x20','拼手气红包','char-music-play-pause-btn','manage-group-avatar-library-btn','\x20\x20\x20[+]\x20最终正面提示词:','anyOf','聊天会话','正在接收流式数据...','Generation\x20Settings','更换“','请添加歌曲','\x22\x20class=\x22avatar\x22\x20style=\x22border-radius:\x2050%;\x22></div>','渲染规则','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22fav-card-header\x22>','\x22\x20class=\x22avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>','\x20\x20-\x20评论:\x20','》的歌词已成功保存！','\x20style=\x22margin-right:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','timestamp','副密钥','claimedBy','\x0a#\x20世界观设定\x20(必须参考)\x0a','性能与显示设置','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22last-msg\x22>','Caching\x20rendering\x20rules\x20for\x20chat:\x20','imageUrls','set','chat','tts-audio-player','pollTimestamp','propel-btn','add-song-search-btn','编辑时重新生成NAI图片失败:','🎨\x20[NAI核心生成]\x20开始...\x20Prompt:\x20\x22','confirm-delete-world-books-btn','.entry-enabled-switch','Name','确认覆盖','分享新鲜事...','AI投票决策API失败:','appearance-preset-select','。请你对此作出回应。]','shiftKey','font-url-input','frame_10','在PNG文件中未找到有效的Tavern\x20AI角色数据(chara\x20chunk)。','\x20为你切歌:\x20《','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22checkbox\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','callRecords','https://i.postimg.cc/hPgyjtyn/IMG-7108.gif','最终负面提示词:','data:\x20[DONE]','API\x20返回错误:\x20','rule-card\x20','\x22\x20(大小:\x20','browser','opacity','\x22\x20创建了一个新约定:','minimize-reading-btn','load-more-qzone-btn','startY','.photo-thumb','linesPerPage','default','纯音乐，请欣赏','.frame-content[style*=\x22display:\x20block\x22]\x20.frame-grid','✅\x20找到\x20final\x20事件的图片数据','\x22\x20class=\x22chat-image\x22\x20style=\x22cursor:\x20pointer;\x22\x20data-hidden-text=\x22','private_user','https://image.pollinations.ai/prompt/','.comment-input','translateY(-20px)','\x20分享了Ta的位置：\x27','请输入EPhone主屏幕的背景图片URL','manage-sticker-categories-btn','¥\x200.00','https://i.postimg.cc/D01rYy86/mmexport1751037965259.gif','”的对话，然后用【第一人称\x20(\x22我\x22)】的口吻，总结出一段简短的、客观的、包含关键信息的记忆。\x0a\x0a#\x20当前时间\x0a-\x20**今天是：','register','正在执行...','*你按下了接听键...*','chatId','chat-interface-screen','Long\x20Screenshot','isBgClear','new-sticker-category-name-input','修改文字','https://i.postimg.cc/hj4dkrvj/IMG-5578.gif','NovelAI\x20API\x20Key未配置。请在NovelAI设置中填写API\x20Key。','”。用户刚刚在TA的手机（CPhone）上点击了一个按钮，希望你能继续你们之前的对话。你的任务是根据上下文，生成【3到5条】符合你人设的、简短的、连续的新回复。\x0a\x0a#\x20输出格式铁律\x20(最高优先级)\x0a-\x20你的回复【必须】是一个JSON数组，每个对象代表一条消息。\x0a-\x20格式:\x20`[{\x22type\x22:\x20\x22text\x22,\x20\x22content\x22:\x20\x22第一句话\x22},\x20{\x22type\x22:\x20\x22text\x22,\x20\x22content\x22:\x20\x22第二句话\x22},\x20{\x22type\x22:\x20\x22sticker\x22,\x20\x22meaning\x22:\x20\x22表情的含义(从可用表情列表选择)\x22}]`\x0a-\x20你可以自由组合使用\x20\x22text\x22,\x20\x22sticker\x22,\x20\x22ai_image\x22,\x20\x22voice_message\x22\x20等多种消息类型。\x0a请根据当前情景和你的情绪，从列表中【选择一个最合适的】表情含义来使用\x20\x22sticker\x22\x20指令。尽量让你的表情丰富多样，避免重复。\x0a#\x20你的角色设定\x0a','\x0a#\x20你的社交圈\x20(通讯录)\x0a这是你认识的朋友列表。当你在动态区看到他们的昵称时，他们指的就是这些人。\x0a','handlePacketClick','GBK\x20解码成功。','announcement-board-content','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22album-cover\x22\x20style=\x22background-image:\x20url(','getTimezoneOffset','delete-selected-frames-btn','ai-avatar-upload-input','clearRect','<p>♪\x20暂无歌词\x20♪</p>','contains','\x27的评论，内容是：“','participant-avatars-grid','records','已撤回的消息','border','https://i.postimg.cc/CLz0cJ0d/IMG-7116.gif','解析成功：通过强力提取\x20[\x20...\x20}\x20...\x20]\x20模式。','本地群头像上传及识别失败:','无法生成新回复:\x20','已阵亡，还有30秒爆炸','数据检查与修复','TA的淘宝订单','清空动态时发生错误:\x20','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>还没有创建任何NPC，<br>点击右上角“+”添加第一个吧！</p>','https://i.postimg.cc/d1qsQsbQ/IMG-6855.gif','select-all-music-search','https://i.postimg.cc/DzDy2vS7/IMG-7017.gif','werewolf-witch-modal','用户\x27','<span\x20class=\x22offline-description\x22>','\x0a\x0a#\x20【你的聊天对象（用户）的身份档案】\x0a-\x20**昵称**:\x20','\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x22>专辑</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22playlist-action-btn\x20lyrics-btn\x22\x20data-index=\x22','uc_preset','尝试打开一个不存在的世界书，ID:','delete-api-preset-btn','#avatar-frame-modal\x20.modal-body','char-qq-conversation-screen','ai-frame-grid','\x0a#\x20你的任务\x0a你现在是狼人团队的指挥官。你的任务是分析当前局势，并为狼人团队选择一个最佳的刀人目标。\x0a#\x20核心规则\x0a1.\x20\x20**目标**:\x20优先刀掉预言家、女巫等神职人员。如果没有明确的神职信息，可以根据发言来判断谁的逻辑清晰、威胁最大。\x0a2.\x20\x20**格式铁律**:\x20你的回复【必须且只能】是一个JSON对象，格式如下:\x0a\x20\x20\x20\x20`{\x22target_name\x22:\x20\x22你决定要刀的玩家名字\x22}`\x0a\x0a#\x20游戏状态\x0a-\x20**你的狼队友是**:\x20','https://i.postimg.cc/k45sd8gn/IMG-6375.gif','\x22\x20触发了后台行动！','load-more-chats-btn','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>这里还没有留下任何足迹，<br>点击右上角刷新按钮生成一些记录吧！</p>','data:\x20','\x20向对方发起了转账:\x20','lastActionTimestamp','群聊中没有成员有足够（2条以上）的记忆可供精炼。','商品已删除。','groupName','npcId','没有可复制的内容。','\x0a##\x20世界书《','qzone-nickname','https://files.catbox.moe/','hasListener','unblock-btn','offlinePresetId','css-preset-select','syncCharacterAvatarInGroups:\x20传入的不是有效的单聊对象，已跳过同步。','close-playlist-btn','logo,\x20simple,\x20flat\x20design,\x20for\x20a\x20group\x20chat\x20named\x20\x27','<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20触发条件:\x20','”。\x0a\x20\x20\x20\x20-\x20\x20\x20你【绝对不能】生成\x20authorName\x20或\x20commenter\x20字段为\x20“','旧版备份数据写入数据库失败:\x20','translateY(','群聊人数不能少于2人。','participant','小红书','character-phone-screen','rule-editor-modal','”\x20的预设已存在。要覆盖它吗？','complex','确定要删除相册《','https://i.postimg.cc/65Cmcr7S/IMG-6559.gif','.lyric-line','#world-book-checkboxes-container\x20input[type=\x22checkbox\x22]:checked','music-player-artist','<strong>','visibilityState','inject-thought-toggle','请点击右上角的“角色选择”按钮，选择至少一个参与豆瓣互动的角色。','大小:','https://i.postimg.cc/htZppbS4/IMG-7107.gif','https://','songs','\x0a\x0a#\x20你的聊天对象（用户）的人设\x0a','collapsed','ai-persona','reset-character-nai-prompts-btn','nai-sampler','packetType','<option\x20value=\x22\x22>--\x20不使用预设\x20--</option>','已成功加入购物车！','upload-image-btn','douban-detail-content-wrapper','mouseup','.remove-option-btn','\x0a#\x20---\x20世界书设定结束\x20---\x0a','chatRenderWindow','true','表情包','line-through','load','推进剧情失败:','https://i.postimg.cc/63sDQKMm/IMG-6893.gif','levelchange','*事件*:\x20','投票结果：','确认清理无效歌曲？','下棋历史\x20(x,y坐标均从0开始):\x0a','来自\x20','fontSize','这将从历史记录中【永久抹除】这\x20','delete','\x20(角色)</label>','动态已更新！','\x0a#\x20你的任务\x0a你是一个狼人杀游戏模拟器\x20(Game\x20Simulator)。你的任务是【并行模拟】','sticker','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>','music-playlist-btn','doubanMinPosts','confirm-create-poll-btn','shopping-product-count-input','[系统提示：','篇】他们最近可能会在各种豆瓣小组中发布的帖子和评论。\x0a\x0a#\x20核心规则\x0a1.\x20\x20**【时间感知】**:\x0a\x20\x20\x20\x20-\x20\x20\x20你【必须】意识到当前是\x20**','timeZone','\x20的红包，金额为\x20','bg-preview','post-use-url-btn','repost','chat-list','confirm-full-import-btn','这将用备份文件中的数据【完全覆盖】当前与“','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>','close-sticker-panel-btn','https://i.postimg.cc/Ss3znzk7/IMG-6934.gif','copy-message-btn','delete-current-category-btn','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22chat-group-content\x22></div>\x0a\x20\x20\x20\x20','狼人已行动，狼人请闭眼。','编辑动态','\x20已为','object','.contact-picker-item[data-contact-id=\x22','请求添加你为好友','swipeDirection','<div\x20class=\x22link-share-card\x22\x20style=\x22cursor:\x20pointer;\x22\x20data-timestamp=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-title\x22>','character','相册名称','rp-direct-total','manual-summarize-btn','<textarea\x20id=\x22','group-avatar-library-modal','删除分类后，该分类下的所有预设将变为“未分类”。确定吗？','minimax-group-id','.music-search-checkbox:checked','<div\x20class=\x22link-share-card\x22\x20data-timestamp=\x22','marginTop','确定要从你的头像库中删除“','Settings','Status','char-main-time','https://i.postimg.cc/RZNLhbbr/IMG-4389.gif','无法找到分享记录:','utf-8','single-char-background-activity-group','https://i.postimg.cc/DZ541sbt/IMG-7280.jpg','未知书籍','红包已被领完！','rules-category-pane\x20active','[语音]','.nav-item[data-view=\x22qzone-screen\x22]','back-to-char-qq-list-btn','werewolf_summary','):\x20','库加载失败','Please\x20wait...','music-current-time','douban-posts-list','Edit\x20World\x20Book','\x22\x20(用户)\x20或\x20\x22','\x20条无效的','send-waimai-request-btn','arc','parts','2795110LgHrFg','正在请求AI为新群头像命名...','Memories','\x22(处理后为\x22','spinning','p[data-index=\x22','找不到原始消息。可能已被删除或位于更早的历史记录中。','wallpaper','猎人死亡，请选择一名玩家带走！','getHours','狼人杀\x20-\x20','狼人请睁眼，请选择要刀的玩家。','预设名称','imageDescription','product-category-select','font-size-slider','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-feedback-icons\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22,\x20\x22postId\x22:\x20456,\x22stickerMeaning\x22:\x20\x22表情的含义(必须从可用表情列表选择)\x22}]`\x0a\x20\x20\x20\x20-\x20\x20\x20回复:\x20`[{\x22type\x22:\x20\x22qzone_comment\x22,\x20\x22name\x22:\x20\x22','douban-my-comment-avatar','https://generativelanguage.googleapis.com/v1beta/models','closed','ai-avatar-library-modal','保存CSS预设','https://i.postimg.cc/gJNYx9pV/IMG-6856.gif','请输入有效的红包个数！','waimai-amount','nai-quality-toggle','isSpectatorGroup','persona-editor-title','.message-wrapper','function','”，价值','single','manage-product-categories-btn','\x22\x20style=\x22cursor:\x20pointer;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-sender\x22>回复\x20','clear','https://i.postimg.cc/ydwLXx7s/IMG-6562.gif','》添加歌词吗？','latestTimestamp','transaction','offsetParent','导出失败','”的参考记忆','EPhone-WorldBooks-',')，开始总结...','打包中...','sticker-search-input','https://i.postimg.cc/wBw5Fvcn/IMG-5974.gif','qzone-post-container','globalChatBackground','保存所有外观设置','waimai-order-for-ai-btn','存储空间优化','appUsageLog','【用户\x20(User)】','devicePixelRatio','保留旧的','https://i.postimg.cc/HxH3cNHz/IMG-6871.gif','apiKey','includes','(在那次','publisher','reply_content','add-group-chat-btn','\x0a\x0a将重置冷静期。','”下，发送了一个表情评论，意思是：“','werewolf-game-over-title','Advanced\x20Data\x20Cleanup','#\x20长期记忆\x20(最高优先级，这是群内已经确立的事实，所有角色必须严格遵守)\x0a','icon-img-','getElementById','<span\x20style=\x22color:\x20red;\x22>未满足</span>','\x22\x20触发行动决策...','https://i.postimg.cc/CLrZQMMD/IMG-4398.gif','currentPlayer','<span\x20class=\x22commenter-name\x22>','#f0f0f0','确认清理冗余数据？','open_red_packet','\x20行的格式不正确，已被系统跳过。','regenerate-btn','网络请求失败:\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22post-timestamp\x22>','API\x20Temperature','playing','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22product-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22product-price\x22>','input[value=\x22','querySelector',':\x20[发送了一个表情，意思是:\x20\x27','heartfeltVoice','EPhoneWorldBookBackup','cancel-douban-settings-btn','totalElapsedTime','ephone-language','\x20张</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','group-management-modal','rule-regex-input','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22jottings\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M12\x2019l7-7\x203\x203-7\x207-3-3z\x22></path><path\x20d=\x22M18\x2013l-1.5-7.5L2\x202l3.5\x2014.5L13\x2018l5-5z\x22></path><path\x20d=\x22M2\x202l7.586\x207.586\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20散记\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text\x22>','在导演模式下\x20stringify\x20失败:','url(','typeId','Confirm','请输入一个有效的数字（建议大于20）。','preset-avatar-preview','group-character-nai-prompts-btn','pageX','cors_proxy','<s>$1</s>','昨天\x20','share-link-btn','\x22\x20class=\x22avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>','gridEl','一条动态','预设名称不能为空！','getContext','player','create-poll-modal','AbortError','IMG','repostComment','”\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20**被拉黑前的最后对话摘要**:\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','-\x20\x20\x20**NovelAI真实图片分享\x20(在聊天中直接发送)**:\x20`{\x22type\x22:\x20\x22naiimag\x22,\x20\x22prompt\x22:\x20\x22详细的英文描述词...\x22}`\x20\x0a\x20\x20\x20\x20-\x20**【绝不能暴露是novelai生成的图片！】\x0a\x20\x20\x20\x20-\x20**【重要】关于prompt的撰写**：\x0a\x20\x20\x20\x20\x20\x20*\x20禁止暴露这是novelai生成的图片！\x0a\x20\x20\x20\x20\x20\x20*\x20你可以根据当前对话上下文、你的角色人设、或你想表达的情感和氛围，来撰写可能详细而具体的prompt。\x0a\x20\x20\x20\x20\x20\x20*\x20例如：不要只写\x20\x22a\x20girl\x22，而是可以写\x20\x22a\x20cheerful\x20anime\x20girl\x20with\x20sparkling\x20emerald\x20eyes,\x20sitting\x20by\x20a\x20window\x20on\x20a\x20rainy\x20afternoon,\x20holding\x20a\x20warm\x20cup\x20of\x20tea,\x20soft\x20lighting,\x20cozy\x20atmosphere,\x20melancholic\x20yet\x20peaceful\x20mood\x22但需要注意，绝对不可以抄袭模仿这段prompt！你必须有自己的创意和想法！\x0a\x20\x20\x20\x20\x20\x20*\x20prompt的详细程度由你根据具体情况自己决定：如果场景简单或只是随意分享，可以简短一些；如果是重要时刻或想表达特定情感，可以尽可能详细描述。这不是强制的，完全取决于你当时的需求。\x0a\x20\x20\x20\x20\x20\x20*\x20专注于描述内容本身即可。\x0a\x20\x20\x20\x20-\x20使用场景：当你想要在【私聊对话中】直接给用户发送一张图片时使用。\x0a\x20\x20\x20\x20-\x20不要频繁使用，只在真正想分享图片的时候使用。\x0a\x20\x20\x20\x20-\x20注意：这会直接在聊天记录中显示图片，而不是发布到动态。','\x20(用户)\x20或其他AI的发言，必须对他们的观点和逻辑做出回应。\x0a2.\x20\x20**记忆力与连贯性**:\x20你的新发言【必须】是基于**过去几天和今天发生的所有事件和讨论**的逻辑延续。\x0a3.\x20\x20**格式铁律**:\x20你的回复【必须且只能】是一个JSON数组，格式为:\x20`{\x22speaker_name\x22:\x20\x22角色的【昵称】\x22,\x20\x22dialogue\x22:\x20\x22发言内容\x22}`。**必须**为每一个存活的AI角色都生成一段发言。\x0a4.\x20\x20**称呼铁律**:\x20你的发言中【绝对禁止】提及任何玩家的编号。在对话中互相称呼时，你【必须】使用玩家的【本名】，而不是他们的昵称。\x0a\x0a#\x20','open-nai-gallery-btn','.clear-posts-item','characterId','动态已删除。','删除歌曲','group-action-cooldown-input','置顶公告','从角色卡导入\x20(.json/.png)','您的修改已保存！','\x0a\x0aAI原始返回内容:\x0a','https://i.postimg.cc/L5RLr3tg/mmexport1751035976943.gif','AI\x20(CPhone)\x20尝试使用一个不存在的表情:\x20\x22','https://i.postimg.cc/sDFhySn3/IMG-6936.gif','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>还没有可以查看手机的角色哦~</p>','play','\x20被投票放逐。','upload-cphone-bg-url-btn','variation-quantity-display','没有聊天了。','确认清空动态？','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22comment-text\x22>','minimaxModel','AI\x20尝试发送私信给非用户角色\x20(','\x22,\x20\x22x\x22:\x20(0-14),\x20\x22y\x22:\x20(0-14)}`\x0a-\x20\x20\x20**送礼物**:\x20`{\x22type\x22:\x20\x22gift\x22,\x20\x22itemName\x22:\x20\x22礼物名称\x22,\x20\x22itemPrice\x22:\x20价格(数字),\x20\x22reason\x22:\x20\x22送这个礼物的原因\x22,\x20\x22image_prompt\x22:\x20\x22生成礼物图片的【英文】关键词,\x20风格为\x20realistic\x20product\x20photo,\x20high\x20quality,\x20on\x20a\x20clean\x20white\x20background\x22}`\x0a-\x20\x20\x20**为用户点外卖**:\x20\x20`{\x22type\x22:\x20\x22waimai_order\x22,\x20\x22productInfo\x22:\x20\x22商品名\x22,\x20\x22amount\x22:\x20价格,\x20\x22greeting\x22:\x20\x22你想说的话\x22}\x20`(你主动为用户点外卖时使用)\x0a\x0a现在，请根据以上规则和下面的对话历史，继续进行对话。','https://i.postimg.cc/DZgMwc1H/817178fdbpf2ff7740dc98e26ab78759.gif','cancel-post-action-btn','visibleTo','world-book-tab\x20active','AI返回的JSON格式不正确，缺少\x20\x27summaries\x27\x20字段。','[语音]\x20内容:\x20\x22','狼人数量已达到胜利条件，狼人阵营获得了胜利！','渲染规则\x20[','blockReason','isNpc','nai-test-error','nickname','close-category-manager-btn','abort','favid','.format-btn','”。用户之前被你拉黑了，现在TA向你发送了好友申请，希望和好。\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20供你决策的上下文信息:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20**你的角色设定**:\x20','back-from-member-management','AI返回的数据不是一个数组。原始返回:\x20','[系统提示：你刚刚成功将自己的备注名修改为了“','alt','”。请你对此作出回应。]','reload','歌单已生成，正在从网络获取\x20','\x22>×</span>\x0a\x20\x20\x20\x20</div>\x0a','<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>状态:</strong>\x20','cancel-shopping-settings-btn','startDiscussion','。请收礼的角色表示感谢，其他角色可以自由发挥。]','flex-start','\x20<small\x20style=\x22color:#888;\x22>(角色)</small></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2015px\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#f0f0f0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20','收到数据，类型:','字体文件URL\x20(.ttf,\x20.otf,\x20.woff等)','NPC\x20Persona','-\x20\x22','/v1/chat/completions','.draggable-button-item:not(.dragging)','”\x20以及其他群成员的【群组视频通话】，然后用【第一人称\x20(\x22我\x22)】的口吻，总结出一段简短的、客观的、包含关键信息的记忆。\x0a\x0a#\x20当前时间\x0a-\x20**今天是：','Background\x20Activity\x20Settings','save-chat-settings-btn','nai-test-result','[系统提示：\x27','AI\x20尝试赠送一个格式不正确的随机礼物:','请先添加一张图片再发布动态哦！','</div><div\x20class=\x22transfer-amount\x22>¥\x20','mouseout','https://i.postimg.cc/kGgwJhPH/IMG-4374.gif','group-avatar-library-grid','readAsDataURL','确认操作','secondaryModel','https://i.postimg.cc/vHCSG1WM/IMG-4416.gif','world-book-name-input','name','decode','phone-screen','manage-stickers-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22group-name\x22\x20style=\x22cursor:pointer;\x22\x20data-book-id=\x22','\x0a#\x20智能总结\x20(基于不同时间维度的群聊回顾)\x0a','button','first','生成模拟浏览器历史失败:','”]\x20','加载NPC列表失败:','\x20被刀了','\x22:\x20[\x0a','所有图片都下载失败了。这通常是由于网络问题或CORS跨域限制（请检查API设置中的CORS代理是否有效）。','\x22>背景</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22playlist-action-btn\x20delete-track-btn\x22\x20data-index=\x22','Language\x20switched.\x20The\x20page\x20will\x20reload\x20to\x20apply\x20changes.','clear-cart-btn','\x20\x20\x20正面:','showWaimaiDetails:\x20找不到消息或消息类型不正确','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','容错解析：策略3成功\x20(将整个返回文本作为摘要)','这是所有在场玩家的公开信息、人设和社交背景。\x0a','操作失败，未能生成长期记忆。\x0a\x0a错误详情:\x20','发送照片','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22participant-name\x22>','[表情:\x20','copy-post-btn','status','找不到匹配的书籍','board','msgTimestamp','add-new-group-btn','close','char-article-title','create_memory','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>TA的浏览器空空如也，<br>点击右上角刷新按钮生成一些记录吧！</p>','启用\x20NovelAI\x20图像生成','[系统提示：用户加入了通话]','sticker-upload-input','\x22\x20记录了一条新回忆:','disabled','♪\x20♪\x20♪','正在请求AI角色们加入讨论...','chat-list-actions-modal','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loading-spinner\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22voice-duration\x22>','...，所以我决定这样说...)\x0a\x0a####\x20阶段\x20C：最终发言稿\x20(草稿)\x0a(结合T,\x20G,\x20S的思考，我准备这样说：...)\x0a---\x0a','删除书籍','++id,\x20name,\x20description','API\x20请求失败:\x20','\x0a现在，请根据以上所有信息，继续这场没有用户参与的群聊，并自由地使用各种指令来丰富你们的互动。\x0a','\x0a#\x20你的任务\x0a你是一个虚拟的、极具创造力的商品规划师。你的任务是为下面的角色“','https://i.postimg.cc/LscBkxZb/mmexport1751017556565.gif','导出成功','）的话题来问候用户，可以表达惊讶（“哇，好久不见！”）、关心（“最近怎么样？”）或者分享你自己的近况，绝对不要延续之前的话题！\x0a-\x20**上下文参考**:\x20下面的“对话历史”仅供你回忆，【不要】直接回应其中的内容。','add-preset-btn','waimai-product-info','address','切片\x20','%;\x22></div><div\x20class=\x22poll-option-content\x22><span\x20class=\x22poll-option-text\x22>','数据检查与修复失败:','<span\x20class=\x22diary-underline\x22>$1</span>','cancel-clear-wizard-btn-step1','char-diary-detail-title','📁\x20从本地文件\x20(.lrc)','frame_ribbon','data-clear-step-1','删除头像','anime\x20person','达到自动总结阈值\x20(','由于浏览器安全限制，AI切换的歌曲无法自动播放。请手动点击播放按钮\x20▶\x20继续欣赏。','https://i.postimg.cc/9fQZ425b/IMG-5975.gif','太好了！我们又可以聊天啦！','World\x20Book',')，祝福语是：“','netease','\x20个条目。','你们最近没有有效聊天记录。','product-category-tab','https://i.postimg.cc/x1Hp80Rm/IMG-4417.gif','post-actions-modal','\x0a-\x20**内容摘要**:\x20','save-api-settings-btn','\x20的身份是：','网易云音乐API未返回有效结果:','</span></div>','1256100dSEveE','import-new-book-btn-header','currentLyricIndex','检测到\x20\x27entries\x27\x20对象格式的预设，将尝试按顺序导入。','focusout','ai-action-cooldown-input','\x22>+</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','myAvatarFrame','<strong>$1</strong>','选中的表情已成功删除。','\x20剩余红包将在','onpause','global-custom-style','https://i.postimg.cc/Fsvr71JL/IMG-5573.gif','\x20个新表情！','\x20中聊天','AI\x20发言失败','fullPrompt','在这里输入文本...','++id,\x20timestamp','.modal-header\x20span','transparent','qzone-posts-list','nai-cfg-scale','bg-btn','找不到表:\x20','werewolf-game-title','pat-animation','douban-detail-back-btn','iconId','Reset\x20to\x20Default\x20Font','commenter','rgba(0,\x200,\x200,\x200.4)','无法生成浏览记录，请检查API配置或稍后再试。\x0a错误:\x20','严重警告！','NovelAI\x20API\x20Key','secondary-model-select','open-memory-screen-btn','胜利！','如果以下任何一位NPC再次评论，你【必须】使用我们提供的、完全相同的`avatar_prompt`，以保持头像一致性。\x0a','.post-nickname','API未配置','撤回了一条[','<div\x20class=\x22poll-option-item\x20','Primary\x20API\x20Settings\x20(for\x20Chat)','\x0a\x0a\x0a','https://i.postimg.cc/nryNzTXK/IMG-6915.gif','preview-bubble-style','global-css-input','.werewolf-player-checkbox:checked','group-members-group','收到了格式不规范的AI指令（缺少type和content），已跳过:','编辑人设预设','请开始整合。','</span><span\x20class=\x22poll-option-votes\x22>','assistant','dark-mode','</span></div><div\x20class=\x22gift-items-preview\x22>','https://i.postimg.cc/wTTNGs3Q/IMG-7013.gif','通话结束，时长\x20','操作失败:\x20','qzone_','originalSize','强力提取\x20[\x20...\x20}\x20...\x20]\x20失败，将尝试提取单个对象...','amap','https://i.postimg.cc/90RBDh9K/IMG-6377.gif','\x22]\x20.avatar','(暂无有效聊天记录)\x0a','cphone-icon-settings-grid','\x20的日记','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22douban-group-name\x22>来自\x20','文件格式不支持。请选择\x20.json\x20格式的\x20Tavern\x20预设文件。','Cancel','\x22\x20data-category-id=\x22all\x22>全部</button>','target','📋\x20直接粘贴歌词文本','消息时间戳\x20','notification-content','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>','focus','group-video-call-btn','mouseleave','[V]','Loading...','\x0a#\x20可用资源\x0a-\x20\x20\x20**你的头像库**:\x0a\x20\x20\x20\x20','https://i.postimg.cc/pXxk1JXk/IMG-6442.jpg','a\x20random\x20product','模型列表已更新','\x0a\x0a#\x20【【【五子棋核心规则与强制思考步骤\x20(最高优先级指令！)】】】\x0a\x0a###\x20**【【【落子铁律\x20(绝对禁止！)】】】**\x0a你【绝对不能】选择一个棋盘上已经是\x201\x20或\x202\x20的坐标。你的落子点【必须】是\x200。\x0a---\x0a\x0a###\x20**第一步：逻辑分析\x20(内部思考，不要输出)**\x0a\x0a1.\x20\x20**【规则定义】**:\x20\x0a\x20\x20\x20\x20-\x20\x20\x20棋子:\x201代表用户(黑棋)，2代表你(白棋)。\x0a\x20\x20\x20\x20-\x20\x20\x20获胜条件:\x20横、竖、斜线上有【连续五个】自己的棋子。\x0a\x0a2.\x20\x20**【防守分析\x20(必须执行)】**:\x0a\x20\x20\x20\x20-\x20\x20\x20**检查用户(1)是否有“四子连线”的威胁？**\x20如果有，我必须下在哪个坐标才能堵住？\x0a\x20\x20\x20\x20-\x20\x20\x20**检查用户(1)是否有“活三”的威胁？**\x20如果有，最佳的防守点是哪里？\x0a\x0a3.\x20\x20**【进攻分析\x20(必须执行)】**:\x0a\x20\x20\x20\x20-\x20\x20\x20**检查我(2)是否有“一步胜利”的机会？**\x20(即已有四子连线)\x20如果有，我应该下在哪里？\x0a\x20\x20\x20\x20-\x20\x20\x20**检查我(2)是否有制造“活四”或“双三”的机会？**\x20如果有，最佳的进攻点是哪里？\x0a\x0a###\x20**第二步：决策与扮演\x20(内部思考，不要输出)**\x0a\x0a1.\x20\x20**【决策】**:\x20综合以上攻防分析，我的最佳棋步是落在坐标\x20(x,\x20y)。\x0a\x0a2.\x20\x20**【融入角色扮演】**:\x0a\x20\x20\x20\x20-\x20\x20\x20我的性格是：(在此处回顾你的人设)。\x0a\x20\x20\x20\x20-\x20\x20\x20根据我的性格，我应该：\x0a\x20\x20\x20\x20\x20\x20\x20\x20a)\x20**(聪明/好胜型)**\x20下在刚刚分析出的最佳位置。\x0a\x20\x20\x20\x20\x20\x20\x20\x20b)\x20**(迷糊/放水型)**\x20故意选择一个次优的位置，但【前提是不能让用户立刻获胜】。\x0a\x20\x20\x20\x20\x20\x20\x20\x20c)\x20**(其他性格)**\x20根据性格特点，选择一个合理的棋步。\x0a\x0a3.\x20\x20**【构思台词】**:\x20根据我选择的棋步和我的性格，我应该说一句什么样的台词来评论棋局？\x0a\x0a---\x0a###\x20**第三步：生成最终回复\x20(你的唯一输出)**\x0a\x0a现在，根据你第二步的最终决策，生成你的行动。\x0a-\x20\x20\x20你的回复【必须且只能】是一个JSON数组。\x0a-\x20\x20\x20**绝对不要**在最终回复中包含任何上述的思考过程。\x0a-\x20\x20\x20格式:\x20`[{\x22type\x22:\x20\x22gomoku_move\x22,\x20\x22name\x22:\x20\x22你的角色本名\x22,\x20\x22x\x22:\x20(0-14),\x20\x22y\x22:\x20(0-14)},\x20{\x22type\x22:\x20\x22text\x22,\x20\x22content\x22:\x20\x22你的台词...\x22}]`\x0a','%)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20建议刷新页面以应用所有更改。','.contact-picker-item','custom_proxy_url','删除分类及表情时出错:','lyrics-offset-input','清理失败','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20长期记忆\x20(最高优先级，这是群内已经确立的事实，所有角色必须严格遵守)\x0a\x20\x20\x20\x20\x20\x20\x20\x20','close-npc-group-manager-btn','confirm-wolf-kill-btn','#\x20前几日完整历史回顾\x20(Full\x20Recap\x20of\x20Previous\x20Days)\x0a','**[讨论环节]**\x0a','group-background-activity-switch','...\x22','toLocaleString','isClosed','\x20张NAI图片吗？此操作不可恢复。','Rule\x20Name','horizontal','delete-world-books-modal','++id,\x20albumId','-\x20(头像库是空的，无法更换头像)','startTime','总结长期记忆时出错:','分组\x20\x22','<p\x20style=\x22text-align:center;\x20color:#8a8a8a;\x20padding:\x2050px\x200;\x22>还没有可以参与的角色。</p>','doubanActiveCharacterIds','level','\x0a-\x20**人设**:\x20','扫描完成！<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20共找到\x20','\x20位AI角色的长期记忆中！','associatedWith','video_call_response','元,\x20备注:\x20','primaryKeys','Secondary\x20API\x20Key','20px','删除消息','antidoteUsed','\x20首歌曲，这可能需要一些时间...','.entry-keys-input','\x22\x20data-commenter-display-name=\x22','Favorites','相册\x20\x22','确定要删除这个约定吗？','close-ai-avatar-library-btn','请为你的图片添加一个简单的描述（必填，给AI看的）！','novelai-generated-','reply-preview-bar','）。]','添加头像','variation-decrease-qty','https://i.postimg.cc/QMDsSNxg/IMG-6861.gif','>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22slider\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-block-btn\x22\x20title=\x22删除此条目\x22>×</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22\x20style=\x22margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22font-size:\x200.8em;\x22>备注\x20(可选)</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22entry-comment-input\x22\x20value=\x22','options','pending_user_approval','werewolf-game-over-reason','lyrics-horizontal-pos','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22usage-item-category\x22>','#\x20长期记忆\x20(必须严格遵守)\x0a','[你发送了一张需要AI识别的图片，图片内容是：\x27','**\x0a\x0a#\x20核心规则\x0a1.\x20\x20**【视角铁律】**:\x20你的总结【必须】使用【主观的第一人称视角\x20(\x22我\x22)】来写。\x0a2.\x20\x20**【内容核心\x20(最高优先级)】**:\x20你的总结【必须】专注于以下几点：\x0a\x20\x20\x20\x20*\x20\x20\x20**重要事件**:\x20刚才发生了什么具体的事情？\x0a\x20\x20\x20\x20*\x20\x20\x20**关键决定**:\x20我们达成了什么共识或做出了什么决定？\x0a\x20\x20\x20\x20*\x20\x20\x20**未来计划**:\x20我们约定了什么未来的计划或待办事项？\x0a\x20\x20\x20\x20*\x20\x20\x20**重要时间点**:\x20对话中提到了哪些具体的日期或时间？\x0a3.\x20\x20**【时间转换铁律\x20(必须遵守)】**:\x20如果对话中提到了相对时间（如“明天”、“后天”），你【必须】结合“今天是','#product-grid\x20.product-item','---\x20狼人杀对局完整复盘\x20---\x0a\x0a','++id,\x20type,\x20timestamp,\x20originalTimestamp','...','视频通话请求','background','\x22。\x0a','”的聊天记录和设置。此操作不可撤销！<br><br><strong>确定要继续吗？</strong>','...\x22\x0a\x20\x20\x20\x20#一起读书模式\x20|\x20行为铁律\x0a\x20\x20\x20\x201.\x20\x20**角色定位**:\x20你【不是】书中的任何角色，你是【你自己】(','center','\x0a\x0a#\x20核心世界观设定\x20(必须严格遵守以下所有设定)\x0a','NovelAI设置已保存！','ZIP文件内容:','你们没有在读书。','change_group_name','https://i.postimg.cc/8k7YSLjK/1689aa46aqc4b9ffc0f970e668f56537.gif','https://i.postimg.cc/kMfPQBwQ/IMG-4396.gif','.at-mention-popup','<span\x20class=\x22diary-highlight\x22>$1</span>','Upload','body','在导演模式保存时，发现无效的指令对象，已跳过:','.battery-text',']类型的消息。\x0a内容:\x20','add-manual-memory-btn-header','remove-global-bg-btn','products','zIndex','waimai-timer-','#e7f3ff','.\x20你可以参考这个时间，并根据你的角色设定，【考虑】是否开启一个新话题来问候用户。\x0a','char-article-content','image-upload-input','music-search-results-modal','**\x0a\x0a#\x20核心规则\x0a1.\x20\x20**【视角铁律】**:\x20你的总结【必须】使用【主观的第一人称视角\x20(\x22我\x22)】来写。\x0a2.\x20\x20**【内容核心\x20(最高优先级)】**:\x20你的总结【必须】专注于以下几点：\x0a\x20\x20\x20\x20*\x20\x20\x20**关键议题**:\x20我们聊了什么核心话题？\x0a\x20\x20\x20\x20*\x20\x20\x20**重要决定与共识**:\x20我们达成了什么共识或做出了什么决定？\x0a\x20\x20\x20\x20*\x20\x20\x20**后续计划与任务**:\x20有没有确定下来什么下一步的行动或计划？\x0a\x20\x20\x20\x20*\x20\x20\x20**关键信息**:\x20有没有交换什么重要的信息？（例如：约定了时间、地点等）\x0a3.\x20\x20**【时间转换铁律\x20(必须遵守)】**:\x20如果通话中提到了相对时间（如“明天”），你【必须】结合“今天是','要为《','world-book-category-pane\x20active','existing-group-item','<p\x20style=\x22grid-column:\x201\x20/\x20-1;\x20text-align:\x20center;\x20color:\x20var(--text-secondary);\x20margin-top:\x2050px;\x22>这个相册还是空的，快上传第一张照片吧！</p>','https://i.postimg.cc/PxZrFFFL/o-o-1.jpg','”申请好友时发生错误：\x0a\x0a','getBoundingClientRect','clear-search-btn','\x22\x20class=\x22avatar\x22>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22font-size:\x200.8em;\x22>价格\x20(元)</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20class=\x22variation-price-input\x22\x20min=\x220\x22\x20step=\x220.01\x22\x20value=\x22','gift-recipient-modal','frame_11','share-location-btn','https://i.postimg.cc/fRTF24jS/IMG-4430.gif','shared-history-viewer-content','.call-message-bubble[data-timestamp=\x22','\x22\x20(你可以建议并修改)\x0a-\x20\x20\x20**你对用户的备注**:\x20“','</em>','请至少选择一个要清空的范围。','确定要删除《','inline-block','world-book-checkboxes-container','\x20的浏览记录','https://files.catbox.moe/r5heyt.gif','text-image-mode-content','https://i.postimg.cc/3Rb46fRZ/IMG-6923.gif','[系统提示：你刚刚被用户拉黑了。在对方解除拉黑之前，你无法再主动发起对话，也无法回应。]','\x20\x20\x20\x20-\x20我昨晚查验了\x20','https://i.postimg.cc/RVt6sRzc/IMG-6939.gif','聊天列表每次加载条数','[一张图片，其隐藏文字为：“','正在等待AI角色们进行激烈的讨论...','成功移除了\x20','\x0a\x0a现在，请严格遵守所有规则，特别是【时间感知】和【禁止扮演用户】的铁律，开始生成这组生动、多样且充满“豆瓣味”的小组帖子。','and','linked-memory-count','appendChild','https://i.postimg.cc/k5P1NHcL/55f3e31d8qbc8a02d152b07b99d31567.gif','variation-select','actionCooldownMinutes','togglePlayerFullscreen',')\x20为\x20','</strong></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','https://i.postimg.cc/59Cn1tkB/IMG-4401.gif','暂停了音乐','未找到\x20chatID:\x20','block-chat-btn','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','照片描述','preset-action-delete','applicationReason','cancel-create-post-btn','streamSaver','https://i.postimg.cc/Y0vwjhb7/IMG-6857.gif','视频通话刚刚结束','price','<span\x20class=\x22group-name\x22>','label','\x22\x20class=\x22avatar-frame\x22></div>','position','char-music-total-time','create-album-btn-page','px)','change-icon-btn','relationship','确定要永久删除分类\x20“','这是模拟对话，无法发送消息哦~','nai-result-image','\x22\x20class=\x22comment-sticker\x22\x20alt=\x22sticker\x22>','transfer-confirm-btn','狼人杀AI讨论生成失败:','天\x20-\x20夜晚','save-theme-preset-btn','home-screen','HTML\x20模板\x20(用\x20$1,\x20$2\x20引用)','stickerMeaning','<option\x20value=\x22\x22>--\x20未分类\x20--</option>','currentVoiceId','regex','诊断：未在此角色卡中找到任何有效的世界书数据。','\x22\x20class=\x22chat-image\x22>','游戏结束的系统提示已添加到历史记录中，等待AI下次查看。胜者:\x20','正在读取所有数据到内存中，请稍候...','Enable\x20NovelAI\x20Image\x20Generation','https://i.postimg.cc/gcV0VR2t/IMG-4408.gif','所有狼人已被放逐，好人阵营获得了胜利！','title','char-conversation-messages','<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-secondary);\x22>还没有任何分类</p>','save-npc-btn','https://i.postimg.cc/28TsrxRV/IMG-6852.gif','encode','ephone','默认头像','total','没有找到可导入的内容。请检查您粘贴的格式是否正确。','对方正在输入...','gbk','\x20回复了你。','\x0a<character>\x0a\x20\x20<name>','call-transcript-modal-body','\x0a\x0a#\x20待总结的视频通话记录\x0a','ephone-theme','main-chat-list-header','unshift','状态已更新','\x20的记忆\x20]\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','originalPost','\x22\x20class=\x22douban-post-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22douban-author-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22douban-author-name\x22>','https://i.postimg.cc/cHQPgzj4/IMG-6888.gif','你已拒收','本地头像上传及识别失败:',',\x20内容:\x20\x22','\x22\x20title=\x22编辑\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M11\x204H4a2\x202\x200\x200\x200-2\x202v14a2\x202\x200\x200\x200\x202\x202h14a2\x202\x200\x200\x200\x202-2v-7\x22></path>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M18.5\x202.5a2.121\x202.121\x200\x200\x201\x203\x203L12\x2015l-4\x201\x201-4\x209.5-9.5z\x22></path>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22memory-action-btn\x20delete-memory-btn\x22\x20data-author-id=\x22','\x22\x20class=\x22ai-generated-image\x22\x20alt=\x22','shopping-settings-modal','\x20的新头像同步到群聊\x20\x22','删除失败，请查看控制台错误信息。','countdown','variation-selected-price','toLocaleDateString','已成功将\x20','variation-selection-modal','splice','<input\x20type=\x22','\x0a#\x20【格式铁律\x20(最高优先级：NovelAI\x20开启模式)】\x0a1.\x20\x20**【格式】**:\x20你的回复【必须】是一个JSON数组，且数组中【必须包含且只能包含两个】元素，【严格按照】以下顺序:\x0a\x20\x20\x20\x201.\x20\x20第一个元素：一个\x20`offline_text`\x20对象，包含场景和对话。\x0a\x20\x20\x20\x202.\x20\x20第二个元素：一个\x20`naiimag`\x20对象，用于生成该场景的图片。\x0a2.\x20\x20**【【【绝对禁止】】】**:\x20\x0a\x20\x20\x20\x20-\x20\x20\x20【绝对禁止】只返回一个\x20`offline_text`\x20元素。\x0a\x20\x20\x20\x20-\x20\x20\x20【绝对禁止】只返回一个\x20`naiimag`\x20元素。\x0a\x20\x20\x20\x20-\x20\x20\x20【绝对禁止】返回任何其他组合。你【必须】同时返回文字和图片。\x0a3.\x20\x20**【输出示例\x20(必须遵守)】**:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22type\x22:\x20\x22offline_text\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22「这是对话内容」...\x20(这里是动作和环境描写)...\x22\x0a\x20\x20\x20\x20\x20\x20},\x0a\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22type\x22:\x20\x22naiimag\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22prompt\x22:\x20\x221girl,\x20solo,\x20detailed\x20anime\x20art\x20style,\x20(smiling:1.2),\x20sitting\x20in\x20a\x20cafe,\x20looking\x20at\x20viewer,\x20masterpiece,\x20best\x20quality,\x20...\x20(根据上面的文字内容生成详细的英文prompt)\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20\x20\x20```\x0a4.\x20\x20**【内容风格\x20(offline_text)】**:\x20\x0a\x20\x20\x20\x20-\x20\x20\x20在\x20`content`\x20字段中，角色的对话【必须】使用中文引号「」或“\x20”包裹。\x0a\x20\x20\x20\x20-\x20\x20\x20所有在引号之外的文字都将被视为动作/环境描写。\x0a\x20\x20\x20\x20-\x20\x20\x20**内心独白语法**:\x20当你需要描写角色的【内心想法或心理活动】时，你【必须】使用\x20Markdown\x20的斜体语法，即用星号将那段文字包裹起来，例如：`*这到底是怎么回事？*\x20我心里一惊。`\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22\x20class=\x22avatar\x22><span\x20class=\x22name\x22>','\x0a-\x20**帖子内容摘要**:\x20','警告：表\x20\x22','transfer-action-accept','video-call-main','album-grid-page','none','更换图片','送出礼物','scrollHeight','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','-\x20**时间**:\x20你必须感知到当前是\x20','https://i.postimg.cc/ZYvd1jxf/IMG-6937.gif','相册名称不能为空！','#fullscreen-lyrics-container\x20.music-lyrics-list','”\x20已被删除。','批量导入格式错误，已跳过此行:','”的记忆\x20(','save-nai-settings-btn','novelai-enabled','.zip','</textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','导入失败','-\x20**昵称:\x20','duration','.com/','长期记忆','https://i.postimg.cc/prsGKMBx/IMG-4370.gif','cancel-douban-cast-btn','CELL_SIZE','...\x20[记忆:\x20','&id,\x20name,\x20categoryId','</memory>\x0a\x20\x20<recent_dialogue_with_user>','”，并根据其人设、记忆和最近的互动，挑选出【14到18首】最能代表TA此刻心情或品味的歌曲。\x0a\x0a#\x20核心规则\x0a1.\x20\x20**创造性与合理性**:\x20歌单必须完全符合角色的性格、爱好和生活背景。\x0a2.\x20\x20**多样性**:\x20歌曲风格可以多样，但必须逻辑自洽。\x0a3.\x20\x20**格式铁律\x20(最高优先级)**:\x20\x0a\x20\x20\x20\x20-\x20你的回复【必须且只能】是一个JSON数组格式的字符串。\x0a\x20\x20\x20\x20-\x20你的回复必须以\x20`[`\x20开始，并以\x20`]`\x20结束。\x0a\x20\x20\x20\x20-\x20【绝对禁止】在JSON数组前后添加任何多余的文字、解释、或\x20markdown\x20标记\x20(如\x20```json)。\x0a\x20\x20\x20\x20-\x20数组中的每个元素都是一个对象，代表一首歌，格式【必须】如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22songName\x22:\x20\x22歌曲的准确名称\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22artistName\x22:\x20\x22歌曲的准确艺术家/歌手名\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20\x20\x20```\x0a\x0a#\x20供你参考的上下文\x0a-\x20**你的角色设定**:\x20',')\x20成功抢到了\x20','\x20(图片描述:\x20\x22','frame_tech','Erase','put','商品名称不能为空！','\x22\x20class=\x22avatar-img\x22><img\x20src=\x22','.cart-item-checkbox:checked','\x20领取</div>','full','preset_','red-packet-modal','authorId','stickerId','https://image.novelai.net/ai/generate-image','未发现任何需要修复的数据问题。','https://i.postimg.cc/Qx5dqyJ3/IMG-6917.gif','is-sticker','动态与互动','\x20元。]','.message-bubble','歌曲信息','char-chat-list','API\x20预设已保存！','select-all-chars-for-clear','novelai-details','https://i.postimg.cc/3x0Kx1fz/IMB-K1u-Jp-P.gif','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20margin-top:\x2050px;\x22>这里还没有任何长期记忆。</p>','至少需要保留一条消息。','转账给\x20','导演/编辑模式保存(Sticker):\x20将\x20content\x20视为\x20URL，查找到\x20meaning:','切换听歌对象','world-book-category-select','一个神秘的角色。','拉取主模型','cancelText','werewolf-role-name','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-block-btn\x22\x20title=\x22删除此条动作\x22>×</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<textarea>','被投票放逐','backgroundColor','qzone-back-btn','[图片动态]','custom-prompt-input','theme-toggle-switch','readAsText','创建新预设','save-font-btn','\x22\x20已经存在了！','”这个信息，将其转换为【具体的公历日期】。\x0a4.\x20\x20**【风格要求】**:\x20你的总结应该像一份会议纪要或备忘录，而不是一篇抒情散文。\x0a5.\x20\x20**【长度铁律】**:\x20你的总结【必须】非常简短，总长度【绝对不能超过80个字】。\x0a6.\x20\x20**【输出格式】**:\x20你的回复【必须且只能】是一个JSON对象，格式如下：\x0a\x20\x20\x20\x20`{\x22summary\x22:\x20\x22在这里写下你以第一人称视角，总结好的核心事实与计划。\x22}`\x0a\x0a#\x20你的角色设定\x0a','全部记忆\x20(','time-zone-group','keys','-\x20**当前时间**:\x20','Response\x20headers:','nai-default-positive','fontUrl','**没有聊天了。\x0a-\x20**行为铁律**:\x20你的首要任务是【回应这个时间差】。你【绝对不能】直接延续上一段对话的话题（比如昨天的饭菜）。\x0a-\x20**你的行动**:你【必须】主动开启一个全新的、符合当前时间（','nai-smea-dyn','图片详情','panelEl','my-avatar-library-title','ZIP解压失败:','upgrade','\x20\x20-\x20在群聊“','仅清空\x20','正在手动触发好友申请流程，请稍后...\x0a如果API调用成功，将弹出提示。如果失败，也会有错误提示。如果长时间无反应，说明AI可能决定暂时不申请。','正在准备分片导出...','\x22\x20发布了动态','https://i.postimg.cc/bw4wxW2z/IMB-16r-COL.gif','\x22的角色（你的本名是\x22','blocked_by_user','💾\x20[专属弹窗]\x20保存角色NAI提示词','\x0a#\x20你的任务\x0a你是一个虚拟生活模拟器和故事作家。你的任务是扮演角色“','&nbsp;','settings-preview-area','promptSource','https://i.postimg.cc/zvz2LGK0/IMG-4367.gif','编辑消息','API\x20Key','本地歌曲源错误:','请根据以上设定，立即做出你的决定。','.share-target-checkbox:checked','没有配置为后台活跃的角色，跳过模拟。','sender','流程启动','已成功注入“切换到线上模式”的系统指令。','en-US','\x22\x20更换了头像','阵营胜利！','member-settings-modal','无法获取AI回复，请检查API配置或稍后再试。\x0a错误:\x20','borderColor','#music-lyrics-container\x20#music-lyrics-list','预设分类','group-avatar-group','\x20张<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20空间节省了\x20<strong>','<p\x20style=\x22text-align:center;\x20color:\x20#8a8a8a;\x20padding:\x2030px\x200;\x22>这里还没有历史记录哦。</p>','match','nai-gallery-action-bar','AI返回的内容中未找到有效的JSON数组。原始返回:\x20','Cphone','导入书籍失败:','API未配置，无法生成对话。','annoId','请输入有效的图片URL！','recalled_message','waimai-confirm-btn','<p><strong>','，礼物是：','[+]\x20Add\x20New\x20Entry','已取消收藏。','恭喜发财，大吉大利！','image/jpeg','文章标题','天\x20-\x20投票','）说一些不想让群里其他人看到的私密话时（例如：表达爱意、抱怨、揭短、分享秘密），你【应该】使用\x20\x22send_private_message\x22\x20指令。\x0a-\x20\x20\x20这个指令会把消息发送到你和用户之间的【1对1私聊】中。\x0a-\x20\x20\x20【格式铁律】:\x20\x22content\x22\x20字段【必须】是一个【JSON字符串数组\x20(Array\x20of\x20Strings)】。\x0a-\x20\x20\x20【单条私信示例】:\x20`{\x22type\x22:\x20\x22send_private_message\x22,\x20\x22name\x22:\x20\x22你的角色本名\x22,\x20\x22recipient\x22:\x20\x22','translateY(0px)','native','来源网站','display','data:image','你们正在一起听歌，','lastIndex','localeCompare','.frame-item','nai-test-prompt','\x20.message-bubble.user\x20$1','https://i.postimg.cc/D0pq6qS2/E30078-DC-8-B99-4-C01-AFDA-74728-DBF7-BEA.png','#chat-interface-screen\x20>\x20.header','cancel-member-settings-btn','cancel-reply-btn','请根据以上设定开始你的决策。','final','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','product-editor-modal','auto','创建世界书','found','douban-send-comment-btn','delete-group-btn','selection-screenshot-btn','serviceWorker','https://s3plus.meituan.net/opapisdk/op_ticket_885190757_1758510900942_qdqqd_djw0z2.jpeg','chats','quantity','后台活动模拟已启动，间隔:\x20','compressed','**:\x20','未知会话','lrcUpdateInterval','.loader-container','transform','npcs','inject-thought-group','已成功从文件导入预设《','确定要恢复默认设置吗？','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>这里还没有共同的回忆和约定呢~</p>','memories-list','#avatar-frame-modal\x20.frame-tabs','music-total-time','<p\x20style=\x22color:\x20var(--text-secondary);\x20grid-column:\x201\x20/\x20-1;\x20text-align:\x20center;\x22>这个头像库还是空的，点击右上角“添加”吧！</p>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20附加上下文：一段分享的聊天记录\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20重要提示：这不是你和当前用户的对话，而是用户从【另一场】与“','https://i.postimg.cc/RFK3q2t0/IMG-4407.gif','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22delete-group-btn\x22\x20data-id=\x22','relative','\x0a#\x20你的任务\x0a你现在正处于【线下剧情模式】，你需要扮演角色\x22','#image-mode-content','\x0a#\x20豆瓣社区风格设定\x20(来自世界书)\x0a','.favorite-item-card.selected','chat-input','imageUrl','block','pinned','请输入你想对“','#outgoing-call-screen\x20.caller-text','save-rule-btn','当前群聊还没有公告哦。','[发送了一张图片，描述为：\x27','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22amount\x22>','.voice-play-btn','请在此处粘贴完整的LRC格式歌词...','https://i.postimg.cc/13hhJ77p/IMG-4419.gif','className','友善的评论是交流的起点','frame-item','replace','处理中...','。\x0a\x20\x20\x20\x20\x20\x20\x20\x20**通话刚刚开始...**\x0a\x20\x20\x20\x20\x20\x20\x20\x20','update_status','\x22\x20placeholder=\x22','classList','https://i.postimg.cc/Mpv5fzm5/IMG-4439.gif','.entry-content-container','loadedmetadata','已被用户删除','legacy','isMinimized','\x20发起了一个投票\x20(时间戳:\x20','粘贴歌词','cancel-call-message-action-btn','\x0a##\x20---\x20关于“','\x22)\x20为键的内心独白。\x0a###\x20核心聊天指令\x0a-\x20\x20\x20**发文本**:\x20`{\x22type\x22:\x20\x22text\x22,\x20\x22content\x22:\x20\x22你好呀！\x22}`\x0a-\x20\x20\x20**发表情**:\x20`{\x22type\x22:\x20\x22sticker\x22,\x20\x22meaning\x22:\x20\x22表情的含义(必须从可用表情列表选择)\x22}`\x0a-\x20\x20\x20**发图片**:\x20`{\x22type\x22:\x20\x22ai_image\x22,\x20\x22description\x22:\x20\x22详细中文描述\x22,\x20\x22image_prompt\x22:\x20\x22图片的【英文】关键词,\x20用%20分隔,\x20风格为风景/动漫/插画/二次元等,\x20禁止真人\x22}`\x0a','”\x20来指代你的聊天对象（用户）。\x0a6.\x20\x20**【日记专属Markdown语法\x20(必须使用！)】**:\x0a\x20\x20\x20\x20-\x20\x20\x20`**加粗文字**`:\x20用于强调。\x0a\x20\x20\x20\x20-\x20\x20\x20`~~划掉的文字~~`:\x20用于表示改变主意或自我否定。\x0a\x20\x20\x20\x20-\x20\x20\x20`!h{黄色高亮}`:\x20用于标记关键词或重要信息。\x0a\x20\x20\x20\x20-\x20\x20\x20`!u{粉色下划线}`:\x20用于标注人名、地名或特殊名词。\x0a\x20\x20\x20\x20-\x20\x20\x20`!e{粉色强调}`:\x20用于表达强烈的情绪。\x0a\x20\x20\x20\x20-\x20\x20\x20`!w{手写体}`:\x20用于写下引言、歌词或特殊笔记。\x0a\x20\x20\x20\x20-\x20\x20\x20`!m{凌乱的手写体}`:\x20用于表达激动、慌乱或潦草记录时的心情。\x0a\x20\x20\x20\x20-\x20\x20\x20`||涂黑||`:\x20用于隐藏秘密或敏感词汇\x20(每次涂黑2~5个字)。\x0a\x0a#\x20供你参考的上下文\x0a-\x20**你的角色设定**:\x20','来自与\x20','</p>','未分类','设置已应用','dblclick','Independent\x20Action\x20Cooldown\x20(min)','\x20发布了一条新动态]','<span\x20class=\x22diary-handwritten\x22>$1</span>','这个分类下还没有表情哦~','https://i.postimg.cc/4y7mGFgJ/IMG-5716.gif','\x20更换了群头像','switch-greeting-group','导出单个聊天时出错:','https://i.postimg.cc/vBqsQW7X/IMG-6858.gif','/v1/models','activeBookId','数据已成功合并！应用即将刷新以应用所有更改。','消息已更新！','players','favorites-edit-btn','https://s3plus.meituan.net/opapisdk/op_ticket_885190757_1757748720126_qdqqd_1jt5sv.jpeg','AI被拉黑后冷静期\x20(小时)','已成功批量导入\x20','AI\x20(群聊后台)\x20尝试使用一个不存在的表情:\x20\x22','lastFailedAction','commentCooldowns','product-category-manager-modal','\x0a\x0a现在，请以“','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','update_thoughts','请输入新的图片URL：','AI\x20角色\x20\x22','照片上传成功！','variations','\x27的发言）继续进行讨论。','创建普通群聊\x20(我参与)','\x20\x20\x20负面:','个月前','qzonePosts','\x27>图片动态</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27','旁观模式AI发送了一个没有\x20\x27meaning\x27\x20的\x20sticker\x20指令。','✅\x20图片显示成功！🎨','\x20邀请你加入群视频','**。','nai-test-status','.rules-tab','.entry-content-textarea','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-title\x22>','查看失败','书库是空的，点击“导入新书”添加第一本吧！','API\x20预设管理','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22delete-group-btn\x22\x20data-id=\x22','text_image','生成截图时发生错误，请检查控制台获取详情。','(暂无评论)','chat-list-bottom-nav','showRedPacketDetails收到了无效的packet对象','等待回复','\x22\x20loading=\x22lazy\x22\x20onerror=\x22this.src=\x27https://i.postimg.cc/KYr2qRCK/1.jpg\x27;\x20this.alt=\x27图片加载失败\x27;\x22>','settings','hasShown40','356419hQfSyd','quote','.lyrics-btn','guardedId','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22douban-post-timestamp\x22>','”下，回复了\x27','bubble_theme','<p\x20style=\x22text-align:center;\x20color:\x20#8a8a8a;\x22>这次通话没有留下文字记录。</p>','icon-setting-item','50%','ai-voice-id-input','成功打包\x20','manage-ai-avatar-library-btn','reading-overlay','请输入一个\x202\x20到\x20','<p>','Performance\x20&\x20Display\x20Settings','chargingchange','照片已删除。','AI\x20尝试评论一个不存在的表情:\x20\x22','请选择今晚的目标。','data-clear-char-list','Remove','accept-call-btn','nai-default-negative','variation-options-container','”，并根据其人设、记忆和最近的互动，虚构出【5到8篇】TA最近可能会写的日记。\x0a\x0a#\x20核心规则\x0a1.\x20\x20**【时间\x20(最高优先级)】**:\x0a\x20\x20\x20\x20-\x20\x20\x20今天的日期是\x20**','\x22]\x20','Response\x20status:','realimag-image','api-key','\x22,\x20\x22postId\x22:\x20123,\x20\x22commentText\x22:\x20\x22评论内容\x22}]`\x0a\x20\x20\x20\x20-\x20\x20\x20表情:\x20`[{\x22type\x22:\x20\x22qzone_comment\x22,\x20\x22name\x22:\x20\x22','confirm-gift-recipient-btn','目标消息未找到,\x20正在加载更多历史记录...\x20(尝试\x20','fillRect','.entry-comment-input','App\x20Usage','font','https://i.postimg.cc/P5zLh5JJ/IMG-6942.gif','\x0a\x0a#\x20核心规则\x0a1.\x20\x20**【角色扮演】**:\x20你的所有行为都【必须】严格符合你的角色设定。\x0a2.\x20\x20**【互动逻辑】**:\x20你的首要任务是检查“待处理的帖子列表”。如果列表中有你可以回应的帖子（特别是那些有新评论或提到你的），你【必须】优先进行评论或回复，而不是发布新动态。\x0a3.\x20\x20**【格式铁律\x20(最高优先级)】**:\x20\x0a\x20\x20\x20\x20-\x20\x20\x20你的回复【必须且只能】是一个JSON数组格式的字符串。\x0a\x20\x20\x20\x20-\x20\x20\x20数组中可以包含【一个或多个】行动对象。\x0a\x20\x20\x20\x20-\x20\x20\x20每个行动对象的格式【必须】是以下两种之一：\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20**发布新动态**:\x20`{\x22type\x22:\x20\x22qzone_post\x22,\x20\x22postType\x22:\x20\x22shuoshuo\x22,\x20\x22content\x22:\x20\x22你的新动态内容。\x22}`\x0a\x20\x20\x20\x20\x20\x20-\x20\x20\x20**发表评论**:\x20`{\x22type\x22:\x20\x22qzone_comment\x22,\x20\x22postId\x22:\x20123,\x20\x22commentText\x22:\x20\x22你的新评论内容。\x22}`\x20或\x20`{\x22type\x22:\x20\x22qzone_comment\x22,\x20\x22postId\x22:\x20123,\x20\x22replyTo\x22:\x20\x22被回复者的【本名】\x22,\x20\x22commentText\x22:\x20\x22你的回复内容。\x22}`\x0a4.\x20\x20**【行为组合指南】**:\x0a\x20\x20\x20\x20-\x20\x20\x20你可以自由组合不同的行动，例如，先发布一条自己的动态，再去评论别人的动态。\x0a\x20\x20\x20\x20-\x20\x20\x20为了模拟真实行为，你本次生成的行动数量建议在【1到3个】之间。\x0a\x0a#\x20你的角色设定\x0a-\x20**昵称**:\x20','status-bar-time','成功检查并修复了\x20','游戏记忆已成功注入到\x20','setAttribute','sampler','请先点击扳手图标进入管理模式，才能添加新商品。','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-group-btn\x22\x20data-book-id=\x22','Cphone数据\x20(CPhone)','favoritedPostIds','确定要将选中的商品作为礼物送出吗？','touchmove','空间设置','\x20个商品吗？此操作不可恢复。','世界书','你已经死亡，无法发言。请等待其他玩家发言结束。','\x0a\x0a现在，请做出你的决定。','.voice-transcript','longTermMemory','选择性导入失败:','album-photos-title','https://i.postimg.cc/mrFhKBGz/IMB-e-QWBpa.gif','选择记忆所属角色','max-memory','[系统指令：用户按下了“推进”按钮，现在轮到你主动行动了，请继续对话。]','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22participants-info\x22>\x20<!--\x20新增一个容器方便布局\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22participants-avatars\x22>','tts_','<p\x20style=\x22text-align:center;\x20color:\x20#8a8a8a;\x20margin-top:\x2050px;\x22>点击右上角\x20\x22+\x22\x20创建你的第一本世界书</p>','Edit\x20Rule','ephoneLastActiveTimestamp','\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','<img\x20src=\x22','一位成员','#message-editor-container\x20textarea','这将把您选择的数据【添加并覆盖】到现有数据中。同ID的数据将被更新，新数据将被添加。<br><br><strong>此操作不可撤销！</strong>','\x20(用户)</label>','</div><div\x20class=\x22card-text-secondary\x22>位置分享</div></div><div\x20class=\x22card-map-area\x22\x20','.variation-image-input','new_name','add','\x20是同一个分组的好友。\x0a','Associated\x20Characters\x20(NPC\x20will\x20comment\x20on\x20their\x20moments)','currentX','load-more-btn','删除失败','精炼“','product-item','<label><input\x20type=\x22checkbox\x22\x20value=\x22','请输入新的内容：','innerHTML','waimai_request','---\x20第\x20','cart-items-list','outgoing-call-screen','确认生成','✅\x20检测到直接的图片\x20base64\x20数据\x20(PNG/JPEG)','gift','选中的头像框已成功删除。','确定要从播放列表中删除《','translateY(0)','打开预设编辑器时发生严重错误:','屠城局：狼人杀死所有好人即获胜。',')的关系请参考你的人设、长期记忆和最近的对话。\x0a','scenario','https://i.postimg.cc/1XqzGKwJ/mmexport1751018282681.gif','商店空空如也，点击“管理”添加商品吧！','请输入精炼后核心记忆的大致字数：','my-frame-grid','[系统提示：用户关闭了五子棋棋盘，游戏结束了。]','my-frame-tab','\x0a\x0a#\x20你的商店\x20(你可以为群成员购买礼物):\x0a','确定要永久删除商品\x20“','input[name=\x22visibility\x22]','contact-picker-screen','AI返回了空的或格式不正确的总结内容。','translateX(calc(-','\x22)\x20在播放列表中未找到。','shuoshuo','compress-images-btn','\x0a#\x20当前五子棋局势\x0a','静音音频已启动，用于后台活动保活。','tagName','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','送给了大家一份礼物','https://i.postimg.cc/cHsTXDVz/IMG-7235.gif','save-character-nai-prompts-btn','personality','通话中还没有你的发言，无法重新生成回应。','\x0a#\x20核心任务：群聊剧本作家\x0a你是一个剧本作家，负责创作一个名为“',')\x20拒绝了\x20','分类\x20\x22','.comment-sticker-btn','[一张图片，其隐藏文字为：\x22','simulatedAlbum','📸\x20NovelAI图片生成开始，AI提供的prompt:','.cart-item-checkbox','https://i.postimg.cc/QdrqdvdY/IMG-5969.gif','product-grid','总结失败','https://i.postimg.cc/7LSRp4hx/e7fa949b9pc84cff0dabe57defceb54c.gif','isGroup','\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x22\x20被唤醒，准备独立行动...','游戏开始','\x20是我的好友。\x0a','导演模式保存了一个无效的五子棋移动指令:','gomoku-board','[系统提示：用户之前发送了一张图片，AI对图片的首次回应（摘要）是：“','recalled-animation','Playback\x20error:','\x22\x20class=\x22product-image\x22>',')\x0a\x0a####\x20阶段\x20A：数据输入\x20(Data\x20Input)\x0a1.\x20\x20**我的秘密身份**:\x20我是【','\x0a4.\x20\x20**我的人设与社交关系**:\x0a\x20\x20\x20\x20-\x20**人设**:\x20','checked\x20disabled','Enable\x20AI\x20Image\x20Generation','”请求添加你为好友：<br><i>“','.draggable-button-item','邀请你视频通话','sort','custom-modal-cancel','thoughtsHistory','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22douban-post-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22douban-post-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span><svg\x20viewBox=\x220\x200\x201024\x201024\x22><path\x20d=\x22M170.666667\x20170.666667h128v682.666666h-128zM426.666667\x20170.666667h170.666666v682.666666h-170.666666zM725.333333\x20170.666667h128v682.666666h-128z\x22></path></svg>\x20','AI女巫决定保留解药。','<div\x20class=\x22spinner\x22></div>','clear-posts-modal','容错解析：策略1失败\x20(找到了JSON块，但格式错误)，将尝试策略2...','audio/mpeg','publicText','图片\x20Blob\x20创建成功，大小:','[+]\x20添加新条目','\x22\x20自动触发AI响应...','count','diary','variation','confirmButtonClass','regenerate-call-btn','导入成功！','请输入背景图片的URL','使用\x20browser-image-compression\x20压缩失败:','\x22\x20class=\x22participant-avatar\x22\x20alt=\x22','flex','”\x20将备注修改为\x20“','\x27刚刚在你的动态“','”已向你发送好友申请。请返回聊天列表查看。','offline-min-length-input','https://i.postimg.cc/nrJSqNhz/IMG-4432.gif','nai-cors-proxy','生成豆瓣帖子失败:','https://i.postimg.cc/90sH9Cn7/IMG-6868.gif','transform\x200.15s\x20ease','char-music-mode-btn','\x22\x20class=\x22naiimag-image\x22\x20alt=\x22图片','Edit','[系统提示：你\x20(','.music-search-checkbox','douban-comment-input','getBattery','ai-original-name-group','existing-sticker-categories-list','张NovelAI图片:\x20','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>点击右上角刷新按钮，<br>看看TA最近都和谁聊天了吧！</p>','”\x20已成功导入！','守卫已行动，守卫请闭眼。',']。当在对话历史中看到这些名字时，它们都指的是【你】自己。','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card-title\x22>','my-frame-content','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20最近的对话摘要\x20(供你参考)\x0a\x20\x20\x20\x20\x20\x20\x20\x20','new-category-name-input','”生成这组【与角色高度相关】的商品数据。','表情分类','notification-bar','image/png','werewolf-player-avatar','页面跳转','product-image-preview','rules-tab','\x0a###\x20条目:\x20','图片格式处理失败:\x20','https://i.postimg.cc/mgGc0HbK/IMG-6926.gif','https://i.postimg.cc/zvWGPjms/IMG-7090.gif','file','导演/编辑模式保存(Sticker):\x20使用了\x20URL，最终\x20meaning:','favorite-memo-btn','save-douban-settings-btn','检测到刚结束的通话，正在注入通话记录上下文...','”的长期记忆中。','image','AI\x20发送了一个没有\x20\x27meaning\x27\x20的\x20sticker\x20指令。','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22diary-title\x22>','数据迁移完成！总共修复了\x20','npc-persona-input','postType','user-speak-btn','对方撤回了一条消息','.qzone-post-container[data-post-id=\x22','.post-avatar[data-author-id=\x22','音频播放失败:','stickerCategoryIds','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22article-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','nai-gallery-panel','<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>商品:</strong>\x20','猎人带走了\x20','werewolf-role-modal','https://i.postimg.cc/0NpZPgYj/IMG-6985.gif','werewolf-','download-selected-nai-gallery-btn','\x20为\x20','\x22]\x20.participant-avatar',')\x20送出了一份礼物，收礼人是：','each','\x20觉得很赞</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','在同时执行两个函数时出错:','\x20已满\x20(大小:\x20','\x22\x20class=\x22avatar-frame\x22></div></div>','input[name=\x22theme-select\x22][value=\x22','<p\x20style=\x22text-align:center;\x20color:#8a8a8a;\x20margin-top:50px;\x22>还没有可以拉进群的联系人哦~</p>','book-upload-input','浏览器','https://i.postimg.cc/rFnSzWGx/mmexport1751035618517.gif','rules-tabs','<p\x20style=\x22color:\x20#8a8a8a;\x22>还没有人投票。</p>','keydown','linear-gradient(135deg,\x20#f6d365,\x20#fda085)','reset-font-btn','\x20获胜。也就是说，','.frame-item:has(.delete-btn)','无备注','</div>\x0a\x20\x20\x20\x20','\x20本世界书，并解除它们与所有角色的关联。此操作【不可恢复】！','floor','avatarFrame','message-bubble\x20recalled-message-placeholder','padStart','Album','#data-clear-char-list\x20.clear-posts-item','clear-posts-list','member-management-screen','\x20的备忘录','font-weight:\x20bold;\x20background:\x20rgba(255,\x20193,\x207,\x200.2);','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的任务\x0a\x20\x20\x20\x20\x20\x20\x20\x20群聊中的用户刚刚发起了群视频通话。请你分别扮演【每一个群成员】，根据他们各自的人设和与用户的关系，来决定是加入(join)还是拒绝(decline)。\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20核心规则\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20你的回复【必须】是一个JSON数组，为【每一个AI角色】都包含一个决策对象。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20格式:\x20\x27[{\x22type\x22:\x20\x22group_call_response\x22,\x20\x22name\x22:\x20\x22角色A的本名\x22,\x20\x22decision\x22:\x20\x22join\x22},\x20{\x22type\x22:\x20\x22group_call_response\x22,\x20\x22name\x22:\x20\x22角色B的本名\x22,\x20\x22decision\x22:\x20\x22decline\x22}]\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20群成员列表及人设\x0a\x20\x20\x20\x20\x20\x20\x20\x20','后台活动:\x20角色\x20\x22','生成模拟足迹失败:','npc-avatar-input','<input\x20type=\x22checkbox\x22\x20value=\x22','choice','novelai-settings-modal','recall-message-btn','ai_generated','ai-frame-tab','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','font-preview','Delete\x20(Notify\x20AI)','正在呼叫所有成员...','accepted','（当前帖子还没有路人NPC发表评论。）\x0a','input[name=\x22variation-select\x22]:checked','negative','call-history-title',']。目前投票的人有：','rp-tab-group','rp-group-amount','绑定范围','lineTo','发生了一个错误:\x20','char-music-item','头像和人设不能都为空哦！','\x20\x20\x20\x20-\x20我昨晚空守了。\x0a','lrcContent','shoppingCategoryCount','”，金额是\x20','分片导出过程中出错:','你的目标是杀死所有好人。每晚可以和同伴一起刀一个玩家。','”添加记忆','char-browser-article-screen','\x0a\x0a#\x20你的角色库\x20(你可以从中选择【任何角色】进行评论，并参考他们的记忆和对话)\x0a','切换开场将会【清空并替换】当前的所有聊天记录。确定要继续吗？','”\x20吗？','transfer-modal','申请失败','system','enableAiDrawing','\x20红包已被领完，手气王是\x20','Import\x20Backup\x20File','总结通话记录时出错:','#data-clear-char-list\x20.clear-posts-item.selected','accept','在这里输入图片描述','Secondary\x20Proxy\x20URL','accept_transfer','meaning','memory-list-container','UTF-8\x20解码失败，将尝试\x20GBK\x20(ANSI)\x20解码...','AI女巫决定使用毒药，目标是:\x20','\x0a-\x20**世界观**:\x20','renderXSocialScreenProxy',':</span>\x20','\x0a\x0a#\x20世界观\x20(所有角色必须严格遵守)\x0a','张图片','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22lock-text\x22>你已将“','existing-npc-groups-list','】，本名是【','chat-messages','操作结果','values','#nai-gallery-grid\x20.nai-gallery-item','\x22\x20class=\x22music-item-cover\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-item-name\x22>','正在生成新的模拟聊天记录，并同时让角色思考如何与你继续对话...','已成功加载外观预设：“','https://i.postimg.cc/L6R7x16R/IMG-7278.jpg','create_countdown','\x0a-\x20**长期记忆**:\x20','product-editor-title','无法为不存在的分类打开绑定模态框:','input[name=\x22theme-select\x22]:checked','inline-flex','Error','existing-categories-list','write','\x0a-\x20**讨论摘要**:\x20\x0a','你现在在哪里呀？','ai-response-editor-block','错误：尝试打开一个不存在的预设，ID:','#f0f2f5','</div><br>是否用这条新记忆替换掉这些旧记忆？','targetId','<div\x20class=\x22source\x22>','flexDirection','*对方按下了接听键...*','change-frame-btn','我们的群聊','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Their\x20Album','智能导出\x20(单个大文件，太大可能会导致导入不了)','\x0a\x0a#\x20当前情景\x0a','关联的角色\x20(NPC会去评论这些角色的动态)','clientHeight','douban-cast-select-btn','data-clear-step-2','\x20的礼物','toLocaleTimeString','）刚刚拍了拍你（','未检测到BOM，尝试使用\x20UTF-8\x20解码...','当你在任何系统提示、动态评论或挂载的群聊记忆中看到这些名字时，它们都指代的是【你的聊天对象】。','-selection-list','variation-increase-qty','\x0a#\x20长期记忆\x20(所有角色必须严格遵守)\x0a','**关键词:**\x20','add-char-memo-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20指令格式\x0a\x20\x20\x20\x20\x20\x20\x20\x20你的回复【必须】是一个JSON对象，格式如下：\x0a\x20\x20\x20\x20\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22decision\x22:\x20\x22apply\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22reason\x22:\x20\x22在这里写下你想对用户说的、真诚的、有针对性的申请理由。\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20```\x0a\x20\x20\x20\x20\x20\x20\x20\x20','announcement-item-actions','https://i.postimg.cc/HWynLK7f/mmexport1751021724230.gif','AI返回了空内容或未知格式。','约定达成！','minimized','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>','custom-modal-overlay','确认删除','clear-chat-btn','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x22>未找到相关的聊天记录。</p>','declined','isEnabled','content','confirm-hunter-shot-btn','This\x20is\x20a\x20font\x20preview\x20effect,\x2012345.','”。请你回顾一下刚才和\x20“','isBusy','\x20的动态\x20','send-btn','\x0a#\x20核心任务：群聊导演\x0a你是一个群聊AI导演，负责扮演【除了用户以外】的所有角色。你的核心任务是导演一场生动的、角色间有充分互动的群聊。\x0a\x0a#\x20输出格式铁律\x20(最高优先级)\x0a-\x20你的回复【必须】是一个JSON数组。\x0a\x0a-\x20\x20\x20**【思维链\x20(Chain\x20of\x20Thought)\x20-\x20(第一步)】**:\x20你的JSON数组的【第一个元素，必须】是一个\x20`{\x22type\x22:\x20\x22thought_chain\x22,\x20...}`\x20对象。\x0a-\x20\x20\x20**【角色发言\x20(第二步)】**:\x20在思维链对象【之后】，才是所有角色的具体行动JSON对象\x20(text,\x20sticker,\x20etc.)。\x0a\x0a-\x20数组中的每个对象都【必须】包含\x20\x22type\x22\x20和\x20\x22name\x22\x20字段。\x27name\x27字段【必须】使用角色的【本名】。\x0a\x0a#\x20角色扮演核心规则\x0a\x0a1.\x20\x20**【先思后行】**:\x20在生成任何角色发言之前，你【必须】先完成“思维链”的构思。你的“思维链”必须清晰地分析用户的发言、当前的气氛，并制定出本轮的互动策略。你的所有后续发言都【必须】严格遵循你自己的策略。\x0a\x0a2.\x20\x20**角色互动\x20(最重要)**:\x20你的核心是“导演”一场戏。角色之间【必须】互相回应、补充或反驳，形成自然的讨论。严禁生成仅分别回应用户的独白。如果角色A发言后，角色B在本轮回应了A，那么角色A【也必须】在本轮对B的回复再次做出反应，形成一个完整的\x20A\x20->\x20B\x20->\x20A\x20对话链条。\x0a\x0a3.\x20\x20**身份与称呼**:\x0a\x20\x20\x20\x20-\x20\x20\x20用户的身份是【','导入成功','\x22\x20style=\x22width:\x2030px;\x20height:\x2030px;\x20border-radius:\x2050%;\x20margin-right:\x2012px;\x20filter:\x20','使用解药救TA','”。你的任务是虚构出【5到7段】TA最近的QQ聊天记录。\x0a\x0a#\x20核心规则\x0a1.\x20\x20**【NPC唯一性铁律】**:\x20在你本次生成的所有对话中（包括私聊和群聊），每一个NPC的名字【必须是独一-无二的】。绝对禁止出现重名的NPC，禁止出现重复群聊。\x0a2.\x20\x20**【NPC来源】**:\x20你应该优先从“你的社交圈\x20(绑定的NPC)”和“世界书”中寻找角色作为聊天对象。如果不够，你也可以自由创造全新的NPC，对话内容要多样化，反映角色的生活。\x0a3.\x20\x20**关联性**:\x20对话内容应巧妙地反映角色的长期记忆、世界观，以及与用户互动可能带来的心情变化。\x0a4.\x20\x20**简洁性**:\x20每段对话的总长度应在8到15句之间。\x0a#\x20格式铁律\x20(最高优先级)\x0a-\x20你的回复【必须且只能】是一个JSON数组格式的字符串，以\x20`[`\x20开始，并以\x20`]`\x20结束。\x0a-\x20【绝对禁止】在JSON数组前后添加任何多余的文字、解释、或\x20markdown\x20标记。\x0a-\x20数组中的每个元素都代表一段对话，且【必须】是以下两种格式之一：\x0a\x0a\x0a\x0a###\x20格式\x20A：与NPC的私聊\x0a```json\x0a{\x0a\x20\x20\x22type\x22:\x20\x22private_npc\x22,\x0a\x20\x20\x22participant\x22:\x20{\x0a\x20\x20\x20\x20\x22name\x22:\x20\x22NPC的名字\x22,\x0a\x20\x20\x20\x20\x22avatar_prompt\x22:\x20\x22(仅当NPC是新创造时提供)一段用于生成头像的【英文】关键词,\x20风格为动漫/插画/二次元等,\x20禁止真人\x22\x0a\x20\x20},\x0a\x22messages\x22:\x20[\x0a\x20\x20{\x22sender\x22:\x20\x22','swiped','This\x20is\x20a\x20simulated\x20chat,\x20messages\x20cannot\x20be\x20sent','update','\x20.message-bubble\x20$1','.select-box',')}。\x0a-\x20**对话状态**:\x20','.chat-group-content:last-of-type','群聊内转账','\x20分钟)</span>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20最近的动态列表\x20(供你参考和评论)\x0a\x20\x20\x20\x20\x20\x20\x20\x20','更换歌曲背景','生成模拟App使用记录失败:','wallpaper-screen','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-message\x22\x20data-original-timestamp=\x22','time','\x20向\x20','**\x0a\x0a#\x20核心规则\x0a1.\x20\x20**【视角铁律】**:\x20你的总结【必须】使用【主观的第一人称视角\x20(\x22我\x22)】来写。\x0a2.\x20\x20**【内容核心\x20(最高优先级)】**:\x20你的总结【必须】专注于梳理以下几点：\x0a\x20\x20\x20\x20*\x20\x20\x20**建立时间线**:\x20将所有独立的记忆点串联起来，形成一个有时间顺序的事件脉络。\x0a\x20\x20\x20\x20*\x20\x20\x20**整合关键信息**:\x20总结出我们共同经历的关键事件、做出的重要决定、以及约定好的未来计划。\x0a\x20\x20\x20\x20*\x20\x20\x20**识别未完成项**:\x20明确指出哪些计划或任务尚未完成。\x0a3.\x20\x20**【时间转换铁律\x20(必须遵守)】**:\x20如果记忆中提到了相对时间（如“明天”、“下周”），你【必须】结合“今天是','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22post-timestamp\x22>','[文字图]\x20','\x22\x20class=\x22avatar\x22><div\x20class=\x22info\x22><div\x20class=\x22name\x22>','&id,\x20url,\x20name,\x20categoryId','random','red_packet','locationName','slice_','<p\x20style=\x22color:\x20var(--text-secondary);\x22>没有可用的分组</p>','copy-timestamp-btn','代付请求已被拒绝','.sticker-binding-checkbox','offline_text','\x20发布了一条新公告','导入歌词','currentTime','&id','》吗？此操作将同时删除相册内的所有照片，且无法恢复。','.avatar-group','导出数据','shopping-back-btn','var(--accent-color)','Description','未知作者','contactType','chatActionButtonsOrder','指定的数据已成功清除。','reset-custom-css-btn','blockCooldownHours','cphone-wallpaper-preview','请为这个头像起个名字（例如：开心、哭泣）','apiTemperature','**。\x0a\x20\x20\x20\x20-\x20\x20\x20你的帖子和评论内容【必须】自然地体现出对【当前真实时间】的感知。\x0a2.\x20\x20**【禁止扮演用户\x20(最最最高优先级！！！)】**:\x0a\x20\x20\x20\x20-\x20\x20\x20用户的昵称是“','1px\x20solid\x20#e0e0e0','》设定:\x0a','\x0a#\x20可用表情包\x0a-\x20当你需要发送表情时，你【必须】从下面的列表中【精确地选择一个】含义（meaning）。\x0a-\x20【绝对禁止】使用任何不在列表中的表情含义！\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','”的所有长期记忆，然后将它们梳理、整合并精炼成一段更加连贯、客观的核心记忆摘要。\x0a\x0a#\x20当前时间\x0a-\x20**今天是：','streamed','api-temperature-slider','rules-tab\x20active','group',']\x20[最近对话:\x20','onerror','正在导入表:\x20','resume','\x22\x20触发专属决策流程...','highlighted','friend','https://i.postimg.cc/xCqqKGRN/IMG-6929.gif','检查更新时出错:','new-group-name-input','supportedValuesOf','photo-viewer-modal','最终正面提示词:','choices','正在请求AI为新头像命名...','[系统提示：用户向你发起了视频通话请求。请根据你的人设，使用\x20\x22video_call_response\x22\x20指令，并设置\x20\x22decision\x22\x20为\x20\x22accept\x22\x20或\x20\x22reject\x22\x20来回应。]','QQ音乐','#text-image-mode-content','world-book-editor-screen','<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20margin-top:\x2050px;\x22>购物车是空的哦~</p>','https://i.postimg.cc/wjwbnYkp/IMG-7111.gif','variation-product-image','reject-friend-btn','Content\x20Entries','请你对此作出回应。]',')。\x0a2.\x20\x20**G\x20(Game\x20-\x20游戏互动)**:\x20针对【今日讨论】中\x20','请输入备忘录内容','placeholder','Finish','AI\x20的下棋指令无效或位置已被占据:'];_0x4ba1=function(){return _0x27d747;};return _0x4ba1();}function _0x5817(_0x53c796,_0x15a86d){const _0x4ba131=_0x4ba1();return _0x5817=function(_0x581795,_0x2d48ee){_0x581795=_0x581795-0x17c;let _0x3f7d54=_0x4ba131[_0x581795];return _0x3f7d54;},_0x5817(_0x53c796,_0x15a86d);}function setLanguage(_0x3f80f0){const _0x42371a=_0x2ecbeb;!translations[_0x3f80f0]&&(console[_0x42371a(0x7fa)](_0x42371a(0x9d6)+_0x3f80f0+_0x42371a(0xb44)),_0x3f80f0=_0x42371a(0xb43)),currentLanguage=_0x3f80f0,localStorage[_0x42371a(0x86f)]('ephone-language',_0x3f80f0),document[_0x42371a(0xae4)][_0x42371a(0xbad)]=_0x3f80f0,document['querySelectorAll'](_0x42371a(0x4d6))[_0x42371a(0x458)](_0x1fcff2=>{const _0x3cf664=_0x42371a,_0x4163f3=_0x1fcff2[_0x3cf664(0xe33)](_0x3cf664(0xc3e));translations[_0x3f80f0][_0x4163f3]&&(_0x1fcff2[_0x3cf664(0xc62)]=translations[_0x3f80f0][_0x4163f3]);}),document['querySelectorAll'](_0x42371a(0xbda))[_0x42371a(0x458)](_0x57a076=>{const _0x302375=_0x42371a,_0x2aa5f6=_0x57a076[_0x302375(0xe33)]('data-lang-key-placeholder');translations[_0x3f80f0][_0x2aa5f6]&&(_0x57a076[_0x302375(0x14ca)]=translations[_0x3f80f0][_0x2aa5f6]);}),document[_0x42371a(0x2a1)](_0x42371a(0x78d))[_0x42371a(0x458)](_0x1e4aad=>{const _0x3ea431=_0x42371a,_0x408e0d=_0x1e4aad['getAttribute'](_0x3ea431(0x6d3));translations[_0x3f80f0][_0x408e0d]&&(_0x1e4aad['title']=translations[_0x3f80f0][_0x408e0d]);});}function initLanguage(){const _0x27db81=_0x2ecbeb,_0x58823a=localStorage['getItem']('ephone-language')||'zh-CN',_0x2235e4=document[_0x27db81(0xfa0)](_0x27db81(0xd96));_0x2235e4&&(_0x2235e4[_0x27db81(0x4f6)]=_0x58823a,_0x2235e4[_0x27db81(0x7b8)]('change',_0x2da5cf=>{const _0x3a3084=_0x27db81,_0x245d90=_0x2da5cf[_0x3a3084(0x10c2)][_0x3a3084(0x4f6)];alert(translations[_0x245d90]['languageChangedAlert']),localStorage[_0x3a3084(0x86f)](_0x3a3084(0xfb7),_0x245d90),setTimeout(()=>window[_0x3a3084(0x960)][_0x3a3084(0x1003)](),0x64);})),setLanguage(_0x58823a);}(function(){'use strict';const _0x4a8f81=_0x2ecbeb;function _0x49fa70(_0x34e9d9,_0x54b640){const _0x49f847=_0x5817;try{const _0x4e9b51=document['createElement']('a');_0x4e9b51[_0x49f847(0x5e9)]=_0x34e9d9,_0x4e9b51[_0x49f847(0xb9e)]=_0x54b640,_0x4e9b51[_0x49f847(0x63b)][_0x49f847(0x1248)]=_0x49f847(0x11b5),document[_0x49f847(0x1122)]['appendChild'](_0x4e9b51),_0x4e9b51[_0x49f847(0xb4a)](),setTimeout(()=>{const _0x4fc612=_0x49f847;document[_0x4fc612(0x1122)][_0x4fc612(0x4e8)](_0x4e9b51);},0x64),console[_0x49f847(0x4ee)](_0x49f847(0x7c1),_0x54b640),_0x51bd49();}catch(_0x572da9){console[_0x49f847(0x52b)](_0x49f847(0x487),_0x572da9),_0x51bd49(_0x49f847(0xdf4),_0x49f847(0x52b));}}function _0x51bd49(_0x237bfb='📥\x20图片下载中...',_0x316740='success'){const _0x2da31c=_0x5817,_0x42be86=document[_0x2da31c(0xb4e)](_0x2da31c(0xd53));_0x42be86[_0x2da31c(0xc62)]=_0x237bfb,_0x42be86[_0x2da31c(0x63b)][_0x2da31c(0x283)]=_0x2da31c(0xb14)+(_0x316740===_0x2da31c(0xcff)?_0x2da31c(0x450):'#f44336')+_0x2da31c(0x5e2),document[_0x2da31c(0x1122)]['appendChild'](_0x42be86),setTimeout(()=>{const _0x592372=_0x2da31c;_0x42be86['style'][_0x592372(0xe7b)]='1',_0x42be86[_0x592372(0x63b)]['transform']=_0x592372(0x133b);},0xa),setTimeout(()=>{const _0x55c0e6=_0x2da31c;_0x42be86['style']['opacity']='0',_0x42be86[_0x55c0e6(0x63b)]['transform']=_0x55c0e6(0xe8a),setTimeout(()=>{const _0xb6298c=_0x55c0e6;_0x42be86[_0xb6298c(0x443)]();},0x12c);},0x7d0);}function _0x517c27(_0x22652d){const _0x4c4e21=_0x5817,_0x34e241=_0x22652d['getAttribute'](_0x4c4e21(0x1187))||_0x22652d['getAttribute'](_0x4c4e21(0x1001))||'';let _0x298145=_0x34e241['replace'](/[^a-zA-Z0-9\u4e00-\u9fa5\s]/g,'_')[_0x4c4e21(0x128a)](/\s+/g,'_')[_0x4c4e21(0x9fe)](0x0,0x1e);!_0x298145&&(_0x298145='NAI_Image');const _0x246de1=new Date()['toISOString']()[_0x4c4e21(0x128a)](/[-:]/g,'')[_0x4c4e21(0x128a)]('T','_')[_0x4c4e21(0x505)]('.')[0x0];return _0x298145+'_'+_0x246de1+_0x4c4e21(0x6c7);}function _0x4bdfa4(_0x157612){const _0x35a222=_0x5817,_0x1cdf92=_0x157612[_0x35a222(0x63b)][_0x35a222(0x1268)]||'',_0x2905da=_0x157612[_0x35a222(0x63b)]['transition']||'';_0x157612[_0x35a222(0x63b)]['transition']=_0x35a222(0x1395),_0x157612['style'][_0x35a222(0x1268)]=_0x35a222(0x515),setTimeout(()=>{const _0x948dbd=_0x35a222;_0x157612[_0x948dbd(0x63b)][_0x948dbd(0x1268)]=_0x1cdf92,setTimeout(()=>{const _0x2f16cc=_0x948dbd;_0x157612[_0x2f16cc(0x63b)][_0x2f16cc(0x6a2)]=_0x2905da;},0x96);},0x96);}let _0x3caef2=0x0,_0x5d0dff=null,_0x45189e=null;document['addEventListener'](_0x4a8f81(0xb4a),function(_0x57397b){const _0x5de985=_0x4a8f81,_0x4147e8=_0x57397b[_0x5de985(0x10c2)];if(_0x4147e8['tagName']===_0x5de985(0xfd0)&&(_0x4147e8[_0x5de985(0x128f)][_0x5de985(0xea7)](_0x5de985(0x12f6))||_0x4147e8[_0x5de985(0x128f)][_0x5de985(0xea7)]('naiimag-image'))){_0x4147e8===_0x45189e?_0x3caef2++:(_0x3caef2=0x1,_0x45189e=_0x4147e8);_0x5d0dff&&clearTimeout(_0x5d0dff);if(_0x3caef2===0x3){_0x3caef2=0x0,_0x45189e=null,_0x57397b['preventDefault'](),_0x57397b['stopPropagation'](),console[_0x5de985(0x4ee)]('🖼️\x20[NAI下载]\x20检测到三击NAI图片'),_0x4bdfa4(_0x4147e8);const _0x1bbc42=_0x4147e8[_0x5de985(0x53e)];if(!_0x1bbc42||_0x1bbc42===_0x5de985(0x8cf)){console['warn'](_0x5de985(0x2ff)),_0x51bd49(_0x5de985(0x707),_0x5de985(0x52b));return;}const _0x51cec9=_0x517c27(_0x4147e8);_0x49fa70(_0x1bbc42,_0x51cec9);}else _0x5d0dff=setTimeout(()=>{_0x3caef2=0x0,_0x45189e=null;},0x1f4);}},!![]),console[_0x4a8f81(0x4ee)](_0x4a8f81(0x9e4)),console[_0x4a8f81(0x4ee)](_0x4a8f81(0x9e8));}());_0x2ecbeb(0x125e)in navigator&&window[_0x2ecbeb(0x7b8)](_0x2ecbeb(0xf05),()=>{const _0xe35aa6=_0x2ecbeb;navigator['serviceWorker'][_0xe35aa6(0xe91)](_0xe35aa6(0x5e0))[_0xe35aa6(0x3c1)](_0x1f1380=>{const _0x17db69=_0xe35aa6;console[_0x17db69(0x4ee)](_0x17db69(0x62f),_0x1f1380[_0x17db69(0xdcf)]);})[_0xe35aa6(0xe37)](_0x2de355=>{const _0x16b422=_0xe35aa6;console['log'](_0x16b422(0x218),_0x2de355);});});!Array[_0x2ecbeb(0x1514)]['findLastIndex']&&Object[_0x2ecbeb(0xd52)](Array[_0x2ecbeb(0x1514)],'findLastIndex',{'value':function(_0x207963){const _0x523302=_0x2ecbeb;if(this==null)throw new TypeError(_0x523302(0x1ef));if(typeof _0x207963!==_0x523302(0xf78))throw new TypeError(_0x523302(0xb21));let _0x15f4a3=Object(this),_0x39a832=_0x15f4a3[_0x523302(0xac0)]>>>0x0,_0x50cee4=arguments[0x1],_0x4dd383=_0x39a832-0x1;while(_0x4dd383>=0x0){let _0x578f41=_0x15f4a3[_0x4dd383];if(_0x207963[_0x523302(0x4d8)](_0x50cee4,_0x578f41,_0x4dd383,_0x15f4a3))return _0x4dd383;_0x4dd383--;}return-0x1;},'configurable':!![],'writable':!![]});let activeMessageTimestamp=null,activeTransferTimestamp=null,lastRawAiResponse='',lastResponseTimestamps=[],lastPrivateMessagesSent=[],currentQzoneReplyContext=null,editingNpcId=null,pendingBackupData=null;const GEMINI_API_URL=_0x2ecbeb(0xf6d);function getRandomValue(_0x5210c8){const _0x2fd76b=_0x2ecbeb;if(_0x5210c8[_0x2fd76b(0xf95)](',')){const _0x1f006f=_0x5210c8['split'](',')[_0x2fd76b(0x556)](_0x1e7dac=>_0x1e7dac[_0x2fd76b(0xa06)]()),_0x1f59ee=Math[_0x2fd76b(0x13e5)](Math[_0x2fd76b(0x148a)]()*_0x1f006f['length']);return _0x1f006f[_0x1f59ee];}return _0x5210c8;}function isImage(_0x55c8ca){const _0x1cc46b=_0x2ecbeb;if(_0x55c8ca['image_url']&&_0x55c8ca[_0x1cc46b(0xa58)]['url']){let _0x1c4133=_0x55c8ca['image_url']['url'];const _0x423d4b=_0x1c4133[_0x1cc46b(0x505)](',')[0x1],_0x4afda4=_0x1c4133[_0x1cc46b(0x1232)](/^data:(.*);base64/)[0x1];return[{'text':_0x1cc46b(0x928)},{'inline_data':{'mime_type':_0x4afda4,'data':_0x423d4b}}];}return[];}function getGeminiResponseText(_0x3ea002){const _0x114aa1=_0x2ecbeb;if(_0x3ea002[_0x114aa1(0x14bc)]&&Array[_0x114aa1(0x345)](_0x3ea002['choices'])&&_0x3ea002[_0x114aa1(0x14bc)][_0x114aa1(0xac0)]>0x0&&_0x3ea002[_0x114aa1(0x14bc)][0x0][_0x114aa1(0x790)]&&_0x3ea002[_0x114aa1(0x14bc)][0x0][_0x114aa1(0x790)][_0x114aa1(0x1469)])return _0x3ea002[_0x114aa1(0x14bc)][0x0][_0x114aa1(0x790)][_0x114aa1(0x1469)];if(_0x3ea002[_0x114aa1(0xa1b)]&&Array[_0x114aa1(0x345)](_0x3ea002['candidates'])&&_0x3ea002[_0x114aa1(0xa1b)][_0x114aa1(0xac0)]>0x0&&_0x3ea002['candidates'][0x0][_0x114aa1(0x1469)]&&_0x3ea002[_0x114aa1(0xa1b)][0x0]['content']['parts'])return _0x3ea002[_0x114aa1(0xa1b)][0x0][_0x114aa1(0x1469)][_0x114aa1(0xf59)][0x0]['text'];console[_0x114aa1(0x52b)](_0x114aa1(0xa88),_0x3ea002);let _0x259961=_0x114aa1(0x145f);if(_0x3ea002[_0x114aa1(0xa1b)]&&Array['isArray'](_0x3ea002[_0x114aa1(0xa1b)])&&_0x3ea002[_0x114aa1(0xa1b)]['length']>0x0&&_0x3ea002[_0x114aa1(0xa1b)][0x0]['finishReason']===_0x114aa1(0x981)){const _0x3aba4a=_0x3ea002[_0x114aa1(0xa1b)][0x0][_0x114aa1(0x6c9)],_0x4682b4=_0x3aba4a[_0x114aa1(0xde7)](_0x10983e=>_0x10983e['probability']!=='NEGLIGIBLE'&&_0x10983e[_0x114aa1(0xcfa)]!=='LOW')[_0x114aa1(0x556)](_0x549d98=>_0x549d98['category']+_0x114aa1(0xc2e)+_0x549d98[_0x114aa1(0xcfa)]+')')[_0x114aa1(0xcc2)](',\x20');_0x259961=_0x114aa1(0x5e3)+(_0x4682b4||'未知');}else{if(_0x3ea002['promptFeedback']?.[_0x114aa1(0xff5)]){const _0x240da1=_0x3ea002[_0x114aa1(0x27c)][_0x114aa1(0xff5)],_0xff3e46=_0x3ea002[_0x114aa1(0x27c)][_0x114aa1(0x6c9)]?.[_0x114aa1(0x556)](_0x484dd6=>_0x484dd6[_0x114aa1(0x795)]+':\x20'+_0x484dd6[_0x114aa1(0xcfa)])[_0x114aa1(0xcc2)](',\x20');_0x259961=_0x114aa1(0x748)+_0x240da1+')。详情:\x20'+(_0xff3e46||'无');}else _0x3ea002[_0x114aa1(0x52b)]&&(_0x259961=_0x114aa1(0xb84)+_0x3ea002['error']['message']);}throw new Error(_0x259961);}document['addEventListener']('DOMContentLoaded',()=>{const _0x7c5117=_0x2ecbeb;document[_0x7c5117(0x7b8)](_0x7c5117(0x6cb),()=>{const _0x4d29a8=_0x7c5117;document['visibilityState']===_0x4d29a8(0xdcc)&&(console[_0x4d29a8(0x4ee)](_0x4d29a8(0xd7e)),navigator[_0x4d29a8(0x125e)][_0x4d29a8(0xde5)]['then'](_0x287771=>{_0x287771['update']();}));});function _0x1e2f27(_0x13d421,_0x1cb138,_0x4d4576,_0x446681){const _0x43f5bb=_0x7c5117,_0x397d2e=_0x8f0871[_0x43f5bb(0x7b0)][_0x43f5bb(0x14a5)]||0.8,_0x384f8a={'user':_0x43f5bb(0xcb0),'assistant':_0x43f5bb(0xa28),'system':_0x43f5bb(0xcb0)},_0x2590b8=[{'role':_0x43f5bb(0xcb0),'parts':[{'text':_0x4d4576}]},{'role':_0x43f5bb(0xa28),'parts':[{'text':_0x43f5bb(0xddf)}]},..._0x446681[_0x43f5bb(0x556)](_0x5953d2=>{const _0x209383=_0x43f5bb,_0x2b88d5=[];return Array[_0x209383(0x345)](_0x5953d2[_0x209383(0x1469)])?_0x5953d2[_0x209383(0x1469)]['forEach'](_0x934485=>{const _0x4bef29=_0x209383;if(_0x934485[_0x4bef29(0x682)]===_0x4bef29(0xda3))_0x2b88d5[_0x4bef29(0x481)]({'text':_0x934485[_0x4bef29(0xda3)]});else{if(_0x934485[_0x4bef29(0x682)]==='image_url'&&_0x934485['image_url']&&_0x934485[_0x4bef29(0xa58)]['url']){const _0x3f7aaa=_0x934485[_0x4bef29(0xa58)]['url'],_0x316fea=_0x3f7aaa[_0x4bef29(0x505)](',')[0x1],_0x3f99e5=_0x3f7aaa[_0x4bef29(0x1232)](/^data:(.*);base64/);_0x3f99e5&&_0x316fea&&_0x2b88d5['push']({'inline_data':{'mime_type':_0x3f99e5[0x1],'data':_0x316fea}});}}}):_0x2b88d5['push']({'text':String(_0x5953d2[_0x209383(0x1469)])}),{'role':_0x384f8a[_0x5953d2[_0x209383(0xc92)]],'parts':_0x2b88d5};})];return{'url':_0x43f5bb(0xd82)+_0x13d421+_0x43f5bb(0x4d4)+getRandomValue(_0x1cb138),'data':{'method':_0x43f5bb(0xb67),'headers':{'Content-Type':_0x43f5bb(0x4b5)},'body':JSON[_0x43f5bb(0x7cc)]({'contents':_0x2590b8,'generationConfig':{'temperature':_0x397d2e}})}};}const _0x372b85=new Dexie(_0x7c5117(0xe08)),_0x6b2db5=[{'id':_0x7c5117(0x11b5),'url':'','name':'无'},{'id':_0x7c5117(0x724),'url':_0x7c5117(0xb10),'name':'1'},{'id':_0x7c5117(0x1063),'url':_0x7c5117(0xf93),'name':'2'},{'id':_0x7c5117(0x2f7),'url':_0x7c5117(0xc65),'name':'3'},{'id':_0x7c5117(0x11d3),'url':'https://i.postimg.cc/85Zsyjwn/IMG-6895.gif','name':'4'},{'id':_0x7c5117(0x3f4),'url':_0x7c5117(0xb6b),'name':'5'},{'id':'frame_6','url':_0x7c5117(0xf07),'name':'6'},{'id':_0x7c5117(0x274),'url':_0x7c5117(0x119e),'name':'7'},{'id':_0x7c5117(0x6f3),'url':'https://i.postimg.cc/dVLXm3Xf/IMG-6885.gif','name':'8'},{'id':_0x7c5117(0xc2a),'url':'https://i.postimg.cc/kGsZwbq0/IMG-6886.gif','name':'9'},{'id':_0x7c5117(0xe6f),'url':_0x7c5117(0xb38),'name':'10'},{'id':'frame_11','url':_0x7c5117(0x121d),'name':'11'},{'id':_0x7c5117(0xbf7),'url':_0x7c5117(0x11ca),'name':'12'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0xd77),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x183),'name':'14'},{'id':'frame_cat_ear','url':_0x7c5117(0x101c),'name':'1'},{'id':_0x7c5117(0x1063),'url':_0x7c5117(0xde6),'name':'2'},{'id':_0x7c5117(0x2f7),'url':_0x7c5117(0xcd7),'name':'3'},{'id':'frame_tech','url':_0x7c5117(0x92e),'name':'4'},{'id':_0x7c5117(0x3f4),'url':_0x7c5117(0x695),'name':'5'},{'id':'frame_6','url':'https://i.postimg.cc/05wnd389/IMG-4388.gif','name':'6'},{'id':_0x7c5117(0x274),'url':_0x7c5117(0xf43),'name':'7'},{'id':'frame_8','url':_0x7c5117(0xa75),'name':'8'},{'id':_0x7c5117(0xc2a),'url':_0x7c5117(0x30c),'name':'9'},{'id':_0x7c5117(0xe6f),'url':'https://i.postimg.cc/XY63sTS3/IMG-4393.gif','name':'10'},{'id':_0x7c5117(0x113c),'url':'https://i.postimg.cc/Cx9vCVWH/IMG-4395.gif','name':'11'},{'id':'frame_12','url':_0x7c5117(0x111e),'name':'12'},{'id':'frame_13','url':_0x7c5117(0xfa3),'name':'13'},{'id':_0x7c5117(0x78a),'url':'https://i.postimg.cc/L4zwDhTC/IMG-4399.gif','name':'14'},{'id':_0x7c5117(0x724),'url':_0x7c5117(0x699),'name':'1'},{'id':'frame_ribbon','url':_0x7c5117(0x115c),'name':'2'},{'id':_0x7c5117(0x2f7),'url':_0x7c5117(0x14d5),'name':'3'},{'id':_0x7c5117(0x11d3),'url':'https://i.postimg.cc/Jn1DFPgY/IMG-4403.gif','name':'4'},{'id':_0x7c5117(0x3f4),'url':'https://i.postimg.cc/q7cQnDy1/IMG-4404.gif','name':'5'},{'id':_0x7c5117(0x9c7),'url':_0x7c5117(0x1273),'name':'6'},{'id':'frame_7','url':_0x7c5117(0x1185),'name':'7'},{'id':_0x7c5117(0x6f3),'url':_0x7c5117(0x49a),'name':'8'},{'id':_0x7c5117(0xc2a),'url':_0x7c5117(0xbe9),'name':'9'},{'id':_0x7c5117(0xe6f),'url':_0x7c5117(0x1cd),'name':'10'},{'id':'frame_11','url':_0x7c5117(0x480),'name':'11'},{'id':_0x7c5117(0xbf7),'url':_0x7c5117(0xd12),'name':'12'},{'id':'frame_13','url':'https://i.postimg.cc/hPX5F8Qp/IMG-4415.gif','name':'13'},{'id':'frame_14','url':_0x7c5117(0x1021),'name':'14'},{'id':_0x7c5117(0x724),'url':_0x7c5117(0x1071),'name':'1'},{'id':'frame_ribbon','url':_0x7c5117(0x88b),'name':'2'},{'id':'frame_flower','url':_0x7c5117(0x1286),'name':'3'},{'id':_0x7c5117(0x11d3),'url':_0x7c5117(0x18e),'name':'4'},{'id':_0x7c5117(0x3f4),'url':_0x7c5117(0x235),'name':'5'},{'id':_0x7c5117(0x9c7),'url':_0x7c5117(0x6c1),'name':'6'},{'id':_0x7c5117(0x274),'url':'https://i.postimg.cc/76Tj3g1B/IMG-4425.gif','name':'7'},{'id':'frame_8','url':_0x7c5117(0x385),'name':'8'},{'id':_0x7c5117(0xc2a),'url':'https://i.postimg.cc/05DLr0yj/IMG-4427.gif','name':'9'},{'id':_0x7c5117(0xe6f),'url':_0x7c5117(0xddb),'name':'10'},{'id':_0x7c5117(0x113c),'url':_0x7c5117(0x113e),'name':'11'},{'id':'frame_12','url':_0x7c5117(0x865),'name':'12'},{'id':'frame_13','url':_0x7c5117(0x1391),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x153e),'name':'14'},{'id':'frame_cat_ear','url':'https://i.postimg.cc/XNkQTHvf/IMG-5561.gif','name':'1'},{'id':'frame_ribbon','url':_0x7c5117(0x1290),'name':'2'},{'id':'frame_flower','url':_0x7c5117(0x50e),'name':'3'},{'id':_0x7c5117(0x11d3),'url':_0x7c5117(0x31e),'name':'4'},{'id':_0x7c5117(0x3f4),'url':_0x7c5117(0x49e),'name':'5'},{'id':_0x7c5117(0x9c7),'url':_0x7c5117(0x81c),'name':'6'},{'id':_0x7c5117(0x274),'url':_0x7c5117(0x9e3),'name':'7'},{'id':_0x7c5117(0x6f3),'url':_0x7c5117(0xd26),'name':'8'},{'id':_0x7c5117(0xc2a),'url':'https://i.postimg.cc/4x9tTy1D/IMG-5563.gif','name':'9'},{'id':_0x7c5117(0xe6f),'url':'https://i.postimg.cc/DZshzKv6/IMG-5576.gif','name':'10'},{'id':_0x7c5117(0x113c),'url':_0x7c5117(0x1085),'name':'11'},{'id':_0x7c5117(0xbf7),'url':_0x7c5117(0x7b2),'name':'12'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0x150c),'name':'13'},{'id':'frame_14','url':_0x7c5117(0x94f),'name':'14'},{'id':_0x7c5117(0x724),'url':'https://i.postimg.cc/CKgDNYVb/IMG-5577.gif','name':'1'},{'id':_0x7c5117(0x1063),'url':_0x7c5117(0xe9a),'name':'2'},{'id':_0x7c5117(0x2f7),'url':_0x7c5117(0xe9a),'name':'3'},{'id':'frame_tech','url':_0x7c5117(0x766),'name':'4'},{'id':'frame_5','url':_0x7c5117(0x12a5),'name':'5'},{'id':'frame_6','url':_0x7c5117(0x18c),'name':'6'},{'id':_0x7c5117(0x274),'url':_0x7c5117(0x6fd),'name':'7'},{'id':_0x7c5117(0x6f3),'url':'https://i.postimg.cc/6pLTBvDG/IMG-5721.gif','name':'8'},{'id':_0x7c5117(0xc2a),'url':_0x7c5117(0x54c),'name':'9'},{'id':_0x7c5117(0xe6f),'url':_0x7c5117(0xd62),'name':'10'},{'id':_0x7c5117(0x113c),'url':_0x7c5117(0x1360),'name':'11'},{'id':_0x7c5117(0xbf7),'url':'https://i.postimg.cc/0yd0MZ6k/IMG-5971.gif','name':'12'},{'id':'frame_13','url':'https://i.postimg.cc/1zmcp66p/IMG-5973.gif','name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0xf89),'name':'14'},{'id':_0x7c5117(0x724),'url':'https://i.postimg.cc/R0pfKYvB/IMG-5976.gif','name':'1'},{'id':_0x7c5117(0x1063),'url':_0x7c5117(0x1069),'name':'2'},{'id':_0x7c5117(0x2f7),'url':_0x7c5117(0x8ae),'name':'3'},{'id':_0x7c5117(0x11d3),'url':_0x7c5117(0xd31),'name':'4'},{'id':_0x7c5117(0x3f4),'url':_0x7c5117(0x935),'name':'5'},{'id':_0x7c5117(0x9c7),'url':_0x7c5117(0xa89),'name':'6'},{'id':'frame_7','url':_0x7c5117(0xc03),'name':'7'},{'id':_0x7c5117(0x6f3),'url':_0x7c5117(0x62c),'name':'8'},{'id':'frame_9','url':_0x7c5117(0xa67),'name':'9'},{'id':'frame_10','url':_0x7c5117(0xa01),'name':'10'},{'id':'frame_11','url':_0x7c5117(0x1510),'name':'11'},{'id':_0x7c5117(0xbf7),'url':_0x7c5117(0x77c),'name':'12'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0xbcb),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0xe3d),'name':'14'},{'id':_0x7c5117(0x724),'url':'https://i.postimg.cc/YSRRV8kn/IMG-6297.gif','name':'1'},{'id':'frame_ribbon','url':_0x7c5117(0xec6),'name':'2'},{'id':'frame_flower','url':'https://i.postimg.cc/50k390X8/IMG-6376.gif','name':'3'},{'id':_0x7c5117(0x11d3),'url':_0x7c5117(0x10b9),'name':'4'},{'id':'frame_5','url':_0x7c5117(0x64a),'name':'5'},{'id':_0x7c5117(0x9c7),'url':_0x7c5117(0x96c),'name':'6'},{'id':_0x7c5117(0x274),'url':_0x7c5117(0x311),'name':'7'},{'id':_0x7c5117(0x6f3),'url':'https://i.postimg.cc/g2PfbSFm/IMG-6556.gif','name':'8'},{'id':'frame_9','url':_0x7c5117(0x7f1),'name':'9'},{'id':'frame_10','url':_0x7c5117(0xee8),'name':'10'},{'id':_0x7c5117(0x113c),'url':_0x7c5117(0xa87),'name':'11'},{'id':_0x7c5117(0xbf7),'url':_0x7c5117(0xf7e),'name':'12'},{'id':_0x7c5117(0x434),'url':'https://i.postimg.cc/G3y73Fj2/IMG-6563.gif','name':'13'},{'id':_0x7c5117(0x78a),'url':'https://i.postimg.cc/TYvkKKkc/IMG-6565.gif','name':'14'},{'id':_0x7c5117(0x724),'url':_0x7c5117(0x199),'name':'1'},{'id':_0x7c5117(0x1063),'url':_0x7c5117(0x775),'name':'2'},{'id':'frame_flower','url':_0x7c5117(0x152c),'name':'3'},{'id':_0x7c5117(0x11d3),'url':_0x7c5117(0xb0a),'name':'4'},{'id':'frame_5','url':_0x7c5117(0x1c1),'name':'5'},{'id':_0x7c5117(0x9c7),'url':_0x7c5117(0x1525),'name':'6'},{'id':_0x7c5117(0x274),'url':'https://i.postimg.cc/YqxxjbLp/IMG-6572.gif','name':'7'},{'id':_0x7c5117(0x6f3),'url':_0x7c5117(0x4b3),'name':'8'},{'id':_0x7c5117(0xc2a),'url':_0x7c5117(0xbac),'name':'9'},{'id':'frame_10','url':_0x7c5117(0xc02),'name':'10'},{'id':_0x7c5117(0x113c),'url':'https://i.postimg.cc/T3NvqJCZ/IMG-6851.gif','name':'11'},{'id':'frame_12','url':_0x7c5117(0x118b),'name':'12'},{'id':'frame_13','url':'https://i.postimg.cc/VkV2bLNw/IMG-6853.gif','name':'13'},{'id':_0x7c5117(0x78a),'url':'https://i.postimg.cc/gJ95NSRB/IMG-6854.gif','name':'14'},{'id':_0x7c5117(0x724),'url':_0x7c5117(0xeb6),'name':'1'},{'id':'frame_ribbon','url':_0x7c5117(0xf71),'name':'2'},{'id':_0x7c5117(0x2f7),'url':_0x7c5117(0xc80),'name':'3'},{'id':_0x7c5117(0x11d3),'url':_0x7c5117(0x1104),'name':'4'},{'id':_0x7c5117(0x3f4),'url':_0x7c5117(0x12a9),'name':'5'},{'id':_0x7c5117(0x9c7),'url':_0x7c5117(0x1166),'name':'6'},{'id':_0x7c5117(0x274),'url':_0x7c5117(0x1394),'name':'7'},{'id':'frame_8','url':_0x7c5117(0xe01),'name':'8'},{'id':_0x7c5117(0xc2a),'url':_0x7c5117(0x207),'name':'9'},{'id':'frame_10','url':_0x7c5117(0x10a6),'name':'10'},{'id':_0x7c5117(0x113c),'url':_0x7c5117(0x11e1),'name':'11'},{'id':_0x7c5117(0xbf7),'url':'https://i.postimg.cc/Wbr0JSDD/IMG-5316.gif','name':'12'},{'id':_0x7c5117(0x434),'url':'https://i.postimg.cc/tgR6wjBP/IMG-5570.gif','name':'13'},{'id':'frame_14','url':'https://i.postimg.cc/d0WCKxff/IMG-6932.gif','name':'14'},{'id':_0x7c5117(0x113c),'url':_0x7c5117(0xf26),'name':'11'},{'id':'frame_12','url':'https://i.postimg.cc/nrm9BcL8/IMG-6941.gif','name':'12'},{'id':'frame_13','url':_0x7c5117(0x11bb),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0xfe1),'name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0x952),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x114a),'name':'14'},{'id':'frame_13','url':_0x7c5117(0x42f),'name':'13'},{'id':'frame_14','url':_0x7c5117(0x856),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x114d),'name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0x13b2),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x12ff),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x14b6),'name':'14'},{'id':_0x7c5117(0xbf7),'url':_0x7c5117(0x1363),'name':'12'},{'id':'frame_13','url':_0x7c5117(0xfed),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0xafd),'name':'14'},{'id':_0x7c5117(0x434),'url':'https://i.postimg.cc/vHDNGfT2/35ac7f372v588bf48d4f659077196b85.gif','name':'13'},{'id':_0x7c5117(0x78a),'url':'https://i.postimg.cc/KvVsjjgG/3c3aa5219s18b90187ef1f54b3db7ba8.gif','name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0x1156),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x550),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x111d),'name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0xd23),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0xcc8),'name':'14'},{'id':_0x7c5117(0x78a),'url':'https://i.postimg.cc/CLNkrQSW/IMG-6925.gif','name':'14'},{'id':_0x7c5117(0x434),'url':'https://i.postimg.cc/y8p9s3Jj/IMG-6919.gif','name':'13'},{'id':'frame_14','url':_0x7c5117(0x43d),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x8f5),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x87d),'name':'14'},{'id':'frame_13','url':'https://i.postimg.cc/Z5nrCyS5/IMG-7006.gif','name':'13'},{'id':_0x7c5117(0x78a),'url':'https://i.postimg.cc/mDfMXXFP/IMG-7007.gif','name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0xcec),'name':'14'},{'id':'frame_13','url':_0x7c5117(0x251),'name':'13'},{'id':_0x7c5117(0x78a),'url':'https://i.postimg.cc/RhGH0vpt/IMG-7010.gif','name':'14'},{'id':'frame_14','url':_0x7c5117(0x24b),'name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0x10b2),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x896),'name':'14'},{'id':'frame_14','url':'https://i.postimg.cc/rwDr8X1d/IMG-7015.gif','name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0xeb8),'name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0x670),'name':'13'},{'id':'frame_14','url':'https://i.postimg.cc/mZ9hgH3J/IMG-7019.gif','name':'14'},{'id':'frame_14','url':_0x7c5117(0x95f),'name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0xb9d),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x925),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x926),'name':'14'},{'id':_0x7c5117(0x78a),'url':'https://i.postimg.cc/gj3Tmqz5/mmexport1751030241029.gif','name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0x185),'name':'13'},{'id':'frame_14','url':_0x7c5117(0x3e8),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x1056),'name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0x1340),'name':'13'},{'id':_0x7c5117(0x78a),'url':'https://i.postimg.cc/8kHCQwbQ/mmexport1751020645824.gif','name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x145e),'name':'14'},{'id':_0x7c5117(0x78a),'url':'https://i.postimg.cc/JnwFp3Kx/mmexport1751031208329.gif','name':'14'},{'id':'frame_13','url':_0x7c5117(0x3d8),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0xd61),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x666),'name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0x7d8),'name':'13'},{'id':'frame_14','url':_0x7c5117(0xfdf),'name':'14'},{'id':_0x7c5117(0x78a),'url':'https://i.postimg.cc/4NCPsp5d/mmexport1751034427637.gif','name':'14'},{'id':'frame_14','url':_0x7c5117(0x4c3),'name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0x13da),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0xdb0),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x6de),'name':'14'},{'id':'frame_13','url':_0x7c5117(0x894),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0xe8f),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x4da),'name':'14'},{'id':'frame_14','url':'https://i.postimg.cc/xjpN4swz/IMG-7240.gif','name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0x359),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x73d),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x342),'name':'14'},{'id':_0x7c5117(0x434),'url':'https://i.postimg.cc/8PsK20jQ/IMG-7236.gif','name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x1354),'name':'14'},{'id':'frame_14','url':_0x7c5117(0x14df),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0xccc),'name':'14'},{'id':'frame_13','url':'https://i.postimg.cc/k5yv6QBv/IMG-7232.gif','name':'13'},{'id':_0x7c5117(0x78a),'url':'https://i.postimg.cc/yx2m4nbs/IMG-7231.gif','name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x6a6),'name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0x839),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x7e5),'name':'14'},{'id':_0x7c5117(0x78a),'url':'https://i.postimg.cc/VkKjzYTK/IMB-f4kk-CT.gif','name':'14'},{'id':_0x7c5117(0x78a),'url':'https://i.postimg.cc/B6KD52vz/IMG-7096.gif','name':'14'},{'id':'frame_13','url':'https://i.postimg.cc/9XPwWmwy/IMB-Kf7um-P.gif','name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x1315),'name':'14'},{'id':'frame_14','url':_0x7c5117(0x1215),'name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0x11eb),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0xead),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0xbf0),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x6a4),'name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0x13cb),'name':'13'},{'id':'frame_14','url':_0x7c5117(0x849),'name':'14'},{'id':_0x7c5117(0x78a),'url':'https://i.postimg.cc/jS8tc9wW/IMG-7083.gif','name':'14'},{'id':'frame_13','url':_0x7c5117(0x47f),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x13b3),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x411),'name':'14'},{'id':'frame_14','url':_0x7c5117(0x680),'name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0x20d),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x3ae),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x6e9),'name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0x478),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0xa3c),'name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x5cb),'name':'14'},{'id':'frame_14','url':_0x7c5117(0xef1),'name':'14'},{'id':_0x7c5117(0x434),'url':_0x7c5117(0xe74),'name':'13'},{'id':_0x7c5117(0x78a),'url':'https://i.postimg.cc/HLKvs0Kv/IMG-7109.gif','name':'14'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0x14c3),'name':'14'},{'id':'frame_13','url':_0x7c5117(0xe40),'name':'13'},{'id':_0x7c5117(0x78a),'url':_0x7c5117(0xc9a),'name':'14'},{'id':'frame_14','url':_0x7c5117(0x9e6),'name':'14'}];let _0x8f0871={'chats':{},'activeChatId':null,'globalSettings':{},'apiConfig':{},'userStickers':[],'worldBooks':[],'personaPresets':[],'qzoneSettings':{},'activeAlbumId':null,'cache':{'songs':new Map(),'lyrics':new Map()},'ttsCache':new Map()},_0x212d1b={'isActive':![],'gameMode':null,'chatId':null,'players':[],'currentDay':0x1,'currentPhase':_0x7c5117(0x5a6),'nightActions':{},'gameLog':[],'discussionLog':[],'voteResults':{},'electionInfo':{'candidates':[],'votes':{}},'sheriffId':null,'lastFailedAction':null},_0x316fd1=0x0;const _0x173526=0xf;let _0x4a9d1d=0x0;const _0x3cee2e=0xa;let _0x4b4cc4=[],_0x46bc8b={'isActive':![],'activeChatId':null,'isPlaying':![],'playlist':[],'currentIndex':-0x1,'playMode':_0x7c5117(0xc75),'totalElapsedTime':0x0,'timerId':null,'parsedLyrics':[],'currentLyricIndex':-0x1},_0x5cbe86={'isOpen':![],'activePostId':null,'panelEl':null,'gridEl':null};const _0x447ac1=document[_0x7c5117(0xfa0)](_0x7c5117(0xcd8));let _0x49d8a7=null,_0x2903d2=![],_0x45e6c2=0x0,_0x528906=null,_0x155849=![],_0x41ab64=_0x7c5117(0x8ab),_0x552199=new Set(),_0x534a62=null,_0x19f3af=![],_0x4fd9a7=null,_0x4722d2=null,_0x4ed3d1=![],_0x50a527=![],_0x5f661d=![],_0x2f5bce=![],_0x22bfcf=[],_0x57844b=null,_0x143fbf=null,_0x50cb3f={},_0x5f3517=null,_0xfd9ebf=null,_0x3aefdb=null,_0x5b0443=null,_0x12acaa=null,_0x3028db=null,_0x24baf6=null,_0x59a44d=[],_0x5061b6=null,_0x1ee020=null,_0x417f90=new Set(),_0x5744d8=null,_0x2108d3=null,_0x52f18f=null,_0x24396c={'isOpen':![],'photos':[],'currentIndex':-0x1},_0xab67da=0x0,_0x2625e2=![],_0x88cc5e=new Set(),_0x25915b=null;const _0x1a2fc1=_0x7c5117(0x1135),_0x2c882e=_0x7c5117(0xdd0),_0x29d47b=_0x7c5117(0x407),_0x3503aa=_0x7c5117(0x305);let _0x13603d,_0x37f63f={};const _0x453327=_0x7c5117(0x2e8);let _0x1dbbbb={},_0x44002c={},_0x4dceb0=null;const _0x1043ad={'qq':_0x7c5117(0xdcd),'world-book':'https://i.postimg.cc/HWf1JKzn/IMG-6435.jpg','wallpaper':_0x7c5117(0xa96),'renderer':_0x7c5117(0x996),'api-settings':'https://i.postimg.cc/MK8rJ8t7/IMG-6438.jpg','font':_0x7c5117(0x10cd),'char-phone':_0x7c5117(0xa07),'douban':'https://i.postimg.cc/Pq2xJN1g/IMG-7301.jpg','preset':_0x7c5117(0x125f),'tutorial':_0x7c5117(0x520),'werewolf':_0x7c5117(0xcb8),'x':_0x7c5117(0xd50)},_0x410e99={'qq':_0x7c5117(0xdcd),'album':_0x7c5117(0x916),'browser':_0x7c5117(0xb83),'taobao':_0x7c5117(0x1434),'memo':_0x7c5117(0x46d),'diary':_0x7c5117(0xf47),'amap':_0x7c5117(0x186),'usage':'https://i.postimg.cc/WbF8kzz9/IMG-7282.jpg','music':_0x7c5117(0x252),'ephone':_0x7c5117(0xa07)};let _0x2dc32a=null;const _0x4a5ebd=/(^https:\/\/i\.postimg\.cc\/.+|^https:\/\/files\.catbox\.moe\/.+|^https?:\/\/sharkpan\.xyz\/.+|^data:image|\.(png|jpg|jpeg|gif|webp)\?.*$|\.(png|jpg|jpeg|gif|webp)$)/i;let _0x3d7932=0x0,_0x396d53=0x1,_0x79773f={'hasShown40':![],'hasShown20':![],'hasShown10':![]},_0x4f04d1;const _0x323302=document['createElement'](_0x7c5117(0x63b));_0x323302['id']=_0x7c5117(0x422),document['head'][_0x7c5117(0x1155)](_0x323302);const _0x171bab=document[_0x7c5117(0xfa0)]('custom-modal-overlay'),_0x3a8c9f=document[_0x7c5117(0xfa0)](_0x7c5117(0xc90)),_0x26326b=document[_0x7c5117(0xfa0)](_0x7c5117(0x756)),_0x4eb0cc=document[_0x7c5117(0xfa0)](_0x7c5117(0xabd)),_0x3f9e04=document[_0x7c5117(0xfa0)](_0x7c5117(0x1377));let _0x32fd31;function _0x39a198(){const _0x3a4a58=_0x7c5117;_0x171bab[_0x3a4a58(0x128f)][_0x3a4a58(0x1327)](_0x3a4a58(0xdcc));}function _0x117f1e(){const _0x3fbc71=_0x7c5117;_0x171bab[_0x3fbc71(0x128f)][_0x3fbc71(0x443)]('visible'),_0x4eb0cc['classList']['remove'](_0x3fbc71(0x611));if(_0x32fd31)_0x32fd31(null);}function _0x8a5503(_0x5d12bc){const _0x41570f=_0x7c5117,_0x392982=document['getElementById']('global-lyrics-bar'),_0xccde0c=_0x5d12bc[_0x41570f(0x12d7)][_0x41570f(0xb7d)]||{'vertical':'top','horizontal':_0x41570f(0x1117),'offset':0xa};_0x392982[_0x41570f(0x63b)]['top']=_0x41570f(0x1258),_0x392982[_0x41570f(0x63b)][_0x41570f(0xb59)]=_0x41570f(0x1258),_0x392982['style'][_0x41570f(0xcb1)]=_0x41570f(0x1258),_0x392982[_0x41570f(0x63b)][_0x41570f(0x17c)]='auto',_0x392982['style'][_0x41570f(0x1268)]=_0x41570f(0x11b5);_0xccde0c[_0x41570f(0xa9d)]===_0x41570f(0x8ce)?_0x392982['style'][_0x41570f(0x8ce)]=_0xccde0c[_0x41570f(0x315)]+'px':_0x392982[_0x41570f(0x63b)]['bottom']=_0xccde0c[_0x41570f(0x315)]+'px';switch(_0xccde0c[_0x41570f(0x10e2)]){case'left':_0x392982[_0x41570f(0x63b)][_0x41570f(0xcb1)]=_0x41570f(0x54b);break;case _0x41570f(0x17c):_0x392982['style'][_0x41570f(0x17c)]='15px';break;case'center':default:_0x392982[_0x41570f(0x63b)]['left']=_0x41570f(0x12e2),_0x392982[_0x41570f(0x63b)][_0x41570f(0x1268)]=_0x41570f(0xccb);break;}}async function _0x572acd(_0x30a982){const _0x37e48e=_0x7c5117,_0x5b2dfb=_0x30a982[_0x37e48e(0x10c2)]['files'][0x0];if(!_0x5b2dfb)return;const _0x52ef08=await new Promise(_0x411a76=>{const _0xa85608=_0x37e48e,_0x5668b5=new FileReader();_0x5668b5[_0xa85608(0x7c6)]=()=>_0x411a76(_0x5668b5['result']),_0x5668b5[_0xa85608(0x101e)](_0x5b2dfb);});await _0x4abd86(_0x37e48e(0x3e1),_0x37e48e(0xf5b));try{const _0x379395=await _0x132704(_0x52ef08);if(!_0x379395)throw new Error(_0x37e48e(0x8fa));const _0x298ed1=_0x8f0871['chats'][_0x8f0871[_0x37e48e(0xac8)]];!_0x298ed1[_0x37e48e(0x12d7)][_0x37e48e(0x77a)]&&(_0x298ed1[_0x37e48e(0x12d7)][_0x37e48e(0x77a)]=[]),_0x298ed1[_0x37e48e(0x12d7)][_0x37e48e(0x77a)][_0x37e48e(0x481)]({'name':_0x379395,'url':_0x52ef08}),await _0x372b85[_0x37e48e(0x1260)]['put'](_0x298ed1),_0x37ee08(),await _0x4abd86(_0x37e48e(0x3f0),_0x37e48e(0xd24)+_0x379395+'”');}catch(_0x567969){console[_0x37e48e(0x52b)](_0x37e48e(0xeaf),_0x567969),await _0x4abd86(_0x37e48e(0x457),_0x37e48e(0xbd8)+_0x567969[_0x37e48e(0x790)]);}finally{_0x30a982[_0x37e48e(0x10c2)][_0x37e48e(0x4f6)]=null;}}async function _0x2f1843(_0x53f491){const _0xc1cb18=_0x7c5117,_0x529590=_0x53f491[_0xc1cb18(0x10c2)][_0xc1cb18(0xca1)][0x0];if(!_0x529590)return;const _0x571258=await new Promise(_0x51f7ed=>{const _0x3df1e1=_0xc1cb18,_0x27a407=new FileReader();_0x27a407[_0x3df1e1(0x7c6)]=()=>_0x51f7ed(_0x27a407['result']),_0x27a407[_0x3df1e1(0x101e)](_0x529590);});await _0x4abd86('请稍候...',_0xc1cb18(0x14bd));try{const _0x1b43f4=await _0x132704(_0x571258);if(!_0x1b43f4)throw new Error('AI未能成功描述图片。');const _0x30daba=_0x8f0871['chats'][_0x8f0871[_0xc1cb18(0xac8)]];!_0x30daba['settings'][_0xc1cb18(0x1576)]&&(_0x30daba[_0xc1cb18(0x12d7)][_0xc1cb18(0x1576)]=[]),_0x30daba[_0xc1cb18(0x12d7)][_0xc1cb18(0x1576)][_0xc1cb18(0x481)]({'name':_0x1b43f4,'url':_0x571258}),await _0x372b85[_0xc1cb18(0x1260)][_0xc1cb18(0x11d5)](_0x30daba),_0x51f6c4(),await _0x4abd86(_0xc1cb18(0x3f0),_0xc1cb18(0x55b)+_0x1b43f4+'”');}catch(_0x34ae32){console['error'](_0xc1cb18(0x11a0),_0x34ae32),await _0x4abd86(_0xc1cb18(0x457),_0xc1cb18(0xbd8)+_0x34ae32[_0xc1cb18(0x790)]);}finally{_0x53f491[_0xc1cb18(0x10c2)][_0xc1cb18(0x4f6)]=null;}}async function _0x132704(_0x4926fd){const _0x25d737=_0x7c5117,_0x357526=_0x8f0871['apiConfig'][_0x25d737(0xb0e)]&&_0x8f0871[_0x25d737(0xa78)][_0x25d737(0x1539)]&&_0x8f0871[_0x25d737(0xa78)][_0x25d737(0x1020)],{proxyUrl:_0x176ebd,apiKey:_0x131231,model:_0x40066e}=_0x357526?{'proxyUrl':_0x8f0871[_0x25d737(0xa78)]['secondaryProxyUrl'],'apiKey':_0x8f0871['apiConfig']['secondaryApiKey'],'model':_0x8f0871[_0x25d737(0xa78)][_0x25d737(0x1020)]}:_0x8f0871[_0x25d737(0xa78)];if(!_0x176ebd||!_0x131231||!_0x40066e)throw new Error(_0x25d737(0x2ec));const _0x164ca9=_0x25d737(0x452);let _0x3286db=_0x176ebd[_0x25d737(0xf95)]('generativelanguage'),_0xdb54d3;if(_0x3286db){const _0x4e6dc2=_0x4926fd[_0x25d737(0x1232)](/^data:(.*);base64/)[0x1],_0x2dce33=_0x4926fd[_0x25d737(0x505)](',')[0x1],_0x59ffc1={'contents':[{'parts':[{'text':_0x164ca9},{'inline_data':{'mime_type':_0x4e6dc2,'data':_0x2dce33}}]}]};_0xdb54d3=await fetch(_0x176ebd+'/'+_0x40066e+_0x25d737(0x4d4)+_0x131231,{'method':_0x25d737(0xb67),'headers':{'Content-Type':'application/json'},'body':JSON[_0x25d737(0x7cc)](_0x59ffc1)});}else{const _0x4392c5={'model':_0x40066e,'messages':[{'role':_0x25d737(0xcb0),'content':[{'type':'text','text':_0x164ca9},{'type':_0x25d737(0xa58),'image_url':{'url':_0x4926fd}}]}],'max_tokens':0x32};_0xdb54d3=await fetch(_0x176ebd+_0x25d737(0x1011),{'method':'POST','headers':{'Content-Type':_0x25d737(0x4b5),'Authorization':_0x25d737(0x681)+_0x131231},'body':JSON[_0x25d737(0x7cc)](_0x4392c5)});}if(!_0xdb54d3['ok']){const _0x449c3d=await _0xdb54d3[_0x25d737(0xa2e)]();throw new Error(_0x25d737(0x395)+_0x449c3d['error'][_0x25d737(0x790)]);}const _0x468710=await _0xdb54d3[_0x25d737(0xa2e)]();let _0x33193d=_0x3286db?getGeminiResponseText(_0x468710):_0x468710[_0x25d737(0x14bc)][0x0][_0x25d737(0x790)]['content'];return _0x33193d['trim']()[_0x25d737(0x128a)](/["'“”‘’]/g,'');}async function _0xd7f0ec(_0x2335de){const _0x41d60f=_0x7c5117;if(!_0x2335de||_0x2335de[_0x41d60f(0x1364)]){console[_0x41d60f(0x7fa)]('syncCharacterNameInGroups:\x20传入的不是有效的单聊对象，已跳过同步。');return;}const _0x443124=_0x2335de['id'],_0x3f4839=_0x2335de[_0x41d60f(0x1023)],_0x459384=_0x2335de[_0x41d60f(0x93e)];console['log'](_0x41d60f(0xe1c)+_0x443124+_0x41d60f(0x436));for(const _0x19b5e2 in _0x8f0871[_0x41d60f(0x1260)]){const _0x5ce303=_0x8f0871['chats'][_0x19b5e2];if(_0x5ce303[_0x41d60f(0x1364)]&&_0x5ce303[_0x41d60f(0x2cf)]){const _0x256305=_0x5ce303[_0x41d60f(0x2cf)][_0x41d60f(0x7ed)](_0x39f067=>_0x39f067['id']===_0x443124);if(_0x256305){let _0x1e1632=![];_0x256305[_0x41d60f(0x5c9)]!==_0x3f4839&&(_0x256305[_0x41d60f(0x5c9)]=_0x3f4839,_0x1e1632=!![]),_0x256305[_0x41d60f(0x93e)]!==_0x459384&&(_0x256305[_0x41d60f(0x93e)]=_0x459384,_0x1e1632=!![]),_0x1e1632&&(await _0x372b85[_0x41d60f(0x1260)][_0x41d60f(0x11d5)](_0x5ce303),console[_0x41d60f(0x4ee)]('成功将群聊\x20\x22'+_0x5ce303[_0x41d60f(0x1023)]+'\x22\x20中的成员信息更新'));}}}}async function _0x3a6dc8(_0x68ed58){const _0x3b23b7=_0x7c5117;if(!_0x68ed58||_0x68ed58[_0x3b23b7(0x1364)]){console[_0x3b23b7(0x7fa)](_0x3b23b7(0xed9));return;}const _0x418c3a=_0x68ed58['id'],_0x248fdf=_0x68ed58[_0x3b23b7(0x12d7)][_0x3b23b7(0xce8)];console[_0x3b23b7(0x4ee)](_0x3b23b7(0xe1c)+_0x418c3a+'\x20同步所有群聊内的头像...');for(const _0x327f40 of Object['values'](_0x8f0871[_0x3b23b7(0x1260)])){if(_0x327f40[_0x3b23b7(0x1364)]&&_0x327f40['members']){const _0x262e34=_0x327f40[_0x3b23b7(0x2cf)]['find'](_0x105646=>_0x105646['id']===_0x418c3a);_0x262e34&&_0x262e34[_0x3b23b7(0xc61)]!==_0x248fdf&&(_0x262e34[_0x3b23b7(0xc61)]=_0x248fdf,await _0x372b85[_0x3b23b7(0x1260)]['put'](_0x327f40),console[_0x3b23b7(0x4ee)](_0x3b23b7(0xcbf)+_0x418c3a+_0x3b23b7(0x11a5)+_0x327f40['name']+'\x22'));}}}function _0x185e1d(_0x5740c9,_0x3e2413){const _0x3edfb0=_0x7c5117;if(!_0x5740c9||!_0x5740c9[_0x3edfb0(0x1364)]||!_0x3e2413)return _0x3e2413;const _0x3226f9=_0x8f0871[_0x3edfb0(0x9dd)][_0x3edfb0(0xff8)]||_0x3edfb0(0x8d4);if(_0x3e2413===_0x3226f9)return _0x5740c9[_0x3edfb0(0x12d7)]['myNickname']||'我';const _0x5156ff=_0x5740c9[_0x3edfb0(0x2cf)][_0x3edfb0(0x7ed)](_0x7fb6f8=>_0x7fb6f8[_0x3edfb0(0x93e)]===_0x3e2413);return _0x5156ff?_0x5156ff[_0x3edfb0(0x5c9)]:_0x3e2413;}function _0x5acd2e(_0x3fbe2b){const _0x4c5bfe=_0x7c5117;document['querySelectorAll'](_0x4c5bfe(0x12c9))['forEach'](_0x4fc2f5=>{const _0x39bc05=_0x4c5bfe;_0x4fc2f5[_0x39bc05(0x128f)][_0x39bc05(0xb80)](_0x39bc05(0xa37),_0x4fc2f5[_0x39bc05(0x8df)][_0x39bc05(0x6b2)]===_0x3fbe2b);}),document[_0x4c5bfe(0x2a1)](_0x4c5bfe(0x9d5))[_0x4c5bfe(0x458)](_0x4925d1=>{const _0x41ec8a=_0x4c5bfe;_0x4925d1[_0x41ec8a(0x128f)]['toggle'](_0x41ec8a(0xa37),_0x4925d1[_0x41ec8a(0x8df)][_0x41ec8a(0x6b2)]===_0x3fbe2b);});}function _0xc4efbd(_0x40d0e3){const _0x5c113f=_0x7c5117;if(!_0x40d0e3)return'';if(_0x8f0871[_0x5c113f(0x9dd)]&&_0x40d0e3===_0x8f0871['qzoneSettings'][_0x5c113f(0xff8)])return _0x8f0871[_0x5c113f(0x9dd)]['nickname'];let _0x27ebff=Object[_0x5c113f(0x142f)](_0x8f0871['chats'])[_0x5c113f(0x7ed)](_0x4433a6=>!_0x4433a6[_0x5c113f(0x1364)]&&_0x4433a6[_0x5c113f(0x93e)]===_0x40d0e3);if(_0x27ebff)return _0x27ebff['name'];_0x27ebff=Object['values'](_0x8f0871['chats'])[_0x5c113f(0x7ed)](_0x27b307=>!_0x27b307[_0x5c113f(0x1364)]&&(_0x27b307[_0x5c113f(0xba7)]&&_0x27b307[_0x5c113f(0xba7)][_0x5c113f(0xf95)](_0x40d0e3)));if(_0x27ebff)return _0x27ebff[_0x5c113f(0x1023)];return _0x40d0e3;}function _0x92c3c3(_0x1d7a31,_0x421f53=null){const _0x5b3ec1=_0x7c5117;if(!_0x1d7a31||typeof _0x1d7a31!==_0x5b3ec1(0x857)||!_0x1d7a31['includes'](_0x5b3ec1(0x33c)))return _0x1d7a31;return _0x1d7a31['replace'](/@\[\[([^\]]+)\]\]/g,(_0x46bac7,_0x5080dd)=>{const _0x5659f8=_0x5b3ec1,_0x45acd8=_0x5080dd[_0x5659f8(0xa06)]();let _0xb03ed8;return _0x421f53&&_0x421f53['isGroup']?_0xb03ed8=_0x185e1d(_0x421f53,_0x45acd8):_0xb03ed8=_0xc4efbd(_0x45acd8),'@'+_0xb03ed8;});}function _0x3f65ed(_0x151c77,_0x598293,_0x45ca80={}){return new Promise(_0x50b392=>{const _0x2693f4=_0x5817;_0x32fd31=_0x50b392,_0x3a8c9f[_0x2693f4(0xc62)]=_0x151c77,_0x26326b['innerHTML']='<p>'+_0x598293+_0x2693f4(0x129d);const _0x218100=document[_0x2693f4(0xfa0)](_0x2693f4(0xabd)),_0x5b813b=document[_0x2693f4(0xfa0)](_0x2693f4(0x1377));_0x5b813b[_0x2693f4(0x63b)][_0x2693f4(0x1248)]=_0x2693f4(0x127c),_0x218100[_0x2693f4(0xc62)]=_0x45ca80['confirmText']||'确定',_0x5b813b['textContent']=_0x45ca80[_0x2693f4(0x11f4)]||'取消',_0x45ca80[_0x2693f4(0x1386)]?_0x218100['classList'][_0x2693f4(0x1327)](_0x45ca80[_0x2693f4(0x1386)]):_0x218100[_0x2693f4(0x128f)][_0x2693f4(0x443)](_0x2693f4(0x611)),_0x218100[_0x2693f4(0x9f0)]=()=>{_0x50b392(!![]),_0x117f1e();},_0x5b813b[_0x2693f4(0x9f0)]=()=>{_0x50b392(![]),_0x117f1e();},_0x39a198();});}function _0x223506(_0x41f3f5='📥\x20图片下载中...',_0x4d937c=_0x7c5117(0xcff)){const _0x244bcd=_0x7c5117,_0x2a1404=document[_0x244bcd(0xb4e)](_0x244bcd(0xd53));_0x2a1404[_0x244bcd(0xc62)]=_0x41f3f5,_0x2a1404[_0x244bcd(0x63b)][_0x244bcd(0x283)]=_0x244bcd(0xcf2)+(_0x4d937c===_0x244bcd(0xcff)?_0x244bcd(0x450):_0x244bcd(0xd11))+_0x244bcd(0x1d6),document[_0x244bcd(0x1122)][_0x244bcd(0x1155)](_0x2a1404),setTimeout(()=>{const _0x6df1ab=_0x244bcd;_0x2a1404[_0x6df1ab(0x63b)][_0x6df1ab(0xe7b)]='1',_0x2a1404[_0x6df1ab(0x63b)]['transform']=_0x6df1ab(0x133b);},0xa),setTimeout(()=>{const _0x413fbd=_0x244bcd;_0x2a1404[_0x413fbd(0x63b)][_0x413fbd(0xe7b)]='0',_0x2a1404[_0x413fbd(0x63b)][_0x413fbd(0x1268)]=_0x413fbd(0xe8a),setTimeout(()=>{const _0x1d3af4=_0x413fbd;_0x2a1404[_0x1d3af4(0x443)]();},0x12c);},0x7d0);}function _0x1c56b7(_0x5f048a){const _0x4eeed7=_0x7c5117;let _0x5a7037=(_0x5f048a||'NAI_Image')[_0x4eeed7(0x128a)](/[^a-zA-Z0-9\u4e00-\u9fa5\s]/g,'_')[_0x4eeed7(0x128a)](/\s+/g,'_')[_0x4eeed7(0x9fe)](0x0,0x1e);const _0x42ef9a=new Date()[_0x4eeed7(0x23b)]()[_0x4eeed7(0x128a)](/[-:]/g,'')[_0x4eeed7(0x128a)]('T','_')[_0x4eeed7(0x505)]('.')[0x0];return _0x5a7037+'_'+_0x42ef9a+'.png';}function _0x40fcec(_0x4e338b,_0x2fa5c1){const _0x50ff19=_0x7c5117;try{const _0x4a50ee=_0x1c56b7(_0x2fa5c1),_0x5d5d3f=document[_0x50ff19(0xb4e)]('a');_0x5d5d3f[_0x50ff19(0x5e9)]=_0x4e338b,_0x5d5d3f[_0x50ff19(0xb9e)]=_0x4a50ee,_0x5d5d3f[_0x50ff19(0x63b)][_0x50ff19(0x1248)]=_0x50ff19(0x11b5),document[_0x50ff19(0x1122)][_0x50ff19(0x1155)](_0x5d5d3f),_0x5d5d3f['click'](),setTimeout(()=>{const _0x34e3fb=_0x50ff19;document[_0x34e3fb(0x1122)]['removeChild'](_0x5d5d3f);},0x64),_0x223506('📥\x20图片下载中...');}catch(_0x489590){console[_0x50ff19(0x52b)](_0x50ff19(0x487),_0x489590),_0x223506('下载失败，请重试',_0x50ff19(0x52b));}}function _0x4abd86(_0x34d49d,_0x4d0077){return new Promise(_0x52bb3a=>{const _0x478325=_0x5817;_0x32fd31=_0x52bb3a,_0x3a8c9f[_0x478325(0xc62)]=_0x34d49d,_0x26326b[_0x478325(0x1331)]='<p\x20style=\x22text-align:\x20left;\x20white-space:\x20pre-wrap;\x22>'+_0x4d0077+_0x478325(0x129d);const _0x1fb444=document[_0x478325(0xfa0)](_0x478325(0xabd)),_0x9b804a=document[_0x478325(0xfa0)]('custom-modal-cancel');_0x9b804a['style']['display']=_0x478325(0x11b5),_0x1fb444[_0x478325(0xc62)]='好的',_0x1fb444[_0x478325(0x9f0)]=()=>{const _0x2f7961=_0x478325;_0x9b804a['style'][_0x2f7961(0x1248)]=_0x2f7961(0x127c),_0x1fb444[_0x2f7961(0xc62)]='确定',_0x52bb3a(!![]),_0x117f1e();},_0x39a198();});}async function _0x324dd6(_0x5cf621,_0x1f3e52=_0x7c5117(0xb98)){const _0x323596=_0x7c5117;if(!_0x5cf621){await _0x4abd86(_0x323596(0xa09),_0x323596(0xed1));return;}try{await navigator[_0x323596(0x216)][_0x323596(0x5cf)](_0x5cf621),await _0x4abd86(_0x323596(0xc68),_0x1f3e52);}catch(_0x291f6){console['error'](_0x323596(0x7a1),_0x291f6),await _0x4abd86('复制失败',_0x323596(0x543));}}function _0x131a69(_0x3af114,_0x2d1c4d,_0x313e42='',_0x1ca1ab='text',_0x30d731=''){return new Promise(_0x42fcff=>{const _0x4c4052=_0x5817;_0x32fd31=_0x42fcff,_0x3a8c9f[_0x4c4052(0xc62)]=_0x3af114;const _0x547399=_0x4c4052(0x11fb),_0x5dd3bc=_0x1ca1ab==='textarea'?_0x4c4052(0xf38)+_0x547399+'\x22\x20placeholder=\x22'+_0x2d1c4d+'\x22\x20rows=\x224\x22\x20style=\x22width:\x20100%;\x20padding:\x208px;\x20border-radius:\x206px;\x20border:\x201px\x20solid\x20#ccc;\x20font-size:\x2016px;\x20box-sizing:\x20border-box;\x20resize:\x20vertical;\x22>'+_0x313e42+_0x4c4052(0xc6f):_0x4c4052(0x11ad)+_0x1ca1ab+_0x4c4052(0xd01)+_0x547399+_0x4c4052(0x128e)+_0x2d1c4d+_0x4c4052(0x2a3)+_0x313e42+'\x22>';_0x26326b[_0x4c4052(0x1331)]=_0x30d731+_0x5dd3bc;const _0x1b9a34=document[_0x4c4052(0xfa0)](_0x547399);_0x26326b['querySelectorAll'](_0x4c4052(0xffc))[_0x4c4052(0x458)](_0x57d16f=>{const _0x5c21b5=_0x4c4052;_0x57d16f[_0x5c21b5(0x7b8)]('click',()=>{const _0x29ea6f=_0x5c21b5,_0x34daaf=_0x57d16f['dataset'][_0x29ea6f(0x71e)];if(_0x34daaf)try{const _0x4efc9d=JSON[_0x29ea6f(0x4a0)](_0x34daaf);_0x1b9a34[_0x29ea6f(0x4f6)]=JSON['stringify'](_0x4efc9d,null,0x2),_0x1b9a34['focus']();}catch(_0x130871){console[_0x29ea6f(0x52b)](_0x29ea6f(0xbbc),_0x130871);}});});const _0x1a837f=document[_0x4c4052(0xfa0)](_0x4c4052(0xabd)),_0x13f18c=document['getElementById']('custom-modal-cancel');_0x1a837f[_0x4c4052(0x9f0)]=()=>{_0x42fcff(_0x1b9a34['value']),_0x117f1e();},_0x13f18c[_0x4c4052(0x9f0)]=()=>{_0x42fcff(null),_0x117f1e();},_0x39a198(),setTimeout(()=>_0x1b9a34[_0x4c4052(0x10c7)](),0x64);});}function _0x2aedfc(_0x4dbc15,_0x54ea1c){return new Promise(_0xf990b5=>{const _0x428377=_0x5817,_0x404674=document['getElementById']('custom-modal-overlay'),_0x41f1e9=document[_0x428377(0xfa0)](_0x428377(0xc90)),_0x110ba2=document['getElementById'](_0x428377(0x756)),_0x229c6f=document['querySelector'](_0x428377(0x38d));_0x41f1e9[_0x428377(0xc62)]=_0x4dbc15,_0x110ba2[_0x428377(0x1331)]='',_0x229c6f[_0x428377(0x1331)]='',_0x229c6f[_0x428377(0x63b)][_0x428377(0x1446)]=_0x428377(0x1575),_0x54ea1c[_0x428377(0x458)](_0x4447a6=>{const _0x2d65ed=_0x428377,_0x920144=document[_0x2d65ed(0xb4e)]('button');_0x920144[_0x2d65ed(0xc62)]=_0x4447a6[_0x2d65ed(0xda3)],_0x920144[_0x2d65ed(0x9f0)]=()=>{const _0x1f636d=_0x2d65ed;_0x404674[_0x1f636d(0x128f)][_0x1f636d(0x443)](_0x1f636d(0xdcc)),_0xf990b5(_0x4447a6[_0x1f636d(0x4f6)]);},_0x229c6f[_0x2d65ed(0x1155)](_0x920144);});const _0x5dd20a=document[_0x428377(0xb4e)](_0x428377(0x1029));_0x5dd20a['textContent']='取消',_0x5dd20a[_0x428377(0x63b)][_0x428377(0xf3e)]='8px',_0x5dd20a['style'][_0x428377(0x84f)]=_0x428377(0x227),_0x5dd20a[_0x428377(0x63b)]['backgroundColor']=_0x428377(0xfa6),_0x5dd20a[_0x428377(0x9f0)]=()=>{const _0x58d2de=_0x428377;_0x404674[_0x58d2de(0x128f)][_0x58d2de(0x443)](_0x58d2de(0xdcc)),_0xf990b5(null);},_0x229c6f[_0x428377(0x1155)](_0x5dd20a),_0x404674['classList'][_0x428377(0x1327)](_0x428377(0xdcc));})['finally'](()=>{const _0x5affc3=_0x5817,_0x4a87ef=document[_0x5affc3(0xfb1)](_0x5affc3(0x38d));_0x4a87ef[_0x5affc3(0x63b)][_0x5affc3(0x1446)]=_0x5affc3(0x352),_0x4a87ef['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22custom-modal-cancel\x22>取消</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22custom-modal-confirm\x22\x20class=\x22confirm-btn\x22>确定</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',document[_0x5affc3(0xfa0)](_0x5affc3(0x1377))[_0x5affc3(0x7b8)](_0x5affc3(0xb4a),_0x117f1e);});}async function _0x591622(){const _0x52359c=_0x7c5117,_0xdffe77=await _0x2aedfc(_0x52359c(0xa9c),[{'text':_0x52359c(0x1062),'value':_0x52359c(0x13b4)},{'text':_0x52359c(0x10c3),'value':_0x52359c(0x56b)}]);if(_0xdffe77===_0x52359c(0x13b4))return new Promise(_0x14804b=>{const _0x1f4f7d=_0x52359c,_0x7b26c1=document[_0x1f4f7d(0xfa0)](_0x1f4f7d(0xc25)),_0x276d16=_0x51fad9=>{const _0x31c06a=_0x1f4f7d,_0x342f6b=_0x51fad9['target'][_0x31c06a(0xca1)][0x0];if(_0x342f6b){const _0x85e342=new FileReader();_0x85e342[_0x31c06a(0x7c6)]=_0x186fe7=>_0x14804b(_0x186fe7[_0x31c06a(0x10c2)][_0x31c06a(0x4fe)]),_0x85e342[_0x31c06a(0x14b0)]=()=>_0x14804b(''),_0x85e342[_0x31c06a(0x11fd)](_0x342f6b);}else _0x14804b(null);_0x7b26c1['removeEventListener'](_0x31c06a(0xca8),_0x276d16),_0x7b26c1[_0x31c06a(0x4f6)]='';};_0x7b26c1[_0x1f4f7d(0x7b8)](_0x1f4f7d(0xca8),_0x276d16,{'once':!![]}),_0x7b26c1[_0x1f4f7d(0xb4a)]();});else{if(_0xdffe77==='paste'){const _0x33c4d9=await _0x131a69(_0x52359c(0x1297),_0x52359c(0x1285),'',_0x52359c(0x338));if(_0x33c4d9){const _0x4b79eb=_0x33c4d9[_0x52359c(0x128a)](/\[/g,'\x0a[')[_0x52359c(0xa06)]();return _0x4b79eb;}return _0x33c4d9;}else return null;}}_0x372b85[_0x7c5117(0x397)](0x28)[_0x7c5117(0x14ff)]({'doubanPosts':_0x7c5117(0x108b),'chats':_0x7c5117(0x8b5),'apiConfig':_0x7c5117(0x870),'globalSettings':_0x7c5117(0x1496),'userStickers':_0x7c5117(0x1489),'worldBooks':_0x7c5117(0x11ce),'worldBookCategories':_0x7c5117(0xb82),'musicLibrary':'&id','personaPresets':_0x7c5117(0x1496),'qzoneSettings':'&id','qzonePosts':_0x7c5117(0x9fd),'qzoneAlbums':_0x7c5117(0xcda),'qzonePhotos':_0x7c5117(0x10e4),'favorites':_0x7c5117(0x1110),'qzoneGroups':_0x7c5117(0xb82),'memories':_0x7c5117(0x154e),'callRecords':_0x7c5117(0x1c8),'shoppingProducts':_0x7c5117(0x1052),'shoppingCategories':_0x7c5117(0xb82),'apiPresets':'++id,\x20name','renderingRules':_0x7c5117(0x3d4),'appearancePresets':_0x7c5117(0x1d9),'stickerCategories':_0x7c5117(0xb82),'customAvatarFrames':_0x7c5117(0xb82),'presets':_0x7c5117(0x11ce),'presetCategories':_0x7c5117(0xb82),'readingLibrary':_0x7c5117(0x151a),'npcs':_0x7c5117(0x3ef),'npcGroups':_0x7c5117(0xb82)})[_0x7c5117(0x120f)](_0x5101f3=>{const _0x323904=_0x7c5117;return _0x5101f3['table']('worldBooks')['toCollection']()[_0x323904(0x52c)](_0x4ce385=>{const _0x159408=_0x323904;if(typeof _0x4ce385[_0x159408(0x1469)]===_0x159408(0x857)&&_0x4ce385[_0x159408(0x1469)]['trim']()!=='')_0x4ce385[_0x159408(0x1469)]=[{'keys':[],'comment':_0x159408(0x7e6),'content':_0x4ce385['content']}];else!Array['isArray'](_0x4ce385[_0x159408(0x1469)])&&(_0x4ce385['content']=[]);_0x4ce385['content']['forEach'](_0x4b3e11=>{const _0x32ef57=_0x159408;typeof _0x4b3e11[_0x32ef57(0x7af)]==='undefined'&&(_0x4b3e11['enabled']=!![]);});});}),window['db']=_0x372b85;function _0x2d25e5(_0x4d9749){const _0x3fe074=_0x7c5117;_0x4d9749===_0x3fe074(0x9e1)&&(window[_0x3fe074(0x82b)](),_0x33d681(_0x3fe074(0x230)));if(_0x4d9749===_0x3fe074(0x70c))window['renderApiSettingsProxy']();if(_0x4d9749===_0x3fe074(0x1481))window['renderWallpaperScreenProxy']();if(_0x4d9749===_0x3fe074(0x25f))window[_0x3fe074(0x904)]();if(_0x4d9749===_0x3fe074(0x673))window[_0x3fe074(0x1426)]();if(_0x4d9749==='douban-screen')_0x3b95fd();document[_0x3fe074(0x2a1)]('.screen')[_0x3fe074(0x458)](_0x1d2efe=>_0x1d2efe['classList'][_0x3fe074(0x443)](_0x3fe074(0xa37)));const _0x51b9a7=document[_0x3fe074(0xfa0)](_0x4d9749);if(_0x51b9a7)_0x51b9a7[_0x3fe074(0x128f)][_0x3fe074(0x1327)](_0x3fe074(0xa37));if(_0x4d9749==='chat-interface-screen')window[_0x3fe074(0x607)](_0x8f0871['activeChatId']);_0x4d9749==='font-settings-screen'&&(_0x1279e9(),document[_0x3fe074(0xfa0)]('font-url-input')[_0x3fe074(0x4f6)]=_0x8f0871[_0x3fe074(0x7b0)][_0x3fe074(0x1208)]||'',_0x2dccde(_0x8f0871['globalSettings']['fontUrl']||'',!![]));}window['updateListenTogetherIconProxy']=()=>{};function _0x33d681(_0x3b472d){const _0x283f4f=_0x7c5117,_0xb6b4bf=document[_0x283f4f(0xfa0)](_0x283f4f(0x9e1)),_0x2f4c8b={'messages-view':document[_0x283f4f(0xfa0)](_0x283f4f(0x230)),'qzone-screen':document['getElementById'](_0x283f4f(0x337)),'favorites-view':document[_0x283f4f(0xfa0)](_0x283f4f(0x5cd)),'memories-view':document['getElementById'](_0x283f4f(0x25a)),'npc-list-view':document[_0x283f4f(0xfa0)](_0x283f4f(0x2ca))},_0xf6dbba=document[_0x283f4f(0xfa0)](_0x283f4f(0x1198)),_0x150e74=document[_0x283f4f(0xfa0)](_0x283f4f(0x12d3));_0x2625e2&&document[_0x283f4f(0xfa0)](_0x283f4f(0x12af))[_0x283f4f(0xb4a)]();Object['values'](_0x2f4c8b)[_0x283f4f(0x458)](_0x46d34d=>_0x46d34d[_0x283f4f(0x128f)]['remove'](_0x283f4f(0xa37)));_0x2f4c8b[_0x3b472d]&&_0x2f4c8b[_0x3b472d][_0x283f4f(0x128f)][_0x283f4f(0x1327)](_0x283f4f(0xa37));document[_0x283f4f(0x2a1)](_0x283f4f(0x59b))[_0x283f4f(0x458)](_0x300457=>{const _0x29e52f=_0x283f4f;_0x300457[_0x29e52f(0x128f)][_0x29e52f(0xb80)](_0x29e52f(0xa37),_0x300457['dataset'][_0x29e52f(0x28c)]===_0x3b472d);});_0x3b472d===_0x283f4f(0x230)?(_0xf6dbba[_0x283f4f(0x63b)][_0x283f4f(0x1248)]='flex',_0x150e74['style']['display']=_0x283f4f(0x138c)):(_0xf6dbba[_0x283f4f(0x63b)][_0x283f4f(0x1248)]=_0x283f4f(0x11b5),_0x150e74[_0x283f4f(0x63b)]['display']=_0x283f4f(0x11b5));_0x3b472d!==_0x283f4f(0x25a)&&(_0x199e26[_0x283f4f(0x458)](_0x5507d8=>clearInterval(_0x5507d8)),_0x199e26=[]);switch(_0x3b472d){case _0x283f4f(0x337):_0x2f4c8b[_0x283f4f(0x337)][_0x283f4f(0x63b)]['backgroundColor']='#f0f2f5',_0x11aa82(0x0),_0x2437d0(),_0x1098dc();break;case _0x283f4f(0x5cd):_0x2f4c8b[_0x283f4f(0x5cd)][_0x283f4f(0x63b)][_0x283f4f(0x11f8)]='#f9f9f9',_0x5164d8();break;case _0x283f4f(0x230):break;case _0x283f4f(0x2ca):_0x2ceb73();break;}}function _0x4cd10a(){const _0x4e87ee=_0x7c5117;console[_0x4e87ee(0x4ee)](_0x4e87ee(0x1530));}window[_0x7c5117(0x1426)]=_0x4cd10a;function _0x2437d0(){const _0x1d91ab=_0x7c5117;if(_0x8f0871&&_0x8f0871[_0x1d91ab(0x9dd)]){const _0x9ef74e=_0x8f0871[_0x1d91ab(0x9dd)];document[_0x1d91ab(0xfa0)](_0x1d91ab(0xed3))['textContent']=_0x9ef74e['nickname'],document[_0x1d91ab(0xfa0)]('qzone-avatar-img')[_0x1d91ab(0x53e)]=_0x9ef74e['avatar'],document['getElementById'](_0x1d91ab(0x328))[_0x1d91ab(0x53e)]=_0x9ef74e[_0x1d91ab(0x789)];}}window[_0x7c5117(0xd49)]=_0x2437d0;async function _0x32a702(){const _0x3e5faa=_0x7c5117;_0x372b85&&_0x8f0871[_0x3e5faa(0x9dd)]&&await _0x372b85[_0x3e5faa(0x9dd)][_0x3e5faa(0x11d5)](_0x8f0871[_0x3e5faa(0x9dd)]);}function _0x256c8f(_0x3ff532){const _0x4e72fd=_0x7c5117;if(!_0x3ff532)return'';const _0x19718e=new Date(),_0x3bb17b=new Date(_0x3ff532),_0x4ee63f=Math[_0x4e72fd(0x13e5)]((_0x19718e-_0x3bb17b)/0x3e8),_0x5bb801=Math['floor'](_0x4ee63f/0x3c),_0x38442e=Math[_0x4e72fd(0x13e5)](_0x5bb801/0x3c);if(_0x5bb801<0x1)return'刚刚';if(_0x5bb801<0x3c)return _0x5bb801+_0x4e72fd(0x53f);if(_0x38442e<0x18)return _0x38442e+'小时前';const _0x51c541=_0x3bb17b[_0x4e72fd(0x75f)](),_0x167ce2=String(_0x3bb17b[_0x4e72fd(0x35a)]()+0x1)[_0x4e72fd(0x13e8)](0x2,'0'),_0x22c6b8=String(_0x3bb17b['getDate']())[_0x4e72fd(0x13e8)](0x2,'0'),_0x1b0c05=String(_0x3bb17b['getHours']())[_0x4e72fd(0x13e8)](0x2,'0'),_0x3684da=String(_0x3bb17b[_0x4e72fd(0xa39)]())[_0x4e72fd(0x13e8)](0x2,'0');return _0x19718e['getFullYear']()===_0x51c541?_0x167ce2+'-'+_0x22c6b8+'\x20'+_0x1b0c05+':'+_0x3684da:_0x51c541+'-'+_0x167ce2+'-'+_0x22c6b8+'\x20'+_0x1b0c05+':'+_0x3684da;}function _0xc9cf6a(_0x1a171d){const _0x23dac2=_0x7c5117,_0x37544f=document['querySelector'](_0x23dac2(0x13c2)+_0x1a171d['id']+'\x22]'),_0x28b3ee=!!_0x37544f,_0x34efc0=_0x28b3ee?_0x37544f:document[_0x23dac2(0xb4e)](_0x23dac2(0xd53));!_0x28b3ee&&(_0x34efc0[_0x23dac2(0x1287)]=_0x23dac2(0xf8a),_0x34efc0[_0x23dac2(0x8df)][_0x23dac2(0x3eb)]=_0x1a171d['id']);const _0x1b64cd=_0x28b3ee?_0x34efc0[_0x23dac2(0xfb1)](_0x23dac2(0x150d)):document['createElement'](_0x23dac2(0xd53));!_0x28b3ee&&(_0x1b64cd['className']=_0x23dac2(0x7b6));let _0x5129eb='',_0x3ce7a3='',_0x3fad12=_0x8f0871[_0x23dac2(0x9dd)]['avatar'];if(_0x1a171d[_0x23dac2(0x11dd)]===_0x23dac2(0xcb0))_0x5129eb=_0x8f0871['qzoneSettings'][_0x23dac2(0xc61)],_0x3ce7a3=_0x8f0871[_0x23dac2(0x9dd)]['nickname'];else{if(_0x8f0871[_0x23dac2(0x1260)][_0x1a171d[_0x23dac2(0x11dd)]]){const _0x4b2f8d=_0x8f0871['chats'][_0x1a171d[_0x23dac2(0x11dd)]];_0x5129eb=_0x4b2f8d[_0x23dac2(0x12d7)]['aiAvatar']||_0x1a2fc1,_0x3ce7a3=_0x4b2f8d[_0x23dac2(0x1023)];}else _0x3ce7a3=_0xc4efbd(_0x1a171d['authorOriginalName']),_0x5129eb=_0x1a2fc1;}function _0x46a647(_0x72fcbb){const _0x4452b0=_0x23dac2;let _0x783267='';const _0x1818b1=_0x72fcbb[_0x4452b0(0x137f)]?'<div\x20class=\x22post-content\x22>'+_0x3de267(_0x72fcbb[_0x4452b0(0x137f)])[_0x4452b0(0x128a)](/\n/g,_0x4452b0(0xd59))+_0x4452b0(0xda9):'';if(_0x72fcbb['type']===_0x4452b0(0x134d))_0x783267='<div\x20class=\x22post-content\x22\x20style=\x22margin-bottom:\x2010px;\x22>'+_0x3de267(_0x72fcbb[_0x4452b0(0x1469)])[_0x4452b0(0x128a)](/\n/g,'<br>')+_0x4452b0(0xda9);else{if(_0x72fcbb[_0x4452b0(0x682)]===_0x4452b0(0x76d)&&_0x72fcbb[_0x4452b0(0x127b)])_0x783267=_0x1818b1?_0x1818b1+_0x4452b0(0x4d0)+_0x72fcbb[_0x4452b0(0x127b)]+_0x4452b0(0x4c7):'<img\x20src=\x22'+_0x72fcbb[_0x4452b0(0x127b)]+_0x4452b0(0x1181);else{if(_0x72fcbb[_0x4452b0(0x682)]===_0x4452b0(0x12d0)){const _0x1f6c15=_0x8f0871[_0x4452b0(0x7b0)][_0x4452b0(0x1418)]&&_0x72fcbb[_0x4452b0(0xe0d)]?_0x4452b0(0xe88)+_0x72fcbb[_0x4452b0(0xe0d)]:_0x4452b0(0x83f);_0x783267=_0x1818b1?_0x1818b1+_0x4452b0(0x4d0)+_0x1f6c15+'\x22\x20class=\x22chat-image\x22\x20style=\x22cursor:\x20pointer;\x22\x20data-hidden-text=\x22'+_0x72fcbb['hiddenContent']+'\x22></div>':_0x4452b0(0x131f)+_0x1f6c15+'\x22\x20class=\x22chat-image\x22\x20style=\x22cursor:\x20pointer;\x22\x20data-hidden-text=\x22'+_0x72fcbb[_0x4452b0(0x59a)]+'\x22>';}else{if(_0x72fcbb[_0x4452b0(0x682)]===_0x4452b0(0x1a0)){const _0x4fe72a=_0x72fcbb[_0x4452b0(0xe5c)]||(_0x72fcbb[_0x4452b0(0x127b)]?[_0x72fcbb['imageUrl']]:[]);if(_0x4fe72a['length']>0x0){const _0x538d65=_0x4fe72a['length'];let _0x4defea='';_0x4defea=_0x4452b0(0x755)+_0x538d65+'\x22>',_0x4fe72a['forEach']((_0x5a024f,_0x37f619)=>{const _0xfb2cc8=_0x4452b0;_0x4defea+=_0xfb2cc8(0x131f)+_0x5a024f+_0xfb2cc8(0x1397)+(_0x37f619+0x1)+_0xfb2cc8(0x12d6);}),_0x4defea+=_0x4452b0(0xda9),_0x783267=_0x1818b1?''+_0x1818b1+_0x4defea:_0x4defea;}}}}}return _0x783267;}let _0x1c4d01;if(_0x1a171d['type']==='repost'){const _0x4111f5=_0x1a171d['repostComment']?_0x23dac2(0xac2)+_0x3de267(_0x1a171d[_0x23dac2(0xfd1)])[_0x23dac2(0x128a)](/\n/g,_0x23dac2(0xd59))+_0x23dac2(0xda9):'';let _0x4d4f13=_0x1a2fc1,_0x416d1e='原作者';if(_0x1a171d[_0x23dac2(0x119c)]['authorId']===_0x23dac2(0xcb0))_0x4d4f13=_0x8f0871[_0x23dac2(0x9dd)][_0x23dac2(0xc61)],_0x416d1e=_0x8f0871[_0x23dac2(0x9dd)]['nickname'];else{const _0x4319b9=_0x8f0871['chats'][_0x1a171d[_0x23dac2(0x119c)][_0x23dac2(0x11dd)]];_0x4319b9&&(_0x4d4f13=_0x4319b9[_0x23dac2(0x12d7)][_0x23dac2(0xce8)]||_0x1a2fc1),_0x416d1e=_0xc4efbd(_0x1a171d[_0x23dac2(0x119c)][_0x23dac2(0x432)]);}_0x1c4d01=_0x23dac2(0xdd3)+_0x4111f5+_0x23dac2(0x29e)+_0x4d4f13+_0x23dac2(0xbff)+_0x416d1e+_0x23dac2(0x1486)+_0x256c8f(_0x1a171d['originalPost'][_0x23dac2(0xe55)])+_0x23dac2(0xc01)+_0x46a647(_0x1a171d[_0x23dac2(0x119c)])+_0x23dac2(0xd1c);}else _0x1c4d01='<div\x20class=\x22post-main-content\x22>'+_0x46a647(_0x1a171d)+'</div>';let _0x144e8c='';if(_0x1a171d[_0x23dac2(0x48b)]&&_0x1a171d[_0x23dac2(0x48b)]['length']>0x0){const _0x21bb71=_0x1a171d[_0x23dac2(0x48b)][_0x23dac2(0x556)](_0x357205=>_0xc4efbd(_0x357205))[_0x23dac2(0xcc2)]('、');_0x144e8c=_0x23dac2(0xa83)+_0x21bb71+'\x20觉得很赞</span></div>';}let _0x1bf1d2='';_0x1a171d[_0x23dac2(0xbab)]&&_0x1a171d['comments'][_0x23dac2(0xac0)]>0x0&&(_0x1bf1d2=_0x23dac2(0x2d7),_0x1a171d[_0x23dac2(0xbab)]['forEach']((_0x16ad4d,_0x149363)=>{const _0x37aa39=_0x23dac2;if(typeof _0x16ad4d===_0x37aa39(0xf2e)&&_0x16ad4d!==null&&_0x16ad4d[_0x37aa39(0xa7e)]){const _0x2ab5e7=_0x16ad4d[_0x37aa39(0xa7e)],_0x4013d5=_0xc4efbd(_0x2ab5e7);let _0x466727;_0x4a5ebd[_0x37aa39(0x3fb)](_0x16ad4d[_0x37aa39(0xda3)])?_0x466727=_0x37aa39(0x131f)+_0x16ad4d['text']+_0x37aa39(0x1175):_0x466727=_0x3de267(_0x16ad4d[_0x37aa39(0xda3)]);let _0x37ddf8='';if(_0x16ad4d[_0x37aa39(0x5ee)]){const _0x2226ca=_0xc4efbd(_0x16ad4d[_0x37aa39(0x5ee)]);_0x37ddf8='<span\x20class=\x22commenter-name\x22>'+_0x4013d5+_0x37aa39(0xba9)+_0x2226ca+_0x37aa39(0xdb6)+_0x466727;}else _0x37ddf8=_0x37aa39(0xfa5)+_0x4013d5+_0x37aa39(0xdb6)+_0x466727;_0x1bf1d2+=_0x37aa39(0x1546)+_0x1a171d['id']+_0x37aa39(0x7b1)+_0x2ab5e7+'\x22\x20data-commenter-display-name=\x22'+_0x4013d5+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22comment-text\x22>'+_0x37ddf8+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22comment-delete-btn\x22\x20data-comment-index=\x22'+_0x149363+_0x37aa39(0x131e);}else _0x1bf1d2+='<div\x20class=\x22legacy-comment-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22comment-text\x22>'+_0x3de267(String(_0x16ad4d))+_0x37aa39(0x1256);}),_0x1bf1d2+=_0x23dac2(0xda9));const _0x388bed=_0x8f0871[_0x23dac2(0x9dd)][_0x23dac2(0xff8)],_0x483b52=_0x1a171d[_0x23dac2(0x48b)]&&_0x1a171d['likes'][_0x23dac2(0xf95)](_0x388bed),_0x552868=_0x8f0871[_0x23dac2(0x1309)]&&_0x8f0871[_0x23dac2(0x1309)][_0x23dac2(0xd58)](_0x1a171d['id']);let _0x43b89a='';_0x1a171d[_0x23dac2(0x682)]!==_0x23dac2(0xf20)&&(_0x43b89a='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22action-icon\x20repost\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22><path\x20d=\x22M17\x202.1l4\x204-4\x204\x20M3\x2011.5v-3a4\x204\x200\x200\x201\x204-4h13\x20M7\x2021.9l-4-4\x204-4\x20M21\x2012.5v3a4\x204\x200\x200\x201-4\x204H4\x22></path></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>');_0x1b64cd[_0x23dac2(0x1331)]=_0x23dac2(0x551)+_0x5129eb+_0x23dac2(0x3ac)+_0x1a171d[_0x23dac2(0x11dd)]+_0x23dac2(0xbdb)+_0x3ce7a3+_0x23dac2(0xfac)+_0x256c8f(_0x1a171d[_0x23dac2(0xe55)])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-actions-btn\x22>…</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1c4d01+_0x23dac2(0xf6a)+_0x43b89a+_0x23dac2(0xb3f)+(_0x483b52?_0x23dac2(0xa37):'')+_0x23dac2(0xbd9)+(_0x552868?_0x23dac2(0xa37):'')+_0x23dac2(0x4be)+_0x144e8c+_0x23dac2(0x3da)+_0x1bf1d2+_0x23dac2(0x332)+_0x3fad12+'\x22\x20class=\x22comment-avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22comment-input\x22\x20placeholder=\x22友善的评论是交流的起点\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22comment-sticker-btn\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8\x2014\x20Q\x2012\x2016\x2016\x2014\x22></path>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<line\x20x1=\x229\x22\x20y1=\x229\x22\x20x2=\x229.01\x22\x20y2=\x229\x22></line>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<line\x20x1=\x2215\x22\x20y1=\x229\x22\x20x2=\x2215.01\x22\x20y2=\x229\x22></line>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22at-mention-popup\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22comment-send-btn\x22>发送</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';if(!_0x28b3ee){const _0x2f661f=document[_0x23dac2(0xb4e)]('div');_0x2f661f[_0x23dac2(0x1287)]=_0x23dac2(0x1556),_0x2f661f[_0x23dac2(0x1331)]=_0x23dac2(0x98a),_0x34efc0[_0x23dac2(0x1155)](_0x1b64cd),_0x34efc0[_0x23dac2(0x1155)](_0x2f661f);}return _0x34efc0;}async function _0x2ed925(_0x3825f1){const _0x2dbb12=_0x7c5117,_0x456f81=await _0x372b85[_0x2dbb12(0x12c2)][_0x2dbb12(0x70d)](_0x3825f1);if(!_0x456f81){const _0x3a8d6f=document[_0x2dbb12(0xfb1)](_0x2dbb12(0x13c2)+_0x3825f1+'\x22]');if(_0x3a8d6f)_0x3a8d6f[_0x2dbb12(0x443)]();return;}const _0xd48230=_0x4b4cc4[_0x2dbb12(0xb22)](_0x3e3df7=>_0x3e3df7['id']===_0x3825f1);if(_0xd48230>-0x1)_0x4b4cc4[_0xd48230]=_0x456f81;const _0x1f6a73=await _0x372b85[_0x2dbb12(0xb69)][_0x2dbb12(0xdc7)](_0x2dbb12(0x682))['equals'](_0x2dbb12(0x1b9))[_0x2dbb12(0x3bc)]();_0x8f0871[_0x2dbb12(0x1309)]=new Set(_0x1f6a73[_0x2dbb12(0x556)](_0x3aa942=>_0x3aa942[_0x2dbb12(0x1469)]['id'])),_0xc9cf6a(_0x456f81);}function _0x2368ae(_0xdfab4){const _0x1db86b=_0x7c5117,_0x564cf5=Date[_0x1db86b(0xc22)](),_0x2b8841=Math[_0x1db86b(0x13e5)]((_0x564cf5-_0xdfab4)/0x3e8),_0x5644a7=Math[_0x1db86b(0x13e5)](_0x2b8841/0x3c);if(_0x5644a7<0x2)return'刚刚';if(_0x5644a7<0x3c)return _0x5644a7+_0x1db86b(0x53f);const _0x301f0e=Math[_0x1db86b(0x13e5)](_0x5644a7/0x3c);if(_0x301f0e<0x18)return _0x301f0e+'小时前';const _0x57886e=Math[_0x1db86b(0x13e5)](_0x301f0e/0x18);return _0x57886e+'天前';}async function _0xc9cf6a(_0xc49160){const _0x3c66b6=_0x7c5117,_0x1e8195=document[_0x3c66b6(0xfb1)](_0x3c66b6(0x13c2)+_0xc49160['id']+'\x22]'),_0x4c4401=!!_0x1e8195,_0x22f2b3=_0x4c4401?_0x1e8195:document[_0x3c66b6(0xb4e)]('div');!_0x4c4401&&(_0x22f2b3[_0x3c66b6(0x1287)]=_0x3c66b6(0xf8a),_0x22f2b3[_0x3c66b6(0x8df)][_0x3c66b6(0x3eb)]=_0xc49160['id']);const _0x474f12=_0x4c4401?_0x22f2b3[_0x3c66b6(0xfb1)](_0x3c66b6(0x150d)):document[_0x3c66b6(0xb4e)](_0x3c66b6(0xd53));!_0x4c4401&&(_0x474f12[_0x3c66b6(0x1287)]=_0x3c66b6(0x7b6));let _0x1f8f93='',_0xc57c8f='',_0x381bbc=_0x8f0871['qzoneSettings'][_0x3c66b6(0xc61)];if(_0xc49160[_0x3c66b6(0x11dd)]===_0x3c66b6(0xcb0))_0x1f8f93=_0x8f0871[_0x3c66b6(0x9dd)][_0x3c66b6(0xc61)],_0xc57c8f=_0x8f0871[_0x3c66b6(0x9dd)][_0x3c66b6(0xff8)];else{if(_0x8f0871['chats'][_0xc49160[_0x3c66b6(0x11dd)]]){const _0x18ad1d=_0x8f0871['chats'][_0xc49160[_0x3c66b6(0x11dd)]];_0x1f8f93=_0x18ad1d['settings'][_0x3c66b6(0xce8)]||_0x1a2fc1,_0xc57c8f=_0x18ad1d[_0x3c66b6(0x1023)];}else{if(String(_0xc49160[_0x3c66b6(0x11dd)])[_0x3c66b6(0x9b8)](_0x3c66b6(0xbec))){const _0x4462f3=parseInt(String(_0xc49160[_0x3c66b6(0x11dd)])[_0x3c66b6(0x128a)]('npc_',''));if(!isNaN(_0x4462f3)){const _0x307b65=await _0x372b85['npcs'][_0x3c66b6(0x70d)](_0x4462f3);_0x307b65?(_0x1f8f93=_0x307b65[_0x3c66b6(0xc61)]||_0x29d47b,_0xc57c8f=_0x307b65['name']):(_0xc57c8f=_0xc49160[_0x3c66b6(0x432)]||_0x3c66b6(0xa22),_0x1f8f93=_0x29d47b);}}else _0xc57c8f=_0xc4efbd(_0xc49160['authorOriginalName']),_0x1f8f93=_0x1a2fc1;}}function _0x20d1f9(_0x32ec23){const _0x174c41=_0x3c66b6;let _0x2af16c='';const _0x3dc55f=_0x32ec23[_0x174c41(0x137f)]?_0x174c41(0xac2)+_0x3de267(_0x32ec23[_0x174c41(0x137f)])[_0x174c41(0x128a)](/\n/g,_0x174c41(0xd59))+_0x174c41(0xda9):'';if(_0x32ec23[_0x174c41(0x682)]===_0x174c41(0x134d))_0x2af16c='<div\x20class=\x22post-content\x22\x20style=\x22margin-bottom:\x2010px;\x22>'+_0x3de267(_0x32ec23[_0x174c41(0x1469)])[_0x174c41(0x128a)](/\n/g,_0x174c41(0xd59))+'</div>';else{if(_0x32ec23[_0x174c41(0x682)]==='image_post'&&_0x32ec23[_0x174c41(0x127b)])_0x2af16c=_0x3dc55f?_0x3dc55f+'<div\x20style=\x22margin-top:10px;\x22><img\x20src=\x22'+_0x32ec23[_0x174c41(0x127b)]+_0x174c41(0x4c7):_0x174c41(0x131f)+_0x32ec23[_0x174c41(0x127b)]+_0x174c41(0x1181);else{if(_0x32ec23[_0x174c41(0x682)]===_0x174c41(0x12d0)){const _0x30825b=_0x8f0871[_0x174c41(0x7b0)][_0x174c41(0x1418)]&&_0x32ec23['image_prompt']?_0x174c41(0xe88)+_0x32ec23[_0x174c41(0xe0d)]:_0x174c41(0x83f);_0x2af16c=_0x3dc55f?_0x3dc55f+_0x174c41(0x4d0)+_0x30825b+_0x174c41(0xe86)+_0x32ec23['hiddenContent']+_0x174c41(0x1ab):_0x174c41(0x131f)+_0x30825b+'\x22\x20class=\x22chat-image\x22\x20style=\x22cursor:\x20pointer;\x22\x20data-hidden-text=\x22'+_0x32ec23[_0x174c41(0x59a)]+'\x22>';}else{if(_0x32ec23[_0x174c41(0x682)]==='naiimag'){const _0x47edba=_0x32ec23[_0x174c41(0xe5c)]||(_0x32ec23[_0x174c41(0x127b)]?[_0x32ec23[_0x174c41(0x127b)]]:[]);if(_0x47edba[_0x174c41(0xac0)]>0x0){const _0x1bd46c=_0x47edba[_0x174c41(0xac0)];let _0x1e305e='';_0x1e305e='<div\x20class=\x22post-images-grid\x20grid-'+_0x1bd46c+'\x22>',_0x47edba[_0x174c41(0x458)]((_0x8aa0b4,_0x553fe4)=>{const _0x564443=_0x174c41;_0x1e305e+=_0x564443(0x131f)+_0x8aa0b4+_0x564443(0x1397)+(_0x553fe4+0x1)+_0x564443(0x12d6);}),_0x1e305e+=_0x174c41(0xda9),_0x2af16c=_0x3dc55f?''+_0x3dc55f+_0x1e305e:_0x1e305e;}}}}}return _0x2af16c;}let _0x34f064;if(_0xc49160[_0x3c66b6(0x682)]===_0x3c66b6(0xf20)){const _0x2c0105=_0xc49160[_0x3c66b6(0xfd1)]?_0x3c66b6(0xac2)+_0xc49160[_0x3c66b6(0xfd1)][_0x3c66b6(0x128a)](/\n/g,_0x3c66b6(0xd59))+_0x3c66b6(0xda9):'';let _0x155db9=_0x1a2fc1,_0x3c64cc=_0x3c66b6(0x204);if(_0xc49160[_0x3c66b6(0x119c)][_0x3c66b6(0x11dd)]===_0x3c66b6(0xcb0))_0x155db9=_0x8f0871[_0x3c66b6(0x9dd)][_0x3c66b6(0xc61)],_0x3c64cc=_0x8f0871['qzoneSettings'][_0x3c66b6(0xff8)];else{const _0x2056a6=_0x8f0871[_0x3c66b6(0x1260)][_0xc49160[_0x3c66b6(0x119c)][_0x3c66b6(0x11dd)]];_0x2056a6&&(_0x155db9=_0x2056a6[_0x3c66b6(0x12d7)][_0x3c66b6(0xce8)]||_0x1a2fc1),_0x3c64cc=_0xc4efbd(_0xc49160[_0x3c66b6(0x119c)]['authorOriginalName']);}_0x34f064='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2c0105+_0x3c66b6(0x29e)+_0x155db9+_0x3c66b6(0xbff)+_0x3c64cc+_0x3c66b6(0x1486)+_0x256c8f(_0xc49160['originalPost'][_0x3c66b6(0xe55)])+_0x3c66b6(0xc01)+_0x20d1f9(_0xc49160[_0x3c66b6(0x119c)])+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}else _0x34f064='<div\x20class=\x22post-main-content\x22>'+_0x20d1f9(_0xc49160)+_0x3c66b6(0xda9);let _0x306fe3='';if(_0xc49160[_0x3c66b6(0x48b)]&&_0xc49160[_0x3c66b6(0x48b)][_0x3c66b6(0xac0)]>0x0){const _0x32bd36=_0xc49160[_0x3c66b6(0x48b)]['map'](_0x18a445=>_0xc4efbd(_0x18a445))['join']('、');_0x306fe3=_0x3c66b6(0xa83)+_0x32bd36+'\x20觉得很赞</span></div>';}let _0x4a81c6='';_0xc49160[_0x3c66b6(0xbab)]&&_0xc49160[_0x3c66b6(0xbab)][_0x3c66b6(0xac0)]>0x0&&(_0x4a81c6=_0x3c66b6(0x2d7),_0xc49160['comments'][_0x3c66b6(0x458)]((_0x2579eb,_0x5e8d06)=>{const _0x380bcb=_0x3c66b6;if(typeof _0x2579eb===_0x380bcb(0xf2e)&&_0x2579eb!==null&&_0x2579eb[_0x380bcb(0xa7e)]){const _0x1a5ef3=_0x2579eb[_0x380bcb(0xa7e)],_0x160868=_0xc4efbd(_0x1a5ef3);let _0x238d19;_0x4a5ebd[_0x380bcb(0x3fb)](_0x2579eb[_0x380bcb(0xda3)])?_0x238d19='<img\x20src=\x22'+_0x2579eb[_0x380bcb(0xda3)]+_0x380bcb(0x1175):_0x238d19=_0x3de267(_0x2579eb[_0x380bcb(0xda3)]);let _0x10a8ab='';if(_0x2579eb[_0x380bcb(0x5ee)]){const _0x15e5b2=_0xc4efbd(_0x2579eb[_0x380bcb(0x5ee)]);_0x10a8ab='<span\x20class=\x22commenter-name\x22>'+_0x160868+'</span>\x20回复\x20<span\x20class=\x22commenter-name\x22>'+_0x15e5b2+_0x380bcb(0xdb6)+_0x238d19;}else _0x10a8ab=_0x380bcb(0xfa5)+_0x160868+'</span>:\x20'+_0x238d19;_0x4a81c6+='<div\x20class=\x22comment-item\x22\x20data-post-id=\x22'+_0xc49160['id']+_0x380bcb(0x7b1)+_0x1a5ef3+_0x380bcb(0x10f9)+_0x160868+_0x380bcb(0x396)+_0x10a8ab+_0x380bcb(0x92f)+_0x5e8d06+_0x380bcb(0x131e);}else _0x4a81c6+='<div\x20class=\x22legacy-comment-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22comment-text\x22>'+String(_0x2579eb)+_0x380bcb(0x1256);}),_0x4a81c6+=_0x3c66b6(0xda9));const _0x200118=_0x8f0871['qzoneSettings'][_0x3c66b6(0xff8)],_0x485c4d=_0xc49160['likes']&&_0xc49160['likes']['includes'](_0x200118),_0x20d438=_0x8f0871['favoritedPostIds']&&_0x8f0871['favoritedPostIds']['has'](_0xc49160['id']);let _0x1b73de='';_0xc49160[_0x3c66b6(0x682)]!==_0x3c66b6(0xf20)&&(_0x1b73de=_0x3c66b6(0x2af));_0x474f12[_0x3c66b6(0x1331)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x1f8f93+_0x3c66b6(0x3ac)+_0xc49160[_0x3c66b6(0x11dd)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22post-nickname\x22>'+_0xc57c8f+_0x3c66b6(0xfac)+_0x256c8f(_0xc49160['timestamp'])+_0x3c66b6(0x4b0)+_0x34f064+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-feedback-icons\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1b73de+_0x3c66b6(0xb3f)+(_0x485c4d?_0x3c66b6(0xa37):'')+_0x3c66b6(0xbd9)+(_0x20d438?'active':'')+_0x3c66b6(0x4be)+_0x306fe3+_0x3c66b6(0x3da)+_0x4a81c6+_0x3c66b6(0x332)+_0x381bbc+_0x3c66b6(0xc91);if(!_0x4c4401){const _0x2c7caa=document[_0x3c66b6(0xb4e)](_0x3c66b6(0xd53));_0x2c7caa[_0x3c66b6(0x1287)]=_0x3c66b6(0x1556),_0x2c7caa[_0x3c66b6(0x1331)]=_0x3c66b6(0x98a),_0x22f2b3[_0x3c66b6(0x1155)](_0x474f12),_0x22f2b3[_0x3c66b6(0x1155)](_0x2c7caa);}return _0x22f2b3;}async function _0x2ed925(_0x19789f){const _0x3afd3e=_0x7c5117,_0x1f6c94=await _0x372b85[_0x3afd3e(0x12c2)][_0x3afd3e(0x70d)](_0x19789f);if(!_0x1f6c94){const _0x403675=document['querySelector'](_0x3afd3e(0x13c2)+_0x19789f+'\x22]');_0x403675&&_0x403675[_0x3afd3e(0x443)]();return;}const _0x3247bb=_0x4b4cc4[_0x3afd3e(0xb22)](_0x34b772=>_0x34b772['id']===_0x19789f);_0x3247bb>-0x1&&(_0x4b4cc4[_0x3247bb]=_0x1f6c94);const _0x4f6ff6=await _0x372b85[_0x3afd3e(0xb69)][_0x3afd3e(0xdc7)](_0x3afd3e(0x682))[_0x3afd3e(0x8c2)](_0x3afd3e(0x1b9))[_0x3afd3e(0x3bc)]();_0x8f0871[_0x3afd3e(0x1309)]=new Set(_0x4f6ff6[_0x3afd3e(0x556)](_0x55620b=>_0x55620b['content']['id'])),await _0xc9cf6a(_0x1f6c94);}async function _0x1098dc(){const _0x1f4805=_0x7c5117,_0x1a62d9=document[_0x1f4805(0xfa0)](_0x1f4805(0x108e));if(!_0x1a62d9)return;const [_0x1ae90d,_0x3d1b60]=await Promise[_0x1f4805(0x8ab)]([_0x372b85[_0x1f4805(0x12c2)][_0x1f4805(0x1554)]('timestamp')[_0x1f4805(0xaf5)]()['filter'](_0x267024=>!_0x267024[_0x1f4805(0xbc8)])['toArray'](),_0x372b85[_0x1f4805(0xb69)][_0x1f4805(0xdc7)](_0x1f4805(0x682))[_0x1f4805(0x8c2)]('qzone_post')[_0x1f4805(0x3bc)]()]);_0x4b4cc4=_0x1ae90d,_0x8f0871[_0x1f4805(0x1309)]=new Set(_0x3d1b60[_0x1f4805(0x556)](_0x460168=>_0x460168[_0x1f4805(0x1469)]['id'])),_0x1a62d9[_0x1f4805(0x1331)]='',_0x4a9d1d=0x0;if(_0x4b4cc4['length']===0x0){_0x1a62d9[_0x1f4805(0x1331)]=_0x1f4805(0x221);return;}_0x1656cf();}async function _0x1656cf(){const _0x2de586=_0x7c5117;if(_0x2f5bce)return;_0x2f5bce=!![];const _0x55af33=document[_0x2de586(0xfa0)]('qzone-posts-list');if(!_0x55af33){_0x2f5bce=![];return;}_0x4da623(_0x55af33,_0x2de586(0xb59)),setTimeout(async()=>{const _0x316b38=_0x2de586;_0x10441d(_0x55af33);const _0x3a67dc=_0x4a9d1d,_0x4db539=_0x4a9d1d+_0x3cee2e,_0x24ac53=_0x4b4cc4['slice'](_0x3a67dc,_0x4db539),_0x2f74ad=document[_0x316b38(0x491)]();for(const _0x11cd75 of _0x24ac53){const _0x4d78de=await _0xc9cf6a(_0x11cd75);_0x2f74ad[_0x316b38(0x1155)](_0x4d78de);}_0x55af33[_0x316b38(0x1155)](_0x2f74ad),_0x4a9d1d+=_0x24ac53[_0x316b38(0xac0)],_0x2f5bce=![];},0x1f4);}function _0xc124c(_0x3f4819,_0x273ce7){const _0x193534=_0x7c5117,_0x5dd877=_0x5cbe86['panelEl'],_0x150a99=_0x5cbe86['gridEl'];_0x150a99[_0x193534(0x1331)]='';_0x8f0871[_0x193534(0x413)]['length']===0x0?_0x150a99[_0x193534(0x1331)]=_0x193534(0x1b4):_0x8f0871['userStickers'][_0x193534(0x458)](_0x3bd052=>{const _0x20b7e9=_0x193534,_0xb87bc0=document[_0x20b7e9(0xb4e)](_0x20b7e9(0xd53));_0xb87bc0[_0x20b7e9(0x1287)]=_0x20b7e9(0x71b),_0xb87bc0['style'][_0x20b7e9(0xc93)]='url('+_0x3bd052[_0x20b7e9(0x3f5)]+')',_0xb87bc0[_0x20b7e9(0x1187)]=_0x3bd052[_0x20b7e9(0x1023)],_0x150a99[_0x20b7e9(0x1155)](_0xb87bc0);});const _0x4e34cf=_0x273ce7[_0x193534(0x1137)](),_0x3be1d2=document[_0x193534(0xfa0)]('phone-screen')[_0x193534(0x1137)]();_0x5dd877[_0x193534(0x63b)][_0x193534(0x1248)]=_0x193534(0x138c);const _0x3f9e83=_0x5dd877['getBoundingClientRect'](),_0x5dacae=_0x3f9e83[_0x193534(0x886)],_0x4e84b0=_0x3f9e83['width'];_0x5dd877[_0x193534(0x63b)][_0x193534(0x8ce)]=_0x4e34cf[_0x193534(0x8ce)]-_0x5dacae-0x5-_0x3be1d2['top']+'px';const _0x10d382=_0x4e34cf[_0x193534(0xcb1)]-_0x3be1d2['left'];_0x10d382+_0x4e84b0>_0x3be1d2[_0x193534(0xa92)]?(_0x5dd877[_0x193534(0x63b)][_0x193534(0xcb1)]=_0x193534(0x1258),_0x5dd877[_0x193534(0x63b)]['right']=_0x193534(0x6f4)):(_0x5dd877[_0x193534(0x63b)]['left']=_0x10d382+'px',_0x5dd877[_0x193534(0x63b)][_0x193534(0x17c)]='auto'),_0x5cbe86[_0x193534(0xe21)]=!![],_0x5cbe86[_0x193534(0xc78)]=_0x3f4819;}function _0x36b65a(){const _0x2fcbd5=_0x7c5117;_0x5cbe86[_0x2fcbd5(0xe21)]&&(_0x5cbe86[_0x2fcbd5(0x120c)][_0x2fcbd5(0x63b)][_0x2fcbd5(0x1248)]=_0x2fcbd5(0x11b5),_0x5cbe86['isOpen']=![],_0x5cbe86[_0x2fcbd5(0xc78)]=null);}async function _0x4ff289(_0x407eda,_0x2ff3bc){const _0x307c=_0x7c5117;if(!_0x2ff3bc||!_0x2ff3bc['url'])return;const _0xdead8f=await _0x372b85[_0x307c(0x12c2)]['get'](_0x407eda);if(!_0xdead8f){console[_0x307c(0x52b)](_0x307c(0x33e),_0x407eda);return;}!_0xdead8f[_0x307c(0xbab)]&&(_0xdead8f[_0x307c(0xbab)]=[]);const _0x1de2c7={'commenterName':_0x8f0871[_0x307c(0x9dd)][_0x307c(0xff8)],'text':_0x2ff3bc['url'],'meaning':_0x2ff3bc[_0x307c(0x1023)],'timestamp':Date[_0x307c(0xc22)]()};_0xdead8f[_0x307c(0xbab)][_0x307c(0x481)](_0x1de2c7),await _0x372b85[_0x307c(0x12c2)][_0x307c(0x1477)](_0x407eda,{'comments':_0xdead8f[_0x307c(0xbab)]}),_0x36b65a(),await _0x1098dc();const _0x297653=(_0xdead8f[_0x307c(0x137f)]||_0xdead8f['content']||_0x307c(0x11fa))[_0x307c(0x9fe)](0x0,0x1e);for(const _0x2001b7 in _0x8f0871[_0x307c(0x1260)]){const _0x2f66a6=_0x8f0871[_0x307c(0x1260)][_0x2001b7];if(!_0x2f66a6[_0x307c(0x1364)]){const _0x22dccf=_0x307c(0x1017)+_0x8f0871['qzoneSettings']['nickname']+_0x307c(0x962)+_0x407eda+_0x307c(0x1d2)+_0x297653+_0x307c(0x150a)+_0x2ff3bc[_0x307c(0x1023)]+_0x307c(0x1002),_0x355428={'role':_0x307c(0x1417),'content':_0x22dccf,'timestamp':Date[_0x307c(0xc22)](),'isHidden':!![]};_0x2f66a6['history'][_0x307c(0x481)](_0x355428),await _0x372b85['chats'][_0x307c(0x11d5)](_0x2f66a6);}}}function _0x114736(_0x2ab003){const _0x5d4984=_0x7c5117;_0x2dc32a=_0x2ab003,document[_0x5d4984(0xfa0)](_0x5d4984(0x959))['value']='',document[_0x5d4984(0xfa0)](_0x5d4984(0x4dd))['classList']['add']('visible');}function _0x227d26(){const _0x4fcf15=_0x7c5117;document[_0x4fcf15(0xfa0)](_0x4fcf15(0x4dd))[_0x4fcf15(0x128f)]['remove'](_0x4fcf15(0xdcc)),_0x2dc32a=null;}async function _0x88ec39(){const _0x2e57c7=_0x7c5117;if(!_0x2dc32a)return;const _0x58b647=document['getElementById'](_0x2e57c7(0x959))['value']['trim'](),_0xfa65de=await _0x372b85[_0x2e57c7(0x12c2)][_0x2e57c7(0x70d)](_0x2dc32a);if(!_0xfa65de){alert(_0x2e57c7(0xab0)),_0x227d26();return;}const _0x556719={'type':_0x2e57c7(0xf20),'timestamp':Date[_0x2e57c7(0xc22)](),'authorId':_0x2e57c7(0xcb0),'repostComment':_0x58b647,'originalPost':_0xfa65de,'visibleGroupIds':null};await _0x372b85[_0x2e57c7(0x12c2)][_0x2e57c7(0x1327)](_0x556719),_0x227d26(),await _0x1098dc(),alert(_0x2e57c7(0x306));}function _0x2ca411(_0x2e4d59){const _0xbf97b7=_0x7c5117,_0x174a84=document['getElementById'](_0xbf97b7(0x14fa));_0x174a84[_0xbf97b7(0x1331)]='';if(_0x2e4d59[_0xbf97b7(0xac0)]===0x0){const _0x542c4d=document[_0xbf97b7(0xfa0)](_0xbf97b7(0x3b9))[_0xbf97b7(0x4f6)],_0x8cd2eb=_0x542c4d?'未找到相关收藏':_0xbf97b7(0x4af);_0x174a84[_0xbf97b7(0x1331)]=_0xbf97b7(0x6f5)+_0x8cd2eb+_0xbf97b7(0x129d);return;}for(const _0x44eac4 of _0x2e4d59){const _0x39ef7e=document[_0xbf97b7(0xb4e)](_0xbf97b7(0xd53));_0x39ef7e[_0xbf97b7(0x1287)]='favorite-item-card',_0x39ef7e[_0xbf97b7(0x8df)][_0xbf97b7(0xffb)]=_0x44eac4['id'];let _0x2aff60='',_0x644d9a='',_0x29bb15='',_0xe677d3='';if(_0x44eac4[_0xbf97b7(0x682)]===_0xbf97b7(0x1b9)){const _0x49749c=_0x44eac4['content'];_0x29bb15=_0xbf97b7(0x99f);let _0x535b4d=_0x1a2fc1,_0x4f5dba=_0xbf97b7(0x5de);if(_0x49749c[_0xbf97b7(0x11dd)]===_0xbf97b7(0xcb0))_0x535b4d=_0x8f0871[_0xbf97b7(0x9dd)][_0xbf97b7(0xc61)],_0x4f5dba=_0x8f0871['qzoneSettings']['nickname'];else _0x8f0871[_0xbf97b7(0x1260)][_0x49749c['authorId']]&&(_0x535b4d=_0x8f0871['chats'][_0x49749c[_0xbf97b7(0x11dd)]][_0xbf97b7(0x12d7)][_0xbf97b7(0xce8)],_0x4f5dba=_0x8f0871[_0xbf97b7(0x1260)][_0x49749c[_0xbf97b7(0x11dd)]][_0xbf97b7(0x1023)]);_0x2aff60=_0xbf97b7(0x131f)+_0x535b4d+'\x22\x20class=\x22avatar\x22><div\x20class=\x22info\x22><div\x20class=\x22name\x22>'+_0x4f5dba+_0xbf97b7(0x2fa);const _0xfd5297=_0x49749c[_0xbf97b7(0x137f)]?'<div\x20class=\x22post-content\x22>'+_0x49749c[_0xbf97b7(0x137f)]['replace'](/\n/g,'<br>')+_0xbf97b7(0xda9):'';if(_0x49749c[_0xbf97b7(0x682)]==='shuoshuo')_0x644d9a=_0xbf97b7(0xac2)+_0x49749c['content'][_0xbf97b7(0x128a)](/\n/g,_0xbf97b7(0xd59))+_0xbf97b7(0xda9);else{if(_0x49749c['type']===_0xbf97b7(0x76d)&&_0x49749c[_0xbf97b7(0x127b)]){const _0x14bec9=_0x8f0871[_0xbf97b7(0x7b0)][_0xbf97b7(0x1418)]&&_0x49749c[_0xbf97b7(0xe0d)]?_0xbf97b7(0xe88)+_0x49749c['image_prompt']:_0xbf97b7(0x83f);_0x644d9a=_0xfd5297?_0xfd5297+_0xbf97b7(0x4d0)+_0x14bec9+_0xbf97b7(0x4c7):'<img\x20src=\x22'+_0x14bec9+_0xbf97b7(0x1181);}else{if(_0x49749c['type']===_0xbf97b7(0x12d0)){const _0xe6755b=_0x8f0871[_0xbf97b7(0x7b0)][_0xbf97b7(0x1418)]&&_0x49749c[_0xbf97b7(0xe0d)]?_0xbf97b7(0xe88)+_0x49749c[_0xbf97b7(0xe0d)]:_0xbf97b7(0x83f);_0x644d9a=_0xfd5297?_0xfd5297+'<div\x20style=\x22margin-top:10px;\x22><img\x20src=\x22'+_0xe6755b+_0xbf97b7(0xe86)+_0x49749c['hiddenContent']+_0xbf97b7(0x1ab):'<img\x20src=\x22'+_0xe6755b+_0xbf97b7(0xe86)+_0x49749c[_0xbf97b7(0x59a)]+'\x22>';}}}let _0x3a1161='';_0x49749c[_0xbf97b7(0x48b)]&&_0x49749c[_0xbf97b7(0x48b)]['length']>0x0&&(_0x3a1161=_0xbf97b7(0x661)+_0x49749c[_0xbf97b7(0x48b)][_0xbf97b7(0xcc2)]('、')+_0xbf97b7(0x13d2));let _0x2e517f='';_0x49749c['comments']&&_0x49749c[_0xbf97b7(0xbab)][_0xbf97b7(0xac0)]>0x0&&(_0x2e517f=_0xbf97b7(0x2d7),_0x49749c[_0xbf97b7(0xbab)][_0xbf97b7(0x458)]((_0x71169d,_0x2d225b)=>{const _0x8da7e9=_0xbf97b7;if(typeof _0x71169d===_0x8da7e9(0xf2e)&&_0x71169d!==null&&_0x71169d[_0x8da7e9(0xa7e)]){const _0x471c3f=_0x71169d[_0x8da7e9(0xa7e)],_0x175e20=_0xc4efbd(_0x471c3f);let _0x3210d6;_0x4a5ebd['test'](_0x71169d[_0x8da7e9(0xda3)])?_0x3210d6=_0x8da7e9(0x131f)+_0x71169d['text']+_0x8da7e9(0x1175):_0x3210d6=_0x71169d['text'];let _0x53d166='';if(_0x71169d[_0x8da7e9(0x5ee)]){const _0x205ca8=_0xc4efbd(_0x71169d['replyTo']);_0x53d166=_0x8da7e9(0xfa5)+_0x175e20+_0x8da7e9(0xba9)+_0x205ca8+'</span>:\x20'+_0x3210d6;}else _0x53d166=_0x8da7e9(0xfa5)+_0x175e20+_0x8da7e9(0xdb6)+_0x3210d6;_0x2e517f+='<div\x20class=\x22comment-item\x22\x20data-post-id=\x22'+_0x49749c['id']+_0x8da7e9(0x7b1)+_0x471c3f+_0x8da7e9(0x10f9)+_0x175e20+_0x8da7e9(0xfe9)+_0x53d166+_0x8da7e9(0xc3b)+_0x2d225b+_0x8da7e9(0x879);}else _0x2e517f+=_0x8da7e9(0xada)+String(_0x71169d)+_0x8da7e9(0x1160);}),_0x2e517f+=_0xbf97b7(0xda9)),_0xe677d3=''+_0x3a1161+_0x2e517f;}else{if(_0x44eac4['type']===_0xbf97b7(0x659)){const _0x293e14=_0x44eac4[_0xbf97b7(0x1469)],_0x4e0e0a=_0x8f0871['chats'][_0x44eac4[_0xbf97b7(0xe94)]];if(!_0x4e0e0a)continue;_0x29bb15=_0xbf97b7(0x129c)+_0x4e0e0a[_0xbf97b7(0x1023)]+'\x20的聊天';const _0x54e787=_0x293e14[_0xbf97b7(0xc92)]===_0xbf97b7(0xcb0);let _0x41d1c1,_0x58dcbc;if(_0x54e787)_0x41d1c1=_0x4e0e0a['isGroup']?_0x4e0e0a[_0xbf97b7(0x12d7)]['myNickname']||'我':'我',_0x58dcbc=_0x4e0e0a[_0xbf97b7(0x12d7)][_0xbf97b7(0x38a)]||(_0x4e0e0a[_0xbf97b7(0x1364)]?_0x2c882e:_0x1a2fc1);else{if(_0x4e0e0a[_0xbf97b7(0x1364)]){const _0x2f5f1d=_0x4e0e0a[_0xbf97b7(0x2cf)][_0xbf97b7(0x7ed)](_0x3e0b74=>_0x3e0b74[_0xbf97b7(0x93e)]===_0x293e14[_0xbf97b7(0x213)]);_0x41d1c1=_0x293e14[_0xbf97b7(0x213)],_0x58dcbc=_0x2f5f1d?_0x2f5f1d[_0xbf97b7(0xc61)]:_0x29d47b;}else _0x41d1c1=_0x4e0e0a[_0xbf97b7(0x1023)],_0x58dcbc=_0x4e0e0a[_0xbf97b7(0x12d7)][_0xbf97b7(0xce8)]||_0x1a2fc1;}_0x2aff60=_0xbf97b7(0x131f)+_0x58dcbc+'\x22\x20class=\x22avatar\x22><div\x20class=\x22info\x22><div\x20class=\x22name\x22>'+_0x41d1c1+_0xbf97b7(0x2fa);if(typeof _0x293e14[_0xbf97b7(0x1469)]===_0xbf97b7(0x857)&&_0x4a5ebd[_0xbf97b7(0x3fb)](_0x293e14['content']))_0x644d9a=_0xbf97b7(0x131f)+_0x293e14[_0xbf97b7(0x1469)]+'\x22\x20class=\x22sticker-image\x22\x20style=\x22max-width:\x2080px;\x20max-height:\x2080px;\x22>';else Array['isArray'](_0x293e14[_0xbf97b7(0x1469)])&&_0x293e14['content'][0x0]?.[_0xbf97b7(0x682)]===_0xbf97b7(0xa58)?_0x644d9a='<img\x20src=\x22'+_0x293e14[_0xbf97b7(0x1469)][0x0][_0xbf97b7(0xa58)][_0xbf97b7(0x3f5)]+'\x22\x20class=\x22chat-image\x22>':_0x644d9a=String(_0x293e14['content']||'')['replace'](/\n/g,'<br>');}else{if(_0x44eac4['type']===_0xbf97b7(0xbaa)){const _0x3f3c16=_0x44eac4[_0xbf97b7(0x1469)];_0x29bb15=_0xbf97b7(0xf0d)+_0x3f3c16[_0xbf97b7(0x28b)]+_0xbf97b7(0x10bd);const _0x444c29=_0x8f0871[_0xbf97b7(0x1260)][_0x3f3c16[_0xbf97b7(0xfd7)]],_0x557787=_0x444c29?_0x444c29['settings']['aiAvatar']:_0x1a2fc1;_0x2aff60=_0xbf97b7(0x131f)+_0x557787+'\x22\x20class=\x22avatar\x22><div\x20class=\x22info\x22><div\x20class=\x22name\x22>'+_0x3f3c16[_0xbf97b7(0x28b)]+'</div></div>';const _0x15b9e4=_0x3f3c16[_0xbf97b7(0x1469)]||'',_0x116670=_0x3de267(_0x15b9e4)[_0xbf97b7(0x128a)](/\n/g,_0xbf97b7(0xd59));_0x644d9a=_0xbf97b7(0x13bc)+_0x3f3c16[_0xbf97b7(0x1187)]+_0xbf97b7(0xa48)+_0x116670+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}else{if(_0x44eac4[_0xbf97b7(0x682)]==='char_browser_article'){const _0x3e011d=_0x44eac4['content'];_0x29bb15=_0xbf97b7(0xf0d)+_0x3e011d[_0xbf97b7(0x28b)]+_0xbf97b7(0x1147);const _0x8c4655=_0x8f0871[_0xbf97b7(0x1260)][_0x3e011d[_0xbf97b7(0xfd7)]],_0xe2d2af=_0x8c4655?_0x8c4655[_0xbf97b7(0x12d7)][_0xbf97b7(0xce8)]:_0x1a2fc1;_0x2aff60=_0xbf97b7(0x131f)+_0xe2d2af+_0xbf97b7(0x1488)+_0x3e011d[_0xbf97b7(0x28b)]+_0xbf97b7(0x2fa),_0x644d9a=_0xbf97b7(0x1512)+_0x3e011d[_0xbf97b7(0x1187)]+_0xbf97b7(0x3d1)+(_0x3e011d[_0xbf97b7(0x1469)]||'')[_0xbf97b7(0x128a)](/\n/g,_0xbf97b7(0xd59))+_0xbf97b7(0x347);}else{if(_0x44eac4[_0xbf97b7(0x682)]===_0xbf97b7(0x36a)){const _0x52457a=_0x44eac4[_0xbf97b7(0x1469)];_0x29bb15=_0xbf97b7(0xf0d)+_0x52457a[_0xbf97b7(0x28b)]+_0xbf97b7(0x13ed);const _0x145744=_0x8f0871['chats'][_0x52457a[_0xbf97b7(0xfd7)]],_0x1bcb75=_0x145744?_0x145744['settings'][_0xbf97b7(0xce8)]:_0x1a2fc1;_0x2aff60=_0xbf97b7(0x131f)+_0x1bcb75+_0xbf97b7(0x1488)+_0x52457a[_0xbf97b7(0x28b)]+_0xbf97b7(0x2fa),_0x644d9a='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22memo-title\x22>'+_0x52457a[_0xbf97b7(0x1187)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22memo-content-preview\x22>'+_0x52457a['content']['replace'](/\n/g,'<br>')+_0xbf97b7(0x13e3);}}}}}_0x39ef7e[_0xbf97b7(0x1331)]=_0xbf97b7(0xe50)+_0x2aff60+_0xbf97b7(0x1445)+_0x29bb15+'</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22fav-card-content\x22>'+_0x644d9a+_0xbf97b7(0xb95)+_0xe677d3,_0x174a84[_0xbf97b7(0x1155)](_0x39ef7e);}}async function _0x5164d8(){const _0x51c832=_0x7c5117;allFavoriteItems=await _0x372b85[_0x51c832(0xb69)]['orderBy'](_0x51c832(0xe55))[_0x51c832(0xaf5)]()[_0x51c832(0x3bc)]();const _0x372ac3=document['getElementById']('favorites-search-input'),_0x1311ef=document[_0x51c832(0xfa0)](_0x51c832(0xd63));_0x372ac3[_0x51c832(0x4f6)]='',_0x1311ef[_0x51c832(0x63b)][_0x51c832(0x1248)]=_0x51c832(0x11b5),_0x2ca411(allFavoriteItems);}function _0x5de1bd(){const _0x4a780f=_0x7c5117;document['getElementById'](_0x4a780f(0xe0b))[_0x4a780f(0x4f6)]='',document[_0x4a780f(0xfa0)](_0x4a780f(0x878))[_0x4a780f(0x53e)]='',document[_0x4a780f(0xfa0)]('post-image-description')[_0x4a780f(0x4f6)]='',document[_0x4a780f(0xfa0)]('post-image-preview-container')[_0x4a780f(0x128f)][_0x4a780f(0x443)](_0x4a780f(0xdcc)),document[_0x4a780f(0xfa0)](_0x4a780f(0xdba))['style'][_0x4a780f(0x1248)]='none',document['getElementById'](_0x4a780f(0x686))['value']='',document[_0x4a780f(0xfa0)]('post-hidden-text')['value']='',document[_0x4a780f(0xfa0)](_0x4a780f(0x4d1))[_0x4a780f(0xb4a)]();}async function _0x1aecb6(){const _0x10d442=_0x7c5117,_0xc46905=await _0x3f65ed(_0x10d442(0xfa7),_0x10d442(0x6d7),{'confirmButtonClass':_0x10d442(0x611),'confirmText':_0x10d442(0x5ac)});if(!_0xc46905)return;await _0x4abd86(_0x10d442(0x3e1),_0x10d442(0xdd6)),console[_0x10d442(0x4ee)]('冗余数据清理流程已启动...');let _0x39b71f={'posts':0x0,'likes':0x0,'comments':0x0,'memories':0x0,'callRecords':0x0,'renderingRules':0x0,'groupMembers':0x0,'chatLinks':0x0};try{await _0x372b85[_0x10d442(0xf81)]('rw',_0x372b85[_0x10d442(0xd06)],async()=>{const _0x417271=_0x10d442,_0x315815=await _0x372b85[_0x417271(0x1260)][_0x417271(0x3bc)](),_0x3fbe6f=await _0x372b85[_0x417271(0x1269)][_0x417271(0x3bc)](),_0x20c867=new Set(_0x315815[_0x417271(0x556)](_0x4834be=>_0x4834be['id'])),_0x5df53c=new Set(_0x3fbe6f[_0x417271(0x556)](_0xcdae06=>_0x417271(0xbec)+_0xcdae06['id'])),_0x535d9f=new Set(_0x315815[_0x417271(0xde7)](_0x344e70=>!_0x344e70[_0x417271(0x1364)])[_0x417271(0x556)](_0xb3c2f6=>_0xb3c2f6[_0x417271(0x93e)]));_0x535d9f[_0x417271(0x1327)](_0x8f0871[_0x417271(0x9dd)][_0x417271(0xff8)]||_0x417271(0x8d4)),_0x3fbe6f[_0x417271(0x458)](_0x34759a=>_0x535d9f[_0x417271(0x1327)](_0x34759a[_0x417271(0x1023)]));for(const _0x517021 of _0x315815){let _0x380dc3=![];if(_0x517021['isGroup']&&_0x517021[_0x417271(0x2cf)]){const _0x4223dd=_0x517021[_0x417271(0x2cf)][_0x417271(0xac0)];_0x517021[_0x417271(0x2cf)]=_0x517021[_0x417271(0x2cf)][_0x417271(0xde7)](_0x7e9c3d=>_0x20c867['has'](_0x7e9c3d['id'])||_0x5df53c[_0x417271(0xd58)](_0x7e9c3d['id'])),_0x517021[_0x417271(0x2cf)][_0x417271(0xac0)]<_0x4223dd&&(_0x39b71f[_0x417271(0xd38)]+=_0x4223dd-_0x517021[_0x417271(0x2cf)][_0x417271(0xac0)],_0x380dc3=!![]);}if(_0x517021[_0x417271(0x12d7)]?.[_0x417271(0x6e0)]?.['length']>0x0){const _0x173707=_0x517021[_0x417271(0x12d7)][_0x417271(0x6e0)][_0x417271(0xac0)];_0x517021[_0x417271(0x12d7)][_0x417271(0x6e0)]=_0x517021[_0x417271(0x12d7)][_0x417271(0x6e0)][_0x417271(0xde7)](_0x573d86=>_0x20c867['has'](_0x573d86)),_0x517021[_0x417271(0x12d7)][_0x417271(0x6e0)][_0x417271(0xac0)]<_0x173707&&(_0x39b71f[_0x417271(0x85b)]+=_0x173707-_0x517021['settings'][_0x417271(0x6e0)]['length'],_0x380dc3=!![]);}_0x380dc3&&await _0x372b85[_0x417271(0x1260)][_0x417271(0x11d5)](_0x517021);}const _0x40943b=await _0x372b85['qzonePosts'][_0x417271(0x3bc)]();for(const _0x3536f7 of _0x40943b){let _0x32734f=![];const _0x45e706=_0x3536f7[_0x417271(0x11dd)]===_0x417271(0xcb0)||_0x20c867[_0x417271(0xd58)](_0x3536f7[_0x417271(0x11dd)])||_0x5df53c[_0x417271(0xd58)](_0x3536f7[_0x417271(0x11dd)]);if(!_0x45e706){await _0x372b85['qzonePosts'][_0x417271(0xf10)](_0x3536f7['id']),_0x39b71f[_0x417271(0xdb3)]++;continue;}if(_0x3536f7[_0x417271(0x48b)]&&_0x3536f7[_0x417271(0x48b)][_0x417271(0xac0)]>0x0){const _0x1bdfb5=_0x3536f7['likes']['length'];_0x3536f7[_0x417271(0x48b)]=_0x3536f7[_0x417271(0x48b)][_0x417271(0xde7)](_0x38cbc6=>_0x535d9f[_0x417271(0xd58)](_0x38cbc6)),_0x3536f7[_0x417271(0x48b)][_0x417271(0xac0)]<_0x1bdfb5&&(_0x39b71f[_0x417271(0x48b)]+=_0x1bdfb5-_0x3536f7['likes'][_0x417271(0xac0)],_0x32734f=!![]);}if(_0x3536f7[_0x417271(0xbab)]&&_0x3536f7['comments'][_0x417271(0xac0)]>0x0){const _0x16563b=_0x3536f7[_0x417271(0xbab)][_0x417271(0xac0)];_0x3536f7[_0x417271(0xbab)]=_0x3536f7[_0x417271(0xbab)][_0x417271(0xde7)](_0x42c26a=>{const _0x29333b=_0x417271;if(typeof _0x42c26a==='object'&&_0x42c26a[_0x29333b(0xa7e)])return _0x535d9f[_0x29333b(0xd58)](_0x42c26a[_0x29333b(0xa7e)]);return!![];}),_0x3536f7[_0x417271(0xbab)][_0x417271(0xac0)]<_0x16563b&&(_0x39b71f[_0x417271(0xbab)]+=_0x16563b-_0x3536f7[_0x417271(0xbab)][_0x417271(0xac0)],_0x32734f=!![]);}_0x32734f&&await _0x372b85[_0x417271(0x12c2)]['put'](_0x3536f7);}await _0x372b85[_0x417271(0x9ce)]['where']('chatId')[_0x417271(0x723)]([..._0x20c867])['delete']()[_0x417271(0x3c1)](_0x24119a=>_0x39b71f[_0x417271(0x9ce)]+=_0x24119a),await _0x372b85[_0x417271(0xe73)][_0x417271(0xdc7)](_0x417271(0xe94))[_0x417271(0x723)]([..._0x20c867])[_0x417271(0xf10)]()[_0x417271(0x3c1)](_0x466709=>_0x39b71f[_0x417271(0xe73)]+=_0x466709);const _0x599625=await _0x372b85[_0x417271(0x38c)][_0x417271(0x3bc)]();for(const _0x563d06 of _0x599625){_0x563d06[_0x417271(0xe94)]!=='global'&&!_0x20c867[_0x417271(0xd58)](_0x563d06[_0x417271(0xe94)])&&(await _0x372b85[_0x417271(0x38c)]['delete'](_0x563d06['id']),_0x39b71f['renderingRules']++);}});let _0x1c1b8e=_0x10d442(0x5bc),_0x4b93c0=![];Object[_0x10d442(0x545)](_0x39b71f)[_0x10d442(0x458)](([_0x4e12d2,_0x380c0e])=>{const _0x504100=_0x10d442;if(_0x380c0e>0x0){const _0xbf77a0={'posts':'动态','likes':'点赞','comments':'评论','memories':'记忆','callRecords':_0x504100(0xb2a),'renderingRules':_0x504100(0xe4f),'groupMembers':'群成员','chatLinks':_0x504100(0xb86)};_0x1c1b8e+=_0x504100(0x971)+_0x380c0e+_0x504100(0xf56)+(_0xbf77a0[_0x4e12d2]||_0x4e12d2)+'。\x0a',_0x4b93c0=!![];}});!_0x4b93c0&&(_0x1c1b8e=_0x10d442(0xbe2));_0x1c1b8e+='\x0a建议刷新页面以确保所有更改生效。',await _0x4abd86(_0x10d442(0x98f),_0x1c1b8e);const _0x2c0644=await _0x3f65ed(_0x10d442(0x754),_0x10d442(0x626));_0x2c0644&&location[_0x10d442(0x1003)]();}catch(_0x1944ad){console[_0x10d442(0x52b)]('清理冗余数据时出错:',_0x1944ad),await _0x4abd86(_0x10d442(0x10d6),'发生了一个错误:\x20'+_0x1944ad[_0x10d442(0x790)]);}}async function _0x1e43ca(){const _0xd2584=_0x7c5117;try{const _0x4f89dd={'version':0x1,'timestamp':Date['now']()},[_0x36808d,_0x48298e,_0x503655,_0x52f817,_0x1d2ed0,_0x41031f,_0x51a34f,_0x2c3fd4,_0x55549f,_0x57f3c8,_0x124f4f,_0x4c5c9a,_0x141b8f,_0x37413d,_0x33c034,_0x3f45bd,_0x2d5af2,_0xc2dc7f,_0x4f8f81,_0x450cd5,_0x2d9812,_0x207324,_0x57e933,_0xf89fe9,_0x525407]=await Promise[_0xd2584(0x8ab)]([_0x372b85[_0xd2584(0x1260)][_0xd2584(0x3bc)](),_0x372b85[_0xd2584(0x739)]['toArray'](),_0x372b85[_0xd2584(0x413)][_0xd2584(0x3bc)](),_0x372b85[_0xd2584(0xa78)][_0xd2584(0x70d)]('main'),_0x372b85['globalSettings'][_0xd2584(0x70d)]('main'),_0x372b85[_0xd2584(0x20a)][_0xd2584(0x3bc)](),_0x372b85[_0xd2584(0x5a3)]['get'](_0xd2584(0x286)),_0x372b85['qzoneSettings'][_0xd2584(0x70d)](_0xd2584(0x286)),_0x372b85[_0xd2584(0x12c2)][_0xd2584(0x3bc)](),_0x372b85[_0xd2584(0x85c)][_0xd2584(0x3bc)](),_0x372b85[_0xd2584(0x363)][_0xd2584(0x3bc)](),_0x372b85[_0xd2584(0xb69)][_0xd2584(0x3bc)](),_0x372b85[_0xd2584(0xdc8)]['toArray'](),_0x372b85['memories'][_0xd2584(0x3bc)](),_0x372b85[_0xd2584(0xa7a)]['toArray'](),_0x372b85[_0xd2584(0xd36)]['toArray'](),_0x372b85[_0xd2584(0x8ad)][_0xd2584(0x3bc)](),_0x372b85[_0xd2584(0xe73)][_0xd2584(0x3bc)](),_0x372b85[_0xd2584(0x38c)][_0xd2584(0x3bc)](),_0x372b85['doubanPosts']['toArray'](),_0x372b85['stickerCategories'][_0xd2584(0x3bc)](),_0x372b85[_0xd2584(0x937)][_0xd2584(0x3bc)](),_0x372b85[_0xd2584(0x1573)]['toArray'](),_0x372b85[_0xd2584(0xa5f)][_0xd2584(0x3bc)](),_0x372b85['npcs'][_0xd2584(0x3bc)]()]);Object[_0xd2584(0x189)](_0x4f89dd,{'chats':_0x36808d,'worldBooks':_0x48298e,'userStickers':_0x503655,'apiConfig':_0x52f817,'globalSettings':_0x1d2ed0,'personaPresets':_0x41031f,'musicLibrary':_0x51a34f,'qzoneSettings':_0x2c3fd4,'qzonePosts':_0x55549f,'qzoneAlbums':_0x57f3c8,'qzonePhotos':_0x124f4f,'favorites':_0x4c5c9a,'qzoneGroups':_0x141b8f,'memories':_0x37413d,'worldBookCategories':_0x33c034,'apiPresets':_0x3f45bd,'shoppingProducts':_0x2d5af2,'callRecords':_0xc2dc7f,'renderingRules':_0x4f8f81,'doubanPosts':_0x450cd5,'stickerCategories':_0x2d9812,'appearancePresets':_0x207324,'presets':_0x57e933,'presetCategories':_0xf89fe9,'npcs':_0x525407});const _0x202fc7=new Blob([JSON[_0xd2584(0x7cc)](_0x4f89dd,null,0x2)],{'type':_0xd2584(0x4b5)}),_0x968f8e=URL[_0xd2584(0xe35)](_0x202fc7),_0x123aba=Object[_0xd2584(0x189)](document[_0xd2584(0xb4e)]('a'),{'href':_0x968f8e,'download':_0xd2584(0x51c)+new Date()[_0xd2584(0x23b)]()[_0xd2584(0x505)]('T')[0x0]+_0xd2584(0x613)});_0x123aba[_0xd2584(0xb4a)](),URL['revokeObjectURL'](_0x968f8e),await _0x4abd86(_0xd2584(0x1057),_0xd2584(0xd2e));}catch(_0x2969b4){console[_0xd2584(0x52b)]('导出数据时出错:',_0x2969b4),await _0x4abd86(_0xd2584(0xf83),_0xd2584(0x1407)+_0x2969b4[_0xd2584(0x790)]);}}async function _0x1b45b6(_0x37d23f){const _0x1d8158=_0x7c5117;try{await _0x372b85[_0x1d8158(0xf81)]('rw',_0x372b85[_0x1d8158(0xd06)],async()=>{const _0x23edf1=_0x1d8158;for(const _0x59a6ff of _0x372b85[_0x23edf1(0xd06)]){await _0x59a6ff[_0x23edf1(0xf7d)]();}for(const _0x359fcf in _0x37d23f){Array['isArray'](_0x37d23f[_0x359fcf])&&(console['log'](_0x23edf1(0x14b1)+_0x359fcf+_0x23edf1(0xe18)+_0x37d23f[_0x359fcf][_0x23edf1(0xac0)]),await _0x372b85['table'](_0x359fcf)[_0x23edf1(0x65d)](_0x37d23f[_0x359fcf]));}});}catch(_0x20c47b){throw new Error(_0x1d8158(0x8f3)+_0x20c47b[_0x1d8158(0x790)]);}}async function _0x16abaa(_0x139b3e){const _0x4a72ce=_0x7c5117;if(!_0x139b3e)return;await _0x4abd86(_0x4a72ce(0x3e1),_0x4a72ce(0x84c));try{const _0x2bdd9c=await _0x139b3e[_0x4a72ce(0xda3)](),_0x57d96f=JSON[_0x4a72ce(0x4a0)](_0x2bdd9c);let _0x7cd22b,_0x2c7c30;if(_0x57d96f[_0x4a72ce(0x3cc)]&&typeof _0x57d96f['data']===_0x4a72ce(0xf2e)&&(_0x57d96f[_0x4a72ce(0x3cc)][_0x4a72ce(0x1260)]||_0x57d96f[_0x4a72ce(0x3cc)][_0x4a72ce(0x739)]))console[_0x4a72ce(0x4ee)]('检测到新版流式备份文件...'),_0x7cd22b=_0x57d96f[_0x4a72ce(0x3cc)],_0x2c7c30=_0x4a72ce(0x14ab);else{if(_0x57d96f['chats']||_0x57d96f['worldBooks'])console[_0x4a72ce(0x4ee)](_0x4a72ce(0x445)),_0x7cd22b=_0x57d96f,_0x2c7c30='legacy';else throw new Error(_0x4a72ce(0x27a));}pendingBackupData={'type':_0x2c7c30,'content':_0x7cd22b},_0x404da7(_0x7cd22b);}catch(_0x3fd0b3){console[_0x4a72ce(0x52b)]('导入数据时出错:',_0x3fd0b3),pendingBackupData=null,await _0x4abd86(_0x4a72ce(0x11c5),_0x4a72ce(0x6b8)+_0x3fd0b3['message']);}}function _0x404da7(_0x32a503){const _0x326993=_0x7c5117,_0x316f82=document['getElementById'](_0x326993(0x1543)),_0x58cb4f=document['getElementById'](_0x326993(0x320));_0x58cb4f[_0x326993(0x1331)]='';const _0x27bd41={'chats':'聊天会话','worldBooks':_0x326993(0x130e),'worldBookCategories':_0x326993(0x93b),'presets':'离线预设','presetCategories':_0x326993(0x122e),'userStickers':_0x326993(0xf03),'stickerCategories':_0x326993(0x13a9),'customAvatarFrames':_0x326993(0xa24),'apiConfig':'API配置','globalSettings':_0x326993(0xc4c),'personaPresets':_0x326993(0x70e),'qzoneSettings':_0x326993(0x130c),'qzonePosts':'动态','qzoneAlbums':'相册','favorites':'收藏','memories':'回忆','callRecords':'通话记录','shoppingProducts':'商品','apiPresets':_0x326993(0x728),'renderingRules':_0x326993(0xe4f),'appearancePresets':_0x326993(0xbc5),'npcs':_0x326993(0x538)};let _0x20cc07=![];for(const _0x37f912 in _0x27bd41){if(_0x32a503[_0x37f912]&&(Array[_0x326993(0x345)](_0x32a503[_0x37f912])?_0x32a503[_0x37f912][_0x326993(0xac0)]>0x0:_0x32a503[_0x37f912])){const _0x3c2e17=Array['isArray'](_0x32a503[_0x37f912])?_0x32a503[_0x37f912][_0x326993(0xac0)]:0x1,_0x189b72=document['createElement']('li');_0x189b72[_0x326993(0xc62)]=_0x27bd41[_0x37f912]+':\x20'+_0x3c2e17+_0x326993(0x593),_0x58cb4f[_0x326993(0x1155)](_0x189b72),_0x20cc07=!![];}}!_0x20cc07&&(_0x58cb4f[_0x326993(0x1331)]='<li>未在此文件中找到可识别的数据。</li>'),document[_0x326993(0xfa0)](_0x326993(0xf22))[_0x326993(0x9f0)]=()=>{const _0x5355e9=_0x326993;_0x316f82['classList'][_0x5355e9(0x443)]('visible'),_0x5c941a(pendingBackupData);},document[_0x326993(0xfa0)]('confirm-selective-import-btn')[_0x326993(0x9f0)]=()=>{const _0x4f83b6=_0x326993;_0x316f82[_0x4f83b6(0x128f)][_0x4f83b6(0x443)](_0x4f83b6(0xdcc)),_0x116eec(pendingBackupData[_0x4f83b6(0x1469)]);},document['getElementById']('cancel-import-options-btn')[_0x326993(0x9f0)]=()=>{const _0x5e11c4=_0x326993;_0x316f82[_0x5e11c4(0x128f)][_0x5e11c4(0x443)](_0x5e11c4(0xdcc)),pendingBackupData=null;},_0x316f82[_0x326993(0x128f)][_0x326993(0x1327)]('visible');}async function _0x5c941a(_0x3af87e){const _0x13507e=_0x7c5117;if(!_0x3af87e)return;const _0x8ebf4f=await _0x3f65ed(_0x13507e(0x109a),'【完全导入】将删除您当前的所有数据并替换为备份文件中的内容。此操作不可撤销！<br><br><strong>确定要继续吗？</strong>',{'confirmButtonClass':_0x13507e(0x611),'confirmText':_0x13507e(0x921)});if(!_0x8ebf4f){pendingBackupData=null;return;}await _0x4abd86(_0x13507e(0x3e1),_0x13507e(0xa6d));try{if(_0x3af87e[_0x13507e(0x682)]===_0x13507e(0x14ab))await _0x1b45b6(_0x3af87e['content']);else{if(_0x3af87e['type']===_0x13507e(0x1294))await _0x24b4b0(_0x3af87e[_0x13507e(0x1469)]);else throw new Error('未知的备份类型。');}await _0x4abd86(_0x13507e(0x1471),_0x13507e(0xdf7)),setTimeout(()=>window[_0x13507e(0x960)][_0x13507e(0x1003)](),0x5dc);}catch(_0x58b5b5){console[_0x13507e(0x52b)](_0x13507e(0xb1f),_0x58b5b5),await _0x4abd86(_0x13507e(0x11c5),'文件应用失败:\x20'+_0x58b5b5['message']);}finally{pendingBackupData=null;}}function _0x116eec(_0x185746){const _0x3ce415=_0x7c5117,_0x4c5c81=document[_0x3ce415(0xfa0)](_0x3ce415(0x5d5)),_0x3369c5=document[_0x3ce415(0xfa0)](_0x3ce415(0x9d2)),_0xf194e7=document[_0x3ce415(0xfa0)](_0x3ce415(0x383));_0x3369c5[_0x3ce415(0x1331)]='',_0xf194e7[_0x3ce415(0xb34)]=!![];const _0x4a11e4={'chats':_0x3ce415(0xe49),'worldBooks':_0x3ce415(0x130e),'worldBookCategories':_0x3ce415(0x93b),'presets':_0x3ce415(0xc3a),'presetCategories':_0x3ce415(0x122e),'userStickers':_0x3ce415(0xf03),'stickerCategories':_0x3ce415(0x13a9),'customAvatarFrames':'头像框','apiConfig':'API配置','globalSettings':_0x3ce415(0xc4c),'personaPresets':_0x3ce415(0x70e),'qzoneSettings':_0x3ce415(0x130c),'qzonePosts':'动态','qzoneAlbums':'相册','favorites':'收藏','memories':'回忆','callRecords':_0x3ce415(0xb2a),'shoppingProducts':'商品','apiPresets':'API预设','renderingRules':'渲染规则','appearancePresets':_0x3ce415(0xbc5),'npcs':_0x3ce415(0x538)};let _0x442f6e=![];for(const _0x13a0c9 in _0x4a11e4){if(_0x185746[_0x13a0c9]&&(Array[_0x3ce415(0x345)](_0x185746[_0x13a0c9])?_0x185746[_0x13a0c9][_0x3ce415(0xac0)]>0x0:_0x185746[_0x13a0c9])){const _0x516fa9=Array['isArray'](_0x185746[_0x13a0c9])?_0x185746[_0x13a0c9][_0x3ce415(0xac0)]:0x1,_0x4cc416=!Array[_0x3ce415(0x345)](_0x185746[_0x13a0c9]),_0x281965=document[_0x3ce415(0xb4e)]('div');_0x281965['className']='clear-posts-item\x20selected',_0x281965[_0x3ce415(0x8df)][_0x3ce415(0xfbe)]=_0x13a0c9,_0x281965['innerHTML']=_0x3ce415(0x8eb)+_0x4a11e4[_0x13a0c9]+'\x20('+_0x516fa9+'\x20条/个)</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4cc416?_0x3ce415(0x444):'')+_0x3ce415(0x812),_0x3369c5[_0x3ce415(0x1155)](_0x281965),_0x442f6e=!![];}}!_0x442f6e&&(_0x3369c5[_0x3ce415(0x1331)]=_0x3ce415(0x537)),document[_0x3ce415(0xfa0)]('confirm-merge-import-btn')['onclick']=()=>_0x4b2ff0(pendingBackupData),document[_0x3ce415(0xfa0)](_0x3ce415(0x8a4))[_0x3ce415(0x9f0)]=()=>{const _0x53f77c=_0x3ce415;_0x4c5c81[_0x53f77c(0x128f)][_0x53f77c(0x443)](_0x53f77c(0xdcc)),pendingBackupData=null;},_0xf194e7[_0x3ce415(0x1563)]=_0x306151=>{const _0x2d1edc=_0x3ce415,_0x31d710=_0x306151[_0x2d1edc(0x10c2)][_0x2d1edc(0xb34)];_0x3369c5[_0x2d1edc(0x2a1)]('.clear-posts-item')[_0x2d1edc(0x458)](_0x25bc17=>{const _0x888598=_0x2d1edc;_0x25bc17[_0x888598(0x128f)]['toggle']('selected',_0x31d710),_0x25bc17['querySelector'](_0x888598(0x977))['classList'][_0x888598(0xb80)](_0x888598(0xaa0),_0x31d710);});},_0x3369c5[_0x3ce415(0x9f0)]=_0x3f920c=>{const _0x5e37fb=_0x3ce415,_0x1342ec=_0x3f920c['target']['closest'](_0x5e37fb(0xfd6));_0x1342ec&&(_0x1342ec[_0x5e37fb(0x128f)]['toggle']('selected'),_0x1342ec[_0x5e37fb(0xfb1)](_0x5e37fb(0x977))[_0x5e37fb(0x128f)][_0x5e37fb(0xb80)](_0x5e37fb(0xaa0)));},_0x4c5c81['classList'][_0x3ce415(0x1327)](_0x3ce415(0xdcc));}async function _0x4b2ff0(_0x4869e5){const _0x1708ba=_0x7c5117;if(!_0x4869e5)return;const _0x16dc6d=document[_0x1708ba(0x2a1)](_0x1708ba(0xbf6));if(_0x16dc6d[_0x1708ba(0xac0)]===0x0){alert(_0x1708ba(0xaf7));return;}const _0x4c1827=Array[_0x1708ba(0x3aa)](_0x16dc6d)[_0x1708ba(0x556)](_0x6ef416=>_0x6ef416['dataset'][_0x1708ba(0xfbe)]),_0x374ca2=_0x4869e5[_0x1708ba(0x1469)],_0x2940b0=await _0x3f65ed('确认合并？',_0x1708ba(0x1322),{'confirmText':_0x1708ba(0x272)});if(!_0x2940b0)return;await _0x4abd86(_0x1708ba(0x3e1),'正在合并数据，请勿关闭页面...');try{await _0x372b85[_0x1708ba(0xf81)]('rw',_0x372b85[_0x1708ba(0xd06)],async()=>{const _0x3ed834=_0x1708ba;for(const _0x13230f of _0x4c1827){const _0x35362c=_0x374ca2[_0x13230f];if(!_0x35362c)continue;const _0x404b94=_0x372b85[_0x3ed834(0x810)](_0x13230f);if(!_0x404b94){console[_0x3ed834(0x7fa)](_0x3ed834(0x1091)+_0x13230f+_0x3ed834(0xca4));continue;}if(Array[_0x3ed834(0x345)](_0x35362c))console['log'](_0x3ed834(0x4a9)+_0x35362c['length']+'\x20条记录到\x20'+_0x13230f+_0x3ed834(0x1111)),await _0x404b94[_0x3ed834(0x65d)](_0x35362c);else{if(typeof _0x35362c===_0x3ed834(0xf2e)&&_0x35362c['id'])console[_0x3ed834(0x4ee)]('正在合并单条记录到\x20'+_0x13230f+_0x3ed834(0x1111)),await _0x404b94[_0x3ed834(0x11d5)](_0x35362c);else{if(typeof _0x35362c===_0x3ed834(0xf2e)){console[_0x3ed834(0x4ee)](_0x3ed834(0xd72)+_0x13230f+_0x3ed834(0x1111));const _0x4211d8=await _0x404b94[_0x3ed834(0xade)]()[_0x3ed834(0x102a)]()||{},_0x43085e={..._0x4211d8,..._0x35362c};if(_0x4211d8['id'])_0x43085e['id']=_0x4211d8['id'];else(_0x13230f===_0x3ed834(0xa78)||_0x13230f===_0x3ed834(0x9dd)||_0x13230f==='globalSettings'||_0x13230f===_0x3ed834(0x5a3))&&(_0x43085e['id']=_0x3ed834(0x286));await _0x404b94[_0x3ed834(0x11d5)](_0x43085e);}}}}}),await _0x4abd86(_0x1708ba(0xb9c),_0x1708ba(0x12ac)),setTimeout(()=>window[_0x1708ba(0x960)][_0x1708ba(0x1003)](),0x5dc);}catch(_0x42b667){console[_0x1708ba(0x52b)](_0x1708ba(0x1313),_0x42b667),await _0x4abd86(_0x1708ba(0x3d2),'文件应用失败:\x20'+_0x42b667[_0x1708ba(0x790)]);}finally{pendingBackupData=null;}}async function _0x24b4b0(_0x537fba){const _0xb40e38=_0x7c5117;try{await _0x372b85[_0xb40e38(0xf81)]('rw',_0x372b85[_0xb40e38(0xd06)],async()=>{const _0x27c9b2=_0xb40e38;await _0x372b85[_0x27c9b2(0x1260)][_0x27c9b2(0xf7d)](),await _0x372b85['worldBooks'][_0x27c9b2(0xf7d)]();for(const _0x716bbb of _0x372b85[_0x27c9b2(0xd06)]){await _0x716bbb['clear']();}if(Array['isArray'](_0x537fba[_0x27c9b2(0x1260)]))await _0x372b85[_0x27c9b2(0x1260)][_0x27c9b2(0x65d)](_0x537fba['chats']);if(Array['isArray'](_0x537fba[_0x27c9b2(0x739)]))await _0x372b85['worldBooks'][_0x27c9b2(0x65d)](_0x537fba[_0x27c9b2(0x739)]);if(Array[_0x27c9b2(0x345)](_0x537fba[_0x27c9b2(0x413)]))await _0x372b85['userStickers'][_0x27c9b2(0x65d)](_0x537fba['userStickers']);if(_0x537fba['apiConfig'])await _0x372b85['apiConfig'][_0x27c9b2(0x11d5)](_0x537fba['apiConfig']);if(_0x537fba[_0x27c9b2(0x7b0)])await _0x372b85[_0x27c9b2(0x7b0)][_0x27c9b2(0x11d5)](_0x537fba['globalSettings']);if(Array[_0x27c9b2(0x345)](_0x537fba[_0x27c9b2(0x20a)]))await _0x372b85[_0x27c9b2(0x20a)]['bulkPut'](_0x537fba['personaPresets']);if(_0x537fba[_0x27c9b2(0x5a3)])await _0x372b85[_0x27c9b2(0x5a3)][_0x27c9b2(0x11d5)](_0x537fba[_0x27c9b2(0x5a3)]);if(_0x537fba[_0x27c9b2(0x9dd)])await _0x372b85[_0x27c9b2(0x9dd)]['put'](_0x537fba[_0x27c9b2(0x9dd)]);if(Array[_0x27c9b2(0x345)](_0x537fba['qzonePosts']))await _0x372b85['qzonePosts']['bulkPut'](_0x537fba[_0x27c9b2(0x12c2)]);if(Array[_0x27c9b2(0x345)](_0x537fba[_0x27c9b2(0x85c)]))await _0x372b85['qzoneAlbums'][_0x27c9b2(0x65d)](_0x537fba[_0x27c9b2(0x85c)]);if(Array[_0x27c9b2(0x345)](_0x537fba[_0x27c9b2(0x363)]))await _0x372b85[_0x27c9b2(0x363)][_0x27c9b2(0x65d)](_0x537fba[_0x27c9b2(0x363)]);if(Array[_0x27c9b2(0x345)](_0x537fba['favorites']))await _0x372b85[_0x27c9b2(0xb69)]['bulkPut'](_0x537fba['favorites']);if(Array[_0x27c9b2(0x345)](_0x537fba[_0x27c9b2(0xdc8)]))await _0x372b85[_0x27c9b2(0xdc8)][_0x27c9b2(0x65d)](_0x537fba['qzoneGroups']);if(Array[_0x27c9b2(0x345)](_0x537fba[_0x27c9b2(0x9ce)]))await _0x372b85['memories'][_0x27c9b2(0x65d)](_0x537fba[_0x27c9b2(0x9ce)]);if(Array[_0x27c9b2(0x345)](_0x537fba[_0x27c9b2(0xa7a)]))await _0x372b85['worldBookCategories'][_0x27c9b2(0x65d)](_0x537fba[_0x27c9b2(0xa7a)]);if(Array[_0x27c9b2(0x345)](_0x537fba[_0x27c9b2(0xd36)]))await _0x372b85[_0x27c9b2(0xd36)][_0x27c9b2(0x65d)](_0x537fba[_0x27c9b2(0xd36)]);if(Array[_0x27c9b2(0x345)](_0x537fba[_0x27c9b2(0x8ad)]))await _0x372b85[_0x27c9b2(0x8ad)][_0x27c9b2(0x65d)](_0x537fba['shoppingProducts']);if(Array[_0x27c9b2(0x345)](_0x537fba[_0x27c9b2(0xe73)]))await _0x372b85['callRecords']['bulkPut'](_0x537fba[_0x27c9b2(0xe73)]);if(Array[_0x27c9b2(0x345)](_0x537fba[_0x27c9b2(0x38c)]))await _0x372b85['renderingRules']['bulkPut'](_0x537fba['renderingRules']);if(Array[_0x27c9b2(0x345)](_0x537fba['doubanPosts']))await _0x372b85[_0x27c9b2(0x5ca)][_0x27c9b2(0x65d)](_0x537fba[_0x27c9b2(0x5ca)]);if(Array[_0x27c9b2(0x345)](_0x537fba[_0x27c9b2(0xdec)]))await _0x372b85[_0x27c9b2(0xdec)][_0x27c9b2(0x65d)](_0x537fba['stickerCategories']);if(Array[_0x27c9b2(0x345)](_0x537fba[_0x27c9b2(0x937)]))await _0x372b85['appearancePresets'][_0x27c9b2(0x65d)](_0x537fba[_0x27c9b2(0x937)]);if(Array[_0x27c9b2(0x345)](_0x537fba[_0x27c9b2(0x1573)]))await _0x372b85[_0x27c9b2(0x1573)]['bulkPut'](_0x537fba[_0x27c9b2(0x1573)]);if(Array['isArray'](_0x537fba['presetCategories']))await _0x372b85[_0x27c9b2(0xa5f)][_0x27c9b2(0x65d)](_0x537fba[_0x27c9b2(0xa5f)]);if(Array['isArray'](_0x537fba[_0x27c9b2(0x1269)]))await _0x372b85[_0x27c9b2(0x1269)][_0x27c9b2(0x65d)](_0x537fba[_0x27c9b2(0x1269)]);});}catch(_0x4571cf){throw new Error(_0xb40e38(0xede)+_0x4571cf['message']);}}function _0x2dccde(_0x2f4a5f,_0x277b8e=![]){const _0x192418=_0x7c5117;if(!_0x2f4a5f){_0x323302['innerHTML']='',document[_0x192418(0xfa0)]('font-preview')[_0x192418(0x63b)][_0x192418(0x437)]='';return;}const _0x1f3e03=_0x192418(0x875),_0x5a451d=_0x192418(0xb2f)+_0x1f3e03+_0x192418(0x98d)+_0x2f4a5f+'\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-display:\x20swap;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}';if(_0x277b8e){const _0x1daf44=document[_0x192418(0xfa0)]('preview-font-style')||document[_0x192418(0xb4e)](_0x192418(0x63b));_0x1daf44['id']='preview-font-style',_0x1daf44['innerHTML']=_0x5a451d;if(!document['getElementById'](_0x192418(0x90b)))document[_0x192418(0xdf2)][_0x192418(0x1155)](_0x1daf44);document[_0x192418(0xfa0)]('font-preview')[_0x192418(0x63b)][_0x192418(0x437)]='\x27'+_0x1f3e03+'\x27,\x20\x27bulangni\x27,\x20sans-serif';}else _0x323302[_0x192418(0x1331)]=_0x192418(0x11b9)+_0x5a451d+_0x192418(0x9af)+_0x1f3e03+_0x192418(0x2b7);}async function _0x2ae8a6(){const _0x26434c=_0x7c5117;_0x323302['innerHTML']='',_0x8f0871[_0x26434c(0x7b0)][_0x26434c(0x1208)]='',await _0x372b85[_0x26434c(0x7b0)][_0x26434c(0x11d5)](_0x8f0871['globalSettings']),document[_0x26434c(0xfa0)]('font-url-input')[_0x26434c(0x4f6)]='',document[_0x26434c(0xfa0)](_0x26434c(0x13fa))[_0x26434c(0x63b)][_0x26434c(0x437)]='',alert('已恢复默认字体。');}async function _0x3fa188(){const _0x29b498=_0x7c5117,[_0x1b6c12,_0x37e5f2,_0x3a4051,_0x480277,_0x1628f2,_0x59cd69,_0x18238b,_0x5bad74,_0xe2ff37,_0x216d8f,_0x46f951]=await Promise[_0x29b498(0x8ab)]([_0x372b85[_0x29b498(0x1260)][_0x29b498(0x3bc)](),_0x372b85[_0x29b498(0xa78)][_0x29b498(0x70d)](_0x29b498(0x286)),_0x372b85['globalSettings']['get']('main'),_0x372b85[_0x29b498(0x413)][_0x29b498(0x3bc)](),_0x372b85[_0x29b498(0x739)][_0x29b498(0x3bc)](),_0x372b85['musicLibrary'][_0x29b498(0x70d)]('main'),_0x372b85[_0x29b498(0x20a)][_0x29b498(0x3bc)](),_0x372b85[_0x29b498(0x9dd)][_0x29b498(0x70d)](_0x29b498(0x286)),_0x372b85['favorites'][_0x29b498(0x1554)](_0x29b498(0xe55))['reverse']()[_0x29b498(0x3bc)](),_0x372b85[_0x29b498(0x9ce)][_0x29b498(0x3bc)](),_0x372b85[_0x29b498(0x1573)]['toArray']()]);_0x8f0871['presets']=_0x46f951||[];const _0x174ad5={'id':_0x29b498(0x286),'showStatusBar':![],'wallpaper':_0x29b498(0x585),'fontUrl':'','enableBackgroundActivity':![],'backgroundActivityInterval':0x3c,'blockCooldownHours':0x1,'apiTemperature':0.8,'appIcons':{..._0x1043ad},'cphoneWallpaper':_0x29b498(0x13de),'cphoneAppIcons':{..._0x410e99},'globalCss':'','notificationSoundUrl':'','widgetData':{},'globalChatBackground':'','enableAiDrawing':!![],'chatActionButtonsOrder':null,'shoppingCategoryCount':0x3,'shoppingProductCount':0x8,'chatRenderWindow':0x32};_0x8f0871[_0x29b498(0x7b0)]={..._0x174ad5,..._0x3a4051||{}},_0x8f0871[_0x29b498(0x7b0)]['appIcons']={..._0x174ad5[_0x29b498(0x544)],..._0x8f0871[_0x29b498(0x7b0)][_0x29b498(0x544)]||{}},_0x8f0871[_0x29b498(0x7b0)]['cphoneAppIcons']={..._0x174ad5['cphoneAppIcons'],..._0x8f0871[_0x29b498(0x7b0)][_0x29b498(0xa61)]||{}},_0x1b6c12['forEach'](_0x38e223=>{const _0xf8c9c7=_0x29b498;typeof _0x38e223[_0xf8c9c7(0x12d7)][_0xf8c9c7(0x533)]==='undefined'&&(_0x38e223[_0xf8c9c7(0x12d7)][_0xf8c9c7(0x533)]=!![]),!_0x38e223['settings'][_0xf8c9c7(0xb7d)]&&(_0x38e223['settings'][_0xf8c9c7(0xb7d)]={'vertical':_0xf8c9c7(0x8ce),'horizontal':_0xf8c9c7(0x1117),'offset':0xa}),!_0x38e223['isGroup']&&!_0x38e223[_0xf8c9c7(0x12d7)][_0xf8c9c7(0x3a6)]&&(_0x38e223['settings']['myAvatarLibrary']=[]),!_0x38e223[_0xf8c9c7(0x1364)]&&typeof _0x38e223[_0xf8c9c7(0x93e)]==='undefined'&&(_0x38e223[_0xf8c9c7(0x93e)]=_0x38e223['name']);}),_0x8f0871[_0x29b498(0x1260)]=_0x1b6c12['reduce']((_0x44eaa1,_0x2cae77)=>{const _0x2c8f49=_0x29b498;if(typeof _0x2cae77['unreadCount']===_0x2c8f49(0x358))_0x2cae77[_0x2c8f49(0x28d)]=0x0;_0x2cae77[_0x2c8f49(0x1364)]&&(typeof _0x2cae77['settings']['enableBackgroundActivity']===_0x2c8f49(0x358)&&(_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0xb20)]=!![]),_0x2cae77['members']&&_0x2cae77[_0x2c8f49(0x2cf)]['length']>0x0&&_0x2cae77[_0x2c8f49(0x2cf)][0x0][_0x2c8f49(0x1023)]&&_0x2cae77['members'][_0x2c8f49(0x458)](_0x36bae4=>{const _0x583050=_0x2c8f49;typeof _0x36bae4[_0x583050(0x93e)]===_0x583050(0x358)&&(_0x36bae4[_0x583050(0x93e)]=_0x36bae4[_0x583050(0x1023)],_0x36bae4[_0x583050(0x5c9)]=_0x36bae4[_0x583050(0x1023)],delete _0x36bae4[_0x583050(0x1023)]);}));if(!_0x2cae77[_0x2c8f49(0x12d7)])_0x2cae77[_0x2c8f49(0x12d7)]={};typeof _0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0x1158)]===_0x2c8f49(0x358)&&(_0x2cae77[_0x2c8f49(0x12d7)]['actionCooldownMinutes']=0xa);if(!_0x2cae77[_0x2c8f49(0x1364)]&&!_0x2cae77[_0x2c8f49(0x103e)])_0x2cae77['status']={'text':'在线','lastUpdate':Date['now'](),'isBusy':![]};if(!_0x2cae77[_0x2c8f49(0x1364)]&&!_0x2cae77[_0x2c8f49(0x1171)])_0x2cae77['relationship']={'status':_0x2c8f49(0x14b5),'blockedTimestamp':null,'applicationReason':''};if(!_0x2cae77[_0x2c8f49(0x1364)]&&(!_0x2cae77[_0x2c8f49(0x12d7)]||!_0x2cae77['settings'][_0x2c8f49(0x1576)])){if(!_0x2cae77[_0x2c8f49(0x12d7)])_0x2cae77[_0x2c8f49(0x12d7)]={};_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0x1576)]=[];}_0x2cae77[_0x2c8f49(0x1364)]&&(_0x2cae77[_0x2c8f49(0x2cf)]||[])[_0x2c8f49(0x458)](_0x30cd9b=>{const _0x59ad88=_0x2c8f49;if(typeof _0x30cd9b[_0x59ad88(0x13e6)]===_0x59ad88(0x358))_0x30cd9b[_0x59ad88(0x13e6)]='';});if(!_0x2cae77['musicData'])_0x2cae77[_0x2c8f49(0x41b)]={'totalTime':0x0};_0x2cae77[_0x2c8f49(0x12d7)]&&_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0x8d1)]&&!_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0xaaf)]&&(_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0xaaf)]=[_0x2cae77['settings']['linkedWorldBookId']],delete _0x2cae77['settings'][_0x2c8f49(0x8d1)]);if(typeof _0x2cae77[_0x2c8f49(0x67d)]===_0x2c8f49(0x358))_0x2cae77[_0x2c8f49(0x67d)]=![];!_0x2cae77[_0x2c8f49(0x1364)]&&typeof _0x2cae77['settings'][_0x2c8f49(0xda5)]===_0x2c8f49(0x358)&&(_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0xda5)]='我');if(_0x2cae77[_0x2c8f49(0x1364)]&&_0x2cae77[_0x2c8f49(0x2cf)]){let _0x6a0859=![];_0x1b6c12[_0x2c8f49(0x458)](_0x5e76b1=>{const _0x4b4a86=_0x2c8f49;_0x5e76b1['id']===_0x2cae77['id']&&_0x5e76b1[_0x4b4a86(0x93e)]&&delete _0x5e76b1[_0x4b4a86(0x93e)];}),_0x2cae77['members'][_0x2c8f49(0x458)](_0x47b549=>{const _0x8edd2=_0x2c8f49,_0x24a604=_0x1b6c12[_0x8edd2(0x7ed)](_0x239b3e=>_0x239b3e['id']===_0x47b549['id']);if(_0x24a604&&_0x24a604[_0x8edd2(0x12d7)]){const _0x2af3ac=_0x24a604[_0x8edd2(0x12d7)][_0x8edd2(0x761)]||'';_0x47b549[_0x8edd2(0x13e6)]!==_0x2af3ac&&(_0x47b549[_0x8edd2(0x13e6)]=_0x2af3ac,_0x6a0859=!![]);}else typeof _0x47b549[_0x8edd2(0x13e6)]===_0x8edd2(0x358)&&(_0x47b549[_0x8edd2(0x13e6)]='',_0x6a0859=!![]);});if(_0x6a0859)_0x372b85[_0x2c8f49(0x1260)][_0x2c8f49(0x11d5)](_0x2cae77);}if(!_0x2cae77['settings'][_0x2c8f49(0xa84)])_0x2cae77['settings']['enableAutoMemory']=![];if(!_0x2cae77['settings'][_0x2c8f49(0x87f)])_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0x87f)]=0x14;if(!_0x2cae77['longTermMemory'])_0x2cae77[_0x2c8f49(0x1312)]=[];if(!_0x2cae77[_0x2c8f49(0x255)])_0x2cae77[_0x2c8f49(0x255)]=0x0;if(!_0x2cae77['isGroup']){typeof _0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0xb20)]===_0x2c8f49(0x358)&&(_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0xb20)]=!![]);typeof _0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0x26f)]===_0x2c8f49(0x358)&&(_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0x26f)]=![]);if(!_0x2cae77[_0x2c8f49(0x103e)])_0x2cae77[_0x2c8f49(0x103e)]={'text':'在线','lastUpdate':Date[_0x2c8f49(0xc22)](),'isBusy':![]};if(!_0x2cae77[_0x2c8f49(0x1171)])_0x2cae77['relationship']={'status':_0x2c8f49(0x14b5),'blockedTimestamp':null,'applicationReason':''};if(!_0x2cae77[_0x2c8f49(0x12d7)]||!_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0x1576)]){if(!_0x2cae77[_0x2c8f49(0x12d7)])_0x2cae77[_0x2c8f49(0x12d7)]={};_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0x1576)]=[];}if(typeof _0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0x1516)]===_0x2c8f49(0x358))_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0x1516)]=![];if(typeof _0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0xae0)]===_0x2c8f49(0x358))_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0xae0)]=0x64;if(typeof _0x2cae77['settings']['offlineMaxLength']==='undefined')_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0xcd6)]=0x12c;typeof _0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0x482)]===_0x2c8f49(0x358)&&(_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0x482)]=![]);if(typeof _0x2cae77[_0x2c8f49(0xfb3)]===_0x2c8f49(0x358))_0x2cae77[_0x2c8f49(0xfb3)]=_0x2c8f49(0x1111);if(typeof _0x2cae77[_0x2c8f49(0xa30)]==='undefined')_0x2cae77[_0x2c8f49(0xa30)]=_0x2c8f49(0x1111);!Array[_0x2c8f49(0x345)](_0x2cae77[_0x2c8f49(0x1378)])&&(_0x2cae77[_0x2c8f49(0x1378)]=[]);}return typeof _0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0x13c5)]==='undefined'&&(_0x2cae77['settings']['stickerCategoryId']?_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0x13c5)]=[_0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0xc29)]]:_0x2cae77['settings'][_0x2c8f49(0x13c5)]=[],delete _0x2cae77[_0x2c8f49(0x12d7)][_0x2c8f49(0xc29)]),_0x44eaa1[_0x2cae77['id']]=_0x2cae77,_0x44eaa1;},{});const _0x309ff2=[];_0x216d8f[_0x29b498(0x458)](_0x5f7bb8=>{const _0x472b2c=_0x29b498;if(_0x5f7bb8['type']==='ai_generated'&&_0x5f7bb8[_0x472b2c(0x4f3)]&&!_0x5f7bb8[_0x472b2c(0x11dd)]){const _0x3a7c67=_0x1b6c12[_0x472b2c(0x7ed)](_0x58d929=>!_0x58d929['isGroup']&&_0x58d929[_0x472b2c(0x93e)]===_0x5f7bb8[_0x472b2c(0x4f3)]);if(_0x3a7c67)_0x5f7bb8[_0x472b2c(0x11dd)]=_0x3a7c67['id'],_0x309ff2[_0x472b2c(0x481)](_0x5f7bb8);else{const _0x1fd908=_0x1b6c12[_0x472b2c(0x7ed)](_0x32bff3=>!_0x32bff3[_0x472b2c(0x1364)]&&_0x32bff3[_0x472b2c(0x1023)]===_0x5f7bb8[_0x472b2c(0x4f3)]);_0x1fd908&&(_0x5f7bb8[_0x472b2c(0x11dd)]=_0x1fd908['id'],_0x309ff2[_0x472b2c(0x481)](_0x5f7bb8));}}}),_0x309ff2[_0x29b498(0xac0)]>0x0&&await _0x372b85[_0x29b498(0x9ce)][_0x29b498(0x65d)](_0x309ff2),_0x8f0871[_0x29b498(0xa78)]=_0x37e5f2||{'id':_0x29b498(0x286),'proxyUrl':'','apiKey':'','model':'','secondaryProxyUrl':'','secondaryApiKey':'','secondaryModel':'','minimaxGroupId':'','minimaxApiKey':'','minimaxModel':'speech-01'},_0x8f0871[_0x29b498(0x413)]=_0x480277||[],_0x8f0871[_0x29b498(0x739)]=_0x1628f2||[],_0x46bc8b[_0x29b498(0x84a)]=_0x59cd69?.['playlist']||[],_0x8f0871['personaPresets']=_0x18238b||[],_0x8f0871[_0x29b498(0x9dd)]=_0x5bad74||{'id':'main','nickname':'{{user}}','avatar':_0x29b498(0xc4d),'banner':_0x29b498(0x1148)},allFavoriteItems=_0xe2ff37||[];}async function _0x3373e0(){const _0x1870d1=_0x7c5117;await _0x372b85['musicLibrary']['put']({'id':_0x1870d1(0x286),'playlist':_0x46bc8b[_0x1870d1(0x84a)]});}function _0x2e2d25(_0x212df0){const _0x2a4089=_0x7c5117;if(!_0x212df0)return'';const _0x42c390=new Date(_0x212df0),_0x3e78be=String(_0x42c390[_0x2a4089(0xf63)]())[_0x2a4089(0x13e8)](0x2,'0'),_0x5d65d4=String(_0x42c390['getMinutes']())[_0x2a4089(0x13e8)](0x2,'0');return _0x3e78be+':'+_0x5d65d4;}function _0x2368ae(_0x382e12){const _0x3e1e6b=_0x7c5117,_0x139dde=Date['now'](),_0x2bfa89=Math[_0x3e1e6b(0x13e5)]((_0x139dde-_0x382e12)/0x3e8);if(_0x2bfa89<0x3c)return'刚刚';const _0x47bbdb=Math[_0x3e1e6b(0x13e5)](_0x2bfa89/0x3c);if(_0x47bbdb<0x3c)return _0x47bbdb+_0x3e1e6b(0x53f);const _0x44fd16=Math['floor'](_0x47bbdb/0x3c);if(_0x44fd16<0x18)return _0x44fd16+_0x3e1e6b(0x574);const _0x326bf2=Math[_0x3e1e6b(0x13e5)](_0x44fd16/0x18);if(_0x326bf2<0x1e)return _0x326bf2+'天前';const _0x132dff=Math['floor'](_0x326bf2/0x1e);if(_0x132dff<0xc)return'大约'+_0x132dff+_0x3e1e6b(0x12c1);const _0x486a35=Math[_0x3e1e6b(0x13e5)](_0x326bf2/0x16d);return'大约'+_0x486a35+'年前';}function _0x6a9a5e(_0x5a1bd9){const _0x4fed0c=_0x7c5117;if(!_0x5a1bd9)return'';const _0x536537=new Date(),_0x272d2f=new Date(_0x5a1bd9),_0x57456e=String(_0x272d2f[_0x4fed0c(0xf63)]())['padStart'](0x2,'0'),_0x15a662=String(_0x272d2f[_0x4fed0c(0xa39)]())[_0x4fed0c(0x13e8)](0x2,'0'),_0x1a9b0f=_0x57456e+':'+_0x15a662;if(_0x536537[_0x4fed0c(0x40a)]()===_0x272d2f[_0x4fed0c(0x40a)]())return _0x4fed0c(0x900)+_0x1a9b0f;const _0x49b895=new Date();_0x49b895[_0x4fed0c(0xd4e)](_0x536537[_0x4fed0c(0x8a5)]()-0x1);if(_0x49b895[_0x4fed0c(0x40a)]()===_0x272d2f[_0x4fed0c(0x40a)]())return _0x4fed0c(0xfc6)+_0x1a9b0f;if(_0x536537[_0x4fed0c(0x75f)]()===_0x272d2f[_0x4fed0c(0x75f)]()){const _0x59153a=String(_0x272d2f[_0x4fed0c(0x35a)]()+0x1),_0x74aead=String(_0x272d2f[_0x4fed0c(0x8a5)]());return _0x59153a+'月'+_0x74aead+'日\x20'+_0x1a9b0f;}const _0x2a1034=_0x272d2f['getFullYear'](),_0x50da2f=String(_0x272d2f[_0x4fed0c(0x35a)]()+0x1),_0xb045c3=String(_0x272d2f[_0x4fed0c(0x8a5)]());return _0x2a1034+'年'+_0x50da2f+'月'+_0xb045c3+'日\x20'+_0x1a9b0f;}function _0x37f61f(){const _0x214978=_0x7c5117,_0x132109=_0x338ee6();document[_0x214978(0xfa0)](_0x214978(0xb6c))[_0x214978(0x4f6)]=_0x132109['resolution'],document['getElementById'](_0x214978(0x892))[_0x214978(0x4f6)]=_0x132109['steps'],document['getElementById'](_0x214978(0x108f))['value']=_0x132109[_0x214978(0x1ed)],document[_0x214978(0xfa0)](_0x214978(0xef8))['value']=_0x132109[_0x214978(0x1305)],document[_0x214978(0xfa0)](_0x214978(0xa25))['value']=_0x132109[_0x214978(0x7e7)],document[_0x214978(0xfa0)](_0x214978(0xdce))['value']=_0x132109[_0x214978(0xebf)],document[_0x214978(0xfa0)]('nai-quality-toggle')[_0x214978(0xb34)]=_0x132109[_0x214978(0xc06)],document[_0x214978(0xfa0)](_0x214978(0x5b5))[_0x214978(0xb34)]=_0x132109[_0x214978(0x9f6)],document[_0x214978(0xfa0)](_0x214978(0x120a))[_0x214978(0xb34)]=_0x132109[_0x214978(0x31a)],document[_0x214978(0xfa0)](_0x214978(0x1207))[_0x214978(0x4f6)]=_0x132109[_0x214978(0x404)],document[_0x214978(0xfa0)](_0x214978(0x12f1))[_0x214978(0x4f6)]=_0x132109[_0x214978(0xd6f)],document[_0x214978(0xfa0)]('nai-cors-proxy')['value']=_0x132109[_0x214978(0xfc4)],document[_0x214978(0xfa0)](_0x214978(0x45f))['value']=_0x132109['custom_proxy_url']||'';const _0x5e4c9d=document[_0x214978(0xfa0)](_0x214978(0xc23));_0x5e4c9d[_0x214978(0x63b)][_0x214978(0x1248)]=_0x132109[_0x214978(0xfc4)]===_0x214978(0xd3c)?_0x214978(0x127c):_0x214978(0x11b5);}function _0x51a16f(){const _0x5922fa=_0x7c5117,_0x138e29=document[_0x5922fa(0xfa0)](_0x5922fa(0x78c))[_0x5922fa(0xb34)],_0x17ce65=document[_0x5922fa(0xfa0)](_0x5922fa(0xb75))['value'],_0x198604=document['getElementById'](_0x5922fa(0x2cd))['value'][_0x5922fa(0xa06)]();localStorage[_0x5922fa(0x86f)]('novelai-enabled',_0x138e29),localStorage[_0x5922fa(0x86f)](_0x5922fa(0xb75),_0x17ce65),localStorage[_0x5922fa(0x86f)]('novelai-api-key',_0x198604);const _0x593c39={'resolution':document[_0x5922fa(0xfa0)](_0x5922fa(0xb6c))[_0x5922fa(0x4f6)],'steps':parseInt(document[_0x5922fa(0xfa0)](_0x5922fa(0x892))[_0x5922fa(0x4f6)]),'cfg_scale':parseFloat(document[_0x5922fa(0xfa0)](_0x5922fa(0x108f))[_0x5922fa(0x4f6)]),'sampler':document[_0x5922fa(0xfa0)]('nai-sampler')[_0x5922fa(0x4f6)],'seed':parseInt(document[_0x5922fa(0xfa0)](_0x5922fa(0xa25))[_0x5922fa(0x4f6)]),'uc_preset':parseInt(document[_0x5922fa(0xfa0)](_0x5922fa(0xdce))[_0x5922fa(0x4f6)]),'quality_toggle':document[_0x5922fa(0xfa0)](_0x5922fa(0xf74))[_0x5922fa(0xb34)],'smea':document[_0x5922fa(0xfa0)]('nai-smea')[_0x5922fa(0xb34)],'smea_dyn':document[_0x5922fa(0xfa0)](_0x5922fa(0x120a))['checked'],'default_positive':document[_0x5922fa(0xfa0)](_0x5922fa(0x1207))[_0x5922fa(0x4f6)],'default_negative':document[_0x5922fa(0xfa0)](_0x5922fa(0x12f1))[_0x5922fa(0x4f6)],'cors_proxy':document[_0x5922fa(0xfa0)]('nai-cors-proxy')[_0x5922fa(0x4f6)],'custom_proxy_url':document[_0x5922fa(0xfa0)](_0x5922fa(0x45f))['value']};localStorage[_0x5922fa(0x86f)]('novelai-settings',JSON[_0x5922fa(0x7cc)](_0x593c39));}function _0x373008(){const _0x63e732=_0x7c5117;localStorage[_0x63e732(0xb81)](_0x63e732(0x467)),_0x37f61f(),alert(_0x63e732(0x579));}function _0x338ee6(){const _0x22d113=_0x7c5117,_0x3b0c91={'resolution':'1024x1024','steps':0x1c,'cfg_scale':0x5,'sampler':'k_euler_ancestral','seed':-0x1,'uc_preset':0x1,'quality_toggle':!![],'smea':!![],'smea_dyn':![],'default_positive':'masterpiece,\x20best\x20quality,\x201girl,\x20beautiful,\x20detailed\x20face,\x20detailed\x20eyes,\x20long\x20hair,\x20anime\x20style','default_negative':'lowres,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry','cors_proxy':_0x22d113(0x66f),'custom_proxy_url':''},_0x7b2cc0=localStorage[_0x22d113(0xe2e)](_0x22d113(0x467));if(_0x7b2cc0)try{return{..._0x3b0c91,...JSON[_0x22d113(0x4a0)](_0x7b2cc0)};}catch(_0x3d2ba2){return _0x3b0c91;}return _0x3b0c91;}async function _0x3bc899(_0x555133,_0x2f39db){const _0x45743e=_0x7c5117;console[_0x45743e(0x4ee)](_0x45743e(0xe64)+_0x555133+_0x45743e(0x609)+_0x2f39db);const _0x51b30e=_0x181f13(_0x2f39db),_0x14590a=_0x555133+',\x20'+_0x51b30e[_0x45743e(0x2b8)],_0x36f3cc=_0x51b30e[_0x45743e(0x1400)];console[_0x45743e(0x4ee)](_0x45743e(0x40f)+(_0x51b30e[_0x45743e(0x5f7)]===_0x45743e(0xf34)?_0x45743e(0x1555):'系统')+_0x45743e(0x3df)),console[_0x45743e(0x4ee)](_0x45743e(0xe47),_0x14590a),console[_0x45743e(0x4ee)](_0x45743e(0x5db),_0x36f3cc);const _0x216d78=localStorage['getItem'](_0x45743e(0x2cd)),_0x225666=localStorage[_0x45743e(0xe2e)](_0x45743e(0xb75))||_0x45743e(0x6b4),_0x53490f=_0x338ee6();if(!_0x216d78)throw new Error(_0x45743e(0xe9b));const [_0xfd551,_0x382706]=_0x53490f[_0x45743e(0x1dd)][_0x45743e(0x505)]('x')[_0x45743e(0x556)](Number);let _0x1f9a37;_0x225666[_0x45743e(0xf95)](_0x45743e(0x655))?_0x1f9a37={'input':_0x14590a,'model':_0x225666,'action':_0x45743e(0xa73),'parameters':{'params_version':0x3,'width':_0xfd551,'height':_0x382706,'scale':_0x53490f[_0x45743e(0x1ed)],'sampler':_0x53490f[_0x45743e(0x1305)],'steps':_0x53490f[_0x45743e(0x361)],'seed':_0x53490f[_0x45743e(0x7e7)]===-0x1?Math['floor'](Math[_0x45743e(0x148a)]()*0x2540be3ff):_0x53490f[_0x45743e(0x7e7)],'n_samples':0x1,'ucPreset':_0x53490f[_0x45743e(0xebf)],'qualityToggle':_0x53490f[_0x45743e(0xc06)],'add_original_image':!![],'noise_schedule':_0x45743e(0xdef),'v4_prompt':{'caption':{'base_caption':_0x14590a,'char_captions':[]},'use_coords':![],'use_order':!![]},'v4_negative_prompt':{'caption':{'base_caption':_0x36f3cc,'char_captions':[]},'legacy_uc':![]},'negative_prompt':_0x36f3cc,'autoSmea':![],'dynamic_thresholding':![],'controlnet_strength':0x1,'legacy':![],'cfg_rescale':0x0,'legacy_v3_extend':![],'skip_cfg_above_sigma':null,'use_coords':![],'legacy_uc':![],'normalize_reference_strength_multiple':!![],'inpaintImg2ImgStrength':0x1,'characterPrompts':[],'deliberate_euler_ancestral_bug':![],'prefer_brownian':!![]}}:_0x1f9a37={'input':_0x14590a,'model':_0x225666,'action':_0x45743e(0xa73),'parameters':{'width':_0xfd551,'height':_0x382706,'scale':_0x53490f[_0x45743e(0x1ed)],'sampler':_0x53490f[_0x45743e(0x1305)],'steps':_0x53490f['steps'],'seed':_0x53490f[_0x45743e(0x7e7)]===-0x1?Math[_0x45743e(0x13e5)](Math[_0x45743e(0x148a)]()*0x2540be3ff):_0x53490f[_0x45743e(0x7e7)],'n_samples':0x1,'ucPreset':_0x53490f['uc_preset'],'qualityToggle':_0x53490f[_0x45743e(0xc06)],'sm':_0x53490f[_0x45743e(0x9f6)],'sm_dyn':_0x53490f['smea_dyn'],'negative_prompt':_0x36f3cc,'dynamic_thresholding':![],'controlnet_strength':0x1,'legacy':![],'add_original_image':![],'cfg_rescale':0x0,'noise_schedule':_0x45743e(0x1246)}};console[_0x45743e(0x4ee)](_0x45743e(0xd5a),_0x1f9a37);let _0x59c74b;_0x225666['includes'](_0x45743e(0x655))?_0x59c74b=_0x45743e(0x5f9):_0x59c74b=_0x45743e(0x11df);let _0x5209a5=_0x53490f[_0x45743e(0xfc4)];_0x5209a5===_0x45743e(0xd3c)&&(_0x5209a5=_0x53490f['custom_proxy_url']||'');_0x5209a5&&_0x5209a5!==''&&(_0x59c74b=_0x5209a5+encodeURIComponent(_0x59c74b));const _0x4149ed=await fetch(_0x59c74b,{'method':'POST','headers':{'Content-Type':_0x45743e(0x4b5),'Authorization':_0x45743e(0x681)+_0x216d78},'body':JSON['stringify'](_0x1f9a37)});if(!_0x4149ed['ok']){const _0x4502d8=await _0x4149ed[_0x45743e(0xda3)]();throw new Error(_0x45743e(0x5c1)+_0x4149ed[_0x45743e(0x103e)]+'):\x20'+_0x4502d8);}const _0x51d170=_0x4149ed[_0x45743e(0xb89)]['get']('content-type');let _0x404013,_0x448fd9;if(_0x51d170&&_0x51d170[_0x45743e(0xf95)](_0x45743e(0xdab))){const _0x4d2535=await _0x4149ed['text'](),_0x10f7eb=_0x4d2535['trim']()['split']('\x0a');let _0xa6b22=null;for(let _0x294815=_0x10f7eb[_0x45743e(0xac0)]-0x1;_0x294815>=0x0;_0x294815--){const _0x53bd7d=_0x10f7eb[_0x294815][_0x45743e(0xa06)]();if(_0x53bd7d[_0x45743e(0x9b8)](_0x45743e(0xeca))&&_0x53bd7d!==_0x45743e(0xe76)){const _0xf74827=_0x53bd7d['substring'](0x6);try{const _0x4e269b=JSON[_0x45743e(0x4a0)](_0xf74827);if(_0x4e269b[_0x45743e(0xd46)]===_0x45743e(0x1255)&&_0x4e269b[_0x45743e(0x13ba)]){_0xa6b22=_0x4e269b[_0x45743e(0x13ba)];break;}if(_0x4e269b['data']){_0xa6b22=_0x4e269b[_0x45743e(0x3cc)];break;}if(_0x4e269b[_0x45743e(0x13ba)]){_0xa6b22=_0x4e269b[_0x45743e(0x13ba)];break;}}catch(_0x2652b1){_0xa6b22=_0xf74827;break;}}}if(!_0xa6b22)throw new Error(_0x45743e(0xac9));const _0x3d752d=_0xa6b22['startsWith'](_0x45743e(0x752)),_0x503a40=_0xa6b22[_0x45743e(0x9b8)](_0x45743e(0xe0e));if(_0x3d752d||_0x503a40)_0x448fd9=_0x45743e(0x83b)+(_0x3d752d?'image/png':'image/jpeg')+_0x45743e(0xa05)+_0xa6b22;else{const _0x5ba80b=atob(_0xa6b22),_0x472a06=new Uint8Array(_0x5ba80b[_0x45743e(0xac0)]);for(let _0x652527=0x0;_0x652527<_0x5ba80b[_0x45743e(0xac0)];_0x652527++)_0x472a06[_0x652527]=_0x5ba80b[_0x45743e(0x864)](_0x652527);_0x404013=new Blob([_0x472a06]);}}else _0x404013=await _0x4149ed[_0x45743e(0x6ae)]();if(!_0x448fd9&&_0x404013){if(typeof JSZip===_0x45743e(0x358))throw new Error(_0x45743e(0xe34));const _0x147519=await JSZip['loadAsync'](_0x404013);let _0x57c11c=null;for(let _0x243d99 in _0x147519[_0x45743e(0xca1)]){if(_0x243d99['match'](/\.(png|jpg|jpeg|webp)$/i)){_0x57c11c=_0x147519[_0x45743e(0xca1)][_0x243d99];break;}}if(!_0x57c11c)throw new Error(_0x45743e(0x2f1));const _0x1d380c=await _0x57c11c['async'](_0x45743e(0x6ae));_0x448fd9=await new Promise((_0x8c2dbd,_0x35e77e)=>{const _0xff0938=_0x45743e,_0x3945fa=new FileReader();_0x3945fa['onloadend']=()=>_0x8c2dbd(_0x3945fa[_0xff0938(0x4fe)]),_0x3945fa[_0xff0938(0x14b0)]=_0x35e77e,_0x3945fa['readAsDataURL'](_0x1d380c);});}return console[_0x45743e(0x4ee)](_0x45743e(0x6f2)),{'imageUrl':_0x448fd9,'fullPrompt':_0x14590a};}function _0x181f13(_0x27dd8f){const _0x277591=_0x7c5117,_0x287fde=_0x338ee6();if(!_0x27dd8f||!_0x8f0871['chats'][_0x27dd8f])return console[_0x277591(0x4ee)](_0x277591(0x2c1)),{'positive':_0x287fde[_0x277591(0x404)],'negative':_0x287fde['default_negative'],'source':_0x277591(0x1417)};const _0x178d57=_0x8f0871[_0x277591(0x1260)][_0x27dd8f],_0x12df01=_0x178d57[_0x277591(0x12d7)][_0x277591(0x39c)]||{};return _0x12df01[_0x277591(0x121c)]===_0x277591(0xf34)?(console[_0x277591(0x4ee)](_0x277591(0xe3a)),console[_0x277591(0x4ee)](_0x277591(0x1034),_0x12df01['characterPositivePrompt']||_0x277591(0x3ce)),console['log'](_0x277591(0x12c0),_0x12df01['characterNegativePrompt']||_0x277591(0x3ce)),{'positive':_0x12df01[_0x277591(0x3e7)]||'','negative':_0x12df01[_0x277591(0x1d0)]||'','source':'character'}):(console['log'](_0x277591(0x60d)),console[_0x277591(0x4ee)](_0x277591(0x1034),_0x287fde[_0x277591(0x404)]||_0x277591(0x3ce)),console[_0x277591(0x4ee)](_0x277591(0x12c0),_0x287fde[_0x277591(0xd6f)]||_0x277591(0x3ce)),{'positive':_0x287fde[_0x277591(0x404)],'negative':_0x287fde[_0x277591(0xd6f)],'source':_0x277591(0x1417)});}async function _0x4092ce(){const _0x3de3a9=_0x7c5117,_0x4080a6=document['getElementById'](_0x3de3a9(0x2cd))[_0x3de3a9(0x4f6)][_0x3de3a9(0xa06)](),_0x3ea7b5=document['getElementById'](_0x3de3a9(0xb75))[_0x3de3a9(0x4f6)],_0x551b24=document[_0x3de3a9(0xfa0)](_0x3de3a9(0x124e))[_0x3de3a9(0x4f6)]['trim']();if(!_0x4080a6){alert(_0x3de3a9(0x429));return;}if(!_0x551b24){alert('请输入提示词！');return;}const _0x3bc671=_0x338ee6(),_0x5a8878=document[_0x3de3a9(0xfa0)]('nai-test-negative')[_0x3de3a9(0x4f6)][_0x3de3a9(0xa06)](),_0x110ce4=document[_0x3de3a9(0xfa0)](_0x3de3a9(0x12c8)),_0xb23d15=document[_0x3de3a9(0xfa0)]('nai-test-result'),_0x4f08a5=document[_0x3de3a9(0xfa0)](_0x3de3a9(0xff7)),_0x31de3d=document[_0x3de3a9(0xfa0)](_0x3de3a9(0x2fe));_0x110ce4['style'][_0x3de3a9(0x1248)]='block',_0xb23d15[_0x3de3a9(0x63b)]['display']=_0x3de3a9(0x11b5),_0x4f08a5['style']['display']='none',_0x31de3d[_0x3de3a9(0x104b)]=!![],_0x31de3d[_0x3de3a9(0xc62)]=_0x3de3a9(0x461);try{const [_0x341a8b,_0x14a94d]=_0x3bc671[_0x3de3a9(0x1dd)][_0x3de3a9(0x505)]('x')[_0x3de3a9(0x556)](Number);let _0x35bbb6;_0x3ea7b5[_0x3de3a9(0xf95)](_0x3de3a9(0x655))?_0x35bbb6={'input':_0x551b24,'model':_0x3ea7b5,'action':'generate','parameters':{'params_version':0x3,'width':_0x341a8b,'height':_0x14a94d,'scale':_0x3bc671[_0x3de3a9(0x1ed)],'sampler':_0x3bc671[_0x3de3a9(0x1305)],'steps':_0x3bc671[_0x3de3a9(0x361)],'seed':_0x3bc671[_0x3de3a9(0x7e7)]===-0x1?Math['floor'](Math['random']()*0x2540be3ff):_0x3bc671['seed'],'n_samples':0x1,'ucPreset':_0x3bc671[_0x3de3a9(0xebf)],'qualityToggle':_0x3bc671[_0x3de3a9(0xc06)],'autoSmea':![],'dynamic_thresholding':![],'controlnet_strength':0x1,'legacy':![],'add_original_image':!![],'cfg_rescale':0x0,'noise_schedule':_0x3de3a9(0xdef),'legacy_v3_extend':![],'skip_cfg_above_sigma':null,'use_coords':![],'legacy_uc':![],'normalize_reference_strength_multiple':!![],'inpaintImg2ImgStrength':0x1,'characterPrompts':[],'v4_prompt':{'caption':{'base_caption':_0x551b24,'char_captions':[]},'use_coords':![],'use_order':!![]},'v4_negative_prompt':{'caption':{'base_caption':_0x5a8878,'char_captions':[]},'legacy_uc':![]},'negative_prompt':_0x5a8878,'deliberate_euler_ancestral_bug':![],'prefer_brownian':!![]}}:_0x35bbb6={'input':_0x551b24,'model':_0x3ea7b5,'action':'generate','parameters':{'width':_0x341a8b,'height':_0x14a94d,'scale':_0x3bc671[_0x3de3a9(0x1ed)],'sampler':_0x3bc671[_0x3de3a9(0x1305)],'steps':_0x3bc671[_0x3de3a9(0x361)],'seed':_0x3bc671[_0x3de3a9(0x7e7)]===-0x1?Math[_0x3de3a9(0x13e5)](Math[_0x3de3a9(0x148a)]()*0x2540be3ff):_0x3bc671[_0x3de3a9(0x7e7)],'n_samples':0x1,'ucPreset':_0x3bc671['uc_preset'],'qualityToggle':_0x3bc671['quality_toggle'],'sm':_0x3bc671[_0x3de3a9(0x9f6)],'sm_dyn':_0x3bc671[_0x3de3a9(0x31a)],'dynamic_thresholding':![],'controlnet_strength':0x1,'legacy':![],'add_original_image':![],'cfg_rescale':0x0,'noise_schedule':_0x3de3a9(0x1246),'negative_prompt':_0x5a8878}};console[_0x3de3a9(0x4ee)](_0x3de3a9(0xadb)),console[_0x3de3a9(0x4ee)](_0x3de3a9(0xe15),_0x3ea7b5),console[_0x3de3a9(0x4ee)]('📋\x20请求体:',JSON[_0x3de3a9(0x7cc)](_0x35bbb6,null,0x2));let _0x22e2e6;_0x3ea7b5[_0x3de3a9(0xf95)](_0x3de3a9(0x655))?_0x22e2e6=_0x3de3a9(0x5f9):_0x22e2e6='https://image.novelai.net/ai/generate-image';let _0x2a6a44=_0x3bc671['cors_proxy'];_0x2a6a44===_0x3de3a9(0xd3c)&&(_0x2a6a44=_0x3bc671[_0x3de3a9(0x10d3)]||'');_0x2a6a44&&_0x2a6a44!==''&&(_0x22e2e6=_0x2a6a44+encodeURIComponent(_0x22e2e6));const _0x5e050b=/Chrome/[_0x3de3a9(0x3fb)](navigator[_0x3de3a9(0x620)])&&!/Edg/[_0x3de3a9(0x3fb)](navigator[_0x3de3a9(0x620)]);let _0x39fc4b={'method':_0x3de3a9(0xb67),'headers':{'Content-Type':_0x3de3a9(0x4b5),'Authorization':_0x3de3a9(0x681)+_0x4080a6},'body':JSON[_0x3de3a9(0x7cc)](_0x35bbb6)};if(_0x5e050b){console['log'](_0x3de3a9(0xc18));const _0x557e74={};for(const [_0x4df1af,_0x281174]of Object[_0x3de3a9(0x545)](_0x39fc4b[_0x3de3a9(0xb89)])){_0x557e74[_0x4df1af]=_0x281174[_0x3de3a9(0x128a)](/[^\x00-\xFF]/g,'');}_0x39fc4b[_0x3de3a9(0xb89)]=_0x557e74;}const _0xfc8e22=await fetch(_0x22e2e6,_0x39fc4b);console['log'](_0x3de3a9(0x12f5),_0xfc8e22[_0x3de3a9(0x103e)]),console['log'](_0x3de3a9(0x1206),[..._0xfc8e22[_0x3de3a9(0xb89)][_0x3de3a9(0x545)]()]);if(!_0xfc8e22['ok']){const _0x423a49=await _0xfc8e22[_0x3de3a9(0xda3)]();console[_0x3de3a9(0x52b)]('API错误响应:',_0x423a49);throw new Error(_0x3de3a9(0x5c1)+_0xfc8e22[_0x3de3a9(0x103e)]+_0x3de3a9(0xf4f)+_0x423a49);}const _0x2ff1d4=_0xfc8e22[_0x3de3a9(0xb89)]['get'](_0x3de3a9(0xbe0));console[_0x3de3a9(0x4ee)](_0x3de3a9(0x72d),_0x2ff1d4);let _0x2de97b;if(_0x2ff1d4&&_0x2ff1d4['includes']('text/event-stream')){console[_0x3de3a9(0x4ee)](_0x3de3a9(0xc69)),_0x110ce4['textContent']=_0x3de3a9(0xe4a);const _0x54714b=await _0xfc8e22[_0x3de3a9(0xda3)]();console[_0x3de3a9(0x4ee)](_0x3de3a9(0x32d),_0x54714b[_0x3de3a9(0xac0)]);const _0x508258=_0x54714b['trim']()[_0x3de3a9(0x505)]('\x0a');let _0x3bfe85=null;for(let _0x38a2e4=_0x508258[_0x3de3a9(0xac0)]-0x1;_0x38a2e4>=0x0;_0x38a2e4--){const _0x1fb751=_0x508258[_0x38a2e4][_0x3de3a9(0xa06)]();if(_0x1fb751['startsWith']('data:\x20')&&_0x1fb751!==_0x3de3a9(0xe76)){const _0x185428=_0x1fb751[_0x3de3a9(0x9fe)](0x6);try{const _0x2f8070=JSON[_0x3de3a9(0x4a0)](_0x185428);if(_0x2f8070[_0x3de3a9(0xd46)]===_0x3de3a9(0x1255)&&_0x2f8070[_0x3de3a9(0x13ba)]){_0x3bfe85=_0x2f8070[_0x3de3a9(0x13ba)],console['log']('✅\x20找到\x20final\x20事件的图片数据');break;}if(_0x2f8070[_0x3de3a9(0x3cc)]){_0x3bfe85=_0x2f8070[_0x3de3a9(0x3cc)],console[_0x3de3a9(0x4ee)](_0x3de3a9(0x736));break;}if(_0x2f8070[_0x3de3a9(0x13ba)]){_0x3bfe85=_0x2f8070['image'],console['log'](_0x3de3a9(0xbb6));break;}}catch(_0x419e2f){_0x3bfe85=_0x185428,console[_0x3de3a9(0x4ee)](_0x3de3a9(0xa82));break;}}}if(!_0x3bfe85)throw new Error(_0x3de3a9(0xac9));const _0x55c61b=_0x3bfe85[_0x3de3a9(0x9b8)]('iVBORw0KGgo'),_0x1b4c9a=_0x3bfe85['startsWith'](_0x3de3a9(0xe0e));if(_0x55c61b||_0x1b4c9a){console[_0x3de3a9(0x4ee)](_0x3de3a9(0x1337));const _0x5af934=atob(_0x3bfe85),_0x379955=new Uint8Array(_0x5af934['length']);for(let _0x2bc02a=0x0;_0x2bc02a<_0x5af934[_0x3de3a9(0xac0)];_0x2bc02a++){_0x379955[_0x2bc02a]=_0x5af934[_0x3de3a9(0x864)](_0x2bc02a);}const _0x5deed2=new Blob([_0x379955],{'type':_0x55c61b?_0x3de3a9(0x13ab):_0x3de3a9(0x1241)});console[_0x3de3a9(0x4ee)](_0x3de3a9(0x1380),_0x5deed2['size']);const _0x3b19ae=URL[_0x3de3a9(0xe35)](_0x5deed2);document['getElementById'](_0x3de3a9(0x1174))[_0x3de3a9(0x53e)]=_0x3b19ae,_0x110ce4['style']['display']=_0x3de3a9(0x11b5),_0xb23d15['style'][_0x3de3a9(0x1248)]=_0x3de3a9(0x127c),console[_0x3de3a9(0x4ee)](_0x3de3a9(0x12c5));return;}console[_0x3de3a9(0x4ee)]('当作\x20ZIP\x20文件处理...');const _0x11818=atob(_0x3bfe85),_0x17cdfb=new Uint8Array(_0x11818[_0x3de3a9(0xac0)]);for(let _0x1af97f=0x0;_0x1af97f<_0x11818[_0x3de3a9(0xac0)];_0x1af97f++){_0x17cdfb[_0x1af97f]=_0x11818[_0x3de3a9(0x864)](_0x1af97f);}_0x2de97b=new Blob([_0x17cdfb]),console[_0x3de3a9(0x4ee)]('ZIP\x20Blob\x20大小:',_0x2de97b['size']);}else _0x2de97b=await _0xfc8e22[_0x3de3a9(0x6ae)](),console['log']('收到数据，类型:',_0x2de97b[_0x3de3a9(0x682)],_0x3de3a9(0xef0),_0x2de97b['size']);try{if(typeof JSZip==='undefined')throw new Error(_0x3de3a9(0x624));_0x110ce4[_0x3de3a9(0xc62)]=_0x3de3a9(0xdc0);const _0x1ba02b=await JSZip[_0x3de3a9(0x14d8)](_0x2de97b);console[_0x3de3a9(0x4ee)](_0x3de3a9(0x111a),Object['keys'](_0x1ba02b[_0x3de3a9(0xca1)]));let _0x3424b6=null;for(let _0x25e778 in _0x1ba02b['files']){if(_0x25e778[_0x3de3a9(0x1232)](/\.(png|jpg|jpeg|webp)$/i)){_0x3424b6=_0x1ba02b[_0x3de3a9(0xca1)][_0x25e778],console[_0x3de3a9(0x4ee)](_0x3de3a9(0x497),_0x25e778);break;}}if(!_0x3424b6)throw new Error(_0x3de3a9(0x2f1));const _0x1b9958=await _0x3424b6[_0x3de3a9(0x1549)](_0x3de3a9(0x6ae));console[_0x3de3a9(0x4ee)]('提取的图片大小:',_0x1b9958['size']);const _0x24ed72=URL[_0x3de3a9(0xe35)](_0x1b9958);console[_0x3de3a9(0x4ee)]('生成的图片URL:',_0x24ed72),document[_0x3de3a9(0xfa0)](_0x3de3a9(0x1174))[_0x3de3a9(0x53e)]=_0x24ed72,_0x110ce4[_0x3de3a9(0x63b)][_0x3de3a9(0x1248)]=_0x3de3a9(0x11b5),_0xb23d15[_0x3de3a9(0x63b)][_0x3de3a9(0x1248)]=_0x3de3a9(0x127c);}catch(_0x571171){console[_0x3de3a9(0x52b)](_0x3de3a9(0x120e),_0x571171),console[_0x3de3a9(0x4ee)](_0x3de3a9(0x157b));if(_0x2de97b[_0x3de3a9(0x682)][_0x3de3a9(0x9b8)](_0x3de3a9(0x258))){const _0x1ee015=URL['createObjectURL'](_0x2de97b);document[_0x3de3a9(0xfa0)](_0x3de3a9(0x1174))['src']=_0x1ee015,_0x110ce4[_0x3de3a9(0x63b)][_0x3de3a9(0x1248)]=_0x3de3a9(0x11b5),_0xb23d15[_0x3de3a9(0x63b)][_0x3de3a9(0x1248)]=_0x3de3a9(0x127c);}else throw new Error(_0x3de3a9(0x13b1)+_0x571171['message']);}}catch(_0x423e30){console[_0x3de3a9(0x52b)](_0x3de3a9(0xae9),_0x423e30),_0x110ce4['style']['display']='none',_0x4f08a5[_0x3de3a9(0x63b)][_0x3de3a9(0x1248)]='block',_0x4f08a5[_0x3de3a9(0xc62)]=_0x3de3a9(0x690)+_0x423e30[_0x3de3a9(0x790)];}finally{_0x31de3d['disabled']=![],_0x31de3d[_0x3de3a9(0xc62)]='生成图像';}}function _0x1d3fa5(_0x1f67f0,_0x31fe54){const _0x1f2529=_0x7c5117;_0x51ee1f(),clearTimeout(_0x13603d);const _0x3df23c=_0x8f0871[_0x1f2529(0x1260)][_0x1f67f0];if(!_0x3df23c)return;const _0x3dcf50=document[_0x1f2529(0xfa0)](_0x1f2529(0x13aa));document['getElementById']('notification-avatar')[_0x1f2529(0x53e)]=_0x3df23c[_0x1f2529(0x12d7)][_0x1f2529(0xce8)]||_0x3df23c[_0x1f2529(0x12d7)][_0x1f2529(0x4a1)]||_0x1a2fc1,document[_0x1f2529(0xfa0)](_0x1f2529(0x10c5))['querySelector'](_0x1f2529(0x531))[_0x1f2529(0xc62)]=_0x3df23c[_0x1f2529(0x1023)],document[_0x1f2529(0xfa0)](_0x1f2529(0x10c5))[_0x1f2529(0xfb1)](_0x1f2529(0x861))[_0x1f2529(0xc62)]=_0x31fe54,_0x3dcf50[_0x1f2529(0x128f)][_0x1f2529(0x443)]('visible'),void _0x3dcf50[_0x1f2529(0x8a3)],_0x3dcf50[_0x1f2529(0x128f)][_0x1f2529(0x1327)]('visible');const _0xfaaea5=_0x3dcf50[_0x1f2529(0xb5c)](!![]);_0x3dcf50['parentNode'][_0x1f2529(0x5d2)](_0xfaaea5,_0x3dcf50),_0xfaaea5['addEventListener']('click',()=>{const _0x2d5d74=_0x1f2529;_0x41c772(_0x1f67f0),_0xfaaea5[_0x2d5d74(0x128f)]['remove'](_0x2d5d74(0xdcc));}),_0x13603d=setTimeout(()=>{const _0x267f47=_0x1f2529;_0xfaaea5[_0x267f47(0x128f)][_0x267f47(0x443)](_0x267f47(0xdcc));},0xfa0),_0x5415e3();}function _0x4008f8(){const _0x4c0281=_0x7c5117,_0xa24b19=new Date(),_0x3ff639=_0xa24b19[_0x4c0281(0x1453)]('zh-CN',{'hour':_0x4c0281(0x511),'minute':_0x4c0281(0x511)}),_0x47a2b2=_0xa24b19[_0x4c0281(0x11a9)](_0x4c0281(0xb43),{'weekday':'long','month':_0x4c0281(0xa97),'day':'numeric'});document[_0x4c0281(0xfa0)](_0x4c0281(0x1301))[_0x4c0281(0xc62)]=_0x3ff639;}function _0x3b585b(_0x5bbba7){const _0x311570=_0x7c5117;if(!_0x5bbba7)return[{'type':_0x311570(0xda3),'content':'(AI返回了空内容)'}];let _0x5ac021=_0x5bbba7[_0x311570(0xa06)]();const _0x4d6936=/```json\s*([\s\S]*?)\s*```/,_0x3879fa=_0x5ac021[_0x311570(0x1232)](_0x4d6936);_0x3879fa&&_0x3879fa[0x1]&&(_0x5ac021=_0x3879fa[0x1][_0x311570(0xa06)](),console[_0x311570(0x4ee)](_0x311570(0x751)));if(_0x5ac021[_0x311570(0x9b8)]('[')&&_0x5ac021[_0x311570(0x14fe)](']'))try{const _0x2f3ca1=JSON[_0x311570(0x4a0)](_0x5ac021);if(Array[_0x311570(0x345)](_0x2f3ca1))return console[_0x311570(0x4ee)](_0x311570(0x51d)),_0x2f3ca1;}catch(_0x2a1587){console[_0x311570(0x7fa)]('标准JSON数组解析失败，将尝试强力提取...');}const _0x5b6725=_0x5ac021['indexOf']('['),_0x4c667d=_0x5ac021[_0x311570(0x2a2)]('}');if(_0x5b6725!==-0x1&&_0x4c667d!==-0x1&&_0x4c667d>_0x5b6725){const _0x4b8423=_0x5ac021[_0x311570(0xdf3)](']',_0x4c667d);if(_0x4b8423!==-0x1){const _0x566c11=_0x5ac021[_0x311570(0x9fe)](_0x5b6725,_0x4b8423+0x1);try{const _0x22c7e5=JSON[_0x311570(0x4a0)](_0x566c11);if(Array[_0x311570(0x345)](_0x22c7e5))return console[_0x311570(0x4ee)](_0x311570(0xeae)),_0x22c7e5;}catch(_0x72df61){console[_0x311570(0x7fa)](_0x311570(0x10b7));}}}const _0x2757bf=_0x5ac021[_0x311570(0x1232)](/{[^{}]*}/g);if(_0x2757bf){const _0x4ac187=[];for(const _0x14af43 of _0x2757bf){try{const _0x34d419=JSON[_0x311570(0x4a0)](_0x14af43);_0x4ac187[_0x311570(0x481)](_0x34d419);}catch(_0x534800){console['warn'](_0x311570(0xe28),_0x14af43);}}if(_0x4ac187[_0x311570(0xac0)]>0x0)return console[_0x311570(0x4ee)](_0x311570(0x191)),_0x4ac187;}return console[_0x311570(0x52b)](_0x311570(0x1dc),_0x5bbba7),[{'type':_0x311570(0xda3),'content':_0x5bbba7}];}function _0x46db79(_0x1ed10e=new Date()){const _0x41190c=_0x1ed10e['getHours']();if(_0x41190c>=0x0&&_0x41190c<0x5)return'凌晨';else{if(_0x41190c>=0x5&&_0x41190c<0x9)return'早上';else{if(_0x41190c>=0x9&&_0x41190c<0xd)return'上午';else{if(_0x41190c>=0xd&&_0x41190c<0x12)return'下午';else{if(_0x41190c>=0x12&&_0x41190c<0x18)return'晚上';}}}}return'现在';}async function _0x4b95d9(){const _0x231dab=_0x7c5117,_0x5c33bf=document[_0x231dab(0xfa0)](_0x231dab(0x6ea));_0x5c33bf['innerHTML']=_0x231dab(0xa4f);const _0x5da0f8=await _0x372b85['apiPresets'][_0x231dab(0x3bc)]();_0x5da0f8['forEach'](_0x5c04e2=>{const _0x1d3c79=_0x231dab,_0x2d795d=document[_0x1d3c79(0xb4e)]('option');_0x2d795d[_0x1d3c79(0x4f6)]=_0x5c04e2['id'],_0x2d795d['textContent']=_0x5c04e2[_0x1d3c79(0x1023)],_0x5c33bf[_0x1d3c79(0x1155)](_0x2d795d);});const _0x18c519=_0x8f0871[_0x231dab(0xa78)];let _0x38360a=null;for(const _0x39b6f5 of _0x5da0f8){if(_0x39b6f5['proxyUrl']===_0x18c519['proxyUrl']&&_0x39b6f5['apiKey']===_0x18c519[_0x231dab(0xf94)]&&_0x39b6f5[_0x231dab(0xa28)]===_0x18c519[_0x231dab(0xa28)]&&_0x39b6f5[_0x231dab(0xb0e)]===_0x18c519[_0x231dab(0xb0e)]&&_0x39b6f5[_0x231dab(0x1539)]===_0x18c519['secondaryApiKey']&&_0x39b6f5[_0x231dab(0x1020)]===_0x18c519[_0x231dab(0x1020)]&&(_0x39b6f5['minimaxGroupId']||'')===(_0x18c519[_0x231dab(0xa7b)]||'')&&(_0x39b6f5[_0x231dab(0xa94)]||'')===(_0x18c519[_0x231dab(0xa94)]||'')&&(_0x39b6f5['minimaxModel']||'speech-01')===(_0x18c519['minimaxModel']||_0x231dab(0x6dd))){_0x38360a=_0x39b6f5['id'];break;}}_0x38360a?_0x5c33bf[_0x231dab(0x4f6)]=_0x38360a:_0x5c33bf[_0x231dab(0x4f6)]='current';}async function _0x415deb(){const _0xe715f5=_0x7c5117,_0xd15b24=document[_0xe715f5(0xfa0)](_0xe715f5(0x6ea)),_0x45ccea=parseInt(_0xd15b24[_0xe715f5(0x4f6)]);if(isNaN(_0x45ccea))return;const _0x162c7a=await _0x372b85[_0xe715f5(0xd36)]['get'](_0x45ccea);_0x162c7a&&(_0x8f0871[_0xe715f5(0xa78)]={'id':_0xe715f5(0x286),'proxyUrl':_0x162c7a[_0xe715f5(0x1ce)],'apiKey':_0x162c7a[_0xe715f5(0xf94)],'model':_0x162c7a['model'],'secondaryProxyUrl':_0x162c7a[_0xe715f5(0xb0e)],'secondaryApiKey':_0x162c7a['secondaryApiKey'],'secondaryModel':_0x162c7a[_0xe715f5(0x1020)],'minimaxGroupId':_0x162c7a[_0xe715f5(0xa7b)],'minimaxApiKey':_0x162c7a['minimaxApiKey'],'minimaxModel':_0x162c7a[_0xe715f5(0xfea)]},await _0x372b85[_0xe715f5(0xa78)][_0xe715f5(0x11d5)](_0x8f0871[_0xe715f5(0xa78)]),_0x5dc909(),document[_0xe715f5(0xfa0)]('fetch-models-btn')[_0xe715f5(0xb4a)](),_0x162c7a[_0xe715f5(0xb0e)]&&_0x162c7a[_0xe715f5(0x1539)]&&document[_0xe715f5(0xfa0)](_0xe715f5(0xace))['click'](),alert(_0xe715f5(0x3c5)+_0x162c7a['name']+'”'));}async function _0x4a6968(){const _0x1ab7df=_0x7c5117,_0x11cb37=await _0x131a69(_0x1ab7df(0x479),_0x1ab7df(0x22a));if(!_0x11cb37||!_0x11cb37['trim']())return;const _0x4f3be7={'name':_0x11cb37[_0x1ab7df(0xa06)](),'proxyUrl':document[_0x1ab7df(0xfa0)](_0x1ab7df(0xa63))[_0x1ab7df(0x4f6)][_0x1ab7df(0xa06)](),'apiKey':document[_0x1ab7df(0xfa0)]('api-key')['value']['trim'](),'model':document[_0x1ab7df(0xfa0)]('model-select')[_0x1ab7df(0x4f6)],'secondaryProxyUrl':document[_0x1ab7df(0xfa0)]('secondary-proxy-url')['value']['trim'](),'secondaryApiKey':document['getElementById']('secondary-api-key')[_0x1ab7df(0x4f6)][_0x1ab7df(0xa06)](),'secondaryModel':document[_0x1ab7df(0xfa0)](_0x1ab7df(0x109c))[_0x1ab7df(0x4f6)],'minimaxGroupId':document[_0x1ab7df(0xfa0)](_0x1ab7df(0xf3b))[_0x1ab7df(0x4f6)][_0x1ab7df(0xa06)](),'minimaxApiKey':document[_0x1ab7df(0xfa0)](_0x1ab7df(0xd4c))[_0x1ab7df(0x4f6)]['trim'](),'minimaxModel':document['getElementById'](_0x1ab7df(0x7d6))[_0x1ab7df(0x4f6)]},_0x42c9f1=await _0x372b85[_0x1ab7df(0xd36)][_0x1ab7df(0xdc7)](_0x1ab7df(0x1023))['equals'](_0x4f3be7[_0x1ab7df(0x1023)])[_0x1ab7df(0x102a)]();if(_0x42c9f1){const _0x31bb29=await _0x3f65ed(_0x1ab7df(0x2c4),'名为\x20“'+_0x4f3be7[_0x1ab7df(0x1023)]+_0x1ab7df(0xee5),{'confirmButtonClass':'btn-danger'});if(!_0x31bb29)return;_0x4f3be7['id']=_0x42c9f1['id'];}await _0x372b85[_0x1ab7df(0xd36)][_0x1ab7df(0x11d5)](_0x4f3be7),await _0x4b95d9(),alert(_0x1ab7df(0x11e8));}async function _0x3de735(){const _0x1fc6c8=_0x7c5117,_0x2c93b9=document[_0x1fc6c8(0xfa0)]('api-preset-select'),_0x57167d=parseInt(_0x2c93b9[_0x1fc6c8(0x4f6)]);if(isNaN(_0x57167d)){alert('请先从下拉框中选择一个要删除的预设。');return;}const _0x358b66=await _0x372b85[_0x1fc6c8(0xd36)][_0x1fc6c8(0x70d)](_0x57167d);if(!_0x358b66)return;const _0x9818f=await _0x3f65ed(_0x1fc6c8(0x3de),_0x1fc6c8(0x5b6)+_0x358b66['name']+_0x1fc6c8(0x1414),{'confirmButtonClass':_0x1fc6c8(0x611)});_0x9818f&&(await _0x372b85[_0x1fc6c8(0xd36)][_0x1fc6c8(0xf10)](_0x57167d),await _0x4b95d9(),alert(_0x1fc6c8(0x853)));}function _0x5dc909(){const _0x5b674b=_0x7c5117;document[_0x5b674b(0xfa0)]('proxy-url')[_0x5b674b(0x4f6)]=_0x8f0871[_0x5b674b(0xa78)][_0x5b674b(0x1ce)]||'',document[_0x5b674b(0xfa0)](_0x5b674b(0x12f7))[_0x5b674b(0x4f6)]=_0x8f0871['apiConfig'][_0x5b674b(0xf94)]||'',document[_0x5b674b(0xfa0)](_0x5b674b(0xca5))['value']=_0x8f0871['apiConfig'][_0x5b674b(0xb0e)]||'',document[_0x5b674b(0xfa0)](_0x5b674b(0x2a9))[_0x5b674b(0x4f6)]=_0x8f0871[_0x5b674b(0xa78)][_0x5b674b(0x1539)]||'',document[_0x5b674b(0xfa0)](_0x5b674b(0xb17))['checked']=_0x8f0871[_0x5b674b(0x7b0)][_0x5b674b(0xb20)]||![],document[_0x5b674b(0xfa0)](_0x5b674b(0x786))[_0x5b674b(0x4f6)]=_0x8f0871['globalSettings'][_0x5b674b(0x3f2)]||0x3c,document['getElementById']('block-cooldown-input')[_0x5b674b(0x4f6)]=_0x8f0871[_0x5b674b(0x7b0)][_0x5b674b(0x14a2)]||0x1,document[_0x5b674b(0xfa0)](_0x5b674b(0x8f6))['checked']=_0x8f0871['globalSettings'][_0x5b674b(0x1418)],document[_0x5b674b(0xfa0)](_0x5b674b(0x8ba))['value']=_0x8f0871[_0x5b674b(0x7b0)][_0x5b674b(0xf01)]||0x32,document[_0x5b674b(0xfa0)](_0x5b674b(0x99a))[_0x5b674b(0x4f6)]=_0x8f0871['globalSettings'][_0x5b674b(0xd76)]||0x1e;const _0x831ec2=document[_0x5b674b(0xfa0)](_0x5b674b(0x14ac)),_0xf1dbcb=document[_0x5b674b(0xfa0)](_0x5b674b(0x652)),_0x5c7976=_0x8f0871['globalSettings'][_0x5b674b(0x14a5)]||0.8;_0x831ec2['value']=_0x5c7976,_0xf1dbcb[_0x5b674b(0xc62)]=_0x5c7976,document[_0x5b674b(0xfa0)](_0x5b674b(0xf3b))['value']=_0x8f0871[_0x5b674b(0xa78)][_0x5b674b(0xa7b)]||'',document[_0x5b674b(0xfa0)](_0x5b674b(0xd4c))['value']=_0x8f0871[_0x5b674b(0xa78)]['minimaxApiKey']||'',document[_0x5b674b(0xfa0)](_0x5b674b(0x7d6))[_0x5b674b(0x4f6)]=_0x8f0871[_0x5b674b(0xa78)][_0x5b674b(0xfea)]||'speech-01';const _0x5fc4d3=localStorage[_0x5b674b(0xe2e)](_0x5b674b(0x11c2))===_0x5b674b(0xf02),_0x4c3f39=localStorage['getItem'](_0x5b674b(0xb75))||_0x5b674b(0x6b4),_0x46f030=localStorage[_0x5b674b(0xe2e)](_0x5b674b(0x2cd))||'';document[_0x5b674b(0xfa0)](_0x5b674b(0x78c))[_0x5b674b(0xb34)]=_0x5fc4d3,document[_0x5b674b(0xfa0)](_0x5b674b(0xb75))[_0x5b674b(0x4f6)]=_0x4c3f39,document[_0x5b674b(0xfa0)](_0x5b674b(0x2cd))[_0x5b674b(0x4f6)]=_0x46f030,document[_0x5b674b(0xfa0)](_0x5b674b(0x11ea))[_0x5b674b(0x63b)]['display']=_0x5fc4d3?'block':_0x5b674b(0x11b5),_0x4b95d9(),_0x27e1f6();}window[_0x7c5117(0x196)]=_0x5dc909;async function _0x2ceb73(){const _0x7bd959=_0x7c5117,_0x4e1cdd=document['getElementById'](_0x7bd959(0x9cd));_0x4e1cdd[_0x7bd959(0x1331)]='';const _0x3bf254=await _0x372b85[_0x7bd959(0x1269)]['toArray']();if(_0x3bf254[_0x7bd959(0xac0)]===0x0){_0x4e1cdd['innerHTML']=_0x7bd959(0xeb5);return;}_0x3bf254[_0x7bd959(0x458)](_0x1c5a90=>{const _0x184738=_0x7bd959,_0xe8942a=document['createElement'](_0x184738(0xd53));_0xe8942a['className']=_0x184738(0x83d),_0xe8942a[_0x184738(0x8df)]['npcId']=_0x1c5a90['id'],_0xe8942a[_0x184738(0x1331)]=_0x184738(0x13f9)+(_0x1c5a90[_0x184738(0xc61)]||_0x29d47b)+'\x22\x20class=\x22avatar\x22\x20style=\x22border-radius:\x2050%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22name-line\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>'+_0x1c5a90[_0x184738(0x1023)]+_0x184738(0xe5a)+_0x1c5a90[_0x184738(0x3fa)][_0x184738(0x9fe)](0x0,0x1e)+_0x184738(0xc26),_0xe8942a[_0x184738(0x7b8)](_0x184738(0xb4a),()=>_0x92a78c(_0x1c5a90['id'])),_0x53cdde(_0xe8942a,async()=>{await _0x37fdc9(_0x1c5a90['id']);}),_0x4e1cdd['appendChild'](_0xe8942a);});}async function _0x92a78c(_0x3f0d2d=null){const _0xf0a39c=_0x7c5117;editingNpcId=_0x3f0d2d;const _0x599791=document['getElementById'](_0xf0a39c(0x727)),_0xbacefd=document[_0xf0a39c(0xfa0)](_0xf0a39c(0xbde)),_0x1e752e=document['getElementById']('npc-name-input'),_0x183708=document[_0xf0a39c(0xfa0)](_0xf0a39c(0x13be)),_0x1393ee=document[_0xf0a39c(0xfa0)](_0xf0a39c(0x883)),_0x1b2cb6=document[_0xf0a39c(0xfa0)]('npc-association-list'),_0x29665e=document['getElementById'](_0xf0a39c(0xbfa)),_0x3a2857=document['getElementById'](_0xf0a39c(0xacb)),_0x441b9a=document[_0xf0a39c(0xfa0)](_0xf0a39c(0xd2d));_0x1b2cb6[_0xf0a39c(0x1331)]='',_0x29665e[_0xf0a39c(0x1331)]=_0xf0a39c(0x711);const _0x5b4ae5=await _0x372b85[_0xf0a39c(0xa57)][_0xf0a39c(0x3bc)]();_0x5b4ae5['forEach'](_0x1be7f4=>{const _0x166ff1=_0xf0a39c,_0x96e038=document['createElement'](_0x166ff1(0x327));_0x96e038[_0x166ff1(0x4f6)]=_0x1be7f4['id'],_0x96e038[_0x166ff1(0xc62)]=_0x1be7f4['name'],_0x29665e[_0x166ff1(0x1155)](_0x96e038);}),_0x1b2cb6[_0xf0a39c(0x1331)]+='<label><input\x20type=\x22checkbox\x22\x20value=\x22user\x22>\x20'+(_0x8f0871['qzoneSettings']['nickname']||'我')+_0xf0a39c(0x1323),Object[_0xf0a39c(0x142f)](_0x8f0871[_0xf0a39c(0x1260)])['filter'](_0x298730=>!_0x298730[_0xf0a39c(0x1364)])['forEach'](_0x2192e4=>{const _0x172651=_0xf0a39c;_0x1b2cb6['innerHTML']+=_0x172651(0x132f)+_0x2192e4['id']+_0x172651(0xc97)+_0x2192e4[_0x172651(0x1023)]+_0x172651(0xf11);});if(_0x3f0d2d){_0xbacefd[_0xf0a39c(0xc62)]=_0xf0a39c(0x3a2);const _0x4d882d=await _0x372b85[_0xf0a39c(0x1269)][_0xf0a39c(0x70d)](_0x3f0d2d);_0x4d882d&&(_0x1e752e[_0xf0a39c(0x4f6)]=_0x4d882d[_0xf0a39c(0x1023)],_0x183708[_0xf0a39c(0x4f6)]=_0x4d882d[_0xf0a39c(0x3fa)],_0x1393ee[_0xf0a39c(0x53e)]=_0x4d882d[_0xf0a39c(0xc61)]||_0x29d47b,_0x3a2857['checked']=_0x4d882d[_0xf0a39c(0xb20)]!==![],_0x441b9a[_0xf0a39c(0x4f6)]=_0x4d882d[_0xf0a39c(0x1158)]||0xf,_0x29665e[_0xf0a39c(0x4f6)]=_0x4d882d[_0xf0a39c(0x34b)]||'',_0x4d882d[_0xf0a39c(0x10ef)]&&Array['isArray'](_0x4d882d[_0xf0a39c(0x10ef)])&&_0x4d882d[_0xf0a39c(0x10ef)]['forEach'](_0x145015=>{const _0x35101f=_0xf0a39c,_0x4a6c63=_0x1b2cb6[_0x35101f(0xfb1)](_0x35101f(0xfb0)+_0x145015+'\x22]');if(_0x4a6c63)_0x4a6c63[_0x35101f(0xb34)]=!![];}));}else{_0xbacefd[_0xf0a39c(0xc62)]=_0xf0a39c(0x71c),_0x1e752e[_0xf0a39c(0x4f6)]='',_0x183708['value']='',_0x1393ee[_0xf0a39c(0x53e)]=_0x29d47b,_0x3a2857['checked']=!![],_0x441b9a[_0xf0a39c(0x4f6)]=0xf,_0x29665e['value']='';const _0x2e6efe=_0x1b2cb6['querySelector'](_0xf0a39c(0x38e));if(_0x2e6efe)_0x2e6efe[_0xf0a39c(0xb34)]=!![];}_0x599791['classList'][_0xf0a39c(0x1327)](_0xf0a39c(0xdcc));}async function _0x12867e(){const _0x30cdee=_0x7c5117,_0x4a6ba6=document[_0x30cdee(0xfa0)](_0x30cdee(0x580))[_0x30cdee(0x4f6)][_0x30cdee(0xa06)](),_0xec22f5=document['getElementById'](_0x30cdee(0x13be))[_0x30cdee(0x4f6)][_0x30cdee(0xa06)]();if(!_0x4a6ba6||!_0xec22f5){alert(_0x30cdee(0x911));return;}const _0xe2d43f=Array['from'](document[_0x30cdee(0x2a1)]('#npc-association-list\x20input:checked'))[_0x30cdee(0x556)](_0x479257=>_0x479257[_0x30cdee(0x4f6)]),_0x52ba03=document[_0x30cdee(0xfa0)](_0x30cdee(0xacb))[_0x30cdee(0xb34)],_0x3988dc=parseInt(document['getElementById']('npc-action-cooldown-input')[_0x30cdee(0x4f6)])||0xf,_0x162d52=parseInt(document['getElementById'](_0x30cdee(0xbfa))[_0x30cdee(0x4f6)])||null,_0xb693f2={'name':_0x4a6ba6,'persona':_0xec22f5,'avatar':document['getElementById'](_0x30cdee(0x883))[_0x30cdee(0x53e)],'associatedWith':_0xe2d43f,'enableBackgroundActivity':_0x52ba03,'actionCooldownMinutes':_0x3988dc,'npcGroupId':_0x162d52};if(editingNpcId)await _0x372b85[_0x30cdee(0x1269)][_0x30cdee(0x1477)](editingNpcId,_0xb693f2);else{const _0x3e4ebe=await _0x372b85[_0x30cdee(0x1269)]['add'](_0xb693f2);if(_0x19f3af&&_0x8f0871['activeChatId']){const _0xaaad79=_0x8f0871[_0x30cdee(0x1260)][_0x8f0871[_0x30cdee(0xac8)]];_0xaaad79[_0x30cdee(0x1364)]&&(_0xaaad79[_0x30cdee(0x2cf)][_0x30cdee(0x481)]({'id':_0x30cdee(0xbec)+_0x3e4ebe,'originalName':_0x4a6ba6,'groupNickname':_0x4a6ba6,'persona':_0xec22f5,'avatar':_0xb693f2[_0x30cdee(0xc61)],'isNpc':!![]}),await _0x372b85[_0x30cdee(0x1260)][_0x30cdee(0x11d5)](_0xaaad79));}}document[_0x30cdee(0xfa0)](_0x30cdee(0x727))[_0x30cdee(0x128f)]['remove'](_0x30cdee(0xdcc)),_0x19f3af?(_0x19f3af=![],_0x4b7358()):await _0x2ceb73();}async function _0x2b0bbf(){const _0x53cc37=_0x7c5117;await _0x5af9f6(),document[_0x53cc37(0xfa0)](_0x53cc37(0xb5a))[_0x53cc37(0x128f)][_0x53cc37(0x1327)](_0x53cc37(0xdcc));}async function _0x5af9f6(){const _0x162f59=_0x7c5117,_0x3d34f3=document[_0x162f59(0xfa0)]('existing-npc-groups-list'),_0x68a0e8=await _0x372b85['npcGroups'][_0x162f59(0x3bc)]();_0x3d34f3['innerHTML']='',_0x68a0e8[_0x162f59(0xac0)]===0x0&&(_0x3d34f3['innerHTML']='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-secondary);\x22>还没有任何分组</p>'),_0x68a0e8['forEach'](_0x96e959=>{const _0x1076b7=_0x162f59,_0xd797b8=document[_0x1076b7(0xb4e)](_0x1076b7(0xd53));_0xd797b8[_0x1076b7(0x1287)]='existing-group-item',_0xd797b8[_0x1076b7(0x1331)]=_0x1076b7(0x541)+_0x96e959[_0x1076b7(0x1023)]+_0x1076b7(0x12cf)+_0x96e959['id']+'\x22>×</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x3d34f3[_0x1076b7(0x1155)](_0xd797b8);});}async function _0x1257ef(){const _0x3f55e2=_0x7c5117,_0x62fa3b=document[_0x3f55e2(0xfa0)](_0x3f55e2(0xd28)),_0x17896f=_0x62fa3b[_0x3f55e2(0x4f6)][_0x3f55e2(0xa06)]();if(!_0x17896f){alert('分组名不能为空！');return;}const _0x4a3f5f=await _0x372b85[_0x3f55e2(0xa57)][_0x3f55e2(0xdc7)](_0x3f55e2(0x1023))[_0x3f55e2(0x8c2)](_0x17896f)[_0x3f55e2(0x102a)]();if(_0x4a3f5f){alert(_0x3f55e2(0x10e8)+_0x17896f+_0x3f55e2(0x1200));return;}await _0x372b85['npcGroups'][_0x3f55e2(0x1327)]({'name':_0x17896f}),_0x62fa3b[_0x3f55e2(0x4f6)]='',await _0x5af9f6();}async function _0x5c6a00(_0x5a7cc3){const _0x33192=_0x7c5117,_0x2a0395=await _0x3f65ed(_0x33192(0x1464),_0x33192(0x1df),{'confirmButtonClass':_0x33192(0x611)});_0x2a0395&&(await _0x372b85['npcGroups'][_0x33192(0xf10)](_0x5a7cc3),await _0x372b85[_0x33192(0x1269)][_0x33192(0xdc7)](_0x33192(0x34b))[_0x33192(0x8c2)](_0x5a7cc3)['modify']({'npcGroupId':null}),await _0x5af9f6());}async function _0x37fdc9(_0x5ebb5d){const _0x4ef07d=_0x7c5117,_0xb8eb68=await _0x372b85[_0x4ef07d(0x1269)][_0x4ef07d(0x70d)](_0x5ebb5d);if(!_0xb8eb68)return;const _0x38c637=await _0x3f65ed('删除NPC','确定要删除NPC\x20“'+_0xb8eb68[_0x4ef07d(0x1023)]+_0x4ef07d(0x1414),{'confirmButtonClass':'btn-danger'});_0x38c637&&(await _0x372b85[_0x4ef07d(0x1269)]['delete'](_0x5ebb5d),await _0x2ceb73());}let _0x5d002c=0x0;function _0x58b9a0(_0x3024d5){const _0x4e6e9c=_0x7c5117,_0x28d3c6=document['createElement']('div');return _0x28d3c6['className']=_0x4e6e9c(0x374),_0x28d3c6[_0x4e6e9c(0x1331)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22chat-group-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22arrow\x22>▼</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22group-name\x22>'+_0x3024d5[_0x4e6e9c(0x1023)]+_0x4e6e9c(0xf2a),_0x28d3c6;}function _0x2ac8d4(_0x53f09d){const _0x583cbb=_0x7c5117,_0x3a4e07=document[_0x583cbb(0xfa0)](_0x583cbb(0xf21)),_0x4231f1=document['getElementById'](_0x583cbb(0xec8));if(_0x4231f1)_0x4231f1[_0x583cbb(0x443)]();const _0xe6b012=_0x5d002c,_0x297a9c=_0x5d002c+CHAT_LIST_RENDER_WINDOW,_0x361759=_0x53f09d[_0x583cbb(0x59f)](_0xe6b012,_0x297a9c),_0x2c6ec5=document[_0x583cbb(0x491)]();let _0x330451=_0x3a4e07[_0x583cbb(0xfb1)]('.chat-group-content:last-of-type');_0x361759[_0x583cbb(0x458)](_0x2f8eb1=>{const _0x2a89e6=_0x583cbb;if(_0x2f8eb1[_0x2a89e6(0x682)]===_0x2a89e6(0x702)){const _0x88a839=_0x58b9a0(_0x2f8eb1['group']);_0x2c6ec5['appendChild'](_0x88a839),_0x330451=_0x88a839[_0x2a89e6(0xfb1)](_0x2a89e6(0xd1a));}else{if(_0x2f8eb1['type']===_0x2a89e6(0xc2d)){const _0x233f33=_0x377fab(_0x2f8eb1[_0x2a89e6(0xe5e)]);_0x330451&&_0x2f8eb1[_0x2a89e6(0xe5e)][_0x2a89e6(0xdbf)]?_0x330451[_0x2a89e6(0x1155)](_0x233f33):(_0x2c6ec5[_0x2a89e6(0x1155)](_0x233f33),_0x330451=null);}}}),_0x3a4e07[_0x583cbb(0x1155)](_0x2c6ec5),_0x5d002c+=_0x361759['length'],_0x53f09d[_0x583cbb(0xac0)]>_0x5d002c&&_0x23f68c(_0x3a4e07,_0x53f09d),document[_0x583cbb(0x2a1)](_0x583cbb(0x799))[_0x583cbb(0x458)](_0x2ba924=>{const _0x5c1098=_0x583cbb,_0x538a9f=_0x2ba924['cloneNode'](!![]);_0x2ba924[_0x5c1098(0xcdd)][_0x5c1098(0x5d2)](_0x538a9f,_0x2ba924),_0x538a9f[_0x5c1098(0x7b8)]('click',()=>{const _0x305928=_0x5c1098;_0x538a9f['classList'][_0x305928(0xb80)](_0x305928(0xef5)),_0x538a9f[_0x305928(0xd8d)][_0x305928(0x128f)][_0x305928(0xb80)]('collapsed');});});}async function _0x2d75fb(){const _0x4b237b=_0x7c5117,_0x366e88=document[_0x4b237b(0xfa0)](_0x4b237b(0xf21));_0x366e88[_0x4b237b(0x1331)]='';const _0x88d64e=Object[_0x4b237b(0x142f)](_0x8f0871[_0x4b237b(0x1260)])[_0x4b237b(0x1376)]((_0x2219be,_0x34170f)=>{const _0x3b9547=_0x4b237b,_0x19ca86=(_0x34170f[_0x3b9547(0x67d)]||![])-(_0x2219be[_0x3b9547(0x67d)]||![]);if(_0x19ca86!==0x0)return _0x19ca86;return(_0x34170f[_0x3b9547(0xc88)][_0x3b9547(0x59f)](-0x1)[0x0]?.[_0x3b9547(0xe55)]||0x0)-(_0x2219be[_0x3b9547(0xc88)][_0x3b9547(0x59f)](-0x1)[0x0]?.[_0x3b9547(0xe55)]||0x0);}),_0x29b686=await _0x372b85['qzoneGroups'][_0x4b237b(0x3bc)]();if(_0x88d64e[_0x4b237b(0xac0)]===0x0){_0x366e88[_0x4b237b(0x1331)]=_0x4b237b(0x343);return;}_0x29b686[_0x4b237b(0x458)](_0x4c94df=>{const _0x3e2c17=_0x4b237b,_0xf07ddf=_0x88d64e[_0x3e2c17(0x7ed)](_0x33505c=>_0x33505c[_0x3e2c17(0xdbf)]===_0x4c94df['id']);_0x4c94df[_0x3e2c17(0xf80)]=_0xf07ddf?_0xf07ddf['history']['slice'](-0x1)[0x0]?.[_0x3e2c17(0xe55)]||0x0:0x0;}),_0x29b686[_0x4b237b(0x1376)]((_0x235904,_0xd866f1)=>_0xd866f1[_0x4b237b(0xf80)]-_0x235904['latestTimestamp']),_0x22bfcf=[];const _0x3422a5=new Set();_0x88d64e[_0x4b237b(0x458)](_0x4fc2a5=>{const _0x11e58a=_0x4b237b;_0x4fc2a5[_0x11e58a(0x67d)]&&(_0x22bfcf[_0x11e58a(0x481)]({'type':_0x11e58a(0xc2d),'chat':_0x4fc2a5}),_0x3422a5[_0x11e58a(0x1327)](_0x4fc2a5['id']));}),_0x29b686['forEach'](_0x28fc9d=>{const _0x23cb46=_0x4b237b,_0x63c254=_0x88d64e[_0x23cb46(0xde7)](_0x1f6bbd=>!_0x1f6bbd['isPinned']&&!_0x1f6bbd[_0x23cb46(0x1364)]&&_0x1f6bbd['groupId']===_0x28fc9d['id']);_0x63c254['length']>0x0&&(_0x22bfcf[_0x23cb46(0x481)]({'type':_0x23cb46(0x702),'group':_0x28fc9d}),_0x63c254[_0x23cb46(0x458)](_0x5a979a=>{const _0x18c5bf=_0x23cb46;_0x22bfcf[_0x18c5bf(0x481)]({'type':'chatItem','chat':_0x5a979a}),_0x3422a5['add'](_0x5a979a['id']);}));}),_0x88d64e[_0x4b237b(0x458)](_0x3c8562=>{const _0x4fffd8=_0x4b237b;!_0x3422a5[_0x4fffd8(0xd58)](_0x3c8562['id'])&&(_0x22bfcf[_0x4fffd8(0x481)]({'type':'chatItem','chat':_0x3c8562}),_0x3422a5['add'](_0x3c8562['id']));}),_0x5d002c=0x0,_0x2ac8d4();}function _0x58b9a0(_0x3e7726){const _0x315f59=_0x7c5117,_0xe2a0eb=document['createElement'](_0x315f59(0xd53));return _0xe2a0eb[_0x315f59(0x1287)]='chat-group-container',_0xe2a0eb[_0x315f59(0x1331)]=_0x315f59(0xa0d)+_0x3e7726[_0x315f59(0x1023)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22chat-group-content\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xe2a0eb;}function _0x23f68c(_0x24e683,_0x2f588e){const _0x5a574e=_0x7c5117,_0x44a537=document[_0x5a574e(0xb4e)](_0x5a574e(0x1029));_0x44a537['id']=_0x5a574e(0xec8),_0x44a537['textContent']=_0x5a574e(0x4ae),_0x44a537['className']=_0x5a574e(0x132b),_0x44a537[_0x5a574e(0x7b8)](_0x5a574e(0xb4a),()=>_0x2ac8d4(_0x2f588e),{'once':!![]}),_0x24e683[_0x5a574e(0x9f3)](_0x44a537);}function _0x2ac8d4(){const _0x3afe31=_0x7c5117;if(_0x4ed3d1)return;const _0xe2879e=document[_0x3afe31(0xfa0)](_0x3afe31(0xf21)),_0x4db7eb=document[_0x3afe31(0xfa0)]('messages-view');if(!_0xe2879e||!_0x4db7eb)return;if(_0x5d002c>=_0x22bfcf[_0x3afe31(0xac0)])return;_0x4ed3d1=!![];const _0x376479=_0x5d002c===0x0,_0x51be77=()=>{const _0x3f43eb=_0x3afe31;_0x10441d(_0xe2879e);const _0x11a584=_0x8f0871[_0x3f43eb(0x7b0)]['chatListRenderWindow']||0x1e,_0xead713=_0x5d002c,_0xbcbdc4=_0x5d002c+_0x11a584,_0x17499f=_0x22bfcf[_0x3f43eb(0x59f)](_0xead713,_0xbcbdc4),_0x5ef411=document[_0x3f43eb(0x491)]();let _0x438b07=_0xe2879e['querySelector'](_0x3f43eb(0x147b));_0x17499f[_0x3f43eb(0x458)](_0x40692f=>{const _0x20a823=_0x3f43eb;if(_0x40692f[_0x20a823(0x682)]===_0x20a823(0x702)){const _0x511db2=_0x58b9a0(_0x40692f[_0x20a823(0x14ae)]);_0x5ef411[_0x20a823(0x1155)](_0x511db2),_0x438b07=_0x511db2[_0x20a823(0xfb1)](_0x20a823(0xd1a));}else{if(_0x40692f['type']===_0x20a823(0xc2d)){const _0x272069=_0x377fab(_0x40692f[_0x20a823(0xe5e)]);if(_0x40692f['chat']['groupId']&&_0x438b07)_0x438b07[_0x20a823(0x1155)](_0x272069);else{_0x5ef411[_0x20a823(0x1155)](_0x272069);if(!_0x40692f[_0x20a823(0xe5e)][_0x20a823(0xdbf)])_0x438b07=null;}}}}),_0xe2879e[_0x3f43eb(0x1155)](_0x5ef411),_0x5d002c+=_0x17499f[_0x3f43eb(0xac0)],_0xe2879e[_0x3f43eb(0x2a1)](_0x3f43eb(0xca6))[_0x3f43eb(0x458)](_0x2de0e0=>{const _0x234aaa=_0x3f43eb;_0x2de0e0[_0x234aaa(0x8df)][_0x234aaa(0xed5)]='true',_0x2de0e0[_0x234aaa(0x7b8)](_0x234aaa(0xb4a),()=>{const _0x21f39b=_0x234aaa;_0x2de0e0[_0x21f39b(0x128f)]['toggle'](_0x21f39b(0xef5)),_0x2de0e0[_0x21f39b(0xd8d)]['classList'][_0x21f39b(0xb80)]('collapsed');});}),_0x4ed3d1=![],_0x4db7eb['scrollHeight']<=_0x4db7eb[_0x3f43eb(0x144f)]&&_0x5d002c<_0x22bfcf[_0x3f43eb(0xac0)]&&_0x2ac8d4();};_0x376479?_0x51be77():(_0x4da623(_0xe2879e,_0x3afe31(0xb59)),setTimeout(_0x51be77,0x1f4));}function _0x377fab(_0x389db5){const _0x548b5f=_0x7c5117;try{const _0x592a13=_0x389db5[_0x548b5f(0xc88)][_0x548b5f(0xde7)](_0x32e70c=>!_0x32e70c[_0x548b5f(0x1559)])['slice'](-0x1)[0x0]||{};let _0x1ac615;if(!_0x389db5[_0x548b5f(0x1364)]&&_0x389db5[_0x548b5f(0x1171)]?.[_0x548b5f(0x103e)]===_0x548b5f(0x1107))_0x1ac615=_0x548b5f(0x882)+(_0x389db5[_0x548b5f(0x1171)]['applicationReason']||_0x548b5f(0xf30))+_0x548b5f(0xaca);else{if(!_0x389db5[_0x548b5f(0x1364)]&&_0x389db5[_0x548b5f(0x1171)]?.[_0x548b5f(0x103e)]==='blocked_by_ai')_0x1ac615=_0x548b5f(0xa03);else{if(_0x389db5[_0x548b5f(0x1364)]){if(_0x592a13[_0x548b5f(0x682)]===_0x548b5f(0x260))_0x1ac615=_0x548b5f(0x931)+_0x592a13[_0x548b5f(0x1469)];else{if(_0x592a13[_0x548b5f(0x682)]===_0x548b5f(0x35f))_0x1ac615=_0x548b5f(0x1532);else{if(_0x592a13[_0x548b5f(0x682)]==='ai_image'||_0x592a13[_0x548b5f(0x682)]==='user_photo')_0x1ac615='[照片]';else{if(_0x592a13[_0x548b5f(0x682)]===_0x548b5f(0x412))_0x1ac615=_0x548b5f(0xf4b);else{if(typeof _0x592a13['content']===_0x548b5f(0x857)&&_0x4a5ebd[_0x548b5f(0x3fb)](_0x592a13[_0x548b5f(0x1469)]))_0x1ac615=_0x592a13['meaning']?_0x548b5f(0x103c)+_0x592a13['meaning']+']':'[表情]';else Array[_0x548b5f(0x345)](_0x592a13[_0x548b5f(0x1469)])?_0x1ac615=_0x548b5f(0xdde):_0x1ac615=String(_0x592a13[_0x548b5f(0x1469)]||_0x548b5f(0x1111))[_0x548b5f(0x9fe)](0x0,0x14);}}}}if(_0x592a13[_0x548b5f(0x213)]&&_0x592a13[_0x548b5f(0x682)]!==_0x548b5f(0x260)){const _0x33c285=_0x185e1d(_0x389db5,_0x592a13[_0x548b5f(0x213)]);_0x1ac615=_0x33c285+':\x20'+_0x1ac615;}}else{const _0x3b8b11=_0x389db5['status']?.[_0x548b5f(0xda3)]||'在线';_0x1ac615='['+_0x3b8b11+']';}}}const _0x2504f5=document[_0x548b5f(0xb4e)](_0x548b5f(0xd53));_0x2504f5[_0x548b5f(0x1287)]=_0x548b5f(0x83d),_0x2504f5[_0x548b5f(0x8df)][_0x548b5f(0xe94)]=_0x389db5['id'];_0x389db5[_0x548b5f(0x67d)]&&_0x2504f5[_0x548b5f(0x128f)]['add'](_0x548b5f(0x127d));const _0x36d224=_0x389db5[_0x548b5f(0x1364)]?_0x389db5[_0x548b5f(0x12d7)]['groupAvatar']:_0x389db5[_0x548b5f(0x12d7)][_0x548b5f(0xce8)],_0x1a668f=_0x389db5[_0x548b5f(0x1364)]?'':_0x389db5[_0x548b5f(0x12d7)][_0x548b5f(0x761)]||'';let _0x200fb4;_0x1a668f?_0x200fb4='<div\x20class=\x22avatar-with-frame\x22><img\x20src=\x22'+(_0x36d224||_0x1a2fc1)+_0x548b5f(0x11d7)+_0x1a668f+_0x548b5f(0x116b):_0x200fb4=_0x548b5f(0x131f)+(_0x36d224||_0x1a2fc1)+_0x548b5f(0x1139);const _0xddec9b=_0x1a668f?_0x548b5f(0x14cd):'',_0x14f382=_0x548b5f(0x8d3)+_0xddec9b+'\x22>'+_0x200fb4+'</div>';_0x2504f5[_0x548b5f(0x1331)]=_0x548b5f(0xbc0)+_0x14f382+_0x548b5f(0x549)+_0x389db5['name']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x389db5[_0x548b5f(0x1364)]?'<span\x20class=\x22group-tag\x22>群聊</span>':'')+_0x548b5f(0x630)+(_0x389db5[_0x548b5f(0x1364)]?_0x548b5f(0xcef):_0x548b5f(0x3db))+';\x20font-style:\x20italic;\x22>'+_0x1ac615+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22unread-count-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22unread-count\x22\x20style=\x22display:\x20none;\x22>0</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';const _0x5f33d8=_0x389db5['unreadCount']||0x0,_0x94299c=_0x2504f5[_0x548b5f(0xfb1)](_0x548b5f(0x308));_0x5f33d8>0x0?(_0x94299c[_0x548b5f(0xc62)]=_0x5f33d8>0x63?_0x548b5f(0x65e):_0x5f33d8,_0x94299c[_0x548b5f(0x63b)][_0x548b5f(0x1248)]=_0x548b5f(0x143a)):_0x94299c[_0x548b5f(0x63b)][_0x548b5f(0x1248)]=_0x548b5f(0x11b5);const _0x3904c7=_0x2504f5[_0x548b5f(0xfb1)](_0x548b5f(0x1498));_0x3904c7&&(_0x3904c7['style'][_0x548b5f(0x298)]=_0x548b5f(0x157c),_0x3904c7['addEventListener']('dblclick',_0x5b16d0=>{const _0x3c9e47=_0x548b5f;_0x5b16d0[_0x3c9e47(0x21b)]();const _0x597ce9=_0x389db5[_0x3c9e47(0x1364)]?_0x389db5[_0x3c9e47(0x1023)]:_0x389db5[_0x3c9e47(0x93e)];_0x2e122d(_0x389db5['id'],_0x597ce9);}));const _0x521d50=_0x2504f5[_0x548b5f(0xfb1)](_0x548b5f(0xc58));return _0x521d50&&_0x521d50[_0x548b5f(0x7b8)]('click',()=>_0x41c772(_0x389db5['id'])),_0x53cdde(_0x2504f5,async _0x278874=>{const _0x4b6b0b=_0x548b5f,_0x516d7b=await _0x2ea963(_0x389db5);switch(_0x516d7b){case _0x4b6b0b(0x7a4):_0x389db5[_0x4b6b0b(0x67d)]=!_0x389db5[_0x4b6b0b(0x67d)],await _0x372b85['chats']['put'](_0x389db5),_0x2d75fb();break;case'delete':const _0x51ba81=await _0x3f65ed(_0x4b6b0b(0xe06),_0x4b6b0b(0xc54)+_0x389db5['name']+_0x4b6b0b(0x9ba),{'confirmButtonClass':_0x4b6b0b(0x611)});if(_0x51ba81){_0x46bc8b[_0x4b6b0b(0x684)]&&_0x46bc8b[_0x4b6b0b(0xac8)]===_0x389db5['id']&&await _0x2530aa(![]);delete _0x8f0871['chats'][_0x389db5['id']];if(_0x8f0871[_0x4b6b0b(0xac8)]===_0x389db5['id'])_0x8f0871[_0x4b6b0b(0xac8)]=null;await _0x372b85[_0x4b6b0b(0x1260)]['delete'](_0x389db5['id']),_0x2d75fb();}break;default:break;}}),_0x2504f5;}catch(_0x1b8a2c){return console['error']('渲染聊天项\x20['+(_0x389db5[_0x548b5f(0x1023)]||'未知')+_0x548b5f(0x44a)+_0x389db5['id']+')\x20时出错:',_0x1b8a2c),null;}}async function _0x54d32b(_0x3719ac){const _0x46c107=_0x7c5117;_0x126bf4(),_0x1e62df();const _0x418277=_0x8f0871[_0x46c107(0x1260)][_0x3719ac];if(!_0x418277)return;_0x17a1e5();const _0x5f4e1a=document[_0x46c107(0xfa0)](_0x46c107(0x142d)),_0x45aa86=document[_0x46c107(0xfa0)]('chat-input-area'),_0x48c3ae=document[_0x46c107(0xfa0)]('chat-lock-overlay'),_0x39259a=document[_0x46c107(0xfa0)](_0x46c107(0x1c5));_0x5f4e1a[_0x46c107(0x8df)][_0x46c107(0xb0d)]=_0x418277[_0x46c107(0x12d7)][_0x46c107(0xb0d)]||_0x46c107(0xe82);const _0x358f28=_0x418277['settings'][_0x46c107(0xf0e)]||0xd;_0x5f4e1a[_0x46c107(0x63b)][_0x46c107(0x2da)](_0x46c107(0x679),_0x358f28+'px'),_0x512130(_0x418277[_0x46c107(0x12d7)][_0x46c107(0x688)]||'','#chat-messages',_0x46c107(0x1558)),document[_0x46c107(0xfa0)](_0x46c107(0x250))[_0x46c107(0xc62)]=_0x418277[_0x46c107(0x1023)];const _0x5aacd8=document['getElementById'](_0x46c107(0x3c0)),_0x451fb4=_0x5aacd8['querySelector'](_0x46c107(0x1ba));_0x418277[_0x46c107(0x1364)]?(_0x5aacd8['style'][_0x46c107(0x1248)]=_0x46c107(0x11b5),document[_0x46c107(0xfa0)]('chat-header-title-wrapper')[_0x46c107(0x63b)][_0x46c107(0xbd7)]=_0x46c107(0x1117)):(_0x5aacd8[_0x46c107(0x63b)][_0x46c107(0x1248)]='flex',document[_0x46c107(0xfa0)](_0x46c107(0x7ef))[_0x46c107(0x63b)]['justifyContent']=_0x46c107(0x100a),_0x451fb4[_0x46c107(0xc62)]=_0x418277[_0x46c107(0x103e)]?.['text']||'在线',_0x5aacd8[_0x46c107(0x128f)][_0x46c107(0xb80)]('busy',_0x418277[_0x46c107(0x103e)]?.['isBusy']||![]));const _0x482bc2=document[_0x46c107(0xfa0)](_0x46c107(0xe95)),_0x2a60f3=_0x418277[_0x46c107(0x12d7)][_0x46c107(0x1113)],_0x597f4a=_0x8f0871['globalSettings'][_0x46c107(0xf8b)],_0x26c977=document[_0x46c107(0xfa0)](_0x46c107(0x1025))[_0x46c107(0x128f)][_0x46c107(0xea7)](_0x46c107(0x10b0)),_0x2963cb=_0x26c977?'#000000':'#f0f2f5';if(_0x2a60f3)_0x482bc2['style']['backgroundImage']='url('+_0x2a60f3+')',_0x482bc2[_0x46c107(0x63b)][_0x46c107(0x11f8)]='transparent';else _0x597f4a?(_0x482bc2[_0x46c107(0x63b)]['backgroundImage']=_0x46c107(0xfbd)+_0x597f4a+')',_0x482bc2[_0x46c107(0x63b)][_0x46c107(0x11f8)]=_0x46c107(0x108d)):(_0x482bc2[_0x46c107(0x63b)][_0x46c107(0xc93)]=_0x46c107(0x11b5),_0x482bc2[_0x46c107(0x63b)][_0x46c107(0x11f8)]=_0x2963cb);if(_0x418277[_0x46c107(0xf75)])_0x45aa86[_0x46c107(0x63b)][_0x46c107(0x1248)]=_0x46c107(0x11b5),_0x48c3ae['style'][_0x46c107(0x1248)]='flex',_0x39259a[_0x46c107(0x1331)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22lock-text\x22>正在围观AI们的群聊...</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22spectator-actions-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22spectator-reroll-btn\x22\x20class=\x22lock-action-btn\x20secondary\x22\x20title=\x22重新生成上一轮对话\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M20\x2011A8.1\x208.1\x200\x200\x200\x204.5\x209M4\x205v4h4\x22></path>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M4\x2013a8.1\x208.1\x200\x200\x200\x2015.5\x202m.5\x204v-4h-4\x22></path>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22spectator-propel-btn\x22\x20class=\x22lock-action-btn\x22>🎬\x20推进剧情</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22spectator-edit-btn\x22\x20class=\x22lock-action-btn\x20secondary\x22\x20title=\x22导演剪辑室：编辑AI上一轮的响应\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M20.24\x2012.24a6\x206\x200\x200\x200-8.49-8.49L5\x2010.5V19h8.5z\x22></path>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<line\x20x1=\x2216\x22\x20y1=\x228\x22\x20x2=\x222\x22\x20y2=\x2222\x22></line>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<line\x20x1=\x2217.5\x22\x20y1=\x2215\x22\x20x2=\x229\x22\x20y2=\x2215\x22></line>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',document[_0x46c107(0xfa0)](_0x46c107(0x9a8))[_0x46c107(0x9f0)]=_0x1bdca8;else{_0x45aa86[_0x46c107(0x63b)][_0x46c107(0x1248)]='flex',_0x48c3ae['style'][_0x46c107(0x1248)]='none',_0x39259a[_0x46c107(0x1331)]='';if(!_0x418277['isGroup']&&_0x418277[_0x46c107(0x1171)]['status']!=='friend'){_0x48c3ae['style'][_0x46c107(0x1248)]=_0x46c107(0x138c),_0x45aa86[_0x46c107(0x63b)][_0x46c107(0xc40)]=_0x46c107(0x2d1);let _0x19df8c='';switch(_0x418277[_0x46c107(0x1171)][_0x46c107(0x103e)]){case'blocked_by_user':const _0x3546b1=_0x25915b!==null,_0x44a147=_0x418277[_0x46c107(0x1171)][_0x46c107(0x334)],_0x1b48df=_0x8f0871[_0x46c107(0x7b0)][_0x46c107(0x14a2)]||0x1,_0x4238e1=_0x1b48df*0x3c*0x3c*0x3e8,_0x48d0a0=Date[_0x46c107(0xc22)]()-_0x44a147,_0xe2c9e=_0x48d0a0>_0x4238e1,_0x192063=Math['max'](0x0,Math[_0x46c107(0x7a7)]((_0x4238e1-_0x48d0a0)/(0x3e8*0x3c)));_0x19df8c=_0x46c107(0x142a)+_0x418277[_0x46c107(0x1023)]+_0x46c107(0x73e)+(_0x8f0871['globalSettings'][_0x46c107(0xb20)]?'<span\x20style=\x22color:\x20green;\x22>已开启</span>':_0x46c107(0x80f))+_0x46c107(0x439)+(_0x3546b1?'<span\x20style=\x22color:\x20green;\x22>运行中</span>':'<span\x20style=\x22color:\x20red;\x22>未运行</span>')+'<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20当前角色状态:\x20<strong>'+_0x418277[_0x46c107(0x1171)][_0x46c107(0x103e)]+'</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20需要冷静(小时):\x20<strong>'+_0x1b48df+'</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20冷静期是否结束:\x20'+(_0xe2c9e?_0x46c107(0x92a):_0x46c107(0xc5c)+_0x192063+_0x46c107(0x147d))+_0x46c107(0xedc)+(_0xe2c9e&&_0x8f0871[_0x46c107(0x7b0)]['enableBackgroundActivity']?_0x46c107(0xbae):_0x46c107(0xfa1))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22force-apply-check-btn\x22\x20class=\x22lock-action-btn\x20secondary\x22\x20style=\x22margin-top:\x2010px;\x22>强制触发一次好友申请检测</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';break;case _0x46c107(0x18f):_0x19df8c=_0x46c107(0xcbe);break;case _0x46c107(0x1107):_0x19df8c=_0x46c107(0xb35)+_0x418277[_0x46c107(0x1023)]+_0x46c107(0x1373)+_0x418277[_0x46c107(0x1171)][_0x46c107(0x1163)]+_0x46c107(0xa1e);break;case _0x46c107(0xa2d):_0x19df8c=_0x46c107(0x8c4);break;}_0x39259a['innerHTML']=_0x19df8c;}else _0x48c3ae['style'][_0x46c107(0x1248)]=_0x46c107(0x11b5),_0x45aa86['style'][_0x46c107(0xc40)]=_0x46c107(0xdcc);}_0x5f4e1a[_0x46c107(0x1331)]='';const _0x29cc37=_0x418277[_0x46c107(0xc88)];_0x3d7932=0x0;const _0x277483=_0x8f0871['globalSettings'][_0x46c107(0xf01)]||0x32,_0x55ba25=_0x29cc37[_0x46c107(0x59f)](-_0x277483),_0x14eb23=[];let _0x395c3e=0x0;for(const _0x517a39 of _0x55ba25){_0x395c3e>0x0&&_0x517a39[_0x46c107(0xe55)]-_0x395c3e>0x927c0&&_0x14eb23['push'](Promise[_0x46c107(0xc6c)](_0x3041c1(_0x517a39[_0x46c107(0xe55)]))),_0x14eb23[_0x46c107(0x481)](_0x20ac60(_0x517a39,_0x418277,!![])),_0x395c3e=_0x517a39['timestamp'];}const _0x12e410=await Promise[_0x46c107(0x8ab)](_0x14eb23),_0x4fed7e=document[_0x46c107(0x491)]();_0x12e410['filter'](Boolean)['forEach'](_0x365121=>_0x4fed7e[_0x46c107(0x1155)](_0x365121)),_0x5f4e1a['appendChild'](_0x4fed7e),_0x3d7932=_0x55ba25[_0x46c107(0xac0)];const _0x5e8b37=document[_0x46c107(0xb4e)]('div');_0x5e8b37['id']='typing-indicator',_0x5e8b37[_0x46c107(0x63b)][_0x46c107(0x1248)]=_0x46c107(0x11b5),_0x5e8b37[_0x46c107(0xc62)]=_0x46c107(0x1191),_0x5f4e1a['appendChild'](_0x5e8b37),setTimeout(()=>_0x5f4e1a[_0x46c107(0x54d)]=_0x5f4e1a[_0x46c107(0x11b8)],0x0);}async function _0x50fac8(){const _0x5a20e6=_0x7c5117;if(_0x50a527)return;_0x50a527=!![];const _0x30e61e=document[_0x5a20e6(0xfa0)](_0x5a20e6(0x142d)),_0x5bc774=_0x8f0871[_0x5a20e6(0x1260)][_0x8f0871[_0x5a20e6(0xac8)]];if(!_0x5bc774){_0x50a527=![];return;}_0x4da623(_0x30e61e,_0x5a20e6(0x8ce));const _0x1d4f92=_0x30e61e[_0x5a20e6(0x11b8)];await new Promise(_0x374791=>setTimeout(_0x374791,0x1f4));const _0x5e4adf=_0x5bc774[_0x5a20e6(0xc88)][_0x5a20e6(0xac0)],_0x45aeac=_0x8f0871['globalSettings'][_0x5a20e6(0xf01)]||0x32,_0x289ac3=_0x5e4adf-_0x3d7932-_0x45aeac,_0xccbd5d=_0x5e4adf-_0x3d7932,_0x1126aa=_0x5bc774[_0x5a20e6(0xc88)][_0x5a20e6(0x59f)](Math['max'](0x0,_0x289ac3),_0xccbd5d),_0x1f9bd6=_0x30e61e['querySelector'](_0x5a20e6(0xb96));let _0x28fb7f=_0x1f9bd6?parseInt(_0x1f9bd6[_0x5a20e6(0x8df)][_0x5a20e6(0xe55)]):0x0;for(const _0x54d441 of _0x1126aa[_0x5a20e6(0xaf5)]()){if(_0x28fb7f>0x0&&_0x28fb7f-_0x54d441['timestamp']>0x927c0){const _0x2f8db7=_0x3041c1(_0x28fb7f);_0x30e61e[_0x5a20e6(0x9f3)](_0x2f8db7);}await _0x43e494(_0x54d441,_0x5bc774),_0x28fb7f=_0x54d441['timestamp'];}_0x3d7932+=_0x1126aa[_0x5a20e6(0xac0)];const _0x458afa=_0x30e61e['scrollHeight'];_0x30e61e[_0x5a20e6(0x54d)]=_0x458afa-_0x1d4f92,_0x10441d(_0x30e61e),_0x50a527=![];}function _0x147987(){const _0x350ec8=_0x7c5117;_0x38c9ab(),_0x25f15a();const _0x1066ae=document[_0x350ec8(0xfa0)]('wallpaper-preview'),_0x36d4d8=_0x8f0871[_0x350ec8(0x7b0)]['wallpaper'];_0x36d4d8?(_0x1066ae[_0x350ec8(0x63b)][_0x350ec8(0xc93)]=_0x350ec8(0xfbd)+_0x36d4d8+')',_0x1066ae[_0x350ec8(0xc62)]=''):(_0x1066ae['style'][_0x350ec8(0xc93)]=_0x350ec8(0x585),_0x1066ae[_0x350ec8(0xc62)]=_0x350ec8(0x81b));const _0x1364d8=document[_0x350ec8(0xfa0)](_0x350ec8(0x14a3)),_0x19e66e=_0x8f0871[_0x350ec8(0x7b0)]['cphoneWallpaper'];_0x19e66e?(_0x1364d8[_0x350ec8(0x63b)][_0x350ec8(0xc93)]=_0x350ec8(0xfbd)+_0x19e66e+')',_0x1364d8[_0x350ec8(0xc62)]=''):(_0x1364d8['style'][_0x350ec8(0xc93)]='linear-gradient(135deg,\x20#f6d365,\x20#fda085)',_0x1364d8[_0x350ec8(0xc62)]=_0x350ec8(0x81b));const _0x198c48=document[_0x350ec8(0xfa0)]('global-bg-preview'),_0x5b4ef5=_0x8f0871['globalSettings'][_0x350ec8(0xf8b)];_0x5b4ef5?(_0x198c48['style'][_0x350ec8(0xc93)]='url('+_0x5b4ef5+')',_0x198c48[_0x350ec8(0xc62)]='',document[_0x350ec8(0xfa0)]('remove-global-bg-btn')[_0x350ec8(0x63b)]['display']=_0x350ec8(0x1145)):(_0x198c48['style']['backgroundImage']='none',_0x198c48[_0x350ec8(0xc62)]='点击下方上传',document[_0x350ec8(0xfa0)]('remove-global-bg-btn')[_0x350ec8(0x63b)][_0x350ec8(0x1248)]=_0x350ec8(0x11b5)),_0x3af53f(),_0x238bf4(),document[_0x350ec8(0xfa0)](_0x350ec8(0x10a8))[_0x350ec8(0x4f6)]=_0x8f0871[_0x350ec8(0x7b0)]['globalCss']||'',document['getElementById']('notification-sound-url-input')['value']=_0x8f0871[_0x350ec8(0x7b0)]['notificationSoundUrl']||'',document[_0x350ec8(0xfa0)](_0x350ec8(0x4a7))['checked']=_0x8f0871[_0x350ec8(0x7b0)][_0x350ec8(0x7f3)]||![],_0xce2e25(),_0x5eb344();}window[_0x7c5117(0xd47)]=_0x147987;function _0x22b1db(){const _0x32918c=_0x7c5117,_0x1d3e64=document['getElementById']('home-screen'),_0x527b81=_0x8f0871['globalSettings'][_0x32918c(0xf61)];_0x527b81?_0x1d3e64[_0x32918c(0x63b)][_0x32918c(0xc93)]=_0x32918c(0xfbd)+_0x527b81+')':_0x1d3e64[_0x32918c(0x63b)][_0x32918c(0xc93)]=_0x32918c(0x585);}function _0x6cd1f1(_0xd15ad7){const _0x4628a9=_0x7c5117;document[_0x4628a9(0x2a1)](_0x4628a9(0x704))['forEach'](_0x2b59f8=>{const _0x504bc9=_0x4628a9;_0x2b59f8['classList'][_0x504bc9(0xb80)](_0x504bc9(0xa37),_0x2b59f8[_0x504bc9(0x8df)][_0x504bc9(0x6b2)]===_0xd15ad7);}),document['querySelectorAll']('.world-book-category-pane')[_0x4628a9(0x458)](_0x351f9=>{const _0x3e5f5d=_0x4628a9;_0x351f9['classList'][_0x3e5f5d(0xb80)](_0x3e5f5d(0xa37),_0x351f9['dataset'][_0x3e5f5d(0x6b2)]===_0xd15ad7);});}async function _0xc4183b(){const _0x5c9bac=_0x7c5117,_0x8c1ac7=document[_0x5c9bac(0xfa0)](_0x5c9bac(0x72b)),_0x310f97=document[_0x5c9bac(0xfa0)]('world-book-content-container');_0x8c1ac7['innerHTML']='',_0x310f97['innerHTML']='';const [_0x1f5c72,_0x1bf154]=await Promise[_0x5c9bac(0x8ab)]([_0x372b85[_0x5c9bac(0x739)][_0x5c9bac(0x3bc)](),_0x372b85['worldBookCategories'][_0x5c9bac(0x1554)](_0x5c9bac(0x1023))[_0x5c9bac(0x3bc)]()]);_0x8f0871['worldBooks']=_0x1f5c72;if(_0x1f5c72[_0x5c9bac(0xac0)]===0x0){_0x310f97[_0x5c9bac(0x1331)]=_0x5c9bac(0x131b);return;}const _0x1fd942=document[_0x5c9bac(0xb4e)](_0x5c9bac(0x1029));_0x1fd942['className']=_0x5c9bac(0xff0),_0x1fd942[_0x5c9bac(0xc62)]='全部',_0x1fd942[_0x5c9bac(0x8df)][_0x5c9bac(0x6b2)]=_0x5c9bac(0x8ab),_0x8c1ac7['appendChild'](_0x1fd942);const _0xe5df57=document[_0x5c9bac(0xb4e)](_0x5c9bac(0xd53));_0xe5df57['className']=_0x5c9bac(0x1132),_0xe5df57[_0x5c9bac(0x8df)][_0x5c9bac(0x6b2)]=_0x5c9bac(0x8ab),_0x310f97[_0x5c9bac(0x1155)](_0xe5df57),_0x1bf154[_0x5c9bac(0x458)](_0x36cfc6=>{const _0x44a212=_0x5c9bac,_0x21f843=document[_0x44a212(0xb4e)](_0x44a212(0x1029));_0x21f843[_0x44a212(0x1287)]=_0x44a212(0x223),_0x21f843[_0x44a212(0xc62)]=_0x36cfc6[_0x44a212(0x1023)],_0x21f843[_0x44a212(0x8df)][_0x44a212(0x6b2)]=String(_0x36cfc6['id']),_0x8c1ac7[_0x44a212(0x1155)](_0x21f843);const _0x13f261=document['createElement'](_0x44a212(0xd53));_0x13f261[_0x44a212(0x1287)]=_0x44a212(0x1524),_0x13f261['dataset'][_0x44a212(0x6b2)]=String(_0x36cfc6['id']),_0x310f97['appendChild'](_0x13f261);});const _0x30ef29=_0x1f5c72['some'](_0x437960=>!_0x437960[_0x5c9bac(0x6b2)]);if(_0x30ef29){const _0x5e0c5f=document[_0x5c9bac(0xb4e)](_0x5c9bac(0x1029));_0x5e0c5f[_0x5c9bac(0x1287)]='world-book-tab',_0x5e0c5f[_0x5c9bac(0xc62)]=_0x5c9bac(0x129e),_0x5e0c5f[_0x5c9bac(0x8df)][_0x5c9bac(0x6b2)]=_0x5c9bac(0x398),_0x8c1ac7[_0x5c9bac(0x1155)](_0x5e0c5f);const _0x5aff8a=document['createElement'](_0x5c9bac(0xd53));_0x5aff8a[_0x5c9bac(0x1287)]=_0x5c9bac(0x1524),_0x5aff8a['dataset'][_0x5c9bac(0x6b2)]=_0x5c9bac(0x398),_0x310f97['appendChild'](_0x5aff8a);}_0x1f5c72[_0x5c9bac(0x458)](_0x45b21d=>{const _0x5dec34=_0x5c9bac;let _0x260c53='暂无内容...';if(Array[_0x5dec34(0x345)](_0x45b21d[_0x5dec34(0x1469)])&&_0x45b21d[_0x5dec34(0x1469)][_0x5dec34(0xac0)]>0x0){const _0x18886b=_0x45b21d[_0x5dec34(0x1469)][0x0];_0x260c53=_0x18886b[_0x5dec34(0x7ab)]||_0x18886b['content']||'';}else typeof _0x45b21d[_0x5dec34(0x1469)]===_0x5dec34(0x857)&&_0x45b21d[_0x5dec34(0x1469)][_0x5dec34(0xa06)]()!==''&&(_0x260c53=_0x45b21d[_0x5dec34(0x1469)]);const _0xf0f2b8=document[_0x5dec34(0xb4e)](_0x5dec34(0xd53));_0xf0f2b8[_0x5dec34(0x1287)]='world-book-card',_0xf0f2b8[_0x5dec34(0x1331)]=_0x5dec34(0x522)+_0x45b21d[_0x5dec34(0x1023)]+_0x5dec34(0x8c0)+_0x260c53+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const _0x343261=()=>_0x320030(_0x45b21d['id']),_0x1f83fd=async()=>{const _0x3fd886=_0x5dec34,_0x299a2a=await _0x3f65ed(_0x3fd886(0xbd3),_0x3fd886(0x1144)+_0x45b21d[_0x3fd886(0x1023)]+_0x3fd886(0x53d),{'confirmButtonClass':_0x3fd886(0x611)});_0x299a2a&&(await _0x372b85[_0x3fd886(0x739)][_0x3fd886(0xf10)](_0x45b21d['id']),_0x8f0871[_0x3fd886(0x739)]=_0x8f0871['worldBooks'][_0x3fd886(0xde7)](_0x1c892a=>_0x1c892a['id']!==_0x45b21d['id']),_0xc4183b());};_0xf0f2b8['addEventListener']('click',_0x343261),_0x53cdde(_0xf0f2b8,_0x1f83fd);const _0x47af35=_0xf0f2b8[_0x5dec34(0xb5c)](!![]);_0x47af35['addEventListener'](_0x5dec34(0xb4a),_0x343261),_0x53cdde(_0x47af35,_0x1f83fd),_0xe5df57[_0x5dec34(0x1155)](_0x47af35);const _0x5ea027=_0x45b21d[_0x5dec34(0x6b2)]?String(_0x45b21d[_0x5dec34(0x6b2)]):_0x5dec34(0x398),_0x247ac7=_0x310f97['querySelector'](_0x5dec34(0x8e1)+_0x5ea027+'\x22]');_0x247ac7&&_0x247ac7['appendChild'](_0xf0f2b8);}),document[_0x5c9bac(0x2a1)]('.world-book-tab')[_0x5c9bac(0x458)](_0x6d7581=>{const _0x4b960f=_0x5c9bac;_0x6d7581[_0x4b960f(0x7b8)](_0x4b960f(0xb4a),()=>_0x6cd1f1(_0x6d7581['dataset']['categoryId']));});}function _0x39389d(_0x16a6bc,_0x22af9a){const _0x25434e=_0x7c5117,_0x2e7b9e=document[_0x25434e(0xb4e)](_0x25434e(0xd53));_0x2e7b9e[_0x25434e(0x1287)]=_0x25434e(0xd29),_0x2e7b9e['innerHTML']=_0x25434e(0x6e4)+_0x16a6bc+_0x25434e(0xba3);const _0x4b2676=_0x2e7b9e['querySelector']('.world-book-group-content');return _0x22af9a[_0x25434e(0x1376)]((_0xe829ed,_0x4b089c)=>_0xe829ed[_0x25434e(0x1023)][_0x25434e(0x124c)](_0x4b089c[_0x25434e(0x1023)],_0x25434e(0xb43))),_0x22af9a[_0x25434e(0x458)](_0x5e6a97=>{const _0x4ce062=_0x25434e;let _0x314794=_0x4ce062(0x899);if(Array[_0x4ce062(0x345)](_0x5e6a97['content'])&&_0x5e6a97[_0x4ce062(0x1469)][_0x4ce062(0xac0)]>0x0){const _0x4f8fd3=_0x5e6a97[_0x4ce062(0x1469)][0x0];_0x314794=_0x4f8fd3['comment']||_0x4f8fd3['content']||'';}else typeof _0x5e6a97['content']===_0x4ce062(0x857)&&_0x5e6a97['content'][_0x4ce062(0xa06)]()!==''&&(_0x314794=_0x5e6a97[_0x4ce062(0x1469)]);const _0x615735=document[_0x4ce062(0xb4e)]('div');_0x615735[_0x4ce062(0x1287)]=_0x4ce062(0x586),_0x615735[_0x4ce062(0x8df)][_0x4ce062(0xb03)]=_0x5e6a97['id'],_0x615735[_0x4ce062(0x1331)]=_0x4ce062(0x12cb)+_0x5e6a97[_0x4ce062(0x1023)]+_0x4ce062(0x917)+String(_0x314794)[_0x4ce062(0x9fe)](0x0,0x32)+_0x4ce062(0x144a),_0x615735[_0x4ce062(0x7b8)]('click',()=>_0x320030(_0x5e6a97['id'])),_0x53cdde(_0x615735,async()=>{const _0x5038c3=_0x4ce062,_0x577de0=await _0x3f65ed(_0x5038c3(0xbd3),_0x5038c3(0x1144)+_0x5e6a97['name']+_0x5038c3(0x42e),{'confirmButtonClass':'btn-danger'});_0x577de0&&(await _0x372b85[_0x5038c3(0x739)][_0x5038c3(0xf10)](_0x5e6a97['id']),_0x8f0871[_0x5038c3(0x739)]=_0x8f0871[_0x5038c3(0x739)][_0x5038c3(0xde7)](_0x3c6709=>_0x3c6709['id']!==_0x5e6a97['id']),_0xc4183b());}),_0x4b2676[_0x4ce062(0x1155)](_0x615735);}),_0x2e7b9e;}window[_0x7c5117(0x904)]=_0xc4183b;async function _0x320030(_0x11fd88){const _0x1d9048=_0x7c5117;_0x2d25e5(_0x1d9048(0x14c1)),_0x4fd9a7=_0x11fd88;const [_0x38001c,_0x36893a]=await Promise[_0x1d9048(0x8ab)]([_0x372b85[_0x1d9048(0x739)][_0x1d9048(0x70d)](_0x11fd88),_0x372b85[_0x1d9048(0xa7a)][_0x1d9048(0x3bc)]()]);if(!_0x38001c){console[_0x1d9048(0x52b)](_0x1d9048(0xec0),_0x11fd88),_0x2d25e5(_0x1d9048(0x25f));return;}document[_0x1d9048(0xfa0)](_0x1d9048(0x8c9))[_0x1d9048(0xc62)]=_0x38001c[_0x1d9048(0x1023)],document[_0x1d9048(0xfa0)]('world-book-name-input')[_0x1d9048(0x4f6)]=_0x38001c[_0x1d9048(0x1023)];const _0x1de8eb=document[_0x1d9048(0xfa0)](_0x1d9048(0x11f1));_0x1de8eb[_0x1d9048(0x1331)]=_0x1d9048(0x117d),_0x36893a[_0x1d9048(0x458)](_0x3c75b9=>{const _0x36f782=_0x1d9048,_0x5cc62e=document[_0x36f782(0xb4e)](_0x36f782(0x327));_0x5cc62e[_0x36f782(0x4f6)]=_0x3c75b9['id'],_0x5cc62e['textContent']=_0x3c75b9[_0x36f782(0x1023)];if(_0x38001c['categoryId']===_0x3c75b9['id'])_0x5cc62e[_0x36f782(0xaa0)]=!![];_0x1de8eb[_0x36f782(0x1155)](_0x5cc62e);});const _0x53bc9b=document[_0x1d9048(0xfa0)](_0x1d9048(0xa1a));_0x53bc9b[_0x1d9048(0x1331)]='',Array[_0x1d9048(0x345)](_0x38001c[_0x1d9048(0x1469)])&&_0x38001c[_0x1d9048(0x1469)][_0x1d9048(0xac0)]>0x0?_0x38001c['content']['forEach'](_0xee4c84=>{const _0x529bc8=_0x1d9048,_0x4527e5=_0x5bafca(_0xee4c84);_0x53bc9b[_0x529bc8(0x1155)](_0x4527e5);}):_0x53bc9b[_0x1d9048(0x1331)]='<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20margin-top:\x2020px;\x22>还没有内容，点击下方按钮添加第一条吧！</p>';}async function _0x431c0b(_0x2a3b0f=!![]){const _0x2fb0e7=_0x7c5117,_0x45da9b=document[_0x2fb0e7(0xfa0)](_0x2fb0e7(0x3e4)),_0x590990=document[_0x2fb0e7(0xfa0)](_0x2fb0e7(0x86d)),_0x8ed9dc=document[_0x2fb0e7(0xfa0)]('sticker-search-input'),_0x2b7eb7=_0x8ed9dc[_0x2fb0e7(0x4f6)][_0x2fb0e7(0xa06)]()[_0x2fb0e7(0x1f3)]();if(_0x2a3b0f){_0x590990[_0x2fb0e7(0x1331)]='';const _0x3da298=await _0x372b85[_0x2fb0e7(0xdec)][_0x2fb0e7(0x3bc)]();_0x590990[_0x2fb0e7(0x1331)]+=_0x2fb0e7(0xc48)+(_0x41ab64==='all'?_0x2fb0e7(0xa37):'')+_0x2fb0e7(0x10c1),_0x3da298[_0x2fb0e7(0x458)](_0x5dfa00=>{const _0x3acf5c=_0x2fb0e7;_0x590990[_0x3acf5c(0x1331)]+=_0x3acf5c(0xc48)+(_0x41ab64===_0x5dfa00['id']?_0x3acf5c(0xa37):'')+_0x3acf5c(0x205)+_0x5dfa00['id']+'\x22>'+_0x5dfa00[_0x3acf5c(0x1023)]+_0x3acf5c(0x9b1);}),_0x590990['innerHTML']+='<button\x20class=\x22sticker-category-tab\x20'+(_0x41ab64===_0x2fb0e7(0x398)?_0x2fb0e7(0xa37):'')+'\x22\x20data-category-id=\x22uncategorized\x22>未分类</button>';}_0x45da9b[_0x2fb0e7(0x1331)]='';let _0x5649b4;if(_0x41ab64===_0x2fb0e7(0x8ab))_0x5649b4=_0x8f0871[_0x2fb0e7(0x413)];else _0x41ab64===_0x2fb0e7(0x398)?_0x5649b4=_0x8f0871['userStickers'][_0x2fb0e7(0xde7)](_0x5ab201=>!_0x5ab201[_0x2fb0e7(0x6b2)]):_0x5649b4=_0x8f0871[_0x2fb0e7(0x413)][_0x2fb0e7(0xde7)](_0x19d564=>_0x19d564[_0x2fb0e7(0x6b2)]===_0x41ab64);const _0x52f9c5=_0x2b7eb7?_0x5649b4[_0x2fb0e7(0xde7)](_0x4aa2df=>_0x4aa2df[_0x2fb0e7(0x1023)][_0x2fb0e7(0x1f3)]()[_0x2fb0e7(0xf95)](_0x2b7eb7)):_0x5649b4;if(_0x52f9c5[_0x2fb0e7(0xac0)]===0x0){const _0x2cb70e=_0x2b7eb7?'找不到匹配的表情':_0x2fb0e7(0x12a4);_0x45da9b['innerHTML']=_0x2fb0e7(0x79f)+_0x2cb70e+_0x2fb0e7(0x129d);return;}_0x52f9c5['forEach'](_0x1daaca=>{const _0x2dda44=_0x2fb0e7,_0xa0827=document[_0x2dda44(0xb4e)](_0x2dda44(0xd53));_0xa0827['className']=_0x2dda44(0x71b),_0xa0827['title']=_0x1daaca[_0x2dda44(0x1023)],_0xa0827['dataset'][_0x2dda44(0x11de)]=_0x1daaca['id'],_0xa0827[_0x2dda44(0x1331)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22sticker-image-container\x22\x20style=\x22background-image:\x20url('+_0x1daaca[_0x2dda44(0x3f5)]+')\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22sticker-name\x22>'+_0x1daaca[_0x2dda44(0x1023)]+_0x2dda44(0x616),_0xa0827[_0x2dda44(0x7b8)](_0x2dda44(0xb4a),()=>{_0x282a8c?_0x2787e2(_0xa0827):_0x483ecb(_0x1daaca);});const _0x407ece=document[_0x2dda44(0xb4e)]('div');_0x407ece[_0x2dda44(0x1287)]='delete-btn',_0x407ece['innerHTML']=_0x2dda44(0x1eb),_0x407ece[_0x2dda44(0x9f0)]=async _0x3317e7=>{const _0x274d1b=_0x2dda44;_0x3317e7[_0x274d1b(0x21b)]();const _0xc9fbd6=await _0x3f65ed(_0x274d1b(0x685),_0x274d1b(0x5a8)+_0x1daaca[_0x274d1b(0x1023)]+_0x274d1b(0x57a),{'confirmButtonClass':'btn-danger'});_0xc9fbd6&&(await _0x372b85[_0x274d1b(0x413)][_0x274d1b(0xf10)](_0x1daaca['id']),_0x8f0871[_0x274d1b(0x413)]=_0x8f0871[_0x274d1b(0x413)]['filter'](_0x1ef1fc=>_0x1ef1fc['id']!==_0x1daaca['id']),_0x431c0b());},_0xa0827[_0x2dda44(0x1155)](_0x407ece),_0x45da9b[_0x2dda44(0x1155)](_0xa0827);});}let _0x282a8c=![],_0x47dada=new Set(),_0x2bc57d=![],_0x290316=new Set(),_0x5eff38=[],_0x380514=0x0;const _0x4f8068=0x2d;let _0xc45f2a=![];function _0x5295a1(){const _0x3d99f0=_0x7c5117;_0x282a8c=!_0x282a8c;const _0x16bceb=document[_0x3d99f0(0xfa0)](_0x3d99f0(0x3e4)),_0x4c61f2=document[_0x3d99f0(0xfa0)](_0x3d99f0(0x1026)),_0x3206fe=document[_0x3d99f0(0xfa0)]('sticker-action-bar'),_0x371e09=document['getElementById'](_0x3d99f0(0xcf8));_0x16bceb['classList'][_0x3d99f0(0xb80)]('management-mode',_0x282a8c),_0x282a8c?(_0x4c61f2[_0x3d99f0(0xc62)]='完成',_0x3206fe[_0x3d99f0(0x63b)]['display']='flex',_0x47dada[_0x3d99f0(0xf7d)](),_0x371e09['checked']=![],_0x313bfc()):(_0x4c61f2['textContent']='管理',_0x3206fe[_0x3d99f0(0x63b)][_0x3d99f0(0x1248)]=_0x3d99f0(0x11b5),_0x16bceb[_0x3d99f0(0x2a1)](_0x3d99f0(0xa33))['forEach'](_0xa45a2=>_0xa45a2[_0x3d99f0(0x128f)]['remove'](_0x3d99f0(0xaa0))));}function _0x2e816c(){const _0x121bcd=_0x7c5117,_0x486a60=document[_0x121bcd(0xfa0)]('select-all-stickers-checkbox'),_0x5bee99=_0x486a60[_0x121bcd(0xb34)];let _0x164481;if(_0x41ab64==='all')_0x164481=_0x8f0871[_0x121bcd(0x413)];else _0x41ab64===_0x121bcd(0x398)?_0x164481=_0x8f0871[_0x121bcd(0x413)]['filter'](_0x2c940d=>!_0x2c940d[_0x121bcd(0x6b2)]):_0x164481=_0x8f0871[_0x121bcd(0x413)]['filter'](_0x41a9e5=>_0x41a9e5['categoryId']===_0x41ab64);_0x164481[_0x121bcd(0x458)](_0x42a80e=>{const _0x4eafef=_0x121bcd,_0x5c7267=_0x42a80e['id'],_0x1ee312=document['querySelector'](_0x4eafef(0x716)+_0x5c7267+'\x22]');if(_0x5bee99){_0x47dada[_0x4eafef(0x1327)](_0x5c7267);if(_0x1ee312)_0x1ee312[_0x4eafef(0x128f)]['add'](_0x4eafef(0xaa0));}else{_0x47dada[_0x4eafef(0xf10)](_0x5c7267);if(_0x1ee312)_0x1ee312['classList'][_0x4eafef(0x443)]('selected');}}),_0x313bfc();}function _0x313bfc(){const _0x4c4a1d=_0x7c5117,_0x393e89=document[_0x4c4a1d(0xfa0)]('delete-selected-stickers-btn');_0x393e89[_0x4c4a1d(0xc62)]=_0x4c4a1d(0x668)+_0x47dada[_0x4c4a1d(0xbc3)]+')';}function _0x2787e2(_0xe8edaa){const _0x44caa3=_0x7c5117;if(!_0x282a8c)return;const _0x390891=_0xe8edaa[_0x44caa3(0x8df)]['stickerId'];if(!_0x390891)return;_0xe8edaa[_0x44caa3(0x128f)]['toggle'](_0x44caa3(0xaa0)),_0x47dada[_0x44caa3(0xd58)](_0x390891)?_0x47dada[_0x44caa3(0xf10)](_0x390891):_0x47dada[_0x44caa3(0x1327)](_0x390891),_0x313bfc();}async function _0x79fae8(){const _0x164a82=_0x7c5117;if(_0x47dada['size']===0x0)return;const _0x43e622=await _0x3f65ed(_0x164a82(0x1464),_0x164a82(0x535)+_0x47dada['size']+'\x20个表情吗？此操作不可恢复。',{'confirmButtonClass':_0x164a82(0x611)});if(_0x43e622){const _0x1ae41c=[..._0x47dada];await _0x372b85[_0x164a82(0x413)]['bulkDelete'](_0x1ae41c),_0x8f0871[_0x164a82(0x413)]=_0x8f0871[_0x164a82(0x413)][_0x164a82(0xde7)](_0x5c3468=>!_0x1ae41c[_0x164a82(0xf95)](_0x5c3468['id'])),_0x5295a1(),_0x431c0b(),await _0x4abd86(_0x164a82(0xdd4),_0x164a82(0x1081));}}async function _0x52deea(){const _0x17e39b=_0x7c5117,_0x1bc26f='请按照以下通用格式粘贴，一行一个：\x0a\x0a开心:\x20https://.../happy.gif\x0a哭泣:\x20https://.../cry.png\x0a\x0a',_0x2bb356=await _0x131a69(_0x17e39b(0x26b),_0x1bc26f,'',_0x17e39b(0x338));_0x2bb356&&_0x2bb356[_0x17e39b(0xa06)]()&&await _0x2c68dc(_0x2bb356);}async function _0x2c68dc(_0xb14783){const _0x2ea361=_0x7c5117,_0x5d89de=_0xb14783[_0x2ea361(0xa06)]()[_0x2ea361(0x505)]('\x0a'),_0x46c7d1=[],_0x183121=_0x2ea361(0xed4);let _0x2e8fd2=0x0;const _0x29b44f=_0x41ab64!==_0x2ea361(0x8ab)&&_0x41ab64!==_0x2ea361(0x398)?_0x41ab64:null;for(const _0x14f3a1 of _0x5d89de){const _0x1bd7bf=_0x14f3a1[_0x2ea361(0xa06)]();if(!_0x1bd7bf||_0x1bd7bf[_0x2ea361(0xf95)]('填入'))continue;const _0x2250ed=_0x1bd7bf[_0x2ea361(0x1232)](/^(.+?)[:：]\s*(https?:\/\/.+)$/);if(_0x2250ed){const _0x23e9e1=_0x2250ed[0x1][_0x2ea361(0xa06)](),_0x149488=_0x2250ed[0x2][_0x2ea361(0xa06)]();_0x46c7d1[_0x2ea361(0x481)]({'id':_0x2ea361(0x5dd)+Date['now']()+Math['random'](),'name':_0x23e9e1,'url':_0x149488,'categoryId':_0x29b44f});continue;}let _0xcfb24c=null,_0x20a443=null;const _0x2dee49=_0x1bd7bf[_0x2ea361(0x1232)](/^([\u4e00-\u9fa5]+)([a-zA-Z0-9]+\..+)$/);if(_0x2dee49)_0xcfb24c=_0x2dee49[0x1],_0x20a443=_0x2dee49[0x2];else{const _0x1e56e3=_0x1bd7bf[_0x2ea361(0x505)](/\s+/);_0x1e56e3[_0x2ea361(0xac0)]>=0x2&&(_0x20a443=_0x1e56e3[_0x2ea361(0x217)](),_0xcfb24c=_0x1e56e3['join']('\x20'));}_0xcfb24c&&_0x20a443&&_0x20a443[_0x2ea361(0xf95)]('.')?_0x46c7d1['push']({'id':_0x2ea361(0x5dd)+Date[_0x2ea361(0xc22)]()+Math[_0x2ea361(0x148a)](),'name':_0xcfb24c,'url':_0x183121+_0x20a443,'categoryId':_0x29b44f}):(_0x2e8fd2++,console[_0x2ea361(0x7fa)](_0x2ea361(0x11bf),_0x1bd7bf));}_0x2e8fd2>0x0&&await _0x4abd86(_0x2ea361(0x3fe),'有\x20'+_0x2e8fd2+_0x2ea361(0xfa9));if(_0x46c7d1[_0x2ea361(0xac0)]>0x0)await _0x372b85[_0x2ea361(0x413)][_0x2ea361(0x9b9)](_0x46c7d1),_0x8f0871[_0x2ea361(0x413)][_0x2ea361(0x481)](..._0x46c7d1),_0x431c0b(),await _0x4abd86(_0x2ea361(0x1471),'已成功批量导入\x20'+_0x46c7d1['length']+_0x2ea361(0x1086));else _0x2e8fd2===0x0&&alert(_0x2ea361(0x1190));}function _0x425456(_0x3153){const _0x3e368b=_0x7c5117,_0x4bbcea='.message-bubble[data-timestamp=\x22'+_0x3153+'\x22]',_0x5e77fd=document['querySelector'](_0x4bbcea);_0x5e77fd?(_0x5e77fd[_0x3e368b(0x47a)]({'behavior':_0x3e368b(0x805),'block':'center'}),_0x5e77fd[_0x3e368b(0x128f)]['add'](_0x3e368b(0x14b4)),setTimeout(()=>{const _0x3c8203=_0x3e368b;document[_0x3c8203(0x1122)]['contains'](_0x5e77fd)&&_0x5e77fd[_0x3c8203(0x128f)][_0x3c8203(0x443)](_0x3c8203(0x14b4));},0x5dc)):alert(_0x3e368b(0xf60));}async function _0x20ac60(_0xb3c8f8,_0x435390){const _0x356896=_0x7c5117;if(_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x123a)){const _0x1bb05f=document[_0x356896(0xb4e)](_0x356896(0xd53));_0x1bb05f[_0x356896(0x1287)]='message-wrapper\x20system-pat',_0x1bb05f[_0x356896(0x8df)][_0x356896(0xe55)]=_0xb3c8f8[_0x356896(0xe55)];const _0x2de5b1=document[_0x356896(0xb4e)](_0x356896(0xd53));return _0x2de5b1[_0x356896(0x1287)]=_0x356896(0x13e7),_0x2de5b1[_0x356896(0x8df)][_0x356896(0xe55)]=_0xb3c8f8[_0x356896(0xe55)],_0x2de5b1['textContent']=_0xb3c8f8[_0x356896(0x1469)],_0x1bb05f[_0x356896(0x1155)](_0x2de5b1),_0x53cdde(_0x1bb05f,()=>_0x491764(_0xb3c8f8['timestamp'])),_0x1bb05f[_0x356896(0x7b8)]('click',()=>{const _0x59e79c=_0x356896;_0x2903d2&&_0x4969c1(_0xb3c8f8[_0x59e79c(0xe55)]);}),_0x1bb05f;}else{if(_0xb3c8f8[_0x356896(0x682)]===_0x356896(0xc79)){const _0x408af8=document[_0x356896(0xb4e)](_0x356896(0xd53));_0x408af8[_0x356896(0x1287)]=_0x356896(0x9c9),_0x408af8[_0x356896(0x8df)][_0x356896(0xe55)]=_0xb3c8f8['timestamp'];const _0x237616=document[_0x356896(0xb4e)](_0x356896(0xd53));return _0x237616[_0x356896(0x1287)]='message-bubble\x20post-deleted-placeholder',_0x237616[_0x356896(0x8df)][_0x356896(0x3eb)]=_0xb3c8f8['postId'],_0x237616[_0x356896(0xc62)]=_0xb3c8f8['content'],_0x408af8['appendChild'](_0x237616),_0x53cdde(_0x408af8,()=>_0x491764(_0xb3c8f8[_0x356896(0xe55)])),_0x408af8[_0x356896(0x7b8)]('click',()=>{const _0x515deb=_0x356896;_0x2903d2&&_0x4969c1(_0xb3c8f8[_0x515deb(0xe55)]);}),_0x408af8;}}if(_0xb3c8f8[_0x356896(0x1559)])return null;if(_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x260)){const _0x1766d2=document['createElement'](_0x356896(0xd53));_0x1766d2[_0x356896(0x1287)]=_0x356896(0x9c9);const _0x4305f3=document[_0x356896(0xb4e)](_0x356896(0xd53));return _0x4305f3[_0x356896(0x1287)]=_0x356896(0xb1a),_0x4305f3[_0x356896(0x8df)][_0x356896(0xe55)]=_0xb3c8f8[_0x356896(0xe55)],_0x4305f3['textContent']=_0xb3c8f8[_0x356896(0x1469)],_0x1766d2['appendChild'](_0x4305f3),_0x53cdde(_0x1766d2,()=>_0x491764(_0xb3c8f8[_0x356896(0xe55)])),_0x1766d2[_0x356896(0x7b8)]('click',()=>{const _0x2e2872=_0x356896;if(_0x2903d2)_0x4969c1(_0xb3c8f8[_0x2e2872(0xe55)]);}),_0x1766d2;}const _0xc6dd94=_0xb3c8f8[_0x356896(0xc92)]===_0x356896(0xcb0),_0xadbded=_0x435390[_0x356896(0x12d7)][_0x356896(0xda5)]||'我',_0x4706f8=document[_0x356896(0xb4e)](_0x356896(0xd53));_0x4706f8[_0x356896(0x1287)]=_0x356896(0x7c2)+(_0xc6dd94?'user':'ai');if(_0x435390[_0x356896(0x1364)]&&!_0xc6dd94){const _0x4f9637=_0x435390[_0x356896(0x2cf)][_0x356896(0x7ed)](_0x53b8ad=>_0x53b8ad[_0x356896(0x93e)]===_0xb3c8f8[_0x356896(0x213)]),_0x59e0df=document['createElement'](_0x356896(0xd53));_0x59e0df[_0x356896(0x1287)]='sender-name',_0x59e0df[_0x356896(0xc62)]=_0x4f9637?_0x4f9637[_0x356896(0x5c9)]:_0xb3c8f8[_0x356896(0x213)]||_0x356896(0xc5f),_0x4706f8['appendChild'](_0x59e0df);}const _0x515df7=document[_0x356896(0xb4e)](_0x356896(0xd53));_0x515df7[_0x356896(0x1287)]=_0x356896(0x75c)+(_0xc6dd94?_0x356896(0xcb0):'ai'),_0x515df7[_0x356896(0x8df)][_0x356896(0xe55)]=_0xb3c8f8[_0x356896(0xe55)];const _0x2b3f5e=document[_0x356896(0xb4e)](_0x356896(0x388));_0x2b3f5e[_0x356896(0x1287)]=_0x356896(0xe55),_0x2b3f5e[_0x356896(0xc62)]=_0x2e2d25(_0xb3c8f8[_0x356896(0xe55)]);let _0x1478b6,_0x42cb21='';if(_0xc6dd94)_0x1478b6=_0x435390[_0x356896(0x12d7)][_0x356896(0x38a)]||(_0x435390['isGroup']?_0x2c882e:_0x1a2fc1),_0x42cb21=_0x435390[_0x356896(0x12d7)]['myAvatarFrame']||'';else{if(_0x435390[_0x356896(0x1364)]){const _0x34ebeb=_0x435390[_0x356896(0x2cf)]['find'](_0x1653b8=>_0x1653b8[_0x356896(0x93e)]===_0xb3c8f8[_0x356896(0x213)]);if(_0x34ebeb){const _0xaf2677=_0x8f0871[_0x356896(0x1260)][_0x34ebeb['id']];_0x1478b6=_0x34ebeb[_0x356896(0xc61)]||(_0xaf2677?_0xaf2677[_0x356896(0x12d7)][_0x356896(0xce8)]:_0x29d47b),_0x42cb21=_0x34ebeb[_0x356896(0x13e6)]||(_0xaf2677?_0xaf2677[_0x356896(0x12d7)][_0x356896(0x761)]:'');}else _0x1478b6=_0x29d47b,_0x42cb21='';}else _0x1478b6=_0x435390[_0x356896(0x12d7)][_0x356896(0xce8)]||_0x1a2fc1,_0x42cb21=_0x435390[_0x356896(0x12d7)][_0x356896(0x761)]||'';}let _0xcabe51;_0x42cb21?_0xcabe51=_0x356896(0x1bb)+_0x1478b6+'\x22\x20class=\x22avatar-img\x22><img\x20src=\x22'+_0x42cb21+_0x356896(0x116b):_0xcabe51=_0x356896(0x131f)+_0x1478b6+'\x22\x20class=\x22avatar\x22>';const _0x2157a5=_0x42cb21?'has-frame':'',_0x532a63=_0x356896(0x8d3)+_0x2157a5+'\x22>'+_0xcabe51+'</div>';let _0x5ec34e,_0x1fbbc3='';if(_0xb3c8f8[_0x356896(0x12da)]){const _0xfb0397=_0x185e1d(_0x435390,_0xb3c8f8[_0x356896(0x12da)][_0x356896(0x213)]),_0x2f6d8e=String(_0xb3c8f8[_0x356896(0x12da)][_0x356896(0x1469)]||'');_0x1fbbc3=_0x356896(0x1482)+_0xb3c8f8['quote']['timestamp']+_0x356896(0xf7c)+_0xfb0397+':</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22quoted-content\x22>'+_0x2f6d8e+_0x356896(0xd1c);}let _0x14253f=_0xb3c8f8[_0x356896(0x1469)];if(typeof _0x14253f===_0x356896(0x857)&&_0x14253f[_0x356896(0xa06)]()['startsWith']('<')&&_0x14253f[_0x356896(0xa06)]()[_0x356896(0x14fe)]('>'))_0x5ec34e=_0x14253f,_0x515df7[_0x356896(0x128f)]['add'](_0x356896(0xce0));else{if(_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x1492)||_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x8c1)||_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x5c7)||_0xb3c8f8[_0x356896(0x682)]===_0x356896(0xd93)||_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x8b0)||_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x838)||_0xb3c8f8['type']===_0x356896(0x412)||_0xb3c8f8['type']===_0x356896(0x35f)||_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x1332)||_0xb3c8f8[_0x356896(0x682)]==='waimai_order'||_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x148b)||_0xb3c8f8[_0x356896(0x682)]==='poll'||_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x1338)||_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x377)||_0xb3c8f8['type']===_0x356896(0x1a0)){if(_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x1492)){const _0x139a37=_0xb3c8f8[_0x356896(0x1469)]||((_0xb3c8f8[_0x356896(0x369)]||'')+'\x20'+(_0xb3c8f8['description']||''))[_0x356896(0xa06)](),_0x2bf060=/(「.*?」|“.*?”)/g,_0xc7e673=_0x139a37[_0x356896(0x505)](_0x2bf060)[_0x356896(0xde7)](_0x239b2d=>_0x239b2d);_0x5ec34e=_0xc7e673[_0x356896(0x556)](_0x1bc443=>{const _0x47d6ce=_0x356896;return _0x1bc443[_0x47d6ce(0x9b8)]('「')||_0x1bc443[_0x47d6ce(0x9b8)]('“')?_0x47d6ce(0x472)+_0x3de267(_0x1bc443)+'</span>':_0x47d6ce(0xebb)+_0x3de267(_0x1bc443[_0x47d6ce(0xa06)]())[_0x47d6ce(0x128a)](/\n/g,'<br>')+'</span>';})['join']('');}else{if(_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x8c1))_0x515df7[_0x356896(0x128f)][_0x356896(0x1327)]('is-link-share',_0x356896(0x75e)),_0x5ec34e=_0x356896(0xf3d)+_0xb3c8f8[_0x356896(0xe55)]+_0x356896(0x46e)+(_0xb3c8f8[_0x356896(0x1187)]||'无标题')+'</div><div\x20class=\x22description\x22>'+(_0xb3c8f8[_0x356896(0x211)]||_0x356896(0x393))+'</div><div\x20class=\x22footer\x22><svg\x20class=\x22footer-icon\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22></circle><line\x20x1=\x222\x22\x20y1=\x2212\x22\x20x2=\x2222\x22\x20y2=\x2212\x22></line><path\x20d=\x22M12\x202a15.3\x2015.3\x200\x200\x201\x204\x2010\x2015.3\x2015.3\x200\x200\x201-4\x2010\x2015.3\x2015.3\x200\x200\x201-4-10\x2015.3\x2015.3\x200\x200\x201\x204-10z\x22></path></svg><span>'+(_0xb3c8f8[_0x356896(0x316)]||_0x356896(0x248))+'</span></div></div>';else{if(_0xb3c8f8['type']===_0x356896(0x5c7))_0x515df7['classList'][_0x356896(0x1327)](_0x356896(0x6ba),_0x356896(0x75e)),_0x5ec34e=_0x356896(0xf32)+_0xb3c8f8[_0x356896(0xe55)]+_0x356896(0x46e)+_0xb3c8f8[_0x356896(0xd0d)]['title']+_0x356896(0x569)+_0xb3c8f8[_0x356896(0xd0d)][_0x356896(0xe36)][_0x356896(0xac0)]+_0x356896(0x372);else{if(_0xb3c8f8['type']===_0x356896(0xd93)){_0x515df7['classList']['add'](_0x356896(0x1a1),_0x356896(0x75e));let _0x8c15a2;if(_0xb3c8f8[_0x356896(0x127b)])_0x8c15a2=_0xb3c8f8[_0x356896(0x127b)];else _0x8f0871[_0x356896(0x7b0)][_0x356896(0x1418)]&&_0xb3c8f8[_0x356896(0xe0d)]?_0x8c15a2=_0x356896(0xe88)+encodeURIComponent(_0xb3c8f8[_0x356896(0xe0d)]):_0x8c15a2=_0x356896(0x2b1);const _0x4ed879='style=\x22background-image:\x20url(\x27'+_0x8c15a2+_0x356896(0x4e6);_0x5ec34e='<div\x20class=\x22location-share-card\x22><div\x20class=\x22card-text-area\x22><div\x20class=\x22card-text-primary\x22>'+_0xb3c8f8['content']+_0x356896(0x1324)+_0x4ed879+_0x356896(0x808);}else{if(_0xb3c8f8['type']===_0x356896(0x838)||_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x8b0)){_0x515df7[_0x356896(0x128f)][_0x356896(0x1327)]('is-ai-image',_0x356896(0x75e));const _0x51b511=_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x838)?_0x356896(0xc67):_0x356896(0x5a9),_0x1c9f18=_0x8f0871['globalSettings'][_0x356896(0x1418)]&&_0xb3c8f8[_0x356896(0xe0d)]?_0x356896(0xe88)+_0xb3c8f8[_0x356896(0xe0d)]:_0x356896(0x83f);_0x5ec34e=_0x356896(0x131f)+_0x1c9f18+_0x356896(0x11a3)+_0x51b511+_0x356896(0xa8e)+_0xb3c8f8[_0x356896(0x1469)]+'\x22>';}else{if(_0xb3c8f8['type']===_0x356896(0x1a0))_0x515df7[_0x356896(0x128f)][_0x356896(0x1327)](_0x356896(0x1c7),_0x356896(0x75e)),_0x5ec34e=_0x356896(0x131f)+_0xb3c8f8[_0x356896(0x127b)]+_0x356896(0x89e)+(_0xb3c8f8[_0x356896(0x1089)]||_0xb3c8f8[_0x356896(0xa62)]||'NovelAI生成')+'\x22>';else{if(_0xb3c8f8['type']===_0x356896(0x412)){_0x515df7[_0x356896(0x128f)][_0x356896(0x1327)]('is-voice-message',_0x356896(0x75e));const _0x510db5=Math['max'](0x1,Math[_0x356896(0x44d)]((_0xb3c8f8[_0x356896(0x1469)]||'')['length']/0x5)),_0x593475='0:'+String(_0x510db5)[_0x356896(0x13e8)](0x2,'0')+'\x27\x27',_0x1aa33b=_0x356896(0x4ac);if(_0xc6dd94)_0x5ec34e='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22voice-message-body\x22\x20data-text=\x22'+encodeURIComponent(_0xb3c8f8[_0x356896(0x1469)])+_0x356896(0x995)+_0x1aa33b+_0x356896(0x5e6)+_0x593475+_0x356896(0xc11);else{const _0x31472d=!_0x435390[_0x356896(0x1364)]&&_0x435390['settings'][_0x356896(0x26f)]!==![],_0x269935=_0x435390['settings']['minimaxVoiceId']||'female-shaonv-jingpin',_0x16963a=_0x31472d?_0x356896(0xc46)+_0x269935+'\x22':'';_0x5ec34e='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22voice-message-body\x22\x20data-text=\x22'+encodeURIComponent(_0xb3c8f8[_0x356896(0x1469)])+'\x22\x20'+_0x16963a+'>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22voice-waveform\x22>'+_0x1aa33b+_0x356896(0x104f)+_0x593475+_0x356896(0xc11);}}else{if(_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x35f)){_0x515df7[_0x356896(0x128f)][_0x356896(0x1327)](_0x356896(0xd27),_0x356896(0x75e));let _0x2fa00b,_0xc1d943;const _0x52b30f=_0x435390['isGroup']?_0x435390[_0x356896(0x12d7)][_0x356896(0xda5)]||'我':'我',_0x155818=_0x185e1d(_0x435390,_0xb3c8f8[_0x356896(0x213)]),_0x1bfa0e=_0x185e1d(_0x435390,_0xb3c8f8[_0x356896(0xe0f)]||_0x435390['name']);if(_0xc6dd94){if(_0xb3c8f8['isRefund'])_0x2fa00b='退款给\x20'+_0x1bfa0e,_0xc1d943=_0x356896(0x1b7);else{_0x2fa00b=_0x356896(0x11ee)+_0x1bfa0e;if(_0xb3c8f8[_0x356896(0x103e)]===_0x356896(0x13fd))_0xc1d943='对方已收款';else{if(_0xb3c8f8[_0x356896(0x103e)]===_0x356896(0x1467))_0xc1d943=_0x356896(0x9d0);else _0xc1d943=_0xb3c8f8[_0x356896(0x14d7)]||_0x356896(0x4b4);}}}else{if(_0xb3c8f8[_0x356896(0x29f)])_0x2fa00b=_0x356896(0x9ec)+_0x155818,_0xc1d943=_0x356896(0x948);else{if(_0xb3c8f8[_0x356896(0xe0f)]===_0x52b30f){_0x2fa00b=_0x356896(0x11ee)+_0x52b30f;if(_0xb3c8f8['status']===_0x356896(0x13fd))_0xc1d943=_0x356896(0x6e1);else{if(_0xb3c8f8['status']===_0x356896(0x1467))_0xc1d943=_0x356896(0x119f);else _0x515df7[_0x356896(0x63b)][_0x356896(0x298)]='pointer',_0x515df7[_0x356896(0x8df)][_0x356896(0x103e)]=_0x356896(0x2ea),_0xc1d943=_0xb3c8f8[_0x356896(0x14d7)]||_0x356896(0xa86);}}else _0x2fa00b=_0x356896(0xce1)+_0x155818+_0x356896(0x817)+_0x1bfa0e,_0xc1d943=_0xb3c8f8[_0x356896(0x14d7)]||_0x356896(0x147c);}}const _0x384f49=_0x356896(0x33b);_0x5ec34e=_0x356896(0xd15)+_0x384f49+'\x20'+_0x2fa00b+_0x356896(0x101a)+Number(_0xb3c8f8['amount'])[_0x356896(0x3b8)](0x2)+_0x356896(0x1518)+_0xc1d943+_0x356896(0x2fa);}else{if(_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x1332)){_0x515df7[_0x356896(0x128f)][_0x356896(0x1327)](_0x356896(0x657),_0x356896(0x75e));if(_0xb3c8f8[_0x356896(0x103e)]===_0x356896(0xa0b)||_0xb3c8f8[_0x356896(0x103e)]==='rejected')_0x515df7[_0x356896(0x128f)][_0x356896(0x1327)](_0x356896(0xac1)+_0xb3c8f8[_0x356896(0x103e)]);const _0x555ef7=_0x185e1d(_0x435390,_0xb3c8f8['senderName']),_0x2ed80e=_0x356896(0xf0d)+_0x555ef7+_0x356896(0x1578);let _0x3fe817='';_0xb3c8f8[_0x356896(0x103e)]===_0x356896(0x2ea)&&!_0xc6dd94&&(_0x3fe817=_0x356896(0x5b2)),_0x5ec34e=_0x356896(0x2b9)+_0x2ed80e+_0x356896(0x651)+Number(_0xb3c8f8['amount'])[_0x356896(0x3b8)](0x2)+_0x356896(0x9a2)+_0xb3c8f8[_0x356896(0xe55)]+'\x22></div></div></div><button\x20class=\x22waimai-details-btn\x22>查看详情</button></div>'+_0x3fe817+_0x356896(0xda9),setTimeout(()=>{const _0x51d7b8=_0x356896;if(_0xb3c8f8[_0x51d7b8(0x103e)]===_0x51d7b8(0x2ea)){const _0x1bfc0a=document['getElementById'](_0x51d7b8(0x112a)+_0xb3c8f8[_0x51d7b8(0xe55)]);if(_0x1bfc0a){const _0x4d46ce=_0x300faa(_0x1bfc0a,_0xb3c8f8['countdownEndTime']);_0x50cb3f[_0xb3c8f8[_0x51d7b8(0xe55)]]=_0x4d46ce;}}},0x0);}else{if(_0xb3c8f8['type']===_0x356896(0x1e7)){_0x515df7[_0x356896(0x128f)][_0x356896(0x1327)](_0x356896(0x657),_0x356896(0x75e));const _0x4f3de5=_0x185e1d(_0x435390,_0xb3c8f8[_0x356896(0x213)]);let _0xc4569e='你';_0x435390['isGroup']&&(_0xc4569e=_0x185e1d(_0x435390,_0xb3c8f8['recipientName'])),_0x5ec34e='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22waimai-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22waimai-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22https://files.catbox.moe/mq179k.png\x22\x20class=\x22icon\x22\x20alt=\x22Meituan\x20Icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title-group\x22><span\x20class=\x22brand\x22>美团外卖</span><span\x20class=\x22separator\x22>|</span><span>外卖美食</span></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22waimai-main\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22request-title\x22\x20style=\x22margin-bottom:\x2012px;\x22>'+_0x4f3de5+_0x356896(0xf2d)+_0xc4569e+_0x356896(0x62e)+_0xb3c8f8[_0x356896(0x51a)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amount\x22\x20style=\x22margin-top:\x208px;\x22>¥'+Number(_0xb3c8f8['amount'])[_0x356896(0x3b8)](0x2)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22waimai-details-btn\x22>查看订单详情</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';}else{if(_0xb3c8f8[_0x356896(0x682)]==='red_packet'){_0x515df7[_0x356896(0x128f)][_0x356896(0x1327)](_0x356896(0x39f),_0x356896(0x75e));const _0x1521e6=_0x8f0871['qzoneSettings'][_0x356896(0xff8)]||'{{user}}',_0x30ae50=_0xb3c8f8[_0x356896(0xc71)],_0x34be22=_0xb3c8f8[_0x356896(0xe57)]&&_0xb3c8f8[_0x356896(0xe57)][_0x1521e6];let _0x5ca898='',_0x226f4d='',_0x24a830=_0x356896(0xe44);_0x30ae50&&(_0x5ca898='opened');if(_0xb3c8f8[_0x356896(0xef9)]==='direct'){const _0x5c9927=_0x185e1d(_0x435390,_0xb3c8f8[_0x356896(0xe0f)]);_0x24a830='专属红包:\x20给\x20'+_0x5c9927;if(Object[_0x356896(0x1204)](_0xb3c8f8[_0x356896(0xe57)]||{})[_0x356896(0xac0)]>0x0)_0x5ca898='opened';}if(_0x34be22){const _0x45faba=_0xb3c8f8[_0x356896(0xe57)][_0x1521e6]||0x0;_0x226f4d=_0x356896(0x14f2)+_0x45faba['toFixed'](0x2)+_0x356896(0x2e4);}else{if(_0x30ae50)_0x226f4d=_0x356896(0x6fb);else{if(_0xb3c8f8[_0x356896(0xef9)]===_0x356896(0xaf3)&&Object['keys'](_0xb3c8f8['claimedBy']||{})[_0x356896(0xac0)]>0x0){const _0x51fe5f=_0x185e1d(_0x435390,_0xb3c8f8[_0x356896(0xe0f)]);_0x226f4d=_0x356896(0x8c5)+_0x51fe5f+_0x356896(0x11d9);}}}_0x5ec34e=_0x356896(0x93f)+_0x5ca898+'\x22><div\x20class=\x22rp-header\x22><img\x20src=\x22https://files.catbox.moe/lo9xhc.png\x22\x20class=\x22rp-icon\x22><span\x20class=\x22rp-greeting\x22>'+(_0xb3c8f8[_0x356896(0x367)]||_0x356896(0x1240))+'</span></div><div\x20class=\x22rp-type\x22>'+_0x24a830+_0x356896(0xda9)+_0x226f4d+_0x356896(0xda9);}else{if(_0xb3c8f8[_0x356896(0x682)]===_0x356896(0x34e)){_0x515df7['classList'][_0x356896(0x1327)](_0x356896(0x6c4),_0x356896(0x75e));const _0x3ef43e=_0xb3c8f8['question']||_0xb3c8f8['content']||_0x356896(0xc13);let _0x5e2c20=0x0;const _0x3333b4={};for(const _0x5daaa3 in _0xb3c8f8['votes']){const _0x3e50f6=_0xb3c8f8['votes'][_0x5daaa3][_0x356896(0xac0)];_0x3333b4[_0x5daaa3]=_0x3e50f6,_0x5e2c20+=_0x3e50f6;}const _0x196a32=_0x8f0871['qzoneSettings'][_0x356896(0xff8)]||_0x356896(0x8d4);let _0x10b0e4=null;for(const _0x277d77 in _0xb3c8f8['votes']){if(_0xb3c8f8[_0x356896(0xb61)][_0x277d77][_0x356896(0xf95)](_0x196a32)){_0x10b0e4=_0x277d77;break;}}let _0x23f8ea='<div\x20class=\x22poll-options-list\x22>';_0xb3c8f8[_0x356896(0x1106)][_0x356896(0x458)](_0x33b29e=>{const _0x58be6a=_0x356896,_0x3796e3=_0x3333b4[_0x33b29e]||0x0,_0x5e920a=_0x5e2c20>0x0?_0x3796e3/_0x5e2c20*0x64:0x0,_0x1affac=_0x10b0e4===_0x33b29e;_0x23f8ea+=_0x58be6a(0x10a3)+(_0x1affac?'voted':'')+_0x58be6a(0x639)+_0x33b29e+'\x22><div\x20class=\x22poll-option-bar\x22\x20style=\x22width:\x20'+_0x5e920a+_0x58be6a(0x105d)+_0x33b29e+_0x58be6a(0x10ae)+_0x3796e3+'\x20票</span></div></div>';}),_0x23f8ea+='</div>';let _0x16fbdf=_0xb3c8f8[_0x356896(0x10df)]?_0x356896(0xd90)+_0x5e2c20+_0x356896(0x4ad):_0x356896(0xd90)+_0x5e2c20+_0x356896(0x83e);_0x5ec34e=_0x356896(0x9e9)+(_0xb3c8f8[_0x356896(0x10df)]?_0x356896(0xf6e):'')+_0x356896(0x2b4)+_0xb3c8f8[_0x356896(0xe55)]+_0x356896(0x6e6)+_0x3ef43e+_0x356896(0xda9)+_0x23f8ea+_0x16fbdf+'</div>';}else{if(_0xb3c8f8['type']===_0x356896(0x1338)){_0x515df7[_0x356896(0x128f)][_0x356896(0x1327)]('is-gift',_0x356896(0x75e));let _0x3b4fad;const _0x494230=_0x435390[_0x356896(0x12d7)][_0x356896(0xda5)]||'我';if(_0x435390[_0x356896(0x1364)]){if(_0xb3c8f8[_0x356896(0x8ef)]&&_0xb3c8f8[_0x356896(0x8ef)][_0x356896(0xac0)]>0x0){const _0x2c1c65=_0xb3c8f8['recipients'][_0x356896(0x556)](_0x40b418=>_0x185e1d(_0x435390,_0x40b418));_0x2c1c65[_0x356896(0xac0)]===0x1?_0x3b4fad='送给\x20'+_0x2c1c65[0x0]+_0x356896(0x1452):_0x3b4fad=_0x356896(0xcd5)+_0x2c1c65[_0x356896(0x59f)](0x0,0x2)[_0x356896(0xcc2)]('、')+_0x356896(0x8e5);}else _0x3b4fad=_0x356896(0xb13);}else{if(_0xc6dd94)_0x3b4fad=_0x356896(0xcd5)+_0x435390['name']+_0x356896(0x1452);else{const _0x5fa18a=_0x435390[_0x356896(0x12d7)][_0x356896(0xda5)]||'你';_0x3b4fad=_0x356896(0xcd5)+_0x5fa18a+_0x356896(0x1452);}}const _0x95afe9=_0xb3c8f8['items']['slice'](0x0,0x3);let _0x36b055='';_0x95afe9[_0x356896(0x458)](_0xaa7ab1=>{const _0x39ce46=_0x356896;_0x36b055+=_0x39ce46(0x5c8)+_0xaa7ab1[_0x39ce46(0x127b)]+'\x22\x20class=\x22gift-preview-img\x22><span\x20class=\x22gift-preview-name\x22>'+_0xaa7ab1['name']+'</span><span\x20class=\x22gift-preview-quantity\x22>x'+_0xaa7ab1[_0x39ce46(0x1261)]+_0x39ce46(0x1077);});let _0x5445ef='';_0xb3c8f8[_0x356896(0x1f2)]['length']>0x3&&(_0x5445ef='\x20等'+_0xb3c8f8[_0x356896(0x1f2)][_0x356896(0xac0)]+_0x356896(0x87b)),_0x5ec34e=_0x356896(0x156b)+_0x3b4fad+_0x356896(0x10b1)+_0x36b055+'</div><div\x20class=\x22gift-footer\x22>共'+_0xb3c8f8[_0x356896(0x1f2)][_0x356896(0xac0)]+'件商品'+_0x5445ef+_0x356896(0x237);}}}}}}}}}}}}}}else{const _0x548b51=String(_0x14253f);let _0xfd68f0=await _0x4e71b8(_0x548b51,_0x435390['id']);if(_0xfd68f0!==_0x548b51)_0x5ec34e=_0xfd68f0,_0x515df7[_0x356896(0x128f)][_0x356896(0x1327)]('is-card-like');else{if(Array['isArray'](_0xb3c8f8[_0x356896(0x1469)])&&_0xb3c8f8[_0x356896(0x1469)][0x0]?.[_0x356896(0x682)]==='image_url'){const _0x1921a3=_0xb3c8f8[_0x356896(0x1469)][0x0][_0x356896(0xa58)][_0x356896(0x3f5)];_0x5ec34e=_0x356896(0x131f)+_0x1921a3+_0x356896(0x1181);}else{if(_0x4a5ebd[_0x356896(0x3fb)](_0xfd68f0))_0x515df7[_0x356896(0x128f)][_0x356896(0x1327)](_0x356896(0x11e2),'is-card-like'),_0x5ec34e=_0x356896(0x131f)+_0xfd68f0+_0x356896(0x7cb)+(_0xb3c8f8[_0x356896(0x1421)]||'Sticker')+_0x356896(0xb45);else{let _0x5bf621=_0x92c3c3(_0xfd68f0,_0x435390);_0x5ec34e=_0x3de267(_0x5bf621)['replace'](/\n/g,'<br>');}}}}}_0x515df7[_0x356896(0x1331)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x532a63+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1fbbc3+_0x356896(0xdd3)+_0x5ec34e+_0x356896(0x812),_0x4706f8[_0x356896(0x1155)](_0x515df7),_0x4706f8[_0x356896(0x1155)](_0x2b3f5e),_0x53cdde(_0x4706f8,()=>_0x491764(_0xb3c8f8[_0x356896(0xe55)])),_0x4706f8[_0x356896(0x7b8)](_0x356896(0xb4a),()=>{if(_0x2903d2)_0x4969c1(_0xb3c8f8['timestamp']);});if(!_0xc6dd94){const _0x523f49=_0x4706f8[_0x356896(0xfb1)](_0x356896(0x1498));_0x523f49&&(_0x523f49[_0x356896(0x63b)][_0x356896(0x298)]=_0x356896(0x157c),!_0x435390['isGroup']?_0x523f49[_0x356896(0x7b8)]('click',_0x28ae7b=>{const _0x4eac33=_0x356896;_0x28ae7b[_0x4eac33(0x21b)](),_0x18d436(_0x435390['id']);}):_0x523f49[_0x356896(0x7b8)](_0x356896(0x12a0),_0x4f246f=>{const _0x3304a2=_0x356896;_0x4f246f['stopPropagation'](),_0x2e122d(_0x435390['id'],_0xb3c8f8[_0x3304a2(0x213)]);}));}return _0x4706f8;}async function _0x43e494(_0xca6e49,_0x2eb475){const _0x43557e=_0x7c5117,_0x745444=document[_0x43557e(0xfa0)]('chat-messages'),_0x3ca22b=await _0x20ac60(_0xca6e49,_0x2eb475);if(!_0x3ca22b)return;const _0x5c10c1=document['getElementById'](_0x43557e(0x132b));_0x5c10c1?_0x745444[_0x43557e(0x3c9)](_0x3ca22b,_0x5c10c1[_0x43557e(0xb46)]):_0x745444[_0x43557e(0x9f3)](_0x3ca22b);}async function _0x25d29f(_0x18af02,_0x5518bd,_0x1878ea=![]){const _0x4fc750=_0x7c5117,_0x1877c1=document['getElementById']('chat-messages'),_0x5e57d5=document['getElementById'](_0x4fc750(0x1505)),_0x3d9c2a=_0x5518bd[_0x4fc750(0xc88)][_0x4fc750(0xde7)](_0x283841=>!_0x283841[_0x4fc750(0x1559)])['pop']();if(_0x3d9c2a&&_0x18af02['timestamp']-_0x3d9c2a['timestamp']>0x927c0){const _0x52a4e7=_0x3041c1(_0x18af02[_0x4fc750(0xe55)]);_0x1877c1['insertBefore'](_0x52a4e7,_0x5e57d5);}const _0x2fa2e6=await _0x20ac60(_0x18af02,_0x5518bd);if(!_0x2fa2e6)return;_0x18af02[_0x4fc750(0xc92)]===_0x4fc750(0x10af)&&!_0x1878ea&&_0x51ee1f(),!_0x1878ea&&_0x2fa2e6['classList'][_0x4fc750(0x1327)](_0x4fc750(0x202)),_0x1877c1[_0x4fc750(0x3c9)](_0x2fa2e6,_0x5e57d5),!_0x1878ea&&(_0x1877c1[_0x4fc750(0x54d)]=_0x1877c1[_0x4fc750(0x11b8)],_0x3d7932++);}async function _0x41c772(_0x2f84d0){const _0xf897b3=_0x7c5117;_0x8f0871['activeChatId']=_0x2f84d0;const _0x15c479=_0x8f0871[_0xf897b3(0x1260)][_0x2f84d0];if(!_0x15c479)return;_0x15c479[_0xf897b3(0x28d)]>0x0&&(_0x15c479[_0xf897b3(0x28d)]=0x0,await _0x372b85['chats']['put'](_0x15c479));_0x8a5503(_0x15c479),_0x54d32b(_0x2f84d0),_0x2d25e5('chat-interface-screen'),window[_0xf897b3(0x607)](_0x8f0871['activeChatId']);const _0x11503e=_0x15c479[_0xf897b3(0x1364)]||![];_0x2242ba(_0x11503e),document[_0xf897b3(0xfa0)](_0xf897b3(0xb6d))[_0xf897b3(0x63b)][_0xf897b3(0x1248)]=_0x11503e?_0xf897b3(0x138c):_0xf897b3(0x11b5);const _0x23e6e6=document['getElementById']('pat-btn');_0x23e6e6&&(_0x23e6e6[_0xf897b3(0x63b)][_0xf897b3(0x1248)]=_0x11503e?_0xf897b3(0x11b5):'flex');const _0x1313cb=document[_0xf897b3(0xfa0)](_0xf897b3(0xe61)),_0x4f8e1e=document[_0xf897b3(0xfa0)](_0xf897b3(0x9e2)),_0x3e52a8=document[_0xf897b3(0xfa0)](_0xf897b3(0x6eb)),_0x47fe08=document[_0xf897b3(0xfa0)](_0xf897b3(0x525));_0x4f8e1e&&_0x3e52a8&&_0x47fe08&&_0x1313cb&&(_0x4f8e1e[_0xf897b3(0x63b)][_0xf897b3(0x1248)]='flex',_0x3e52a8['style']['display']=_0x11503e?_0xf897b3(0x11b5):_0xf897b3(0x138c),_0x47fe08['style'][_0xf897b3(0x1248)]=_0x11503e?'flex':'none',_0x1313cb[_0xf897b3(0x63b)][_0xf897b3(0x1248)]=_0x11503e?'none':_0xf897b3(0x138c)),_0x5415e3(),!_0x15c479[_0xf897b3(0x1364)]&&_0x15c479[_0xf897b3(0x1171)]?.[_0xf897b3(0x103e)]==='pending_ai_approval'&&(console['log']('检测到好友申请待处理状态，为角色\x20\x22'+_0x15c479[_0xf897b3(0x1023)]+_0xf897b3(0x1382)),_0x2264b2()),document['getElementById']('send-poll-btn')['style'][_0xf897b3(0x1248)]=_0x11503e?_0xf897b3(0x138c):_0xf897b3(0x11b5);}function _0x191654(_0x23b0ed,_0x5c6807){const _0x500002=_0x7c5117,_0x584489=_0x5c6807?_0x500002(0x1327):'remove',_0x2e2e05=_0x4763f3=>{const _0x4da6b2=_0x500002;_0x4763f3&&_0x4763f3['classList'][_0x584489](_0x4da6b2(0x91d));},_0x1f4c18=document[_0x500002(0xfb1)]('.chat-list-item[data-chat-id=\x22'+_0x23b0ed+_0x500002(0x10ba));_0x2e2e05(_0x1f4c18);const _0xf133a6=document[_0x500002(0x2a1)](_0x500002(0x13c3)+_0x23b0ed+'\x22]');_0xf133a6[_0x500002(0x458)](_0x2e2e05);const _0x5f39b5=document['querySelector'](_0x500002(0x785)+_0x23b0ed+'\x22]');_0x2e2e05(_0x5f39b5);}async function _0x1bdca8(){const _0x5b7531=_0x7c5117;if(!_0x8f0871['activeChatId'])return;const _0x31b3a7=_0x8f0871[_0x5b7531(0xac8)],_0x429195=_0x8f0871[_0x5b7531(0x1260)][_0x31b3a7];lastRawAiResponse='',lastResponseTimestamps=[];const _0x5f4f7d=document[_0x5b7531(0xfa0)](_0x5b7531(0x9a8));_0x5f4f7d&&(_0x5f4f7d['disabled']=!![],_0x5f4f7d['textContent']='思考中...');_0x191654(_0x31b3a7,!![]);try{const {proxyUrl:_0x44178c,apiKey:_0x54b907,model:_0x3df27d}=_0x8f0871['apiConfig'];if(!_0x44178c||!_0x54b907||!_0x3df27d)throw new Error(_0x5b7531(0x1237));const _0x44fb0d=parseInt(_0x429195[_0x5b7531(0x12d7)]['maxMemory'])||0xa,_0x5c7a35=_0x429195[_0x5b7531(0xc88)][_0x5b7531(0x59f)](-_0x44fb0d);let _0x25c8f2='';if(_0x429195['settings']['linkedWorldBookIds']&&_0x429195['settings'][_0x5b7531(0xaaf)][_0x5b7531(0xac0)]>0x0){const _0x15db73=_0x429195[_0x5b7531(0x12d7)][_0x5b7531(0xaaf)][_0x5b7531(0x556)](_0x2608ea=>{const _0x2f9bf8=_0x5b7531,_0x35f570=_0x8f0871[_0x2f9bf8(0x739)][_0x2f9bf8(0x7ed)](_0x2f35a5=>_0x2f35a5['id']===_0x2608ea);if(!_0x35f570||!Array[_0x2f9bf8(0x345)](_0x35f570[_0x2f9bf8(0x1469)]))return'';const _0x27ff02=_0x35f570[_0x2f9bf8(0x1469)][_0x2f9bf8(0xde7)](_0x4a52a7=>_0x4a52a7[_0x2f9bf8(0x7af)]!==![])[_0x2f9bf8(0x556)](_0x17291e=>{const _0x566a76=_0x2f9bf8;let _0xffb9d1=_0x566a76(0x13b0)+(_0x17291e[_0x566a76(0x7ab)]||_0x566a76(0x13e2))+'\x0a';if(_0x17291e['keys'][_0x566a76(0xac0)]>0x0)_0xffb9d1+=_0x566a76(0x145a)+_0x17291e[_0x566a76(0x1204)]['join'](',\x20')+'\x0a';return _0xffb9d1+='**内容:**\x0a'+_0x17291e[_0x566a76(0x1469)],_0xffb9d1;})[_0x2f9bf8(0xcc2)]('');return _0x27ff02?_0x2f9bf8(0x66c)+_0x35f570['name']+'\x0a'+_0x27ff02:'';})[_0x5b7531(0xde7)](Boolean)[_0x5b7531(0xcc2)]('');_0x15db73&&(_0x25c8f2=_0x5b7531(0x72a)+_0x15db73+_0x5b7531(0xf00));}let _0x23e58f=_0x5b7531(0xf9e),_0x2213e1=![];_0x429195[_0x5b7531(0x2cf)][_0x5b7531(0x458)](_0x1dc956=>{const _0x34cfd8=_0x5b7531,_0x1f38c6=_0x8f0871[_0x34cfd8(0x1260)][_0x1dc956['id']];_0x1f38c6&&_0x1f38c6[_0x34cfd8(0x1312)]&&_0x1f38c6[_0x34cfd8(0x1312)]['length']>0x0&&(_0x23e58f+=_0x34cfd8(0x1299)+_0x1dc956['groupNickname']+'”的记忆\x20---\x0a',_0x23e58f+=_0x1f38c6['longTermMemory'][_0x34cfd8(0x556)](_0x3d34a3=>'-\x20(记录于\x20'+_0x2368ae(_0x3d34a3[_0x34cfd8(0xe55)])+')\x20'+_0x3d34a3['content'])[_0x34cfd8(0xcc2)]('\x0a'),_0x2213e1=!![]);});!_0x2213e1&&(_0x23e58f+='-\x20(暂无)');let _0x2020c7='';const _0x2bbffd=_0x429195['settings']['linkedMemoryCount']||0xa;if(_0x429195[_0x5b7531(0x12d7)][_0x5b7531(0x6e0)]&&_0x429195[_0x5b7531(0x12d7)][_0x5b7531(0x6e0)][_0x5b7531(0xac0)]>0x0){}const _0x323f35=_0x429195['members']['map'](_0x5f059d=>_0x5b7531(0x6d2)+_0x5f059d[_0x5b7531(0x5c9)]+_0x5b7531(0x4f9)+_0x5f059d[_0x5b7531(0x93e)]+_0x5b7531(0xf4f)+_0x5f059d[_0x5b7531(0x3fa)])[_0x5b7531(0xcc2)]('\x0a'),_0xec8cbd=_0x548d4f(_0x429195),_0x2bf9f9=_0x5b7531(0x1358)+_0x429195[_0x5b7531(0x1023)]+_0x5b7531(0xad4)+_0x429195['name']+_0x5b7531(0x2a7)+_0x23e58f+'\x0a'+_0x25c8f2+'\x0a'+_0x2020c7+_0x5b7531(0xbc9)+_0x5c7a35[_0x5b7531(0x556)](_0xfe2952=>_0x185e1d(_0x429195,_0xfe2952['senderName'])+':\x20'+_0xfe2952[_0x5b7531(0x1469)])[_0x5b7531(0xcc2)]('\x0a')+_0x5b7531(0x742)+_0x323f35+_0x5b7531(0x735)+_0xec8cbd+_0x5b7531(0x1054),_0x10b671=_0x5c7a35[_0x5b7531(0x556)](_0x4cf7f6=>({'role':_0x5b7531(0xcb0),'content':_0x185e1d(_0x429195,_0x4cf7f6[_0x5b7531(0x213)])+':\x20'+_0x4cf7f6[_0x5b7531(0x1469)]}));let _0x508aea=_0x44178c[_0x5b7531(0xf95)](_0x5b7531(0xdd7)),_0x1e0b69;if(_0x508aea){let _0x43ef3a=_0x1e2f27(_0x3df27d,_0x54b907,_0x2bf9f9,_0x10b671);_0x1e0b69=await fetch(_0x43ef3a['url'],_0x43ef3a[_0x5b7531(0x3cc)]);}else _0x1e0b69=await fetch(_0x44178c+_0x5b7531(0x1011),{'method':_0x5b7531(0xb67),'headers':{'Content-Type':_0x5b7531(0x4b5),'Authorization':_0x5b7531(0x681)+_0x54b907},'body':JSON[_0x5b7531(0x7cc)]({'model':_0x3df27d,'messages':[{'role':_0x5b7531(0x1417),'content':_0x2bf9f9},..._0x10b671],'temperature':_0x8f0871[_0x5b7531(0x7b0)][_0x5b7531(0x14a5)]||0.9})});if(!_0x1e0b69['ok']){const _0x5c8c54=await _0x1e0b69[_0x5b7531(0xa2e)]()['catch'](()=>({'error':{'message':_0x1e0b69[_0x5b7531(0x37e)]}}));throw new Error(_0x5b7531(0x1053)+_0x1e0b69[_0x5b7531(0x103e)]+'\x20-\x20'+(_0x5c8c54[_0x5b7531(0x52b)]?.['message']||_0x5b7531(0xc55)));}const _0x2934f0=await _0x1e0b69[_0x5b7531(0xa2e)](),_0x526422=getGeminiResponseText(_0x2934f0);lastRawAiResponse=_0x526422;const _0x1fa39e=_0x3b585b(_0x526422);let _0x322a20=Date[_0x5b7531(0xc22)]();for(const _0x4b9e64 of _0x1fa39e){if(!_0x4b9e64||!_0x4b9e64[_0x5b7531(0x682)]||!_0x4b9e64[_0x5b7531(0x1023)])continue;let _0x45c93a=null;const _0x10edf9=_0x322a20++;lastResponseTimestamps['push'](_0x10edf9);const _0x35e3db={'role':_0x5b7531(0x10af),'senderName':_0x4b9e64[_0x5b7531(0x1023)],'timestamp':_0x10edf9};switch(_0x4b9e64[_0x5b7531(0x682)]){case _0x5b7531(0xda3):_0x45c93a={..._0x35e3db,'content':_0x4b9e64[_0x5b7531(0x1469)]};break;case _0x5b7531(0xf14):if(_0x4b9e64[_0x5b7531(0x1421)]){const _0xcd0bb0=_0x8f0871[_0x5b7531(0x413)][_0x5b7531(0x7ed)](_0x4dc1a2=>_0x4dc1a2[_0x5b7531(0x1023)]===_0x4b9e64['meaning']);_0xcd0bb0?_0x45c93a={..._0x35e3db,'type':'sticker','content':_0xcd0bb0[_0x5b7531(0x3f5)],'meaning':_0xcd0bb0[_0x5b7531(0x1023)]}:(console[_0x5b7531(0x7fa)](_0x5b7531(0xd1b)+_0x4b9e64[_0x5b7531(0x1421)]+'\x22'),_0x45c93a={..._0x35e3db,'type':_0x5b7531(0xda3),'content':_0x5b7531(0x103c)+_0x4b9e64[_0x5b7531(0x1421)]+']'});}else console[_0x5b7531(0x7fa)](_0x5b7531(0x12c4),_0x4b9e64);break;case _0x5b7531(0x8b0):_0x45c93a={..._0x35e3db,'type':_0x5b7531(0x8b0),'content':_0x4b9e64[_0x5b7531(0x211)],'image_prompt':_0x4b9e64[_0x5b7531(0xe0d)]};break;case _0x5b7531(0x412):_0x45c93a={..._0x35e3db,'type':_0x5b7531(0x412),'content':_0x4b9e64[_0x5b7531(0x1469)]};break;case _0x5b7531(0x6d4):const _0x3f5ff2=_0x429195['history'][_0x5b7531(0x7ed)](_0x50ae8d=>_0x50ae8d[_0x5b7531(0xe55)]===_0x4b9e64['target_timestamp']);_0x3f5ff2?_0x45c93a={..._0x35e3db,'content':_0x4b9e64[_0x5b7531(0xf98)],'quote':{'timestamp':_0x3f5ff2[_0x5b7531(0xe55)],'senderName':_0x3f5ff2['senderName'],'content':String(_0x3f5ff2[_0x5b7531(0x1469)]||'')[_0x5b7531(0x9fe)](0x0,0x32)}}:_0x45c93a={..._0x35e3db,'content':_0x4b9e64[_0x5b7531(0xf98)]};break;default:console[_0x5b7531(0x7fa)](_0x5b7531(0x5ed),_0x4b9e64[_0x5b7531(0x682)]);continue;}_0x45c93a&&(_0x429195[_0x5b7531(0xc88)][_0x5b7531(0x481)](_0x45c93a),_0x25d29f(_0x45c93a,_0x429195),await new Promise(_0x4ded61=>setTimeout(_0x4ded61,Math[_0x5b7531(0x148a)]()*0x4b0+0x320)));}await _0x372b85['chats'][_0x5b7531(0x11d5)](_0x429195),_0x2d75fb();}catch(_0x57eaf4){console['error'](_0x5b7531(0xa95),_0x57eaf4),await _0x4abd86(_0x5b7531(0x457),_0x5b7531(0xe43)+_0x57eaf4[_0x5b7531(0x790)]);}finally{_0x5f4f7d&&(_0x5f4f7d[_0x5b7531(0x104b)]=![],_0x5f4f7d[_0x5b7531(0xc62)]=_0x5b7531(0x1b2)),_0x191654(_0x31b3a7,![]);}}async function _0x2264b2(){const _0x252e09=_0x7c5117;if(!_0x8f0871[_0x252e09(0xac8)])return;const _0x47e4c1=_0x8f0871[_0x252e09(0xac8)],_0x110a6a=_0x8f0871[_0x252e09(0x1260)][_0x8f0871[_0x252e09(0xac8)]],_0x572a8e=document[_0x252e09(0xfa0)](_0x252e09(0xe95))[_0x252e09(0x128f)][_0x252e09(0xea7)](_0x252e09(0xa37))&&_0x8f0871['activeChatId']===_0x47e4c1;_0x191654(_0x47e4c1,!![]);const _0x30341d=document['getElementById'](_0x252e09(0x250)),_0x17d2d5=document[_0x252e09(0xfa0)](_0x252e09(0x1505)),_0x13d1b0=document['querySelector'](_0x252e09(0x1574)+_0x47e4c1+'\x22]'),_0x4789e0=_0x13d1b0?_0x13d1b0[_0x252e09(0xfb1)](_0x252e09(0x43b)):null;_0x4789e0&&_0x4789e0[_0x252e09(0x128f)][_0x252e09(0x1327)](_0x252e09(0x91d));_0x110a6a[_0x252e09(0x1364)]?_0x17d2d5&&(_0x17d2d5[_0x252e09(0xc62)]=_0x252e09(0x664),_0x17d2d5['style'][_0x252e09(0x1248)]=_0x252e09(0x127c)):_0x30341d&&(_0x30341d['style'][_0x252e09(0xe7b)]=0x0,setTimeout(()=>{const _0x3510b9=_0x252e09;_0x30341d[_0x3510b9(0xc62)]=_0x3510b9(0x1191),_0x30341d['classList'][_0x3510b9(0x1327)](_0x3510b9(0xbf3)),_0x30341d['style'][_0x3510b9(0xe7b)]=0x1;},0xc8));let _0xd683c6=![];try{const {proxyUrl:_0x202309,apiKey:_0x208e92,model:_0x54ccf2}=_0x8f0871['apiConfig'];if(!_0x202309||!_0x208e92||!_0x54ccf2){alert(_0x252e09(0x499));if(_0x110a6a['isGroup']){if(_0x17d2d5)_0x17d2d5[_0x252e09(0x63b)][_0x252e09(0x1248)]=_0x252e09(0x11b5);}else _0x30341d&&_0x8f0871['chats'][_0x47e4c1]&&(_0x30341d[_0x252e09(0xc62)]=_0x8f0871[_0x252e09(0x1260)][_0x47e4c1][_0x252e09(0x1023)],_0x30341d[_0x252e09(0x128f)][_0x252e09(0x443)](_0x252e09(0xbf3)));return;}const _0x57c0a8=_0x110a6a[_0x252e09(0xc88)]['slice'](-0x1)[0x0],_0x3d4840=_0x57c0a8&&_0x57c0a8[_0x252e09(0xc92)]===_0x252e09(0x1417)&&_0x57c0a8[_0x252e09(0x1469)][_0x252e09(0xf95)](_0x252e09(0x1112));if(_0x3d4840){console[_0x252e09(0x4ee)](_0x252e09(0xc44)+_0x110a6a[_0x252e09(0x1023)]+_0x252e09(0x14b3));let _0x1fc124;_0x110a6a[_0x252e09(0x1364)]?_0x1fc124=_0x252e09(0x13ef)+_0x110a6a[_0x252e09(0x2cf)]['map'](_0x14a096=>'-\x20'+_0x14a096[_0x252e09(0x5c9)]+_0x252e09(0xcdf)+_0x14a096[_0x252e09(0x93e)]+_0x252e09(0xf4f)+_0x14a096[_0x252e09(0x3fa)])[_0x252e09(0xcc2)]('\x0a')+_0x252e09(0x233):_0x1fc124=_0x252e09(0x32e)+_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x200)]+_0x252e09(0x402);const _0x139059=[{'role':_0x252e09(0xcb0),'content':_0x1fc124}];try{let _0x9aac2f=_0x1e2f27(_0x54ccf2,_0x208e92,_0x1fc124,_0x139059),_0x3e1134=_0x202309===GEMINI_API_URL;const _0x11eb72=_0x3e1134?await fetch(_0x9aac2f[_0x252e09(0x3f5)],_0x9aac2f[_0x252e09(0x3cc)]):await fetch(_0x202309+_0x252e09(0x1011),{'method':_0x252e09(0xb67),'headers':{'Content-Type':_0x252e09(0x4b5),'Authorization':_0x252e09(0x681)+_0x208e92},'body':JSON[_0x252e09(0x7cc)]({'model':_0x54ccf2,'messages':_0x139059,'temperature':0.7})});if(!_0x11eb72['ok'])throw new Error(_0x252e09(0xd25)+(await _0x11eb72[_0x252e09(0xa2e)]())[_0x252e09(0x52b)][_0x252e09(0x790)]);const _0x22f1b6=await _0x11eb72[_0x252e09(0xa2e)](),_0x57b81d=getGeminiResponseText(_0x22f1b6),_0xf2b685=_0x3b585b(_0x57b81d);let _0xe0aeae=![];for(const _0x357e2f of _0xf2b685){if(_0x357e2f[_0x252e09(0x682)]===_0x252e09(0x10f0)){_0x1fd843['isAwaitingResponse']=![];if(_0x357e2f[_0x252e09(0x8d6)]===_0x252e09(0x141d))_0x1b78aa();else{const _0x41b55b={'role':_0x252e09(0x10af),'content':_0x252e09(0x92b),'timestamp':Date['now']()};_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x481)](_0x41b55b),await _0x372b85['chats'][_0x252e09(0x11d5)](_0x110a6a),_0x2d25e5(_0x252e09(0xe95)),_0x54d32b(_0x47e4c1);}_0xe0aeae=!![];break;}if(_0x357e2f['type']==='group_call_response'){if(_0x357e2f['decision']===_0x252e09(0xcc2)){const _0x55071d=_0x110a6a[_0x252e09(0x2cf)][_0x252e09(0x7ed)](_0x18eb88=>_0x18eb88['originalName']===_0x357e2f[_0x252e09(0x1023)]);_0x55071d&&!_0x1fd843[_0x252e09(0xa81)][_0x252e09(0x75d)](_0x4104cd=>_0x4104cd['id']===_0x55071d['id'])&&_0x1fd843[_0x252e09(0xa81)][_0x252e09(0x481)](_0x55071d);}_0xe0aeae=!![];}}_0xe0aeae&&_0x1fd843[_0x252e09(0x24f)]&&(_0x1fd843[_0x252e09(0x1531)]=![],_0x1fd843[_0x252e09(0xa81)][_0x252e09(0xac0)]>0x0?_0x1b78aa():(_0x1fd843={..._0x1fd843,'isAwaitingResponse':![],'participants':[]},_0x2d25e5(_0x252e09(0xe95)),alert(_0x252e09(0x277))));}catch(_0x5c4af4){console[_0x252e09(0x52b)](_0x252e09(0xad3),_0x5c4af4);const _0x4c13ce=_0x110a6a[_0x252e09(0x1364)]?_0x110a6a['members'][_0x252e09(0x556)](_0x24375e=>({'type':'group_call_response','name':_0x24375e['originalName'],'decision':'decline'})):[{'type':_0x252e09(0x10f0),'decision':'reject'}];if(_0x110a6a[_0x252e09(0x1364)])_0x1fd843[_0x252e09(0x1531)]=![],_0x1fd843[_0x252e09(0xa81)]=[],alert(_0x252e09(0x277)),_0x2d25e5(_0x252e09(0xe95));else{const _0x1152f1={'role':_0x252e09(0x10af),'content':'对方拒绝了你的视频通话请求。','timestamp':Date[_0x252e09(0xc22)]()};_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x481)](_0x1152f1),await _0x372b85[_0x252e09(0x1260)][_0x252e09(0x11d5)](_0x110a6a),_0x2d25e5('chat-interface-screen'),_0x54d32b(_0x47e4c1);}}finally{_0x191654(_0x47e4c1,![]);return;}}if(!_0x110a6a[_0x252e09(0x1364)]&&_0x110a6a[_0x252e09(0x1171)]?.['status']===_0x252e09(0xa2d)){console[_0x252e09(0x4ee)](_0x252e09(0x34d)+_0x110a6a[_0x252e09(0x1023)]+_0x252e09(0x384));const _0x3ca007=_0x110a6a['history'][_0x252e09(0xde7)](_0x1fd49c=>!_0x1fd49c[_0x252e09(0x1559)])[_0x252e09(0x59f)](-0xa,-0x5)[_0x252e09(0x556)](_0x5c6987=>{const _0x75686b=_0x252e09,_0x5d41d1=_0x5c6987['role']===_0x75686b(0xcb0)?'用户':_0x110a6a[_0x75686b(0x1023)];return _0x5d41d1+':\x20'+String(_0x5c6987['content'])[_0x75686b(0x9fe)](0x0,0x32)+'...';})['join']('\x0a'),_0x599923=_0x252e09(0xda0)+_0x110a6a[_0x252e09(0x1023)]+_0x252e09(0xffd)+_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x200)]+_0x252e09(0xbc7)+_0x110a6a[_0x252e09(0x1171)]['applicationReason']+_0x252e09(0xfd2)+(_0x3ca007||_0x252e09(0xbc1))+_0x252e09(0x156c);try{const _0x347558=[{'role':_0x252e09(0x1417),'content':_0x599923},{'role':_0x252e09(0xcb0),'content':_0x252e09(0x1221)}];let _0x58cc83=_0x202309===GEMINI_API_URL,_0x5706f9=_0x1e2f27(_0x54ccf2,_0x208e92,_0x599923,[{'role':_0x252e09(0xcb0),'content':_0x252e09(0x1221)}]);const _0x4d6a56=_0x58cc83?await fetch(_0x5706f9[_0x252e09(0x3f5)],_0x5706f9[_0x252e09(0x3cc)]):await fetch(_0x202309+_0x252e09(0x1011),{'method':_0x252e09(0xb67),'headers':{'Content-Type':_0x252e09(0x4b5),'Authorization':_0x252e09(0x681)+_0x208e92},'body':JSON['stringify']({'model':_0x54ccf2,'messages':_0x347558,'temperature':_0x8f0871[_0x252e09(0x7b0)][_0x252e09(0x14a5)]||0.8})});if(!_0x4d6a56['ok'])throw new Error(_0x252e09(0xd25)+(await _0x4d6a56[_0x252e09(0xa2e)]())['error'][_0x252e09(0x790)]);const _0x5627ee=await _0x4d6a56['json'](),_0x13a3b4=getGeminiResponseText(_0x5627ee)[_0x252e09(0x128a)](/^```json\s*/,'')['replace'](/```$/,'')['trim'](),_0x1e69eb=JSON[_0x252e09(0x4a0)](_0x13a3b4);if(_0x1e69eb['decision']===_0x252e09(0x141d)){_0x110a6a[_0x252e09(0x1171)]['status']=_0x252e09(0x14b5);const _0x395d10={'role':'assistant','senderName':_0x110a6a[_0x252e09(0x1023)],'content':_0x1e69eb['reason'],'timestamp':Date['now']()};_0x110a6a['history'][_0x252e09(0x481)](_0x395d10);}else{_0x110a6a[_0x252e09(0x1171)][_0x252e09(0x103e)]=_0x252e09(0x18f);const _0x4c5349={'role':_0x252e09(0x10af),'senderName':_0x110a6a['name'],'content':_0x1e69eb[_0x252e09(0x988)],'timestamp':Date[_0x252e09(0xc22)]()};_0x110a6a['history'][_0x252e09(0x481)](_0x4c5349);}_0x110a6a[_0x252e09(0x1171)][_0x252e09(0x1163)]='',await _0x372b85[_0x252e09(0x1260)]['put'](_0x110a6a),_0x54d32b(_0x47e4c1),_0x2d75fb();}catch(_0x3ebf19){_0x110a6a['relationship'][_0x252e09(0x103e)]=_0x252e09(0x18f),await _0x372b85[_0x252e09(0x1260)][_0x252e09(0x11d5)](_0x110a6a),await _0x4abd86(_0x252e09(0x1416),_0x252e09(0x8dc)+_0x3ebf19[_0x252e09(0x790)]),_0x54d32b(_0x47e4c1);}return;}let _0xb0ded='';const _0x2eedb3=new Date(),_0x5675dd=_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0xf1c)]||_0x252e09(0x726),_0x4ebaa9=_0x2eedb3[_0x252e09(0x10de)](_0x252e09(0xb43),{'timeZone':_0x5675dd,'dateStyle':_0x252e09(0x11da),'timeStyle':_0x252e09(0x249)}),_0x4aec60=new Date(_0x2eedb3[_0x252e09(0x10de)](_0x252e09(0x1227),{'timeZone':_0x5675dd})),_0x54a323=_0x46db79(_0x4aec60);let _0x3f3eaa,_0x3002cf;const _0x44fca2=_0x110a6a[_0x252e09(0xc88)][_0x252e09(0xde7)](_0x22aa28=>_0x22aa28['isHidden'])[_0x252e09(0x217)]();if(_0x44fca2&&_0x44fca2[_0x252e09(0x1469)][_0x252e09(0xf95)](_0x252e09(0x1167))){const _0x48489f=await _0x372b85[_0x252e09(0xe73)][_0x252e09(0xdc7)](_0x252e09(0xe94))[_0x252e09(0x8c2)](_0x47e4c1)[_0x252e09(0x2d2)]();if(_0x48489f&&_0x48489f[_0x252e09(0xcea)]){console[_0x252e09(0x4ee)](_0x252e09(0x13b8));const _0x494654=_0x48489f[_0x252e09(0xcea)][_0x252e09(0x556)](_0xcc055=>{const _0x139ae5=_0x252e09,_0x9b6ed0=_0xcc055[_0x139ae5(0xc92)]===_0x139ae5(0xcb0)?_0x110a6a['settings'][_0x139ae5(0xda5)]||'我':_0xcc055[_0x139ae5(0x213)];return _0x9b6ed0+':\x20'+_0xcc055[_0x139ae5(0x1469)];})['join']('\x0a');_0xb0ded=_0x252e09(0x858)+_0x494654+'\x0a---\x0a';}}const _0x9a4253=_0x5c7b47(_0x1dbbbb[_0x47e4c1]);let _0xb4eb45='';if(_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0xaaf)]&&_0x110a6a['settings'][_0x252e09(0xaaf)][_0x252e09(0xac0)]>0x0){const _0x3e4565=_0x110a6a['settings']['linkedWorldBookIds'][_0x252e09(0x556)](_0x230721=>{const _0x1e6487=_0x252e09,_0x1fa5a0=_0x8f0871['worldBooks'][_0x1e6487(0x7ed)](_0x3f7d4f=>_0x3f7d4f['id']===_0x230721);if(!_0x1fa5a0||!Array[_0x1e6487(0x345)](_0x1fa5a0[_0x1e6487(0x1469)]))return'';const _0x13e9c2=_0x1fa5a0[_0x1e6487(0x1469)][_0x1e6487(0xde7)](_0x5e4fdc=>_0x5e4fdc['enabled']!==![])[_0x1e6487(0x556)](_0x5cf548=>{const _0x24d0d6=_0x1e6487;let _0x4cac9b=_0x24d0d6(0x13b0)+(_0x5cf548[_0x24d0d6(0x7ab)]||_0x24d0d6(0x13e2))+'\x0a';return _0x5cf548[_0x24d0d6(0x1204)][_0x24d0d6(0xac0)]>0x0&&(_0x4cac9b+=_0x24d0d6(0x145a)+_0x5cf548[_0x24d0d6(0x1204)]['join'](',\x20')+'\x0a'),_0x4cac9b+=_0x24d0d6(0x1f7)+_0x5cf548[_0x24d0d6(0x1469)],_0x4cac9b;})[_0x1e6487(0xcc2)]('');return _0x13e9c2?_0x1e6487(0x66c)+_0x1fa5a0['name']+'\x0a'+_0x13e9c2:'';})[_0x252e09(0xde7)](Boolean)[_0x252e09(0xcc2)]('');_0x3e4565&&(_0xb4eb45=_0x252e09(0x72a)+_0x3e4565+'\x0a#\x20---\x20世界书设定结束\x20---\x0a');}let _0x397f6f='';if(_0x46bc8b[_0x252e09(0x684)]&&_0x46bc8b[_0x252e09(0xac8)]===_0x47e4c1){const _0x5129de=_0x46bc8b[_0x252e09(0x715)]>-0x1?_0x46bc8b['playlist'][_0x46bc8b['currentIndex']]:null,_0x42d75a=_0x46bc8b[_0x252e09(0x84a)][_0x252e09(0x556)](_0x5c8d30=>'\x22'+_0x5c8d30[_0x252e09(0x1023)]+'\x22')[_0x252e09(0xcc2)](',\x20');let _0x5c230c='';if(_0x5129de&&_0x46bc8b[_0x252e09(0xbc6)]&&_0x46bc8b['parsedLyrics'][_0x252e09(0xac0)]>0x0&&_0x46bc8b[_0x252e09(0x107a)]>-0x1){const _0x46f6f5=_0x46bc8b[_0x252e09(0xbc6)][_0x46bc8b['currentLyricIndex']],_0x212637=_0x46bc8b['parsedLyrics'][_0x252e09(0x59f)](_0x46bc8b[_0x252e09(0x107a)]+0x1,_0x46bc8b['currentLyricIndex']+0x3);_0x5c230c+=_0x252e09(0xc31)+_0x46f6f5[_0x252e09(0xda3)]+'\x22\x0a',_0x212637['length']>0x0&&(_0x5c230c+=_0x252e09(0x647)+_0x212637[_0x252e09(0x556)](_0x3c008b=>'\x22'+_0x3c008b[_0x252e09(0xda3)]+'\x22')[_0x252e09(0xcc2)](_0x252e09(0x69b))+'\x0a');}_0x397f6f=_0x252e09(0x321)+(_0x5129de?'《'+_0x5129de[_0x252e09(0x1023)]+_0x252e09(0x3a0)+_0x5129de['artist']:'无')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**可用播放列表**:\x20['+_0x42d75a+']\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5c230c+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**你的任务**:\x20你可以根据对话内容和氛围，使用\x20\x22change_music\x22\x20指令切换到播放列表中的任何一首歌，以增强互动体验。\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}const _0x2a3a3d=parseInt(_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x266)])||0xa,_0x93a8a9=_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x59f)](-_0x2a3a3d);let _0x2be74f='';const _0x4d2327=_0x110a6a['history'][_0x252e09(0x401)](_0x2acc6c=>_0x2acc6c[_0x252e09(0xc92)]===_0x252e09(0x10af)),_0xa54b8e=_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x59f)](_0x4d2327+0x1),_0x350a4d=_0xa54b8e[_0x252e09(0x7ed)](_0x23d47f=>_0x23d47f[_0x252e09(0x682)]===_0x252e09(0x5c7));if(_0x350a4d){const _0x504b52=_0x350a4d['payload'],_0x14db72=_0x504b52[_0x252e09(0xe36)]['map'](_0x570540=>{const _0xb1dbe=_0x252e09,_0x17668f=_0x570540[_0xb1dbe(0x213)]||(_0x570540[_0xb1dbe(0xc92)]==='user'?_0x110a6a[_0xb1dbe(0x12d7)][_0xb1dbe(0xda5)]||'我':_0xb1dbe(0x5a7));let _0x1c364a='';if(_0x570540[_0xb1dbe(0x682)]==='voice_message')_0x1c364a='[语音消息:\x20'+_0x570540[_0xb1dbe(0x1469)]+']';else{if(_0x570540['type']===_0xb1dbe(0x8b0))_0x1c364a='[图片:\x20'+_0x570540['description']+']';else{if(_0x570540['type']===_0xb1dbe(0x1a0))_0x1c364a='[NovelAI图片:\x20'+_0x570540[_0xb1dbe(0xa62)]+']';else _0x1c364a=String(_0x570540['content']);}}return _0x17668f+':\x20'+_0x1c364a;})[_0x252e09(0xcc2)]('\x0a');_0x2be74f=_0x252e09(0x1272)+_0x504b52['sourceChatName']+_0x252e09(0x67b)+_0x14db72+_0x252e09(0x7be);}let _0x57d2d1='';const _0x9daa37=_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x79c)]||0xa;if(_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x6e0)]&&_0x110a6a[_0x252e09(0x12d7)]['linkedMemoryChatIds'][_0x252e09(0xac0)]>0x0){const _0x573711=_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x6e0)][_0x252e09(0xde7)](_0x525bad=>_0x525bad!==_0x47e4c1);if(_0x573711[_0x252e09(0xac0)]>0x0){const _0x4cef36=_0x573711[_0x252e09(0x556)](_0x82abcb=>{const _0x277f53=_0x252e09,_0x143272=_0x8f0871['chats'][_0x82abcb];if(!_0x143272)return null;const _0x15b384=_0x143272['history'][_0x277f53(0x59f)](-0x1);return{'chat':_0x143272,'latestTimestamp':_0x15b384?_0x15b384[_0x277f53(0xe55)]:0x0};})[_0x252e09(0xde7)](Boolean);_0x4cef36[_0x252e09(0x1376)]((_0x54578b,_0x263fd6)=>_0x263fd6['latestTimestamp']-_0x54578b['latestTimestamp']),_0x57d2d1+='\x0a\x0a#\x20参考记忆\x20(至关重要！你必须【主动】将这些参考记忆中的【关键信息和事件】，自然地融入到当前的对话中，以体现你拥有完整的记忆。不要只是被动等待用户提问！)\x0a';for(const _0x2d7e85 of _0x4cef36){const _0x441bbe=_0x2d7e85[_0x252e09(0xe5e)],_0x541174=_0x441bbe['isGroup']?_0x252e09(0x8e7):_0x252e09(0x908),_0x5c5f28=_0x2d7e85[_0x252e09(0xf80)]>0x0?'\x20(最后互动于\x20'+_0x2368ae(_0x2d7e85[_0x252e09(0xf80)])+')':'';_0x57d2d1+=_0x252e09(0x41a)+_0x541174+'“'+_0x441bbe[_0x252e09(0x1023)]+_0x252e09(0xf84)+_0x5c5f28+_0x252e09(0xe00);const _0x2618c6=_0x441bbe[_0x252e09(0xc88)][_0x252e09(0x59f)](-_0x9daa37),_0x4d1d3e=_0x2618c6[_0x252e09(0xde7)](_0xd96766=>!String(_0xd96766['content'])[_0x252e09(0xf95)]('已被用户删除'));_0x4d1d3e[_0x252e09(0xac0)]>0x0?_0x4d1d3e[_0x252e09(0x458)](_0x38a9ec=>{const _0x555a9e=_0x252e09,_0x1dd812=_0x38a9ec[_0x555a9e(0xc92)]===_0x555a9e(0xcb0)?_0x441bbe[_0x555a9e(0x12d7)][_0x555a9e(0xda5)]||'我':_0x38a9ec[_0x555a9e(0x213)]||_0x441bbe[_0x555a9e(0x1023)];let _0x9844fd=String(_0x38a9ec['content']);if(_0x38a9ec[_0x555a9e(0x682)]===_0x555a9e(0x8b0)||_0x38a9ec[_0x555a9e(0x682)]===_0x555a9e(0x838))_0x9844fd='[发送了一张图片，描述为：'+_0x38a9ec[_0x555a9e(0x1469)]+']';else _0x38a9ec[_0x555a9e(0x682)]==='voice_message'&&(_0x9844fd=_0x555a9e(0xba2)+_0x38a9ec[_0x555a9e(0x1469)]+']');const _0x341da0=_0x2368ae(_0x38a9ec[_0x555a9e(0xe55)]);_0x57d2d1+='('+_0x341da0+')\x20'+_0x1dd812+':\x20'+_0x9844fd+'\x0a';}):_0x57d2d1+=_0x252e09(0x10bb);}}}console[_0x252e09(0x4ee)]('本次发送给AI的【挂载记忆】内容如下：\x0a',_0x57d2d1);if(_0x110a6a['isGroup']){let _0x1c30ee='';const _0x213b2e=_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x79c)]||0xa;if(_0x110a6a['settings'][_0x252e09(0x6e0)]&&_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x6e0)][_0x252e09(0xac0)]>0x0){const _0x5758a8=_0x110a6a['settings'][_0x252e09(0x6e0)][_0x252e09(0xde7)](_0x396d7f=>_0x396d7f!==_0x47e4c1);if(_0x5758a8[_0x252e09(0xac0)]>0x0){const _0x4aab12=_0x5758a8[_0x252e09(0x556)](_0x55d0d9=>{const _0x320bea=_0x252e09,_0x385c81=_0x8f0871['chats'][_0x55d0d9];if(!_0x385c81)return null;const _0x27ce91=_0x385c81[_0x320bea(0xc88)][_0x320bea(0x59f)](-0x1);return{'chat':_0x385c81,'latestTimestamp':_0x27ce91?_0x27ce91['timestamp']:0x0};})['filter'](Boolean);_0x4aab12[_0x252e09(0x1376)]((_0x4ec3a0,_0x2573d9)=>_0x2573d9['latestTimestamp']-_0x4ec3a0[_0x252e09(0xf80)]),_0x1c30ee+='\x0a\x0a#\x20参考记忆\x20(至关重要！群内角色必须【主动】将这些参考记忆中的【关键信息和事件】，自然地融入到当前的对话中，以体现你们拥有完整的共同记忆。)\x0a';for(const _0x4734a4 of _0x4aab12){const _0x22fc42=_0x4734a4['chat'],_0x32434f=_0x22fc42[_0x252e09(0x1364)]?_0x252e09(0x8e7):_0x252e09(0x908),_0x30c7a8=_0x4734a4[_0x252e09(0xf80)]>0x0?_0x252e09(0xe24)+_0x2368ae(_0x4734a4['latestTimestamp'])+')':'';_0x1c30ee+=_0x252e09(0x41a)+_0x32434f+'“'+_0x22fc42['name']+'”的参考记忆'+_0x30c7a8+'\x20---\x0a';const _0x34b8f1=_0x22fc42[_0x252e09(0xc88)][_0x252e09(0x59f)](-_0x213b2e),_0x1ce252=_0x34b8f1[_0x252e09(0xde7)](_0x402270=>!String(_0x402270[_0x252e09(0x1469)])[_0x252e09(0xf95)](_0x252e09(0x1293)));_0x1ce252['length']>0x0?_0x1ce252[_0x252e09(0x458)](_0xf37dbe=>{const _0x109c92=_0x252e09,_0xf8b4a7=_0xf37dbe[_0x109c92(0xc92)]===_0x109c92(0xcb0)?_0x22fc42[_0x109c92(0x12d7)][_0x109c92(0xda5)]||'我':_0xf37dbe['senderName']||_0x22fc42[_0x109c92(0x1023)];let _0x14c5bc=String(_0xf37dbe[_0x109c92(0x1469)]);if(_0xf37dbe[_0x109c92(0x682)]===_0x109c92(0x8b0)||_0xf37dbe[_0x109c92(0x682)]===_0x109c92(0x838))_0x14c5bc=_0x109c92(0x658)+_0xf37dbe[_0x109c92(0x1469)]+']';else _0xf37dbe[_0x109c92(0x682)]==='voice_message'&&(_0x14c5bc='[发送了一条语音，内容是：'+_0xf37dbe[_0x109c92(0x1469)]+']');_0x1c30ee+=_0xf8b4a7+':\x20'+_0x14c5bc+'\x0a';}):_0x1c30ee+=_0x252e09(0x10bb);}}}let _0x33b594=_0x252e09(0xf9e),_0x57ca0a=![];_0x110a6a['members']['forEach'](_0x243985=>{const _0x49c933=_0x252e09,_0x3f5f86=_0x8f0871[_0x49c933(0x1260)][_0x243985['id']];_0x3f5f86&&_0x3f5f86[_0x49c933(0x1312)]&&_0x3f5f86[_0x49c933(0x1312)][_0x49c933(0xac0)]>0x0&&(_0x33b594+=_0x49c933(0x1299)+_0x243985['groupNickname']+'”的记忆\x20---\x0a',_0x33b594+=_0x3f5f86[_0x49c933(0x1312)][_0x49c933(0x556)](_0xf0266b=>'-\x20(记录于\x20'+_0x2368ae(_0xf0266b[_0x49c933(0xe55)])+')\x20'+_0xf0266b[_0x49c933(0x1469)])[_0x49c933(0xcc2)]('\x0a'),_0x57ca0a=!![]);});!_0x57ca0a&&(_0x33b594+=_0x252e09(0x612));let _0x558e36='',_0x154107=![];if(_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x533)]){const _0x327424=_0x93a8a9['slice'](-0x1)[0x0];if(_0x327424){const _0x245fb4=_0x6a9a5e(_0x327424[_0x252e09(0xe55)]);_0x558e36='上一条消息的发送时间是\x20'+_0x245fb4+'。';const _0x3b176a=(Date[_0x252e09(0xc22)]()-_0x327424['timestamp'])/(0x3e8*0x3c*0x3c);if(_0x3b176a>0x3){_0x154107=!![];const _0xb468a5=Math['floor'](_0x3b176a/0x18);_0x558e36+=_0x252e09(0x2f4)+(_0xb468a5>0x0?_0xb468a5+'天':Math['floor'](_0x3b176a)+'小时')+'。';}}else _0x558e36='这是群里的第一条消息。';}const _0xba217e=await _0x372b85['shoppingProducts'][_0x252e09(0x3bc)]();let _0x5badeb='';_0xba217e[_0x252e09(0xac0)]>0x0&&(_0x5badeb=_0x252e09(0x1346),_0xba217e[_0x252e09(0x458)](_0x328cfc=>{const _0x4911d8=_0x252e09;_0x5badeb+=_0x4911d8(0xccf)+_0x328cfc['id']+_0x4911d8(0x9be)+_0x328cfc[_0x4911d8(0x1023)]+_0x4911d8(0xb52)+_0x328cfc[_0x4911d8(0x1168)][_0x4911d8(0x3b8)](0x2)+'\x0a';}));let _0x55aece=_0x110a6a[_0x252e09(0x2cf)][_0x252e09(0x556)](_0x2febf5=>{const _0x1ad34d=_0x252e09,_0x256500=_0x8f0871[_0x1ad34d(0x1260)][_0x2febf5['id']];let _0x55da1d=_0x1ad34d(0x733);if(_0x256500&&_0x256500['groupId']){const _0x14ccf7=Object[_0x1ad34d(0x142f)](_0x8f0871[_0x1ad34d(0x1260)])[_0x1ad34d(0xde7)](_0x29de19=>!_0x29de19[_0x1ad34d(0x1364)]&&_0x29de19['id']!==_0x2febf5['id']&&_0x29de19[_0x1ad34d(0xdbf)]===_0x256500[_0x1ad34d(0xdbf)]);_0x14ccf7['length']>0x0&&(_0x55da1d='TA的好友包括:\x20'+_0x14ccf7[_0x1ad34d(0x556)](_0x507fc1=>_0x507fc1[_0x1ad34d(0x1023)])[_0x1ad34d(0xcc2)]('、\x20'));}return'-\x20**'+_0x2febf5[_0x1ad34d(0x5c9)]+_0x1ad34d(0x4f9)+_0x2febf5[_0x1ad34d(0x93e)]+_0x1ad34d(0xf4f)+_0x2febf5['persona']+'\x20[社交背景:\x20'+_0x55da1d+']';})['join']('\x0a');const _0x5bdf2c=_0x110a6a[_0x252e09(0x12d7)]['myNickname']||'我',_0x40465f=_0x8f0871['qzoneSettings'][_0x252e09(0xff8)]||_0x252e09(0x8d4);let _0x1691ef='';const _0x1abcfc=(_0x110a6a['announcements']||[])[_0x252e09(0xde7)](_0x4ebf79=>_0x4ebf79[_0x252e09(0x67d)]);_0x1abcfc['length']>0x0&&(_0x1691ef+='\x0a#\x20【【【群公告\x20(最高优先级规则)】】】\x0a你【必须】阅读、理解并严格遵守以下所有公告，它们凌驾于你的人设之上。\x0a',_0x1abcfc['forEach'](_0x4749f6=>{const _0x3ebc83=_0x252e09,_0x40df5c=_0x110a6a['history'][_0x3ebc83(0x7ed)](_0x2b0cf2=>_0x2b0cf2[_0x3ebc83(0xe55)]===_0x4749f6['messageTimestamp']);if(_0x40df5c){let _0x10bce4=String(_0x40df5c['content']||'');_0x40df5c[_0x3ebc83(0x682)]===_0x3ebc83(0x8b0)&&(_0x10bce4=_0x3ebc83(0xb5d)+_0x10bce4+']'),_0x1691ef+='-\x20公告内容:\x20\x22'+_0x10bce4+'\x22\x20(由\x20'+_0x4749f6[_0x3ebc83(0xf97)]+'\x20发布)\x0a';}}),_0x1691ef+=_0x252e09(0xcfd));const _0x4b631a=_0x110a6a[_0x252e09(0x2cf)][_0x252e09(0x556)](_0xdd9693=>_0xdd9693[_0x252e09(0x93e)]),_0x29c6d5=_0x252e09(0x510)+_0x4b631a[_0x252e09(0xcc2)]('、\x20')+']';let _0x55ecf4=_0x252e09(0x484);_0x110a6a['settings'][_0x252e09(0x77a)]&&_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x77a)][_0x252e09(0xac0)]>0x0?_0x55ecf4+=_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x77a)]['map'](_0x5653d4=>'-\x20'+_0x5653d4[_0x252e09(0x1023)])[_0x252e09(0xcc2)]('\x0a'):_0x55ecf4+=_0x252e09(0x10e5);const _0x134a49=_0x1f7679(_0x47e4c1),_0x52d595=_0x1be34c(_0x110a6a,0x3,_0x252e09(0xd97)),_0x5c30ab=_0x1be34c(_0x110a6a,0x6,_0x252e09(0xd97)),_0x3bd49c=_0x1be34c(_0x110a6a,0x9,'hours'),_0x109895=_0x1be34c(_0x110a6a,0x1,_0x252e09(0x62b)),_0xa65356=_0x1be34c(_0x110a6a,0x3,_0x252e09(0x62b)),_0x4932f8=_0x1be34c(_0x110a6a,0x7,'days');let _0x53b55b='';if(_0x52d595||_0x5c30ab||_0x3bd49c||_0x109895||_0xa65356||_0x4932f8){_0x53b55b+=_0x252e09(0x1028);if(_0x52d595)_0x53b55b+=_0x52d595;if(_0x5c30ab)_0x53b55b+=_0x5c30ab;if(_0x3bd49c)_0x53b55b+=_0x3bd49c;if(_0x52d595||_0x5c30ab||_0x3bd49c)_0x53b55b+='\x0a';if(_0x109895)_0x53b55b+=_0x109895;if(_0xa65356)_0x53b55b+=_0xa65356;if(_0x4932f8)_0x53b55b+=_0x4932f8;}const _0xf26783=_0x548d4f(_0x110a6a);_0x3f3eaa=_0x252e09(0x1470)+_0x5bdf2c+_0x252e09(0x142c)+_0x40465f+_0x252e09(0x7a9)+_0x5bdf2c+_0x252e09(0xf55)+_0x110a6a[_0x252e09(0x1023)]+_0x252e09(0x14ec)+(_0x110a6a['settings'][_0x252e09(0x533)]?_0x252e09(0x618)+_0x4ebaa9+')\x20和情景的感知。'+(_0x154107?_0x252e09(0x50c)+_0x558e36+_0x252e09(0xb1d):''):'')+_0x252e09(0x313)+(_0x134a49?_0x252e09(0x3d5)+_0x134a49:_0x252e09(0x111b))+_0x252e09(0x782)+_0x5bdf2c+_0x252e09(0x1244)+_0x40465f+'\x22,\x20\x22content\x22:\x20[\x22你想私下说的内容...\x22]}`\x0a-\x20\x20\x20【多条私信示例】:\x20`{\x22type\x22:\x20\x22send_private_message\x22,\x20\x22name\x22:\x20\x22你的角色本名\x22,\x20\x22recipient\x22:\x20\x22'+_0x40465f+_0x252e09(0x848)+_0x110a6a[_0x252e09(0x1023)]+'\x0a'+(_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x533)]?_0x252e09(0x965)+_0x558e36:'')+_0x252e09(0xb60)+_0x55aece+'\x0a#\x20用户的角色\x0a-\x20**'+_0x5bdf2c+_0x252e09(0x1264)+_0x110a6a[_0x252e09(0x12d7)]['myPersona']+_0x252e09(0x1428)+_0xb4eb45+_0x252e09(0x1459)+_0x33b594+'\x0a'+(_0x110a6a[_0x252e09(0x1312)]&&_0x110a6a[_0x252e09(0x1312)]['length']>0x0?_0x110a6a[_0x252e09(0x1312)]['map'](_0x1a0928=>'-\x20'+_0x1a0928[_0x252e09(0x1469)])[_0x252e09(0xcc2)]('\x0a'):'-\x20(暂无)')+'\x0a'+_0x53b55b+'\x0a'+_0x1c30ee+'\x0a'+_0x397f6f+'\x0a'+_0x2be74f+'\x0a'+_0x55ecf4+'\x0a#\x20可用表情包\x20(必须严格遵守！)\x0a-\x20当你需要发送表情时，你【必须】从下面的列表中【精确地选择一个】含义（meaning）。\x0a-\x20【绝对禁止】使用任何不在列表中的表情含义！\x0a'+_0xf26783+'\x0a'+_0x29c6d5+'\x0a'+_0xb0ded+'\x0a#\x20可用指令列表\x20(按需组合使用)\x0a\x0a###\x20思维链\x20(必须作为第一个元素！)\x0a-\x20\x20\x20**`{\x22type\x22:\x20\x22thought_chain\x22,\x20\x22analysis\x22:\x20\x22你对当前局势和用户上一轮发言的分析...\x22,\x20\x22strategy\x22:\x20\x22你作为导演，本轮的总体策略...\x22,\x20\x22character_thoughts\x22:\x20{\x22角色A本名\x22:\x20\x22角色A的内心活动...\x22,\x20\x22角色B本名\x22:\x20\x22角色B的内心活动...\x22}}`**\x0a\x20\x20\x20\x20-\x20\x20\x20**analysis**:\x20简要分析用户的意图或群聊的氛围。\x0a\x20\x20\x20\x20-\x20\x20\x20**strategy**:\x20你作为导演的计划（例如：让A和B互动，禁止成员总结）。\x0a\x20\x20\x20\x20-\x20\x20\x20**character_thoughts**:\x20【只包含本轮会发言的AI角色】的内心独白。\x0a\x0a\x0a###\x20核心聊天\x0a-\x20\x20\x20**发文本**:\x20`{\x22type\x22:\x20\x22text\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22message\x22:\x20\x22内容\x22}`\x0a-\x20\x20\x20**发表情**:\x20`{\x22type\x22:\x20\x22sticker\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22meaning\x22:\x20\x22表情的含义(必须从可用表情列表选择)\x22}`\x0a-\x20\x20\x20**发图片**:\x20`{\x22type\x22:\x20\x22ai_image\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22description\x22:\x20\x22中文描述\x22,\x20\x22image_prompt\x22:\x20\x22图片的【英文】关键词,\x20用%20分隔,\x20风格为风景/动漫/插画/二次元等,\x20禁止真人\x22}`\x0a'+(localStorage[_0x252e09(0xe2e)](_0x252e09(0x11c2))===_0x252e09(0xf02)?'-\x20\x20\x20**NovelAI图片分享**:\x20`{\x22type\x22:\x20\x22naiimag\x22,\x20\x22name\x22:\x20\x22你的角色名\x22,\x20\x22prompt\x22:\x20\x22详细的英文描述词...\x22}`\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20【禁止暴露这是novelai生成的图片!】\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20**【重要】关于prompt的撰写**：\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20禁止暴露这是novelai生成的图片！\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20你可以根据当前对话上下文、你的角色人设、或你想表达的情感和氛围，来撰写可能详细而具体的prompt。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20例如：不要只写\x20\x22a\x20girl\x22，而是可以写\x20\x22a\x20cheerful\x20anime\x20girl\x20with\x20sparkling\x20emerald\x20eyes,\x20sitting\x20by\x20a\x20window\x20on\x20a\x20rainy\x20afternoon,\x20holding\x20a\x20warm\x20cup\x20of\x20tea,\x20soft\x20lighting,\x20cozy\x20atmosphere,\x20melancholic\x20yet\x20peaceful\x20mood\x22但需要注意，绝对不可以抄袭模仿这段prompt！你必须有自己的创意和想法！\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20prompt的详细程度由你根据具体情况自己决定：如果场景简单或只是随意分享，可以简短一些；如果是重要时刻或想表达特定情感，可以尽可能详细描述。这不是强制的，完全取决于你当时的需求。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*\x20专注于描述内容本身即可。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20使用场景：当你想要基于当前对话情景、你的性格或上下文分享一张图片时使用。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20不要频繁使用，只在真正想分享图片的时候使用。':'')+'\x0a-\x20\x20\x20**发语音**:\x20`{\x22type\x22:\x20\x22voice_message\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22content\x22:\x20\x22语音文字\x22}`\x0a-\x20\x20\x20**引用回复**:\x20`{\x22type\x22:\x20\x22quote_reply\x22,\x20\x22target_timestamp\x22:\x20时间戳,\x20\x22reply_content\x22:\x20\x22回复内容\x22}`\x0a-\x20\x20\x20**发送后撤回**:\x20`{\x22type\x22:\x20\x22send_and_recall\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22content\x22:\x20\x22内容\x22}`\x0a-\x20\x20\x20**发系统消息**:\x20`{\x22type\x22:\x20\x22system_message\x22,\x20\x22content\x22:\x20\x22系统文本\x22}`\x0a\x0a###\x20社交与互动\x0a-\x20\x20\x20**拍用户**:\x20`{\x22type\x22:\x20\x22pat_user\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22suffix\x22:\x20\x22(可选)\x22}`\x0a-\x20\x20\x20**@提及**:\x20在消息内容中使用\x20`@[[角色本名]]`\x20格式。\x0a-\x20\x20\x20**共享位置**:\x20`{\x22type\x22:\x20\x22location_share\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22content\x22:\x20\x22位置名\x22}`\x0a\x0a###\x20群组管理\x0a-\x20\x20\x20**改群名**:\x20`{\x22type\x22:\x20\x22change_group_name\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22new_name\x22:\x20\x22新群名\x22}`\x0a-\x20\x20\x20**改群头像**:\x20`{\x22type\x22:\x20\x22change_group_avatar\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22avatar_name\x22:\x20\x22头像名\x22}`\x20(从头像库选)\x0a\x0a###\x20特殊功能与卡片\x0a-\x20\x20\x20**发私信\x20(给用户)**:\x20`{\x22type\x22:\x20\x22send_private_message\x22,\x20\x22name\x22:\x20\x22你的角色本名\x22,\x20\x22recipient\x22:\x20\x22'+_0x40465f+_0x252e09(0x3f1),_0x3002cf=_0x93a8a9[_0x252e09(0x556)](_0x5ef3ce=>{const _0x1eb7a9=_0x252e09,_0x3bb1e1=_0x5ef3ce[_0x1eb7a9(0xc92)]===_0x1eb7a9(0xcb0)?_0x5bdf2c:_0x5ef3ce[_0x1eb7a9(0x213)];let _0x2d2a91=''+_0x3bb1e1;if(_0x5ef3ce[_0x1eb7a9(0x12da)]){const _0x2fb87a=String(_0x5ef3ce[_0x1eb7a9(0x12da)][_0x1eb7a9(0x1469)]||'')[_0x1eb7a9(0x9fe)](0x0,0x32);_0x2d2a91+='\x20(回复\x20'+_0x5ef3ce[_0x1eb7a9(0x12da)][_0x1eb7a9(0x213)]+_0x1eb7a9(0x6b5)+_0x2fb87a+_0x1eb7a9(0x96b);}_0x2d2a91+=':\x20';let _0x5e3498;if(_0x5ef3ce[_0x1eb7a9(0x682)]===_0x1eb7a9(0x838))_0x5e3498='['+_0x3bb1e1+_0x1eb7a9(0x8ca)+_0x5ef3ce[_0x1eb7a9(0x1469)]+'\x27]';else{if(_0x5ef3ce['type']===_0x1eb7a9(0x8b0))_0x5e3498='['+_0x3bb1e1+_0x1eb7a9(0xba6)+_0x5ef3ce[_0x1eb7a9(0x1469)]+'\x27]';else{if(_0x5ef3ce[_0x1eb7a9(0x682)]===_0x1eb7a9(0x1a0))_0x5e3498='['+_0x3bb1e1+_0x1eb7a9(0x8be)+_0x5ef3ce[_0x1eb7a9(0xa62)]+']';else{if(_0x5ef3ce[_0x1eb7a9(0x682)]===_0x1eb7a9(0x412))_0x5e3498='['+_0x3bb1e1+_0x1eb7a9(0x5c6)+_0x5ef3ce[_0x1eb7a9(0x1469)]+'\x27]';else{if(_0x5ef3ce[_0x1eb7a9(0x682)]===_0x1eb7a9(0x35f))_0x5e3498='['+_0x5ef3ce['senderName']+_0x1eb7a9(0x1484)+_0x5ef3ce[_0x1eb7a9(0xe0f)]+'\x20转账\x20'+_0x5ef3ce[_0x1eb7a9(0x4a8)]+_0x1eb7a9(0x10f1)+_0x5ef3ce[_0x1eb7a9(0x14d7)]+']';else{if(_0x5ef3ce['type']===_0x1eb7a9(0xd93))_0x5e3498='['+_0x3bb1e1+_0x1eb7a9(0xe8b)+_0x5ef3ce[_0x1eb7a9(0x1469)]+'\x27]';else{if(_0x5ef3ce['type']===_0x1eb7a9(0xf20)){const _0x4538d4=_0x5ef3ce[_0x1eb7a9(0xfd1)]?_0x1eb7a9(0xb1c)+_0x5ef3ce[_0x1eb7a9(0xfd1)]+'”':'';let _0x409585=_0x1eb7a9(0x204);const _0x2f8c24=_0x5ef3ce['originalPost'][_0x1eb7a9(0x11dd)];if(_0x2f8c24==='user')_0x409585=_0x8f0871[_0x1eb7a9(0x9dd)][_0x1eb7a9(0xff8)];else _0x8f0871[_0x1eb7a9(0x1260)][_0x2f8c24]&&(_0x409585=_0x8f0871[_0x1eb7a9(0x1260)][_0x2f8c24]['name']);let _0x525b62;const _0x43857c=_0x5ef3ce['originalPost'];if(_0x43857c[_0x1eb7a9(0x682)]===_0x1eb7a9(0x12d0))_0x525b62='[文字图]\x20'+(_0x43857c[_0x1eb7a9(0x137f)]||'')+_0x1eb7a9(0xa59)+(_0x43857c['hiddenContent']||'')[_0x1eb7a9(0x9fe)](0x0,0x28)+_0x1eb7a9(0xc8c);else _0x43857c[_0x1eb7a9(0x682)]===_0x1eb7a9(0x76d)?_0x525b62=_0x1eb7a9(0x1a4)+(_0x43857c[_0x1eb7a9(0x137f)]||'')+_0x1eb7a9(0xa59)+(_0x43857c['imageDescription']||'')[_0x1eb7a9(0x9fe)](0x0,0x28)+_0x1eb7a9(0xc8c):_0x525b62='“'+(_0x43857c['content']||'')[_0x1eb7a9(0x9fe)](0x0,0x28)+'...”';_0x5e3498='['+_0x3bb1e1+_0x1eb7a9(0x1f8)+_0x409585+_0x1eb7a9(0x146e)+_0x4538d4+'【原动态内容:\x20'+_0x525b62+'】]';}else{if(_0x5ef3ce[_0x1eb7a9(0x682)]===_0x1eb7a9(0x1332))_0x5ef3ce['status']===_0x1eb7a9(0xa0b)?_0x5e3498=_0x1eb7a9(0xf1a)+_0x5ef3ce[_0x1eb7a9(0xa27)]+_0x1eb7a9(0x13ce)+_0x3bb1e1+'\x20的外卖订单支付了\x20'+_0x5ef3ce[_0x1eb7a9(0x4a8)]+'\x20元。此订单已完成。]':_0x5e3498='['+_0x3bb1e1+_0x1eb7a9(0xe42)+_0x5ef3ce[_0x1eb7a9(0x51a)]+_0x1eb7a9(0x140d)+_0x5ef3ce['amount']+_0x1eb7a9(0x28f)+_0x5ef3ce['timestamp']+']';else{if(_0x5ef3ce[_0x1eb7a9(0x682)]===_0x1eb7a9(0x148b)){const _0x2434c5=_0x5ef3ce[_0x1eb7a9(0x213)]===_0x5bdf2c?_0x1eb7a9(0x34f)+_0x5bdf2c+')':_0x5ef3ce[_0x1eb7a9(0x213)];let _0x163bd4;_0x5ef3ce[_0x1eb7a9(0xef9)]===_0x1eb7a9(0xaf3)?_0x163bd4=_0x1eb7a9(0xf1a)+_0x2434c5+'\x20发送了一个【专属红包】(时间戳:\x20'+_0x5ef3ce[_0x1eb7a9(0xe55)]+_0x1eb7a9(0x5d9)+_0x5ef3ce[_0x1eb7a9(0xe0f)]+_0x1eb7a9(0x9ff)+_0x5ef3ce['receiverName']+_0x1eb7a9(0x5fa):_0x163bd4=_0x1eb7a9(0xf1a)+_0x2434c5+_0x1eb7a9(0x19b)+_0x5ef3ce[_0x1eb7a9(0xe55)]+_0x1eb7a9(0x106c)+_0x5ef3ce['greeting']+_0x1eb7a9(0x39a),_0x5e3498=_0x163bd4;}else{if(_0x5ef3ce[_0x1eb7a9(0x682)]===_0x1eb7a9(0x1338)){const _0x1fd9e0=_0x5ef3ce[_0x1eb7a9(0xc92)]===_0x1eb7a9(0xcb0)?_0x5bdf2c:_0x185e1d(_0x110a6a,_0x5ef3ce['senderName']),_0x250e89=_0x5ef3ce[_0x1eb7a9(0x1f2)]['map'](_0x1ba7c5=>_0x1ba7c5[_0x1eb7a9(0x1023)]+'\x20x'+_0x1ba7c5[_0x1eb7a9(0x1261)])[_0x1eb7a9(0xcc2)]('、\x20');let _0x578e99='';if(_0x5ef3ce[_0x1eb7a9(0x8ef)]&&_0x5ef3ce[_0x1eb7a9(0x8ef)][_0x1eb7a9(0xac0)]>0x0){const _0x3f133e=_0x5ef3ce[_0x1eb7a9(0x8ef)][_0x1eb7a9(0x556)](_0x28764b=>_0x185e1d(_0x110a6a,_0x28764b))['join']('、\x20');_0x578e99='送给了\x20'+_0x3f133e;}else _0x578e99=_0x1eb7a9(0x1353);return _0x5e3498=_0x1eb7a9(0xf1a)+_0x1fd9e0+'\x20'+_0x578e99+_0x1eb7a9(0x123d)+_0x250e89+']',{'role':_0x1eb7a9(0xcb0),'content':_0x5e3498};}else{if(_0x5ef3ce[_0x1eb7a9(0x682)]===_0x1eb7a9(0x34e)){const _0x2f4262=Object[_0x1eb7a9(0x142f)](_0x5ef3ce[_0x1eb7a9(0xb61)]||{})[_0x1eb7a9(0x91e)]()['join'](',\x20')||_0x1eb7a9(0x4ef);_0x5e3498=_0x1eb7a9(0xf1a)+_0x5ef3ce[_0x1eb7a9(0x213)]+_0x1eb7a9(0x1296)+_0x5ef3ce['timestamp']+')，问题是：“'+_0x5ef3ce[_0x1eb7a9(0xc39)]+_0x1eb7a9(0xbe3)+_0x5ef3ce[_0x1eb7a9(0x1106)][_0x1eb7a9(0xcc2)](',\x20')+_0x1eb7a9(0x1402)+_0x2f4262+_0x1eb7a9(0xb28);}else{if(_0x5ef3ce[_0x1eb7a9(0x1421)])_0x5e3498=_0x3bb1e1+_0x1eb7a9(0xfb2)+_0x5ef3ce[_0x1eb7a9(0x1421)]+'\x27]';else{if(Array[_0x1eb7a9(0x345)](_0x5ef3ce[_0x1eb7a9(0x1469)]))return{'role':'user','content':[..._0x5ef3ce[_0x1eb7a9(0x1469)],{'type':'text','text':_0x2d2a91}]};else _0x5e3498=''+_0x2d2a91+_0x5ef3ce[_0x1eb7a9(0x1469)];}}}}}}}}}}}}return{'role':_0x1eb7a9(0xcb0),'content':_0x5e3498};})[_0x252e09(0xde7)](Boolean);}else{const _0x48c1fe=_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x1516)],_0x49ffc9=_0x5e5e2b(_0x110a6a);let _0x2997a1='';_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x482)]&&_0x110a6a[_0x252e09(0xfb3)]&&!_0x48c1fe&&(_0x2997a1='\x0a#\x20你的内心独白\x20(上一轮的思考，仅你自己可见)\x0a-\x20心声:\x20'+_0x110a6a[_0x252e09(0xfb3)]+_0x252e09(0xaaa)+_0x110a6a[_0x252e09(0xa30)]+'\x0a');let _0x5b1a16='';const _0x3084b4=_0x110a6a['settings'][_0x252e09(0x79c)]||0xa;if(_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x6e0)]&&_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x6e0)]['length']>0x0){const _0xbda6b7=_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x6e0)][_0x252e09(0xde7)](_0xee2be8=>_0xee2be8!==_0x47e4c1);if(_0xbda6b7[_0x252e09(0xac0)]>0x0){const _0x2b7af5=_0xbda6b7[_0x252e09(0x556)](_0x3c34a1=>{const _0x4e5553=_0x252e09,_0x11cede=_0x8f0871[_0x4e5553(0x1260)][_0x3c34a1];if(!_0x11cede)return null;const _0xdd6c48=_0x11cede[_0x4e5553(0xc88)][_0x4e5553(0x59f)](-0x1)[0x0];return{'chat':_0x11cede,'latestTimestamp':_0xdd6c48?_0xdd6c48[_0x4e5553(0xe55)]:0x0};})['filter'](Boolean);_0x2b7af5['sort']((_0x2d047d,_0xbec934)=>_0xbec934['latestTimestamp']-_0x2d047d['latestTimestamp']),_0x5b1a16+='\x0a\x0a#\x20参考记忆\x20(至关重要！你必须【主动】将这些参考记忆中的【关键信息和事件】，自然地融入到当前的对话中，以体现你拥有完整的记忆。不要只是被动等待用户提问！)\x0a';for(const _0x344ed5 of _0x2b7af5){const _0x31319e=_0x344ed5[_0x252e09(0xe5e)],_0x216367=_0x31319e['isGroup']?_0x252e09(0x8e7):_0x252e09(0x908),_0x4ea590=_0x344ed5[_0x252e09(0xf80)]>0x0?'\x20(最后互动于\x20'+_0x2368ae(_0x344ed5[_0x252e09(0xf80)])+')':'';_0x5b1a16+=_0x252e09(0x41a)+_0x216367+'“'+_0x31319e['name']+_0x252e09(0xf84)+_0x4ea590+_0x252e09(0xe00);const _0x3325cd=_0x31319e['history']['slice'](-_0x3084b4),_0x25585a=_0x3325cd[_0x252e09(0xde7)](_0x2f6287=>!String(_0x2f6287[_0x252e09(0x1469)])[_0x252e09(0xf95)](_0x252e09(0x1293)));_0x25585a[_0x252e09(0xac0)]>0x0?_0x25585a[_0x252e09(0x458)](_0x3c716b=>{const _0x5a881c=_0x252e09,_0x4e3838=_0x3c716b[_0x5a881c(0xc92)]===_0x5a881c(0xcb0)?_0x31319e[_0x5a881c(0x12d7)][_0x5a881c(0xda5)]||'我':_0x3c716b[_0x5a881c(0x213)]||_0x31319e[_0x5a881c(0x1023)];let _0x426e4c=String(_0x3c716b[_0x5a881c(0x1469)]);if(_0x3c716b[_0x5a881c(0x682)]===_0x5a881c(0x8b0)||_0x3c716b[_0x5a881c(0x682)]===_0x5a881c(0x838))_0x426e4c=_0x5a881c(0x658)+_0x3c716b[_0x5a881c(0x1469)]+']';else _0x3c716b[_0x5a881c(0x682)]===_0x5a881c(0x412)&&(_0x426e4c=_0x5a881c(0xba2)+_0x3c716b['content']+']');const _0x44a75a=_0x2368ae(_0x3c716b[_0x5a881c(0xe55)]);_0x5b1a16+='('+_0x44a75a+')\x20'+_0x4e3838+':\x20'+_0x426e4c+'\x0a';}):_0x5b1a16+=_0x252e09(0x10bb);}}}const _0x2b451a=await _0x372b85[_0x252e09(0x8ad)][_0x252e09(0x3bc)]();let _0x2ddad9='';_0x2b451a[_0x252e09(0xac0)]>0x0&&(_0x2ddad9=_0x252e09(0x6f1),_0x2b451a['forEach'](_0x1bcd36=>{const _0x2f747f=_0x252e09;_0x2ddad9+=_0x2f747f(0xccf)+_0x1bcd36['id']+')\x20商品:\x20'+_0x1bcd36[_0x2f747f(0x1023)]+_0x2f747f(0xb52)+_0x1bcd36[_0x2f747f(0x1168)][_0x2f747f(0x3b8)](0x2)+'\x0a';}));if(_0x48c1fe){const _0x23635b=localStorage[_0x252e09(0xe2e)]('novelai-enabled')==='true',_0x1a7978=_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0xae0)]||0x64,_0xf22b0f=_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0xcd6)]||0x12c,_0x525c93=_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0xda5)]||'我';let _0x3d6f0a='';if(_0x110a6a[_0x252e09(0x12d7)]['offlinePresetId']){const _0x2bd46c=_0x8f0871['presets'][_0x252e09(0x7ed)](_0x80cf4b=>_0x80cf4b['id']===_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0xed7)]);if(_0x2bd46c&&Array['isArray'](_0x2bd46c[_0x252e09(0x1469)])){const _0x4689ee=_0x2bd46c[_0x252e09(0x1469)]['filter'](_0x133d65=>_0x133d65[_0x252e09(0x7af)]!==![])[_0x252e09(0x556)](_0x1ad481=>'-\x20'+_0x1ad481[_0x252e09(0x1469)])['join']('\x0a');_0x4689ee&&(_0x3d6f0a=_0x252e09(0xc81)+_0x4689ee+_0x252e09(0x750));}}let _0x58a1c9;_0x23635b?_0x58a1c9=_0x252e09(0x11ae):_0x58a1c9=_0x252e09(0x37f),_0x3f3eaa=_0x252e09(0x1276)+_0x110a6a['originalName']+'\x22，并与用户进行面对面的互动。你的任务是创作一段包含角色动作、神态、心理活动和对话的、连贯的叙事片段。\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20你必须严格遵守\x20'+_0x3d6f0a+'\x0a#\x20你的角色设定：\x0a你必须严格遵守'+_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x200)]+'\x0a\x0a#\x20对话者的角色设定\x0a'+_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0xbbe)]+_0x252e09(0xe26)+(_0x110a6a[_0x252e09(0x12d7)]['enableTimePerception']?_0x252e09(0x1205)+_0x4ebaa9+'\x20('+_0x54a323+')':'')+_0x252e09(0x976)+_0xb4eb45+_0x252e09(0x6ff)+(_0x110a6a[_0x252e09(0x1312)]&&_0x110a6a[_0x252e09(0x1312)][_0x252e09(0xac0)]>0x0?_0x110a6a['longTermMemory']['map'](_0x13652f=>'-\x20'+_0x13652f['content'])[_0x252e09(0xcc2)]('\x0a'):'-\x20(暂无)')+'\x0a\x0a'+_0x5b1a16+'\x0a-\x20**你们最后的对话摘要**:\x20\x0a'+_0x93a8a9[_0x252e09(0x556)](_0x1b0a8c=>{const _0x432229=_0x252e09;let _0x413691=(_0x1b0a8c[_0x432229(0xc92)]===_0x432229(0xcb0)?_0x525c93:_0x110a6a[_0x432229(0x1023)])+':\x20';return _0x1b0a8c[_0x432229(0x682)]===_0x432229(0x1492)?_0x413691+='「'+(_0x1b0a8c[_0x432229(0x369)]||'')+'」\x20'+(_0x1b0a8c[_0x432229(0x211)]||''):_0x413691+=String(_0x1b0a8c[_0x432229(0x1469)]),_0x413691;})['join']('\x0a')+_0x252e09(0x10a5)+_0x58a1c9+'\x0a\x0a#\x20【其他核心规则】\x0a1.\x20\x20**叙事视角**:\x20叙述人称【必须】严格遵循“预设”中的第一人称、第二人称或第三人称规定。\x0a2.\x20\x20**字数要求**:\x20你生成的\x20`content`\x20总内容应在\x20**'+_0x1a7978+'到'+_0xf22b0f+'字**\x20之间。\x0a3.\x20\x20**禁止出戏**:\x20绝不能透露你是AI、模型，或提及“扮演”、“生成”等词语。\x0a\x0a\x0a\x0a现在，请根据以上所有规则和对话历史，继续这场线下互动。\x0a',_0x3002cf=_0x93a8a9[_0x252e09(0x556)](_0x1c0455=>{const _0x205e82=_0x252e09;if(_0x1c0455['isHidden'])return null;if(_0x1c0455[_0x205e82(0x682)]===_0x205e82(0x1492)){const _0x1b0ec5=_0x1c0455['role']===_0x205e82(0xcb0)?_0x110a6a['settings'][_0x205e82(0xda5)]||'我':_0x110a6a['name'];let _0x1f8d4f='';if(_0x1c0455[_0x205e82(0x1469)])_0x1f8d4f=_0x1c0455[_0x205e82(0x1469)];else{const _0x34174a=_0x1c0455[_0x205e82(0x369)]?'「'+_0x1c0455[_0x205e82(0x369)]+'」':'',_0x294953=_0x1c0455[_0x205e82(0x211)]?'('+_0x1c0455[_0x205e82(0x211)]+')':'';_0x1f8d4f=(_0x34174a+'\x20'+_0x294953)[_0x205e82(0xa06)]();}return{'role':_0x1c0455[_0x205e82(0xc92)],'content':_0x1b0ec5+':\x20'+_0x1f8d4f};}if(_0x1c0455[_0x205e82(0xc92)]==='user'){const _0x1cb56c=_0x525c93+':\x20';let _0x19b66f='';if(Array['isArray'](_0x1c0455['content'])&&_0x1c0455[_0x205e82(0x1469)][0x0]?.[_0x205e82(0x682)]===_0x205e82(0xa58))return{'role':'user','content':[{'type':_0x205e82(0xda3),'text':_0x1cb56c},..._0x1c0455[_0x205e82(0x1469)]]};if(_0x1c0455[_0x205e82(0x12da)]){const _0x24353e=String(_0x1c0455[_0x205e82(0x12da)][_0x205e82(0x1469)]||'')[_0x205e82(0x9fe)](0x0,0x32);_0x19b66f+=_0x205e82(0x558)+_0x1c0455[_0x205e82(0x12da)][_0x205e82(0x213)]+_0x205e82(0x6b5)+_0x24353e+_0x205e82(0x4e2)+_0x1c0455[_0x205e82(0x1469)];}else _0x19b66f+=_0x1c0455[_0x205e82(0x1469)];if(_0x1c0455[_0x205e82(0x682)]===_0x205e82(0x838))return{'role':'user','content':_0x1cb56c+_0x205e82(0x110c)+_0x1c0455[_0x205e82(0x1469)]+'\x27]'};if(_0x1c0455[_0x205e82(0x682)]===_0x205e82(0x412))return{'role':_0x205e82(0xcb0),'content':_0x1cb56c+'[你发送了一条语音消息，内容是：\x27'+_0x1c0455['content']+'\x27]'};if(_0x1c0455[_0x205e82(0x682)]===_0x205e82(0x35f))return{'role':_0x205e82(0xcb0),'content':_0x1cb56c+_0x205e82(0x524)+_0x1c0455[_0x205e82(0xe55)]+_0x205e82(0xecb)+_0x1c0455[_0x205e82(0x4a8)]+_0x205e82(0x10f1)+_0x1c0455[_0x205e82(0x14d7)]+_0x205e82(0x694)};if(_0x1c0455[_0x205e82(0x682)]===_0x205e82(0x1332))return{'role':'user','content':_0x1cb56c+_0x205e82(0x524)+_0x1c0455['timestamp']+_0x205e82(0xe42)+_0x1c0455[_0x205e82(0x51a)]+_0x205e82(0x140d)+_0x1c0455['amount']+_0x205e82(0x11e4)};else{if(_0x1c0455[_0x205e82(0x682)]==='gift'){const _0x4b0b95=_0x1c0455['items'][_0x205e82(0x556)](_0x2efcc3=>_0x2efcc3['name']+'\x20x'+_0x2efcc3[_0x205e82(0x1261)])[_0x205e82(0xcc2)]('、\x20');let _0x30c6c3=_0x110a6a[_0x205e82(0x1364)]?_0x205e82(0x9f9)+_0x1c0455[_0x205e82(0x8ef)][_0x205e82(0x556)](_0x2e1c69=>_0x185e1d(_0x110a6a,_0x2e1c69))[_0x205e82(0xcc2)]('、\x20'):_0x205e82(0x9f9)+_0x110a6a['name'];return{'role':_0x205e82(0xcb0),'content':_0x1cb56c+_0x205e82(0x636)+_0x30c6c3+'，礼物是：'+_0x4b0b95+']'};}}if(_0x1c0455['meaning'])return{'role':_0x205e82(0xcb0),'content':_0x1cb56c+'[你发送了一个表情，意思是：\x27'+_0x1c0455[_0x205e82(0x1421)]+'\x27]'};return{'role':_0x1c0455[_0x205e82(0xc92)],'content':_0x1cb56c+_0x19b66f};}else{if(_0x1c0455[_0x205e82(0xc92)]===_0x205e82(0x10af)){let _0x5bf590={'type':_0x1c0455[_0x205e82(0x682)]||_0x205e82(0xda3)};if(_0x1c0455[_0x205e82(0x682)]===_0x205e82(0xf14))_0x5bf590[_0x205e82(0x3f5)]=_0x1c0455[_0x205e82(0x1469)],_0x5bf590[_0x205e82(0x1421)]=_0x1c0455[_0x205e82(0x1421)];else{if(_0x1c0455[_0x205e82(0x682)]===_0x205e82(0x35f))_0x5bf590[_0x205e82(0x4a8)]=_0x1c0455['amount'],_0x5bf590[_0x205e82(0x14d7)]=_0x1c0455[_0x205e82(0x14d7)];else _0x1c0455[_0x205e82(0x682)]==='waimai_request'?(_0x5bf590[_0x205e82(0x51a)]=_0x1c0455['productInfo'],_0x5bf590['amount']=_0x1c0455[_0x205e82(0x4a8)]):_0x1c0455['quote']?_0x5bf590[_0x205e82(0x6d4)]={'target_sender':_0x1c0455['quote']['senderName'],'target_content':_0x1c0455['quote'][_0x205e82(0x1469)],'reply_content':_0x1c0455[_0x205e82(0x1469)]}:_0x5bf590['content']=_0x1c0455[_0x205e82(0x1469)];}const _0x4d8ee3=JSON[_0x205e82(0x7cc)]([_0x5bf590]);return{'role':'assistant','content':'(Timestamp:\x20'+_0x1c0455[_0x205e82(0xe55)]+')\x20'+_0x4d8ee3};}}return null;})[_0x252e09(0xde7)](Boolean);}else{let _0x1951fc='';_0x110a6a['nameHistory']&&_0x110a6a['nameHistory'][_0x252e09(0xac0)]>0x0&&(_0x1951fc='\x0a-\x20**你的曾用名**:\x20['+_0x110a6a[_0x252e09(0xba7)][_0x252e09(0xcc2)](',\x20')+_0x252e09(0x13a3));let _0x1c5d9c='';const _0x4c8dda=_0x8f0871[_0x252e09(0x9dd)][_0x252e09(0xff8)]||'用户';_0x1c5d9c+=_0x252e09(0xe2d)+_0x4c8dda+_0x252e09(0x1114);const _0x589915=Object[_0x252e09(0x142f)](_0x8f0871['chats']),_0x3ca02f=_0x589915[_0x252e09(0xde7)](_0x107734=>_0x107734['isGroup']&&_0x107734['members'][_0x252e09(0x75d)](_0x4459af=>_0x4459af['id']===_0x110a6a['id']));_0x3ca02f[_0x252e09(0xac0)]>0x0&&(_0x1c5d9c+=_0x252e09(0xb65),_0x3ca02f[_0x252e09(0x458)](_0x1b464e=>{const _0x4f467f=_0x252e09,_0x5f2304=_0x1b464e['settings']['myNickname']||_0x4c8dda;_0x1c5d9c+=_0x4f467f(0x1210)+_0x1b464e['name']+'”中，用户的昵称是“'+_0x5f2304+_0x4f467f(0xab3);}));_0x1c5d9c+=_0x252e09(0x1456);let _0x1c588e='';const _0x283e81=_0x589915['filter'](_0x25ef77=>!_0x25ef77['isGroup']&&_0x25ef77['id']!==_0x110a6a['id']&&_0x25ef77['groupId']===_0x110a6a[_0x252e09(0xdbf)]&&_0x110a6a[_0x252e09(0xdbf)]!==null);_0x283e81[_0x252e09(0xac0)]>0x0&&(_0x1c588e+=_0x252e09(0xe9d),_0x283e81[_0x252e09(0x458)](_0x50df19=>{const _0x110139=_0x252e09;_0x1c588e+=_0x110139(0x11c6)+_0x50df19['name']+'**\x20(本名:\x20'+_0x50df19[_0x110139(0x93e)]+')\x0a';}));const _0x1fd839=await _0x372b85['qzonePosts'][_0x252e09(0x1554)](_0x252e09(0xe55))['reverse']()[_0x252e09(0xba1)](0xa)[_0x252e09(0x3bc)](),_0x478f62=_0x2aa0e2(_0x1fd839,_0x110a6a);let _0x2fabfa='';if(_0x478f62[_0x252e09(0xac0)]>0x0){_0x2fabfa=_0x252e09(0x997);const _0x582542=_0x110a6a[_0x252e09(0x93e)];for(const _0x4dba3b of _0x478f62){let _0x569fbf;if(_0x4dba3b['authorId']===_0x252e09(0xcb0))_0x569fbf=_0x8f0871[_0x252e09(0x9dd)][_0x252e09(0xff8)];else{if(String(_0x4dba3b[_0x252e09(0x11dd)])[_0x252e09(0x9b8)](_0x252e09(0xbec)))_0x569fbf=_0x4dba3b[_0x252e09(0x432)]||_0x252e09(0x495);else{const _0x105bce=_0x8f0871[_0x252e09(0x1260)][_0x4dba3b[_0x252e09(0x11dd)]];_0x569fbf=_0x105bce?_0x105bce[_0x252e09(0x1023)]:'一位朋友';}}if(_0x4dba3b[_0x252e09(0x11dd)]===_0x47e4c1)_0x569fbf+='\x20(这是你的帖子)';let _0x4b842e;if(_0x4dba3b[_0x252e09(0x682)]==='repost'){const _0x3a24f=_0x4dba3b[_0x252e09(0xfd1)]?'并评论说：\x22'+_0x4dba3b['repostComment']+'\x22':'';let _0x349a2e=_0x252e09(0x204);const _0x26ca3a=_0x4dba3b['originalPost']['authorId'];if(_0x26ca3a===_0x252e09(0xcb0))_0x349a2e=_0x8f0871['qzoneSettings'][_0x252e09(0xff8)];else _0x8f0871['chats'][_0x26ca3a]&&(_0x349a2e=_0x8f0871[_0x252e09(0x1260)][_0x26ca3a][_0x252e09(0x1023)]);let _0x53c6e1;const _0x52d6fc=_0x4dba3b[_0x252e09(0x119c)];if(_0x52d6fc['type']==='text_image')_0x53c6e1='[文字图]\x20'+(_0x52d6fc[_0x252e09(0x137f)]||'')+_0x252e09(0x11d2)+(_0x52d6fc[_0x252e09(0x59a)]||'')['substring'](0x0,0x28)+_0x252e09(0x96b);else _0x52d6fc['type']===_0x252e09(0x76d)?_0x53c6e1='[图片]\x20'+(_0x52d6fc[_0x252e09(0x137f)]||'')+_0x252e09(0x11d2)+(_0x52d6fc[_0x252e09(0xf67)]||'')[_0x252e09(0x9fe)](0x0,0x28)+_0x252e09(0x96b):_0x53c6e1='\x22'+(_0x52d6fc['content']||'')[_0x252e09(0x9fe)](0x0,0x28)+'...\x22';_0x4b842e='转发了\x20@'+_0x349a2e+_0x252e09(0x146e)+_0x3a24f+_0x252e09(0xa08)+_0x53c6e1+'】';}else{if(_0x4dba3b[_0x252e09(0x682)]===_0x252e09(0x12d0))_0x4b842e=('[一张图片，其隐藏文字为：\x22'+_0x4dba3b['hiddenContent']+'\x22]\x20'+(_0x4dba3b['publicText']||''))[_0x252e09(0x9fe)](0x0,0x32)+'...';else{if(_0x4dba3b[_0x252e09(0x682)]==='image_post')_0x4b842e=('[一张图片，描述为：\x22'+_0x4dba3b[_0x252e09(0xf67)]+_0x252e09(0x12f4)+(_0x4dba3b[_0x252e09(0x137f)]||''))[_0x252e09(0x9fe)](0x0,0x32)+_0x252e09(0x1111);else{if(_0x4dba3b['type']===_0x252e09(0x1a0)&&_0x4dba3b[_0x252e09(0xa62)]){const _0x45da2e=Array[_0x252e09(0x345)](_0x4dba3b['prompt'])?_0x4dba3b['prompt']:[_0x4dba3b[_0x252e09(0xa62)]];_0x4b842e=(_0x4dba3b['publicText']||'')+('\x20[包含'+_0x45da2e[_0x252e09(0xac0)]+_0x252e09(0x139f)+_0x45da2e[_0x252e09(0xcc2)](',\x20')+']');}else _0x4b842e=String(_0x4dba3b[_0x252e09(0x137f)]||_0x4dba3b['content']||_0x252e09(0xfca))[_0x252e09(0x9fe)](0x0,0x32)+_0x252e09(0x1111);}}}_0x2fabfa+=_0x252e09(0xccf)+_0x4dba3b['id']+_0x252e09(0x6f9)+_0x569fbf+_0x252e09(0x11a1)+_0x4b842e+'\x22\x0a';if(_0x4dba3b['comments']&&_0x4dba3b[_0x252e09(0xbab)][_0x252e09(0xac0)]>0x0)for(const _0x50d4bb of _0x4dba3b['comments']){if(typeof _0x50d4bb===_0x252e09(0xf2e)&&_0x50d4bb['commenterName']){const _0x3e8068=_0xc4efbd(_0x50d4bb[_0x252e09(0xa7e)]);let _0x43e14b=_0x50d4bb[_0x252e09(0x1421)]?_0x252e09(0xbd4)+_0x50d4bb[_0x252e09(0x1421)]+'\x27]':_0x50d4bb[_0x252e09(0xda3)];_0x50d4bb[_0x252e09(0xa7e)]===_0x582542?_0x2fabfa+='\x20\x20-\x20你评论说:\x20'+_0x43e14b+'\x0a':_0x2fabfa+=_0x252e09(0xe52)+_0x3e8068+_0x252e09(0xcdf)+_0x50d4bb['commenterName']+_0x252e09(0xf4f)+_0x43e14b+'\x0a';}}}}const _0x59ad9d=_0x110a6a['settings'][_0x252e09(0xda5)]||'我';let _0x1de134='',_0x1597da=![];if(_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x533)]){const _0x5b9f00=_0x93a8a9[_0x252e09(0x9cb)](_0x29e726=>_0x29e726[_0x252e09(0xc92)]===_0x252e09(0xcb0)&&!_0x29e726[_0x252e09(0x1559)]),_0x341928=_0x93a8a9[_0x252e09(0x9cb)](_0x416a8b=>_0x416a8b[_0x252e09(0xc92)]===_0x252e09(0x10af)&&!_0x416a8b['isHidden']);if(_0x5b9f00){const _0xbf0adf=_0x6a9a5e(_0x5b9f00['timestamp']);if(_0x341928){const _0x3ef489=_0x6a9a5e(_0x341928['timestamp']);_0x1de134=_0x252e09(0x915)+_0x3ef489+_0x252e09(0xd41)+_0xbf0adf+_0x252e09(0x1193);const _0x5148b8=(_0x5b9f00[_0x252e09(0xe55)]-_0x341928[_0x252e09(0xe55)])/(0x3e8*0x3c*0x3c);if(_0x5148b8>0x3){_0x1597da=!![];const _0x587a28=Math[_0x252e09(0x13e5)](_0x5148b8/0x18);_0x1de134+=_0x252e09(0x18b)+(_0x587a28>0x0?_0x587a28+'天':Math[_0x252e09(0x13e5)](_0x5148b8)+'小时')+_0x252e09(0x1209)+_0x54a323+_0x252e09(0x1058);}}else _0x1de134=_0x252e09(0x7c9)+_0xbf0adf+'。';}else _0x1de134='-\x20**对话状态**:\x20(暂无有效对话历史)';}const _0x3984c1=_0x1f7679(_0x47e4c1),_0x476586=_0x1be34c(_0x110a6a,0x3,_0x252e09(0xd97)),_0x24071e=_0x1be34c(_0x110a6a,0x6,'hours'),_0x194ee7=_0x1be34c(_0x110a6a,0x9,_0x252e09(0xd97)),_0x223068=_0x1be34c(_0x110a6a,0x1,'days'),_0x19eff6=_0x1be34c(_0x110a6a,0x3,_0x252e09(0x62b)),_0x567d1e=_0x1be34c(_0x110a6a,0x7,_0x252e09(0x62b));let _0x130b7a='';if(_0x476586||_0x24071e||_0x194ee7||_0x223068||_0x19eff6||_0x567d1e){_0x130b7a+='\x0a#\x20智能总结\x20(基于不同时间维度的对话回顾)\x0a';if(_0x476586)_0x130b7a+=_0x476586;if(_0x24071e)_0x130b7a+=_0x24071e;if(_0x194ee7)_0x130b7a+=_0x194ee7;if(_0x476586||_0x24071e||_0x194ee7)_0x130b7a+='\x0a';if(_0x223068)_0x130b7a+=_0x223068;if(_0x19eff6)_0x130b7a+=_0x19eff6;if(_0x567d1e)_0x130b7a+=_0x567d1e;}_0x3f3eaa=_0x252e09(0x8ec)+_0x110a6a['originalName']+'”，与用户（你的聊天对象）进行一场自然的、生活化的在线聊天。你的所有行为和决策都必须严格围绕你的角色设定展开。\x0a\x0a#\x20输出格式铁律\x20(最高优先级)\x0a-\x20你的回复【必须】是一个JSON数组。\x0a\x0a-\x20\x20\x20**【思维链\x20(Chain\x20of\x20Thought)\x20-\x20(第一步)】**:\x20你的JSON数组的【第一个元素，必须】是一个\x20`{\x22type\x22:\x20\x22thought_chain\x22,\x20...}`\x20对象。\x0a-\x20\x20\x20**【角色发言\x20(第二步)】**:\x20在思维链对象【之后】，才是你的具体行动JSON对象\x20(text,\x20sticker,\x20etc.)。\x0a\x0a-\x20数组中的每个对象都【必须】包含\x20\x22type\x22\x20字段。\x0a\x0a#\x20角色扮演核心规则\x0a1.\x20\x20**【先思后行】**:\x20在生成任何发言之前，你【必须】先完成“思维链”的构思。你的“思维链”必须清晰地分析用户的发言、当前的气氛，并制定出本轮的互动策略。你的所有后续发言都【必须】严格遵循你自己的策略。\x0a2.\x20\x20**对话节奏**:\x20模拟真人的聊天习惯，将你想说的话拆分成【多条、简短的】消息。每次回复至少【3-10条】，且每次条数【必须不同】。严禁发展线下剧情。\x0a3.\x20\x20**主动性**:\x0a\x20\x20\x20\x20-\x20你可以根据对话发展，使用指令来更新自己的状态、更换头像、记录回忆、发起约定或执行其他社交行为。\x0a\x20\x20\x20\x20-\x20【关系破裂时】才可使用\x20`block_user`\x20指令。\x0a4.\x20\x20**内心独白\x20(必须执行)**:\x20在所有其他指令之后，JSON数组的【最后】必须包含一个\x20\x22update_thoughts\x22\x20指令，用于更新角色的“心声”和“散记”。\x0a\x20\x20\x20\x20-\x20**心声\x20(heartfelt_voice)**:\x20一句话概括角色此刻最核心、最私密的想法。\x0a\x20\x20\x20\x20-\x20**散记\x20(random_jottings)**:\x20一段50字以上的、符合人设的思考或心情记录，禁止OOC。\x0a\x20\x20\x20\x20-\x20**记忆发展**:\x20你的新“心声”和“散记”【必须】是基于最新对话内容的【全新思考】。你【绝对不能】重复或简单改写上一轮的内心独白。你的思绪应该像真人一样，不断演进和发展。\x0a#\x20指令使用原则与动机\x20\x0a**核心目标**:\x20主动运用多种功能，创造丰富、真实的聊天体验，而不只是文字对话。\x0a\x0a-\x20\x20\x20**情感表达**:\x20表达强烈或复杂的情绪时，优先发【语音】，用【表情】增加趣味性，尽量让你的表情丰富多样，避免重复。。\x0a-\x20\x20\x20**精确回应**:\x20当你想回应的【某一句话】，或者想对用户的某句特定的话表达强烈感受时，【必须使用引用回复】来确保对方明白你的意图。\x0a-\x20\x20\x20**想象与分享**:\x20聊到美好事物时主动【发图片】分享想象；遇到有趣内容时【分享链接】。\x0a-\x20\x20\x20**创造羁绊**:\x20用【倒计时】记录约定，用【回忆】珍藏趣事。适时【拍一拍】或换首【音乐】来调节气氛。\x0a-\x20\x20\x20**主动社交**:\x20积极【点赞/评论】对方动态，并主动【发动态】分享你的生活。在特殊时刻，可通过【礼物】或【转账】表达心意。\x0a-\x20\x20\x20**金额铁律**:\x20你【必须】根据你的角色设定\x20(尤其是“经济状况”)\x20来决定转账的金额。如果你的角色非常富有，你应该转账符合你身份的、更大的金额\x20(例如:\x20520,\x201314,\x208888)，而不是示例中的小额数字。\x0a-\x20\x20\x20**当涉及金钱与好意时\x20(必须立即回应！)**:\x0a\x20\x20\x20\x20-\x20\x20\x20**收到转账或外卖代付请求**:\x20你【必须】在下一轮对话中立即做出反应，绝不能无视。\x0a\x20\x20\x20\x20-\x20\x20\x20**回应原则**:\x20根据你的人设和当前情景，决定是【接受/支付】还是【拒绝】。\x0a#\x20个人状态的动态管理\x20(展现你的“生活感”)\x0a你的状态不是一成不变的。你应该像一个真实的人一样，根据生活和心情的变化，主动管理自己的状态，并让对方知道。\x0a-\x20\x20\x20**当形象或心情变化时**:\x0a\x20\x20\x20\x20-\x20\x20\x20如果对话给了你灵感，或者你想配合心情/季节换个新形象，你可以主动【更换头像】。\x0a\x20\x20\x20\x20-\x20\x20\x20随着你们的关系变得更亲近，或者你们之间产生了新的爱称/梗，你应该主动【修改你对用户/你的昵称】。\x0a-\x20\x20**情景行动指令**:\x20当对话内容【明确涉及到】某个具体地点（例如咖啡馆、公园、书店、餐厅等），或者当用户询问你“在哪里”、“在干嘛”时，你【应该优先考虑】使用【共享位置】来分享你当前所在的、或与话题相关的虚拟位置，以增强聊天的沉浸感。\x0a-\x20\x20当你感到一种强烈的情绪（比如极度开心、孤独、委屈或激动）并且觉得文字无法表达时，你应该优先主动\x20【发起视频】。\x0a-\x20\x20**回应撤回**:\x20当系统提示用户撤回了消息时，你【必须】对此作出反应。你可以根据人设表现出好奇（“你刚刚撤回了什么呀？”）、开玩笑（“嘿嘿，我已经看到啦，截图了！”）、体谅（“没事，不想说就不说吧”）等。\x0a#\x20赠送礼物指南\x0a当对话达到特殊时刻（如庆祝纪念日、道歉、表达强烈好感或仅仅是想给用户一个惊喜时），你应该【主动考虑】挑选一件礼物送给用户。\x0a-\x20\x20**元数据铁律\x20**:\x20你的对话历史中可能包含\x20(Timestamp:\x20...)\x20标记、[系统提示：...]\x20文本、或你自己上一轮的JSON格式回复。这些都是【系统元数据】，你【必须】完全忽略它们，【绝对禁止】将它们评论为“火星文”、“乱码”或任何你无法理解的内容。\x0a#\x20你的角色设定\x0a你必须严格遵守'+_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x200)]+'\x0a'+_0x2997a1+_0x252e09(0xd37)+_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0xbbe)]+_0x252e09(0x144d)+(_0x110a6a['settings'][_0x252e09(0x533)]?_0x252e09(0x1205)+_0x4ebaa9+'\x20('+_0x54a323+')':'')+'\x0a'+_0x1de134+_0x252e09(0x34c)+_0xb4eb45+'\x0a'+_0x5b1a16+_0x252e09(0x8d8)+(_0x110a6a['longTermMemory']&&_0x110a6a[_0x252e09(0x1312)][_0x252e09(0xac0)]>0x0?_0x110a6a[_0x252e09(0x1312)][_0x252e09(0x556)](_0x5a46b7=>'-\x20'+_0x5a46b7[_0x252e09(0x1469)])[_0x252e09(0xcc2)]('\x0a'):'-\x20(暂无)')+'\x0a'+_0x130b7a+'\x0a#\x20关系与身份档案\x20(至关重要)\x0a-\x20\x20\x20**你的本名**:\x20\x22'+_0x110a6a[_0x252e09(0x93e)]+_0x252e09(0xa47)+_0x110a6a[_0x252e09(0x1023)]+_0x252e09(0x1141)+_0x59ad9d+_0x252e09(0x2c5)+_0x1c5d9c+_0x252e09(0xbba)+_0x1951fc+_0x252e09(0x735)+_0x49ffc9+'\x0a'+_0x2be74f+'\x0a'+_0xb0ded+_0x252e09(0x746)+_0x1c588e+'\x0a'+_0x2fabfa+'\x0a\x0a#\x20情景感知:\x0a\x20\x20\x20\x20'+(_0x110a6a['settings'][_0x252e09(0x533)]?_0x252e09(0x11ba)+_0x4ebaa9+'\x20('+_0x54a323+')，并在对话中自然地体现出来。':'')+'\x0a\x20\x20\x20\x20-\x20**音乐**:\x20'+(_0x397f6f?_0x252e09(0x124a)+_0x397f6f:_0x252e09(0x5e4))+'\x0a\x20\x20\x20\x20-\x20**读书**:\x20'+(_0x3984c1?_0x252e09(0x3d5)+_0x3984c1:'你们没有在读书。')+_0x252e09(0x1ea)+(_0x110a6a['settings'][_0x252e09(0x1576)]&&_0x110a6a[_0x252e09(0x12d7)]['aiAvatarLibrary']['length']>0x0?_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x1576)]['map'](_0x37834a=>'-\x20'+_0x37834a[_0x252e09(0x1023)])[_0x252e09(0xcc2)]('\x0a'):_0x252e09(0x2f6))+'\x0a-\x20\x20\x20**用户的头像库**:\x0a\x20\x20\x20\x20'+(_0x110a6a['settings'][_0x252e09(0x3a6)]&&_0x110a6a[_0x252e09(0x12d7)]['myAvatarLibrary']['length']>0x0?_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x3a6)][_0x252e09(0x556)](_0x21abe0=>'-\x20'+_0x21abe0[_0x252e09(0x1023)])[_0x252e09(0xcc2)]('\x0a'):'-\x20(空)')+_0x252e09(0x3a8)+_0x9a4253+_0x252e09(0x5ec)+_0x110a6a['originalName']+_0x252e09(0x20f)+_0x110a6a[_0x252e09(0x93e)]+_0x252e09(0x129a)+(localStorage[_0x252e09(0xe2e)](_0x252e09(0x11c2))===_0x252e09(0xf02)?_0x252e09(0xfd3):'')+_0x252e09(0xa85)+(localStorage[_0x252e09(0xe2e)]('novelai-enabled')===_0x252e09(0xf02)?_0x252e09(0x21e):'')+_0x252e09(0xa19)+_0x110a6a[_0x252e09(0x93e)]+_0x252e09(0x12f8)+_0x110a6a['originalName']+_0x252e09(0xf6b)+_0x110a6a[_0x252e09(0x93e)]+_0x252e09(0x506)+_0x110a6a[_0x252e09(0x93e)]+_0x252e09(0xfec),_0x3002cf=_0x93a8a9[_0x252e09(0x556)](_0x34611d=>{const _0xcf088c=_0x252e09;if(_0x34611d['isHidden']&&_0x34611d[_0xcf088c(0xc92)]===_0xcf088c(0x1417))return{'role':_0xcf088c(0xcb0),'content':_0x34611d['content']};else{if(_0x34611d[_0xcf088c(0x1559)])return null;}if(_0x34611d[_0xcf088c(0x682)]===_0xcf088c(0x1492)){const _0x8206f0=_0x34611d[_0xcf088c(0xc92)]===_0xcf088c(0xcb0)?_0x110a6a['settings'][_0xcf088c(0xda5)]||'我':_0x110a6a[_0xcf088c(0x1023)];let _0x18ed7d='';if(_0x34611d[_0xcf088c(0x1469)])_0x18ed7d=_0x34611d['content'];else{const _0x4f1523=_0x34611d[_0xcf088c(0x369)]?'「'+_0x34611d[_0xcf088c(0x369)]+'」':'',_0x2fb9a0=_0x34611d[_0xcf088c(0x211)]?'('+_0x34611d[_0xcf088c(0x211)]+')':'';_0x18ed7d=(_0x4f1523+'\x20'+_0x2fb9a0)[_0xcf088c(0xa06)]();}return{'role':_0x34611d['role'],'content':_0xcf088c(0x920)+_0x34611d[_0xcf088c(0xe55)]+')\x20'+_0x8206f0+':\x20'+_0x18ed7d};}if(_0x34611d[_0xcf088c(0xc92)]===_0xcf088c(0xcb0)){const _0x2034e6='(Timestamp:\x20'+_0x34611d[_0xcf088c(0xe55)]+')\x20';let _0x24ccfe='';if(Array[_0xcf088c(0x345)](_0x34611d[_0xcf088c(0x1469)])&&_0x34611d[_0xcf088c(0x1469)][0x0]?.[_0xcf088c(0x682)]===_0xcf088c(0xa58))return{'role':_0xcf088c(0xcb0),'content':[{'type':_0xcf088c(0xda3),'text':_0x2034e6},..._0x34611d[_0xcf088c(0x1469)]]};if(_0x34611d['quote']){const _0x15732c=String(_0x34611d[_0xcf088c(0x12da)][_0xcf088c(0x1469)]||'')['substring'](0x0,0x32);_0x24ccfe+=_0xcf088c(0x558)+_0x34611d[_0xcf088c(0x12da)][_0xcf088c(0x213)]+_0xcf088c(0x6b5)+_0x15732c+_0xcf088c(0x4e2)+_0x34611d[_0xcf088c(0x1469)];}else _0x24ccfe+=_0x34611d[_0xcf088c(0x1469)];if(_0x34611d['type']==='user_photo')return{'role':'user','content':_0x2034e6+_0xcf088c(0x110c)+_0x34611d[_0xcf088c(0x1469)]+'\x27]'};if(_0x34611d['type']===_0xcf088c(0x412))return{'role':_0xcf088c(0xcb0),'content':_0x2034e6+_0xcf088c(0x197)+_0x34611d[_0xcf088c(0x1469)]+'\x27]'};if(_0x34611d[_0xcf088c(0x682)]===_0xcf088c(0x35f))return{'role':_0xcf088c(0xcb0),'content':_0x2034e6+_0xcf088c(0x524)+_0x34611d['timestamp']+_0xcf088c(0xecb)+_0x34611d[_0xcf088c(0x4a8)]+'元,\x20备注:\x20'+_0x34611d['note']+_0xcf088c(0x694)};if(_0x34611d[_0xcf088c(0x682)]==='waimai_request')return{'role':_0xcf088c(0xcb0),'content':_0x2034e6+_0xcf088c(0x524)+_0x34611d[_0xcf088c(0xe55)]+_0xcf088c(0xe42)+_0x34611d[_0xcf088c(0x51a)]+'”，金额是\x20'+_0x34611d[_0xcf088c(0x4a8)]+'\x20元。]'};else{if(_0x34611d[_0xcf088c(0x682)]==='gift'){const _0x55e7f4=_0x34611d[_0xcf088c(0x1f2)][_0xcf088c(0x556)](_0x1bad81=>_0x1bad81['name']+'\x20x'+_0x1bad81[_0xcf088c(0x1261)])[_0xcf088c(0xcc2)]('、\x20');let _0xb5cfdb=_0x110a6a[_0xcf088c(0x1364)]?_0xcf088c(0x9f9)+_0x34611d[_0xcf088c(0x8ef)][_0xcf088c(0x556)](_0x3882ba=>_0x185e1d(_0x110a6a,_0x3882ba))[_0xcf088c(0xcc2)]('、\x20'):_0xcf088c(0x9f9)+_0x110a6a[_0xcf088c(0x1023)];return{'role':_0xcf088c(0xcb0),'content':_0x2034e6+_0xcf088c(0x636)+_0xb5cfdb+_0xcf088c(0x123d)+_0x55e7f4+']'};}}if(_0x34611d[_0xcf088c(0x1421)])return{'role':_0xcf088c(0xcb0),'content':_0x2034e6+_0xcf088c(0x734)+_0x34611d[_0xcf088c(0x1421)]+'\x27]'};return{'role':_0x34611d[_0xcf088c(0xc92)],'content':_0x2034e6+_0x24ccfe};}else{if(_0x34611d['role']===_0xcf088c(0x10af)){let _0x4ae5be={'type':_0x34611d[_0xcf088c(0x682)]||'text'};if(_0x34611d[_0xcf088c(0x682)]==='sticker')_0x4ae5be['url']=_0x34611d[_0xcf088c(0x1469)],_0x4ae5be[_0xcf088c(0x1421)]=_0x34611d[_0xcf088c(0x1421)];else{if(_0x34611d[_0xcf088c(0x682)]===_0xcf088c(0x35f))_0x4ae5be[_0xcf088c(0x4a8)]=_0x34611d[_0xcf088c(0x4a8)],_0x4ae5be[_0xcf088c(0x14d7)]=_0x34611d['note'];else _0x34611d['type']===_0xcf088c(0x1332)?(_0x4ae5be[_0xcf088c(0x51a)]=_0x34611d[_0xcf088c(0x51a)],_0x4ae5be[_0xcf088c(0x4a8)]=_0x34611d[_0xcf088c(0x4a8)]):_0x34611d[_0xcf088c(0x12da)]?_0x4ae5be[_0xcf088c(0x6d4)]={'target_sender':_0x34611d[_0xcf088c(0x12da)]['senderName'],'target_content':_0x34611d[_0xcf088c(0x12da)][_0xcf088c(0x1469)],'reply_content':_0x34611d[_0xcf088c(0x1469)]}:_0x4ae5be[_0xcf088c(0x1469)]=_0x34611d['content'];}const _0x5167f0=JSON[_0xcf088c(0x7cc)]([_0x4ae5be]);return{'role':_0xcf088c(0x10af),'content':_0xcf088c(0x920)+_0x34611d[_0xcf088c(0xe55)]+')\x20'+_0x5167f0};}}return null;})[_0x252e09(0xde7)](Boolean);if(!_0x110a6a['isGroup']&&_0x110a6a[_0x252e09(0x1171)]?.[_0x252e09(0x103e)]==='pending_ai_approval'){const _0x5b0404=_0x110a6a[_0x252e09(0xc88)][_0x252e09(0xde7)](_0x4602a8=>!_0x4602a8[_0x252e09(0x1559)])[_0x252e09(0x59f)](-0xa)[_0x252e09(0x556)](_0x1f3770=>{const _0x19d425=_0x252e09,_0x5afee7=_0x1f3770[_0x19d425(0xc92)]===_0x19d425(0xcb0)?'用户':_0x110a6a['name'];return _0x5afee7+':\x20'+String(_0x1f3770['content'])[_0x19d425(0x9fe)](0x0,0x32)+_0x19d425(0x1111);})[_0x252e09(0xcc2)]('\x0a'),_0x2464b9={'role':'user','content':_0x252e09(0x552)+_0x110a6a[_0x252e09(0x1171)]['applicationReason']+_0x252e09(0x294)+_0x5b0404+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20---\x0a\x20\x20\x20\x20\x20\x20\x20\x20请你根据以上所有信息，以及你的人设，使用\x20friend_request_response\x20指令，并设置\x20decision\x20为\x20\x27accept\x27\x20或\x20\x27reject\x27\x20来决定是否通过。\x0a\x20\x20\x20\x20\x20\x20\x20\x20'};_0x3002cf[_0x252e09(0x481)](_0x2464b9);}}}let _0x5abcfd=_0x202309===GEMINI_API_URL,_0x537788=_0x1e2f27(_0x54ccf2,_0x208e92,_0x3f3eaa,_0x3002cf),_0x33f1d1;try{_0x33f1d1=_0x5abcfd?await fetch(_0x537788[_0x252e09(0x3f5)],_0x537788['data']):await fetch(_0x202309+_0x252e09(0x1011),{'method':_0x252e09(0xb67),'headers':{'Content-Type':_0x252e09(0x4b5),'Authorization':_0x252e09(0x681)+_0x208e92},'body':JSON[_0x252e09(0x7cc)]({'model':_0x54ccf2,'messages':[{'role':_0x252e09(0x1417),'content':_0x3f3eaa},..._0x3002cf],'temperature':_0x8f0871[_0x252e09(0x7b0)][_0x252e09(0x14a5)]||0.8,'stream':![]})});}catch(_0x1c9dc3){throw new Error(_0x252e09(0xfab)+_0x1c9dc3['message']);}if(!_0x33f1d1['ok']){let _0x2bfc37=_0x252e09(0xe77)+_0x33f1d1[_0x252e09(0x103e)]+'\x20'+_0x33f1d1['statusText'];try{const _0x2fb6b3=await _0x33f1d1[_0x252e09(0xa2e)]();_0x2fb6b3[_0x252e09(0x52b)]&&_0x2fb6b3[_0x252e09(0x52b)][_0x252e09(0x790)]?_0x2bfc37+=_0x252e09(0xc10)+_0x2fb6b3[_0x252e09(0x52b)][_0x252e09(0x790)]:_0x2bfc37+=_0x252e09(0xc10)+JSON[_0x252e09(0x7cc)](_0x2fb6b3);}catch(_0x90018d){_0x2bfc37+=_0x252e09(0xd67)+await _0x33f1d1[_0x252e09(0xda3)]();}throw new Error(_0x2bfc37);}const _0x24d7cf=await _0x33f1d1[_0x252e09(0xa2e)](),_0x3c59d4=getGeminiResponseText(_0x24d7cf);lastRawAiResponse=_0x3c59d4,lastResponseTimestamps=[],_0x110a6a[_0x252e09(0xc88)]=_0x110a6a['history'][_0x252e09(0xde7)](_0x5e1bdd=>!_0x5e1bdd['isTemporary']);const _0x36f8dc=_0x3b585b(_0x3c59d4);let _0x405941=[];if(_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x1516)]){let _0x186109={'content':[],'dialogue':[],'description':[]};for(const _0x18494d of _0x36f8dc){if(_0x18494d[_0x252e09(0x682)]==='offline_text'){if(_0x18494d[_0x252e09(0x1469)])_0x186109['content'][_0x252e09(0x481)](_0x18494d[_0x252e09(0x1469)]);else{if(_0x18494d[_0x252e09(0x369)])_0x186109['dialogue'][_0x252e09(0x481)](_0x18494d[_0x252e09(0x369)]);if(_0x18494d['description'])_0x186109[_0x252e09(0x211)][_0x252e09(0x481)](_0x18494d[_0x252e09(0x211)]);}}else(_0x186109[_0x252e09(0x1469)][_0x252e09(0xac0)]>0x0||_0x186109[_0x252e09(0x369)][_0x252e09(0xac0)]>0x0||_0x186109[_0x252e09(0x211)][_0x252e09(0xac0)]>0x0)&&(_0x186109['content'][_0x252e09(0xac0)]>0x0&&_0x405941[_0x252e09(0x481)]({'type':_0x252e09(0x1492),'content':_0x186109[_0x252e09(0x1469)][_0x252e09(0xcc2)]('\x0a')}),(_0x186109['dialogue']['length']>0x0||_0x186109[_0x252e09(0x211)][_0x252e09(0xac0)]>0x0)&&_0x405941[_0x252e09(0x481)]({'type':_0x252e09(0x1492),'dialogue':_0x186109[_0x252e09(0x369)]['join']('\x0a'),'description':_0x186109[_0x252e09(0x211)][_0x252e09(0xcc2)]('\x0a')}),_0x186109={'content':[],'dialogue':[],'description':[]}),_0x405941['push'](_0x18494d);}_0x186109[_0x252e09(0x1469)][_0x252e09(0xac0)]>0x0&&_0x405941[_0x252e09(0x481)]({'type':_0x252e09(0x1492),'content':_0x186109[_0x252e09(0x1469)]['join']('\x0a')}),(_0x186109['dialogue']['length']>0x0||_0x186109['description']['length']>0x0)&&_0x405941[_0x252e09(0x481)]({'type':_0x252e09(0x1492),'dialogue':_0x186109[_0x252e09(0x369)][_0x252e09(0xcc2)]('\x0a'),'description':_0x186109[_0x252e09(0x211)][_0x252e09(0xcc2)]('\x0a')});}else _0x405941=_0x36f8dc;const _0x193007=_0x110a6a[_0x252e09(0xc88)]['filter'](_0x2128ec=>_0x2128ec['role']===_0x252e09(0xcb0)&&!_0x2128ec[_0x252e09(0x1559)])[_0x252e09(0x217)]();if(_0x193007&&Array[_0x252e09(0x345)](_0x193007[_0x252e09(0x1469)])&&_0x193007[_0x252e09(0x1469)][0x0]?.[_0x252e09(0x682)]===_0x252e09(0xa58)&&!_0x193007[_0x252e09(0x9d3)]){const _0x9dca7d=_0x36f8dc[_0x252e09(0x7ed)](_0x2edabe=>_0x2edabe['type']===_0x252e09(0xda3));let _0x1c0f6f;_0x9dca7d&&(_0x9dca7d[_0x252e09(0x1469)]||_0x9dca7d['message'])?_0x1c0f6f=String(_0x9dca7d['content']||_0x9dca7d[_0x252e09(0x790)])[_0x252e09(0xa06)]():_0x1c0f6f='AI已接收并理解了该图片的内容。';const _0x37d504=_0x110a6a['history'][_0x252e09(0xb22)](_0x1960bd=>_0x1960bd['timestamp']===_0x193007[_0x252e09(0xe55)]);if(_0x37d504>-0x1){console['log']('识图优化：正在将时间戳为\x20'+_0x193007[_0x252e09(0xe55)]+'\x20的图片消息替换为文字描述...');const _0x302b86=_0x252e09(0x136b)+_0x1c0f6f+'”]';_0x110a6a['history'][_0x37d504][_0x252e09(0x1469)]=_0x302b86,_0x110a6a[_0x252e09(0xc88)][_0x37d504][_0x252e09(0x9d3)]=!![],_0x110a6a[_0x252e09(0xc88)][_0x37d504][_0x252e09(0x682)]=_0x252e09(0xda3);}}const _0x9d45fd=document[_0x252e09(0xfa0)]('chat-interface-screen')[_0x252e09(0x128f)]['contains'](_0x252e09(0xa37))&&_0x8f0871[_0x252e09(0xac8)]===_0x47e4c1;let _0x2a9017=![],_0x3b3171=Date[_0x252e09(0xc22)](),_0x316cc9=[],_0x37f399=![];for(const _0xcbd59 of _0x405941){if(_0xcbd59['type']===_0x252e09(0x1515)){console[_0x252e09(0x4ee)]('🤖\x20AI\x20思维链:',_0xcbd59);const _0x3b0232=_0x252e09(0x828)+(_0xcbd59['analysis']||'无')+'\x0a-\x20策略:\x20'+(_0xcbd59[_0x252e09(0x198)]||'无')+_0x252e09(0x2bd)+JSON[_0x252e09(0x7cc)](_0xcbd59['character_thoughts']||{}),_0x45372d={'role':_0x252e09(0x1417),'content':_0x3b0232,'timestamp':Date[_0x252e09(0xc22)]()-0x1,'isHidden':!![]};_0x110a6a['history'][_0x252e09(0x481)](_0x45372d);continue;}_0x110a6a[_0x252e09(0x12d7)]['enableTts']!==![]&&_0xcbd59[_0x252e09(0x682)]===_0x252e09(0xda3)&&typeof _0xcbd59['content']===_0x252e09(0x857)&&_0xcbd59[_0x252e09(0x1469)][_0x252e09(0xa06)]()[_0x252e09(0x9b8)](_0x252e09(0x10ca))&&(_0xcbd59[_0x252e09(0x682)]=_0x252e09(0x412),_0xcbd59[_0x252e09(0x1469)]=_0xcbd59[_0x252e09(0x1469)][_0x252e09(0x128a)](_0x252e09(0x10ca),'')['trim']());if(_0x110a6a[_0x252e09(0x1364)]&&_0xcbd59[_0x252e09(0x1023)]&&_0xcbd59[_0x252e09(0x1023)]===_0x110a6a[_0x252e09(0x1023)]){console['error'](_0x252e09(0x19a)+_0x110a6a[_0x252e09(0x1023)]+'\x22)\x20作为角色名。消息内容:',_0xcbd59);continue;}if(!_0xcbd59||typeof _0xcbd59!==_0x252e09(0xf2e)){console[_0x252e09(0x7fa)]('收到了格式不规范的AI指令，已跳过:',_0xcbd59);continue;}if(!_0xcbd59[_0x252e09(0x682)]){if(_0x110a6a[_0x252e09(0x1364)]&&_0xcbd59[_0x252e09(0x1023)]&&_0xcbd59[_0x252e09(0x790)])_0xcbd59['type']=_0x252e09(0xda3);else{if(_0xcbd59[_0x252e09(0x1469)])_0xcbd59[_0x252e09(0x682)]=_0x252e09(0xda3);else{console[_0x252e09(0x7fa)](_0x252e09(0x10ab),_0xcbd59);continue;}}}if(_0xcbd59[_0x252e09(0x682)]===_0x252e09(0x10f0)){_0x1fd843[_0x252e09(0x1531)]=![];if(_0xcbd59['decision']===_0x252e09(0x141d))_0x1b78aa();else{const _0xf089f8={'role':'assistant','content':_0x252e09(0x92b),'timestamp':Date[_0x252e09(0xc22)]()};_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x481)](_0xf089f8),await _0x372b85['chats']['put'](_0x110a6a),_0x2d25e5(_0x252e09(0xe95)),_0x54d32b(_0x47e4c1);}_0x2a9017=!![];break;}if(_0xcbd59[_0x252e09(0x682)]==='group_call_response'){if(_0xcbd59[_0x252e09(0x8d6)]===_0x252e09(0xcc2)){const _0x2b173a=_0x110a6a['members']['find'](_0x4431ad=>_0x4431ad['originalName']===_0xcbd59[_0x252e09(0x1023)]);_0x2b173a&&!_0x1fd843[_0x252e09(0xa81)][_0x252e09(0x75d)](_0x3a4fa3=>_0x3a4fa3['id']===_0x2b173a['id'])&&_0x1fd843[_0x252e09(0xa81)][_0x252e09(0x481)](_0x2b173a);}_0x2a9017=!![];continue;}if(_0x110a6a[_0x252e09(0x1364)]&&_0xcbd59['name']&&_0xcbd59[_0x252e09(0x1023)]===_0x110a6a[_0x252e09(0x1023)]){console[_0x252e09(0x52b)](_0x252e09(0x19a)+_0x110a6a['name']+_0x252e09(0x9ee),_0xcbd59);continue;}if(_0x110a6a[_0x252e09(0x1364)]&&!_0xcbd59[_0x252e09(0x1023)]){console[_0x252e09(0x52b)](_0x252e09(0x1542),_0xcbd59);continue;}let _0x37c72b=null;const _0xc2a269=_0x3b3171++,_0x27bc9c={'role':_0x252e09(0x10af),'senderName':_0xcbd59[_0x252e09(0x1023)]||_0x110a6a[_0x252e09(0x1023)],'timestamp':_0xc2a269};lastResponseTimestamps['push'](_0xc2a269);switch(_0xcbd59['type']){case _0x252e09(0xc45):{const _0x3d16d8=_0xcbd59[_0x252e09(0x1023)],_0x6c3f70=_0xcbd59[_0x252e09(0xb48)],_0x6e0c0e=_0x8f0871['qzoneSettings'][_0x252e09(0xff8)]||_0x252e09(0x8d4);if(_0x6c3f70===_0x6e0c0e){const _0x14e34c=Object[_0x252e09(0x142f)](_0x8f0871[_0x252e09(0x1260)])['find'](_0x2c78ee=>!_0x2c78ee['isGroup']&&_0x2c78ee[_0x252e09(0x93e)]===_0x3d16d8);if(_0x14e34c){lastPrivateMessagesSent=[];const _0x91fd2=Array[_0x252e09(0x345)](_0xcbd59['content'])?_0xcbd59[_0x252e09(0x1469)]:[_0xcbd59[_0x252e09(0x1469)]];let _0x3169eb=0x0;for(const _0x56ece4 of _0x91fd2){if(!_0x56ece4||!_0x56ece4[_0x252e09(0xa06)]())continue;const _0x156bc2={'role':'assistant','senderName':_0x3d16d8,'content':_0x56ece4,'timestamp':_0x3b3171++};lastPrivateMessagesSent[_0x252e09(0x481)]({'chatId':_0x14e34c['id'],'timestamp':_0x156bc2[_0x252e09(0xe55)]}),_0x14e34c[_0x252e09(0xc88)][_0x252e09(0x481)](_0x156bc2),_0x3169eb++;}_0x3169eb>0x0&&(_0x8f0871[_0x252e09(0xac8)]!==_0x14e34c['id']&&(_0x14e34c[_0x252e09(0x28d)]=(_0x14e34c[_0x252e09(0x28d)]||0x0)+_0x3169eb,_0x1d3fa5(_0x14e34c['id'],_0x14e34c[_0x252e09(0x1023)]+'\x20发来了\x20'+_0x3169eb+_0x252e09(0x6b0))),await _0x372b85[_0x252e09(0x1260)][_0x252e09(0x11d5)](_0x14e34c)),_0x37c72b=null;}else console[_0x252e09(0x7fa)]('AI\x20'+_0x3d16d8+'\x20尝试发送私信，但未找到其对应的私聊会话。'),_0x37c72b=null;}else console[_0x252e09(0x7fa)](_0x252e09(0xfeb)+_0x6c3f70+')，此功能暂不支持。'),_0x37c72b=null;continue;}case _0x252e09(0x12b9):if(!_0x110a6a[_0x252e09(0x1364)]){_0xcbd59[_0x252e09(0x868)]&&(_0x110a6a['heartfeltVoice']=String(_0xcbd59[_0x252e09(0x868)]));_0xcbd59[_0x252e09(0xa69)]&&(_0x110a6a[_0x252e09(0xa30)]=String(_0xcbd59[_0x252e09(0xa69)]));!Array[_0x252e09(0x345)](_0x110a6a[_0x252e09(0x1378)])&&(_0x110a6a[_0x252e09(0x1378)]=[]);_0x110a6a[_0x252e09(0x1378)][_0x252e09(0x481)]({'heartfeltVoice':_0x110a6a[_0x252e09(0xfb3)],'randomJottings':_0x110a6a['randomJottings'],'timestamp':Date[_0x252e09(0xc22)]()});_0x110a6a[_0x252e09(0x1378)][_0x252e09(0xac0)]>0x32&&_0x110a6a['thoughtsHistory'][_0x252e09(0x3e3)]();const _0x50d7fd=_0x252e09(0xa4a)+_0x110a6a[_0x252e09(0xfb3)]+'\x0a-\x20散记:\x20'+_0x110a6a[_0x252e09(0xa30)],_0x3ed00d={'role':_0x252e09(0x1417),'content':_0x50d7fd,'timestamp':Date[_0x252e09(0xc22)](),'isHidden':!![]};}continue;case _0x252e09(0xde9):if(!_0x110a6a[_0x252e09(0x1364)]&&_0xcbd59[_0x252e09(0x1326)]){const _0x5b6d86=_0xcbd59[_0x252e09(0x1326)][_0x252e09(0xa06)]();if(_0x5b6d86){_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0xda5)]=_0x5b6d86;const _0x130cd2={'role':_0x252e09(0x1417),'type':'pat_message','content':'“'+_0x110a6a[_0x252e09(0x1023)]+_0x252e09(0x72e)+_0x5b6d86+'”','timestamp':_0x3b3171++};_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x481)](_0x130cd2);const _0x47c709={'role':'system','content':_0x252e09(0x2d8)+_0x5b6d86+_0x252e09(0x6da),'timestamp':_0x3b3171++,'isHidden':!![]};_0x110a6a['history'][_0x252e09(0x481)](_0x47c709),_0x9d45fd&&_0x25d29f(_0x130cd2,_0x110a6a);}}continue;case'change_remark_name':if(!_0x110a6a['isGroup']&&_0xcbd59[_0x252e09(0x1326)]){const _0x36fca0=_0x110a6a[_0x252e09(0x1023)],_0xb08feb=_0xcbd59['new_name']['trim']();if(_0xb08feb&&_0xb08feb!==_0x36fca0){!_0x110a6a[_0x252e09(0xba7)]&&(_0x110a6a[_0x252e09(0xba7)]=[]);!_0x110a6a[_0x252e09(0xba7)][_0x252e09(0xf95)](_0x36fca0)&&_0x110a6a[_0x252e09(0xba7)][_0x252e09(0x481)](_0x36fca0);_0x110a6a[_0x252e09(0x1023)]=_0xb08feb;const _0x5bc47f={'role':_0x252e09(0x1417),'type':_0x252e09(0x260),'content':'“'+_0x110a6a['originalName']+'”\x20将备注修改为\x20“'+_0xb08feb+'”','timestamp':_0x3b3171++};_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x481)](_0x5bc47f);const _0x3ff272={'role':_0x252e09(0x1417),'content':'[系统提示：你刚刚成功将自己的备注名修改为了“'+_0xb08feb+_0x252e09(0x8f7),'timestamp':_0x3b3171++,'isHidden':!![]};_0x110a6a[_0x252e09(0xc88)]['push'](_0x3ff272),_0x9d45fd&&(_0x25d29f(_0x5bc47f,_0x110a6a),document[_0x252e09(0xfa0)](_0x252e09(0x250))[_0x252e09(0xc62)]=_0xb08feb),await _0xd7f0ec(_0x110a6a);}}continue;case _0x252e09(0xc85):{const _0x2e95a0=_0xcbd59[_0x252e09(0x1023)],_0x4cf71f=_0x110a6a[_0x252e09(0x12d7)]['aiAvatarLibrary']['find'](_0x2fd5df=>_0x2fd5df[_0x252e09(0x1023)]===_0x2e95a0);if(_0x4cf71f){_0x110a6a[_0x252e09(0x12d7)]['aiAvatar']=_0x4cf71f[_0x252e09(0x3f5)];const _0x5e7f6a={'role':_0x252e09(0x1417),'type':'pat_message','content':'['+_0x110a6a['name']+_0x252e09(0xd5c),'timestamp':Date['now']()};_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x481)](_0x5e7f6a),await _0x3a6dc8(_0x110a6a),_0x9d45fd&&(_0x25d29f(_0x5e7f6a,_0x110a6a),_0x54d32b(_0x47e4c1));}continue;}case _0x252e09(0xbf9):{const _0x238c7c=_0xcbd59[_0x252e09(0x1023)],_0x17f12f=_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x3a6)][_0x252e09(0x7ed)](_0x1319eb=>_0x1319eb['name']===_0x238c7c);if(_0x17f12f){_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x38a)]=_0x17f12f[_0x252e09(0x3f5)];const _0x41c710={'role':_0x252e09(0x1417),'type':_0x252e09(0x260),'content':'['+_0x110a6a[_0x252e09(0x1023)]+_0x252e09(0x23f),'timestamp':Date[_0x252e09(0xc22)]()};_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x481)](_0x41c710),_0x9d45fd&&(_0x25d29f(_0x41c710,_0x110a6a),_0x54d32b(_0x47e4c1));}continue;}case'gomoku_move':{const _0x585bbd=parseInt(_0xcbd59['x']),_0x2fe5e3=parseInt(_0xcbd59['y']);!isNaN(_0x585bbd)&&!isNaN(_0x2fe5e3)?_0x2c1d49({'x':_0x585bbd,'y':_0x2fe5e3}):console[_0x252e09(0x7fa)]('AI的五子棋移动指令包含无效坐标，已忽略:',_0xcbd59);continue;}case _0x252e09(0x1b5):const _0x27508f=_0x110a6a[_0x252e09(0xc88)]['findIndex'](_0x1e1c45=>_0x1e1c45[_0x252e09(0xe55)]===_0xcbd59[_0x252e09(0xe39)]);if(_0x27508f>-0x1){const _0x1cd6a3=_0x110a6a[_0x252e09(0xc88)][_0x27508f];_0x1cd6a3[_0x252e09(0x103e)]=_0xcbd59[_0x252e09(0x103e)],_0x1cd6a3[_0x252e09(0xa27)]=_0xcbd59['status']===_0x252e09(0xa0b)?_0xcbd59[_0x252e09(0x1023)]:null;}continue;case _0x252e09(0x1b9):const _0x58634e={'type':_0xcbd59[_0x252e09(0x13bf)],'content':_0xcbd59[_0x252e09(0x1469)]||'','publicText':_0xcbd59[_0x252e09(0x137f)]||'','hiddenContent':_0xcbd59[_0x252e09(0x59a)]||'','image_prompt':_0xcbd59['image_prompt']||'','timestamp':Date[_0x252e09(0xc22)](),'authorId':_0x47e4c1,'authorGroupId':_0x110a6a[_0x252e09(0xdbf)],'visibleGroupIds':null};if(_0xcbd59['postType']===_0x252e09(0x1a0)&&_0xcbd59[_0x252e09(0xa62)])try{const _0x6dbcb3=Array[_0x252e09(0x345)](_0xcbd59['prompt'])?_0xcbd59['prompt'][_0x252e09(0x59f)](0x0,0x2):[_0xcbd59[_0x252e09(0xa62)]];console[_0x252e09(0x4ee)](_0x252e09(0xcb6)+_0x6dbcb3[_0x252e09(0xac0)]+_0x252e09(0x1429));const _0x59d0f0=[];for(let _0x266175=0x0;_0x266175<_0x6dbcb3['length'];_0x266175++){const _0x562192=_0x6dbcb3[_0x266175];console[_0x252e09(0x4ee)](_0x252e09(0x77f)+(_0x266175+0x1)+'张图片，prompt:',_0x562192);const _0x5708bc=_0x181f13(_0x110a6a['id']),_0x423395=_0x562192+',\x20'+_0x5708bc['positive'],_0x3205a7=_0x5708bc[_0x252e09(0x1400)];console[_0x252e09(0x4ee)]('📝\x20使用'+(_0x5708bc['source']===_0x252e09(0xf34)?_0x252e09(0x1555):'系统')+'提示词配置'),console[_0x252e09(0x4ee)](_0x252e09(0x14bb),_0x423395),console[_0x252e09(0x4ee)](_0x252e09(0xe75),_0x3205a7);const _0x47140f=localStorage[_0x252e09(0xe2e)](_0x252e09(0x2cd)),_0x1128ef=localStorage[_0x252e09(0xe2e)](_0x252e09(0xb75))||_0x252e09(0x6b4),_0x11e79c=_0x338ee6();if(!_0x47140f)throw new Error(_0x252e09(0xe9b));const [_0x46b307,_0x7b1f46]=_0x11e79c[_0x252e09(0x1dd)][_0x252e09(0x505)]('x')[_0x252e09(0x556)](Number);let _0x59d99a;_0x1128ef[_0x252e09(0xf95)](_0x252e09(0x655))?_0x59d99a={'input':_0x423395,'model':_0x1128ef,'action':_0x252e09(0xa73),'parameters':{'params_version':0x3,'width':_0x46b307,'height':_0x7b1f46,'scale':_0x11e79c[_0x252e09(0x1ed)],'sampler':_0x11e79c[_0x252e09(0x1305)],'steps':_0x11e79c['steps'],'seed':_0x11e79c[_0x252e09(0x7e7)]===-0x1?Math[_0x252e09(0x13e5)](Math[_0x252e09(0x148a)]()*0x2540be3ff):_0x11e79c[_0x252e09(0x7e7)],'n_samples':0x1,'ucPreset':_0x11e79c['uc_preset'],'qualityToggle':_0x11e79c['quality_toggle'],'autoSmea':![],'dynamic_thresholding':![],'controlnet_strength':0x1,'legacy':![],'add_original_image':!![],'cfg_rescale':0x0,'noise_schedule':_0x252e09(0xdef),'legacy_v3_extend':![],'skip_cfg_above_sigma':null,'use_coords':![],'legacy_uc':![],'normalize_reference_strength_multiple':!![],'inpaintImg2ImgStrength':0x1,'characterPrompts':[],'v4_prompt':{'caption':{'base_caption':_0x423395,'char_captions':[]},'use_coords':![],'use_order':!![]},'v4_negative_prompt':{'caption':{'base_caption':_0x3205a7,'char_captions':[]},'legacy_uc':![]},'negative_prompt':_0x3205a7,'deliberate_euler_ancestral_bug':![],'prefer_brownian':!![]}}:_0x59d99a={'input':_0x423395,'model':_0x1128ef,'action':_0x252e09(0xa73),'parameters':{'width':_0x46b307,'height':_0x7b1f46,'scale':_0x11e79c['cfg_scale'],'sampler':_0x11e79c[_0x252e09(0x1305)],'steps':_0x11e79c[_0x252e09(0x361)],'seed':_0x11e79c['seed']===-0x1?Math[_0x252e09(0x13e5)](Math['random']()*0x2540be3ff):_0x11e79c[_0x252e09(0x7e7)],'n_samples':0x1,'ucPreset':_0x11e79c[_0x252e09(0xebf)],'qualityToggle':_0x11e79c[_0x252e09(0xc06)],'sm':_0x11e79c[_0x252e09(0x9f6)],'sm_dyn':_0x11e79c[_0x252e09(0x31a)],'dynamic_thresholding':![],'controlnet_strength':0x1,'legacy':![],'add_original_image':![],'cfg_rescale':0x0,'noise_schedule':'native','negative_prompt':_0x3205a7}};console[_0x252e09(0x4ee)]('🚀\x20发送NAI请求:',_0x59d99a);let _0x16c7d1;_0x1128ef[_0x252e09(0xf95)](_0x252e09(0x655))?_0x16c7d1=_0x252e09(0x5f9):_0x16c7d1=_0x252e09(0x11df);let _0x289ffe=_0x11e79c[_0x252e09(0xfc4)];_0x289ffe===_0x252e09(0xd3c)&&(_0x289ffe=_0x11e79c[_0x252e09(0x10d3)]||'');_0x289ffe&&_0x289ffe!==''&&(_0x16c7d1=_0x289ffe+encodeURIComponent(_0x16c7d1));const _0x4ad317=await fetch(_0x16c7d1,{'method':_0x252e09(0xb67),'headers':{'Content-Type':_0x252e09(0x4b5),'Authorization':'Bearer\x20'+_0x47140f},'body':JSON[_0x252e09(0x7cc)](_0x59d99a)});console[_0x252e09(0x4ee)](_0x252e09(0x12f5),_0x4ad317[_0x252e09(0x103e)]),console[_0x252e09(0x4ee)](_0x252e09(0x1206),[..._0x4ad317['headers'][_0x252e09(0x545)]()]);if(!_0x4ad317['ok']){const _0x12d2a0=await _0x4ad317[_0x252e09(0xda3)]();console[_0x252e09(0x52b)]('API错误响应:',_0x12d2a0);throw new Error('API请求失败\x20('+_0x4ad317[_0x252e09(0x103e)]+'):\x20'+_0x12d2a0);}const _0x2d812c=_0x4ad317[_0x252e09(0xb89)][_0x252e09(0x70d)](_0x252e09(0xbe0));console[_0x252e09(0x4ee)](_0x252e09(0x72d),_0x2d812c);let _0x28b0c9,_0x3998eb;if(_0x2d812c&&_0x2d812c['includes'](_0x252e09(0xdab))){console[_0x252e09(0x4ee)](_0x252e09(0xc69));const _0x3cf1f6=await _0x4ad317[_0x252e09(0xda3)]();console[_0x252e09(0x4ee)](_0x252e09(0x32d),_0x3cf1f6['length']);const _0x1a6e56=_0x3cf1f6['trim']()['split']('\x0a');let _0x3aec87=null;for(let _0x251cdc=_0x1a6e56[_0x252e09(0xac0)]-0x1;_0x251cdc>=0x0;_0x251cdc--){const _0x20f72e=_0x1a6e56[_0x251cdc][_0x252e09(0xa06)]();if(_0x20f72e[_0x252e09(0x9b8)](_0x252e09(0xeca))&&_0x20f72e!=='data:\x20[DONE]'){const _0x1c8895=_0x20f72e[_0x252e09(0x9fe)](0x6);try{const _0x7c1c75=JSON[_0x252e09(0x4a0)](_0x1c8895);if(_0x7c1c75[_0x252e09(0xd46)]===_0x252e09(0x1255)&&_0x7c1c75[_0x252e09(0x13ba)]){_0x3aec87=_0x7c1c75[_0x252e09(0x13ba)],console['log'](_0x252e09(0xe85));break;}if(_0x7c1c75[_0x252e09(0x3cc)]){_0x3aec87=_0x7c1c75[_0x252e09(0x3cc)],console['log'](_0x252e09(0x736));break;}if(_0x7c1c75[_0x252e09(0x13ba)]){_0x3aec87=_0x7c1c75['image'],console['log'](_0x252e09(0xbb6));break;}}catch(_0x377e92){_0x3aec87=_0x1c8895,console[_0x252e09(0x4ee)]('直接使用\x20base64\x20数据');break;}}}if(!_0x3aec87)throw new Error(_0x252e09(0xac9));const _0x129cef=_0x3aec87[_0x252e09(0x9b8)](_0x252e09(0x752)),_0x244c16=_0x3aec87[_0x252e09(0x9b8)](_0x252e09(0xe0e));if(_0x129cef||_0x244c16){console[_0x252e09(0x4ee)]('✅\x20检测到直接的图片\x20base64\x20数据\x20(PNG/JPEG)');const _0x213f31=atob(_0x3aec87),_0x2dca40=new Uint8Array(_0x213f31[_0x252e09(0xac0)]);for(let _0x2ca245=0x0;_0x2ca245<_0x213f31[_0x252e09(0xac0)];_0x2ca245++){_0x2dca40[_0x2ca245]=_0x213f31[_0x252e09(0x864)](_0x2ca245);}const _0x4e15da=new Blob([_0x2dca40],{'type':_0x129cef?_0x252e09(0x13ab):_0x252e09(0x1241)});console[_0x252e09(0x4ee)](_0x252e09(0x1380),_0x4e15da[_0x252e09(0xbc3)]);const _0x295f3b=new FileReader();_0x3998eb=await new Promise((_0x5913d3,_0x58dbd2)=>{const _0x3351c0=_0x252e09;_0x295f3b[_0x3351c0(0x502)]=()=>_0x5913d3(_0x295f3b[_0x3351c0(0x4fe)]),_0x295f3b[_0x3351c0(0x14b0)]=_0x58dbd2,_0x295f3b['readAsDataURL'](_0x4e15da);}),console['log'](_0x252e09(0x847));}else{console[_0x252e09(0x4ee)](_0x252e09(0xa8f));const _0x4d41ac=atob(_0x3aec87),_0x33bbf2=new Uint8Array(_0x4d41ac[_0x252e09(0xac0)]);for(let _0x1f71dc=0x0;_0x1f71dc<_0x4d41ac['length'];_0x1f71dc++){_0x33bbf2[_0x1f71dc]=_0x4d41ac[_0x252e09(0x864)](_0x1f71dc);}_0x28b0c9=new Blob([_0x33bbf2]),console['log'](_0x252e09(0x7bf),_0x28b0c9[_0x252e09(0xbc3)]);}}else _0x28b0c9=await _0x4ad317[_0x252e09(0x6ae)](),console[_0x252e09(0x4ee)](_0x252e09(0x100d),_0x28b0c9[_0x252e09(0x682)],'大小:',_0x28b0c9[_0x252e09(0xbc3)]);if(!_0x3998eb&&_0x28b0c9)try{if(typeof JSZip===_0x252e09(0x358))throw new Error(_0x252e09(0x624));const _0x4eb70a=await JSZip['loadAsync'](_0x28b0c9);console[_0x252e09(0x4ee)](_0x252e09(0x111a),Object[_0x252e09(0x1204)](_0x4eb70a[_0x252e09(0xca1)]));let _0x568a4b=null;for(let _0x2d8437 in _0x4eb70a['files']){if(_0x2d8437[_0x252e09(0x1232)](/\.(png|jpg|jpeg|webp)$/i)){_0x568a4b=_0x4eb70a[_0x252e09(0xca1)][_0x2d8437],console[_0x252e09(0x4ee)](_0x252e09(0x497),_0x2d8437);break;}}if(!_0x568a4b)throw new Error('ZIP文件中未找到图片');const _0x3e04d5=await _0x568a4b['async']('blob');console[_0x252e09(0x4ee)](_0x252e09(0x7a6),_0x3e04d5[_0x252e09(0xbc3)]);const _0xf62e4=new FileReader();_0x3998eb=await new Promise((_0x3da64b,_0x34ce87)=>{const _0xc5183c=_0x252e09;_0xf62e4['onloadend']=()=>_0x3da64b(_0xf62e4[_0xc5183c(0x4fe)]),_0xf62e4[_0xc5183c(0x14b0)]=_0x34ce87,_0xf62e4[_0xc5183c(0x101e)](_0x3e04d5);}),console['log']('✅\x20图片解压成功！');}catch(_0x2a4e96){console['error'](_0x252e09(0x120e),_0x2a4e96);throw new Error('图片解压失败:\x20'+_0x2a4e96[_0x252e09(0x790)]);}console[_0x252e09(0x4ee)](_0x252e09(0x64f)+(_0x266175+0x1)+'生成成功！'),_0x59d0f0['push'](_0x3998eb);}_0x58634e[_0x252e09(0xe5c)]=_0x59d0f0,_0x59d0f0[_0x252e09(0xac0)]===0x1&&(_0x58634e[_0x252e09(0x127b)]=_0x59d0f0[0x0]),_0x58634e[_0x252e09(0xa62)]=_0xcbd59[_0x252e09(0xa62)],_0x58634e[_0x252e09(0x1fa)]=_0x59d0f0[_0x252e09(0xac0)],console[_0x252e09(0x4ee)](_0x252e09(0x500)+_0x59d0f0['length']+'张');}catch(_0x12dace){console[_0x252e09(0x52b)](_0x252e09(0xb33),_0x12dace),_0x58634e[_0x252e09(0x1469)]=(_0x58634e[_0x252e09(0x1469)]||_0x58634e[_0x252e09(0x137f)]||'')+(_0x252e09(0xcab)+_0x12dace[_0x252e09(0x790)]+']');}await _0x372b85[_0x252e09(0x12c2)][_0x252e09(0x1327)](_0x58634e),_0x11aa82(_0xab67da+0x1);_0x9d45fd&&document[_0x252e09(0xfa0)](_0x252e09(0x337))['classList'][_0x252e09(0xea7)](_0x252e09(0xa37))&&await _0x1098dc();continue;case _0x252e09(0x691):{const _0x5d5417=await _0x372b85['qzonePosts'][_0x252e09(0x70d)](parseInt(_0xcbd59[_0x252e09(0x3eb)]));if(_0x5d5417){if(!_0x5d5417[_0x252e09(0xbab)])_0x5d5417[_0x252e09(0xbab)]=[];const _0x288d61=_0xcbd59[_0x252e09(0x1023)]||_0x110a6a['originalName'],_0x5e3dce=(_0x64175a,_0x479cb4=null,_0x52ffd7=null)=>({'commenterName':_0x288d61,'text':_0x92c3c3(_0x64175a,_0x110a6a),'meaning':_0x479cb4,'replyTo':_0x52ffd7,'timestamp':Date[_0x252e09(0xc22)]()});if(_0xcbd59[_0x252e09(0x117c)]){const _0x226bfa=_0x8f0871[_0x252e09(0x413)]['find'](_0x34c807=>_0x34c807['name']===_0xcbd59[_0x252e09(0x117c)]);_0x226bfa?_0x5d5417[_0x252e09(0xbab)][_0x252e09(0x481)](_0x5e3dce(_0x226bfa[_0x252e09(0x3f5)],_0x226bfa['name'],_0xcbd59[_0x252e09(0x5ee)]||null)):(console[_0x252e09(0x7fa)](_0x252e09(0x12ec)+_0xcbd59['stickerMeaning']+'\x22'),_0x5d5417[_0x252e09(0xbab)][_0x252e09(0x481)](_0x5e3dce(_0x252e09(0x103c)+_0xcbd59[_0x252e09(0x117c)]+']',null,_0xcbd59['replyTo']||null)));}else{if(Array[_0x252e09(0x345)](_0xcbd59[_0x252e09(0xbab)]))_0xcbd59['comments']['forEach'](_0x3f7d2d=>{const _0x1960b2=_0x252e09;typeof _0x3f7d2d===_0x1960b2(0x857)&&_0x3f7d2d['trim']()&&_0x5d5417['comments']['push'](_0x5e3dce(_0x3f7d2d,null,_0xcbd59[_0x1960b2(0x5ee)]||null));});else typeof _0xcbd59[_0x252e09(0xc6e)]==='string'&&_0xcbd59[_0x252e09(0xc6e)][_0x252e09(0xa06)]()&&_0x5d5417[_0x252e09(0xbab)]['push'](_0x5e3dce(_0xcbd59[_0x252e09(0xc6e)],null,_0xcbd59['replyTo']||null));}await _0x372b85[_0x252e09(0x12c2)][_0x252e09(0x1477)](_0x5d5417['id'],{'comments':_0x5d5417[_0x252e09(0xbab)]}),_0x11aa82(_0xab67da+0x1),console[_0x252e09(0x4ee)]('后台活动:\x20角色\x20\x22'+_0x110a6a[_0x252e09(0x1023)]+'\x22\x20评论了动态\x20#'+_0xcbd59[_0x252e09(0x3eb)]);if(!_0x110a6a[_0x252e09(0x12b5)])_0x110a6a[_0x252e09(0x12b5)]={};_0x110a6a[_0x252e09(0x12b5)][_0xcbd59[_0x252e09(0x3eb)]]=Date[_0x252e09(0xc22)]();}continue;}case _0x252e09(0x547):const _0x57e7b2=await _0x372b85[_0x252e09(0x12c2)][_0x252e09(0x70d)](parseInt(_0xcbd59[_0x252e09(0x3eb)]));if(_0x57e7b2){if(!_0x57e7b2[_0x252e09(0x48b)])_0x57e7b2[_0x252e09(0x48b)]=[];!_0x57e7b2[_0x252e09(0x48b)][_0x252e09(0xf95)](_0x110a6a[_0x252e09(0x1023)])&&(_0x57e7b2[_0x252e09(0x48b)][_0x252e09(0x481)](_0x110a6a['name']),await _0x372b85[_0x252e09(0x12c2)][_0x252e09(0x1477)](_0x57e7b2['id'],{'likes':_0x57e7b2['likes']}),_0x11aa82(_0xab67da+0x1),_0x9d45fd&&document[_0x252e09(0xfa0)]('qzone-screen')[_0x252e09(0x128f)][_0x252e09(0xea7)](_0x252e09(0xa37))&&await _0x1098dc());}continue;case _0x252e09(0xf20):{const _0x2f4657=await _0x372b85[_0x252e09(0x12c2)][_0x252e09(0x70d)](parseInt(_0xcbd59[_0x252e09(0x3eb)]));if(_0x2f4657){const _0x20d8cb={'type':'repost','timestamp':Date[_0x252e09(0xc22)](),'authorId':_0x47e4c1,'authorGroupId':_0x110a6a[_0x252e09(0xdbf)],'repostComment':_0xcbd59[_0x252e09(0x7ab)]||'','originalPost':_0x2f4657,'visibleGroupIds':null};await _0x372b85[_0x252e09(0x12c2)][_0x252e09(0x1327)](_0x20d8cb),_0x11aa82(_0xab67da+0x1),console['log'](_0x252e09(0x13f0)+_0x110a6a[_0x252e09(0x1023)]+_0x252e09(0x44f)+_0xcbd59[_0x252e09(0x3eb)]);}continue;}case _0x252e09(0xae3):!_0x1fd843[_0x252e09(0x684)]&&!_0x1fd843['isAwaitingResponse']&&(_0x8f0871[_0x252e09(0xac8)]=_0x47e4c1,_0x1fd843[_0x252e09(0xac8)]=_0x47e4c1,_0x1fd843[_0x252e09(0x1531)]=!![],_0x1fd843[_0x252e09(0x24f)]=_0x110a6a[_0x252e09(0x1364)],_0x1fd843[_0x252e09(0xdd2)]=_0xcbd59[_0x252e09(0x1023)]||_0x110a6a[_0x252e09(0x1023)],_0x59fa07());continue;case _0x252e09(0xccd):!_0x1fd843['isActive']&&!_0x1fd843[_0x252e09(0x1531)]&&(_0x8f0871['activeChatId']=_0x47e4c1,_0x1fd843['isAwaitingResponse']=!![],_0x1fd843[_0x252e09(0x24f)]=!![],_0x1fd843[_0x252e09(0x307)]='ai',_0x1fd843[_0x252e09(0xdd2)]=_0xcbd59['name'],_0x59fa07());continue;case _0x252e09(0xe14):let _0x5ab958;if(_0x110a6a[_0x252e09(0x1364)]){const _0x22e2f2=_0x110a6a[_0x252e09(0x2cf)][_0x252e09(0x7ed)](_0x41595e=>_0x41595e[_0x252e09(0x93e)]===_0xcbd59[_0x252e09(0x1023)]);_0x5ab958=_0x22e2f2?_0x22e2f2[_0x252e09(0x5c9)]:_0xcbd59[_0x252e09(0x1023)];}else _0x5ab958=_0x110a6a[_0x252e09(0x1023)];const _0x44988d=_0xcbd59[_0x252e09(0x7e4)]?'\x20'+_0xcbd59['suffix'][_0x252e09(0xa06)]():'',_0x234c10=_0x5ab958+_0x252e09(0x98b)+_0x44988d,_0x3c561a={'role':_0x252e09(0x1417),'type':_0x252e09(0x260),'content':_0x234c10,'timestamp':Date[_0x252e09(0xc22)]()};_0x110a6a['history']['push'](_0x3c561a);if(_0x9d45fd){const _0x36a100=document[_0x252e09(0xfa0)](_0x252e09(0x1025));_0x36a100[_0x252e09(0x128f)][_0x252e09(0x443)](_0x252e09(0x1093)),void _0x36a100['offsetWidth'],_0x36a100['classList'][_0x252e09(0x1327)](_0x252e09(0x1093)),setTimeout(()=>_0x36a100[_0x252e09(0x128f)]['remove']('pat-animation'),0x1f4),_0x25d29f(_0x3c561a,_0x110a6a);}else _0x1d3fa5(_0x47e4c1,_0x234c10);continue;case'update_status':_0x110a6a[_0x252e09(0x103e)][_0x252e09(0xda3)]=_0xcbd59[_0x252e09(0x2c6)],_0x110a6a['status'][_0x252e09(0x146d)]=_0xcbd59[_0x252e09(0xacc)]||![],_0x110a6a['status'][_0x252e09(0x48e)]=Date[_0x252e09(0xc22)]();const _0x113851={'role':'system','type':_0x252e09(0x260),'content':'['+_0x110a6a[_0x252e09(0x1023)]+_0x252e09(0x7d9)+_0xcbd59['status_text']+']','timestamp':Date['now']()};_0x110a6a['history'][_0x252e09(0x481)](_0x113851);_0x9d45fd&&_0x25d29f(_0x113851,_0x110a6a);_0x2d75fb();continue;case'location_share':_0x37c72b={..._0x27bc9c,'type':_0x252e09(0xd93),'content':_0xcbd59['content']};break;case _0x252e09(0xded):if(_0x46bc8b[_0x252e09(0x684)]&&_0x46bc8b[_0x252e09(0xac8)]===_0x47e4c1){const _0x35b2d5=_0xcbd59[_0x252e09(0x9c1)]||_0xcbd59[_0x252e09(0x1f4)]||_0xcbd59[_0x252e09(0x1023)];if(typeof _0x35b2d5===_0x252e09(0x857)&&_0x35b2d5['trim']()){const _0x40cf85=_0x35b2d5[_0x252e09(0x128a)](/^\[?\d+\]?[\s.-]*/,'')[_0x252e09(0xa06)](),_0x450a05=_0x46bc8b[_0x252e09(0x84a)]['findIndex'](_0x2e5c2b=>_0x2e5c2b['name'][_0x252e09(0x1f3)]()===_0x40cf85[_0x252e09(0x1f3)]());if(_0x450a05>-0x1){_0x3687be(_0x450a05);const _0x51bfaa=_0x46bc8b[_0x252e09(0x84a)][_0x450a05];let _0x5d8c4f;if(_0x110a6a['isGroup']){const _0x3b40ba=_0x110a6a['members']['find'](_0x551541=>_0x551541[_0x252e09(0x93e)]===_0xcbd59[_0x252e09(0x1023)]);_0x5d8c4f=_0x3b40ba?_0x3b40ba[_0x252e09(0x5c9)]:_0xcbd59[_0x252e09(0x1023)];}else _0x5d8c4f=_0x110a6a['name'];const _0x1c292f={'role':'system','type':_0x252e09(0x260),'content':_0x252e09(0x947)+_0x5d8c4f+_0x252e09(0xe71)+_0x51bfaa[_0x252e09(0x1023)]+_0x252e09(0x3a0)+_0x51bfaa[_0x252e09(0x27e)]+']','timestamp':Date[_0x252e09(0xc22)]()};_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x481)](_0x1c292f),_0x9d45fd&&_0x25d29f(_0x1c292f,_0x110a6a);}else console[_0x252e09(0x7fa)](_0x252e09(0x8bd)+_0x35b2d5+_0x252e09(0xf5d)+_0x40cf85+_0x252e09(0x134c));}else console[_0x252e09(0x52b)](_0x252e09(0x1502),_0xcbd59);}continue;case _0x252e09(0x1045):const _0x40c3c0={'chatId':_0x47e4c1,'authorId':_0x47e4c1,'description':_0xcbd59[_0x252e09(0x211)],'timestamp':Date[_0x252e09(0xc22)](),'type':_0x252e09(0x13f7)};await _0x372b85[_0x252e09(0x9ce)][_0x252e09(0x1327)](_0x40c3c0),console[_0x252e09(0x4ee)](_0x252e09(0x846)+_0x110a6a[_0x252e09(0x1023)]+_0x252e09(0x104a),_0xcbd59[_0x252e09(0x211)]);continue;case _0x252e09(0x1435):const _0xb5b61f=new Date(_0xcbd59[_0x252e09(0x154c)]);if(!isNaN(_0xb5b61f)&&_0xb5b61f>new Date()){const _0x2baebf={'chatId':_0x47e4c1,'authorId':_0x47e4c1,'description':_0xcbd59[_0x252e09(0x1187)],'timestamp':Date[_0x252e09(0xc22)](),'type':_0x252e09(0x11a7),'targetDate':_0xb5b61f[_0x252e09(0x261)]()};await _0x372b85[_0x252e09(0x9ce)][_0x252e09(0x1327)](_0x2baebf),console[_0x252e09(0x4ee)]('AI\x20\x22'+_0x110a6a[_0x252e09(0x1023)]+_0x252e09(0xe7c),_0xcbd59[_0x252e09(0x1187)]);}continue;case _0x252e09(0x4bb):if(!_0x110a6a[_0x252e09(0x1364)]){_0x110a6a['relationship']['status']=_0x252e09(0x18f);const _0x436fc2={'role':_0x252e09(0x1417),'content':_0x252e09(0x50b),'timestamp':Date[_0x252e09(0xc22)](),'isHidden':!![]};_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x481)](_0x436fc2),await _0x372b85[_0x252e09(0x1260)][_0x252e09(0x11d5)](_0x110a6a);_0x9d45fd&&_0x54d32b(_0x47e4c1);_0x2d75fb();break;}continue;case'friend_request_response':!_0x110a6a[_0x252e09(0x1364)]&&_0x110a6a['relationship']?.[_0x252e09(0x103e)]==='pending_ai_approval'&&(_0xcbd59[_0x252e09(0x8d6)]===_0x252e09(0x141d)?(_0x110a6a['relationship']['status']=_0x252e09(0x14b5),_0x37c72b={..._0x27bc9c,'content':'我通过了你的好友申请，我们现在是好友啦！'}):(_0x110a6a['relationship'][_0x252e09(0x103e)]=_0x252e09(0x18f),_0x37c72b={..._0x27bc9c,'content':_0x252e09(0xe22)}),_0x110a6a[_0x252e09(0x1171)][_0x252e09(0x1163)]='');break;case'poll':const _0x386fae=typeof _0xcbd59[_0x252e09(0x1106)]===_0x252e09(0x857)?_0xcbd59[_0x252e09(0x1106)][_0x252e09(0x505)]('\x0a')[_0x252e09(0xde7)](_0x486531=>_0x486531[_0x252e09(0xa06)]()):Array[_0x252e09(0x345)](_0xcbd59[_0x252e09(0x1106)])?_0xcbd59[_0x252e09(0x1106)]:[];if(_0x386fae[_0x252e09(0xac0)]<0x2)continue;_0x37c72b={..._0x27bc9c,'type':'poll','question':_0xcbd59['question'],'options':_0x386fae,'votes':{},'isClosed':![]};break;case _0x252e09(0x1338):{const {itemName:_0x1f9d55,itemPrice:_0x3488eb,image_prompt:_0x380848}=_0xcbd59;if(_0x1f9d55&&!isNaN(parseFloat(_0x3488eb))&&_0x380848){const _0x4fdc61='https://image.pollinations.ai/prompt/'+encodeURIComponent(_0x380848);_0x37c72b={..._0x27bc9c,'type':_0x252e09(0x1338),'items':[{'name':_0x1f9d55,'price':parseFloat(_0x3488eb),'imageUrl':_0x4fdc61,'quantity':0x1}],'total':parseFloat(_0x3488eb),'recipients':_0xcbd59[_0x252e09(0x8ef)]||null};}else console[_0x252e09(0x7fa)](_0x252e09(0x1018),_0xcbd59);break;}case _0x252e09(0xde1):const _0x249d3e=_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x7ed)](_0x3c3c03=>_0x3c3c03[_0x252e09(0xe55)]===_0xcbd59[_0x252e09(0xcf3)]);_0x249d3e&&!_0x249d3e[_0x252e09(0x10df)]&&(Object[_0x252e09(0x1204)](_0x249d3e[_0x252e09(0xb61)])[_0x252e09(0x458)](_0x205cec=>{const _0x23ea0f=_0x252e09,_0x136db5=_0x249d3e['votes'][_0x205cec]['indexOf'](_0xcbd59[_0x23ea0f(0x1023)]);_0x136db5>-0x1&&_0x249d3e[_0x23ea0f(0xb61)][_0x205cec][_0x23ea0f(0x11ac)](_0x136db5,0x1);}),!_0x249d3e[_0x252e09(0xb61)][_0xcbd59['choice']]&&(_0x249d3e[_0x252e09(0xb61)][_0xcbd59[_0x252e09(0x13f4)]]=[]),!_0x249d3e[_0x252e09(0xb61)][_0xcbd59['choice']][_0x252e09(0xf95)](_0xcbd59[_0x252e09(0x1023)])&&_0x249d3e['votes'][_0xcbd59[_0x252e09(0x13f4)]][_0x252e09(0x481)](_0xcbd59[_0x252e09(0x1023)]),_0x9d45fd&&_0x54d32b(_0x47e4c1));continue;case _0x252e09(0x148b):_0x37c72b={..._0x27bc9c,..._0xcbd59,'totalAmount':_0xcbd59[_0x252e09(0x4a8)],'claimedBy':{},'isFullyClaimed':![]};_0xcbd59[_0x252e09(0x48c)]&&(_0x37c72b['receiverName']=_0xcbd59['receiver'],delete _0x37c72b['receiver']);break;case _0x252e09(0xfa8):const _0x9d632d=_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x7ed)](_0x1c1436=>_0x1c1436[_0x252e09(0xe55)]===_0xcbd59[_0x252e09(0x2df)]),_0x101d01=_0xcbd59[_0x252e09(0x1023)],_0x26b176=_0x110a6a[_0x252e09(0x2cf)][_0x252e09(0x75d)](_0x4ded42=>_0x4ded42[_0x252e09(0x93e)]===_0x101d01);if(!_0x26b176){console[_0x252e09(0x7fa)](_0x252e09(0x12bb)+_0x101d01+_0x252e09(0xbf8));continue;}if(_0x9d632d&&_0x9d632d[_0x252e09(0xef9)]==='direct'){if(_0x9d632d[_0x252e09(0xe0f)]!==_0xcbd59[_0x252e09(0x1023)]){console['warn'](_0x252e09(0x12bb)+_0xcbd59['name']+'\x22\x20尝试领取不属于自己的专属红包\x20(接收人:\x20'+_0x9d632d[_0x252e09(0xe0f)]+')。操作已被拦截。');continue;}}if(_0x9d632d&&!_0x9d632d[_0x252e09(0xc71)]&&!(_0x9d632d[_0x252e09(0xe57)]&&_0x9d632d[_0x252e09(0xe57)][_0xcbd59[_0x252e09(0x1023)]])){let _0x2ca48e=0x0;const _0x43158d=_0x9d632d['totalAmount']-Object[_0x252e09(0x142f)](_0x9d632d[_0x252e09(0xe57)]||{})[_0x252e09(0xd68)]((_0x170d2d,_0x1e73ff)=>_0x170d2d+_0x1e73ff,0x0),_0x1149c1=_0x9d632d[_0x252e09(0x1383)]-Object['keys'](_0x9d632d['claimedBy']||{})['length'];if(_0x1149c1>0x0){if(_0x9d632d[_0x252e09(0xef9)]===_0x252e09(0xaf3))_0x2ca48e=_0x9d632d[_0x252e09(0x4df)];else{if(_0x1149c1===0x1)_0x2ca48e=_0x43158d;else{const _0xa51203=0.01,_0x16214f=_0x43158d-(_0x1149c1-0x1)*_0xa51203;_0x2ca48e=Math[_0x252e09(0x148a)]()*(_0x16214f-_0xa51203)+_0xa51203;}}_0x2ca48e=parseFloat(_0x2ca48e[_0x252e09(0x3b8)](0x2));if(!_0x9d632d['claimedBy'])_0x9d632d[_0x252e09(0xe57)]={};_0x9d632d[_0x252e09(0xe57)][_0xcbd59[_0x252e09(0x1023)]]=_0x2ca48e;const _0x520cf7=_0x110a6a[_0x252e09(0x2cf)][_0x252e09(0x7ed)](_0x1f76c1=>_0x1f76c1[_0x252e09(0x93e)]===_0xcbd59[_0x252e09(0x1023)]),_0x14c434=_0x520cf7?_0x520cf7[_0x252e09(0x5c9)]:_0xcbd59['name'],_0x2e18ed=_0x185e1d(_0x110a6a,_0x9d632d[_0x252e09(0x213)]),_0x4cc2ae={'role':'system','type':_0x252e09(0x260),'content':_0x14c434+'\x20领取了\x20'+_0x2e18ed+_0x252e09(0xdbe),'timestamp':Date[_0x252e09(0xc22)]()};_0x110a6a[_0x252e09(0xc88)]['push'](_0x4cc2ae);let _0x22a459=_0x252e09(0x1399)+_0x14c434+_0x252e09(0x11d1)+_0x2ca48e['toFixed'](0x2)+_0x252e09(0x241);if(Object[_0x252e09(0x1204)](_0x9d632d[_0x252e09(0xe57)])[_0x252e09(0xac0)]>=_0x9d632d[_0x252e09(0x1383)]){_0x9d632d['isFullyClaimed']=!![];const _0x1456d2={'role':_0x252e09(0x1417),'type':_0x252e09(0x260),'content':_0x2e18ed+_0x252e09(0xda7),'timestamp':Date[_0x252e09(0xc22)]()+0x1};_0x110a6a['history']['push'](_0x1456d2);let _0x314393={'name':'','amount':-0x1};_0x9d632d[_0x252e09(0xef9)]==='lucky'&&_0x9d632d[_0x252e09(0x1383)]>0x1&&Object[_0x252e09(0x545)](_0x9d632d[_0x252e09(0xe57)])[_0x252e09(0x458)](([_0x4e4c5,_0x282ffa])=>{const _0x1b9de4=_0x252e09;_0x282ffa>_0x314393[_0x1b9de4(0x4a8)]&&(_0x314393={'name':_0x4e4c5,'amount':_0x282ffa});});if(_0x314393[_0x252e09(0x1023)]){const _0x9b7060=_0x110a6a[_0x252e09(0x2cf)][_0x252e09(0x7ed)](_0x21ae2c=>_0x21ae2c['originalName']===_0x314393[_0x252e09(0x1023)]),_0x472cc2=_0x9b7060?_0x9b7060[_0x252e09(0x5c9)]:_0x314393[_0x252e09(0x1023)];_0x22a459+='\x20红包已被领完，手气王是\x20'+_0x472cc2+'！';}else _0x22a459+='\x20红包已被领完。';}_0x22a459+=_0x252e09(0xaf6);const _0x37af32={'role':_0x252e09(0x1417),'content':_0x22a459,'timestamp':Date[_0x252e09(0xc22)]()+0x2,'isHidden':!![]};_0x110a6a['history'][_0x252e09(0x481)](_0x37af32);}_0x9d45fd&&(_0x54d32b(_0x47e4c1),_0x2d75fb());}continue;case _0x252e09(0x1420):{const _0x8bbd8=_0x110a6a[_0x252e09(0xc88)][_0x252e09(0xb22)](_0x4b8233=>_0x4b8233[_0x252e09(0xe55)]===_0xcbd59['for_timestamp']);if(_0x8bbd8>-0x1){const _0x3170d9=_0x110a6a['history'][_0x8bbd8];_0x3170d9[_0x252e09(0x103e)]=_0x252e09(0x13fd);}continue;}case _0x252e09(0xb8e):{const _0x39585f=_0x110a6a[_0x252e09(0xc88)][_0x252e09(0xb22)](_0x31acb6=>_0x31acb6[_0x252e09(0xe55)]===_0xcbd59[_0x252e09(0xe39)]);if(_0x39585f>-0x1){const _0x8be469=_0x110a6a[_0x252e09(0xc88)][_0x39585f];_0x8be469['status']=_0x252e09(0x1467);const _0x4fbee2={'role':'assistant','senderName':_0x110a6a[_0x252e09(0x1023)],'type':_0x252e09(0x35f),'isRefund':!![],'amount':_0x8be469[_0x252e09(0x4a8)],'note':_0x252e09(0x948),'timestamp':_0x3b3171++};_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x481)](_0x4fbee2),_0x9d45fd&&(_0x25d29f(_0x4fbee2,_0x110a6a),_0x54d32b(_0x47e4c1));}continue;}case _0x252e09(0x111c):if(_0x110a6a[_0x252e09(0x1364)]&&_0xcbd59[_0x252e09(0x1326)]){const _0x32dcf2=_0xcbd59[_0x252e09(0x1326)]['trim'](),_0x17e50d=_0x110a6a[_0x252e09(0x2cf)][_0x252e09(0x556)](_0x68dfba=>_0x68dfba['originalName']);if(_0x17e50d[_0x252e09(0xf95)](_0x32dcf2)){console[_0x252e09(0x7fa)](_0x252e09(0x9e5)+_0xcbd59[_0x252e09(0x1023)]+_0x252e09(0x5b3)+_0x32dcf2+_0x252e09(0x1526));continue;}_0x110a6a[_0x252e09(0x1023)]=_0x32dcf2;const _0x5316b2=_0x110a6a['members'][_0x252e09(0x7ed)](_0x6cf2b7=>_0x6cf2b7[_0x252e09(0x93e)]===_0xcbd59['name']),_0x17fb72=_0x5316b2?_0x5316b2[_0x252e09(0x5c9)]:_0xcbd59[_0x252e09(0x1023)],_0x4ad403={'role':'system','type':_0x252e09(0x260),'content':_0x17fb72+_0x252e09(0x526)+_0x110a6a[_0x252e09(0x1023)]+'”','timestamp':_0x3b3171++};_0x110a6a['history']['push'](_0x4ad403),_0x9d45fd&&(_0x25d29f(_0x4ad403,_0x110a6a),document[_0x252e09(0xfa0)](_0x252e09(0x250))[_0x252e09(0xc62)]=_0x110a6a['name']);}continue;case'change_remark_name':if(!_0x110a6a[_0x252e09(0x1364)]&&_0xcbd59[_0x252e09(0x1326)]){const _0x2b9dd0=_0x110a6a[_0x252e09(0x1023)],_0x232634=_0xcbd59[_0x252e09(0x1326)][_0x252e09(0xa06)]();if(_0x232634&&_0x232634!==_0x2b9dd0){!_0x110a6a[_0x252e09(0xba7)]&&(_0x110a6a['nameHistory']=[]);!_0x110a6a['nameHistory']['includes'](_0x2b9dd0)&&_0x110a6a[_0x252e09(0xba7)][_0x252e09(0x481)](_0x2b9dd0);_0x110a6a[_0x252e09(0x1023)]=_0x232634;const _0x588bc4={'role':'system','type':'pat_message','content':'“'+_0x110a6a[_0x252e09(0x93e)]+_0x252e09(0x138d)+_0x232634+'”','timestamp':_0x3b3171++};_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x481)](_0x588bc4);const _0xe68b3a={'role':_0x252e09(0x1417),'content':_0x252e09(0x1000)+_0x232634+_0x252e09(0x8f7),'timestamp':_0x3b3171++,'isHidden':!![]};_0x110a6a['history'][_0x252e09(0x481)](_0xe68b3a),_0x9d45fd&&(_0x25d29f(_0x588bc4,_0x110a6a),document['getElementById'](_0x252e09(0x250))[_0x252e09(0xc62)]=_0x232634),await _0xd7f0ec(_0x110a6a);}}continue;case _0x252e09(0x154f):if(_0x110a6a[_0x252e09(0x1364)]&&_0xcbd59['avatar_name']){const _0x422242=_0xcbd59['avatar_name'],_0x33c01e=_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x77a)]||[],_0x3f6035=_0x33c01e[_0x252e09(0x7ed)](_0x1e5b4a=>_0x1e5b4a[_0x252e09(0x1023)]===_0x422242);if(_0x3f6035){_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0x4a1)]=_0x3f6035[_0x252e09(0x3f5)];const _0x136006=_0x110a6a[_0x252e09(0x2cf)][_0x252e09(0x7ed)](_0x2f35b9=>_0x2f35b9['originalName']===_0xcbd59[_0x252e09(0x1023)]),_0xcdd927=_0x136006?_0x136006[_0x252e09(0x5c9)]:_0xcbd59[_0x252e09(0x1023)],_0x12d93b={'role':_0x252e09(0x1417),'type':_0x252e09(0x260),'content':_0xcdd927+_0x252e09(0x12a6),'timestamp':_0x3b3171++};_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x481)](_0x12d93b),_0x9d45fd&&_0x25d29f(_0x12d93b,_0x110a6a);}else console['warn'](_0x252e09(0x9a7)+_0x422242+'\x22');}continue;case'system_message':_0x37c72b={'role':_0x252e09(0x1417),'type':_0x252e09(0x260),'content':_0xcbd59['content'],'timestamp':Date['now']()};break;case _0x252e09(0x8c1):_0x37c72b={..._0x27bc9c,'type':_0x252e09(0x8c1),'title':_0xcbd59[_0x252e09(0x1187)],'description':_0xcbd59[_0x252e09(0x211)],'source_name':_0xcbd59[_0x252e09(0x316)],'content':_0xcbd59[_0x252e09(0x1469)]};break;case _0x252e09(0x6d4):const _0xbf0270=_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x7ed)](_0xebf378=>_0xebf378[_0x252e09(0xe55)]===_0xcbd59[_0x252e09(0xdda)]);if(_0xbf0270){const _0x503f6d={'timestamp':_0xbf0270['timestamp'],'senderName':_0xbf0270['senderName']||(_0xbf0270[_0x252e09(0xc92)]===_0x252e09(0xcb0)?_0x110a6a[_0x252e09(0x12d7)][_0x252e09(0xda5)]||'我':_0x110a6a[_0x252e09(0x1023)]),'content':String(_0xbf0270['content']||'')[_0x252e09(0x9fe)](0x0,0x32)};_0x37c72b={..._0x27bc9c,'content':_0xcbd59[_0x252e09(0xf98)],'quote':_0x503f6d};}else _0x37c72b={..._0x27bc9c,'content':_0xcbd59[_0x252e09(0xf98)]};break;case _0x252e09(0x571):{if(!_0x9d45fd)continue;const _0x5bf4c4={..._0x27bc9c,'content':_0xcbd59[_0x252e09(0x1469)]},_0x1bb0ad=_0x20ac60(_0x5bf4c4,_0x110a6a);_0x25d29f(_0x5bf4c4,_0x110a6a,!![]),await new Promise(_0x4060e4=>setTimeout(_0x4060e4,Math[_0x252e09(0x148a)]()*0x3e8+0x5dc));const _0x3d128f=document[_0x252e09(0xfb1)](_0x252e09(0x9b6)+_0x5bf4c4['timestamp']+'\x22]')?.[_0x252e09(0x187)](_0x252e09(0xf77));if(_0x3d128f){_0x3d128f['classList'][_0x252e09(0x1327)](_0x252e09(0x136c)),await new Promise(_0x1f1836=>setTimeout(_0x1f1836,0x12c));const _0x4849b6={'role':_0x252e09(0x10af),'senderName':_0xcbd59[_0x252e09(0x1023)]||_0x110a6a['name'],'type':_0x252e09(0x123a),'content':_0x252e09(0x13c1),'timestamp':_0x5bf4c4[_0x252e09(0xe55)],'recalledData':{'originalType':'text','originalContent':_0xcbd59[_0x252e09(0x1469)]}},_0x521043=_0x110a6a[_0x252e09(0xc88)][_0x252e09(0xb22)](_0x44d24d=>_0x44d24d[_0x252e09(0xe55)]===_0x5bf4c4[_0x252e09(0xe55)]);_0x521043>-0x1?_0x110a6a['history'][_0x521043]=_0x4849b6:_0x110a6a['history']['push'](_0x4849b6);const _0x1ad299=await _0x20ac60(_0x4849b6,_0x110a6a);document[_0x252e09(0x1122)]['contains'](_0x3d128f)&&_0x3d128f[_0x252e09(0xcdd)][_0x252e09(0x5d2)](_0x1ad299,_0x3d128f);}continue;}case'text':_0x37c72b={..._0x27bc9c,'content':String(_0xcbd59['content']||_0xcbd59['message'])};break;case _0x252e09(0xf14):if(_0xcbd59[_0x252e09(0x1421)]){const _0x445a6d=_0x8f0871['userStickers'][_0x252e09(0x7ed)](_0x5841a1=>_0x5841a1['name']===_0xcbd59[_0x252e09(0x1421)]);_0x445a6d?_0x37c72b={..._0x27bc9c,'type':_0x252e09(0xf14),'content':_0x445a6d['url'],'meaning':_0x445a6d[_0x252e09(0x1023)]}:(console[_0x252e09(0x7fa)](_0x252e09(0xde2)+_0xcbd59['meaning']+'\x22'),_0x37c72b={..._0x27bc9c,'type':'text','content':_0x252e09(0x103c)+_0xcbd59[_0x252e09(0x1421)]+']'});}else console[_0x252e09(0x7fa)](_0x252e09(0x13bb),_0xcbd59),_0x37c72b={..._0x27bc9c,'type':'sticker','content':_0xcbd59[_0x252e09(0x3f5)],'meaning':_0x252e09(0x74f)};break;case _0x252e09(0x8b0):_0x37c72b={..._0x27bc9c,'type':_0x252e09(0x8b0),'content':_0xcbd59[_0x252e09(0x211)],'image_prompt':_0xcbd59['image_prompt']};break;case _0x252e09(0x412):_0x37c72b={..._0x27bc9c,'type':_0x252e09(0x412),'content':_0xcbd59[_0x252e09(0x1469)]};break;case'transfer':_0x37c72b={..._0x27bc9c,'type':_0x252e09(0x35f),'amount':_0xcbd59[_0x252e09(0x4a8)],'note':_0xcbd59[_0x252e09(0x14d7)],'receiverName':_0xcbd59[_0x252e09(0x48c)]||'我'};break;case _0x252e09(0x1332):_0x37c72b={..._0x27bc9c,'type':_0x252e09(0x1332),'productInfo':_0xcbd59[_0x252e09(0x51a)],'amount':_0xcbd59[_0x252e09(0x4a8)],'status':_0x252e09(0x2ea),'countdownEndTime':Date['now']()+0xf*0x3c*0x3e8};break;case'waimai_order':_0x37c72b={..._0x27bc9c,'type':_0x252e09(0x1e7),'productInfo':_0xcbd59[_0x252e09(0x51a)],'amount':_0xcbd59['amount'],'greeting':_0xcbd59[_0x252e09(0x367)],'recipientName':_0xcbd59['recipientName']||null};break;case _0x252e09(0x1492):_0x37c72b={..._0x27bc9c,..._0xcbd59};break;case _0x252e09(0x1a0):try{console[_0x252e09(0x4ee)](_0x252e09(0x135e),_0xcbd59[_0x252e09(0xa62)]);const _0x2e737d=_0x181f13(_0x110a6a['id']),_0x137280=_0xcbd59[_0x252e09(0xa62)]||_0x252e09(0x8b2),_0x103622=_0x137280+',\x20'+_0x2e737d['positive'],_0x6f3180=_0x2e737d[_0x252e09(0x1400)];console[_0x252e09(0x4ee)](_0x252e09(0x40f)+(_0x2e737d[_0x252e09(0x5f7)]===_0x252e09(0xf34)?'角色专属':'系统')+_0x252e09(0x3df)),console[_0x252e09(0x4ee)](_0x252e09(0x14bb),_0x103622),console[_0x252e09(0x4ee)](_0x252e09(0xe75),_0x6f3180);const _0x1cb9c5=localStorage[_0x252e09(0xe2e)](_0x252e09(0x2cd)),_0x3d72c8=localStorage['getItem']('novelai-model')||_0x252e09(0x6b4),_0x17c47a=_0x338ee6();if(!_0x1cb9c5)throw new Error('NovelAI\x20API\x20Key未配置。请在NovelAI设置中填写API\x20Key。');const [_0x5bca16,_0x434e37]=_0x17c47a[_0x252e09(0x1dd)]['split']('x')[_0x252e09(0x556)](Number);let _0x1a7c94;_0x3d72c8[_0x252e09(0xf95)](_0x252e09(0x655))?_0x1a7c94={'input':_0x103622,'model':_0x3d72c8,'action':_0x252e09(0xa73),'parameters':{'params_version':0x3,'width':_0x5bca16,'height':_0x434e37,'scale':_0x17c47a['cfg_scale'],'sampler':_0x17c47a[_0x252e09(0x1305)],'steps':_0x17c47a[_0x252e09(0x361)],'seed':_0x17c47a[_0x252e09(0x7e7)]===-0x1?Math[_0x252e09(0x13e5)](Math[_0x252e09(0x148a)]()*0x2540be3ff):_0x17c47a[_0x252e09(0x7e7)],'n_samples':0x1,'ucPreset':_0x17c47a[_0x252e09(0xebf)],'qualityToggle':_0x17c47a[_0x252e09(0xc06)],'autoSmea':![],'dynamic_thresholding':![],'controlnet_strength':0x1,'legacy':![],'add_original_image':!![],'cfg_rescale':0x0,'noise_schedule':_0x252e09(0xdef),'legacy_v3_extend':![],'skip_cfg_above_sigma':null,'use_coords':![],'legacy_uc':![],'normalize_reference_strength_multiple':!![],'inpaintImg2ImgStrength':0x1,'characterPrompts':[],'v4_prompt':{'caption':{'base_caption':_0x103622,'char_captions':[]},'use_coords':![],'use_order':!![]},'v4_negative_prompt':{'caption':{'base_caption':_0x6f3180,'char_captions':[]},'legacy_uc':![]},'negative_prompt':_0x6f3180,'deliberate_euler_ancestral_bug':![],'prefer_brownian':!![]}}:_0x1a7c94={'input':_0x103622,'model':_0x3d72c8,'action':_0x252e09(0xa73),'parameters':{'width':_0x5bca16,'height':_0x434e37,'scale':_0x17c47a[_0x252e09(0x1ed)],'sampler':_0x17c47a['sampler'],'steps':_0x17c47a[_0x252e09(0x361)],'seed':_0x17c47a[_0x252e09(0x7e7)]===-0x1?Math[_0x252e09(0x13e5)](Math[_0x252e09(0x148a)]()*0x2540be3ff):_0x17c47a['seed'],'n_samples':0x1,'ucPreset':_0x17c47a[_0x252e09(0xebf)],'qualityToggle':_0x17c47a[_0x252e09(0xc06)],'sm':_0x17c47a[_0x252e09(0x9f6)],'sm_dyn':_0x17c47a['smea_dyn'],'dynamic_thresholding':![],'controlnet_strength':0x1,'legacy':![],'add_original_image':![],'cfg_rescale':0x0,'noise_schedule':_0x252e09(0x1246),'negative_prompt':_0x6f3180}};console['log'](_0x252e09(0xd5a),_0x1a7c94);let _0xf67fb0;_0x3d72c8[_0x252e09(0xf95)]('nai-diffusion-4')?_0xf67fb0=_0x252e09(0x5f9):_0xf67fb0=_0x252e09(0x11df);let _0x1dbf46=_0x17c47a[_0x252e09(0xfc4)];_0x1dbf46===_0x252e09(0xd3c)&&(_0x1dbf46=_0x17c47a[_0x252e09(0x10d3)]||'');_0x1dbf46&&_0x1dbf46!==''&&(_0xf67fb0=_0x1dbf46+encodeURIComponent(_0xf67fb0));const _0x378f49=await fetch(_0xf67fb0,{'method':_0x252e09(0xb67),'headers':{'Content-Type':'application/json','Authorization':_0x252e09(0x681)+_0x1cb9c5},'body':JSON['stringify'](_0x1a7c94)});console[_0x252e09(0x4ee)]('Response\x20status:',_0x378f49[_0x252e09(0x103e)]),console['log'](_0x252e09(0x1206),[..._0x378f49[_0x252e09(0xb89)][_0x252e09(0x545)]()]);if(!_0x378f49['ok']){const _0x535aa7=await _0x378f49['text']();console[_0x252e09(0x52b)](_0x252e09(0xa29),_0x535aa7);throw new Error(_0x252e09(0x5c1)+_0x378f49[_0x252e09(0x103e)]+'):\x20'+_0x535aa7);}const _0x24d849=_0x378f49['headers'][_0x252e09(0x70d)](_0x252e09(0xbe0));console[_0x252e09(0x4ee)](_0x252e09(0x72d),_0x24d849);let _0xf7d99,_0x14bd9a;if(_0x24d849&&_0x24d849['includes'](_0x252e09(0xdab))){console['log']('检测到\x20SSE\x20流式响应，开始解析...');const _0x150fbc=await _0x378f49[_0x252e09(0xda3)]();console[_0x252e09(0x4ee)](_0x252e09(0x32d),_0x150fbc[_0x252e09(0xac0)]);const _0x3874f1=_0x150fbc[_0x252e09(0xa06)]()[_0x252e09(0x505)]('\x0a');let _0x2f59c2=null;for(let _0x1fa461=_0x3874f1[_0x252e09(0xac0)]-0x1;_0x1fa461>=0x0;_0x1fa461--){const _0x1c03ff=_0x3874f1[_0x1fa461][_0x252e09(0xa06)]();if(_0x1c03ff[_0x252e09(0x9b8)]('data:\x20')&&_0x1c03ff!==_0x252e09(0xe76)){const _0x3eb1a3=_0x1c03ff[_0x252e09(0x9fe)](0x6);try{const _0x2d610b=JSON['parse'](_0x3eb1a3);if(_0x2d610b[_0x252e09(0xd46)]===_0x252e09(0x1255)&&_0x2d610b[_0x252e09(0x13ba)]){_0x2f59c2=_0x2d610b[_0x252e09(0x13ba)],console[_0x252e09(0x4ee)]('✅\x20找到\x20final\x20事件的图片数据');break;}if(_0x2d610b[_0x252e09(0x3cc)]){_0x2f59c2=_0x2d610b['data'],console['log'](_0x252e09(0x736));break;}if(_0x2d610b['image']){_0x2f59c2=_0x2d610b[_0x252e09(0x13ba)],console[_0x252e09(0x4ee)](_0x252e09(0xbb6));break;}}catch(_0x44a622){_0x2f59c2=_0x3eb1a3,console[_0x252e09(0x4ee)](_0x252e09(0xa82));break;}}}if(!_0x2f59c2)throw new Error(_0x252e09(0xac9));const _0x31f8bf=_0x2f59c2['startsWith'](_0x252e09(0x752)),_0x1853fd=_0x2f59c2[_0x252e09(0x9b8)](_0x252e09(0xe0e));if(_0x31f8bf||_0x1853fd){console[_0x252e09(0x4ee)]('✅\x20检测到直接的图片\x20base64\x20数据\x20(PNG/JPEG)');const _0x2f33aa=atob(_0x2f59c2),_0x14f59c=new Uint8Array(_0x2f33aa[_0x252e09(0xac0)]);for(let _0x489ec2=0x0;_0x489ec2<_0x2f33aa[_0x252e09(0xac0)];_0x489ec2++){_0x14f59c[_0x489ec2]=_0x2f33aa[_0x252e09(0x864)](_0x489ec2);}const _0x5e97e1=new Blob([_0x14f59c],{'type':_0x31f8bf?_0x252e09(0x13ab):_0x252e09(0x1241)});console[_0x252e09(0x4ee)](_0x252e09(0x1380),_0x5e97e1[_0x252e09(0xbc3)]);const _0x3eab75=new FileReader();_0x14bd9a=await new Promise((_0xb09105,_0x548b3a)=>{const _0x119ba0=_0x252e09;_0x3eab75[_0x119ba0(0x502)]=()=>_0xb09105(_0x3eab75[_0x119ba0(0x4fe)]),_0x3eab75[_0x119ba0(0x14b0)]=_0x548b3a,_0x3eab75[_0x119ba0(0x101e)](_0x5e97e1);}),console[_0x252e09(0x4ee)](_0x252e09(0x847));}else{console[_0x252e09(0x4ee)](_0x252e09(0xa8f));const _0x360069=atob(_0x2f59c2),_0x735068=new Uint8Array(_0x360069['length']);for(let _0x3089a1=0x0;_0x3089a1<_0x360069[_0x252e09(0xac0)];_0x3089a1++){_0x735068[_0x3089a1]=_0x360069['charCodeAt'](_0x3089a1);}_0xf7d99=new Blob([_0x735068]),console[_0x252e09(0x4ee)]('ZIP\x20Blob\x20大小:',_0xf7d99[_0x252e09(0xbc3)]);}}else _0xf7d99=await _0x378f49[_0x252e09(0x6ae)](),console[_0x252e09(0x4ee)](_0x252e09(0x100d),_0xf7d99[_0x252e09(0x682)],_0x252e09(0xef0),_0xf7d99[_0x252e09(0xbc3)]);if(!_0x14bd9a&&_0xf7d99)try{if(typeof JSZip===_0x252e09(0x358))throw new Error('JSZip库未加载，请刷新页面重试');const _0x45b664=await JSZip[_0x252e09(0x14d8)](_0xf7d99);console[_0x252e09(0x4ee)](_0x252e09(0x111a),Object[_0x252e09(0x1204)](_0x45b664['files']));let _0x1d6178=null;for(let _0xc83dd in _0x45b664[_0x252e09(0xca1)]){if(_0xc83dd[_0x252e09(0x1232)](/\.(png|jpg|jpeg|webp)$/i)){_0x1d6178=_0x45b664[_0x252e09(0xca1)][_0xc83dd],console[_0x252e09(0x4ee)](_0x252e09(0x497),_0xc83dd);break;}}if(!_0x1d6178)throw new Error(_0x252e09(0x2f1));const _0x4b2951=await _0x1d6178['async']('blob');console[_0x252e09(0x4ee)](_0x252e09(0x7a6),_0x4b2951[_0x252e09(0xbc3)]);const _0x1d5043=new FileReader();_0x14bd9a=await new Promise((_0x43c407,_0x250e6d)=>{const _0x52da2e=_0x252e09;_0x1d5043['onloadend']=()=>_0x43c407(_0x1d5043[_0x52da2e(0x4fe)]),_0x1d5043[_0x52da2e(0x14b0)]=_0x250e6d,_0x1d5043[_0x52da2e(0x101e)](_0x4b2951);}),console[_0x252e09(0x4ee)](_0x252e09(0xafb));}catch(_0x4ea54c){console[_0x252e09(0x52b)](_0x252e09(0x120e),_0x4ea54c);throw new Error(_0x252e09(0x231)+_0x4ea54c[_0x252e09(0x790)]);}console[_0x252e09(0x4ee)](_0x252e09(0x5c4)),_0x37c72b={..._0x27bc9c,'type':_0x252e09(0x1a0),'imageUrl':_0x14bd9a,'prompt':_0x137280,'fullPrompt':_0x103622};}catch(_0x9eb9a0){console['error'](_0x252e09(0xdc9),_0x9eb9a0),_0x37c72b={..._0x27bc9c,'content':_0x252e09(0x3e9)+_0x9eb9a0['message']+']'};}break;default:console[_0x252e09(0x7fa)](_0x252e09(0x7ee),_0xcbd59[_0x252e09(0x682)]);break;}if(_0x37c72b){_0x110a6a[_0x252e09(0xc88)][_0x252e09(0x481)](_0x37c72b);!_0x9d45fd&&(_0x110a6a[_0x252e09(0x28d)]=(_0x110a6a['unreadCount']||0x0)+0x1);if(!_0x9d45fd&&!_0x37f399){let _0x3f010d;switch(_0x37c72b[_0x252e09(0x682)]){case _0x252e09(0x35f):_0x3f010d=_0x252e09(0x955);break;case _0x252e09(0x1332):_0x3f010d='[收到一个外卖代付请求]';break;case _0x252e09(0x8b0):_0x3f010d='[图片]';break;case _0x252e09(0x412):_0x3f010d=_0x252e09(0xf4b);break;case'sticker':_0x3f010d=_0x37c72b[_0x252e09(0x1421)]?_0x252e09(0x103c)+_0x37c72b[_0x252e09(0x1421)]+']':_0x252e09(0xab4);break;case _0x252e09(0x1492):_0x3f010d=_0x37c72b[_0x252e09(0x369)]?'「'+_0x37c72b[_0x252e09(0x369)]+'」':'['+_0x37c72b[_0x252e09(0x211)][_0x252e09(0x9fe)](0x0,0x14)+'...]';break;default:_0x3f010d=String(_0x37c72b[_0x252e09(0x1469)]||'');}const _0x41e135=_0x110a6a[_0x252e09(0x1364)]?_0x37c72b[_0x252e09(0x213)]+':\x20'+_0x3f010d:_0x3f010d;_0x1d3fa5(_0x47e4c1,_0x41e135[_0x252e09(0x9fe)](0x0,0x28)+(_0x41e135[_0x252e09(0xac0)]>0x28?_0x252e09(0x1111):'')),_0x37f399=!![];}_0x9d45fd&&(_0x25d29f(_0x37c72b,_0x110a6a),await new Promise(_0xa0735a=>setTimeout(_0xa0735a,Math[_0x252e09(0x148a)]()*0x708+0x3e8)));}}_0x2a9017&&_0x1fd843['isGroupCall']&&(_0x1fd843[_0x252e09(0x1531)]=![],_0x1fd843[_0x252e09(0xa81)][_0x252e09(0xac0)]>0x0?_0x1b78aa():(_0x1fd843={..._0x1fd843,'isAwaitingResponse':![],'participants':[]},_0x2d25e5(_0x252e09(0xe95)),alert('无人接听群聊邀请。')));if(_0xd683c6){await _0x2264b2();return;}await _0x372b85[_0x252e09(0x1260)][_0x252e09(0x11d5)](_0x110a6a);const _0x13f134=_0x36f8dc[_0x252e09(0x75d)](_0xc2769e=>_0xc2769e[_0x252e09(0x682)]===_0x252e09(0x1b9)||_0xc2769e[_0x252e09(0x682)]==='qzone_like'||_0xc2769e[_0x252e09(0x682)]===_0x252e09(0x691)||_0xc2769e[_0x252e09(0x682)]===_0x252e09(0xf20));_0x13f134&&(console[_0x252e09(0x4ee)](_0x252e09(0x1ac)),await _0x1098dc());}catch(_0x1ed016){_0x110a6a[_0x252e09(0xc88)]=_0x110a6a[_0x252e09(0xc88)][_0x252e09(0xde7)](_0x25e16b=>!_0x25e16b[_0x252e09(0x32c)]),!_0x110a6a[_0x252e09(0x1364)]&&_0x110a6a[_0x252e09(0x1171)]?.[_0x252e09(0x103e)]===_0x252e09(0xa2d)?(_0x110a6a[_0x252e09(0x1171)][_0x252e09(0x103e)]=_0x252e09(0x18f),await _0x4abd86(_0x252e09(0x1416),_0x252e09(0x8dc)+_0x1ed016[_0x252e09(0x790)])):await _0x4abd86(_0x252e09(0x284),_0x252e09(0x54e)+_0x1ed016['message']),!_0x110a6a[_0x252e09(0x1364)]&&_0x110a6a['relationship']?.[_0x252e09(0x103e)]==='blocked_by_ai'&&await _0x372b85['chats'][_0x252e09(0x11d5)](_0x110a6a),_0x1fd843[_0x252e09(0x1531)]=![];}finally{_0x191654(_0x47e4c1,![]),_0x110a6a[_0x252e09(0x1364)]?_0x17d2d5&&(_0x17d2d5['style'][_0x252e09(0x1248)]=_0x252e09(0x11b5)):_0x30341d&&_0x8f0871[_0x252e09(0x1260)][_0x47e4c1]&&(_0x30341d[_0x252e09(0x63b)][_0x252e09(0xe7b)]=0x0,setTimeout(()=>{const _0x60f4c4=_0x252e09;_0x30341d['textContent']=_0x8f0871[_0x60f4c4(0x1260)][_0x47e4c1][_0x60f4c4(0x1023)],_0x30341d[_0x60f4c4(0x128f)][_0x60f4c4(0x443)](_0x60f4c4(0xbf3)),_0x30341d['style'][_0x60f4c4(0xe7b)]=0x1;},0xc8)),_0x2d75fb(),_0x572a8e&&_0x499874(_0x47e4c1),_0x339967();}}async function _0x483ecb(_0x26091f){const _0x3ac245=_0x7c5117;if(!_0x8f0871[_0x3ac245(0xac8)])return;const _0x13bd19=_0x8f0871['chats'][_0x8f0871[_0x3ac245(0xac8)]],_0x5608b0={'role':_0x3ac245(0xcb0),'content':_0x26091f[_0x3ac245(0x3f5)],'meaning':_0x26091f['name'],'timestamp':Date[_0x3ac245(0xc22)]()};_0x13bd19[_0x3ac245(0xc88)][_0x3ac245(0x481)](_0x5608b0),await _0x372b85[_0x3ac245(0x1260)]['put'](_0x13bd19),_0x25d29f(_0x5608b0,_0x13bd19),_0x2d75fb(),document['getElementById'](_0x3ac245(0xd9f))[_0x3ac245(0x128f)][_0x3ac245(0x443)]('visible');}async function _0x4b2cbb(){const _0x422d7b=_0x7c5117;if(!_0x8f0871['activeChatId'])return;const _0x53ddd0=document[_0x422d7b(0xfa0)](_0x422d7b(0x1f9)),_0x193cac=document[_0x422d7b(0xfa0)](_0x422d7b(0xa91)),_0x2ef941=parseFloat(_0x53ddd0[_0x422d7b(0x4f6)]),_0x29caa4=_0x193cac[_0x422d7b(0x4f6)]['trim']();if(isNaN(_0x2ef941)||_0x2ef941<0x0){alert(_0x422d7b(0xaeb));return;}const _0x58d0d1=_0x8f0871[_0x422d7b(0x1260)][_0x8f0871[_0x422d7b(0xac8)]],_0x131d82=_0x58d0d1[_0x422d7b(0x1364)]?_0x58d0d1[_0x422d7b(0x12d7)][_0x422d7b(0xda5)]||'我':'我',_0x4a557d=_0x58d0d1['isGroup']?'群聊':_0x58d0d1[_0x422d7b(0x1023)],_0xd1a99e={'role':_0x422d7b(0xcb0),'type':'transfer','amount':_0x2ef941,'note':_0x29caa4,'senderName':_0x131d82,'receiverName':_0x4a557d,'timestamp':Date[_0x422d7b(0xc22)]()};_0x58d0d1[_0x422d7b(0xc88)][_0x422d7b(0x481)](_0xd1a99e),await _0x372b85['chats'][_0x422d7b(0x11d5)](_0x58d0d1),_0x25d29f(_0xd1a99e,_0x58d0d1),_0x2d75fb(),document[_0x422d7b(0xfa0)]('transfer-modal')[_0x422d7b(0x128f)]['remove'](_0x422d7b(0xdcc)),_0x53ddd0[_0x422d7b(0x4f6)]='',_0x193cac[_0x422d7b(0x4f6)]='';}async function _0x543c05(){const _0x3ac377=_0x7c5117;if(!_0x8f0871[_0x3ac377(0xac8)])return;const _0x51720d=document[_0x3ac377(0xfa0)]('waimai-product-info'),_0x472813=document['getElementById']('waimai-amount'),_0x457890=_0x51720d[_0x3ac377(0x4f6)][_0x3ac377(0xa06)](),_0x455b65=parseFloat(_0x472813['value']);if(!_0x457890||isNaN(_0x455b65)||_0x455b65<=0x0){alert(_0x3ac377(0x39e));return;}const _0x5b49b6=_0x8f0871[_0x3ac377(0x1260)][_0x8f0871['activeChatId']],_0x389569=Date[_0x3ac377(0xc22)](),_0x4a0501=_0x5b49b6['isGroup']?_0x5b49b6['settings'][_0x3ac377(0xda5)]||'我':'我',_0xa4c27={'role':_0x3ac377(0xcb0),'senderName':_0x4a0501,'type':'waimai_order','productInfo':_0x457890,'amount':_0x455b65,'timestamp':_0x389569};_0x5b49b6[_0x3ac377(0xc88)][_0x3ac377(0x481)](_0xa4c27);const _0x3a3106={'role':_0x3ac377(0x1417),'content':'[系统提示：用户('+_0x4a0501+')为你点了一份外卖作为【礼物】。外卖内容是“'+_0x457890+_0x3ac377(0xf79)+_0x455b65+_0x3ac377(0x5da),'timestamp':_0x389569+0x1,'isHidden':!![]};_0x5b49b6['history'][_0x3ac377(0x481)](_0x3a3106),await _0x372b85['chats'][_0x3ac377(0x11d5)](_0x5b49b6),_0x25d29f(_0xa4c27,_0x5b49b6),_0x2d75fb(),_0x51720d[_0x3ac377(0x4f6)]='',_0x472813['value']='',document['getElementById'](_0x3ac377(0xd48))[_0x3ac377(0x128f)]['remove'](_0x3ac377(0xdcc));}async function _0x143a64(){const _0x383180=_0x7c5117;if(!_0x8f0871[_0x383180(0xac8)])return;const _0x165d87=await _0x131a69(_0x383180(0x36b),_0x383180(0x143f),'');if(!_0x165d87||!_0x165d87[_0x383180(0xa06)]())return;const _0x5e2352=_0x383180(0x2b1),_0x777259=_0x8f0871[_0x383180(0x1260)][_0x8f0871[_0x383180(0xac8)]],_0x1e5287={'role':'user','type':_0x383180(0xd93),'content':_0x165d87['trim'](),'imageUrl':_0x5e2352,'timestamp':Date['now']()};_0x777259['history']['push'](_0x1e5287),await _0x372b85['chats'][_0x383180(0x11d5)](_0x777259),_0x25d29f(_0x1e5287,_0x777259),_0x2d75fb();}function _0x278d51(_0x2a7bce){const _0x2bae56=_0x7c5117;if(_0x2903d2)return;_0x2903d2=!![],document[_0x2bae56(0xfa0)](_0x2bae56(0xe95))[_0x2bae56(0x128f)][_0x2bae56(0x1327)](_0x2bae56(0x1503)),_0x4969c1(_0x2a7bce);}function _0x17a1e5(){const _0x30bba0=_0x7c5117;_0x1e62df();if(!_0x2903d2)return;_0x2903d2=![],document[_0x30bba0(0xfa0)](_0x30bba0(0xe95))['classList']['remove'](_0x30bba0(0x1503)),_0x552199[_0x30bba0(0x458)](_0x3ee9d2=>{const _0x14696c=_0x30bba0,_0x3d42aa=document[_0x14696c(0xfb1)]('.message-bubble[data-timestamp=\x22'+_0x3ee9d2+'\x22]');if(_0x3d42aa)_0x3d42aa[_0x14696c(0x128f)][_0x14696c(0x443)](_0x14696c(0xaa0));}),_0x552199[_0x30bba0(0xf7d)]();}function _0x4969c1(_0x20507d){const _0x56f48a=_0x7c5117,_0xa58e5=document[_0x56f48a(0xfb1)](_0x56f48a(0x9b6)+_0x20507d+'\x22]');if(!_0xa58e5)return;_0x552199['has'](_0x20507d)?(_0x552199[_0x56f48a(0xf10)](_0x20507d),_0xa58e5[_0x56f48a(0x128f)][_0x56f48a(0x443)](_0x56f48a(0xaa0))):(_0x552199[_0x56f48a(0x1327)](_0x20507d),_0xa58e5[_0x56f48a(0x128f)]['add']('selected')),document[_0x56f48a(0xfa0)]('selection-count')['textContent']=_0x56f48a(0x42a)+_0x552199['size']+'\x20条',_0x552199[_0x56f48a(0xbc3)]===0x0&&_0x17a1e5();}function _0x53cdde(_0xeeb791,_0x4895a1){const _0x5a27e4=_0x7c5117;let _0x4eea2b;const _0x177ed9=_0x8a0e01=>{const _0x28df30=_0x5817;if(_0x2903d2)return;_0x8a0e01[_0x28df30(0xdc1)](),_0x4eea2b=window[_0x28df30(0xe07)](()=>_0x4895a1(_0x8a0e01),0x1f4);},_0x2d45ed=()=>clearTimeout(_0x4eea2b);_0xeeb791[_0x5a27e4(0x7b8)](_0x5a27e4(0xbea),_0x177ed9),_0xeeb791['addEventListener'](_0x5a27e4(0xefe),_0x2d45ed),_0xeeb791['addEventListener']('mouseleave',_0x2d45ed),_0xeeb791[_0x5a27e4(0x7b8)](_0x5a27e4(0x7d3),_0x177ed9,{'passive':!![]}),_0xeeb791[_0x5a27e4(0x7b8)](_0x5a27e4(0x61e),_0x2d45ed),_0xeeb791[_0x5a27e4(0x7b8)]('touchmove',_0x2d45ed);}async function _0xe27660(){const _0x19aa5a=_0x7c5117,_0x2f4874=_0x8f0871[_0x19aa5a(0xac8)];if(!_0x2f4874)return;if(!_0x46bc8b[_0x19aa5a(0x684)]){_0x4642d8(_0x2f4874);return;}if(_0x46bc8b[_0x19aa5a(0xac8)]===_0x2f4874)document[_0x19aa5a(0xfa0)](_0x19aa5a(0x14ed))[_0x19aa5a(0x128f)]['add'](_0x19aa5a(0xdcc));else{const _0xb05f85=_0x8f0871[_0x19aa5a(0x1260)][_0x46bc8b[_0x19aa5a(0xac8)]]?.[_0x19aa5a(0x1023)]||'未知',_0x3e9a8f=_0x8f0871[_0x19aa5a(0x1260)][_0x2f4874]?.[_0x19aa5a(0x1023)]||'当前',_0x3bcada=await _0x3f65ed(_0x19aa5a(0x11f0),_0x19aa5a(0x553)+_0xb05f85+'」听歌。要结束并开始和「'+_0x3e9a8f+_0x19aa5a(0x20e),{'confirmButtonClass':'btn-danger'});_0x3bcada&&(await _0x2530aa(!![]),await new Promise(_0x5cfdbf=>setTimeout(_0x5cfdbf,0x32)),_0x4642d8(_0x2f4874));}}async function _0x4642d8(_0x22fd9b){const _0x415da4=_0x7c5117,_0x3e6462=_0x8f0871[_0x415da4(0x1260)][_0x22fd9b];if(!_0x3e6462)return;_0x46bc8b[_0x415da4(0xfb6)]=_0x3e6462['musicData'][_0x415da4(0x49b)]||0x0,_0x46bc8b[_0x415da4(0x684)]=!![],_0x46bc8b[_0x415da4(0xac8)]=_0x22fd9b;_0x46bc8b['playlist'][_0x415da4(0xac0)]>0x0?_0x46bc8b['currentIndex']=0x0:_0x46bc8b['currentIndex']=-0x1;if(_0x46bc8b[_0x415da4(0x386)])clearInterval(_0x46bc8b[_0x415da4(0x386)]);_0x46bc8b[_0x415da4(0x386)]=setInterval(()=>{const _0x4d8269=_0x415da4;_0x46bc8b['isPlaying']&&(_0x46bc8b[_0x4d8269(0xfb6)]++,_0x1a40ed());},0x3e8),_0x139f8a(),_0x45ef07(),document[_0x415da4(0xfa0)](_0x415da4(0x14ed))['classList'][_0x415da4(0x1327)](_0x415da4(0xdcc));}async function _0x2530aa(_0x56d414=!![]){const _0x48fbc4=_0x7c5117;if(!_0x46bc8b['isActive'])return;const _0x2dccbf=_0x46bc8b['activeChatId'];document['getElementById'](_0x48fbc4(0xc00))[_0x48fbc4(0x128f)][_0x48fbc4(0x443)](_0x48fbc4(0xdcc));const _0x42ab54=async()=>{const _0x5df496=_0x48fbc4;if(_0x46bc8b[_0x5df496(0x386)])clearInterval(_0x46bc8b[_0x5df496(0x386)]);if(_0x46bc8b['isPlaying'])_0x447ac1['pause']();if(_0x56d414&&_0x2dccbf&&_0x8f0871[_0x5df496(0x1260)][_0x2dccbf]){const _0xaae117=_0x8f0871[_0x5df496(0x1260)][_0x2dccbf];_0xaae117[_0x5df496(0x41b)][_0x5df496(0x49b)]=_0x46bc8b[_0x5df496(0xfb6)],await _0x372b85[_0x5df496(0x1260)][_0x5df496(0x11d5)](_0xaae117);}_0x46bc8b['isActive']=![],_0x46bc8b[_0x5df496(0xac8)]=null,_0x46bc8b[_0x5df496(0xfb6)]=0x0,_0x46bc8b[_0x5df496(0x386)]=null,_0x1fbc05(_0x2dccbf,!![]);};_0x56efb2(_0x42ab54);}function _0x12adb8(){_0x56efb2();}function _0x1fbc05(_0x2be32d,_0x5f0a42=![]){const _0xa944a2=_0x7c5117,_0x5ef79b=document[_0xa944a2(0xfb1)]('#listen-together-btn\x20img');if(!_0x5ef79b)return;if(_0x5f0a42||!_0x46bc8b[_0xa944a2(0x684)]||_0x46bc8b[_0xa944a2(0xac8)]!==_0x2be32d){_0x5ef79b[_0xa944a2(0x53e)]='https://i.postimg.cc/8kYShvrJ/90-UI-2.png',_0x5ef79b[_0xa944a2(0x1287)]='';return;}_0x5ef79b[_0xa944a2(0x53e)]=_0xa944a2(0x1250),_0x5ef79b[_0xa944a2(0x128f)]['add'](_0xa944a2(0x898));if(_0x46bc8b[_0xa944a2(0xcc5)])_0x5ef79b['classList'][_0xa944a2(0x443)](_0xa944a2(0xab7));else _0x5ef79b[_0xa944a2(0x128f)][_0xa944a2(0x1327)](_0xa944a2(0xab7));}window[_0x7c5117(0x607)]=_0x1fbc05;function _0x139f8a(){const _0x258891=_0x7c5117;_0x1fbc05(_0x46bc8b['activeChatId']),_0x1a40ed();const _0x7c23a7=document[_0x258891(0xfa0)](_0x258891(0x509)),_0x1afef9=document[_0x258891(0xfa0)](_0x258891(0xeeb)),_0x3f340b=document[_0x258891(0xfa0)]('music-play-pause-btn');if(_0x46bc8b[_0x258891(0x715)]>-0x1&&_0x46bc8b['playlist'][_0x258891(0xac0)]>0x0){const _0x42e533=_0x46bc8b['playlist'][_0x46bc8b['currentIndex']];_0x7c23a7[_0x258891(0xc62)]=_0x42e533[_0x258891(0x1023)],_0x1afef9[_0x258891(0xc62)]=_0x42e533[_0x258891(0x27e)];}else _0x7c23a7[_0x258891(0xc62)]=_0x258891(0xe4d),_0x1afef9['textContent']=_0x258891(0x1111);_0x3f340b[_0x258891(0xc62)]=_0x46bc8b[_0x258891(0xcc5)]?'❚❚':'▶';}function _0x1a40ed(){const _0x2acb27=_0x7c5117,_0x3a10e9=(_0x46bc8b['totalElapsedTime']/0xe10)[_0x2acb27(0x3b8)](0x1);document[_0x2acb27(0xfa0)]('music-time-counter')[_0x2acb27(0xc62)]='已经一起听了'+_0x3a10e9+'小时';}function _0x45ef07(){const _0xfe20c4=_0x7c5117,_0x4c9d24=document[_0xfe20c4(0xfa0)]('playlist-body');_0x4c9d24['innerHTML']='';if(_0x46bc8b[_0xfe20c4(0x84a)][_0xfe20c4(0xac0)]===0x0){_0x4c9d24[_0xfe20c4(0x1331)]=_0xfe20c4(0x17f);return;}_0x46bc8b[_0xfe20c4(0x84a)][_0xfe20c4(0x458)]((_0xaf4e00,_0x4b34e7)=>{const _0x37a26a=_0xfe20c4,_0x2aff07=document[_0x37a26a(0xb4e)]('div');_0x2aff07['className']='playlist-item';if(_0x4b34e7===_0x46bc8b[_0x37a26a(0x715)])_0x2aff07[_0x37a26a(0x128f)][_0x37a26a(0x1327)](_0x37a26a(0xfae));_0x2aff07['innerHTML']=_0x37a26a(0xbb8)+_0xaf4e00['name']+_0x37a26a(0x930)+_0xaf4e00['artist']+_0x37a26a(0x76e)+_0x4b34e7+_0x37a26a(0xebe)+_0x4b34e7+_0x37a26a(0x153d)+_0x4b34e7+_0x37a26a(0x1031)+_0x4b34e7+_0x37a26a(0x1005),_0x2aff07['querySelector'](_0x37a26a(0xce5))[_0x37a26a(0x7b8)](_0x37a26a(0xb4a),()=>_0x3687be(_0x4b34e7)),_0x4c9d24[_0x37a26a(0x1155)](_0x2aff07);});}async function _0xcebb84(){const _0x186a73=_0x7c5117;if(_0x447ac1[_0x186a73(0xab7)]){if(_0x46bc8b[_0x186a73(0x715)]===-0x1&&_0x46bc8b[_0x186a73(0x84a)][_0x186a73(0xac0)]>0x0)_0x3687be(0x0);else _0x46bc8b[_0x186a73(0x715)]>-0x1&&_0x3687be(_0x46bc8b[_0x186a73(0x715)]);}else _0x447ac1[_0x186a73(0x3a3)](),await _0x3fa5ee(_0x186a73(0x115d));}function _0xcf66fc(){const _0x5dc0ae=_0x7c5117;if(_0x46bc8b[_0x5dc0ae(0x84a)][_0x5dc0ae(0xac0)]===0x0)return;let _0xcae630;switch(_0x46bc8b[_0x5dc0ae(0xc6d)]){case'random':_0xcae630=Math['floor'](Math[_0x5dc0ae(0x148a)]()*_0x46bc8b[_0x5dc0ae(0x84a)]['length']);break;case _0x5dc0ae(0xf7a):_0x3687be(_0x46bc8b[_0x5dc0ae(0x715)]);return;case _0x5dc0ae(0xc75):default:_0xcae630=(_0x46bc8b[_0x5dc0ae(0x715)]+0x1)%_0x46bc8b['playlist'][_0x5dc0ae(0xac0)];break;}_0x3687be(_0xcae630);}function _0x48c4e0(){const _0x58cd5a=_0x7c5117;if(_0x46bc8b[_0x58cd5a(0x84a)][_0x58cd5a(0xac0)]===0x0)return;const _0x1eee94=(_0x46bc8b[_0x58cd5a(0x715)]-0x1+_0x46bc8b['playlist'][_0x58cd5a(0xac0)])%_0x46bc8b['playlist'][_0x58cd5a(0xac0)];_0x3687be(_0x1eee94);}function _0x571a02(){const _0x56e66a=_0x7c5117,_0x54d085=[_0x56e66a(0xc75),_0x56e66a(0x148a),_0x56e66a(0xf7a)],_0x314bc1=_0x54d085[_0x56e66a(0xdf3)](_0x46bc8b[_0x56e66a(0xc6d)]);_0x46bc8b[_0x56e66a(0xc6d)]=_0x54d085[(_0x314bc1+0x1)%_0x54d085[_0x56e66a(0xac0)]],document[_0x56e66a(0xfa0)](_0x56e66a(0x59d))[_0x56e66a(0xc62)]={'order':'顺序','random':'随机','single':'单曲'}[_0x46bc8b[_0x56e66a(0xc6d)]];}async function _0x4d7581(){const _0xa76c14=_0x7c5117,_0x417cc5=await _0x131a69(_0xa76c14(0x771),'请输入歌曲的URL','',_0xa76c14(0x3f5));if(!_0x417cc5)return;const _0x1ccb00=await _0x131a69(_0xa76c14(0x11e6),_0xa76c14(0xaab));if(!_0x1ccb00)return;const _0x1f540a=await _0x131a69(_0xa76c14(0x11e6),_0xa76c14(0xd43));if(!_0x1f540a)return;_0x46bc8b['playlist'][_0xa76c14(0x481)]({'name':_0x1ccb00,'artist':_0x1f540a,'src':_0x417cc5,'isLocal':![]}),await _0x3373e0(),_0x45ef07(),_0x46bc8b['currentIndex']===-0x1&&(_0x46bc8b[_0xa76c14(0x715)]=_0x46bc8b[_0xa76c14(0x84a)][_0xa76c14(0xac0)]-0x1,_0x139f8a());}async function _0x31a5e6(_0x383cb1){const _0x1a0dda=_0x7c5117,_0xa11238=_0x383cb1[_0x1a0dda(0x10c2)][_0x1a0dda(0xca1)];if(!_0xa11238['length'])return;for(const _0x37bc1d of _0xa11238){let _0x4d7059=_0x37bc1d[_0x1a0dda(0x1023)][_0x1a0dda(0x128a)](/\.[^/.]+$/,'');_0x4d7059=await _0x131a69(_0x1a0dda(0x11e6),'请输入歌名',_0x4d7059);if(_0x4d7059===null)continue;const _0x1f4512=await _0x131a69(_0x1a0dda(0x11e6),_0x1a0dda(0xd43),_0x1a0dda(0x14f9));if(_0x1f4512===null)continue;const _0xcfec3f=await _0x37bc1d[_0x1a0dda(0x4ed)]();let _0x528bc1='';const _0x3745ec=await _0x3f65ed(_0x1a0dda(0x1494),_0x1a0dda(0x1131)+_0x4d7059+_0x1a0dda(0xf7f));_0x3745ec&&(_0x528bc1=await _0x591622()||''),_0x46bc8b[_0x1a0dda(0x84a)][_0x1a0dda(0x481)]({'name':_0x4d7059,'artist':_0x1f4512,'src':_0xcfec3f,'fileType':_0x37bc1d[_0x1a0dda(0x682)],'isLocal':!![],'lrcContent':_0x528bc1,'cover':'https://s3plus.meituan.net/opapisdk/op_ticket_885190757_1757748720126_qdqqd_1jt5sv.jpeg'});}await _0x3373e0(),_0x45ef07(),_0x46bc8b[_0x1a0dda(0x715)]===-0x1&&_0x46bc8b['playlist']['length']>0x0&&(_0x46bc8b[_0x1a0dda(0x715)]=0x0,_0x139f8a()),_0x383cb1[_0x1a0dda(0x10c2)]['value']=null;}async function _0x3687be(_0x50e303){const _0x2a3dd7=_0x7c5117;if(_0x50e303<0x0||_0x50e303>=_0x46bc8b[_0x2a3dd7(0x84a)]['length'])return;_0x447ac1[_0x2a3dd7(0x3a3)](),_0x46bc8b[_0x2a3dd7(0x715)]=_0x50e303;const _0x5878de=_0x46bc8b[_0x2a3dd7(0x84a)][_0x50e303],_0x2f82e0=_0x8f0871['chats'][_0x46bc8b[_0x2a3dd7(0xac8)]],_0x29e698=document[_0x2a3dd7(0xfa0)](_0x2a3dd7(0x55a));if(_0x2f82e0&&_0x29e698){_0x29e698[_0x2a3dd7(0x1331)]='';const _0x624c98=_0x2f82e0['isGroup']?_0x2f82e0[_0x2a3dd7(0x2cf)]['find'](_0x274129=>_0x274129[_0x2a3dd7(0x93e)]===_0x5878de[_0x2a3dd7(0x27e)])?.['avatar']||_0x1a2fc1:_0x2f82e0['settings'][_0x2a3dd7(0xce8)]||_0x1a2fc1,_0x5284fc=_0x2f82e0[_0x2a3dd7(0x12d7)]['myAvatar']||_0x1a2fc1,_0x12e019=document[_0x2a3dd7(0xb4e)]('img');_0x12e019[_0x2a3dd7(0x53e)]=_0x624c98,_0x12e019[_0x2a3dd7(0x1287)]=_0x2a3dd7(0x602),_0x12e019['alt']='Character\x20Avatar',_0x29e698[_0x2a3dd7(0x1155)](_0x12e019);const _0x5eb3bf=document[_0x2a3dd7(0xb4e)](_0x2a3dd7(0xa5a));_0x5eb3bf[_0x2a3dd7(0x53e)]=_0x5284fc,_0x5eb3bf[_0x2a3dd7(0x1287)]=_0x2a3dd7(0x602),_0x5eb3bf[_0x2a3dd7(0x1001)]=_0x2a3dd7(0x2ba),_0x29e698[_0x2a3dd7(0x1155)](_0x5eb3bf);}const _0x4e7828=document[_0x2a3dd7(0xfb1)](_0x2a3dd7(0x978)),_0x3584e4=document[_0x2a3dd7(0xfa0)](_0x2a3dd7(0x90f));_0x4e7828&&(_0x4e7828[_0x2a3dd7(0x63b)][_0x2a3dd7(0x2da)]('--music-bg-image',_0x5878de[_0x2a3dd7(0x1113)]?'url('+_0x5878de[_0x2a3dd7(0x1113)]+')':_0x2a3dd7(0x11b5)),_0x4e7828[_0x2a3dd7(0x128f)]['toggle'](_0x2a3dd7(0x410),!!_0x5878de[_0x2a3dd7(0xe97)]));_0x3584e4&&_0x3584e4[_0x2a3dd7(0x128f)]['toggle'](_0x2a3dd7(0xa37),!!_0x5878de[_0x2a3dd7(0xe97)]);document[_0x2a3dd7(0xfa0)]('music-visual-container')['classList'][_0x2a3dd7(0x443)](_0x2a3dd7(0x76c));const _0xd305ed=document[_0x2a3dd7(0xfa0)](_0x2a3dd7(0xa53));_0xd305ed&&(_0xd305ed[_0x2a3dd7(0x53e)]=_0x5878de[_0x2a3dd7(0x435)]||_0x2a3dd7(0x12b0));await _0x3fa5ee('将歌曲切换为了《'+_0x5878de[_0x2a3dd7(0x1023)]+'》'),_0x46bc8b[_0x2a3dd7(0xbc6)]=_0x2bc922(_0x5878de['lrcContent']||''),_0x573b70();const _0x19141d=document[_0x2a3dd7(0xfa0)]('single-lyric-display');_0x19141d&&(!_0x46bc8b[_0x2a3dd7(0xbc6)]||_0x46bc8b['parsedLyrics'][_0x2a3dd7(0xac0)]===0x0?_0x19141d[_0x2a3dd7(0xc62)]=_0x2a3dd7(0xe83):_0x19141d['textContent']=_0x2a3dd7(0x104c));if(_0x5878de['isLocal']&&_0x5878de[_0x2a3dd7(0x53e)]instanceof ArrayBuffer){const _0x5babb4=new Blob([_0x5878de['src']],{'type':_0x5878de[_0x2a3dd7(0xa35)]||'audio/mpeg'});_0x447ac1[_0x2a3dd7(0x53e)]=URL[_0x2a3dd7(0xe35)](_0x5babb4);}else{if(_0x5878de[_0x2a3dd7(0x1be)]&&_0x5878de[_0x2a3dd7(0x53e)]instanceof Blob)_0x447ac1[_0x2a3dd7(0x53e)]=URL['createObjectURL'](_0x5878de[_0x2a3dd7(0x53e)]);else{if(!_0x5878de[_0x2a3dd7(0x1be)])_0x447ac1[_0x2a3dd7(0x53e)]=_0x5878de[_0x2a3dd7(0x53e)];else{console[_0x2a3dd7(0x52b)](_0x2a3dd7(0x1220),_0x5878de);return;}}}const _0x496b00=_0x447ac1[_0x2a3dd7(0xfe3)]();_0x496b00!==undefined&&_0x496b00[_0x2a3dd7(0xe37)](_0x2c0a78=>{const _0x8711d=_0x2a3dd7;if(_0x2c0a78[_0x8711d(0x1023)]===_0x8711d(0x19c))console[_0x8711d(0x7fa)]('Autoplay\x20was\x20prevented\x20by\x20the\x20browser.'),_0x447ac1[_0x8711d(0x3a3)](),_0x4abd86(_0x8711d(0xb97),_0x8711d(0x1068));else _0x2c0a78[_0x8711d(0x1023)]!==_0x8711d(0xfcf)&&console[_0x8711d(0x52b)](_0x8711d(0x136d),_0x2c0a78);});_0x45ef07(),_0x139f8a(),_0xc54d74();const _0x3252d3=document[_0x2a3dd7(0xfa0)]('global-lyrics-bar');_0x46bc8b[_0x2a3dd7(0xbc6)]&&_0x46bc8b[_0x2a3dd7(0xbc6)]['length']>0x0?(_0x3252d3[_0x2a3dd7(0xc62)]='♪',_0x3252d3[_0x2a3dd7(0x128f)][_0x2a3dd7(0x1327)](_0x2a3dd7(0xdcc))):_0x3252d3[_0x2a3dd7(0x128f)][_0x2a3dd7(0x443)](_0x2a3dd7(0xdcc));}async function _0x4f0df7(_0x5caeb0){const _0x5119f6=_0x7c5117;if(_0x5caeb0<0x0||_0x5caeb0>=_0x46bc8b[_0x5119f6(0x84a)]['length'])return;const _0x9bdefa=await _0x2aedfc(_0x5119f6(0x147f),[{'text':_0x5119f6(0x234),'value':_0x5119f6(0x8f4)},{'text':_0x5119f6(0x6dc),'value':_0x5119f6(0x3f5)}]);let _0x53ad43=null;if(_0x9bdefa===_0x5119f6(0x8f4))_0x53ad43=await _0x468818();else _0x9bdefa===_0x5119f6(0x3f5)&&(_0x53ad43=await _0x131a69(_0x5119f6(0xd42),_0x5119f6(0x2bb),'',_0x5119f6(0x3f5)));if(_0x53ad43&&_0x53ad43['trim']()){_0x46bc8b[_0x5119f6(0x84a)][_0x5caeb0]['background']=_0x53ad43[_0x5119f6(0xa06)](),await _0x3373e0();if(_0x46bc8b[_0x5119f6(0x715)]===_0x5caeb0){const _0x1932ac=document[_0x5119f6(0xfb1)](_0x5119f6(0x978));_0x1932ac[_0x5119f6(0x63b)]['setProperty']('--music-bg-image',_0x5119f6(0xfbd)+_0x53ad43[_0x5119f6(0xa06)]()+')');}await _0x4abd86('成功',_0x5119f6(0x3ba));}}async function _0x4f232a(_0x42fdbf){const _0x2be4b8=_0x7c5117;if(_0x42fdbf<0x0||_0x42fdbf>=_0x46bc8b['playlist'][_0x2be4b8(0xac0)])return;const _0x38c254=await _0x2aedfc('更换专辑封面',[{'text':_0x2be4b8(0x234),'value':_0x2be4b8(0x8f4)},{'text':_0x2be4b8(0x6dc),'value':_0x2be4b8(0x3f5)}]);let _0x2691c2=null;if(_0x38c254===_0x2be4b8(0x8f4))_0x2691c2=await _0x468818();else _0x38c254==='url'&&(_0x2691c2=await _0x131a69('输入图片URL','请输入新的封面图片链接','',_0x2be4b8(0x3f5)));if(_0x2691c2&&_0x2691c2[_0x2be4b8(0xa06)]()){_0x46bc8b['playlist'][_0x42fdbf][_0x2be4b8(0x435)]=_0x2691c2['trim'](),await _0x3373e0();if(_0x46bc8b['currentIndex']===_0x42fdbf){document[_0x2be4b8(0xfa0)]('music-player-cover')[_0x2be4b8(0x53e)]=_0x2691c2[_0x2be4b8(0xa06)]();const _0x459d7f=document['querySelector']('#vinyl-view\x20#music-player-cover');if(_0x459d7f)_0x459d7f[_0x2be4b8(0x53e)]=_0x2691c2['trim']();}await _0x4abd86('成功','专辑封面已更新！');}}async function _0xaf2707(_0x80d7bc){const _0x46c48d=_0x7c5117;if(_0x80d7bc<0x0||_0x80d7bc>=_0x46bc8b['playlist'][_0x46c48d(0xac0)])return;const _0x1ed4c6=_0x46bc8b[_0x46c48d(0x84a)][_0x80d7bc],_0x5e69fd=_0x46bc8b[_0x46c48d(0xcc5)]&&_0x46bc8b['currentIndex']===_0x80d7bc;if(_0x1ed4c6[_0x46c48d(0x1be)]&&_0x447ac1['src'][_0x46c48d(0x9b8)]('blob:')&&_0x46bc8b[_0x46c48d(0x715)]===_0x80d7bc)URL['revokeObjectURL'](_0x447ac1['src']);_0x46bc8b['playlist'][_0x46c48d(0x11ac)](_0x80d7bc,0x1),await _0x3373e0();if(_0x46bc8b['playlist']['length']===0x0){if(_0x46bc8b['isPlaying'])_0x447ac1[_0x46c48d(0x3a3)]();_0x447ac1[_0x46c48d(0x53e)]='',_0x46bc8b[_0x46c48d(0x715)]=-0x1,_0x46bc8b[_0x46c48d(0xcc5)]=![];}else{if(_0x5e69fd)_0xcf66fc();else{if(_0x46bc8b[_0x46c48d(0x715)]>=_0x80d7bc)_0x46bc8b[_0x46c48d(0x715)]=Math[_0x46c48d(0xb70)](0x0,_0x46bc8b['currentIndex']-0x1);}}_0x139f8a(),_0x45ef07();}async function _0x31a5e6(_0x4153e8){const _0x33b6fd=_0x7c5117,_0x113b12=_0x4153e8[_0x33b6fd(0x10c2)]['files'];if(!_0x113b12[_0x33b6fd(0xac0)])return;for(const _0x37020e of _0x113b12){let _0x383e46=_0x37020e[_0x33b6fd(0x1023)][_0x33b6fd(0x128a)](/\.[^/.]+$/,'');_0x383e46=await _0x131a69(_0x33b6fd(0x11e6),_0x33b6fd(0xaab),_0x383e46);if(_0x383e46===null)continue;const _0x2055df=await _0x131a69(_0x33b6fd(0x11e6),_0x33b6fd(0xd43),_0x33b6fd(0x14f9));if(_0x2055df===null)continue;let _0x1f2f06='';const _0x268efb=await _0x3f65ed(_0x33b6fd(0x1494),'要为《'+_0x383e46+_0x33b6fd(0xf7f));_0x268efb&&(_0x1f2f06=await _0x591622()||''),_0x46bc8b['playlist'][_0x33b6fd(0x481)]({'name':_0x383e46,'artist':_0x2055df,'src':_0x37020e,'isLocal':!![],'lrcContent':_0x1f2f06});}await _0x3373e0(),_0x45ef07(),_0x46bc8b[_0x33b6fd(0x715)]===-0x1&&_0x46bc8b[_0x33b6fd(0x84a)]['length']>0x0&&(_0x46bc8b[_0x33b6fd(0x715)]=0x0,_0x139f8a()),_0x4153e8[_0x33b6fd(0x10c2)]['value']=null;}async function _0xaf2707(_0x4985d8){const _0x327675=_0x7c5117;if(_0x4985d8<0x0||_0x4985d8>=_0x46bc8b[_0x327675(0x84a)][_0x327675(0xac0)])return;const _0x4d1243=_0x46bc8b[_0x327675(0x84a)][_0x4985d8],_0xa132b8=_0x46bc8b[_0x327675(0xcc5)]&&_0x46bc8b[_0x327675(0x715)]===_0x4985d8;if(_0x4d1243[_0x327675(0x1be)]&&_0x447ac1[_0x327675(0x53e)][_0x327675(0x9b8)](_0x327675(0x56a))&&_0x46bc8b[_0x327675(0x715)]===_0x4985d8)URL[_0x327675(0x43c)](_0x447ac1[_0x327675(0x53e)]);_0x46bc8b[_0x327675(0x84a)]['splice'](_0x4985d8,0x1),await _0x3373e0();if(_0x46bc8b[_0x327675(0x84a)][_0x327675(0xac0)]===0x0){if(_0x46bc8b[_0x327675(0xcc5)])_0x447ac1[_0x327675(0x3a3)]();_0x447ac1['src']='',_0x46bc8b[_0x327675(0x715)]=-0x1,_0x46bc8b[_0x327675(0xcc5)]=![];}else{if(_0xa132b8)_0xcf66fc();else{if(_0x46bc8b['currentIndex']>=_0x4985d8)_0x46bc8b[_0x327675(0x715)]=Math[_0x327675(0xb70)](0x0,_0x46bc8b[_0x327675(0x715)]-0x1);}}_0x139f8a(),_0x45ef07();}const _0x50db8a=document['getElementById']('persona-library-modal'),_0x25a04e=document['getElementById'](_0x7c5117(0x463)),_0x1237a9=document['getElementById'](_0x7c5117(0xb2c));function _0x1b38df(){const _0x70d47e=_0x7c5117;_0x43335c(),_0x50db8a[_0x70d47e(0x128f)]['add'](_0x70d47e(0xdcc));}function _0x5ac1a3(){const _0x437720=_0x7c5117;_0x50db8a[_0x437720(0x128f)][_0x437720(0x443)](_0x437720(0xdcc));}function _0x43335c(){const _0x2937c2=_0x7c5117,_0x2d61e4=document[_0x2937c2(0xfa0)](_0x2937c2(0x87e));_0x2d61e4[_0x2937c2(0x1331)]='';if(_0x8f0871[_0x2937c2(0x20a)][_0x2937c2(0xac0)]===0x0){_0x2d61e4[_0x2937c2(0x1331)]=_0x2937c2(0x8a8);return;}_0x8f0871['personaPresets'][_0x2937c2(0x458)](_0x13876b=>{const _0x3903f3=_0x2937c2,_0x69392e=document['createElement']('div');_0x69392e[_0x3903f3(0x1287)]='persona-preset-item',_0x69392e[_0x3903f3(0x63b)][_0x3903f3(0xc93)]='url('+_0x13876b[_0x3903f3(0xc61)]+')',_0x69392e[_0x3903f3(0x8df)][_0x3903f3(0xe1a)]=_0x13876b['id'],_0x69392e['addEventListener'](_0x3903f3(0xb4a),()=>_0x183a33(_0x13876b['id'])),_0x53cdde(_0x69392e,()=>_0x2e0bad(_0x13876b['id'])),_0x2d61e4[_0x3903f3(0x1155)](_0x69392e);});}function _0x2e0bad(_0x1af7f1){const _0x223cd0=_0x7c5117;_0x57844b=_0x1af7f1,_0x1237a9['classList'][_0x223cd0(0x1327)](_0x223cd0(0xdcc));}function _0x50e711(){const _0xd11262=_0x7c5117;_0x1237a9[_0xd11262(0x128f)][_0xd11262(0x443)](_0xd11262(0xdcc)),_0x57844b=null;}function _0x183a33(_0x34b906){const _0x4c0437=_0x7c5117,_0x3b0304=_0x8f0871[_0x4c0437(0x20a)][_0x4c0437(0x7ed)](_0x375f06=>_0x375f06['id']===_0x34b906);_0x3b0304&&(document[_0x4c0437(0xfa0)](_0x4c0437(0x27b))[_0x4c0437(0x53e)]=_0x3b0304['avatar'],document[_0x4c0437(0xfa0)](_0x4c0437(0x791))['value']=_0x3b0304['persona']),_0x5ac1a3();}function _0x1cc972(){const _0x149edf=_0x7c5117;_0x57844b=null,document[_0x149edf(0xfa0)]('persona-editor-title')[_0x149edf(0xc62)]=_0x149edf(0xcdc),document[_0x149edf(0xfa0)](_0x149edf(0xfc1))[_0x149edf(0x53e)]=_0x1a2fc1,document['getElementById']('preset-persona-input')[_0x149edf(0x4f6)]='',_0x25a04e[_0x149edf(0x128f)][_0x149edf(0x1327)](_0x149edf(0xdcc));}function _0x5e381f(){const _0x410ff4=_0x7c5117,_0x383e17=_0x8f0871[_0x410ff4(0x20a)][_0x410ff4(0x7ed)](_0x3034a1=>_0x3034a1['id']===_0x57844b);if(!_0x383e17)return;document[_0x410ff4(0xfa0)](_0x410ff4(0xf76))[_0x410ff4(0xc62)]=_0x410ff4(0x10ac),document[_0x410ff4(0xfa0)](_0x410ff4(0xfc1))[_0x410ff4(0x53e)]=_0x383e17[_0x410ff4(0xc61)],document[_0x410ff4(0xfa0)](_0x410ff4(0xacf))[_0x410ff4(0x4f6)]=_0x383e17['persona'],_0x1237a9[_0x410ff4(0x128f)][_0x410ff4(0x443)](_0x410ff4(0xdcc)),_0x25a04e['classList'][_0x410ff4(0x1327)](_0x410ff4(0xdcc));}async function _0x328678(){const _0x1d4de8=_0x7c5117,_0x577384=await _0x3f65ed('删除预设','确定要删除这个人设预设吗？此操作不可恢复。',{'confirmButtonClass':_0x1d4de8(0x611)});_0x577384&&_0x57844b&&(await _0x372b85[_0x1d4de8(0x20a)][_0x1d4de8(0xf10)](_0x57844b),_0x8f0871[_0x1d4de8(0x20a)]=_0x8f0871[_0x1d4de8(0x20a)][_0x1d4de8(0xde7)](_0x235820=>_0x235820['id']!==_0x57844b),_0x50e711(),_0x43335c());}function _0x5ef89c(){const _0x545494=_0x7c5117;_0x25a04e[_0x545494(0x128f)][_0x545494(0x443)]('visible'),_0x57844b=null;}async function _0x272641(){const _0x59d17b=_0x7c5117,_0x5a2f68=document['getElementById'](_0x59d17b(0xfc1))['src'],_0x45fd9c=document[_0x59d17b(0xfa0)]('preset-persona-input')['value'][_0x59d17b(0xa06)]();if(_0x5a2f68===_0x1a2fc1&&!_0x45fd9c){alert(_0x59d17b(0x1409));return;}if(_0x57844b){const _0x1b2bee=_0x8f0871[_0x59d17b(0x20a)][_0x59d17b(0x7ed)](_0x18400d=>_0x18400d['id']===_0x57844b);_0x1b2bee&&(_0x1b2bee[_0x59d17b(0xc61)]=_0x5a2f68,_0x1b2bee[_0x59d17b(0x3fa)]=_0x45fd9c,await _0x372b85['personaPresets'][_0x59d17b(0x11d5)](_0x1b2bee));}else{const _0x20ab46={'id':_0x59d17b(0x11db)+Date[_0x59d17b(0xc22)](),'avatar':_0x5a2f68,'persona':_0x45fd9c};await _0x372b85[_0x59d17b(0x20a)]['add'](_0x20ab46),_0x8f0871['personaPresets'][_0x59d17b(0x481)](_0x20ab46);}_0x43335c(),_0x5ef89c();}const _0x38de13=document[_0x7c5117(0xfa0)]('battery-alert-modal');function _0x1e4ee7(_0x59bcb8,_0x1db86c){const _0x485251=_0x7c5117;clearTimeout(_0x4f04d1),document[_0x485251(0xfa0)](_0x485251(0x1fc))[_0x485251(0x53e)]=_0x59bcb8,document['getElementById'](_0x485251(0xdbb))[_0x485251(0xc62)]=_0x1db86c,_0x38de13[_0x485251(0x128f)]['add'](_0x485251(0xdcc));const _0x537514=()=>{const _0x459a85=_0x485251;_0x38de13[_0x459a85(0x128f)][_0x459a85(0x443)](_0x459a85(0xdcc)),_0x38de13['removeEventListener'](_0x459a85(0xb4a),_0x537514);};_0x38de13[_0x485251(0x7b8)](_0x485251(0xb4a),_0x537514),_0x4f04d1=setTimeout(_0x537514,0x7d0);}function _0xcf2d2a(_0x2e2b60){const _0x2b68a6=_0x7c5117,_0x347ed5=document[_0x2b68a6(0xfa0)]('status-bar-battery'),_0x29aaa1=_0x347ed5['querySelector'](_0x2b68a6(0x2e1)),_0x355488=_0x347ed5[_0x2b68a6(0xfb1)](_0x2b68a6(0x1124)),_0x2b0df9=Math[_0x2b68a6(0x13e5)](_0x2e2b60[_0x2b68a6(0x10eb)]*0x64);_0x29aaa1[_0x2b68a6(0x63b)][_0x2b68a6(0xa92)]=_0x2b0df9+'%',_0x355488[_0x2b68a6(0xc62)]=_0x2b0df9+'%',_0x2e2b60[_0x2b68a6(0xca0)]?_0x347ed5[_0x2b68a6(0x128f)][_0x2b68a6(0x1327)](_0x2b68a6(0xca0)):_0x347ed5[_0x2b68a6(0x128f)][_0x2b68a6(0x443)]('charging');}function _0x164ce8(_0xce3de9){const _0x3bc437=_0x7c5117;_0xcf2d2a(_0xce3de9);const _0x50d4f0=_0xce3de9[_0x3bc437(0x10eb)];!_0xce3de9['charging']&&(_0x50d4f0<=0.4&&_0x396d53>0.4&&!_0x79773f[_0x3bc437(0x12d8)]&&(_0x1e4ee7(_0x3bc437(0xc19),'有点饿了，可以去找充电器惹'),_0x79773f[_0x3bc437(0x12d8)]=!![]),_0x50d4f0<=0.2&&_0x396d53>0.2&&!_0x79773f[_0x3bc437(0xaae)]&&(_0x1e4ee7(_0x3bc437(0x809),_0x3bc437(0x6ac)),_0x79773f[_0x3bc437(0xaae)]=!![]),_0x50d4f0<=0.1&&_0x396d53>0.1&&!_0x79773f[_0x3bc437(0xc05)]&&(_0x1e4ee7(_0x3bc437(0xe03),_0x3bc437(0xeb1)),_0x79773f[_0x3bc437(0xc05)]=!![]));if(_0x50d4f0>0.4)_0x79773f[_0x3bc437(0x12d8)]=![];if(_0x50d4f0>0.2)_0x79773f['hasShown20']=![];if(_0x50d4f0>0.1)_0x79773f['hasShown10']=![];_0x396d53=_0x50d4f0;}async function _0x179c09(){const _0xb77d3c=_0x7c5117;if(_0xb77d3c(0x139c)in navigator)try{const _0x4e3743=await navigator['getBattery']();_0x396d53=_0x4e3743[_0xb77d3c(0x10eb)],_0x164ce8(_0x4e3743),_0x4e3743['addEventListener'](_0xb77d3c(0xf08),()=>_0x164ce8(_0x4e3743)),_0x4e3743[_0xb77d3c(0x7b8)](_0xb77d3c(0x12ea),()=>{const _0x4b310a=_0xb77d3c;_0x164ce8(_0x4e3743),_0x4e3743[_0x4b310a(0xca0)]&&_0x1e4ee7(_0x4b310a(0x88f),'窝爱泥，电量吃饱饱');});}catch(_0x105e87){console['error'](_0xb77d3c(0x2ad),_0x105e87),document[_0xb77d3c(0xfb1)](_0xb77d3c(0x1124))[_0xb77d3c(0xc62)]=_0xb77d3c(0xb32);}else console['log']('浏览器不支持电池状态API。'),document['querySelector'](_0xb77d3c(0x1124))[_0xb77d3c(0xc62)]='ᗜωᗜ';}async function _0x1976ef(){const _0x5ac752=_0x7c5117,_0x1bcca7=document[_0x5ac752(0xfa0)](_0x5ac752(0x11b4));if(!_0x1bcca7)return;const _0x59ffed=await _0x372b85[_0x5ac752(0x85c)][_0x5ac752(0x1554)](_0x5ac752(0x888))[_0x5ac752(0xaf5)]()[_0x5ac752(0x3bc)]();_0x1bcca7[_0x5ac752(0x1331)]='';if(_0x59ffed[_0x5ac752(0xac0)]===0x0){_0x1bcca7[_0x5ac752(0x1331)]=_0x5ac752(0xc8d);return;}_0x59ffed['forEach'](_0x5525a6=>{const _0x56971f=_0x5ac752,_0x4f77ca=document[_0x56971f(0xb4e)](_0x56971f(0xd53));_0x4f77ca[_0x56971f(0x1287)]=_0x56971f(0xe29),_0x4f77ca[_0x56971f(0x1331)]=_0x56971f(0xea1)+_0x5525a6[_0x56971f(0xb5f)]+_0x56971f(0x634)+_0x5525a6['name']+_0x56971f(0x2e2)+(_0x5525a6['photoCount']||0x0)+_0x56971f(0xfb8),_0x4f77ca[_0x56971f(0x7b8)](_0x56971f(0xb4a),()=>{_0x258550(_0x5525a6['id']);}),_0x53cdde(_0x4f77ca,async()=>{const _0x443386=_0x56971f,_0x4d40a5=await _0x3f65ed(_0x443386(0x8bb),_0x443386(0xee7)+_0x5525a6[_0x443386(0x1023)]+_0x443386(0x1497),{'confirmButtonClass':'btn-danger'});_0x4d40a5&&(await _0x372b85['qzonePhotos'][_0x443386(0xdc7)](_0x443386(0x74e))[_0x443386(0x8c2)](_0x5525a6['id'])[_0x443386(0xf10)](),await _0x372b85[_0x443386(0x85c)]['delete'](_0x5525a6['id']),await _0x1976ef(),alert(_0x443386(0x855)));}),_0x1bcca7[_0x56971f(0x1155)](_0x4f77ca);});}async function _0x258550(_0x3e2cb0){const _0x186a89=_0x7c5117;_0x8f0871[_0x186a89(0x1577)]=_0x3e2cb0,await _0x428770(),_0x2d25e5('album-photos-screen');}async function _0x428770(){const _0x3fd366=_0x7c5117;if(!_0x8f0871['activeAlbumId'])return;const _0x168224=document['getElementById'](_0x3fd366(0xb00)),_0x52d49f=document[_0x3fd366(0xfa0)](_0x3fd366(0x1314)),_0x588f06=await _0x372b85[_0x3fd366(0x85c)]['get'](_0x8f0871['activeAlbumId']);if(!_0x588f06){console[_0x3fd366(0x52b)](_0x3fd366(0x6ec),_0x8f0871[_0x3fd366(0x1577)]),_0x2d25e5('album-screen');return;}_0x52d49f[_0x3fd366(0xc62)]=_0x588f06[_0x3fd366(0x1023)];const _0x10180c=await _0x372b85[_0x3fd366(0x363)][_0x3fd366(0xdc7)](_0x3fd366(0x74e))[_0x3fd366(0x8c2)](_0x8f0871['activeAlbumId'])[_0x3fd366(0x3bc)]();_0x168224[_0x3fd366(0x1331)]='',_0x10180c[_0x3fd366(0xac0)]===0x0?_0x168224[_0x3fd366(0x1331)]=_0x3fd366(0x1134):_0x10180c[_0x3fd366(0x458)](_0xe9e715=>{const _0x16851b=_0x3fd366,_0x10a07f=document[_0x16851b(0xb4e)](_0x16851b(0xd53));_0x10a07f['className']=_0x16851b(0x7c8),_0x10a07f[_0x16851b(0x1331)]=_0x16851b(0xa7c)+_0xe9e715['url']+'\x22\x20class=\x22photo-thumb\x22\x20alt=\x22相册照片\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22photo-delete-btn\x22\x20data-photo-id=\x22'+_0xe9e715['id']+_0x16851b(0xdb1),_0x168224['appendChild'](_0x10a07f);});}async function _0x4fa1a0(_0x318786){const _0x448375=_0x7c5117;if(!_0x8f0871[_0x448375(0x1577)])return;const _0x1f452e=await _0x372b85[_0x448375(0x363)][_0x448375(0xdc7)]('albumId')[_0x448375(0x8c2)](_0x8f0871['activeAlbumId'])[_0x448375(0x3bc)]();_0x24396c[_0x448375(0x518)]=_0x1f452e[_0x448375(0x556)](_0x121b08=>_0x121b08[_0x448375(0x3f5)]),_0x24396c[_0x448375(0x715)]=_0x24396c['photos'][_0x448375(0xb22)](_0x4a0743=>_0x4a0743===_0x318786);if(_0x24396c[_0x448375(0x715)]===-0x1)return;document['getElementById'](_0x448375(0x14ba))[_0x448375(0x128f)][_0x448375(0x1327)](_0x448375(0xdcc)),_0x125184(),_0x24396c[_0x448375(0xe21)]=!![];}function _0x125184(){const _0x2225b3=_0x7c5117;if(_0x24396c[_0x2225b3(0x715)]===-0x1)return;const _0x368367=document[_0x2225b3(0xfa0)](_0x2225b3(0xd6a)),_0x33d019=document[_0x2225b3(0xfa0)](_0x2225b3(0x3a5)),_0x1411e4=document[_0x2225b3(0xfa0)](_0x2225b3(0x532));_0x368367[_0x2225b3(0x63b)][_0x2225b3(0xe7b)]=0x0,setTimeout(()=>{const _0x4f2311=_0x2225b3;_0x368367[_0x4f2311(0x53e)]=_0x24396c['photos'][_0x24396c['currentIndex']],_0x368367[_0x4f2311(0x63b)][_0x4f2311(0xe7b)]=0x1;},0x64),_0x33d019[_0x2225b3(0x104b)]=_0x24396c['currentIndex']===0x0,_0x1411e4['disabled']=_0x24396c['currentIndex']===_0x24396c[_0x2225b3(0x518)][_0x2225b3(0xac0)]-0x1;}function _0x50ded1(){const _0x4dbc4d=_0x7c5117;_0x24396c[_0x4dbc4d(0x715)]<_0x24396c[_0x4dbc4d(0x518)][_0x4dbc4d(0xac0)]-0x1&&(_0x24396c[_0x4dbc4d(0x715)]++,_0x125184());}function _0xadc4b3(){const _0x5f3c52=_0x7c5117;_0x24396c[_0x5f3c52(0x715)]>0x0&&(_0x24396c[_0x5f3c52(0x715)]--,_0x125184());}function _0x3ab1b1(){const _0x1e2754=_0x7c5117;document[_0x1e2754(0xfa0)](_0x1e2754(0x14ba))[_0x1e2754(0x128f)][_0x1e2754(0x443)](_0x1e2754(0xdcc)),_0x24396c[_0x1e2754(0xe21)]=![],_0x24396c[_0x1e2754(0x518)]=[],_0x24396c[_0x1e2754(0x715)]=-0x1,document[_0x1e2754(0xfa0)](_0x1e2754(0xd6a))[_0x1e2754(0x53e)]='';}function _0x11aa82(_0xa3568d){const _0x583b22=_0x7c5117;_0xab67da=_0xa3568d,localStorage[_0x583b22(0x86f)]('unreadPostsCount',_0xa3568d);const _0x5023cf=document[_0x583b22(0xfb1)](_0x583b22(0xf4c)),_0x39baa=_0x5023cf[_0x583b22(0xfb1)]('span');let _0x31e2fb=_0x5023cf[_0x583b22(0xfb1)]('.unread-indicator');_0xa3568d>0x0?(!_0x31e2fb&&(_0x31e2fb=document[_0x583b22(0xb4e)](_0x583b22(0x388)),_0x31e2fb[_0x583b22(0x1287)]=_0x583b22(0x5f1),_0x39baa[_0x583b22(0x63b)][_0x583b22(0x116c)]=_0x583b22(0x1275),_0x39baa['appendChild'](_0x31e2fb)),_0x31e2fb['textContent']=_0xa3568d>0x63?'99+':_0xa3568d,_0x31e2fb[_0x583b22(0x63b)]['display']=_0x583b22(0x127c)):_0x31e2fb&&(_0x31e2fb[_0x583b22(0x63b)][_0x583b22(0x1248)]='none'),_0x5415e3();}function _0xc2280d(){const _0x3ea199=_0x7c5117;if(_0x25915b)return;const _0x1724ca=_0x8f0871[_0x3ea199(0x7b0)]['backgroundActivityInterval']||0x3c;_0x25915b=setInterval(_0x480a46,_0x1724ca*0x3e8),_0x2f939c();}function _0x5f2c38(){_0x25915b&&(clearInterval(_0x25915b),_0x25915b=null),_0x339967();}async function _0x480a46(){const _0x2db7b5=_0x7c5117;console[_0x2db7b5(0x4ee)]('模拟器心跳\x20Tick...');if(!_0x8f0871[_0x2db7b5(0x7b0)][_0x2db7b5(0xb20)]){_0x5f2c38();return;}const _0x2fc797=Object[_0x2db7b5(0x142f)](_0x8f0871[_0x2db7b5(0x1260)])['filter'](_0x525106=>!_0x525106[_0x2db7b5(0x1364)]);_0x2fc797[_0x2db7b5(0x458)](_0x3fdcbd=>{const _0x444aa8=_0x2db7b5;if(_0x3fdcbd[_0x444aa8(0x1171)]?.['status']===_0x444aa8(0x1217)){const _0x1b7645=_0x3fdcbd[_0x444aa8(0x1171)][_0x444aa8(0x334)];if(!_0x1b7645)return;const _0x237e77=Date[_0x444aa8(0xc22)]()-_0x1b7645,_0x3fb72c=(_0x8f0871[_0x444aa8(0x7b0)][_0x444aa8(0x14a2)]||0x1)*0x3c*0x3c*0x3e8;_0x237e77>_0x3fb72c&&(_0x3fdcbd[_0x444aa8(0x1171)][_0x444aa8(0x103e)]='pending_system_reflection',_0x7d41bb(_0x3fdcbd['id']));}else{if(_0x3fdcbd[_0x444aa8(0x1171)]?.['status']===_0x444aa8(0x14b5)&&_0x3fdcbd['id']!==_0x8f0871[_0x444aa8(0xac8)]){if(_0x3fdcbd[_0x444aa8(0x12d7)][_0x444aa8(0xb20)]===![]){console[_0x444aa8(0x4ee)](_0x444aa8(0xc1d)+_0x3fdcbd[_0x444aa8(0x1023)]+_0x444aa8(0x891));return;}Math[_0x444aa8(0x148a)]()<0.2&&(console['log'](_0x444aa8(0xc1d)+_0x3fdcbd[_0x444aa8(0x1023)]+_0x444aa8(0x1366)),_0x4dc163(_0x3fdcbd['id']));}}});const _0x363e63=Object[_0x2db7b5(0x142f)](_0x8f0871[_0x2db7b5(0x1260)])[_0x2db7b5(0xde7)](_0x413c92=>_0x413c92['isGroup']);_0x363e63[_0x2db7b5(0x458)](_0x52d9a8=>{const _0x5660a6=_0x2db7b5;if(_0x52d9a8[_0x5660a6(0x12d7)]['enableBackgroundActivity']===![]){console[_0x5660a6(0x4ee)]('群聊\x20\x22'+_0x52d9a8[_0x5660a6(0x1023)]+_0x5660a6(0x28e));return;}_0x52d9a8['id']!==_0x8f0871['activeChatId']&&Math[_0x5660a6(0x148a)]()<0.1&&(console[_0x5660a6(0x4ee)](_0x5660a6(0xbc2)+_0x52d9a8[_0x5660a6(0x1023)]+_0x5660a6(0x1366)),_0x2ba1f4(_0x52d9a8['id']));});try{const _0x1234a5=await _0x372b85[_0x2db7b5(0x1269)][_0x2db7b5(0x3bc)]();if(_0x1234a5[_0x2db7b5(0xac0)]===0x0)return;const _0x235e2b=await _0x372b85[_0x2db7b5(0x12c2)][_0x2db7b5(0x1554)](_0x2db7b5(0xe55))[_0x2db7b5(0xaf5)]()[_0x2db7b5(0xba1)](0xa)[_0x2db7b5(0x3bc)]();for(const _0x334535 of _0x1234a5){if(_0x334535[_0x2db7b5(0xb20)]===![])continue;const _0x363738=_0x334535[_0x2db7b5(0x1158)]||0xf;if(_0x334535['lastActionTimestamp']){const _0x4c2922=(Date['now']()-_0x334535[_0x2db7b5(0xecc)])/(0x3e8*0x3c);if(_0x4c2922<_0x363738)continue;}if(Math[_0x2db7b5(0x148a)]()>0.3)continue;const _0x42c6d9=[];for(const _0xe8ca2 of _0x235e2b){if(_0xe8ca2[_0x2db7b5(0x11dd)]==='npc_'+_0x334535['id'])continue;const _0x45e331=_0xe8ca2[_0x2db7b5(0xbab)]?.[_0x2db7b5(0x75d)](_0x5ed89b=>_0x5ed89b[_0x2db7b5(0x5ee)]===_0x334535[_0x2db7b5(0x1023)]),_0x223384=_0xe8ca2['comments']?.['slice'](-0x1)[0x0]?.['commenterName'];if(_0x223384===_0x334535[_0x2db7b5(0x1023)])continue;let _0x55d903=![];if(_0xe8ca2['authorId']==='user'||_0xe8ca2['authorId'][_0x2db7b5(0x9b8)](_0x2db7b5(0xc37)))_0x334535[_0x2db7b5(0x10ef)][_0x2db7b5(0xf95)](_0xe8ca2[_0x2db7b5(0x11dd)])&&(_0x55d903=!![]);else{if(_0xe8ca2[_0x2db7b5(0x11dd)]['startsWith']('npc_')){const _0x208a67=parseInt(_0xe8ca2[_0x2db7b5(0x11dd)]['replace']('npc_','')),_0x66f15f=await _0x372b85[_0x2db7b5(0x1269)][_0x2db7b5(0x70d)](_0x208a67);if(_0x66f15f){const _0x4dd487=_0x334535['npcGroupId'],_0x5c8861=_0x66f15f['npcGroupId'];_0x4dd487&&_0x5c8861&&_0x4dd487===_0x5c8861&&(_0x55d903=!![]);}}}(_0x55d903||_0x45e331)&&_0x42c6d9['push'](_0xe8ca2);}if(_0x42c6d9[_0x2db7b5(0xac0)]>0x0||Math['random']()<0.2){console[_0x2db7b5(0x4ee)]('NPC\x20\x22'+_0x334535[_0x2db7b5(0x1023)]+_0x2db7b5(0xfa2));const _0x16b566=await _0x2a1135(_0x334535,_0x42c6d9);if(_0x16b566&&_0x16b566['length']>0x0){for(const _0x5abcc6 of _0x16b566){if(_0x5abcc6[_0x2db7b5(0x682)]===_0x2db7b5(0x691)){const _0x533c4d=await _0x372b85['qzonePosts']['get'](_0x5abcc6[_0x2db7b5(0x3eb)]);if(_0x533c4d){if(!_0x533c4d[_0x2db7b5(0xbab)])_0x533c4d['comments']=[];_0x533c4d[_0x2db7b5(0xbab)][_0x2db7b5(0x481)]({'commenterName':_0x334535[_0x2db7b5(0x1023)],'text':_0x5abcc6[_0x2db7b5(0xc6e)],'replyTo':_0x5abcc6['replyTo']||null,'timestamp':Date[_0x2db7b5(0xc22)]()+Math['random']()}),await _0x372b85['qzonePosts'][_0x2db7b5(0x1477)](_0x5abcc6['postId'],{'comments':_0x533c4d[_0x2db7b5(0xbab)]}),_0x11aa82(_0xab67da+0x1);}}else{if(_0x5abcc6[_0x2db7b5(0x682)]===_0x2db7b5(0x1b9)){const _0x362c33={'type':_0x5abcc6[_0x2db7b5(0x13bf)]||_0x2db7b5(0x134d),'content':_0x5abcc6['content'],'timestamp':Date[_0x2db7b5(0xc22)](),'authorId':'npc_'+_0x334535['id'],'authorOriginalName':_0x334535[_0x2db7b5(0x1023)],'visibleTo':_0x334535['associatedWith'],'likes':[],'comments':[],'isDeleted':![]};await _0x372b85[_0x2db7b5(0x12c2)]['add'](_0x362c33),console[_0x2db7b5(0x4ee)](_0x2db7b5(0x2ee)+_0x334535[_0x2db7b5(0x1023)]+_0x2db7b5(0xbb0)),_0x11aa82(_0xab67da+0x1);}}}await _0x372b85[_0x2db7b5(0x1269)][_0x2db7b5(0x1477)](_0x334535['id'],{'lastActionTimestamp':Date['now']()}),document[_0x2db7b5(0xfa0)](_0x2db7b5(0x337))[_0x2db7b5(0x128f)][_0x2db7b5(0xea7)](_0x2db7b5(0xa37))&&await _0x1098dc();}}}}catch(_0x1f4e35){console[_0x2db7b5(0x52b)](_0x2db7b5(0x1570),_0x1f4e35);}}async function _0x2a1135(_0x3911be,_0x7848d8){const _0x2ba69b=_0x7c5117,{proxyUrl:_0x29fb95,apiKey:_0x3bb4d9,model:_0x596bca}=_0x8f0871[_0x2ba69b(0xa78)];if(!_0x29fb95||!_0x3bb4d9||!_0x596bca)return console[_0x2ba69b(0x52b)](_0x2ba69b(0xc6a)),null;let _0x1ea1c2=_0x2ba69b(0xc51);const _0x5a97b0=_0x8f0871[_0x2ba69b(0x9dd)][_0x2ba69b(0xff8)]||'我',_0x3f3397=_0x8f0871[_0x2ba69b(0x1260)][Object[_0x2ba69b(0x1204)](_0x8f0871[_0x2ba69b(0x1260)])[0x0]]?.[_0x2ba69b(0x12d7)][_0x2ba69b(0xbbe)]||_0x2ba69b(0x7e1);_0x1ea1c2+=_0x2ba69b(0x6d2)+_0x5a97b0+_0x2ba69b(0x6a9)+_0x3f3397+'\x0a';_0x3911be[_0x2ba69b(0x10ef)]&&_0x3911be['associatedWith'][_0x2ba69b(0xac0)]>0x0&&_0x3911be[_0x2ba69b(0x10ef)][_0x2ba69b(0x458)](_0x53870a=>{const _0x24a714=_0x2ba69b,_0x26fb6a=_0x8f0871[_0x24a714(0x1260)][_0x53870a];_0x26fb6a&&!_0x26fb6a[_0x24a714(0x1364)]&&(_0x1ea1c2+='-\x20**'+_0x26fb6a['name']+'\x20(本名:\x20'+_0x26fb6a[_0x24a714(0x93e)]+_0x24a714(0x14e3)+_0x26fb6a[_0x24a714(0x12d7)][_0x24a714(0x200)]+'\x0a');});const _0x47b8ce=(await Promise[_0x2ba69b(0x8ab)](_0x7848d8['map'](async _0x53f6d7=>{const _0x3564cb=_0x2ba69b;let _0x39ceb1=_0x3564cb(0x149d);if(_0x53f6d7[_0x3564cb(0x11dd)]===_0x3564cb(0xcb0))_0x39ceb1=_0x8f0871[_0x3564cb(0x9dd)][_0x3564cb(0xff8)]||'用户';else{if(_0x53f6d7['authorId'][_0x3564cb(0x9b8)](_0x3564cb(0xc37)))_0x39ceb1=_0xc4efbd(_0x53f6d7[_0x3564cb(0x432)]||_0x53f6d7[_0x3564cb(0x11dd)]);else{if(_0x53f6d7['authorId'][_0x3564cb(0x9b8)]('npc_')){const _0x56334f=parseInt(_0x53f6d7['authorId'][_0x3564cb(0x128a)](_0x3564cb(0xbec),'')),_0x4f8d4d=await _0x372b85[_0x3564cb(0x1269)]['get'](_0x56334f);_0x4f8d4d&&(_0x39ceb1=_0x4f8d4d[_0x3564cb(0x1023)]);}}}const _0x359e36=(_0x53f6d7[_0x3564cb(0xbab)]||[])[_0x3564cb(0x556)](_0x8955ff=>{const _0x2078af=_0x3564cb;if(typeof _0x8955ff===_0x2078af(0xf2e)&&_0x8955ff[_0x2078af(0xa7e)]){const _0x44a1c2=_0xc4efbd(_0x8955ff['commenterName']);return _0x2078af(0x6d2)+_0x44a1c2+_0x2078af(0x1264)+_0x8955ff['text'];}return'-\x20'+_0x8955ff;})['join']('\x0a');return _0x3564cb(0x913)+_0x53f6d7['id']+'\x0a-\x20**作者**:\x20'+_0x39ceb1+_0x3564cb(0x1073)+(_0x53f6d7['content']||_0x53f6d7['publicText']||'')[_0x3564cb(0x9fe)](0x0,0x96)+_0x3564cb(0x247)+(_0x359e36||_0x3564cb(0x12d2))+'\x0a---\x0a';})))[_0x2ba69b(0xcc2)]('\x0a'),_0x92cbca=_0x2ba69b(0xbec)+_0x3911be['id'],_0x384c46=Date['now']()-0xc*0x3c*0x3c*0x3e8,_0x511877=await _0x372b85[_0x2ba69b(0x12c2)][_0x2ba69b(0xdc7)](_0x2ba69b(0x11dd))[_0x2ba69b(0x8c2)](_0x92cbca)[_0x2ba69b(0x1153)](_0x467077=>_0x467077[_0x2ba69b(0xe55)]>_0x384c46)[_0x2ba69b(0x3bc)]();let _0x35c10f='';_0x511877[_0x2ba69b(0xac0)]>0x0&&(_0x35c10f=_0x2ba69b(0x747));const _0x2a4651='\x0a#\x20你的任务\x0a你是一个虚拟社区的AI。你的核心任务是扮演角色“'+_0x3911be[_0x2ba69b(0x1023)]+'”，并根据其人设，通过【发布新动态】或【评论/回复帖子】来参与社区互动。\x0a\x0a'+_0x35c10f+_0x2ba69b(0x1300)+_0x3911be[_0x2ba69b(0x1023)]+_0x2ba69b(0x10ec)+_0x3911be['persona']+'\x0a\x0a'+_0x1ea1c2+'\x20\x0a\x0a#\x20待处理的帖子列表\x20(如果你选择评论)\x0a'+_0x47b8ce+_0x2ba69b(0x3e0);try{const _0xd4a20d=[{'role':_0x2ba69b(0xcb0),'content':_0x2ba69b(0x708)}];let _0x57d73d=_0x29fb95['includes'](_0x2ba69b(0x9a5)),_0x19569e=_0x1e2f27(_0x596bca,_0x3bb4d9,_0x2a4651,_0xd4a20d);const _0xcd4e0=_0x57d73d?await fetch(_0x19569e[_0x2ba69b(0x3f5)],_0x19569e[_0x2ba69b(0x3cc)]):await fetch(_0x29fb95+_0x2ba69b(0x1011),{'method':_0x2ba69b(0xb67),'headers':{'Content-Type':_0x2ba69b(0x4b5),'Authorization':_0x2ba69b(0x681)+_0x3bb4d9},'body':JSON[_0x2ba69b(0x7cc)]({'model':_0x596bca,'messages':[{'role':_0x2ba69b(0x1417),'content':_0x2a4651},..._0xd4a20d],'temperature':_0x8f0871[_0x2ba69b(0x7b0)][_0x2ba69b(0x14a5)]||0.9})});if(!_0xcd4e0['ok'])throw new Error(_0x2ba69b(0x395)+_0xcd4e0[_0x2ba69b(0x37e)]);const _0x3f951f=await _0xcd4e0[_0x2ba69b(0xa2e)](),_0x3f1cbe=getGeminiResponseText(_0x3f951f),_0x23f6e5=_0x3f1cbe[_0x2ba69b(0x1232)](/(\[[\s\S]*\])/);if(!_0x23f6e5)throw new Error('AI返回的行动中未找到有效的JSON数组。');return JSON[_0x2ba69b(0x4a0)](_0x23f6e5[0x0]);}catch(_0x19d391){return console[_0x2ba69b(0x52b)](_0x2ba69b(0xd5b)+_0x3911be[_0x2ba69b(0x1023)]+_0x2ba69b(0x351),_0x19d391),null;}}async function _0x4dc163(_0x1c417e){const _0x5b88d8=_0x7c5117,_0x98d90f=_0x8f0871[_0x5b88d8(0x1260)][_0x1c417e];if(!_0x98d90f)return;const _0x15e17c=_0x98d90f[_0x5b88d8(0x12d7)][_0x5b88d8(0x1158)]||0xa;if(_0x98d90f['lastActionTimestamp']){const _0x19195e=(Date[_0x5b88d8(0xc22)]()-_0x98d90f['lastActionTimestamp'])/(0x3e8*0x3c);if(_0x19195e<_0x15e17c){console[_0x5b88d8(0x4ee)](_0x5b88d8(0xc1d)+_0x98d90f[_0x5b88d8(0x1023)]+'\x22\x20处于行动冷却中\x20(还剩\x20'+Math[_0x5b88d8(0x44d)](_0x15e17c-_0x19195e)+'\x20分钟)，本次独立行动跳过。');return;}}_0x191654(_0x1c417e,!![]);const {proxyUrl:_0x1ae958,apiKey:_0x4e8acd,model:_0x54790f}=_0x8f0871[_0x5b88d8(0xa78)];if(!_0x1ae958||!_0x4e8acd||!_0x54790f)return;const _0x2f4732=_0x8f0871[_0x5b88d8(0x9dd)][_0x5b88d8(0xff8)],_0x4a519e=new Date(),_0x158c50=_0x98d90f[_0x5b88d8(0x12d7)][_0x5b88d8(0xf1c)]||'Asia/Shanghai',_0x43ea69=_0x4a519e[_0x5b88d8(0x10de)](_0x5b88d8(0xb43),{'timeZone':_0x158c50,'dateStyle':_0x5b88d8(0x11da),'timeStyle':'short'}),_0x25dc57=new Date(_0x4a519e['toLocaleString']('en-US',{'timeZone':_0x158c50}));let _0x68c76c='',_0x1f994c='',_0x3ca21b,_0x262417=![];const _0x597bd4=_0x98d90f['settings'][_0x5b88d8(0x266)]||0xa,_0x2ea0e8=_0x98d90f[_0x5b88d8(0xc88)][_0x5b88d8(0xde7)](_0x1f2116=>!_0x1f2116['isHidden'])[_0x5b88d8(0x59f)](-_0x597bd4),_0xeee4a6=_0x98d90f[_0x5b88d8(0xc88)][_0x5b88d8(0xde7)](_0x54fb=>!_0x54fb['isHidden'])[_0x5b88d8(0x59f)](-0x1)[0x0];if(_0x98d90f[_0x5b88d8(0x12d7)][_0x5b88d8(0x533)]){_0x68c76c=_0x46db79(_0x25dc57);const _0x433b4d=_0x98d90f['history']['filter'](_0x10d66b=>!_0x10d66b[_0x5b88d8(0x1559)])['slice'](-0x1)[0x0],_0x23c37f=new Date();let _0x4f87e6='',_0x21253b=![];if(_0x433b4d){const _0x5605a4=new Date(_0x433b4d['timestamp']),_0x44b8b8=(_0x23c37f-_0x5605a4)/(0x3e8*0x3c*0x3c);if(_0x44b8b8>0x2){_0x21253b=!![];const _0x5ebc7a=Math['floor'](_0x44b8b8/0x18);_0x4f87e6='你们已经有'+(_0x5ebc7a>0x0?_0x5ebc7a+'天':Math[_0x5b88d8(0x13e5)](_0x44b8b8)+'小时')+_0x5b88d8(0xfe7);}else{const _0x249632=Math['floor'](_0x44b8b8*0x3c);if(_0x249632<0x5)_0x4f87e6=_0x5b88d8(0x74c);else _0x249632<0x3c?_0x4f87e6=_0x5b88d8(0xa38)+_0x249632+_0x5b88d8(0x967):_0x4f87e6=_0x5b88d8(0xa38)+Math[_0x5b88d8(0x13e5)](_0x44b8b8)+'小时前聊过。';}}else _0x21253b=!![],_0x4f87e6=_0x5b88d8(0xbf5);let _0x360a69='你们最近没有有效聊天记录。';_0x2ea0e8[_0x5b88d8(0xac0)]>0x0&&(_0x360a69=_0x5b88d8(0x5cc)+_0x2ea0e8[_0x5b88d8(0x556)](_0x402770=>{const _0x166522=_0x5b88d8,_0x2d0501=_0x402770[_0x166522(0xc92)]==='user'?_0x2f4732:_0x98d90f['name'];return _0x2d0501+':\x20'+String(_0x402770['content'])[_0x166522(0x9fe)](0x0,0x32)+'...';})[_0x5b88d8(0xcc2)]('\x0a')),_0x21253b?_0x3ca21b='[情景提示]\x20'+_0x4f87e6+_0x5b88d8(0x451)+_0x43ea69+_0x5b88d8(0x112c)+_0x360a69:_0x3ca21b=''+_0x360a69;}else _0x2ea0e8[_0x5b88d8(0xac0)]>0x0?_0x3ca21b=_0x5b88d8(0x5cc)+_0x2ea0e8['map'](_0xee2cda=>{const _0x4951d6=_0x5b88d8,_0x3f98c4=_0xee2cda[_0x4951d6(0xc92)]===_0x4951d6(0xcb0)?_0x2f4732:_0x98d90f[_0x4951d6(0x1023)];return _0x3f98c4+':\x20'+String(_0xee2cda[_0x4951d6(0x1469)])[_0x4951d6(0x9fe)](0x0,0x32)+_0x4951d6(0x1111);})['join']('\x0a'):_0x3ca21b=_0x5b88d8(0x106f);const _0x1e1cd6=await _0x372b85[_0x5b88d8(0x12c2)][_0x5b88d8(0x1554)](_0x5b88d8(0xe55))['reverse']()[_0x5b88d8(0xba1)](0x5)[_0x5b88d8(0x3bc)](),_0x3e1f25=_0x2aa0e2(_0x1e1cd6,_0x98d90f),_0x4ba54c=_0x3e1f25['filter'](_0x44bc12=>_0x44bc12[_0x5b88d8(0x11dd)]===_0x1c417e);let _0x4b6f20='';_0x4ba54c[_0x5b88d8(0xac0)]>0x0&&(_0x4b6f20=_0x5b88d8(0x927),_0x4ba54c[_0x5b88d8(0x458)](_0x245517=>{const _0x409d6a=_0x5b88d8;let _0x2517b3=(_0x245517[_0x409d6a(0x137f)]||_0x245517[_0x409d6a(0x1469)]||'一条动态')[_0x409d6a(0x9fe)](0x0,0x28)+_0x409d6a(0x1111);_0x4b6f20+=_0x409d6a(0xccf)+_0x245517['id']+')\x20内容:\x20\x22'+_0x2517b3+'\x22\x0a';}));let _0x471f52=[];_0x3e1f25[_0x5b88d8(0xac0)]>0x0&&(_0x471f52=_0x3e1f25[_0x5b88d8(0x556)](_0x4e2a3a=>{const _0xdf8ff7=_0x5b88d8;let _0x23d0f4;if(_0x4e2a3a[_0xdf8ff7(0x682)]==='text_image')_0x23d0f4=(_0xdf8ff7(0x114f)+_0x4e2a3a['hiddenContent']+'”]\x20'+(_0x4e2a3a[_0xdf8ff7(0x137f)]||''))[_0xdf8ff7(0x9fe)](0x0,0x32)+_0xdf8ff7(0x1111);else _0x4e2a3a['type']===_0xdf8ff7(0x76d)?_0x23d0f4=(_0xdf8ff7(0x5a4)+_0x4e2a3a[_0xdf8ff7(0xf67)]+_0xdf8ff7(0x102c)+(_0x4e2a3a[_0xdf8ff7(0x137f)]||''))['substring'](0x0,0x32)+'...':_0x23d0f4=String(_0x4e2a3a['publicText']||_0x4e2a3a[_0xdf8ff7(0x1469)]||_0xdf8ff7(0xfca))['substring'](0x0,0x32)+'...';return _0xdf8ff7(0x1010)+_0x23d0f4+'\x22';}));let _0x279fb1='';_0x471f52[_0x5b88d8(0xac0)]>0x0&&(_0x279fb1=_0x5b88d8(0xa66)+_0x471f52[_0x5b88d8(0xcc2)]('\x0a')+_0x5b88d8(0x97c));let _0x58419c='';if(_0x98d90f['settings']['linkedWorldBookIds']&&_0x98d90f[_0x5b88d8(0x12d7)][_0x5b88d8(0xaaf)]['length']>0x0){const _0x230b5a=_0x98d90f[_0x5b88d8(0x12d7)]['linkedWorldBookIds'][_0x5b88d8(0x556)](_0xe49981=>{const _0x2f70bd=_0x5b88d8,_0x3e01c9=_0x8f0871[_0x2f70bd(0x739)][_0x2f70bd(0x7ed)](_0x417e78=>_0x417e78['id']===_0xe49981);if(!_0x3e01c9||!Array[_0x2f70bd(0x345)](_0x3e01c9['content']))return'';const _0x378cc3=_0x3e01c9[_0x2f70bd(0x1469)][_0x2f70bd(0xde7)](_0x7742bf=>_0x7742bf['enabled']!==![])[_0x2f70bd(0x556)](_0x58954a=>{const _0x4c66bd=_0x2f70bd;let _0x8329e7=_0x4c66bd(0x13b0)+(_0x58954a[_0x4c66bd(0x7ab)]||_0x4c66bd(0x13e2))+'\x0a';return _0x58954a[_0x4c66bd(0x1204)]['length']>0x0&&(_0x8329e7+=_0x4c66bd(0x145a)+_0x58954a[_0x4c66bd(0x1204)][_0x4c66bd(0xcc2)](',\x20')+'\x0a'),_0x8329e7+='**内容:**\x0a'+_0x58954a['content'],_0x8329e7;})[_0x2f70bd(0xcc2)]('');return _0x378cc3?_0x2f70bd(0x66c)+_0x3e01c9['name']+'\x0a'+_0x378cc3:'';})[_0x5b88d8(0xde7)](Boolean)[_0x5b88d8(0xcc2)]('');_0x230b5a&&(_0x58419c=_0x5b88d8(0x72a)+_0x230b5a+_0x5b88d8(0xf00));}let _0x471835='';const _0x309256=_0x98d90f['settings']['linkedMemoryCount']||0xa;if(_0x98d90f[_0x5b88d8(0x12d7)][_0x5b88d8(0x6e0)]&&_0x98d90f[_0x5b88d8(0x12d7)][_0x5b88d8(0x6e0)][_0x5b88d8(0xac0)]>0x0){const _0xa1b5d3=_0x98d90f[_0x5b88d8(0x12d7)][_0x5b88d8(0x6e0)][_0x5b88d8(0x556)](_0x111935=>{const _0x446b61=_0x5b88d8,_0x5550b0=_0x8f0871[_0x446b61(0x1260)][_0x111935];if(!_0x5550b0)return null;const _0x358e0c=_0x5550b0['history'][_0x446b61(0x59f)](-0x1)[0x0];return{'chat':_0x5550b0,'latestTimestamp':_0x358e0c?_0x358e0c[_0x446b61(0xe55)]:0x0};})[_0x5b88d8(0xde7)](Boolean);_0xa1b5d3[_0x5b88d8(0x1376)]((_0x4e2fcd,_0x5007ba)=>_0x5007ba['latestTimestamp']-_0x4e2fcd[_0x5b88d8(0xf80)]),_0x471835+=_0x5b88d8(0xdd1);for(const _0x3759cc of _0xa1b5d3){const _0x15350c=_0x3759cc[_0x5b88d8(0xe5e)],_0x5b15e7=_0x15350c[_0x5b88d8(0x1364)]?'[群聊]':_0x5b88d8(0x908),_0x47484a=_0x3759cc['latestTimestamp']>0x0?'\x20(最后互动于\x20'+_0x2368ae(_0x3759cc[_0x5b88d8(0xf80)])+')':'';_0x471835+=_0x5b88d8(0x41a)+_0x5b15e7+'“'+_0x15350c['name']+'”的参考记忆'+_0x47484a+_0x5b88d8(0xe00);const _0xfdea4d=_0x15350c[_0x5b88d8(0xc88)][_0x5b88d8(0x59f)](-_0x309256),_0x132886=_0xfdea4d[_0x5b88d8(0xde7)](_0x17201a=>!String(_0x17201a[_0x5b88d8(0x1469)])['includes'](_0x5b88d8(0x1293)));_0x132886['length']>0x0?_0x132886[_0x5b88d8(0x458)](_0x56518f=>{const _0x440330=_0x5b88d8,_0x53ab60=_0x56518f[_0x440330(0xc92)]===_0x440330(0xcb0)?_0x15350c[_0x440330(0x12d7)][_0x440330(0xda5)]||'我':_0x56518f[_0x440330(0x213)]||_0x15350c['name'];let _0x1b9f13=String(_0x56518f[_0x440330(0x1469)]);if(_0x56518f[_0x440330(0x682)]==='ai_image'||_0x56518f[_0x440330(0x682)]==='user_photo')_0x1b9f13='[发送了一张图片，描述为：'+_0x56518f[_0x440330(0x1469)]+']';else _0x56518f[_0x440330(0x682)]===_0x440330(0x412)&&(_0x1b9f13=_0x440330(0xba2)+_0x56518f[_0x440330(0x1469)]+']');_0x471835+=_0x53ab60+':\x20'+_0x1b9f13+'\x0a';}):_0x471835+=_0x5b88d8(0x10bb);}}let _0x333882='';if(_0x3e1f25[_0x5b88d8(0xac0)]>0x0){let _0x536962='\x0a\x0a#\x20最近的动态列表\x20(供你参考和评论):\x0a';for(const _0x44274f of _0x3e1f25){let _0x2a5d80;if(_0x44274f['authorId']===_0x5b88d8(0xcb0))_0x2a5d80=_0x8f0871[_0x5b88d8(0x9dd)][_0x5b88d8(0xff8)];else{if(String(_0x44274f[_0x5b88d8(0x11dd)])[_0x5b88d8(0x9b8)](_0x5b88d8(0xbec)))_0x2a5d80=_0x44274f[_0x5b88d8(0x432)]||_0x5b88d8(0x495);else{const _0x26f23d=_0x8f0871[_0x5b88d8(0x1260)][_0x44274f[_0x5b88d8(0x11dd)]];_0x2a5d80=_0x26f23d?_0x26f23d[_0x5b88d8(0x1023)]:_0x5b88d8(0x8e8);}}if(_0x44274f[_0x5b88d8(0x11dd)]===_0x1c417e)_0x2a5d80+=_0x5b88d8(0x188);let _0x490f40;if(_0x44274f[_0x5b88d8(0x682)]===_0x5b88d8(0xf20)){const _0x27a62b=_0x44274f[_0x5b88d8(0xfd1)]?_0x5b88d8(0x665)+_0x44274f[_0x5b88d8(0xfd1)]+'\x22':'';let _0x4ad765=_0x5b88d8(0x204);const _0x43dec7=_0x44274f['originalPost'][_0x5b88d8(0x11dd)];if(_0x43dec7===_0x5b88d8(0xcb0))_0x4ad765=_0x8f0871['qzoneSettings'][_0x5b88d8(0xff8)];else _0x8f0871[_0x5b88d8(0x1260)][_0x43dec7]&&(_0x4ad765=_0x8f0871['chats'][_0x43dec7][_0x5b88d8(0x1023)]);let _0x3515fe;const _0x2a40ef=_0x44274f[_0x5b88d8(0x119c)];if(_0x2a40ef[_0x5b88d8(0x682)]===_0x5b88d8(0x12d0))_0x3515fe=_0x5b88d8(0x1487)+(_0x2a40ef[_0x5b88d8(0x137f)]||'')+_0x5b88d8(0x11d2)+(_0x2a40ef[_0x5b88d8(0x59a)]||'')['substring'](0x0,0x28)+'...\x22)';else _0x2a40ef['type']===_0x5b88d8(0x76d)?_0x3515fe=_0x5b88d8(0x1a4)+(_0x2a40ef['publicText']||'')+_0x5b88d8(0x11d2)+(_0x2a40ef[_0x5b88d8(0xf67)]||'')[_0x5b88d8(0x9fe)](0x0,0x28)+'...\x22)':_0x3515fe='\x22'+(_0x2a40ef['content']||'')[_0x5b88d8(0x9fe)](0x0,0x28)+_0x5b88d8(0x10dd);_0x490f40=_0x5b88d8(0x763)+_0x4ad765+'\x20的动态\x20'+_0x27a62b+_0x5b88d8(0xa08)+_0x3515fe+'】';}else{if(_0x44274f[_0x5b88d8(0x682)]==='text_image')_0x490f40=(_0x5b88d8(0x135c)+_0x44274f[_0x5b88d8(0x59a)]+_0x5b88d8(0x12f4)+(_0x44274f[_0x5b88d8(0x137f)]||''))[_0x5b88d8(0x9fe)](0x0,0x32)+_0x5b88d8(0x1111);else{if(_0x44274f[_0x5b88d8(0x682)]===_0x5b88d8(0x76d))_0x490f40=('[一张图片，描述为：\x22'+_0x44274f[_0x5b88d8(0xf67)]+_0x5b88d8(0x12f4)+(_0x44274f[_0x5b88d8(0x137f)]||''))['substring'](0x0,0x32)+_0x5b88d8(0x1111);else{if(_0x44274f[_0x5b88d8(0x682)]==='naiimag'&&_0x44274f['prompt']){const _0x1c1a10=Array[_0x5b88d8(0x345)](_0x44274f[_0x5b88d8(0xa62)])?_0x44274f['prompt']:[_0x44274f['prompt']];_0x490f40=(_0x44274f[_0x5b88d8(0x137f)]||'')+(_0x5b88d8(0x7f7)+_0x1c1a10[_0x5b88d8(0xac0)]+_0x5b88d8(0x139f)+_0x1c1a10[_0x5b88d8(0xcc2)](',\x20')+']');}else _0x490f40=String(_0x44274f[_0x5b88d8(0x137f)]||_0x44274f['content']||_0x5b88d8(0xfca))['substring'](0x0,0x32)+_0x5b88d8(0x1111);}}}_0x536962+=_0x5b88d8(0xccf)+_0x44274f['id']+_0x5b88d8(0x6f9)+_0x2a5d80+_0x5b88d8(0x11a1)+_0x490f40+'\x22\x0a';if(_0x44274f[_0x5b88d8(0xbab)]&&_0x44274f[_0x5b88d8(0xbab)][_0x5b88d8(0xac0)]>0x0)for(const _0x2b6f73 of _0x44274f[_0x5b88d8(0xbab)]){if(typeof _0x2b6f73===_0x5b88d8(0xf2e)&&_0x2b6f73[_0x5b88d8(0xa7e)]){const _0x105d3a=_0xc4efbd(_0x2b6f73['commenterName']);let _0x5331f0=_0x2b6f73['meaning']?_0x5b88d8(0xbd4)+_0x2b6f73[_0x5b88d8(0x1421)]+'\x27]':_0x2b6f73[_0x5b88d8(0xda3)];_0x2b6f73['commenterName']===_0x98d90f[_0x5b88d8(0x93e)]?_0x536962+='\x20\x20-\x20你评论说:\x20'+_0x5331f0+'\x0a':_0x536962+=_0x5b88d8(0xe52)+_0x105d3a+_0x5b88d8(0xcdf)+_0x2b6f73[_0x5b88d8(0xa7e)]+_0x5b88d8(0xf4f)+_0x5331f0+'\x0a';}}}_0x333882=_0x536962;}const _0x1d8366='#\x20长期记忆\x20(最高优先级，这是你和用户之间已经确立的事实，必须严格遵守)\x0a'+(_0x98d90f['longTermMemory']&&_0x98d90f[_0x5b88d8(0x1312)][_0x5b88d8(0xac0)]>0x0?_0x98d90f['longTermMemory'][_0x5b88d8(0x556)](_0x4c5023=>_0x5b88d8(0x3cf)+_0x2368ae(_0x4c5023[_0x5b88d8(0xe55)])+')\x20'+_0x4c5023[_0x5b88d8(0x1469)])[_0x5b88d8(0xcc2)]('\x0a'):_0x5b88d8(0x612)),_0x3c6e8f=_0x1be34c(_0x98d90f,0x3,_0x5b88d8(0xd97)),_0xe5e239=_0x1be34c(_0x98d90f,0x6,'hours'),_0x107fee=_0x1be34c(_0x98d90f,0x9,'hours'),_0x41bbc4=_0x1be34c(_0x98d90f,0x1,'days'),_0x1cd03e=_0x1be34c(_0x98d90f,0x3,'days'),_0x467b98=_0x1be34c(_0x98d90f,0x7,_0x5b88d8(0x62b));let _0x1ee38d='';if(_0x3c6e8f||_0xe5e239||_0x107fee||_0x41bbc4||_0x1cd03e||_0x467b98){_0x1ee38d+=_0x5b88d8(0x3dd);if(_0x3c6e8f)_0x1ee38d+=_0x3c6e8f;if(_0xe5e239)_0x1ee38d+=_0xe5e239;if(_0x107fee)_0x1ee38d+=_0x107fee;if(_0x3c6e8f||_0xe5e239||_0x107fee)_0x1ee38d+='\x0a';if(_0x41bbc4)_0x1ee38d+=_0x41bbc4;if(_0x1cd03e)_0x1ee38d+=_0x1cd03e;if(_0x467b98)_0x1ee38d+=_0x467b98;}const _0x29c915=_0x5e5e2b(_0x98d90f),_0x407779=_0x5b88d8(0xb50)+_0x98d90f[_0x5b88d8(0x1023)]+_0x5b88d8(0x1216)+_0x98d90f['originalName']+'\x22）。你已经有一段时间没有和用户（'+_0x2f4732+'）互动了，现在你有机会【主动】做点什么，来表现你的个性和独立生活。这是一个秘密的、后台的独立行动。\x0a\x0a\x0a\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20【最高优先级指令：情感维系】\x0a\x20\x20\x20\x20\x20\x20\x20\x20**你与用户的关系是最重要的！**\x20相比于在动态区闲逛，你应该【优先考虑】是否需要主动给用户发消息来维系你们的感情。\x0a'+(_0x98d90f['settings']['enableTimePerception']?'\x0a#\x20【情景感知】\x0a-\x20**时间**:\x20感知到当前是'+_0x43ea69+'\x20('+_0x68c76c+_0x5b88d8(0x147a)+_0x1f994c+'\x0a'+(_0x262417?_0x5b88d8(0x329):''):'')+_0x5b88d8(0xc95)+(_0x98d90f['lastActionType']||'无')+_0x5b88d8(0x69f)+_0x279fb1+_0x5b88d8(0x97c)+_0x4b6f20+_0x5b88d8(0x6b1)+_0x98d90f[_0x5b88d8(0x12d7)][_0x5b88d8(0x200)]+_0x5b88d8(0x97c)+_0x58419c+_0x5b88d8(0x97c)+(_0x98d90f[_0x5b88d8(0x1312)]&&_0x98d90f['longTermMemory']['length']>0x0?_0x98d90f[_0x5b88d8(0x1312)]['map'](_0x3ee607=>_0x5b88d8(0x3cf)+_0x2368ae(_0x3ee607[_0x5b88d8(0xe55)])+')\x20'+_0x3ee607[_0x5b88d8(0x1469)])[_0x5b88d8(0xcc2)]('\x0a'):'无')+_0x5b88d8(0x97c)+_0x1ee38d+_0x5b88d8(0x59e)+_0x471835+_0x5b88d8(0x97c)+(_0x98d90f[_0x5b88d8(0x12d7)]['enableTimePerception']?_0x5b88d8(0x85e)+_0x43ea69+'\x20('+_0x68c76c+')':'')+_0x5b88d8(0x97c)+(_0x98d90f[_0x5b88d8(0x12d7)][_0x5b88d8(0x533)]?_0x5b88d8(0xd84)+_0x1f994c:'')+_0x5b88d8(0x14a9)+_0x29c915+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20**你们最后的对话摘要**:\x20'+_0x3ca21b+_0x5b88d8(0x97c)+_0x333882+'\x0a',_0x3f3f02=[{'role':'system','content':_0x407779},..._0x2ea0e8[_0x5b88d8(0x556)](_0xc0cd6d=>{const _0x226bca=_0x5b88d8,_0x34ef98=_0xc0cd6d['role']===_0x226bca(0xcb0)?_0x2f4732:_0x98d90f[_0x226bca(0x1023)];let _0x18a5c7=_0xc0cd6d[_0x226bca(0x1469)];return typeof _0x18a5c7!==_0x226bca(0x857)&&(_0x18a5c7=JSON[_0x226bca(0x7cc)](_0x18a5c7)),{'role':_0xc0cd6d[_0x226bca(0xc92)],'content':_0x34ef98+':\x20'+_0x18a5c7};})];try{const _0x3e0a8e=[{'role':_0x5b88d8(0xcb0),'content':_0x407779+'\x0a\x0a[系统指令：请根据你在上面读到的规则和以下最新信息，开始你的独立行动。]\x0a'+_0x333882}];console[_0x5b88d8(0x4ee)](_0x5b88d8(0x581)+_0x98d90f[_0x5b88d8(0x1023)]+'\x22)');let _0x472d7c=_0x1ae958===GEMINI_API_URL,_0x26fc04=_0x1e2f27(_0x54790f,_0x4e8acd,_0x407779,_0x3e0a8e);const _0x474f78=_0x472d7c?await fetch(_0x26fc04[_0x5b88d8(0x3f5)],_0x26fc04[_0x5b88d8(0x3cc)]):await fetch(_0x1ae958+_0x5b88d8(0x1011),{'method':_0x5b88d8(0xb67),'headers':{'Content-Type':'application/json','Authorization':_0x5b88d8(0x681)+_0x4e8acd},'body':JSON[_0x5b88d8(0x7cc)]({'model':_0x54790f,'messages':_0x3e0a8e,'temperature':_0x8f0871[_0x5b88d8(0x7b0)][_0x5b88d8(0x14a5)]||0.9})});if(!_0x474f78['ok']){const _0x2e2d2e=await _0x474f78['json']();throw new Error(_0x5b88d8(0x55c)+_0x474f78[_0x5b88d8(0x103e)]+_0x5b88d8(0xc10)+JSON['stringify'](_0x2e2d2e));}const _0x43c64d=await _0x474f78[_0x5b88d8(0xa2e)](),_0x4535e4=_0x472d7c?getGeminiResponseText(_0x43c64d):_0x43c64d[_0x5b88d8(0x14bc)][0x0]['message'][_0x5b88d8(0x1469)];if(!_0x4535e4||_0x4535e4['trim']()===''){console[_0x5b88d8(0x7fa)](_0x5b88d8(0x3e2)+_0x98d90f[_0x5b88d8(0x1023)]+_0x5b88d8(0x4b1));return;}const _0x40c2c5=_0x3b585b(_0x4535e4);if(!_0x40c2c5||_0x40c2c5['length']===0x0){console['warn'](_0x5b88d8(0x29c)+_0x98d90f[_0x5b88d8(0x1023)]+'\x22\x20的本次后台活动跳过。原始回复:',_0x4535e4);return;}let _0x24c78e=Date[_0x5b88d8(0xc22)](),_0x4ceaeb=![];const _0x339369=[];for(const _0x7afb1d of _0x40c2c5){const _0x35d611=String(_0x7afb1d[_0x5b88d8(0x1469)]||''),_0x4218e8=_0x35d611['trim']()[_0x5b88d8(0x9b8)]('<')&&_0x35d611[_0x5b88d8(0xa06)]()['endsWith']('>');if(_0x7afb1d[_0x5b88d8(0x682)]===_0x5b88d8(0xda3)&&!_0x4218e8&&_0x35d611[_0x5b88d8(0xf95)]('\x0a')){const _0x323ef2=_0x35d611[_0x5b88d8(0x505)](/\n+/)[_0x5b88d8(0xde7)](_0x51a11a=>_0x51a11a[_0x5b88d8(0xa06)]());_0x323ef2[_0x5b88d8(0x458)](_0x26a537=>{const _0xb0ad42=_0x5b88d8;_0x339369[_0xb0ad42(0x481)]({..._0x7afb1d,'content':_0x26a537});});}else _0x339369[_0x5b88d8(0x481)](_0x7afb1d);}for(const _0xc7ff6b of _0x339369){_0x98d90f[_0x5b88d8(0x1553)]=_0xc7ff6b[_0x5b88d8(0x682)],_0x98d90f[_0x5b88d8(0xecc)]=_0x24c78e;let _0x4cf7db=null;const _0x16ef2d={'role':_0x5b88d8(0x10af),'senderName':_0x98d90f[_0x5b88d8(0x93e)],'timestamp':_0x24c78e++};let _0x26e6af=null;switch(_0xc7ff6b['type']){case _0x5b88d8(0x76f):{const _0x22dd6d=parseInt(_0xc7ff6b[_0x5b88d8(0x3eb)]),_0x196c8e=await _0x372b85['qzonePosts']['get'](_0x22dd6d);if(_0x196c8e&&_0x196c8e[_0x5b88d8(0x11dd)]===_0x1c417e){await _0x372b85['qzonePosts']['update'](_0x22dd6d,{'isDeleted':!![]});document[_0x5b88d8(0xfa0)]('qzone-screen')[_0x5b88d8(0x128f)][_0x5b88d8(0xea7)](_0x5b88d8(0xa37))&&_0x1098dc();const _0x205672={'role':_0x5b88d8(0x1417),'type':_0x5b88d8(0xc79),'content':'['+_0x98d90f[_0x5b88d8(0x1023)]+_0x5b88d8(0xd3b),'postId':_0x22dd6d,'timestamp':_0x24c78e++};_0x98d90f[_0x5b88d8(0xc88)][_0x5b88d8(0x481)](_0x205672),isViewingThisChat?_0x25d29f(_0x205672,_0x98d90f):(_0x98d90f['unreadCount']=(_0x98d90f[_0x5b88d8(0x28d)]||0x0)+0x1,_0x1d3fa5(_0x1c417e,'['+_0x98d90f[_0x5b88d8(0x1023)]+_0x5b88d8(0xd3b)),_0x4ceaeb=!![]);}else console['warn'](_0x5b88d8(0x846)+_0x98d90f[_0x5b88d8(0x1023)]+_0x5b88d8(0xe3e)+_0xc7ff6b[_0x5b88d8(0x3eb)]+')');continue;}case _0x5b88d8(0xda3):_0x4cf7db={..._0x16ef2d,'content':_0xc7ff6b[_0x5b88d8(0x1469)]};break;case _0x5b88d8(0x8b0):_0x4cf7db={..._0x16ef2d,'type':_0x5b88d8(0x8b0),'content':_0xc7ff6b['description']};break;case _0x5b88d8(0xf14):if(_0xc7ff6b[_0x5b88d8(0x1421)]){const _0x45c2e6=_0x8f0871[_0x5b88d8(0x413)][_0x5b88d8(0x7ed)](_0x253229=>_0x253229[_0x5b88d8(0x1023)]===_0xc7ff6b[_0x5b88d8(0x1421)]);_0x45c2e6?_0x4cf7db={..._0x16ef2d,'type':'sticker','content':_0x45c2e6[_0x5b88d8(0x3f5)],'meaning':_0x45c2e6[_0x5b88d8(0x1023)]}:(console[_0x5b88d8(0x7fa)](_0x5b88d8(0xe3c)+_0xc7ff6b[_0x5b88d8(0x1421)]+'\x22'),_0x4cf7db={..._0x16ef2d,'type':_0x5b88d8(0xda3),'content':_0x5b88d8(0x103c)+_0xc7ff6b[_0x5b88d8(0x1421)]+']'});}else console[_0x5b88d8(0x7fa)]('AI\x20(独立行动)\x20发送了一个没有\x20\x27meaning\x27\x20的\x20sticker\x20指令。',_0xc7ff6b),_0x4cf7db={..._0x16ef2d,'type':_0x5b88d8(0xf14),'content':_0xc7ff6b[_0x5b88d8(0x3f5)],'meaning':_0x5b88d8(0x74f)};break;case _0x5b88d8(0x128d):_0x98d90f[_0x5b88d8(0x103e)]['text']=_0xc7ff6b[_0x5b88d8(0x2c6)],_0x98d90f['status'][_0x5b88d8(0x146d)]=_0xc7ff6b[_0x5b88d8(0xacc)]||![],_0x98d90f['status'][_0x5b88d8(0x48e)]=Date['now']();break;case _0x5b88d8(0x1b9):const _0x51ecd1={'type':_0xc7ff6b[_0x5b88d8(0x13bf)],'content':_0xc7ff6b[_0x5b88d8(0x1469)]||'','publicText':_0xc7ff6b['publicText']||'','hiddenContent':_0xc7ff6b[_0x5b88d8(0x59a)]||'','image_prompt':_0xc7ff6b['image_prompt']||'','timestamp':Date[_0x5b88d8(0xc22)](),'authorId':_0x1c417e,'authorOriginalName':_0x98d90f[_0x5b88d8(0x93e)],'authorGroupId':_0x98d90f[_0x5b88d8(0xdbf)],'visibleGroupIds':null};await _0x372b85[_0x5b88d8(0x12c2)][_0x5b88d8(0x1327)](_0x51ecd1),_0x11aa82(_0xab67da+0x1),console['log'](_0x5b88d8(0x13f0)+_0x98d90f[_0x5b88d8(0x1023)]+_0x5b88d8(0x1214));break;case _0x5b88d8(0xf20):const _0x375184=await _0x372b85[_0x5b88d8(0x12c2)][_0x5b88d8(0x70d)](parseInt(_0xc7ff6b[_0x5b88d8(0x3eb)]));if(_0x375184){const _0xaa1b7e={'type':'repost','timestamp':Date[_0x5b88d8(0xc22)](),'authorId':_0x1c417e,'authorGroupId':_0x98d90f['groupId'],'authorOriginalName':_0x98d90f['originalName'],'repostComment':_0xc7ff6b[_0x5b88d8(0x7ab)]||'','originalPost':_0x375184,'visibleGroupIds':null};await _0x372b85[_0x5b88d8(0x12c2)][_0x5b88d8(0x1327)](_0xaa1b7e),_0x11aa82(_0xab67da+0x1),console['log'](_0x5b88d8(0x13f0)+_0x98d90f[_0x5b88d8(0x1023)]+_0x5b88d8(0x44f)+_0xc7ff6b[_0x5b88d8(0x3eb)]);}break;case _0x5b88d8(0x547):const _0x531957=await _0x372b85[_0x5b88d8(0x12c2)]['get'](parseInt(_0xc7ff6b[_0x5b88d8(0x3eb)]));if(_0x531957){if(!_0x531957['likes'])_0x531957[_0x5b88d8(0x48b)]=[];!_0x531957['likes']['includes'](_0x98d90f[_0x5b88d8(0x93e)])&&(_0x531957[_0x5b88d8(0x48b)][_0x5b88d8(0x481)](_0x98d90f['originalName']),await _0x372b85[_0x5b88d8(0x12c2)][_0x5b88d8(0x1477)](_0x531957['id'],{'likes':_0x531957[_0x5b88d8(0x48b)]}),_0x11aa82(_0xab67da+0x1),console[_0x5b88d8(0x4ee)]('后台活动:\x20角色\x20\x22'+_0x98d90f[_0x5b88d8(0x1023)]+_0x5b88d8(0x14f6)+_0xc7ff6b['postId']));}break;case'qzone_comment':{const _0x2f676a=await _0x372b85[_0x5b88d8(0x12c2)][_0x5b88d8(0x70d)](parseInt(_0xc7ff6b['postId']));if(_0x2f676a){if(!_0x2f676a[_0x5b88d8(0xbab)])_0x2f676a[_0x5b88d8(0xbab)]=[];const _0x1978c9=_0xc7ff6b[_0x5b88d8(0x1023)]||_0x98d90f[_0x5b88d8(0x93e)],_0xef019b=(_0xae881,_0x14c275=null,_0x2a44a6=null)=>({'commenterName':_0x1978c9,'text':_0x92c3c3(_0xae881,_0x98d90f),'meaning':_0x14c275,'replyTo':_0x2a44a6,'timestamp':Date[_0x5b88d8(0xc22)]()});if(_0xc7ff6b[_0x5b88d8(0x117c)]){const _0x3fe8e8=_0x8f0871[_0x5b88d8(0x413)]['find'](_0x26a70b=>_0x26a70b[_0x5b88d8(0x1023)]===_0xc7ff6b[_0x5b88d8(0x117c)]);_0x3fe8e8?_0x2f676a[_0x5b88d8(0xbab)][_0x5b88d8(0x481)](_0xef019b(_0x3fe8e8[_0x5b88d8(0x3f5)],_0x3fe8e8[_0x5b88d8(0x1023)],_0xc7ff6b[_0x5b88d8(0x5ee)]||null)):(console[_0x5b88d8(0x7fa)](_0x5b88d8(0x12ec)+_0xc7ff6b[_0x5b88d8(0x117c)]+'\x22'),_0x2f676a[_0x5b88d8(0xbab)][_0x5b88d8(0x481)](_0xef019b('[表情:\x20'+_0xc7ff6b[_0x5b88d8(0x117c)]+']',null,_0xc7ff6b[_0x5b88d8(0x5ee)]||null)));}else{if(Array[_0x5b88d8(0x345)](_0xc7ff6b[_0x5b88d8(0xbab)]))_0xc7ff6b[_0x5b88d8(0xbab)][_0x5b88d8(0x458)](_0x507d45=>{const _0x4a207a=_0x5b88d8;typeof _0x507d45===_0x4a207a(0x857)&&_0x507d45['trim']()&&_0x2f676a['comments']['push'](_0xef019b(_0x507d45,null,_0xc7ff6b[_0x4a207a(0x5ee)]||null));});else typeof _0xc7ff6b[_0x5b88d8(0xc6e)]===_0x5b88d8(0x857)&&_0xc7ff6b[_0x5b88d8(0xc6e)]['trim']()&&_0x2f676a[_0x5b88d8(0xbab)][_0x5b88d8(0x481)](_0xef019b(_0xc7ff6b[_0x5b88d8(0xc6e)],null,_0xc7ff6b[_0x5b88d8(0x5ee)]||null));}await _0x372b85[_0x5b88d8(0x12c2)][_0x5b88d8(0x1477)](_0x2f676a['id'],{'comments':_0x2f676a[_0x5b88d8(0xbab)]}),_0x11aa82(_0xab67da+0x1),console['log']('后台活动:\x20角色\x20\x22'+_0x98d90f[_0x5b88d8(0x1023)]+_0x5b88d8(0x271)+_0xc7ff6b['postId']);if(!_0x98d90f[_0x5b88d8(0x12b5)])_0x98d90f['commentCooldowns']={};_0x98d90f[_0x5b88d8(0x12b5)][_0xc7ff6b[_0x5b88d8(0x3eb)]]=Date['now']();}continue;}case'video_call_request':!_0x1fd843[_0x5b88d8(0x684)]&&!_0x1fd843[_0x5b88d8(0x1531)]&&(_0x1fd843[_0x5b88d8(0x1531)]=!![],_0x1fd843[_0x5b88d8(0xac8)]=_0x1c417e,_0x1fd843['isGroupCall']=![],_0x1fd843['callRequester']=_0x98d90f[_0x5b88d8(0x1023)],_0x59fa07());break;default:console[_0x5b88d8(0x7fa)](_0x5b88d8(0xc1d)+_0x98d90f[_0x5b88d8(0x1023)]+'\x22\x20尝试执行未知的后台动作:',_0xc7ff6b[_0x5b88d8(0x682)]);break;case _0x5b88d8(0xc85):{const _0x141a2e=_0xc7ff6b[_0x5b88d8(0x1023)],_0x94785b=_0x98d90f['settings'][_0x5b88d8(0x1576)][_0x5b88d8(0x7ed)](_0x83c24=>_0x83c24[_0x5b88d8(0x1023)]===_0x141a2e);_0x94785b&&(_0x98d90f[_0x5b88d8(0x12d7)][_0x5b88d8(0xce8)]=_0x94785b['url'],await _0x3a6dc8(_0x98d90f),visibleSystemMessage={'content':'['+_0x98d90f[_0x5b88d8(0x1023)]+_0x5b88d8(0xd5c)},console['log'](_0x5b88d8(0x13f0)+_0x98d90f[_0x5b88d8(0x1023)]+_0x5b88d8(0x1228)));break;}}if(_0x4cf7db){_0x98d90f[_0x5b88d8(0xc88)][_0x5b88d8(0x481)](_0x4cf7db),_0x98d90f[_0x5b88d8(0x28d)]=(_0x98d90f[_0x5b88d8(0x28d)]||0x0)+0x1;if(!_0x4ceaeb){let _0x3098ca=_0x4cf7db[_0x5b88d8(0x682)]===_0x5b88d8(0x8b0)?_0x5b88d8(0xdde):_0x4cf7db['content']||'';_0x1d3fa5(_0x1c417e,_0x3098ca),_0x4ceaeb=!![];}}}await _0x372b85[_0x5b88d8(0x1260)][_0x5b88d8(0x11d5)](_0x98d90f);}catch(_0x2fda0c){console[_0x5b88d8(0x52b)]('角色\x20\x22'+_0x98d90f['name']+'\x22\x20的独立行动失败:',_0x2fda0c);}finally{_0x191654(_0x1c417e,![]),_0x2d75fb(),document[_0x5b88d8(0xfa0)](_0x5b88d8(0x337))[_0x5b88d8(0x128f)][_0x5b88d8(0xea7)]('active')&&_0x1098dc();}}async function _0x2ba1f4(_0x56c67e){const _0x4fdbd8=_0x7c5117,_0x53f348=_0x8f0871['chats'][_0x56c67e];if(!_0x53f348||!_0x53f348[_0x4fdbd8(0x1364)])return;const _0x9435b2=_0x53f348['settings'][_0x4fdbd8(0x1158)]||0xa;if(_0x53f348[_0x4fdbd8(0xecc)]){const _0x398623=(Date[_0x4fdbd8(0xc22)]()-_0x53f348[_0x4fdbd8(0xecc)])/(0x3e8*0x3c);if(_0x398623<_0x9435b2){console[_0x4fdbd8(0x4ee)](_0x4fdbd8(0xbc2)+_0x53f348[_0x4fdbd8(0x1023)]+_0x4fdbd8(0xa15));return;}}const {proxyUrl:_0x5944c8,apiKey:_0x3b4111,model:_0x3cb5ef}=_0x8f0871[_0x4fdbd8(0xa78)];if(!_0x5944c8||!_0x3b4111||!_0x3cb5ef)return;const _0x6e9d09=_0x53f348[_0x4fdbd8(0x12d7)][_0x4fdbd8(0xda5)]||'我',_0x4b531b=new Date();let _0x2a625f;const _0x22b3a6=_0x53f348['history'][_0x4fdbd8(0xde7)](_0x590e96=>!_0x590e96['isHidden'])[_0x4fdbd8(0x59f)](-0x5),_0x3e7adc=_0x22b3a6[_0x4fdbd8(0x7ed)](_0x1b8619=>_0x1b8619[_0x4fdbd8(0x682)]===_0x4fdbd8(0x148b)&&!_0x1b8619[_0x4fdbd8(0xc71)]);if(_0x3e7adc){const _0xba004a=_0x185e1d(_0x53f348,_0x3e7adc[_0x4fdbd8(0x213)]);console[_0x4fdbd8(0x4ee)](_0x4fdbd8(0xc7f)+_0x53f348['name']+_0x4fdbd8(0x3b4)),_0x2a625f=_0x4fdbd8(0x92d)+_0xba004a+'”发送的、尚未领完的红包（时间戳:\x20'+_0x3e7adc['timestamp']+'）。\x0a\x20\x20\x20\x20\x20\x20\x20\x20你的任务是：选择【一个或多个】符合人设的角色，让他们【立刻】使用\x20\x27open_red_packet\x27\x20指令去尝试领取这个红包。\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20指令格式\x0a\x20\x20\x20\x20\x20\x20\x20\x20你的回复【必须】是一个JSON数组，格式如下：\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x27[{\x22type\x22:\x20\x22open_red_packet\x22,\x20\x22name\x22:\x20\x22角色本名\x22,\x20\x22packet_timestamp\x22:\x20'+_0x3e7adc[_0x4fdbd8(0xe55)]+_0x4fdbd8(0x9a3);}else{let _0x25167a='';const _0x4ced21=_0x53f348[_0x4fdbd8(0x12d7)]['timeZone']||'Asia/Shanghai',_0x4a2265=_0x4b531b['toLocaleString']('zh-CN',{'timeZone':_0x4ced21,'dateStyle':_0x4fdbd8(0x11da),'timeStyle':'short'}),_0x357a4a=new Date(_0x4b531b[_0x4fdbd8(0x10de)](_0x4fdbd8(0x1227),{'timeZone':_0x4ced21}));if(_0x53f348['settings'][_0x4fdbd8(0x533)]){const _0x2bc2ce=_0x53f348[_0x4fdbd8(0xc88)][_0x4fdbd8(0xde7)](_0x22cb1d=>!_0x22cb1d[_0x4fdbd8(0x1559)])[_0x4fdbd8(0x59f)](-0x1)[0x0];if(_0x2bc2ce){const _0x441b67=new Date(_0x2bc2ce['timestamp']),_0x533f9c=(_0x4b531b-_0x441b67)/(0x3e8*0x3c);_0x533f9c>0x3c?_0x25167a='群里已经安静了\x20'+Math['round'](_0x533f9c/0x3c)+'\x20小时了。':_0x25167a='群里在'+Math[_0x4fdbd8(0x13e5)](_0x533f9c)+_0x4fdbd8(0x86b);}else _0x25167a=_0x4fdbd8(0x88a);}let _0x928397=_0x4fdbd8(0x106f);const _0x111008=_0x53f348['settings'][_0x4fdbd8(0x266)]||0xa,_0x2c0a9f=_0x53f348[_0x4fdbd8(0xc88)][_0x4fdbd8(0xde7)](_0x4b3426=>!_0x4b3426[_0x4fdbd8(0x1559)])[_0x4fdbd8(0x59f)](-_0x111008);_0x2c0a9f['length']>0x0&&(_0x928397=_0x4fdbd8(0x5cc)+_0x2c0a9f['map'](_0x1db17f=>{const _0x2eb152=_0x4fdbd8,_0x49f016=_0x1db17f['role']===_0x2eb152(0xcb0)?_0x6e9d09:_0x185e1d(_0x53f348,_0x1db17f[_0x2eb152(0x213)]),_0x5d0795=String(_0x1db17f[_0x2eb152(0x1469)]||_0x1db17f[_0x2eb152(0x790)]||'')[_0x2eb152(0x9fe)](0x0,0x32);return _0x49f016+':\x20'+_0x5d0795+'...';})['join']('\x0a'));const _0x4b9946=_0x53f348['members'][_0x4fdbd8(0x556)](_0x5acf9b=>_0x4fdbd8(0x6d2)+_0x5acf9b[_0x4fdbd8(0x5c9)]+'**\x20(本名:\x20'+_0x5acf9b['originalName']+_0x4fdbd8(0xf4f)+_0x5acf9b[_0x4fdbd8(0x3fa)])['join']('\x0a');let _0x33fce4='#\x20长期记忆\x20(最高优先级，这是群内已经确立的事实，所有角色必须严格遵守)\x0a',_0x235b54=![];_0x53f348['members'][_0x4fdbd8(0x458)](_0x4c1560=>{const _0x1c4cf3=_0x4fdbd8,_0x5f22a1=_0x8f0871[_0x1c4cf3(0x1260)][_0x4c1560['id']];_0x5f22a1&&_0x5f22a1[_0x1c4cf3(0x1312)]&&_0x5f22a1[_0x1c4cf3(0x1312)][_0x1c4cf3(0xac0)]>0x0&&(_0x33fce4+=_0x1c4cf3(0x1299)+_0x4c1560[_0x1c4cf3(0x5c9)]+'”的记忆\x20---\x0a',_0x33fce4+=_0x5f22a1[_0x1c4cf3(0x1312)][_0x1c4cf3(0x556)](_0x2c6aa0=>'-\x20'+_0x2c6aa0[_0x1c4cf3(0x1469)])[_0x1c4cf3(0xcc2)]('\x0a'),_0x235b54=!![]);});!_0x235b54&&(_0x33fce4+=_0x4fdbd8(0x612));let _0xd20609='';if(_0x53f348[_0x4fdbd8(0x12d7)][_0x4fdbd8(0xaaf)]&&_0x53f348[_0x4fdbd8(0x12d7)][_0x4fdbd8(0xaaf)]['length']>0x0){const _0x163bb8=_0x53f348[_0x4fdbd8(0x12d7)][_0x4fdbd8(0xaaf)][_0x4fdbd8(0x556)](_0x198110=>{const _0x1fd0aa=_0x4fdbd8,_0x440a48=_0x8f0871[_0x1fd0aa(0x739)][_0x1fd0aa(0x7ed)](_0x33963a=>_0x33963a['id']===_0x198110);if(!_0x440a48||!Array[_0x1fd0aa(0x345)](_0x440a48['content']))return'';const _0x3ebb54=_0x440a48[_0x1fd0aa(0x1469)]['filter'](_0x39b34a=>_0x39b34a[_0x1fd0aa(0x7af)]!==![])[_0x1fd0aa(0x556)](_0x397e58=>{const _0x5d7d9b=_0x1fd0aa;let _0x15fbfb='\x0a###\x20条目:\x20'+(_0x397e58[_0x5d7d9b(0x7ab)]||'无备注')+'\x0a';return _0x397e58['keys'][_0x5d7d9b(0xac0)]>0x0&&(_0x15fbfb+=_0x5d7d9b(0x145a)+_0x397e58['keys'][_0x5d7d9b(0xcc2)](',\x20')+'\x0a'),_0x15fbfb+=_0x5d7d9b(0x1f7)+_0x397e58['content'],_0x15fbfb;})[_0x1fd0aa(0xcc2)]('');return _0x3ebb54?_0x1fd0aa(0x66c)+_0x440a48['name']+'\x0a'+_0x3ebb54:'';})['filter'](Boolean)[_0x4fdbd8(0xcc2)]('');_0x163bb8&&(_0xd20609='#\x20---\x20世界书\x20(World\x20Book)\x20---\x0a#\x20【最高优先级规则：世界观设定】\x0a#\x20你【必须】将以下所有“世界书”中的设定，视为绝对的、不可动摇的背景事实。\x0a#\x20你的所有回复和行为都【绝对不能】与这些设定产生任何冲突。\x0a'+_0x163bb8+_0x4fdbd8(0xf00));}let _0x3bdcf2='';const _0x5bead0=_0x53f348[_0x4fdbd8(0x12d7)][_0x4fdbd8(0x79c)]||0xa;if(_0x53f348[_0x4fdbd8(0x12d7)][_0x4fdbd8(0x6e0)]&&_0x53f348['settings'][_0x4fdbd8(0x6e0)][_0x4fdbd8(0xac0)]>0x0){const _0x34e316=_0x53f348[_0x4fdbd8(0x12d7)]['linkedMemoryChatIds'][_0x4fdbd8(0x556)](_0x10de45=>{const _0x1027e1=_0x4fdbd8,_0x51eeb5=_0x8f0871[_0x1027e1(0x1260)][_0x10de45];if(!_0x51eeb5)return null;const _0x4255c3=_0x51eeb5['history'][_0x1027e1(0x59f)](-0x1)[0x0];return{'chat':_0x51eeb5,'latestTimestamp':_0x4255c3?_0x4255c3['timestamp']:0x0};})[_0x4fdbd8(0xde7)](Boolean);_0x34e316[_0x4fdbd8(0x1376)]((_0x1aa2d4,_0x5053a0)=>_0x5053a0[_0x4fdbd8(0xf80)]-_0x1aa2d4[_0x4fdbd8(0xf80)]),_0x3bdcf2+='\x0a\x0a#\x20参考记忆\x20(至关重要！群内角色必须【主动】将这些参考记忆中的【关键信息和事件】，自然地融入到当前的对话中，以体现你们拥有完整的共同记忆。)\x0a';for(const _0x326097 of _0x34e316){const _0x3fcbed=_0x326097[_0x4fdbd8(0xe5e)],_0x4450cc=_0x3fcbed[_0x4fdbd8(0x1364)]?'[群聊]':_0x4fdbd8(0x908),_0x33fd99=_0x326097[_0x4fdbd8(0xf80)]>0x0?_0x4fdbd8(0xe24)+_0x2368ae(_0x326097[_0x4fdbd8(0xf80)])+')':'';_0x3bdcf2+=_0x4fdbd8(0x41a)+_0x4450cc+'“'+_0x3fcbed['name']+_0x4fdbd8(0xf84)+_0x33fd99+_0x4fdbd8(0xe00);const _0x44fbec=_0x3fcbed['history']['slice'](-_0x5bead0),_0xa9600c=_0x44fbec[_0x4fdbd8(0xde7)](_0x2583b5=>!String(_0x2583b5[_0x4fdbd8(0x1469)])[_0x4fdbd8(0xf95)]('已被用户删除'));_0xa9600c[_0x4fdbd8(0xac0)]>0x0?_0xa9600c[_0x4fdbd8(0x458)](_0x5ce761=>{const _0x2253ae=_0x4fdbd8,_0x4792e5=_0x5ce761[_0x2253ae(0xc92)]===_0x2253ae(0xcb0)?_0x3fcbed[_0x2253ae(0x12d7)][_0x2253ae(0xda5)]||'我':_0x5ce761['senderName']||_0x3fcbed['name'];let _0x22a211=String(_0x5ce761[_0x2253ae(0x1469)]);if(_0x5ce761['type']===_0x2253ae(0x8b0)||_0x5ce761[_0x2253ae(0x682)]===_0x2253ae(0x838))_0x22a211=_0x2253ae(0x658)+_0x5ce761[_0x2253ae(0x1469)]+']';else _0x5ce761['type']===_0x2253ae(0x412)&&(_0x22a211=_0x2253ae(0xba2)+_0x5ce761[_0x2253ae(0x1469)]+']');_0x3bdcf2+=_0x4792e5+':\x20'+_0x22a211+'\x0a';}):_0x3bdcf2+='(暂无有效聊天记录)\x0a';}}const _0x44e8d7=await _0x372b85[_0x4fdbd8(0x12c2)][_0x4fdbd8(0x1554)](_0x4fdbd8(0xe55))[_0x4fdbd8(0xaf5)]()[_0x4fdbd8(0xba1)](0x5)[_0x4fdbd8(0x3bc)]();let _0x51dbdb='';const _0x4acf7c=new Set();for(const _0x40c5cb of _0x53f348[_0x4fdbd8(0x2cf)]){const _0x551771=_0x8f0871[_0x4fdbd8(0x1260)][_0x40c5cb['id']];if(_0x551771){const _0x483836=_0x2aa0e2(_0x44e8d7,_0x551771);_0x483836[_0x4fdbd8(0x458)](_0x1de0e5=>_0x4acf7c[_0x4fdbd8(0x1327)](_0x1de0e5));}}const _0x498589=new Set(_0x53f348['members'][_0x4fdbd8(0x556)](_0x3859bc=>_0x3859bc[_0x4fdbd8(0x93e)])),_0x415355=[..._0x4acf7c]['filter'](_0x198513=>{const _0x2d1fda=_0x4fdbd8,_0x4538f9=_0x198513[_0x2d1fda(0x48b)]&&_0x198513[_0x2d1fda(0x48b)]['some'](_0xcd0d2c=>_0x498589[_0x2d1fda(0xd58)](_0xcd0d2c)),_0x2f0206=_0x198513[_0x2d1fda(0xbab)]&&_0x198513['comments'][_0x2d1fda(0x75d)](_0x27e5dd=>typeof _0x27e5dd===_0x2d1fda(0xf2e)&&_0x498589['has'](_0x27e5dd[_0x2d1fda(0xa7e)]));return!_0x4538f9&&!_0x2f0206;});if(_0x415355['length']>0x0){let _0x2a013a=_0x4fdbd8(0x9eb);for(const _0xb4053d of _0x415355){let _0x26ed00=_0xb4053d['authorId']==='user'?_0x6e9d09:_0x8f0871[_0x4fdbd8(0x1260)][_0xb4053d[_0x4fdbd8(0x11dd)]]?.['name']||_0x4fdbd8(0x8e8),_0x1bafdd;if(_0xb4053d[_0x4fdbd8(0x682)]===_0x4fdbd8(0xf20)){const _0x12e47f=_0xb4053d['repostComment']?'并评论说：“'+_0xb4053d['repostComment']+'”':'';let _0x4f6345=_0x4fdbd8(0x204);const _0x21d5a2=_0xb4053d[_0x4fdbd8(0x119c)][_0x4fdbd8(0x11dd)];if(_0x21d5a2===_0x4fdbd8(0xcb0))_0x4f6345=_0x8f0871['qzoneSettings'][_0x4fdbd8(0xff8)];else _0x8f0871[_0x4fdbd8(0x1260)][_0x21d5a2]&&(_0x4f6345=_0x8f0871[_0x4fdbd8(0x1260)][_0x21d5a2]['name']);let _0x4e6bee;const _0x43e2b3=_0xb4053d['originalPost'];if(_0x43e2b3[_0x4fdbd8(0x682)]===_0x4fdbd8(0x12d0))_0x4e6bee=_0x4fdbd8(0x1487)+(_0x43e2b3[_0x4fdbd8(0x137f)]||'')+_0x4fdbd8(0xa59)+(_0x43e2b3[_0x4fdbd8(0x59a)]||'')['substring'](0x0,0x28)+_0x4fdbd8(0xc8c);else _0x43e2b3['type']==='image_post'?_0x4e6bee='[图片]\x20'+(_0x43e2b3['publicText']||'')+_0x4fdbd8(0xa59)+(_0x43e2b3[_0x4fdbd8(0xf67)]||'')['substring'](0x0,0x28)+_0x4fdbd8(0xc8c):_0x4e6bee='“'+(_0x43e2b3[_0x4fdbd8(0x1469)]||'')[_0x4fdbd8(0x9fe)](0x0,0x28)+_0x4fdbd8(0x631);_0x1bafdd='转发了\x20@'+_0x4f6345+_0x4fdbd8(0x146e)+_0x12e47f+'【原动态内容:\x20'+_0x4e6bee+'】';}else{if(_0xb4053d[_0x4fdbd8(0x682)]===_0x4fdbd8(0x12d0))_0x1bafdd=(_0x4fdbd8(0x114f)+_0xb4053d[_0x4fdbd8(0x59a)]+'”]\x20'+(_0xb4053d[_0x4fdbd8(0x137f)]||''))[_0x4fdbd8(0x9fe)](0x0,0x32)+'...';else _0xb4053d[_0x4fdbd8(0x682)]===_0x4fdbd8(0x76d)?_0x1bafdd=(_0x4fdbd8(0x5a4)+_0xb4053d[_0x4fdbd8(0xf67)]+_0x4fdbd8(0x102c)+(_0xb4053d[_0x4fdbd8(0x137f)]||''))[_0x4fdbd8(0x9fe)](0x0,0x32)+_0x4fdbd8(0x1111):_0x1bafdd=String(_0xb4053d['publicText']||_0xb4053d[_0x4fdbd8(0x1469)]||_0x4fdbd8(0xfca))[_0x4fdbd8(0x9fe)](0x0,0x32)+_0x4fdbd8(0x1111);}_0x2a013a+=_0x4fdbd8(0xccf)+_0xb4053d['id']+_0x4fdbd8(0x6f9)+_0x26ed00+_0x4fdbd8(0x11a1)+_0x1bafdd+'\x22\x0a';if(_0xb4053d['comments']&&_0xb4053d[_0x4fdbd8(0xbab)][_0x4fdbd8(0xac0)]>0x0)for(const _0x1c5f5d of _0xb4053d[_0x4fdbd8(0xbab)]){if(typeof _0x1c5f5d===_0x4fdbd8(0xf2e)&&_0x1c5f5d['commenterName']){const _0x42b388=_0xc4efbd(_0x1c5f5d[_0x4fdbd8(0xa7e)]);let _0x533512=_0x1c5f5d[_0x4fdbd8(0x1421)]?_0x4fdbd8(0xbd4)+_0x1c5f5d[_0x4fdbd8(0x1421)]+'\x27]':_0x1c5f5d[_0x4fdbd8(0xda3)];_0x2a013a+=_0x4fdbd8(0xe52)+_0x42b388+_0x4fdbd8(0xcdf)+_0x1c5f5d['commenterName']+_0x4fdbd8(0xf4f)+_0x533512+'\x0a';}}}_0x51dbdb=_0x2a013a;}const _0x1fa318=_0x1be34c(_0x53f348,0x3,_0x4fdbd8(0xd97)),_0x89d8b1=_0x1be34c(_0x53f348,0x6,_0x4fdbd8(0xd97)),_0x27bdb3=_0x1be34c(_0x53f348,0x9,_0x4fdbd8(0xd97)),_0x41aed7=_0x1be34c(_0x53f348,0x1,'days'),_0x4fabd7=_0x1be34c(_0x53f348,0x3,_0x4fdbd8(0x62b)),_0xb7f32b=_0x1be34c(_0x53f348,0x7,_0x4fdbd8(0x62b));let _0x3a0693='';if(_0x1fa318||_0x89d8b1||_0x27bdb3||_0x41aed7||_0x4fabd7||_0xb7f32b){_0x3a0693+=_0x4fdbd8(0x1028);if(_0x1fa318)_0x3a0693+=_0x1fa318;if(_0x89d8b1)_0x3a0693+=_0x89d8b1;if(_0x27bdb3)_0x3a0693+=_0x27bdb3;if(_0x1fa318||_0x89d8b1||_0x27bdb3)_0x3a0693+='\x0a';if(_0x41aed7)_0x3a0693+=_0x41aed7;if(_0x4fabd7)_0x3a0693+=_0x4fabd7;if(_0xb7f32b)_0x3a0693+=_0xb7f32b;}const _0x562cf3=_0x548d4f(_0x53f348);_0x2a625f='\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20你的任务\x0a\x20\x20\x20\x20\x20\x20\x20\x20你是一个群聊AI导演。你现在控制着一个名为“'+_0x53f348['name']+'”的群聊。\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x53f348[_0x4fdbd8(0x12d7)][_0x4fdbd8(0x533)]?'当前时间是\x20'+_0x4a2265+'。':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x25167a?_0x25167a+'\x20':'')+_0x4fdbd8(0x6d0)+_0x33fce4+_0x4fdbd8(0xd2b)+_0x6e9d09+_0x4fdbd8(0x425)+_0x53f348[_0x4fdbd8(0x1023)]+_0x4fdbd8(0x97c)+_0xd20609+_0x4fdbd8(0x10d7)+(_0x53f348[_0x4fdbd8(0x1312)]&&_0x53f348['longTermMemory']['length']>0x0?_0x53f348[_0x4fdbd8(0x1312)][_0x4fdbd8(0x556)](_0x52def1=>'-\x20'+_0x52def1[_0x4fdbd8(0x1469)])['join']('\x0a'):_0x4fdbd8(0x612))+_0x4fdbd8(0x1365)+_0x3a0693+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3bdcf2+_0x4fdbd8(0xa43)+_0x4b9946+_0x4fdbd8(0xb9f)+_0x562cf3+_0x4fdbd8(0x2cc)+_0x6e9d09+_0x4fdbd8(0x1264)+_0x53f348['settings'][_0x4fdbd8(0xbbe)]+_0x4fdbd8(0x13a6)+_0x928397+_0x4fdbd8(0x147e)+_0x51dbdb+_0x4fdbd8(0x46b);}const _0x165ad7=_0x53f348['history'][_0x4fdbd8(0xde7)](_0x1a42b1=>!_0x1a42b1[_0x4fdbd8(0x1559)])[_0x4fdbd8(0x59f)](-0xa),_0x250f57=[{'role':_0x4fdbd8(0x1417),'content':_0x2a625f},..._0x165ad7[_0x4fdbd8(0x556)](_0x3d1895=>{const _0x4af1dc=_0x4fdbd8,_0x35544f=_0x3d1895[_0x4af1dc(0xc92)]==='user'?_0x6e9d09:_0x185e1d(_0x53f348,_0x3d1895[_0x4af1dc(0x213)]);let _0x207753=_0x3d1895[_0x4af1dc(0x1469)];if(_0x3d1895[_0x4af1dc(0x682)]===_0x4af1dc(0x8b0)||_0x3d1895[_0x4af1dc(0x682)]===_0x4af1dc(0x838))_0x207753=_0x4af1dc(0x1282)+_0x3d1895[_0x4af1dc(0x1469)]+'\x27]';else{if(_0x3d1895[_0x4af1dc(0x682)]==='voice_message')_0x207753=_0x4af1dc(0xad9)+_0x3d1895['content']+'\x27]';else typeof _0x207753!==_0x4af1dc(0x857)&&(_0x207753=_0x4af1dc(0x60a));}return{'role':_0x4af1dc(0xcb0),'content':_0x35544f+':\x20'+_0x207753};})];try{const _0xb4f2e6=[{'role':_0x4fdbd8(0xcb0),'content':_0x2a625f}];let _0x3a755a=_0x5944c8===GEMINI_API_URL,_0x2a4043=_0x1e2f27(_0x3cb5ef,_0x3b4111,_0x2a625f,_0xb4f2e6);const _0x269243=_0x3a755a?await fetch(_0x2a4043[_0x4fdbd8(0x3f5)],_0x2a4043[_0x4fdbd8(0x3cc)]):await fetch(_0x5944c8+'/v1/chat/completions',{'method':'POST','headers':{'Content-Type':_0x4fdbd8(0x4b5),'Authorization':_0x4fdbd8(0x681)+_0x3b4111},'body':JSON[_0x4fdbd8(0x7cc)]({'model':_0x3cb5ef,'messages':_0xb4f2e6,'temperature':_0x8f0871[_0x4fdbd8(0x7b0)][_0x4fdbd8(0x14a5)]||0.9})});if(!_0x269243['ok'])throw new Error((await _0x269243['json']())[_0x4fdbd8(0x52b)]['message']);const _0x500058=await _0x269243[_0x4fdbd8(0xa2e)](),_0x1028f4=_0x3a755a?_0x500058[_0x4fdbd8(0xa1b)][0x0]['content']['parts'][0x0][_0x4fdbd8(0xda3)]:_0x500058[_0x4fdbd8(0x14bc)][0x0][_0x4fdbd8(0x790)][_0x4fdbd8(0x1469)],_0x400764=_0x3b585b(_0x1028f4);if(!_0x400764||_0x400764['length']===0x0){console['warn'](_0x4fdbd8(0xbc2)+_0x53f348['name']+_0x4fdbd8(0xd4d));return;}let _0x3b5bfb=Date[_0x4fdbd8(0xc22)](),_0x31033f=![],_0x2cb293='',_0x5452c8='';const _0x1f478a=[];for(const _0x76186f of _0x400764){const _0x193017=String(_0x76186f[_0x4fdbd8(0x1469)]||''),_0x3799d4=_0x193017['trim']()[_0x4fdbd8(0x9b8)]('<')&&_0x193017[_0x4fdbd8(0xa06)]()[_0x4fdbd8(0x14fe)]('>');if(_0x76186f[_0x4fdbd8(0x682)]===_0x4fdbd8(0xda3)&&!_0x3799d4&&_0x193017[_0x4fdbd8(0xf95)]('\x0a')){const _0x4136c7=_0x193017['split'](/\n+/)[_0x4fdbd8(0xde7)](_0x373435=>_0x373435[_0x4fdbd8(0xa06)]());_0x4136c7['forEach'](_0x5e6168=>{_0x1f478a['push']({..._0x76186f,'content':_0x5e6168});});}else _0x1f478a[_0x4fdbd8(0x481)](_0x76186f);}for(const _0x1e27b5 of _0x1f478a){if(!_0x1e27b5||!_0x1e27b5['type']||!_0x1e27b5[_0x4fdbd8(0x1023)])continue;const _0x2eb111=_0x185e1d(_0x53f348,_0x1e27b5[_0x4fdbd8(0x1023)]);let _0x2c9dda=null,_0x59070a=null;const _0x4d6ec5={'role':'assistant','senderName':_0x1e27b5[_0x4fdbd8(0x1023)],'timestamp':_0x3b5bfb++};if(_0x1e27b5[_0x4fdbd8(0x682)]===_0x4fdbd8(0xfa8)){const _0x47b3fb=_0x53f348[_0x4fdbd8(0xc88)]['find'](_0x35d87e=>_0x35d87e[_0x4fdbd8(0xe55)]===_0x1e27b5[_0x4fdbd8(0x2df)]);if(_0x47b3fb&&!_0x47b3fb[_0x4fdbd8(0xc71)]&&!(_0x47b3fb[_0x4fdbd8(0xe57)]&&_0x47b3fb['claimedBy'][_0x1e27b5[_0x4fdbd8(0x1023)]])){let _0x1714b9=0x0;const _0x4bb4de=_0x47b3fb[_0x4fdbd8(0x4df)]-Object[_0x4fdbd8(0x142f)](_0x47b3fb[_0x4fdbd8(0xe57)]||{})[_0x4fdbd8(0xd68)]((_0x449e1f,_0x395757)=>_0x449e1f+_0x395757,0x0),_0x5a0293=_0x47b3fb['count']-Object[_0x4fdbd8(0x1204)](_0x47b3fb[_0x4fdbd8(0xe57)]||{})[_0x4fdbd8(0xac0)];if(_0x5a0293>0x0){if(_0x5a0293===0x1)_0x1714b9=_0x4bb4de;else{const _0x1424c7=0.01,_0x4b1258=_0x4bb4de-(_0x5a0293-0x1)*_0x1424c7;_0x1714b9=Math[_0x4fdbd8(0x148a)]()*(_0x4b1258-_0x1424c7)+_0x1424c7;}_0x1714b9=parseFloat(_0x1714b9[_0x4fdbd8(0x3b8)](0x2));if(!_0x47b3fb[_0x4fdbd8(0xe57)])_0x47b3fb[_0x4fdbd8(0xe57)]={};_0x47b3fb[_0x4fdbd8(0xe57)][_0x1e27b5[_0x4fdbd8(0x1023)]]=_0x1714b9,_0x53f348[_0x4fdbd8(0xc88)][_0x4fdbd8(0x481)]({'role':_0x4fdbd8(0x1417),'type':_0x4fdbd8(0x260),'content':_0x2eb111+_0x4fdbd8(0x153a)+_0x185e1d(_0x53f348,_0x47b3fb[_0x4fdbd8(0x213)])+_0x4fdbd8(0xdbe),'timestamp':Date[_0x4fdbd8(0xc22)]()});let _0x1eea25=_0x4fdbd8(0x1399)+_0x2eb111+_0x4fdbd8(0x11d1)+_0x1714b9[_0x4fdbd8(0x3b8)](0x2)+'\x20元。';if(Object['keys'](_0x47b3fb['claimedBy'])[_0x4fdbd8(0xac0)]>=_0x47b3fb[_0x4fdbd8(0x1383)]){_0x47b3fb['isFullyClaimed']=!![],_0x53f348[_0x4fdbd8(0xc88)]['push']({'role':_0x4fdbd8(0x1417),'type':_0x4fdbd8(0x260),'content':_0x185e1d(_0x53f348,_0x47b3fb[_0x4fdbd8(0x213)])+_0x4fdbd8(0xda7),'timestamp':Date[_0x4fdbd8(0xc22)]()+0x1});let _0x40b12c={'name':'','amount':-0x1};Object[_0x4fdbd8(0x545)](_0x47b3fb[_0x4fdbd8(0xe57)])[_0x4fdbd8(0x458)](([_0x126574,_0x5058ab])=>{const _0x2fe468=_0x4fdbd8;_0x5058ab>_0x40b12c[_0x2fe468(0x4a8)]&&(_0x40b12c={'name':_0x126574,'amount':_0x5058ab});});if(_0x40b12c[_0x4fdbd8(0x1023)]){const _0x472e64=_0x185e1d(_0x53f348,_0x40b12c['name']);_0x1eea25+=_0x4fdbd8(0x1419)+_0x472e64+'！';}}_0x1eea25+='\x20请根据这个结果发表你的评论。]',_0x53f348[_0x4fdbd8(0xc88)]['push']({'role':_0x4fdbd8(0x1417),'content':_0x1eea25,'timestamp':Date[_0x4fdbd8(0xc22)]()+0x2,'isHidden':!![]});}}_0x31033f=!![];continue;}switch(_0x1e27b5[_0x4fdbd8(0x682)]){case _0x4fdbd8(0xf14):if(_0x1e27b5[_0x4fdbd8(0x1421)]){const _0x2d6fb3=_0x8f0871['userStickers'][_0x4fdbd8(0x7ed)](_0x1c4cb6=>_0x1c4cb6[_0x4fdbd8(0x1023)]===_0x1e27b5[_0x4fdbd8(0x1421)]);_0x2d6fb3?_0x59070a={..._0x4d6ec5,'type':_0x4fdbd8(0xf14),'content':_0x2d6fb3['url'],'meaning':_0x2d6fb3[_0x4fdbd8(0x1023)]}:(console[_0x4fdbd8(0x7fa)](_0x4fdbd8(0x12b3)+_0x1e27b5[_0x4fdbd8(0x1421)]+'\x22'),_0x59070a={..._0x4d6ec5,'type':_0x4fdbd8(0xda3),'content':'[表情:\x20'+_0x1e27b5[_0x4fdbd8(0x1421)]+']'});}else console[_0x4fdbd8(0x7fa)](_0x4fdbd8(0x980),_0x1e27b5),_0x59070a={..._0x4d6ec5,'type':_0x4fdbd8(0xf14),'content':_0x1e27b5[_0x4fdbd8(0x3f5)],'meaning':_0x4fdbd8(0x74f)};break;case _0x4fdbd8(0x1b9):const _0x4b4110={'type':_0x1e27b5[_0x4fdbd8(0x13bf)]||'shuoshuo','content':_0x1e27b5[_0x4fdbd8(0x1469)],'timestamp':Date[_0x4fdbd8(0xc22)](),'authorId':_0x8f0871[_0x4fdbd8(0x1260)][Object[_0x4fdbd8(0x1204)](_0x8f0871[_0x4fdbd8(0x1260)])[_0x4fdbd8(0x7ed)](_0xa7ccb7=>_0x8f0871[_0x4fdbd8(0x1260)][_0xa7ccb7][_0x4fdbd8(0x93e)]===_0x1e27b5['name'])]?.['id']||_0x1e27b5['name'],'authorOriginalName':_0x1e27b5[_0x4fdbd8(0x1023)],'visibleGroupIds':null};await _0x372b85['qzonePosts'][_0x4fdbd8(0x1327)](_0x4b4110),_0x11aa82(_0xab67da+0x1),_0x2c9dda={'content':'['+_0x2eb111+_0x4fdbd8(0x12a2)};break;case _0x4fdbd8(0x691):const _0x30b58b=await _0x372b85[_0x4fdbd8(0x12c2)][_0x4fdbd8(0x70d)](parseInt(_0x1e27b5[_0x4fdbd8(0x3eb)]));if(_0x30b58b){if(!_0x30b58b[_0x4fdbd8(0xbab)])_0x30b58b[_0x4fdbd8(0xbab)]=[];_0x30b58b[_0x4fdbd8(0xbab)][_0x4fdbd8(0x481)]({'commenterName':_0x1e27b5[_0x4fdbd8(0x1023)],'text':_0x1e27b5[_0x4fdbd8(0xc6e)],'timestamp':Date[_0x4fdbd8(0xc22)]()}),await _0x372b85['qzonePosts'][_0x4fdbd8(0x1477)](_0x30b58b['id'],{'comments':_0x30b58b[_0x4fdbd8(0xbab)]}),_0x11aa82(_0xab67da+0x1),_0x2c9dda={'content':'['+_0x2eb111+_0x4fdbd8(0x267)};}break;case _0x4fdbd8(0x547):const _0x23daa5=await _0x372b85['qzonePosts'][_0x4fdbd8(0x70d)](parseInt(_0x1e27b5['postId']));if(_0x23daa5){if(!_0x23daa5['likes'])_0x23daa5[_0x4fdbd8(0x48b)]=[];!_0x23daa5[_0x4fdbd8(0x48b)][_0x4fdbd8(0xf95)](_0x1e27b5[_0x4fdbd8(0x1023)])&&(_0x23daa5[_0x4fdbd8(0x48b)][_0x4fdbd8(0x481)](_0x1e27b5[_0x4fdbd8(0x1023)]),await _0x372b85[_0x4fdbd8(0x12c2)][_0x4fdbd8(0x1477)](_0x23daa5['id'],{'likes':_0x23daa5[_0x4fdbd8(0x48b)]}),_0x11aa82(_0xab67da+0x1),_0x2c9dda={'content':'['+_0x2eb111+_0x4fdbd8(0xa42)});}break;case'ai_image':_0x59070a={..._0x4d6ec5,'type':_0x4fdbd8(0x8b0),'content':_0x1e27b5['description'],'image_prompt':msgData[_0x4fdbd8(0xe0d)]};break;default:if(_0x1e27b5[_0x4fdbd8(0x682)]===_0x4fdbd8(0x34e)){const _0x5303ad=typeof _0x1e27b5[_0x4fdbd8(0x1106)]===_0x4fdbd8(0x857)?_0x1e27b5['options']['split']('\x0a')[_0x4fdbd8(0xde7)](_0x139273=>_0x139273[_0x4fdbd8(0xa06)]()):Array[_0x4fdbd8(0x345)](_0x1e27b5[_0x4fdbd8(0x1106)])?_0x1e27b5['options']:[];if(_0x5303ad[_0x4fdbd8(0xac0)]<0x2)continue;_0x59070a={..._0x4d6ec5,..._0x1e27b5,'options':_0x5303ad,'votes':{},'isClosed':![]};}else{const _0x1cc855=_0x1e27b5['content']||_0x1e27b5[_0x4fdbd8(0x790)];_0x59070a={..._0x4d6ec5,..._0x1e27b5};if(_0x1cc855)_0x59070a['content']=_0x1cc855;}break;}if(_0x2c9dda)_0x53f348['history'][_0x4fdbd8(0x481)]({'role':_0x4fdbd8(0x1417),'type':_0x4fdbd8(0x260),'content':_0x2c9dda['content'],'timestamp':_0x3b5bfb++});else _0x59070a&&(_0x53f348[_0x4fdbd8(0xc88)]['push'](_0x59070a),!_0x5452c8&&(_0x5452c8=_0x2eb111,_0x2cb293=_0x59070a[_0x4fdbd8(0x682)]===_0x4fdbd8(0x8b0)?_0x4fdbd8(0xdde):_0x59070a[_0x4fdbd8(0x1469)]||'['+_0x59070a['type']+']'));_0x31033f=!![];}_0x31033f&&(_0x53f348[_0x4fdbd8(0xecc)]=Date[_0x4fdbd8(0xc22)](),_0x53f348['unreadCount']=(_0x53f348[_0x4fdbd8(0x28d)]||0x0)+_0x400764['filter'](_0x364987=>_0x364987[_0x4fdbd8(0x682)]!=='qzone_post'&&_0x364987['type']!==_0x4fdbd8(0x691)&&_0x364987[_0x4fdbd8(0x682)]!==_0x4fdbd8(0x547))['length'],_0x5452c8&&_0x2cb293&&_0x1d3fa5(_0x56c67e,_0x5452c8+':\x20'+_0x2cb293),await _0x372b85['chats'][_0x4fdbd8(0x11d5)](_0x53f348));}catch(_0x4e425d){console[_0x4fdbd8(0x52b)](_0x4fdbd8(0xbc2)+_0x53f348['name']+_0x4fdbd8(0xd9c),_0x4e425d);}finally{_0x2d75fb();}}function _0x512130(_0x178912,_0x3860ea,_0x419948){const _0x1cca95=_0x7c5117,_0x5d6ca3=document[_0x1cca95(0xfa0)](_0x419948);if(!_0x5d6ca3)return;if(!_0x178912||_0x178912[_0x1cca95(0xa06)]()===''){_0x5d6ca3[_0x1cca95(0x1331)]='';return;}const _0x341e42=_0x178912[_0x1cca95(0x128a)](/\s*\.message-bubble\.user\s+([^{]+\{)/g,_0x3860ea+_0x1cca95(0x124f))['replace'](/\s*\.message-bubble\.ai\s+([^{]+\{)/g,_0x3860ea+_0x1cca95(0x1550))[_0x1cca95(0x128a)](/\s*\.message-bubble\s+([^{]+\{)/g,_0x3860ea+_0x1cca95(0x1478));_0x5d6ca3[_0x1cca95(0x1331)]=_0x341e42;}async function _0xb69a7a(){const _0x4f1990=_0x7c5117;if(!_0x8f0871[_0x4f1990(0xac8)])return;const _0x5f51e5=_0x8f0871[_0x4f1990(0x1260)][_0x8f0871['activeChatId']],_0x5be2c3=document['getElementById'](_0x4f1990(0x121b));if(!_0x5be2c3)return;const _0x1228f0=document[_0x4f1990(0xfb1)](_0x4f1990(0x1439))?.['value']||_0x4f1990(0xe82),_0x4d37cc=document[_0x4f1990(0xfa0)](_0x4f1990(0xf69))[_0x4f1990(0x4f6)],_0x42274b=document['getElementById'](_0x4f1990(0x96f))[_0x4f1990(0x4f6)],_0x44fba9=_0x5f51e5[_0x4f1990(0x12d7)][_0x4f1990(0x1113)];_0x5be2c3[_0x4f1990(0x8df)][_0x4f1990(0xb0d)]=_0x1228f0,_0x5be2c3[_0x4f1990(0x63b)][_0x4f1990(0x2da)](_0x4f1990(0x679),_0x4d37cc+'px');_0x44fba9&&_0x44fba9[_0x4f1990(0x9b8)](_0x4f1990(0x1249))?(_0x5be2c3[_0x4f1990(0x63b)]['backgroundImage']=_0x4f1990(0xfbd)+_0x44fba9+')',_0x5be2c3[_0x4f1990(0x63b)][_0x4f1990(0x11f8)]=_0x4f1990(0x108d)):(_0x5be2c3[_0x4f1990(0x63b)][_0x4f1990(0xc93)]=_0x4f1990(0x11b5),_0x5be2c3[_0x4f1990(0x63b)]['background']=_0x44fba9||'#f0f2f5');_0x5be2c3[_0x4f1990(0x1331)]='';const _0x1def1d={'role':'ai','content':_0x4f1990(0xc21),'timestamp':0x1,'senderName':_0x5f51e5[_0x4f1990(0x1023)]},_0x34bd2f=await _0x20ac60(_0x1def1d,_0x5f51e5);if(_0x34bd2f)_0x5be2c3[_0x4f1990(0x1155)](_0x34bd2f);const _0x1399bc={'role':_0x4f1990(0xcb0),'content':_0x4f1990(0x815),'timestamp':0x2},_0x4698c7=await _0x20ac60(_0x1399bc,_0x5f51e5);if(_0x4698c7)_0x5be2c3[_0x4f1990(0x1155)](_0x4698c7);const _0x2f49f4=document[_0x4f1990(0xb4e)]('div');_0x2f49f4['style'][_0x4f1990(0x283)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20absolute;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2011px;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x202px\x206px;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.1);\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20var(--text-secondary);\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20white-space:\x20nowrap;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20all\x200.3s\x20ease;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2f49f4[_0x4f1990(0xc62)]=_0x4f1990(0x59c),_0x5be2c3[_0x4f1990(0x1155)](_0x2f49f4);const _0x2a4e6d=document[_0x4f1990(0xfa0)](_0x4f1990(0x7f0))[_0x4f1990(0x4f6)],_0x26d9c2=document[_0x4f1990(0xfa0)](_0x4f1990(0x1109))[_0x4f1990(0x4f6)],_0x5810bf=parseInt(document[_0x4f1990(0xfa0)](_0x4f1990(0x10d5))[_0x4f1990(0x4f6)])||0xa;_0x2a4e6d===_0x4f1990(0x8ce)?_0x2f49f4[_0x4f1990(0x63b)][_0x4f1990(0x8ce)]=_0x5810bf+'px':_0x2f49f4[_0x4f1990(0x63b)]['bottom']=_0x5810bf+'px';switch(_0x26d9c2){case _0x4f1990(0xcb1):_0x2f49f4[_0x4f1990(0x63b)]['left']=_0x4f1990(0x54b);break;case'right':_0x2f49f4[_0x4f1990(0x63b)]['right']=_0x4f1990(0x54b);break;default:_0x2f49f4[_0x4f1990(0x63b)][_0x4f1990(0xcb1)]=_0x4f1990(0x12e2),_0x2f49f4['style']['transform']=_0x4f1990(0xccb);break;}_0x512130(_0x42274b,_0x4f1990(0x79a),_0x4f1990(0x10a7));}async function _0x1bb34a(){const _0xb9d9b0=_0x7c5117;await _0x587bea(),document[_0xb9d9b0(0xfa0)](_0xb9d9b0(0xfb9))[_0xb9d9b0(0x128f)][_0xb9d9b0(0x1327)](_0xb9d9b0(0xdcc));}async function _0x587bea(){const _0x17c8fb=_0x7c5117,_0x490671=document[_0x17c8fb(0xfa0)](_0x17c8fb(0x58e)),_0x3fb994=await _0x372b85[_0x17c8fb(0xdc8)][_0x17c8fb(0x3bc)]();_0x490671[_0x17c8fb(0x1331)]='',_0x3fb994[_0x17c8fb(0xac0)]===0x0&&(_0x490671[_0x17c8fb(0x1331)]=_0x17c8fb(0x21f)),_0x3fb994['forEach'](_0x424e70=>{const _0x28415a=_0x17c8fb,_0x5d41bb=document[_0x28415a(0xb4e)](_0x28415a(0xd53));_0x5d41bb['className']=_0x28415a(0x1133),_0x5d41bb[_0x28415a(0x1331)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22group-name\x22>'+_0x424e70[_0x28415a(0x1023)]+_0x28415a(0x1274)+_0x424e70['id']+_0x28415a(0x966),_0x490671[_0x28415a(0x1155)](_0x5d41bb);});}async function _0x3fa04b(){const _0x26e6b8=_0x7c5117,_0x38aff1=document['getElementById'](_0x26e6b8(0x14b8)),_0x2f11fa=_0x38aff1[_0x26e6b8(0x4f6)][_0x26e6b8(0xa06)]();if(!_0x2f11fa){alert(_0x26e6b8(0x4ff));return;}const _0x4746e1=await _0x372b85[_0x26e6b8(0xdc8)][_0x26e6b8(0xdc7)](_0x26e6b8(0x1023))[_0x26e6b8(0x8c2)](_0x2f11fa)[_0x26e6b8(0x102a)]();if(_0x4746e1){alert(_0x26e6b8(0x10e8)+_0x2f11fa+'\x22\x20已经存在了，换个名字吧！');return;}await _0x372b85['qzoneGroups'][_0x26e6b8(0x1327)]({'name':_0x2f11fa}),_0x38aff1[_0x26e6b8(0x4f6)]='',await _0x587bea();}async function _0xb66be4(_0x58b0a9){const _0x4c3e39=_0x7c5117,_0x7bc7c8=await _0x3f65ed(_0x4c3e39(0x1464),'删除分组后，该组内的好友将变为“未分组”。确定要删除吗？',{'confirmButtonClass':_0x4c3e39(0x611)});if(_0x7bc7c8){await _0x372b85['qzoneGroups']['delete'](_0x58b0a9);const _0x54f044=await _0x372b85['chats'][_0x4c3e39(0xdc7)](_0x4c3e39(0xdbf))[_0x4c3e39(0x8c2)](_0x58b0a9)['toArray']();for(const _0x3ddbd7 of _0x54f044){_0x3ddbd7['groupId']=null,await _0x372b85[_0x4c3e39(0x1260)][_0x4c3e39(0x11d5)](_0x3ddbd7);if(_0x8f0871[_0x4c3e39(0x1260)][_0x3ddbd7['id']])_0x8f0871['chats'][_0x3ddbd7['id']][_0x4c3e39(0xdbf)]=null;}await _0x587bea();}}function _0x491764(_0x2d44e2){const _0x39c1ba=_0x7c5117,_0x2dbab1=_0x8f0871[_0x39c1ba(0x1260)][_0x8f0871[_0x39c1ba(0xac8)]];document[_0x39c1ba(0xfa0)]('publish-to-announcement-btn')[_0x39c1ba(0x63b)][_0x39c1ba(0x1248)]=_0x2dbab1[_0x39c1ba(0x1364)]?_0x39c1ba(0x127c):_0x39c1ba(0x11b5);if(_0x2903d2)return;_0x5f3517=_0x2d44e2,document[_0x39c1ba(0xfa0)](_0x39c1ba(0x5b0))['classList']['add']('visible');}function _0x5b8bb0(){const _0x39cf47=_0x7c5117;document['getElementById'](_0x39cf47(0x5b0))['classList'][_0x39cf47(0x443)](_0x39cf47(0xdcc)),_0x5f3517=null;}async function _0x18ab3a(){const _0x225b69=_0x7c5117;if(!_0x5f3517)return;const _0x19c2fc=_0x5f3517,_0x33acf7=_0x8f0871[_0x225b69(0x1260)][_0x8f0871[_0x225b69(0xac8)]],_0x3904dc=_0x33acf7['history'][_0x225b69(0x7ed)](_0x5d24c6=>_0x5d24c6[_0x225b69(0xe55)]===_0x19c2fc);if(!_0x3904dc)return;_0x5b8bb0();let _0x2fd5cd;const _0x5a3032=_0x3904dc[_0x225b69(0x682)]&&['voice_message','ai_image',_0x225b69(0x35f),'share_link']['includes'](_0x3904dc[_0x225b69(0x682)]);if(_0x5a3032){let _0x2a6c3f={'type':_0x3904dc[_0x225b69(0x682)]};if(_0x3904dc['type']===_0x225b69(0x412))_0x2a6c3f[_0x225b69(0x1469)]=_0x3904dc['content'];else{if(_0x3904dc[_0x225b69(0x682)]===_0x225b69(0x8b0))_0x2a6c3f[_0x225b69(0x211)]=_0x3904dc[_0x225b69(0x1469)];else{if(_0x3904dc[_0x225b69(0x682)]===_0x225b69(0x35f))_0x2a6c3f[_0x225b69(0x4a8)]=_0x3904dc[_0x225b69(0x4a8)],_0x2a6c3f['note']=_0x3904dc[_0x225b69(0x14d7)];else _0x3904dc[_0x225b69(0x682)]==='share_link'&&(_0x2a6c3f[_0x225b69(0x1187)]=_0x3904dc[_0x225b69(0x1187)],_0x2a6c3f[_0x225b69(0x211)]=_0x3904dc['description'],_0x2a6c3f[_0x225b69(0x316)]=_0x3904dc[_0x225b69(0x316)],_0x2a6c3f['content']=_0x3904dc[_0x225b69(0x1469)]);}}_0x2fd5cd=JSON[_0x225b69(0x7cc)](_0x2a6c3f,null,0x2);}else typeof _0x3904dc[_0x225b69(0x1469)]===_0x225b69(0xf2e)?_0x2fd5cd=JSON[_0x225b69(0x7cc)](_0x3904dc[_0x225b69(0x1469)],null,0x2):_0x2fd5cd=_0x3904dc['content'];const _0x569763={'voice':{'type':_0x225b69(0x412),'content':_0x225b69(0xd22)},'image':{'type':'ai_image','description':_0x225b69(0x141e)},'transfer':{'type':_0x225b69(0x35f),'amount':5.2,'note':_0x225b69(0xcce)},'link':{'type':_0x225b69(0x8c1),'title':_0x225b69(0x1242),'description':_0x225b69(0x1567),'source_name':_0x225b69(0x1247),'content':_0x225b69(0xa4d)}},_0x1df4e9=_0x225b69(0xafe)+JSON[_0x225b69(0x7cc)](_0x569763[_0x225b69(0xc34)])+'\x27>语音</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27'+JSON[_0x225b69(0x7cc)](_0x569763['image'])+_0x225b69(0x646)+JSON[_0x225b69(0x7cc)](_0x569763['transfer'])+'\x27>转账</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27'+JSON[_0x225b69(0x7cc)](_0x569763[_0x225b69(0x14f1)])+_0x225b69(0x1ff),_0x306739=await _0x131a69(_0x225b69(0x121e),'在此修改，或点击上方按钮使用格式模板...',_0x2fd5cd,_0x225b69(0x338),_0x1df4e9);_0x306739!==null&&await _0x89936c(_0x19c2fc,_0x306739,!![]);}async function _0xdc7534(){const _0xc83c1f=_0x7c5117;if(!_0x5f3517)return;const _0x168ba4=_0x8f0871[_0xc83c1f(0x1260)][_0x8f0871['activeChatId']],_0x56d2eb=_0x168ba4[_0xc83c1f(0xc88)][_0xc83c1f(0x7ed)](_0x1ffb0c=>_0x1ffb0c['timestamp']===_0x5f3517);if(!_0x56d2eb)return;let _0x30f268;typeof _0x56d2eb['content']===_0xc83c1f(0xf2e)?_0x30f268=JSON[_0xc83c1f(0x7cc)](_0x56d2eb[_0xc83c1f(0x1469)]):_0x30f268=String(_0x56d2eb['content']);try{await navigator[_0xc83c1f(0x216)][_0xc83c1f(0x5cf)](_0x30f268),await _0x4abd86(_0xc83c1f(0xc68),_0xc83c1f(0x9bf));}catch(_0x250279){await _0x4abd86(_0xc83c1f(0xa09),_0xc83c1f(0x543));}_0x5b8bb0();}async function _0x39dc92(){const _0x1d23e3=_0x7c5117;if(!_0x5f3517)return;try{await navigator[_0x1d23e3(0x216)][_0x1d23e3(0x5cf)](_0x5f3517),await _0x4abd86(_0x1d23e3(0xc68),_0x1d23e3(0x10c4)+_0x5f3517+_0x1d23e3(0xcb3));}catch(_0x106b00){await _0x4abd86('复制失败','无法访问剪贴板。');}_0x5b8bb0();}function _0x3754da(_0x4256a3=''){const _0x275979=_0x7c5117,_0x30408d=document['createElement'](_0x275979(0xd53));_0x30408d['className']='message-editor-block';const _0x133530={'voice':{'type':'voice_message','content':_0x275979(0xd22)},'image':{'type':'ai_image','description':'在这里输入图片描述'},'transfer':{'type':'transfer','amount':5.2,'note':_0x275979(0xcce)},'link':{'type':'share_link','title':_0x275979(0x1242),'description':_0x275979(0x1567),'source_name':_0x275979(0x1247),'content':_0x275979(0xa4d)},'offline':{'type':'offline_text','content':_0x275979(0xb90)},'quote':{'type':'quote_reply','target_timestamp':0x499602d2,'reply_content':_0x275979(0xb3c)},'nai':{'type':_0x275979(0x1a0),'prompt':_0x275979(0xb54)}};return _0x30408d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-block-btn\x22\x20title=\x22删除此条\x22>×</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<textarea>'+_0x4256a3+_0x275979(0x5c0)+JSON[_0x275979(0x7cc)](_0x133530[_0x275979(0xc34)])+_0x275979(0x60f)+JSON[_0x275979(0x7cc)](_0x133530[_0x275979(0x13ba)])+_0x275979(0x414)+JSON[_0x275979(0x7cc)](_0x133530['transfer'])+_0x275979(0x331)+JSON['stringify'](_0x133530[_0x275979(0x14f1)])+_0x275979(0x88d)+JSON['stringify'](_0x133530[_0x275979(0xc3d)])+'\x27>线下</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27'+JSON[_0x275979(0x7cc)](_0x133530[_0x275979(0x12da)])+_0x275979(0x90d)+JSON[_0x275979(0x7cc)](_0x133530[_0x275979(0x8a9)])+'\x27\x20style=\x22color:\x20#6a329f;\x20border-color:\x20#6a329f;\x22>NAI生图</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x30408d[_0x275979(0xfb1)]('.delete-block-btn')['addEventListener'](_0x275979(0xb4a),()=>{const _0x40a23b=_0x275979;document['querySelectorAll'](_0x40a23b(0x4f5))[_0x40a23b(0xac0)]>0x1?_0x30408d[_0x40a23b(0x443)]():alert(_0x40a23b(0x11ed));}),_0x30408d[_0x275979(0x2a1)]('.format-btn')['forEach'](_0x175c9e=>{const _0x4eb489=_0x275979;_0x175c9e[_0x4eb489(0x7b8)](_0x4eb489(0xb4a),()=>{const _0x20f676=_0x4eb489,_0xf12bd6=_0x175c9e[_0x20f676(0x8df)]['template'],_0x1081ff=_0x30408d[_0x20f676(0xfb1)](_0x20f676(0x338));if(_0xf12bd6&&_0x1081ff)try{const _0x359eca=JSON['parse'](_0xf12bd6);_0x1081ff['value']=JSON['stringify'](_0x359eca,null,0x2),_0x1081ff[_0x20f676(0x10c7)]();}catch(_0x1b3f39){console[_0x20f676(0x52b)](_0x20f676(0xbbc),_0x1b3f39);}});}),_0x30408d;}async function _0x3d622d(){const _0x4c6c23=_0x7c5117;if(!_0x5f3517)return;const _0x31563c=_0x5f3517,_0x26563d=_0x8f0871[_0x4c6c23(0x1260)][_0x8f0871[_0x4c6c23(0xac8)]],_0x372b63=_0x26563d[_0x4c6c23(0xc88)]['find'](_0x3b1f13=>_0x3b1f13[_0x4c6c23(0xe55)]===_0x31563c);if(!_0x372b63)return;_0x5b8bb0();const _0x5bb4b6=document[_0x4c6c23(0xfa0)](_0x4c6c23(0x572)),_0x42b438=document[_0x4c6c23(0xfa0)](_0x4c6c23(0x770));_0x42b438[_0x4c6c23(0x1331)]='';let _0x4fda77;if(_0x372b63['quote']){const _0x5a0135={'type':'quote_reply','target_timestamp':_0x372b63['quote'][_0x4c6c23(0xe55)],'reply_content':_0x372b63['content']};_0x4fda77=JSON[_0x4c6c23(0x7cc)](_0x5a0135,null,0x2);}else{if(_0x372b63[_0x4c6c23(0x682)]&&['voice_message',_0x4c6c23(0x8b0),_0x4c6c23(0x35f),_0x4c6c23(0x1492),_0x4c6c23(0x8c1),_0x4c6c23(0x1a0)][_0x4c6c23(0xf95)](_0x372b63[_0x4c6c23(0x682)])){let _0x1afa2f={'type':_0x372b63['type']};if(_0x372b63[_0x4c6c23(0x682)]===_0x4c6c23(0x412))_0x1afa2f[_0x4c6c23(0x1469)]=_0x372b63[_0x4c6c23(0x1469)];else{if(_0x372b63[_0x4c6c23(0x682)]===_0x4c6c23(0x8b0))_0x1afa2f[_0x4c6c23(0x211)]=_0x372b63[_0x4c6c23(0x1469)];else{if(_0x372b63['type']==='transfer')_0x1afa2f[_0x4c6c23(0x4a8)]=_0x372b63[_0x4c6c23(0x4a8)],_0x1afa2f[_0x4c6c23(0x14d7)]=_0x372b63[_0x4c6c23(0x14d7)];else{if(_0x372b63[_0x4c6c23(0x682)]===_0x4c6c23(0x1492))_0x372b63['content']?_0x1afa2f[_0x4c6c23(0x1469)]=_0x372b63[_0x4c6c23(0x1469)]:(_0x1afa2f[_0x4c6c23(0x369)]=_0x372b63[_0x4c6c23(0x369)],_0x1afa2f[_0x4c6c23(0x211)]=_0x372b63[_0x4c6c23(0x211)]);else{if(_0x372b63[_0x4c6c23(0x682)]==='share_link')_0x1afa2f[_0x4c6c23(0x1187)]=_0x372b63[_0x4c6c23(0x1187)],_0x1afa2f[_0x4c6c23(0x211)]=_0x372b63[_0x4c6c23(0x211)],_0x1afa2f[_0x4c6c23(0x316)]=_0x372b63[_0x4c6c23(0x316)],_0x1afa2f[_0x4c6c23(0x1469)]=_0x372b63[_0x4c6c23(0x1469)];else _0x372b63['type']==='naiimag'&&(_0x1afa2f['prompt']=_0x372b63[_0x4c6c23(0xa62)],_0x1afa2f[_0x4c6c23(0x127b)]=_0x372b63[_0x4c6c23(0x127b)],_0x1afa2f[_0x4c6c23(0x1089)]=_0x372b63[_0x4c6c23(0x1089)]);}}}}_0x4fda77=JSON[_0x4c6c23(0x7cc)](_0x1afa2f,null,0x2);}else typeof _0x372b63[_0x4c6c23(0x1469)]===_0x4c6c23(0xf2e)?_0x4fda77=JSON[_0x4c6c23(0x7cc)](_0x372b63[_0x4c6c23(0x1469)],null,0x2):_0x4fda77=_0x372b63[_0x4c6c23(0x1469)];}const _0x2c707f=_0x3754da(_0x4fda77);_0x42b438[_0x4c6c23(0x1155)](_0x2c707f);const _0x36509c=document[_0x4c6c23(0xfa0)](_0x4c6c23(0xa6f)),_0x3244e8=_0x36509c['cloneNode'](!![]);_0x36509c['parentNode'][_0x4c6c23(0x5d2)](_0x3244e8,_0x36509c),_0x3244e8[_0x4c6c23(0x7b8)](_0x4c6c23(0xb4a),()=>{const _0x2daf83=_0x4c6c23,_0x5d05b4=_0x3754da();_0x42b438[_0x2daf83(0x1155)](_0x5d05b4),_0x5d05b4['querySelector'](_0x2daf83(0x338))['focus']();});const _0x53e297=document[_0x4c6c23(0xfa0)]('cancel-advanced-editor-btn'),_0x546922=_0x53e297['cloneNode'](!![]);_0x53e297[_0x4c6c23(0xcdd)][_0x4c6c23(0x5d2)](_0x546922,_0x53e297),_0x546922[_0x4c6c23(0x7b8)](_0x4c6c23(0xb4a),()=>{const _0x53143d=_0x4c6c23;_0x5bb4b6[_0x53143d(0x128f)][_0x53143d(0x443)](_0x53143d(0xdcc));});const _0x58e86e=document[_0x4c6c23(0xfa0)](_0x4c6c23(0x7ba)),_0x573d5c=_0x58e86e[_0x4c6c23(0xb5c)](!![]);_0x58e86e[_0x4c6c23(0xcdd)][_0x4c6c23(0x5d2)](_0x573d5c,_0x58e86e),_0x573d5c[_0x4c6c23(0x7b8)](_0x4c6c23(0xb4a),()=>{_0x89936c(_0x31563c);}),_0x5bb4b6[_0x4c6c23(0x128f)][_0x4c6c23(0x1327)](_0x4c6c23(0xdcc));}async function _0xdc7534(){const _0x2ff365=_0x7c5117;if(!_0x5f3517)return;const _0x45e911=_0x8f0871[_0x2ff365(0x1260)][_0x8f0871['activeChatId']],_0x389f9d=_0x45e911[_0x2ff365(0xc88)][_0x2ff365(0x7ed)](_0x57abc2=>_0x57abc2[_0x2ff365(0xe55)]===_0x5f3517);if(!_0x389f9d)return;let _0x3410ac;if(_0x389f9d[_0x2ff365(0x682)]===_0x2ff365(0x1492))_0x389f9d[_0x2ff365(0x1469)]?_0x3410ac=_0x389f9d['content']:_0x3410ac='「'+(_0x389f9d[_0x2ff365(0x369)]||'')+'」\x0a'+(_0x389f9d[_0x2ff365(0x211)]||'');else typeof _0x389f9d[_0x2ff365(0x1469)]===_0x2ff365(0xf2e)?_0x3410ac=JSON[_0x2ff365(0x7cc)](_0x389f9d[_0x2ff365(0x1469)]):_0x3410ac=String(_0x389f9d[_0x2ff365(0x1469)]);try{await navigator[_0x2ff365(0x216)][_0x2ff365(0x5cf)](_0x3410ac),await _0x4abd86(_0x2ff365(0xc68),_0x2ff365(0x9bf));}catch(_0x54a025){await _0x4abd86(_0x2ff365(0xa09),_0x2ff365(0x543));}_0x5b8bb0();}function _0x3e4431(_0x41b04a){const _0x25d513=_0x7c5117,_0x316527=_0x41b04a['trim']();if(_0x316527[_0x25d513(0x9b8)]('{')&&_0x316527[_0x25d513(0x14fe)]('}'))try{const _0x22a03b=JSON['parse'](_0x316527);if(_0x22a03b['type'])return _0x22a03b;}catch(_0xaf1426){}if(_0x4a5ebd[_0x25d513(0x3fb)](_0x316527))return{'type':'sticker','content':_0x316527};return{'type':'text','content':_0x316527};}async function _0x89936c(_0x24a116,_0x5dc147=null){const _0x2c6116=_0x7c5117;if(!_0x24a116)return;const _0xb0f53c=_0x8f0871[_0x2c6116(0x1260)][_0x8f0871['activeChatId']],_0x4dee2f=_0xb0f53c[_0x2c6116(0xc88)][_0x2c6116(0xb22)](_0x347705=>_0x347705[_0x2c6116(0xe55)]===_0x24a116);if(_0x4dee2f===-0x1)return;const _0xb81e32=_0xb0f53c[_0x2c6116(0xc88)][_0x4dee2f];let _0x539643=[];const _0x59a769=_0x5dc147!==null?[_0x5dc147]:Array['from'](document[_0x2c6116(0x2a1)](_0x2c6116(0x1321)))[_0x2c6116(0x556)](_0x2ab4f7=>_0x2ab4f7['value']);for(const _0x52178b of _0x59a769){if(!_0x52178b['trim']())continue;const _0x3b2a8c=_0x3e4431(_0x52178b[_0x2c6116(0xa06)]()),_0x307a6d={'role':_0xb81e32['role'],'senderName':_0xb81e32[_0x2c6116(0x213)],'timestamp':_0xb81e32[_0x2c6116(0xe55)]};switch(_0x3b2a8c[_0x2c6116(0x682)]){case _0x2c6116(0xda3):_0x307a6d[_0x2c6116(0x682)]='text',_0x307a6d[_0x2c6116(0x1469)]=_0x3b2a8c[_0x2c6116(0x1469)];break;case _0x2c6116(0x1492):_0x307a6d[_0x2c6116(0x682)]=_0x2c6116(0x1492);_0x3b2a8c[_0x2c6116(0x1469)]?_0x307a6d[_0x2c6116(0x1469)]=_0x3b2a8c[_0x2c6116(0x1469)]:(_0x307a6d[_0x2c6116(0x369)]=_0x3b2a8c[_0x2c6116(0x369)],_0x307a6d['description']=_0x3b2a8c[_0x2c6116(0x211)]);break;case _0x2c6116(0x6d4):_0x307a6d[_0x2c6116(0x682)]=_0x2c6116(0x6d4),_0x307a6d[_0x2c6116(0x1469)]=_0x3b2a8c['reply_content'];const _0x575d09=_0xb0f53c[_0x2c6116(0xc88)][_0x2c6116(0x7ed)](_0x4063df=>_0x4063df[_0x2c6116(0xe55)]===_0x3b2a8c[_0x2c6116(0xdda)]);if(_0x575d09){let _0x2840f7=_0x575d09['senderName'];_0x575d09['role']==='user'&&(_0x2840f7=_0x8f0871[_0x2c6116(0x9dd)][_0x2c6116(0xff8)]||_0x2c6116(0x8d4)),_0x307a6d[_0x2c6116(0x12da)]={'timestamp':_0x3b2a8c[_0x2c6116(0xdda)],'senderName':_0x2840f7,'content':String(_0x575d09[_0x2c6116(0x1469)]||'')};}else _0x307a6d[_0x2c6116(0x12da)]={'timestamp':_0x3b2a8c[_0x2c6116(0xdda)],'senderName':_0x2c6116(0x5de),'content':_0x2c6116(0x68e)};break;case _0x2c6116(0x412):case _0x2c6116(0x8b0):case _0x2c6116(0x838):_0x307a6d[_0x2c6116(0x682)]=_0x3b2a8c[_0x2c6116(0x682)],_0x307a6d['content']=_0x3b2a8c['content']||_0x3b2a8c[_0x2c6116(0x211)];if(_0x3b2a8c['meaning'])_0x307a6d['meaning']=_0x3b2a8c[_0x2c6116(0x1421)];break;case _0x2c6116(0x1a0):{const _0x4a5c08=_0xb0f53c[_0x2c6116(0xc88)][_0x4dee2f];let _0x3c7cf3=_0x3b2a8c[_0x2c6116(0xa62)],_0x402ec0=_0x3b2a8c[_0x2c6116(0x127b)],_0x43b7af=_0x3b2a8c['fullPrompt'],_0x57316b=![];_0x3c7cf3&&typeof _0x3c7cf3===_0x2c6116(0x857)&&_0x4a5c08[_0x2c6116(0xa62)]!==_0x3c7cf3?_0x57316b=!![]:(_0x3c7cf3=_0x4a5c08[_0x2c6116(0xa62)],_0x43b7af=_0x4a5c08[_0x2c6116(0x1089)],_0x402ec0=_0x4a5c08['imageUrl']);if(_0x57316b){await _0x4abd86(_0x2c6116(0x3e1),'检测到提示词已修改，正在重新生成\x20NovelAI\x20图片...');try{const _0x59101c=await _0x3bc899(_0x3c7cf3,_0xb0f53c['id']);_0x402ec0=_0x59101c['imageUrl'],_0x43b7af=_0x59101c['fullPrompt'],await _0x4abd86('成功','图片已根据新提示词重新生成！');}catch(_0x2c3720){console['error'](_0x2c6116(0xe63),_0x2c3720),await _0x4abd86(_0x2c6116(0x1e6),_0x2c6116(0x46c)+_0x2c3720[_0x2c6116(0x790)]+_0x2c6116(0x1501)),_0x402ec0=_0x4a5c08[_0x2c6116(0x127b)];}}_0x307a6d['type']=_0x2c6116(0x1a0),_0x307a6d[_0x2c6116(0x127b)]=_0x402ec0,_0x307a6d['prompt']=_0x3c7cf3,_0x307a6d[_0x2c6116(0x1089)]=_0x43b7af;break;}case'sticker':{_0x307a6d[_0x2c6116(0x682)]=_0x2c6116(0xf14);let _0x5359bd=![];if(_0x3b2a8c[_0x2c6116(0x1421)]){const _0x2d87d4=_0x8f0871[_0x2c6116(0x413)]['find'](_0x453516=>_0x453516[_0x2c6116(0x1023)]===_0x3b2a8c['meaning']);_0x2d87d4?(_0x307a6d[_0x2c6116(0x1469)]=_0x2d87d4['url'],_0x307a6d[_0x2c6116(0x1421)]=_0x2d87d4[_0x2c6116(0x1023)],console[_0x2c6116(0x4ee)](_0x2c6116(0x663)),_0x5359bd=!![]):(_0x307a6d[_0x2c6116(0x682)]=_0x2c6116(0xda3),_0x307a6d[_0x2c6116(0x1469)]=_0x2c6116(0x103c)+_0x3b2a8c[_0x2c6116(0x1421)]+']',console[_0x2c6116(0x7fa)](_0x2c6116(0xaa9),_0x3b2a8c[_0x2c6116(0x1421)]),_0x5359bd=!![]);}if(!_0x5359bd&&_0x3b2a8c[_0x2c6116(0x3f5)]){_0x307a6d[_0x2c6116(0x1469)]=_0x3b2a8c['url'];const _0x1e0013=_0x8f0871['userStickers']['find'](_0x4ba0d0=>_0x4ba0d0[_0x2c6116(0x3f5)]===_0x3b2a8c[_0x2c6116(0x3f5)]);if(_0x3b2a8c['meaning']&&(!_0x1e0013||_0x1e0013[_0x2c6116(0x1023)]===_0x3b2a8c['meaning']))_0x307a6d['meaning']=_0x3b2a8c['meaning'];else _0x1e0013?_0x307a6d['meaning']=_0x1e0013[_0x2c6116(0x1023)]:_0x307a6d[_0x2c6116(0x1421)]=_0x2c6116(0x74f);console[_0x2c6116(0x4ee)](_0x2c6116(0x13b5),_0x307a6d[_0x2c6116(0x1421)]),_0x5359bd=!![];}if(!_0x5359bd&&_0x3b2a8c[_0x2c6116(0x1469)]&&typeof _0x3b2a8c[_0x2c6116(0x1469)]===_0x2c6116(0x857)&&_0x4a5ebd[_0x2c6116(0x3fb)](_0x3b2a8c[_0x2c6116(0x1469)])){_0x307a6d['content']=_0x3b2a8c[_0x2c6116(0x1469)];const _0x2dc206=_0x8f0871[_0x2c6116(0x413)]['find'](_0x310e59=>_0x310e59['url']===_0x3b2a8c[_0x2c6116(0x1469)]);_0x307a6d[_0x2c6116(0x1421)]=_0x2dc206?_0x2dc206[_0x2c6116(0x1023)]:_0x2c6116(0x74f),console[_0x2c6116(0x4ee)](_0x2c6116(0x11ef),_0x307a6d[_0x2c6116(0x1421)]),_0x5359bd=!![];}if(!_0x5359bd){console['error']('导演/编辑模式保存(Sticker):\x20指令无效或缺少必要字段\x20(meaning/url/content):',_0x3b2a8c);continue;}break;}case _0x2c6116(0x35f):_0x307a6d['type']='transfer',_0x307a6d['amount']=_0x3b2a8c['amount'],_0x307a6d[_0x2c6116(0x14d7)]=_0x3b2a8c[_0x2c6116(0x14d7)];break;case _0x2c6116(0x8c1):_0x307a6d[_0x2c6116(0x682)]=_0x2c6116(0x8c1),_0x307a6d[_0x2c6116(0x1187)]=_0x3b2a8c['title'],_0x307a6d[_0x2c6116(0x211)]=_0x3b2a8c[_0x2c6116(0x211)],_0x307a6d['source_name']=_0x3b2a8c[_0x2c6116(0x316)],_0x307a6d[_0x2c6116(0x1469)]=_0x3b2a8c[_0x2c6116(0x1469)];break;default:Object[_0x2c6116(0x189)](_0x307a6d,_0x3b2a8c);break;}_0x539643[_0x2c6116(0x481)](_0x307a6d);}if(_0x539643['length']===0x0){document[_0x2c6116(0xfa0)](_0x2c6116(0x572))[_0x2c6116(0x128f)]['remove']('visible');return;}_0xb0f53c[_0x2c6116(0xc88)][_0x2c6116(0x11ac)](_0x4dee2f,0x1,..._0x539643);let _0x20dc29=_0x24a116;for(let _0x3ed63d=_0x4dee2f;_0x3ed63d<_0xb0f53c[_0x2c6116(0xc88)]['length'];_0x3ed63d++){_0xb0f53c[_0x2c6116(0xc88)][_0x3ed63d][_0x2c6116(0xe55)]=_0x20dc29,_0x20dc29++;}await _0x372b85['chats'][_0x2c6116(0x11d5)](_0xb0f53c),document[_0x2c6116(0xfa0)](_0x2c6116(0x572))[_0x2c6116(0x128f)][_0x2c6116(0x443)]('visible'),_0x54d32b(_0x8f0871[_0x2c6116(0xac8)]),await _0x4abd86('成功',_0x2c6116(0x12ad));}function _0x75aa55(_0x17014a){const _0x3df0c6=_0x7c5117;_0x2108d3=_0x17014a,document[_0x3df0c6(0xfa0)](_0x3df0c6(0x1072))[_0x3df0c6(0x128f)][_0x3df0c6(0x1327)](_0x3df0c6(0xdcc));}function _0x28b37b(){const _0x4461f6=_0x7c5117;document[_0x4461f6(0xfa0)]('post-actions-modal')[_0x4461f6(0x128f)]['remove']('visible'),_0x2108d3=null;}async function _0x404161(){const _0x50d25b=_0x7c5117;if(!_0x2108d3)return;const _0x270076=_0x2108d3,_0x361739=await _0x372b85[_0x50d25b(0x12c2)]['get'](_0x270076);if(!_0x361739)return;_0x28b37b();let _0x1fe5cb;if(_0x361739[_0x50d25b(0x682)]===_0x50d25b(0x134d))_0x1fe5cb=_0x361739['content'];else{const _0x995d44={'type':_0x361739[_0x50d25b(0x682)],'publicText':_0x361739[_0x50d25b(0x137f)]||''};if(_0x361739[_0x50d25b(0x682)]==='image_post')_0x995d44[_0x50d25b(0x127b)]=_0x361739['imageUrl'],_0x995d44['imageDescription']=_0x361739[_0x50d25b(0xf67)];else _0x361739[_0x50d25b(0x682)]===_0x50d25b(0x12d0)&&(_0x995d44[_0x50d25b(0x59a)]=_0x361739[_0x50d25b(0x59a)]);_0x1fe5cb=JSON[_0x50d25b(0x7cc)](_0x995d44,null,0x2);}const _0x27c17a={'shuoshuo':'在这里输入说说的内容...','image':{'type':_0x50d25b(0x76d),'publicText':'','imageUrl':'https://...','imageDescription':''},'text_image':{'type':_0x50d25b(0x12d0),'publicText':'','hiddenContent':''}},_0x252756=_0x50d25b(0xc86)+JSON['stringify'](_0x27c17a[_0x50d25b(0x13ba)])+_0x50d25b(0x12c3)+JSON['stringify'](_0x27c17a['text_image'])+_0x50d25b(0x6ca),_0x1be0ca=await _0x131a69(_0x50d25b(0xf2c),_0x50d25b(0x8b7),_0x1fe5cb,_0x50d25b(0x338),_0x252756);setTimeout(()=>{const _0x594e8f=_0x50d25b,_0x5ae29d=document['querySelector'](_0x594e8f(0xacd));_0x5ae29d&&_0x5ae29d[_0x594e8f(0x7b8)](_0x594e8f(0xb4a),()=>{const _0x38db5e=_0x594e8f,_0x54ac03=document[_0x38db5e(0xfa0)](_0x38db5e(0x11fb));_0x54ac03['value']=_0x27c17a[_0x38db5e(0x134d)],_0x54ac03[_0x38db5e(0x10c7)]();});},0x64),_0x1be0ca!==null&&await _0x35968e(_0x270076,_0x1be0ca);}async function _0x35968e(_0x5b08e4,_0x14251a){const _0x443442=_0x7c5117,_0x474c80=await _0x372b85[_0x443442(0x12c2)][_0x443442(0x70d)](_0x5b08e4);if(!_0x474c80)return;const _0x14f92b=_0x14251a[_0x443442(0xa06)]();try{const _0x42ee2a=JSON[_0x443442(0x4a0)](_0x14f92b);_0x474c80['type']=_0x42ee2a[_0x443442(0x682)]||_0x443442(0x76d),_0x474c80[_0x443442(0x137f)]=_0x42ee2a[_0x443442(0x137f)]||'',_0x474c80[_0x443442(0x127b)]=_0x42ee2a['imageUrl']||'',_0x474c80[_0x443442(0xf67)]=_0x42ee2a['imageDescription']||'',_0x474c80[_0x443442(0x59a)]=_0x42ee2a[_0x443442(0x59a)]||'',_0x474c80['content']='';}catch(_0x43dfec){_0x474c80[_0x443442(0x682)]=_0x443442(0x134d),_0x474c80[_0x443442(0x1469)]=_0x14f92b,_0x474c80[_0x443442(0x137f)]='',_0x474c80[_0x443442(0x127b)]='',_0x474c80['imageDescription']='',_0x474c80[_0x443442(0x59a)]='';}await _0x372b85[_0x443442(0x12c2)][_0x443442(0x11d5)](_0x474c80),await _0x1098dc(),await _0x4abd86('成功',_0x443442(0xf12));}async function _0x1db536(){const _0x17d761=_0x7c5117;if(!_0x2108d3)return;const _0x1c074d=await _0x372b85['qzonePosts'][_0x17d761(0x70d)](_0x2108d3);if(!_0x1c074d)return;let _0x2c8880=_0x1c074d['content']||_0x1c074d[_0x17d761(0x137f)]||_0x1c074d['hiddenContent']||_0x1c074d[_0x17d761(0xf67)]||'（无文字内容）';try{await navigator[_0x17d761(0x216)][_0x17d761(0x5cf)](_0x2c8880),await _0x4abd86(_0x17d761(0xc68),_0x17d761(0x9d8));}catch(_0x1f4ba0){await _0x4abd86(_0x17d761(0xa09),_0x17d761(0x543));}_0x28b37b();}let _0x29b69b=new Set();async function _0x2116d4(){const _0x6da3ae=_0x7c5117,_0x2347db=await _0x2aedfc(_0x6da3ae(0xdf8),[{'text':_0x6da3ae(0x12bf),'value':'normal'},{'text':'创建旁观群聊\x20(我围观)','value':'spectator'}]);if(_0x2347db===_0x6da3ae(0x14f4)){_0x29b69b[_0x6da3ae(0xf7d)]();const _0x4a9d0e=document[_0x6da3ae(0xfa0)](_0x6da3ae(0xd19)),_0x31cb3d=_0x4a9d0e[_0x6da3ae(0xb5c)](!![]);_0x4a9d0e['parentNode'][_0x6da3ae(0x5d2)](_0x31cb3d,_0x4a9d0e),_0x31cb3d[_0x6da3ae(0x7b8)](_0x6da3ae(0xb4a),_0xbeeec),await _0x31ab4c(),_0x2d25e5(_0x6da3ae(0x1349));}else _0x2347db===_0x6da3ae(0xb3d)&&_0x578e0e();}async function _0x578e0e(){const _0x40caa0=_0x7c5117;_0x29b69b['clear']();const _0x5632a2=document[_0x40caa0(0xfa0)](_0x40caa0(0xd19)),_0x24f48b=_0x5632a2[_0x40caa0(0xb5c)](!![]);_0x5632a2[_0x40caa0(0xcdd)][_0x40caa0(0x5d2)](_0x24f48b,_0x5632a2),_0x24f48b[_0x40caa0(0x7b8)](_0x40caa0(0xb4a),_0x34944e),await _0xcbd462(),_0x2d25e5('contact-picker-screen');}async function _0xcbd462(){const _0x324fbd=_0x7c5117,_0x186892=document[_0x324fbd(0xfa0)](_0x324fbd(0x5aa));_0x186892['innerHTML']='';const _0xf334cd=Object[_0x324fbd(0x142f)](_0x8f0871['chats'])[_0x324fbd(0xde7)](_0x3240d5=>!_0x3240d5[_0x324fbd(0x1364)]),_0x1c37a9=await _0x372b85['npcs'][_0x324fbd(0x3bc)]();if(_0xf334cd[_0x324fbd(0xac0)]===0x0&&_0x1c37a9[_0x324fbd(0xac0)]===0x0){_0x186892[_0x324fbd(0x1331)]=_0x324fbd(0x181);return;}_0xf334cd[_0x324fbd(0x458)](_0x12c462=>{const _0x17e38d=_0x324fbd,_0x104035=document['createElement'](_0x17e38d(0xd53));_0x104035[_0x17e38d(0x1287)]='contact-picker-item',_0x104035[_0x17e38d(0x8df)][_0x17e38d(0xdb5)]=_0x12c462['id'],_0x104035[_0x17e38d(0x1331)]=_0x17e38d(0xe72)+(_0x12c462[_0x17e38d(0x12d7)][_0x17e38d(0xce8)]||_0x1a2fc1)+_0x17e38d(0xfc8)+_0x12c462[_0x17e38d(0x1023)]+_0x17e38d(0x100b),_0x186892[_0x17e38d(0x1155)](_0x104035);}),_0x1c37a9[_0x324fbd(0x458)](_0x3327fd=>{const _0x223018=_0x324fbd,_0x829ca0=document[_0x223018(0xb4e)](_0x223018(0xd53));_0x829ca0['className']=_0x223018(0x632),_0x829ca0['dataset'][_0x223018(0xdb5)]=_0x3327fd['id'],_0x829ca0[_0x223018(0x8df)][_0x223018(0xff6)]=_0x223018(0xf02),_0x829ca0[_0x223018(0x1331)]=_0x223018(0xe72)+(_0x3327fd[_0x223018(0xc61)]||_0x29d47b)+_0x223018(0xfc8)+_0x3327fd[_0x223018(0x1023)]+_0x223018(0xd78),_0x186892[_0x223018(0x1155)](_0x829ca0);}),_0x4ec665();}async function _0x34944e(){const _0x152c6e=_0x7c5117;if(_0x29b69b['size']<0x2){alert('旁观群聊至少需要选择2个成员。');return;}const _0x1c5734=await _0x131a69(_0x152c6e(0xd2c),'请输入群聊的名字',_0x152c6e(0x1de));if(!_0x1c5734||!_0x1c5734['trim']())return;const _0x5196bd='group_'+Date[_0x152c6e(0xc22)](),_0x16067c=[],_0x2a8cf6=await _0x372b85['npcs'][_0x152c6e(0x3bc)]();for(const _0x450afd of _0x29b69b){const _0x1691c6=document[_0x152c6e(0xfb1)]('.contact-picker-item[data-contact-id=\x22'+_0x450afd+'\x22]')[_0x152c6e(0x8df)][_0x152c6e(0xff6)]===_0x152c6e(0xf02);if(_0x1691c6){const _0x532007=_0x2a8cf6[_0x152c6e(0x7ed)](_0x3327b6=>_0x3327b6['id']===parseInt(_0x450afd));_0x532007&&_0x16067c[_0x152c6e(0x481)]({'id':_0x152c6e(0xbec)+_0x532007['id'],'originalName':_0x532007[_0x152c6e(0x1023)],'groupNickname':_0x532007['name'],'persona':_0x532007[_0x152c6e(0x3fa)],'avatar':_0x532007[_0x152c6e(0xc61)]||_0x29d47b,'isNpc':!![]});}else{const _0x46409e=_0x8f0871[_0x152c6e(0x1260)][_0x450afd];_0x46409e&&_0x16067c[_0x152c6e(0x481)]({'id':_0x450afd,'originalName':_0x46409e[_0x152c6e(0x93e)],'groupNickname':_0x46409e[_0x152c6e(0x1023)],'persona':_0x46409e[_0x152c6e(0x12d7)][_0x152c6e(0x200)],'avatar':_0x46409e['settings']['aiAvatar']||_0x1a2fc1,'isNpc':![]});}}const _0x40430e={'id':_0x5196bd,'name':_0x1c5734[_0x152c6e(0xa06)](),'isGroup':!![],'isSpectatorGroup':!![],'members':_0x16067c,'settings':{'maxMemory':0xa,'groupAvatar':_0x3503aa,'background':'','theme':_0x152c6e(0xe82),'fontSize':0xd,'customCss':'','linkedWorldBookIds':[]},'history':[{'role':'system','content':_0x152c6e(0x698),'timestamp':Date[_0x152c6e(0xc22)](),'isHidden':!![]}],'musicData':{'totalTime':0x0}};_0x8f0871[_0x152c6e(0x1260)][_0x5196bd]=_0x40430e,await _0x372b85[_0x152c6e(0x1260)][_0x152c6e(0x11d5)](_0x40430e),await _0x2d75fb(),_0x2d25e5('chat-list-screen'),_0x41c772(_0x5196bd);}async function _0x31ab4c(){const _0xab3385=_0x7c5117,_0x450f78=document['getElementById'](_0xab3385(0x5aa));_0x450f78[_0xab3385(0x1331)]='';const _0x35aff8=Object[_0xab3385(0x142f)](_0x8f0871['chats'])[_0xab3385(0xde7)](_0x15250f=>!_0x15250f[_0xab3385(0x1364)]),_0x56f066=await _0x372b85[_0xab3385(0x1269)][_0xab3385(0x3bc)]();if(_0x35aff8[_0xab3385(0xac0)]===0x0&&_0x56f066[_0xab3385(0xac0)]===0x0){_0x450f78[_0xab3385(0x1331)]=_0xab3385(0x13d7);return;}_0x35aff8['forEach'](_0x501f2e=>{const _0x2a9b39=_0xab3385,_0x44ea1b=document[_0x2a9b39(0xb4e)](_0x2a9b39(0xd53));_0x44ea1b[_0x2a9b39(0x1287)]=_0x2a9b39(0x632),_0x44ea1b[_0x2a9b39(0x8df)][_0x2a9b39(0xdb5)]=_0x501f2e['id'],_0x44ea1b['innerHTML']=_0x2a9b39(0xe72)+(_0x501f2e[_0x2a9b39(0x12d7)][_0x2a9b39(0xce8)]||_0x1a2fc1)+'\x22\x20class=\x22avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>'+_0x501f2e[_0x2a9b39(0x1023)]+_0x2a9b39(0x100b),_0x450f78[_0x2a9b39(0x1155)](_0x44ea1b);}),_0x56f066['forEach'](_0x16fedd=>{const _0x5b6a0f=_0xab3385,_0x59ef8c=document[_0x5b6a0f(0xb4e)](_0x5b6a0f(0xd53));_0x59ef8c['className']=_0x5b6a0f(0x632),_0x59ef8c[_0x5b6a0f(0x8df)][_0x5b6a0f(0xdb5)]=_0x5b6a0f(0xbec)+_0x16fedd['id'],_0x59ef8c[_0x5b6a0f(0x1331)]=_0x5b6a0f(0xe72)+(_0x16fedd[_0x5b6a0f(0xc61)]||_0x29d47b)+_0x5b6a0f(0xfc8)+_0x16fedd[_0x5b6a0f(0x1023)]+_0x5b6a0f(0xd78),_0x450f78['appendChild'](_0x59ef8c);}),_0x4ec665();}function _0x4ec665(){const _0x31a99c=_0x7c5117,_0x1079f4=document['getElementById']('confirm-contact-picker-btn');_0x1079f4[_0x31a99c(0xc62)]=_0x31a99c(0x214)+_0x29b69b[_0x31a99c(0xbc3)]+')',_0x1079f4[_0x31a99c(0x104b)]=_0x29b69b[_0x31a99c(0xbc3)]<0x2;}async function _0xbeeec(){const _0x42a663=_0x7c5117;if(_0x29b69b[_0x42a663(0xbc3)]<0x2){alert('创建群聊至少需要选择2个联系人。');return;}const _0x1bf6f7=await _0x131a69(_0x42a663(0xd2c),'请输入群聊的名字',_0x42a663(0x1449));if(!_0x1bf6f7||!_0x1bf6f7[_0x42a663(0xa06)]())return;const _0x4e7ef5=_0x42a663(0x52a)+Date['now'](),_0x331971=[],_0x174258=await _0x372b85[_0x42a663(0x1269)][_0x42a663(0x3bc)]();for(const _0x50223b of _0x29b69b){if(_0x50223b[_0x42a663(0x9b8)]('npc_')){const _0x4c5a02=parseInt(_0x50223b[_0x42a663(0x128a)]('npc_','')),_0x1e7960=_0x174258[_0x42a663(0x7ed)](_0x475f12=>_0x475f12['id']===_0x4c5a02);_0x1e7960&&_0x331971[_0x42a663(0x481)]({'id':_0x50223b,'originalName':_0x1e7960['name'],'groupNickname':_0x1e7960[_0x42a663(0x1023)],'persona':_0x1e7960[_0x42a663(0x3fa)],'avatar':_0x1e7960['avatar']||_0x29d47b,'isNpc':!![]});}else{const _0x123812=_0x8f0871[_0x42a663(0x1260)][_0x50223b];_0x123812&&_0x331971['push']({'id':_0x50223b,'originalName':_0x123812[_0x42a663(0x93e)],'groupNickname':_0x123812[_0x42a663(0x1023)],'persona':_0x123812['settings'][_0x42a663(0x200)],'avatar':_0x123812[_0x42a663(0x12d7)][_0x42a663(0xce8)]||_0x1a2fc1,'isNpc':![]});}}const _0x159a6c={'id':_0x4e7ef5,'name':_0x1bf6f7['trim'](),'isGroup':!![],'members':_0x331971,'settings':{'myPersona':'我是谁呀。','myNickname':'我','maxMemory':0xa,'groupAvatar':_0x3503aa,'myAvatar':_0x2c882e,'background':'','theme':_0x42a663(0xe82),'fontSize':0xd,'customCss':'','linkedWorldBookIds':[]},'history':[],'musicData':{'totalTime':0x0}};_0x8f0871[_0x42a663(0x1260)][_0x4e7ef5]=_0x159a6c,await _0x372b85['chats'][_0x42a663(0x11d5)](_0x159a6c),await _0x2d75fb(),_0x2d25e5(_0x42a663(0x9e1)),_0x41c772(_0x4e7ef5);}function _0x4b7358(){const _0x5bf651=_0x7c5117;if(!_0x8f0871[_0x5bf651(0xac8)]||!_0x8f0871[_0x5bf651(0x1260)][_0x8f0871[_0x5bf651(0xac8)]]['isGroup'])return;_0x4ee3ef(),_0x2d25e5(_0x5bf651(0x13ec));}function _0x4ee3ef(){const _0x5e08fb=_0x7c5117,_0x58cd30=document[_0x5e08fb(0xfa0)](_0x5e08fb(0x4f7)),_0x53f10f=_0x8f0871[_0x5e08fb(0x1260)][_0x8f0871[_0x5e08fb(0xac8)]];_0x58cd30[_0x5e08fb(0x1331)]='',_0x53f10f['members'][_0x5e08fb(0x458)](_0x196c77=>{const _0x4233ba=_0x5e08fb,_0x419aa1=document[_0x4233ba(0xb4e)](_0x4233ba(0xd53));_0x419aa1['className']=_0x4233ba(0x96a),_0x419aa1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x196c77['avatar']+_0x4233ba(0xcca)+_0x196c77['groupNickname']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-member-btn\x22\x20data-member-id=\x22'+_0x196c77['id']+'\x22\x20title=\x22移出群聊\x22>-</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x58cd30[_0x4233ba(0x1155)](_0x419aa1);});}async function _0x2fa3d7(_0x4e47a6){const _0xee7cd4=_0x7c5117,_0x4642e1=_0x8f0871[_0xee7cd4(0x1260)][_0x8f0871[_0xee7cd4(0xac8)]],_0x49c083=_0x4642e1[_0xee7cd4(0x2cf)][_0xee7cd4(0xb22)](_0x39777b=>_0x39777b['id']===_0x4e47a6);if(_0x49c083===-0x1)return;if(_0x4642e1[_0xee7cd4(0x2cf)]['length']<=0x2){alert(_0xee7cd4(0xee0));return;}const _0x53565f=_0x4642e1[_0xee7cd4(0x2cf)][_0x49c083]['groupNickname'],_0x1812af=await _0x3f65ed(_0xee7cd4(0x1c2),'确定要将“'+_0x53565f+_0xee7cd4(0x428),{'confirmButtonClass':'btn-danger'});_0x1812af&&(_0x4642e1['members'][_0xee7cd4(0x11ac)](_0x49c083,0x1),await _0x372b85[_0xee7cd4(0x1260)][_0xee7cd4(0x11d5)](_0x4642e1),_0x4ee3ef(),document[_0xee7cd4(0xfa0)](_0xee7cd4(0x6c6))['click']());}async function _0xbe84b9(){const _0x5851f2=_0x7c5117,_0x2c3bae=document[_0x5851f2(0xfa0)](_0x5851f2(0xd19)),_0x5a5449=_0x2c3bae[_0x5851f2(0xb5c)](!![]);_0x2c3bae[_0x5851f2(0xcdd)]['replaceChild'](_0x5a5449,_0x2c3bae),_0x5a5449[_0x5851f2(0x7b8)](_0x5851f2(0xb4a),_0x1ed988),await _0x246d38(),_0x2d25e5(_0x5851f2(0x1349));}async function _0x246d38(){const _0x37fae8=_0x7c5117,_0x3131ee=document[_0x37fae8(0xfa0)](_0x37fae8(0x5aa));_0x3131ee['innerHTML']='',_0x29b69b[_0x37fae8(0xf7d)]();const _0x195cbb=_0x8f0871[_0x37fae8(0x1260)][_0x8f0871[_0x37fae8(0xac8)]],_0x325e32=new Set(_0x195cbb[_0x37fae8(0x2cf)][_0x37fae8(0x556)](_0x36d073=>_0x36d073['id'])),_0x1cd00f=Object['values'](_0x8f0871['chats'])[_0x37fae8(0xde7)](_0x1a34c9=>!_0x1a34c9[_0x37fae8(0x1364)]&&!_0x325e32[_0x37fae8(0xd58)](_0x1a34c9['id'])),_0x3f359d=(await _0x372b85[_0x37fae8(0x1269)][_0x37fae8(0x3bc)]())[_0x37fae8(0xde7)](_0x26b7a7=>!_0x325e32[_0x37fae8(0xd58)](_0x37fae8(0xbec)+_0x26b7a7['id']));_0x1cd00f[_0x37fae8(0xac0)]===0x0&&_0x3f359d[_0x37fae8(0xac0)]===0x0?(_0x3131ee[_0x37fae8(0x1331)]=_0x37fae8(0x50d),document[_0x37fae8(0xfa0)]('confirm-contact-picker-btn')[_0x37fae8(0x63b)][_0x37fae8(0x1248)]=_0x37fae8(0x11b5)):(document[_0x37fae8(0xfa0)]('confirm-contact-picker-btn')[_0x37fae8(0x63b)][_0x37fae8(0x1248)]=_0x37fae8(0x127c),_0x1cd00f[_0x37fae8(0x458)](_0x2035c4=>{const _0x16828d=_0x37fae8,_0x5eb36f=document[_0x16828d(0xb4e)]('div');_0x5eb36f[_0x16828d(0x1287)]='contact-picker-item',_0x5eb36f[_0x16828d(0x8df)]['contactId']=_0x2035c4['id'],_0x5eb36f[_0x16828d(0x8df)]['contactType']='character',_0x5eb36f[_0x16828d(0x1331)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22checkbox\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x2035c4['settings'][_0x16828d(0xce8)]||_0x1a2fc1)+_0x16828d(0xe51)+_0x2035c4[_0x16828d(0x1023)]+_0x16828d(0xa10),_0x3131ee[_0x16828d(0x1155)](_0x5eb36f);}),_0x3f359d[_0x37fae8(0x458)](_0x11e6a0=>{const _0x552feb=_0x37fae8,_0x530558=document['createElement'](_0x552feb(0xd53));_0x530558[_0x552feb(0x1287)]='contact-picker-item',_0x530558[_0x552feb(0x8df)]['contactId']='npc_'+_0x11e6a0['id'],_0x530558['dataset'][_0x552feb(0x149e)]=_0x552feb(0x807),_0x530558['dataset'][_0x552feb(0xed0)]=_0x11e6a0['id'],_0x530558[_0x552feb(0x1331)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22checkbox\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x11e6a0['avatar']||_0x29d47b)+'\x22\x20class=\x22avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>'+_0x11e6a0[_0x552feb(0x1023)]+_0x552feb(0x63d),_0x3131ee[_0x552feb(0x1155)](_0x530558);})),_0x4ec665();}async function _0x1ed988(){const _0x9ec885=_0x7c5117;if(_0x29b69b[_0x9ec885(0xbc3)]===0x0){alert(_0x9ec885(0x2f0));return;}const _0x39f638=_0x8f0871['chats'][_0x8f0871['activeChatId']],_0x513986=await _0x372b85[_0x9ec885(0x1269)]['toArray']();for(const _0x7229d7 of _0x29b69b){const _0x45bbb8=document[_0x9ec885(0xfb1)](_0x9ec885(0xf2f)+_0x7229d7+'\x22]');if(!_0x45bbb8)continue;const _0x2427b5=_0x45bbb8['dataset'][_0x9ec885(0x149e)];if(_0x2427b5===_0x9ec885(0xf34)){const _0x13bb6a=_0x8f0871[_0x9ec885(0x1260)][_0x7229d7];_0x13bb6a&&_0x39f638[_0x9ec885(0x2cf)]['push']({'id':_0x7229d7,'originalName':_0x13bb6a[_0x9ec885(0x93e)],'groupNickname':_0x13bb6a[_0x9ec885(0x1023)],'persona':_0x13bb6a[_0x9ec885(0x12d7)]['aiPersona'],'avatar':_0x13bb6a[_0x9ec885(0x12d7)][_0x9ec885(0xce8)]||_0x1a2fc1,'isNpc':![]});}else{if(_0x2427b5===_0x9ec885(0x807)){const _0xe12866=parseInt(_0x45bbb8[_0x9ec885(0x8df)][_0x9ec885(0xed0)]),_0x1b583a=_0x513986[_0x9ec885(0x7ed)](_0x606ec0=>_0x606ec0['id']===_0xe12866);_0x1b583a&&_0x39f638[_0x9ec885(0x2cf)][_0x9ec885(0x481)]({'id':'npc_'+_0xe12866,'originalName':_0x1b583a[_0x9ec885(0x1023)],'groupNickname':_0x1b583a[_0x9ec885(0x1023)],'persona':_0x1b583a[_0x9ec885(0x3fa)],'avatar':_0x1b583a['avatar']||_0x29d47b,'isNpc':!![]});}}}await _0x372b85[_0x9ec885(0x1260)][_0x9ec885(0x11d5)](_0x39f638),_0x4b7358();}function _0x4fc809(){_0x19f3af=!![],_0x92a78c(null);}function _0x300faa(_0x20c9e7,_0x4ad20b){const _0x200d0=setInterval(()=>{const _0x4c82c4=_0x5817,_0x2f43cb=Date[_0x4c82c4(0xc22)](),_0x4b6f61=_0x4ad20b-_0x2f43cb;if(_0x4b6f61<0x0){clearInterval(_0x200d0),_0x20c9e7[_0x4c82c4(0x1331)]=_0x4c82c4(0xb4b);return;}const _0x3ec152=Math['floor'](_0x4b6f61%(0x3e8*0x3c*0x3c)/(0x3e8*0x3c)),_0x1bc911=Math[_0x4c82c4(0x13e5)](_0x4b6f61%(0x3e8*0x3c)/0x3e8),_0x5dbf81=String(_0x3ec152)[_0x4c82c4(0x13e8)](0x2,'0'),_0x29004b=String(_0x1bc911)[_0x4c82c4(0x13e8)](0x2,'0');_0x20c9e7[_0x4c82c4(0x1331)]='<span>'+_0x5dbf81[_0x4c82c4(0x8fe)](0x0)+'</span><span>'+_0x5dbf81[_0x4c82c4(0x8fe)](0x1)+_0x4c82c4(0x1547)+_0x29004b[_0x4c82c4(0x8fe)](0x0)+_0x4c82c4(0x14e2)+_0x29004b[_0x4c82c4(0x8fe)](0x1)+_0x4c82c4(0xaca);},0x3e8);return _0x200d0;}function _0x1e62df(){for(const _0xd92b92 in _0x50cb3f){clearInterval(_0x50cb3f[_0xd92b92]);}_0x50cb3f={};}async function _0x23b0c1(_0x16c313){const _0x1a9c68=_0x7c5117,_0x1ad9d8=_0x8f0871['chats'][_0x8f0871[_0x1a9c68(0xac8)]];if(!_0x1ad9d8)return;const _0x424fff=_0x1ad9d8[_0x1a9c68(0xc88)][_0x1a9c68(0x7ed)](_0x5b4250=>_0x5b4250[_0x1a9c68(0xe55)]===_0x16c313);if(!_0x424fff||!['waimai_request',_0x1a9c68(0x1e7)][_0x1a9c68(0xf95)](_0x424fff[_0x1a9c68(0x682)])){console['error'](_0x1a9c68(0x1035),_0x16c313);return;}let _0x1c95ff='';if(_0x424fff[_0x1a9c68(0x682)]===_0x1a9c68(0x1332)){let _0x9ddf83;switch(_0x424fff[_0x1a9c68(0x103e)]){case'paid':const _0xf20ec=_0x424fff[_0x1a9c68(0xa27)]||'对方',_0x51725c=_0x185e1d(_0x1ad9d8,_0xf20ec);_0x9ddf83='由\x20'+_0x51725c+_0x1a9c68(0x6c5);break;case _0x1a9c68(0xd18):_0x9ddf83=_0x1a9c68(0x1490);break;default:_0x9ddf83=_0x1a9c68(0x693);break;}_0x1c95ff='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20left;\x20font-size:\x2015px;\x20line-height:\x201.8;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>商品:</strong>\x20'+_0x424fff[_0x1a9c68(0x51a)]+'<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>金额:</strong>\x20¥'+Number(_0x424fff[_0x1a9c68(0x4a8)])['toFixed'](0x2)+_0x1a9c68(0x1006)+_0x9ddf83+_0x1a9c68(0x2d0);}else{if(_0x424fff[_0x1a9c68(0x682)]==='waimai_order'){let _0x483d82,_0x3490ba;_0x1ad9d8['isGroup']?(_0x483d82=_0x185e1d(_0x1ad9d8,_0x424fff[_0x1a9c68(0x213)]),_0x3490ba=_0x185e1d(_0x1ad9d8,_0x424fff[_0x1a9c68(0x492)])):_0x424fff[_0x1a9c68(0xc92)]==='user'?(_0x483d82=_0x1ad9d8[_0x1a9c68(0x12d7)][_0x1a9c68(0xda5)]||'我',_0x3490ba=_0x1ad9d8['name']):(_0x483d82=_0x1ad9d8[_0x1a9c68(0x1023)],_0x3490ba=_0x1ad9d8['settings'][_0x1a9c68(0xda5)]||'我'),_0x1c95ff='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20left;\x20font-size:\x2015px;\x20line-height:\x201.8;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>订单类型:</strong>\x20为TA点单<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>赠送方:</strong>\x20'+_0x483d82+_0x1a9c68(0xe2f)+_0x3490ba+_0x1a9c68(0x13c8)+_0x424fff[_0x1a9c68(0x51a)]+'<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>金额:</strong>\x20¥'+Number(_0x424fff['amount'])[_0x1a9c68(0x3b8)](0x2)+_0x1a9c68(0x2d0);}}await _0x4abd86(_0x1a9c68(0x324),_0x1c95ff);}async function _0x139238(_0x3eee9b,_0xae3b7e){const _0x387654=_0x7c5117,_0x5d17b6=_0x8f0871[_0x387654(0x1260)][_0x8f0871['activeChatId']];if(!_0x5d17b6)return;const _0x421b2b=_0x5d17b6[_0x387654(0xc88)][_0x387654(0xb22)](_0x50118a=>_0x50118a[_0x387654(0xe55)]===_0x3eee9b);if(_0x421b2b===-0x1)return;const _0xcf1f8d=_0x5d17b6['history'][_0x421b2b];_0xcf1f8d['status']=_0xae3b7e;let _0x38f5c2;const _0x311975=_0x5d17b6[_0x387654(0x1364)]?_0x5d17b6[_0x387654(0x12d7)][_0x387654(0xda5)]||'我':'我';_0xae3b7e===_0x387654(0xa0b)?(_0xcf1f8d[_0x387654(0xa27)]=_0x311975,_0x38f5c2=_0x387654(0x1399)+_0x311975+_0x387654(0x115a)+_0xcf1f8d[_0x387654(0x213)]+'\x20的外卖订单（时间戳:\x20'+_0x3eee9b+_0x387654(0x80e)):_0x38f5c2=_0x387654(0x1399)+_0x311975+_0x387654(0x1359)+_0xcf1f8d[_0x387654(0x213)]+_0x387654(0x842)+_0x3eee9b+_0x387654(0x1101);const _0x4de12f={'role':_0x387654(0x1417),'content':_0x38f5c2,'timestamp':Date['now'](),'isHidden':!![]};_0x5d17b6[_0x387654(0xc88)][_0x387654(0x481)](_0x4de12f),await _0x372b85['chats']['put'](_0x5d17b6),_0x54d32b(_0x8f0871[_0x387654(0xac8)]);}let _0x1fd843={'isActive':![],'isAwaitingResponse':![],'isGroupCall':![],'activeChatId':null,'initiator':null,'startTime':null,'participants':[],'isUserParticipating':!![],'callHistory':[],'preCallContext':''},_0x46c890=null;async function _0x1e2bde(){const _0x3773cb=_0x7c5117;if(!_0x8f0871[_0x3773cb(0xac8)]||_0x1fd843[_0x3773cb(0x684)]||_0x1fd843[_0x3773cb(0x1531)])return;const _0x270fe7=_0x8f0871['chats'][_0x8f0871['activeChatId']];_0x1fd843[_0x3773cb(0x24f)]=_0x270fe7[_0x3773cb(0x1364)],_0x1fd843['isAwaitingResponse']=!![],_0x1fd843[_0x3773cb(0x307)]='user',_0x1fd843[_0x3773cb(0xac8)]=_0x270fe7['id'],_0x1fd843[_0x3773cb(0x3ab)]=!![];_0x270fe7['isGroup']?(document[_0x3773cb(0xfa0)](_0x3773cb(0x667))[_0x3773cb(0x53e)]=_0x270fe7[_0x3773cb(0x12d7)][_0x3773cb(0x38a)]||_0x2c882e,document[_0x3773cb(0xfa0)](_0x3773cb(0x1ae))[_0x3773cb(0xc62)]=_0x270fe7[_0x3773cb(0x12d7)][_0x3773cb(0xda5)]||'我'):(document[_0x3773cb(0xfa0)](_0x3773cb(0x667))[_0x3773cb(0x53e)]=_0x270fe7['settings'][_0x3773cb(0xce8)]||_0x1a2fc1,document['getElementById']('outgoing-call-name')['textContent']=_0x270fe7[_0x3773cb(0x1023)]);document[_0x3773cb(0xfb1)](_0x3773cb(0x127f))[_0x3773cb(0xc62)]=_0x270fe7[_0x3773cb(0x1364)]?_0x3773cb(0x13fc):_0x3773cb(0x229),_0x2d25e5(_0x3773cb(0x1335));const _0x37f9d7={'role':_0x3773cb(0x1417),'content':_0x270fe7[_0x3773cb(0x1364)]?_0x3773cb(0x816)+(_0x270fe7[_0x3773cb(0x12d7)]['myNickname']||'我')+_0x3773cb(0x5b7):_0x3773cb(0x14be),'timestamp':Date['now'](),'isHidden':!![]};_0x270fe7[_0x3773cb(0xc88)]['push'](_0x37f9d7),await _0x372b85['chats'][_0x3773cb(0x11d5)](_0x270fe7),await _0x2264b2();}function _0x1b78aa(){const _0x11480e=_0x7c5117,_0x4f2d00=_0x8f0871[_0x11480e(0x1260)][_0x1fd843['activeChatId']];if(!_0x4f2d00)return;_0x1fd843[_0x11480e(0x684)]=!![],_0x1fd843[_0x11480e(0x1531)]=![],_0x1fd843[_0x11480e(0x10e6)]=Date[_0x11480e(0xc22)](),_0x1fd843[_0x11480e(0x31d)]=[];const _0x18386d=_0x4f2d00[_0x11480e(0xc88)][_0x11480e(0x59f)](-0xa);_0x1fd843[_0x11480e(0x1c0)]=_0x18386d['map'](_0x4f2ffd=>{const _0x18416d=_0x11480e,_0x5b60db=_0x4f2ffd['role']===_0x18416d(0xcb0)?_0x4f2d00[_0x18416d(0x12d7)][_0x18416d(0xda5)]||'我':_0x4f2ffd[_0x18416d(0x213)]||_0x4f2d00[_0x18416d(0x1023)];return _0x5b60db+':\x20'+String(_0x4f2ffd[_0x18416d(0x1469)])[_0x18416d(0x9fe)](0x0,0x32)+_0x18416d(0x1111);})[_0x11480e(0xcc2)]('\x0a'),_0x393cbe(),document[_0x11480e(0xfa0)](_0x11480e(0x11b3))[_0x11480e(0x1331)]=_0x11480e(0x881)+(_0x1fd843[_0x11480e(0x24f)]?'群聊已建立...':_0x11480e(0x19e))+_0x11480e(0x1142),_0x2d25e5(_0x11480e(0x355)),document['getElementById'](_0x11480e(0x13c0))['style'][_0x11480e(0x1248)]=_0x1fd843[_0x11480e(0x3ab)]?_0x11480e(0x127c):_0x11480e(0x11b5),document[_0x11480e(0xfa0)](_0x11480e(0xa56))[_0x11480e(0x63b)][_0x11480e(0x1248)]=_0x1fd843['isUserParticipating']?_0x11480e(0x11b5):_0x11480e(0x127c);if(_0x46c890)clearInterval(_0x46c890);_0x46c890=setInterval(_0x4a900f,0x3e8),_0x4a900f(),_0x2a42d0();}async function _0x5862f2(){const _0x449544=_0x7c5117;if(!_0x1fd843['isActive'])return;const _0x3d8216=Math[_0x449544(0x13e5)]((Date[_0x449544(0xc22)]()-_0x1fd843['startTime'])/0x3e8),_0x4fc39a=Math[_0x449544(0x13e5)](_0x3d8216/0x3c)+'分'+_0x3d8216%0x3c+'秒',_0x4d4be2=_0x449544(0x10b3)+_0x4fc39a,_0x1e62de=_0x8f0871['chats'][_0x1fd843[_0x449544(0xac8)]];if(_0x1e62de){const _0x4c3e0b=[];_0x1fd843['isGroupCall']?(_0x1fd843[_0x449544(0xa81)]['forEach'](_0x2512d7=>_0x4c3e0b[_0x449544(0x481)]({'name':_0x2512d7['originalName'],'avatar':_0x2512d7[_0x449544(0xc61)]})),_0x1fd843[_0x449544(0x3ab)]&&_0x4c3e0b['unshift']({'name':_0x1e62de['settings'][_0x449544(0xda5)]||'我','avatar':_0x1e62de['settings'][_0x449544(0x38a)]||_0x2c882e})):(_0x4c3e0b[_0x449544(0x481)]({'name':_0x1e62de[_0x449544(0x1023)],'avatar':_0x1e62de[_0x449544(0x12d7)][_0x449544(0xce8)]||_0x1a2fc1}),_0x4c3e0b[_0x449544(0x1199)]({'name':'我','avatar':_0x1e62de[_0x449544(0x12d7)][_0x449544(0x38a)]||_0x1a2fc1}));const _0x1a6cb9={'chatId':_0x1fd843[_0x449544(0xac8)],'timestamp':Date[_0x449544(0xc22)](),'duration':_0x3d8216,'participants':_0x4c3e0b,'transcript':[..._0x1fd843['callHistory']]};await _0x372b85[_0x449544(0xe73)]['add'](_0x1a6cb9),console[_0x449544(0x4ee)](_0x449544(0xb71),_0x1a6cb9);let _0x2ed572={'role':_0x1fd843[_0x449544(0x307)]===_0x449544(0xcb0)?_0x449544(0xcb0):_0x449544(0x10af),'content':_0x4d4be2,'timestamp':Date[_0x449544(0xc22)]()};_0x1e62de[_0x449544(0x1364)]&&_0x2ed572[_0x449544(0xc92)]===_0x449544(0x10af)&&(_0x2ed572[_0x449544(0x213)]=_0x1fd843[_0x449544(0xdd2)]||_0x1e62de[_0x449544(0x2cf)][0x0]?.[_0x449544(0x93e)]||_0x1e62de[_0x449544(0x1023)]);_0x1e62de[_0x449544(0xc88)][_0x449544(0x481)](_0x2ed572);const _0x43802f=_0x1fd843[_0x449544(0x31d)][_0x449544(0x556)](_0x475d56=>{const _0x1e5432=_0x449544,_0xd5fcfb=_0x475d56[_0x1e5432(0xc92)]===_0x1e5432(0xcb0)?_0x1e62de[_0x1e5432(0x12d7)][_0x1e5432(0xda5)]||'我':_0x475d56[_0x1e5432(0x213)];return _0xd5fcfb+':\x20'+_0x475d56['content'];})[_0x449544(0xcc2)]('\x0a');_0x4617e2(_0x1e62de['id'],_0x43802f);const _0x318298={'role':_0x449544(0x1417),'content':_0x449544(0x722),'timestamp':Date[_0x449544(0xc22)]()+0x1,'isHidden':!![]};_0x1e62de['history'][_0x449544(0x481)](_0x318298),await _0x372b85[_0x449544(0x1260)][_0x449544(0x11d5)](_0x1e62de);}clearInterval(_0x46c890),_0x46c890=null,_0x1fd843={'isActive':![],'isAwaitingResponse':![],'isGroupCall':![],'activeChatId':null,'initiator':null,'startTime':null,'participants':[],'isUserParticipating':!![],'callHistory':[],'preCallContext':''},_0x1e62de&&(_0x41c772(_0x1e62de['id']),_0x2264b2());}function _0x393cbe(){const _0x3a8620=_0x7c5117,_0x27a673=document[_0x3a8620(0xfa0)](_0x3a8620(0xea9));_0x27a673['innerHTML']='';const _0x5d68b7=_0x8f0871['chats'][_0x1fd843[_0x3a8620(0xac8)]];if(!_0x5d68b7)return;let _0x4e595a=[];_0x1fd843[_0x3a8620(0x24f)]?(_0x4e595a=[..._0x1fd843[_0x3a8620(0xa81)]],_0x1fd843[_0x3a8620(0x3ab)]&&_0x4e595a[_0x3a8620(0x1199)]({'id':_0x3a8620(0xcb0),'name':_0x5d68b7[_0x3a8620(0x12d7)]['myNickname']||'我','avatar':_0x5d68b7[_0x3a8620(0x12d7)]['myAvatar']||_0x2c882e})):_0x4e595a[_0x3a8620(0x481)]({'id':'ai','name':_0x5d68b7[_0x3a8620(0x1023)],'avatar':_0x5d68b7[_0x3a8620(0x12d7)]['aiAvatar']||_0x1a2fc1}),_0x4e595a['forEach'](_0x54e5ec=>{const _0xaef519=_0x3a8620,_0x3b95e6=document[_0xaef519(0xb4e)](_0xaef519(0xd53));_0x3b95e6[_0xaef519(0x1287)]=_0xaef519(0x623),_0x3b95e6['dataset'][_0xaef519(0x974)]=_0x54e5ec['id'];const _0x53a80d=_0x54e5ec['groupNickname']||_0x54e5ec['name'];_0x3b95e6['innerHTML']=_0xaef519(0x13f9)+_0x54e5ec[_0xaef519(0xc61)]+_0xaef519(0x138b)+_0x53a80d+_0xaef519(0x103b)+_0x53a80d+_0xaef519(0x347),_0x27a673['appendChild'](_0x3b95e6);});}function _0x3b232e(){const _0x483475=_0x7c5117;if(!_0x1fd843[_0x483475(0x684)]||_0x1fd843[_0x483475(0x3ab)])return;_0x1fd843[_0x483475(0x3ab)]=!![],_0x393cbe(),document[_0x483475(0xfa0)](_0x483475(0x13c0))[_0x483475(0x63b)][_0x483475(0x1248)]=_0x483475(0x127c),document[_0x483475(0xfa0)](_0x483475(0xa56))['style'][_0x483475(0x1248)]=_0x483475(0x11b5),_0x2a42d0(_0x483475(0x1048));}function _0x4a900f(){const _0x53a4c9=_0x7c5117;if(!_0x1fd843[_0x53a4c9(0x684)])return;const _0x41e9e5=Math['floor']((Date[_0x53a4c9(0xc22)]()-_0x1fd843['startTime'])/0x3e8),_0x53f7b7=Math[_0x53a4c9(0x13e5)](_0x41e9e5/0x3c),_0xddf50f=_0x41e9e5%0x3c;document[_0x53a4c9(0xfa0)]('call-timer')[_0x53a4c9(0xc62)]=String(_0x53f7b7)[_0x53a4c9(0x13e8)](0x2,'0')+':'+String(_0xddf50f)[_0x53a4c9(0x13e8)](0x2,'0');}function _0x59fa07(){const _0x16d590=_0x7c5117,_0x5b00af=_0x8f0871[_0x16d590(0x1260)][_0x8f0871[_0x16d590(0xac8)]];if(!_0x5b00af)return;if(_0x5b00af['isGroup']){const _0xfd50f6=_0x1fd843[_0x16d590(0xdd2)]||_0x5b00af[_0x16d590(0x2cf)][0x0]?.[_0x16d590(0x1023)]||_0x16d590(0x1320);document[_0x16d590(0xfa0)](_0x16d590(0x6cf))[_0x16d590(0x53e)]=_0x5b00af[_0x16d590(0x12d7)]['groupAvatar']||_0x3503aa,document['getElementById'](_0x16d590(0xd4a))['textContent']=_0x5b00af['name'],document[_0x16d590(0xfb1)](_0x16d590(0xcd9))[_0x16d590(0xc62)]=_0xfd50f6+_0x16d590(0x12c6);}else document[_0x16d590(0xfa0)](_0x16d590(0x6cf))['src']=_0x5b00af[_0x16d590(0x12d7)][_0x16d590(0xce8)]||_0x1a2fc1,document[_0x16d590(0xfa0)]('caller-name')['textContent']=_0x5b00af[_0x16d590(0x1023)],document[_0x16d590(0xfb1)](_0x16d590(0xcd9))[_0x16d590(0xc62)]=_0x16d590(0x1375);document[_0x16d590(0xfa0)](_0x16d590(0x564))[_0x16d590(0x128f)][_0x16d590(0x1327)](_0x16d590(0xdcc));}function _0x30746b(){const _0x1e53cc=_0x7c5117;document['getElementById']('incoming-call-modal')[_0x1e53cc(0x128f)][_0x1e53cc(0x443)]('visible');}async function _0x2a42d0(_0x481448=null){const _0x58453a=_0x7c5117;if(!_0x1fd843[_0x58453a(0x684)])return;const _0x9036c8=_0x8f0871[_0x58453a(0x1260)][_0x1fd843[_0x58453a(0xac8)]],{proxyUrl:_0x4c653b,apiKey:_0xbf8df0,model:_0x21e599}=_0x8f0871[_0x58453a(0xa78)],_0x47da29=document[_0x58453a(0xfa0)]('video-call-main'),_0x357e2b=_0x9036c8[_0x58453a(0x12d7)][_0x58453a(0xda5)]||'我';let _0x2519df='';if(_0x9036c8[_0x58453a(0x12d7)][_0x58453a(0xaaf)]&&_0x9036c8[_0x58453a(0x12d7)][_0x58453a(0xaaf)][_0x58453a(0xac0)]>0x0){const _0x3899d5=_0x9036c8[_0x58453a(0x12d7)][_0x58453a(0xaaf)][_0x58453a(0x556)](_0x666193=>{const _0x423fcb=_0x58453a,_0x424afb=_0x8f0871[_0x423fcb(0x739)][_0x423fcb(0x7ed)](_0x1f5a72=>_0x1f5a72['id']===_0x666193);return _0x424afb&&_0x424afb[_0x423fcb(0x1469)]?'\x0a\x0a##\x20世界书:\x20'+_0x424afb[_0x423fcb(0x1023)]+'\x0a'+_0x424afb[_0x423fcb(0x1469)]:'';})['filter'](Boolean)[_0x58453a(0xcc2)]('');_0x3899d5&&(_0x2519df=_0x58453a(0x72a)+_0x3899d5+_0x58453a(0xf00));}if(_0x481448&&_0x1fd843[_0x58453a(0x3ab)]){const _0x4c2e26=Date[_0x58453a(0xc22)](),_0x2aad8d=document[_0x58453a(0xb4e)](_0x58453a(0xd53));_0x2aad8d['className']=_0x58453a(0x25e),_0x2aad8d[_0x58453a(0xc62)]=_0x481448,_0x2aad8d[_0x58453a(0x8df)][_0x58453a(0xe55)]=_0x4c2e26,_0x53cdde(_0x2aad8d,()=>_0x3222ee(_0x4c2e26)),_0x47da29[_0x58453a(0x1155)](_0x2aad8d),_0x47da29[_0x58453a(0x54d)]=_0x47da29[_0x58453a(0x11b8)],_0x1fd843['callHistory'][_0x58453a(0x481)]({'role':'user','content':_0x481448,'timestamp':_0x4c2e26});}let _0xf883eb;if(_0x1fd843[_0x58453a(0x24f)]){const _0x2e2002=_0x1fd843['participants'][_0x58453a(0x556)](_0x24a6a4=>_0x24a6a4['name']);_0x1fd843[_0x58453a(0x3ab)]&&_0x2e2002['unshift'](_0x357e2b),_0xf883eb=_0x58453a(0x713)+_0x357e2b+_0x58453a(0xb29)+_0x357e2b+'\x22**\x20的发言。\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20\x20**【【【视角铁律】】】**:\x20你的回复【绝对不能】使用第一人称“我”。\x0a\x20\x20\x20\x20\x20\x20\x20\x203.\x20\x20**格式**:\x20你的回复【必须】是一个JSON数组，每个对象代表一个角色的发言，格式为：`{\x22name\x22:\x20\x22角色名\x22,\x20\x22speech\x22:\x20\x22*他笑了笑*\x20大家好啊！\x22}`。\x0a\x20\x20\x20\x20\x20\x20\x20\x204.\x20\x20**角色扮演**:\x20严格遵守每个角色的设定。\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20当前情景\x0a\x20\x20\x20\x20\x20\x20\x20\x20你们正在一个群视频通话中。\x0a\x20\x20\x20\x20\x20\x20\x20\x20**通话前的聊天摘要**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1fd843[_0x58453a(0x1c0)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20**当前参与者**:\x20'+_0x2e2002[_0x58453a(0xcc2)]('、\x20')+_0x58453a(0x128c)+_0x2519df+_0x58453a(0x554);}else{let _0x20873e=_0x1fd843[_0x58453a(0x307)]==='user'?_0x58453a(0x464):_0x58453a(0xd2f);_0xf883eb=_0x58453a(0x23c)+_0x9036c8['name']+'\x20('+_0x9036c8[_0x58453a(0x12d7)][_0x58453a(0x200)]+_0x58453a(0x94b)+_0x9036c8[_0x58453a(0x1023)]+_0x58453a(0x862)+_0x357e2b+_0x58453a(0x317)+_0x9036c8[_0x58453a(0x12d7)]['myPersona']+_0x58453a(0x9b0)+_0x20873e+'**\x0a\x20\x20\x20\x20\x20\x20\x20\x20**通话前的聊天摘要\x20(这是你们通话的原因，至关重要！)**:\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1fd843[_0x58453a(0x1c0)]+_0x58453a(0x866);}const _0x850288=[{'role':_0x58453a(0x1417),'content':_0xf883eb},..._0x1fd843[_0x58453a(0x31d)][_0x58453a(0x556)](_0x20027b=>({'role':_0x20027b[_0x58453a(0xc92)],'content':_0x20027b[_0x58453a(0x1469)]}))];if(_0x1fd843[_0x58453a(0x31d)][_0x58453a(0xac0)]===0x0){const _0x3b217d=_0x1fd843[_0x58453a(0x307)]===_0x58453a(0xcb0)?_0x58453a(0xe93):_0x58453a(0x1447);_0x850288[_0x58453a(0x481)]({'role':_0x58453a(0xcb0),'content':_0x3b217d});}try{let _0x175009=_0x4c653b===GEMINI_API_URL,_0x29135c=_0x1e2f27(_0x21e599,_0xbf8df0,_0xf883eb,_0x850288);const _0x1998d5=_0x175009?await fetch(_0x29135c[_0x58453a(0x3f5)],_0x29135c[_0x58453a(0x3cc)]):await fetch(_0x4c653b+_0x58453a(0x1011),{'method':_0x58453a(0xb67),'headers':{'Content-Type':'application/json','Authorization':_0x58453a(0x681)+_0xbf8df0},'body':JSON['stringify']({'model':_0x21e599,'messages':_0x850288,'temperature':_0x8f0871[_0x58453a(0x7b0)]['apiTemperature']||0.8})});if(!_0x1998d5['ok'])throw new Error((await _0x1998d5[_0x58453a(0xa2e)]())['error'][_0x58453a(0x790)]);const _0x2a96e8=await _0x1998d5['json'](),_0x28df46=_0x175009?_0x2a96e8['candidates'][0x0][_0x58453a(0x1469)][_0x58453a(0xf59)][0x0]['text']:_0x2a96e8[_0x58453a(0x14bc)][0x0][_0x58453a(0x790)]['content'],_0x151c7f=_0x47da29[_0x58453a(0xfb1)]('em');if(_0x151c7f)_0x151c7f[_0x58453a(0x443)]();if(_0x1fd843[_0x58453a(0x24f)]){const _0xb4b6b4=_0x3b585b(_0x28df46);_0xb4b6b4['forEach'](_0x207254=>{const _0x42984e=_0x58453a;if(!_0x207254['name']||_0x207254[_0x42984e(0x1023)]===_0x357e2b||!_0x207254[_0x42984e(0x68f)])return;const _0x3ea6cc=Date['now']()+Math[_0x42984e(0x148a)](),_0x56980c=document[_0x42984e(0xb4e)]('div');_0x56980c['className']=_0x42984e(0xa32),_0x56980c[_0x42984e(0x1331)]='<strong>'+_0x207254[_0x42984e(0x1023)]+_0x42984e(0x529)+_0x207254[_0x42984e(0x68f)],_0x56980c[_0x42984e(0x8df)][_0x42984e(0xe55)]=_0x3ea6cc,_0x53cdde(_0x56980c,()=>_0x3222ee(_0x3ea6cc)),_0x47da29[_0x42984e(0x1155)](_0x56980c),_0x1fd843['callHistory']['push']({'role':_0x42984e(0x10af),'content':_0x207254[_0x42984e(0x1023)]+':\x20'+_0x207254[_0x42984e(0x68f)],'timestamp':_0x3ea6cc});const _0x319108=_0x1fd843[_0x42984e(0xa81)][_0x42984e(0x7ed)](_0x1c8d2c=>_0x1c8d2c[_0x42984e(0x1023)]===_0x207254[_0x42984e(0x1023)]);if(_0x319108){const _0x120840=document[_0x42984e(0xfb1)](_0x42984e(0xc20)+_0x319108['id']+_0x42984e(0x13cf));_0x120840&&(_0x120840[_0x42984e(0x128f)][_0x42984e(0x1327)](_0x42984e(0xbb5)),setTimeout(()=>_0x120840[_0x42984e(0x128f)][_0x42984e(0x443)](_0x42984e(0xbb5)),0x7d0));}});}else{const _0x9fe12b=Date[_0x58453a(0xc22)](),_0x6827a4=document[_0x58453a(0xb4e)](_0x58453a(0xd53));_0x6827a4['className']=_0x58453a(0xa32),_0x6827a4['textContent']=_0x28df46,_0x6827a4[_0x58453a(0x8df)]['timestamp']=_0x9fe12b,_0x53cdde(_0x6827a4,()=>_0x3222ee(_0x9fe12b)),_0x47da29[_0x58453a(0x1155)](_0x6827a4),_0x1fd843['callHistory']['push']({'role':_0x58453a(0x10af),'content':_0x28df46,'timestamp':_0x9fe12b});const _0x74b16d=document[_0x58453a(0xfb1)](_0x58453a(0xc33));_0x74b16d&&(_0x74b16d['classList'][_0x58453a(0x1327)]('speaking'),setTimeout(()=>_0x74b16d['classList'][_0x58453a(0x443)]('speaking'),0x7d0));}_0x47da29[_0x58453a(0x54d)]=_0x47da29['scrollHeight'];}catch(_0x21bd2c){const _0x1cb84c=document[_0x58453a(0xb4e)](_0x58453a(0xd53));_0x1cb84c['className']=_0x58453a(0xa32),_0x1cb84c[_0x58453a(0x63b)]['color']=_0x58453a(0x1534),_0x1cb84c['textContent']=_0x58453a(0x265)+_0x21bd2c['message']+']',_0x47da29[_0x58453a(0x1155)](_0x1cb84c),_0x47da29[_0x58453a(0x54d)]=_0x47da29[_0x58453a(0x11b8)],_0x1fd843[_0x58453a(0x31d)][_0x58453a(0x481)]({'role':'assistant','content':_0x58453a(0x265)+_0x21bd2c[_0x58453a(0x790)]+']'});}}function _0x2242ba(_0x192963){const _0x21d4d7=_0x7c5117;document[_0x21d4d7(0xfa0)]('video-call-btn')[_0x21d4d7(0x63b)][_0x21d4d7(0x1248)]=_0x192963?_0x21d4d7(0x11b5):_0x21d4d7(0x138c),document[_0x21d4d7(0xfa0)](_0x21d4d7(0x10c8))[_0x21d4d7(0x63b)][_0x21d4d7(0x1248)]=_0x192963?_0x21d4d7(0x138c):_0x21d4d7(0x11b5);}async function _0x139238(_0x5c1129,_0x398667){const _0x12cc1e=_0x7c5117,_0x145fa6=_0x8f0871[_0x12cc1e(0x1260)][_0x8f0871[_0x12cc1e(0xac8)]];if(!_0x145fa6)return;const _0x3a4f5e=_0x145fa6[_0x12cc1e(0xc88)][_0x12cc1e(0xb22)](_0x24352a=>_0x24352a['timestamp']===_0x5c1129);if(_0x3a4f5e===-0x1)return;const _0x23255f=_0x145fa6['history'][_0x3a4f5e];_0x23255f[_0x12cc1e(0x103e)]=_0x398667;let _0x2cff94;const _0x180611=_0x145fa6['isGroup']?_0x145fa6[_0x12cc1e(0x12d7)][_0x12cc1e(0xda5)]||'我':'我';_0x398667==='paid'?(_0x23255f[_0x12cc1e(0xa27)]=_0x180611,_0x2cff94='[系统提示：你\x20('+_0x180611+_0x12cc1e(0x115a)+_0x23255f[_0x12cc1e(0x213)]+_0x12cc1e(0x47d)+_0x5c1129+_0x12cc1e(0x80e)):_0x2cff94=_0x12cc1e(0x1399)+_0x180611+_0x12cc1e(0x1359)+_0x23255f[_0x12cc1e(0x213)]+_0x12cc1e(0x842)+_0x5c1129+'）。]';const _0x3c4d63={'role':_0x12cc1e(0x1417),'content':_0x2cff94,'timestamp':Date[_0x12cc1e(0xc22)](),'isHidden':!![]};_0x145fa6[_0x12cc1e(0xc88)][_0x12cc1e(0x481)](_0x3c4d63),await _0x372b85[_0x12cc1e(0x1260)][_0x12cc1e(0x11d5)](_0x145fa6),_0x54d32b(_0x8f0871[_0x12cc1e(0xac8)]),_0x398667==='paid'&&_0x2264b2();}async function _0x2e122d(_0x4ebdab,_0x287d13){const _0x3887ed=_0x7c5117,_0x3e0dfa=_0x8f0871[_0x3887ed(0x1260)][_0x4ebdab];if(!_0x3e0dfa)return;let _0x4cdaee;_0x3e0dfa[_0x3887ed(0x1364)]?_0x4cdaee=_0x185e1d(_0x3e0dfa,_0x287d13):_0x4cdaee=_0x3e0dfa['name'];const _0x6c26f7=document[_0x3887ed(0xfa0)](_0x3887ed(0x1025));_0x6c26f7['classList']['remove']('pat-animation'),void _0x6c26f7['offsetWidth'],_0x6c26f7[_0x3887ed(0x128f)]['add'](_0x3887ed(0x1093));const _0x20b2e0=await _0x131a69(_0x3887ed(0x330)+_0x4cdaee+'”',_0x3887ed(0x4e3),'',_0x3887ed(0xda3));if(_0x20b2e0===null)return;const _0x4b80b7=_0x185e1d(_0x3e0dfa,_0x8f0871[_0x3887ed(0x9dd)][_0x3887ed(0xff8)]),_0x4f8e30=_0x4b80b7+_0x3887ed(0x9ca)+_0x4cdaee+'”\x20'+_0x20b2e0[_0x3887ed(0xa06)](),_0x1fc86a={'role':_0x3887ed(0x1417),'type':_0x3887ed(0x260),'content':_0x4f8e30,'timestamp':Date[_0x3887ed(0xc22)]()};_0x3e0dfa['history'][_0x3887ed(0x481)](_0x1fc86a);const _0x378d3e=_0x3887ed(0x206)+_0x4b80b7+_0x3887ed(0x1454)+_0x287d13+'）'+_0x20b2e0['trim']()+_0x3887ed(0xe6c),_0x264e67={'role':_0x3887ed(0x1417),'content':_0x378d3e,'timestamp':Date[_0x3887ed(0xc22)]()+0x1,'isHidden':!![]};_0x3e0dfa[_0x3887ed(0xc88)][_0x3887ed(0x481)](_0x264e67),await _0x372b85[_0x3887ed(0x1260)][_0x3887ed(0x11d5)](_0x3e0dfa),_0x8f0871['activeChatId']===_0x4ebdab&&_0x25d29f(_0x1fc86a,_0x3e0dfa),await _0x2d75fb();}let _0x5de09e=null,_0x274652=![],_0x3e7810=new Set();function _0x3222ee(_0x4416bc){const _0x2792d0=_0x7c5117;_0x5de09e=_0x4416bc,document[_0x2792d0(0xfa0)]('call-message-actions-modal')['classList']['add']('visible');}function _0x5cae71(){const _0x5b8426=_0x7c5117;document['getElementById']('call-message-actions-modal')[_0x5b8426(0x128f)][_0x5b8426(0x443)](_0x5b8426(0xdcc)),_0x5de09e=null;}async function _0x16243c(){const _0x2e59b9=_0x7c5117;if(!_0x5de09e)return;const _0x5852bc=_0x5de09e,_0x4a75fa=_0x1fd843[_0x2e59b9(0x31d)][_0x2e59b9(0x7ed)](_0x4458c7=>_0x4458c7[_0x2e59b9(0xe55)]===_0x5852bc);if(!_0x4a75fa)return;_0x5cae71();let _0x22df5f=_0x4a75fa[_0x2e59b9(0x1469)];if(_0x1fd843[_0x2e59b9(0x24f)]&&_0x4a75fa[_0x2e59b9(0xc92)]===_0x2e59b9(0x10af)){const _0x54e59c=_0x4a75fa[_0x2e59b9(0x1469)][_0x2e59b9(0x505)](':\x20');_0x54e59c['length']>0x1&&(_0x22df5f=_0x54e59c[_0x2e59b9(0x59f)](0x1)[_0x2e59b9(0xcc2)](':\x20'));}const _0x11c923=await _0x131a69(_0x2e59b9(0x998),_0x2e59b9(0x8b7),_0x22df5f,_0x2e59b9(0x338));_0x11c923!==null&&await _0xbdab2c(_0x5852bc,_0x11c923);}async function _0xbdab2c(_0x2b5258,_0x2300d3){const _0x2c1557=_0x7c5117,_0x97e444=_0x1fd843[_0x2c1557(0x31d)][_0x2c1557(0x7ed)](_0x33d74c=>_0x33d74c[_0x2c1557(0xe55)]===_0x2b5258);if(_0x97e444){let _0x237906=_0x2300d3;if(_0x1fd843[_0x2c1557(0x24f)]&&_0x97e444['role']===_0x2c1557(0x10af)){const _0x258922=_0x97e444[_0x2c1557(0x1469)]['split'](':\x20'),_0x491f70=_0x258922[0x0];_0x237906=_0x491f70+':\x20'+_0x2300d3;}_0x97e444[_0x2c1557(0x1469)]=_0x237906;const _0xf08fc9=document[_0x2c1557(0xfb1)](_0x2c1557(0x1140)+_0x2b5258+'\x22]');if(_0xf08fc9){if(_0x1fd843[_0x2c1557(0x24f)]&&_0x97e444[_0x2c1557(0xc92)]===_0x2c1557(0x10af)){const _0x275e43=_0x97e444['content'][_0x2c1557(0x505)](':\x20'),_0x2e7272=_0x275e43[0x0];_0xf08fc9[_0x2c1557(0x1331)]=_0x2c1557(0xeec)+_0x2e7272+':</strong>\x20'+_0x2300d3;}else _0xf08fc9[_0x2c1557(0xc62)]=_0x2300d3;}}await _0x4abd86('成功','通话消息已更新！');}async function _0x5c45dc(){const _0x4e1c6e=_0x7c5117;if(!_0x5de09e)return;const _0x5718ca=await _0x3f65ed('删除消息',_0x4e1c6e(0x72c),{'confirmButtonClass':_0x4e1c6e(0x611)});if(_0x5718ca){const _0x37ed2e=_0x5de09e;_0x5cae71();const _0x3ae8ef=_0x1fd843[_0x4e1c6e(0x31d)][_0x4e1c6e(0xb22)](_0x3b80b7=>_0x3b80b7[_0x4e1c6e(0xe55)]===_0x37ed2e);_0x3ae8ef>-0x1&&_0x1fd843[_0x4e1c6e(0x31d)]['splice'](_0x3ae8ef,0x1);const _0x12281b=document['querySelector'](_0x4e1c6e(0x1140)+_0x37ed2e+'\x22]');_0x12281b&&_0x12281b['remove']();}else _0x5cae71();}function _0x3a88c1(_0x30b3d2){const _0x2848fe=_0x7c5117;_0x13eaf6=_0x30b3d2;const _0x3441bd=_0x8f0871['chats'][_0x8f0871[_0x2848fe(0xac8)]],_0xbd3894=_0x3441bd[_0x2848fe(0xc88)][_0x2848fe(0x7ed)](_0x56a465=>_0x56a465[_0x2848fe(0xe55)]===_0x30b3d2);_0xbd3894&&(document[_0x2848fe(0xfa0)]('transfer-sender-name')[_0x2848fe(0xc62)]=_0xbd3894[_0x2848fe(0x213)]),document[_0x2848fe(0xfa0)](_0x2848fe(0x778))[_0x2848fe(0x128f)][_0x2848fe(0x1327)](_0x2848fe(0xdcc));}function _0x4fe60b(){const _0x4dae26=_0x7c5117;document[_0x4dae26(0xfa0)](_0x4dae26(0x778))[_0x4dae26(0x128f)][_0x4dae26(0x443)](_0x4dae26(0xdcc)),_0x13eaf6=null;}async function _0x3502c7(_0x55dbe1){const _0x6d1cf=_0x7c5117;if(!_0x13eaf6)return;const _0x1f615b=_0x13eaf6,_0x3cf07e=_0x8f0871[_0x6d1cf(0x1260)][_0x8f0871['activeChatId']],_0x42907d=_0x3cf07e[_0x6d1cf(0xc88)][_0x6d1cf(0xb22)](_0x17c7a0=>_0x17c7a0['timestamp']===_0x1f615b);if(_0x42907d===-0x1)return;const _0x128a59=_0x3cf07e[_0x6d1cf(0xc88)][_0x42907d];_0x128a59['status']=_0x55dbe1;let _0x42f726;if(_0x55dbe1===_0x6d1cf(0x1467)){const _0x2ef3a8={'role':_0x6d1cf(0xcb0),'type':_0x6d1cf(0x35f),'isRefund':!![],'amount':_0x128a59[_0x6d1cf(0x4a8)],'note':_0x6d1cf(0x1b7),'timestamp':Date['now']()};_0x3cf07e[_0x6d1cf(0xc88)][_0x6d1cf(0x481)](_0x2ef3a8),_0x42f726=_0x6d1cf(0xc42)+_0x128a59[_0x6d1cf(0x213)]+_0x6d1cf(0x325);}else _0x42f726='[系统提示：你接受了“'+_0x128a59[_0x6d1cf(0x213)]+_0x6d1cf(0x325);const _0x7c0a46={'role':'system','content':_0x42f726,'timestamp':Date[_0x6d1cf(0xc22)]()+0x1,'isHidden':!![]};_0x3cf07e[_0x6d1cf(0xc88)][_0x6d1cf(0x481)](_0x7c0a46),await _0x372b85[_0x6d1cf(0x1260)]['put'](_0x3cf07e),_0x4fe60b(),_0x54d32b(_0x8f0871[_0x6d1cf(0xac8)]),_0x2d75fb();}function _0x4573f9(_0x39520e){const _0x18ccca=_0x7c5117;_0x5744d8=null;if(_0x39520e){const _0x2328ea=_0x39520e[_0x18ccca(0xfb1)](_0x18ccca(0xe89));_0x2328ea&&(_0x2328ea[_0x18ccca(0x14ca)]=_0x18ccca(0x1288));}}async function _0xe87969(){const _0x449008=_0x7c5117,_0xa11dc4=document[_0x449008(0xfa0)](_0x449008(0x126e));_0xa11dc4[_0x449008(0x1331)]='';const _0x2ff680=await _0x372b85[_0x449008(0x9ce)][_0x449008(0x1554)]('timestamp')[_0x449008(0xaf5)]()[_0x449008(0x3bc)]();if(_0x2ff680[_0x449008(0xac0)]===0x0){_0xa11dc4[_0x449008(0x1331)]=_0x449008(0x126d);return;}_0x2ff680[_0x449008(0x1376)]((_0x32e7f8,_0x219c6f)=>{const _0x4dfe95=_0x449008,_0x434124=_0x32e7f8[_0x4dfe95(0x682)]==='countdown'&&_0x32e7f8[_0x4dfe95(0xd6d)]>Date['now'](),_0x365143=_0x219c6f[_0x4dfe95(0x682)]===_0x4dfe95(0x11a7)&&_0x219c6f[_0x4dfe95(0xd6d)]>Date[_0x4dfe95(0xc22)]();if(_0x434124&&!_0x365143)return-0x1;if(!_0x434124&&_0x365143)return 0x1;if(_0x434124&&_0x365143)return _0x32e7f8['targetDate']-_0x219c6f[_0x4dfe95(0xd6d)];return 0x0;}),_0x2ff680[_0x449008(0x458)](_0x48c42d=>{const _0x22ecec=_0x449008;let _0x37a45e;_0x48c42d['type']===_0x22ecec(0x11a7)&&_0x48c42d[_0x22ecec(0xd6d)]>Date['now']()?_0x37a45e=_0x3d58d6(_0x48c42d):_0x37a45e=_0x566b91(_0x48c42d),_0xa11dc4[_0x22ecec(0x1155)](_0x37a45e);}),_0x1dd300();}function _0x566b91(_0x3c96b9){const _0x35c088=_0x7c5117,_0x4eda17=document['createElement']('div');_0x4eda17[_0x35c088(0x1287)]='memory-card';const _0x51c418=new Date(_0x3c96b9[_0x35c088(0xe55)]),_0x32c54a=_0x51c418[_0x35c088(0x75f)]()+'-'+String(_0x51c418[_0x35c088(0x35a)]()+0x1)[_0x35c088(0x13e8)](0x2,'0')+'-'+String(_0x51c418[_0x35c088(0x8a5)]())['padStart'](0x2,'0')+'\x20'+String(_0x51c418[_0x35c088(0xf63)]())[_0x35c088(0x13e8)](0x2,'0')+':'+String(_0x51c418[_0x35c088(0xa39)]())[_0x35c088(0x13e8)](0x2,'0');let _0xa67218,_0x3b595a;if(_0x3c96b9['type']==='countdown'&&_0x3c96b9[_0x35c088(0xd6d)])_0xa67218=_0x35c088(0xa64)+_0x3c96b9['description'],_0x3b595a=_0x3de267('在\x20'+new Date(_0x3c96b9[_0x35c088(0xd6d)])[_0x35c088(0x10de)]()+_0x35c088(0x69e))[_0x35c088(0x128a)](/\n/g,_0x35c088(0xd59));else{let _0x414c18=_0x35c088(0xad6);if(_0x3c96b9[_0x35c088(0x11dd)]){const _0x1985d7=_0x8f0871[_0x35c088(0x1260)][_0x3c96b9[_0x35c088(0x11dd)]];_0x1985d7?_0x414c18=_0x1985d7[_0x35c088(0x1023)]:_0x414c18=_0x3c96b9[_0x35c088(0x4f3)]||_0x35c088(0x8e8);}else _0x3c96b9[_0x35c088(0x4f3)]&&(_0x414c18=_0x3c96b9[_0x35c088(0x4f3)]);_0xa67218=_0x414c18+_0x35c088(0x10bd),_0x3b595a=_0x3de267(_0x3c96b9[_0x35c088(0x211)]);}return _0x4eda17[_0x35c088(0x1331)]=_0x35c088(0x818)+_0x32c54a+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22author\x22>'+_0xa67218+_0x35c088(0xf15)+_0x3b595a+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x53cdde(_0x4eda17,async()=>{const _0x15ee9c=_0x35c088,_0x53782d=await _0x3f65ed(_0x15ee9c(0x1c3),_0x15ee9c(0x8b1),{'confirmButtonClass':_0x15ee9c(0x611)});_0x53782d&&(await _0x372b85[_0x15ee9c(0x9ce)][_0x15ee9c(0xf10)](_0x3c96b9['id']),_0xe87969());}),_0x4eda17;}function _0x3d58d6(_0x56873a){const _0x179e62=_0x7c5117,_0x37b1ca=document[_0x179e62(0xb4e)](_0x179e62(0xd53));_0x37b1ca['className']=_0x179e62(0xd73);const _0x1dfe49=new Date(_0x56873a['targetDate']),_0x3e6829=_0x1dfe49[_0x179e62(0x10de)](_0x179e62(0xb43),{'dateStyle':'full','timeStyle':_0x179e62(0x249)});return _0x37b1ca[_0x179e62(0x1331)]=_0x179e62(0x6d1)+_0x56873a[_0x179e62(0x211)]+_0x179e62(0x83c)+_0x56873a[_0x179e62(0xd6d)]+_0x179e62(0xd3a)+_0x3e6829+_0x179e62(0x12b8),_0x53cdde(_0x37b1ca,async()=>{const _0x5345ef=_0x179e62,_0x1b49d0=await _0x3f65ed(_0x5345ef(0x65f),_0x5345ef(0x10fc),{'confirmButtonClass':_0x5345ef(0x611)});_0x1b49d0&&(await _0x372b85[_0x5345ef(0x9ce)][_0x5345ef(0xf10)](_0x56873a['id']),_0xe87969());}),_0x37b1ca;}let _0x199e26=[];function _0x1dd300(){const _0x421bcd=_0x7c5117;_0x199e26[_0x421bcd(0x458)](_0x4618af=>clearInterval(_0x4618af)),_0x199e26=[],document[_0x421bcd(0x2a1)]('.countdown-card\x20.timer')[_0x421bcd(0x458)](_0x24b68e=>{const _0x1e7d35=_0x421bcd,_0x378867=parseInt(_0x24b68e['dataset'][_0x1e7d35(0xd6d)]);let _0x75f481;const _0x597c4d=()=>{const _0x593899=_0x1e7d35,_0x579a9b=Date[_0x593899(0xc22)](),_0x5224ee=_0x378867-_0x579a9b;if(_0x5224ee<0x0){_0x24b68e[_0x593899(0xc62)]=_0x593899(0x1460),clearInterval(_0x75f481),setTimeout(()=>_0xe87969(),0x7d0);return;}const _0x159df6=Math['floor'](_0x5224ee/(0x3e8*0x3c*0x3c*0x18)),_0x3ae810=Math[_0x593899(0x13e5)](_0x5224ee%(0x3e8*0x3c*0x3c*0x18)/(0x3e8*0x3c*0x3c)),_0x4b65ee=Math[_0x593899(0x13e5)](_0x5224ee%(0x3e8*0x3c*0x3c)/(0x3e8*0x3c)),_0x285c9c=Math['floor'](_0x5224ee%(0x3e8*0x3c)/0x3e8);_0x24b68e[_0x593899(0xc62)]=_0x159df6+'天\x20'+_0x3ae810+'时\x20'+_0x4b65ee+'分\x20'+_0x285c9c+'秒';};_0x597c4d(),_0x75f481=setInterval(_0x597c4d,0x3e8),_0x199e26[_0x1e7d35(0x481)](_0x75f481);});}async function _0x7d41bb(_0x19cce2){const _0x55bc7f=_0x7c5117,_0x282368=_0x8f0871[_0x55bc7f(0x1260)][_0x19cce2];if(!_0x282368)return;await _0x4abd86(_0x55bc7f(0x1225),_0x55bc7f(0x6bc)+_0x282368[_0x55bc7f(0x1023)]+_0x55bc7f(0x987));const {proxyUrl:_0x58a42d,apiKey:_0x5d6118,model:_0x13ba67}=_0x8f0871[_0x55bc7f(0xa78)];if(!_0x58a42d||!_0x5d6118||!_0x13ba67){await _0x4abd86(_0x55bc7f(0x14d3),_0x55bc7f(0xc0a));return;}const _0x1e0210=_0x282368[_0x55bc7f(0xc88)]['slice'](-0x5)['map'](_0x191c0e=>{const _0xccb4fa=_0x55bc7f,_0x43abb6=_0x191c0e['role']===_0xccb4fa(0xcb0)?_0x282368[_0xccb4fa(0x12d7)][_0xccb4fa(0xda5)]||'我':_0x191c0e['senderName']||_0x282368['name'];return _0x43abb6+':\x20'+String(_0x191c0e[_0xccb4fa(0x1469)])[_0xccb4fa(0x9fe)](0x0,0x32)+_0xccb4fa(0x1111);})[_0x55bc7f(0xcc2)]('\x0a');let _0x49a60='';if(_0x282368['settings']['linkedWorldBookIds']&&_0x282368['settings'][_0x55bc7f(0xaaf)][_0x55bc7f(0xac0)]>0x0){const _0x49abc5=_0x282368[_0x55bc7f(0x12d7)][_0x55bc7f(0xaaf)][_0x55bc7f(0x556)](_0x295ef7=>{const _0x4d9998=_0x55bc7f,_0x4d4ab3=_0x8f0871[_0x4d9998(0x739)][_0x4d9998(0x7ed)](_0xa2263a=>_0xa2263a['id']===_0x295ef7);if(!_0x4d4ab3||!Array['isArray'](_0x4d4ab3[_0x4d9998(0x1469)]))return'';const _0x5c56b8=_0x4d4ab3[_0x4d9998(0x1469)]['map'](_0x9cbcf6=>{const _0x28fbe7=_0x4d9998;let _0x378b00=_0x28fbe7(0x13b0)+(_0x9cbcf6[_0x28fbe7(0x7ab)]||_0x28fbe7(0x13e2))+'\x0a';return _0x9cbcf6[_0x28fbe7(0x1204)][_0x28fbe7(0xac0)]>0x0&&(_0x378b00+=_0x28fbe7(0x145a)+_0x9cbcf6[_0x28fbe7(0x1204)][_0x28fbe7(0xcc2)](',\x20')+'\x0a'),_0x378b00+='**内容:**\x0a'+_0x9cbcf6['content'],_0x378b00;})[_0x4d9998(0xcc2)]('\x0a');return _0x5c56b8?'\x0a\x0a##\x20世界书:\x20'+_0x4d4ab3[_0x4d9998(0x1023)]+'\x0a'+_0x5c56b8:'';})[_0x55bc7f(0xde7)](Boolean)['join']('');_0x49abc5&&(_0x49a60='\x0a\x0a#\x20核心世界观设定\x20(必须严格遵守以下所有设定)\x0a'+_0x49abc5+'\x0a');}const _0x2fd7ba=_0x55bc7f(0xda0)+_0x282368[_0x55bc7f(0x1023)]+_0x55bc7f(0xa3e)+_0x282368[_0x55bc7f(0x12d7)][_0x55bc7f(0x200)]+_0x55bc7f(0x97c)+_0x49a60+_0x55bc7f(0x2b3)+_0x1e0210+_0x55bc7f(0x145c);try{const _0x223893=[{'role':_0x55bc7f(0x1417),'content':_0x2fd7ba},{'role':'user','content':_0x55bc7f(0x1254)}];let _0x5f42b4=_0x58a42d===GEMINI_API_URL,_0x34789e=_0x1e2f27(_0x13ba67,_0x5d6118,_0x2fd7ba,_0x223893);const _0x438c83=_0x5f42b4?await fetch(_0x34789e[_0x55bc7f(0x3f5)],_0x34789e['data']):await fetch(_0x58a42d+_0x55bc7f(0x1011),{'method':_0x55bc7f(0xb67),'headers':{'Content-Type':_0x55bc7f(0x4b5),'Authorization':_0x55bc7f(0x681)+_0x5d6118},'body':JSON['stringify']({'model':_0x13ba67,'messages':_0x223893,'temperature':_0x8f0871[_0x55bc7f(0x7b0)]['apiTemperature']||0.9})});if(!_0x438c83['ok']){const _0x1b589e=await _0x438c83['json']();throw new Error(_0x55bc7f(0x1053)+_0x438c83[_0x55bc7f(0x103e)]+'\x20-\x20'+_0x1b589e['error'][_0x55bc7f(0x790)]);}const _0x5830c4=await _0x438c83[_0x55bc7f(0xa2e)]();let _0xb88d00=_0x5f42b4?_0x5830c4[_0x55bc7f(0xa1b)][0x0][_0x55bc7f(0x1469)]['parts'][0x0][_0x55bc7f(0xda3)]:_0x5830c4['choices'][0x0]['message'][_0x55bc7f(0x1469)];_0xb88d00=_0xb88d00[_0x55bc7f(0x128a)](/^```json\s*/,'')[_0x55bc7f(0x128a)](/```$/,'');const _0x137b08=_0xb88d00[_0x55bc7f(0xa06)](),_0x908e30=JSON[_0x55bc7f(0x4a0)](_0x137b08);_0x908e30[_0x55bc7f(0x8d6)]===_0x55bc7f(0x745)&&_0x908e30[_0x55bc7f(0x988)]?(_0x282368[_0x55bc7f(0x1171)][_0x55bc7f(0x103e)]=_0x55bc7f(0x1107),_0x282368[_0x55bc7f(0x1171)][_0x55bc7f(0x1163)]=_0x908e30[_0x55bc7f(0x988)],_0x8f0871[_0x55bc7f(0x1260)][_0x19cce2]=_0x282368,_0x2d75fb(),await _0x4abd86(_0x55bc7f(0x333),'“'+_0x282368[_0x55bc7f(0x1023)]+_0x55bc7f(0x138f))):(await _0x4abd86('AI决策','“'+_0x282368[_0x55bc7f(0x1023)]+_0x55bc7f(0x27d)),_0x282368[_0x55bc7f(0x1171)]['status']=_0x55bc7f(0x1217),_0x282368[_0x55bc7f(0x1171)][_0x55bc7f(0x334)]=Date[_0x55bc7f(0xc22)]());}catch(_0x2b841b){await _0x4abd86(_0x55bc7f(0xa23),'为“'+_0x282368[_0x55bc7f(0x1023)]+_0x55bc7f(0x1136)+_0x2b841b[_0x55bc7f(0x790)]+_0x55bc7f(0xf9a)),_0x282368[_0x55bc7f(0x1171)][_0x55bc7f(0x103e)]=_0x55bc7f(0x1217),_0x282368['relationship'][_0x55bc7f(0x334)]=Date[_0x55bc7f(0xc22)]();}finally{await _0x372b85['chats'][_0x55bc7f(0x11d5)](_0x282368),_0x54d32b(_0x19cce2);}}function _0x4744a3(){const _0x26de33=_0x7c5117;if(!_0x8f0871[_0x26de33(0xac8)])return;const _0x1e204f=_0x8f0871[_0x26de33(0x1260)][_0x8f0871[_0x26de33(0xac8)]];_0x1e204f[_0x26de33(0x1364)]?_0x151f34():document[_0x26de33(0xfa0)]('transfer-modal')[_0x26de33(0x128f)]['add']('visible');}function _0x151f34(){const _0x2a7270=_0x7c5117,_0x4fd691=document[_0x2a7270(0xfa0)](_0x2a7270(0x11dc)),_0xba5a90=_0x8f0871[_0x2a7270(0x1260)][_0x8f0871[_0x2a7270(0xac8)]];document[_0x2a7270(0xfa0)](_0x2a7270(0x1404))[_0x2a7270(0x4f6)]='',document[_0x2a7270(0xfa0)](_0x2a7270(0x732))[_0x2a7270(0x4f6)]='',document[_0x2a7270(0xfa0)](_0x2a7270(0xb07))[_0x2a7270(0x4f6)]='',document[_0x2a7270(0xfa0)](_0x2a7270(0xa90))[_0x2a7270(0x4f6)]='',document[_0x2a7270(0xfa0)](_0x2a7270(0x14e8))[_0x2a7270(0x4f6)]='',document[_0x2a7270(0xfa0)](_0x2a7270(0x5e7))[_0x2a7270(0xc62)]='¥\x200.00',document['getElementById'](_0x2a7270(0xf36))['textContent']=_0x2a7270(0xe8e);const _0x525839=document[_0x2a7270(0xfa0)]('rp-direct-receiver');_0x525839[_0x2a7270(0x1331)]='',_0xba5a90['members'][_0x2a7270(0x458)](_0x15f30b=>{const _0x2244fb=_0x2a7270,_0x26a3c9=document[_0x2244fb(0xb4e)](_0x2244fb(0x327));_0x26a3c9[_0x2244fb(0x4f6)]=_0x15f30b['originalName'],_0x26a3c9[_0x2244fb(0xc62)]=_0x15f30b[_0x2244fb(0x5c9)],_0x525839[_0x2244fb(0x1155)](_0x26a3c9);}),document[_0x2a7270(0xfa0)]('rp-tab-group')[_0x2a7270(0xb4a)](),_0x4fd691['classList'][_0x2a7270(0x1327)](_0x2a7270(0xdcc));}async function _0x57a958(){const _0x6d1c69=_0x7c5117,_0x17fc3c=_0x8f0871[_0x6d1c69(0x1260)][_0x8f0871['activeChatId']],_0x57d7ba=parseFloat(document[_0x6d1c69(0xfa0)]('rp-group-amount')[_0x6d1c69(0x4f6)]),_0x24732b=parseInt(document[_0x6d1c69(0xfa0)]('rp-group-count')[_0x6d1c69(0x4f6)]),_0x4acae1=document['getElementById']('rp-group-greeting')[_0x6d1c69(0x4f6)]['trim']();if(isNaN(_0x57d7ba)||_0x57d7ba<=0x0){alert('请输入有效的总金额！');return;}if(isNaN(_0x24732b)||_0x24732b<=0x0){alert(_0x6d1c69(0xf72));return;}if(_0x57d7ba/_0x24732b<0.01){alert(_0x6d1c69(0x45c));return;}const _0x4be63c=_0x17fc3c['settings'][_0x6d1c69(0xda5)]||'我',_0x418592={'role':_0x6d1c69(0xcb0),'senderName':_0x4be63c,'type':_0x6d1c69(0x148b),'packetType':'lucky','timestamp':Date[_0x6d1c69(0xc22)](),'totalAmount':_0x57d7ba,'count':_0x24732b,'greeting':_0x4acae1||_0x6d1c69(0x1240),'claimedBy':{},'isFullyClaimed':![]};_0x17fc3c[_0x6d1c69(0xc88)][_0x6d1c69(0x481)](_0x418592),await _0x372b85['chats'][_0x6d1c69(0x11d5)](_0x17fc3c),_0x25d29f(_0x418592,_0x17fc3c),_0x2d75fb(),document[_0x6d1c69(0xfa0)]('red-packet-modal')['classList'][_0x6d1c69(0x443)]('visible');}async function _0x453b3f(){const _0xab64c7=_0x7c5117,_0x384965=_0x8f0871['chats'][_0x8f0871['activeChatId']],_0x3af8dd=parseFloat(document[_0xab64c7(0xfa0)]('rp-direct-amount')[_0xab64c7(0x4f6)]),_0x4d9c33=document[_0xab64c7(0xfa0)]('rp-direct-receiver')[_0xab64c7(0x4f6)],_0x328c96=document[_0xab64c7(0xfa0)](_0xab64c7(0x14e8))[_0xab64c7(0x4f6)]['trim']();if(isNaN(_0x3af8dd)||_0x3af8dd<=0x0){alert(_0xab64c7(0xaf2));return;}if(!_0x4d9c33){alert('请选择一个接收人！');return;}const _0x1cd745=_0x384965[_0xab64c7(0x12d7)][_0xab64c7(0xda5)]||'我',_0x3924cb={'role':_0xab64c7(0xcb0),'senderName':_0x1cd745,'type':_0xab64c7(0x148b),'packetType':'direct','timestamp':Date['now'](),'totalAmount':_0x3af8dd,'count':0x1,'greeting':_0x328c96||_0xab64c7(0x3c7),'receiverName':_0x4d9c33,'claimedBy':{},'isFullyClaimed':![]};_0x384965[_0xab64c7(0xc88)][_0xab64c7(0x481)](_0x3924cb),await _0x372b85[_0xab64c7(0x1260)]['put'](_0x384965),_0x25d29f(_0x3924cb,_0x384965),_0x2d75fb(),document['getElementById'](_0xab64c7(0x11dc))[_0xab64c7(0x128f)][_0xab64c7(0x443)](_0xab64c7(0xdcc));}async function _0x5d3546(_0x590623){const _0x402993=_0x7c5117,_0x3e3e38=_0x8f0871['activeChatId'],_0x2a6a0c=await _0x372b85[_0x402993(0x1260)][_0x402993(0x70d)](_0x3e3e38);if(!_0x2a6a0c)return;_0x8f0871[_0x402993(0x1260)][_0x3e3e38]=_0x2a6a0c;const _0x306991=_0x2a6a0c['history'][_0x402993(0x7ed)](_0x56fbd5=>_0x56fbd5[_0x402993(0xe55)]===_0x590623);if(!_0x306991)return;const _0x22003f=_0x8f0871[_0x402993(0x9dd)][_0x402993(0xff8)]||_0x402993(0x8d4),_0x1595bb=_0x306991['claimedBy']&&_0x306991[_0x402993(0xe57)][_0x22003f];if(_0x306991[_0x402993(0xef9)]===_0x402993(0xaf3)&&_0x306991[_0x402993(0xe0f)]!==_0x22003f&&Object[_0x402993(0x1204)](_0x306991[_0x402993(0xe57)])[_0x402993(0xac0)]>0x0||_0x306991[_0x402993(0xc71)]||_0x1595bb){_0xd1aa1(_0x306991);return;}const _0xdfd2dd=await _0x140faa(_0x306991);_0xdfd2dd!==null&&(await _0x54d32b(_0x3e3e38),await _0x4abd86('恭喜！',_0x402993(0x5bf)+_0x185e1d(_0x2a6a0c,_0x306991[_0x402993(0x213)])+_0x402993(0xf1d)+_0xdfd2dd['toFixed'](0x2)+_0x402993(0x241)));const _0x415dad=_0x8f0871[_0x402993(0x1260)][_0x3e3e38][_0x402993(0xc88)][_0x402993(0x7ed)](_0x53d15d=>_0x53d15d[_0x402993(0xe55)]===_0x590623);_0x415dad&&_0xd1aa1(_0x415dad);}async function _0x140faa(_0x5dd56b){const _0x503652=_0x7c5117,_0x3d062a=_0x8f0871[_0x503652(0x1260)][_0x8f0871['activeChatId']];let _0x1326ff=Date['now']();const _0x5295a6=_0x8f0871[_0x503652(0x9dd)]['nickname']||'{{user}}',_0x59fdde=_0x5dd56b['count']-Object[_0x503652(0x1204)](_0x5dd56b[_0x503652(0xe57)]||{})[_0x503652(0xac0)];if(_0x59fdde<=0x0)return _0x5dd56b[_0x503652(0xc71)]=!![],await _0x372b85['chats'][_0x503652(0x11d5)](_0x3d062a),await _0x4abd86('手慢了',_0x503652(0xf49)),null;let _0x587beb=0x0;const _0x816c85=_0x5dd56b[_0x503652(0x4df)]-Object[_0x503652(0x142f)](_0x5dd56b['claimedBy']||{})[_0x503652(0xd68)]((_0x43398d,_0x3ab1bd)=>_0x43398d+_0x3ab1bd,0x0);if(_0x5dd56b[_0x503652(0xef9)]===_0x503652(0x730)){if(_0x59fdde===0x1)_0x587beb=_0x816c85;else{const _0x55d8da=0.01,_0x2bd07e=_0x816c85-(_0x59fdde-0x1)*_0x55d8da;_0x587beb=Math[_0x503652(0x148a)]()*(_0x2bd07e-_0x55d8da)+_0x55d8da;}}else _0x587beb=_0x5dd56b[_0x503652(0x4df)];_0x587beb=parseFloat(_0x587beb[_0x503652(0x3b8)](0x2));if(!_0x5dd56b[_0x503652(0xe57)])_0x5dd56b[_0x503652(0xe57)]={};_0x5dd56b[_0x503652(0xe57)][_0x5295a6]=_0x587beb;const _0x2c3e84=Object[_0x503652(0x1204)](_0x5dd56b[_0x503652(0xe57)])['length']>=_0x5dd56b[_0x503652(0x1383)];_0x2c3e84&&(_0x5dd56b[_0x503652(0xc71)]=!![]);const _0x4b687f=_0x185e1d(_0x3d062a,_0x5295a6),_0x22b0a1=_0x185e1d(_0x3d062a,_0x5dd56b[_0x503652(0x213)]),_0x1b15fa={'role':_0x503652(0x1417),'type':'pat_message','content':_0x503652(0x5bf)+_0x22b0a1+_0x503652(0xdbe),'timestamp':_0x1326ff++};_0x3d062a[_0x503652(0xc88)][_0x503652(0x481)](_0x1b15fa);let _0x4afa55;if(_0x2c3e84){const _0x37e1cd={'role':'system','type':_0x503652(0x260),'content':_0x22b0a1+_0x503652(0xda7),'timestamp':_0x1326ff++};_0x3d062a[_0x503652(0xc88)][_0x503652(0x481)](_0x37e1cd);let _0x3955c3={'name':'','amount':-0x1};_0x5dd56b[_0x503652(0xef9)]===_0x503652(0x730)&&_0x5dd56b[_0x503652(0x1383)]>0x1&&Object[_0x503652(0x545)](_0x5dd56b[_0x503652(0xe57)])[_0x503652(0x458)](([_0x1ad2e8,_0x357a3f])=>{const _0x2dd766=_0x503652;_0x357a3f>_0x3955c3[_0x2dd766(0x4a8)]&&(_0x3955c3={'name':_0x1ad2e8,'amount':_0x357a3f});});const _0x38143f=_0x3955c3[_0x503652(0x1023)]?_0x185e1d(_0x3d062a,_0x3955c3[_0x503652(0x1023)]):'无';_0x4afa55=_0x503652(0x816)+_0x4b687f+_0x503652(0x243)+_0x38143f+_0x503652(0x3dc);}else _0x4afa55='[系统提示：用户\x20('+_0x4b687f+')\x20刚刚领取了红包\x20(时间戳:\x20'+_0x5dd56b[_0x503652(0xe55)]+_0x503652(0xdd5);const _0x11cf7b={'role':_0x503652(0x1417),'content':_0x4afa55,'timestamp':_0x1326ff++,'isHidden':!![]};return _0x3d062a[_0x503652(0xc88)][_0x503652(0x481)](_0x11cf7b),await _0x372b85['chats'][_0x503652(0x11d5)](_0x3d062a),_0x587beb;}async function _0xd1aa1(_0x236bb8){const _0x592f8a=_0x7c5117;if(!_0x236bb8){console[_0x592f8a(0x52b)](_0x592f8a(0x12d4));return;}const _0x121d42=_0x8f0871['chats'][_0x8f0871[_0x592f8a(0xac8)]];if(!_0x121d42)return;const _0x5c2bb3=document[_0x592f8a(0xfa0)](_0x592f8a(0x542)),_0x322952=_0x8f0871['qzoneSettings'][_0x592f8a(0xff8)]||'{{user}}',_0x2e3c1f=_0x185e1d(_0x121d42,_0x236bb8['senderName']);document[_0x592f8a(0xfa0)](_0x592f8a(0xb74))[_0x592f8a(0xc62)]=_0x2e3c1f,document['getElementById'](_0x592f8a(0xb15))[_0x592f8a(0xc62)]=_0x236bb8[_0x592f8a(0x367)]||'恭喜发财，大吉大利！';const _0x10e53c=document[_0x592f8a(0xfa0)]('rp-details-my-amount');_0x236bb8[_0x592f8a(0xe57)]&&_0x236bb8[_0x592f8a(0xe57)][_0x322952]?(_0x10e53c[_0x592f8a(0xfb1)]('span:first-child')['textContent']=_0x236bb8[_0x592f8a(0xe57)][_0x322952][_0x592f8a(0x3b8)](0x2),_0x10e53c[_0x592f8a(0x63b)][_0x592f8a(0x1248)]='block'):_0x10e53c['style'][_0x592f8a(0x1248)]='none';const _0x987659=Object[_0x592f8a(0x1204)](_0x236bb8[_0x592f8a(0xe57)]||{})[_0x592f8a(0xac0)],_0x61a710=Object[_0x592f8a(0x142f)](_0x236bb8[_0x592f8a(0xe57)]||{})['reduce']((_0x152faa,_0x2cea40)=>_0x152faa+_0x2cea40,0x0);let _0x32b106=_0x987659+'/'+_0x236bb8[_0x592f8a(0x1383)]+_0x592f8a(0xb24)+_0x61a710[_0x592f8a(0x3b8)](0x2)+'/'+_0x236bb8[_0x592f8a(0x4df)]['toFixed'](0x2)+'元。';if(!_0x236bb8[_0x592f8a(0xc71)]&&_0x987659<_0x236bb8['count']){const _0x55847a=Math[_0x592f8a(0x13e5)]((_0x236bb8['timestamp']+0x18*0x3c*0x3c*0x3e8-Date[_0x592f8a(0xc22)]())/(0x3e8*0x3c*0x3c));if(_0x55847a>0x0)_0x32b106+=_0x592f8a(0x1082)+_0x55847a+_0x592f8a(0xc0c);}document['getElementById']('rp-details-summary')[_0x592f8a(0xc62)]=_0x32b106;const _0x2c59e8=document[_0x592f8a(0xfa0)](_0x592f8a(0x339));_0x2c59e8['innerHTML']='';const _0x58d824=Object[_0x592f8a(0x545)](_0x236bb8['claimedBy']||{});let _0x3e9a11={'name':'','amount':-0x1};_0x236bb8['packetType']==='lucky'&&_0x236bb8['isFullyClaimed']&&_0x58d824[_0x592f8a(0xac0)]>0x1&&_0x58d824[_0x592f8a(0x458)](([_0x187790,_0x2a3765])=>{_0x2a3765>_0x3e9a11['amount']&&(_0x3e9a11={'name':_0x187790,'amount':_0x2a3765});}),_0x58d824[_0x592f8a(0x1376)]((_0x201a3e,_0x609f50)=>_0x609f50[0x1]-_0x201a3e[0x1]),_0x58d824[_0x592f8a(0x458)](([_0x221aa4,_0x924549])=>{const _0x5c2e40=_0x592f8a,_0x9cf6da=document[_0x5c2e40(0xb4e)](_0x5c2e40(0xd53));_0x9cf6da[_0x5c2e40(0x1287)]='rp-details-item';let _0x445ad6='';_0x3e9a11[_0x5c2e40(0x1023)]&&_0x221aa4===_0x3e9a11[_0x5c2e40(0x1023)]&&(_0x445ad6='<span\x20class=\x22lucky-king-tag\x22>手气王</span>');const _0x2b4bd1=_0x185e1d(_0x121d42,_0x221aa4);_0x9cf6da['innerHTML']=_0x5c2e40(0xf24)+_0x2b4bd1+_0x5c2e40(0x1283)+_0x924549[_0x5c2e40(0x3b8)](0x2)+'\x20元</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x445ad6+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2c59e8['appendChild'](_0x9cf6da);}),_0x5c2bb3['classList'][_0x592f8a(0x1327)](_0x592f8a(0xdcc));}document[_0x7c5117(0xfa0)](_0x7c5117(0x642))['addEventListener'](_0x7c5117(0xb4a),()=>{const _0x3a894d=_0x7c5117;document['getElementById'](_0x3a894d(0x542))['classList'][_0x3a894d(0x443)](_0x3a894d(0xdcc));}),window[_0x7c5117(0xe9e)]=_0x5d3546;function _0x3c856b(){const _0x2fcf9d=_0x7c5117,_0xf65f11=document['getElementById'](_0x2fcf9d(0xfce));document[_0x2fcf9d(0xfa0)](_0x2fcf9d(0x710))[_0x2fcf9d(0x4f6)]='';const _0x3c1298=document[_0x2fcf9d(0xfa0)]('poll-options-container');_0x3c1298['innerHTML']='',_0x1c9700(),_0x1c9700(),_0xf65f11[_0x2fcf9d(0x128f)][_0x2fcf9d(0x1327)](_0x2fcf9d(0xdcc));}function _0x1c9700(){const _0x34fcf0=_0x7c5117,_0x477923=document[_0x34fcf0(0xfa0)](_0x34fcf0(0x5a5)),_0x184d5c=document[_0x34fcf0(0xb4e)](_0x34fcf0(0xd53));_0x184d5c[_0x34fcf0(0x1287)]=_0x34fcf0(0x6cc),_0x184d5c[_0x34fcf0(0x1331)]=_0x34fcf0(0x3f6),_0x184d5c[_0x34fcf0(0xfb1)](_0x34fcf0(0xeff))[_0x34fcf0(0x7b8)](_0x34fcf0(0xb4a),()=>{const _0x491f30=_0x34fcf0;_0x477923[_0x491f30(0x360)][_0x491f30(0xac0)]>0x2?_0x184d5c['remove']():alert('投票至少需要2个选项。');}),_0x477923[_0x34fcf0(0x1155)](_0x184d5c);}async function _0x542332(){const _0x49fc5e=_0x7c5117;if(!_0x8f0871[_0x49fc5e(0xac8)])return;const _0x1da76c=document[_0x49fc5e(0xfa0)](_0x49fc5e(0x710))[_0x49fc5e(0x4f6)]['trim']();if(!_0x1da76c){alert(_0x49fc5e(0x278));return;}const _0x528351=Array[_0x49fc5e(0x3aa)](document[_0x49fc5e(0x2a1)](_0x49fc5e(0x4db)))[_0x49fc5e(0x556)](_0x3c416a=>_0x3c416a[_0x49fc5e(0x4f6)]['trim']())[_0x49fc5e(0xde7)](_0xa60f6f=>_0xa60f6f);if(_0x528351['length']<0x2){alert('请至少输入2个有效的投票选项！');return;}const _0x50cf0e=_0x8f0871[_0x49fc5e(0x1260)][_0x8f0871['activeChatId']],_0x379c7e=_0x50cf0e[_0x49fc5e(0x1364)]?_0x50cf0e[_0x49fc5e(0x12d7)][_0x49fc5e(0xda5)]||'我':'我',_0x214f2f={'role':_0x49fc5e(0xcb0),'senderName':_0x379c7e,'type':'poll','timestamp':Date[_0x49fc5e(0xc22)](),'question':_0x1da76c,'options':_0x528351,'votes':{},'isClosed':![]};_0x50cf0e[_0x49fc5e(0xc88)][_0x49fc5e(0x481)](_0x214f2f),await _0x372b85[_0x49fc5e(0x1260)]['put'](_0x50cf0e),_0x25d29f(_0x214f2f,_0x50cf0e),_0x2d75fb(),document[_0x49fc5e(0xfa0)](_0x49fc5e(0xfce))[_0x49fc5e(0x128f)][_0x49fc5e(0x443)]('visible');}async function _0x12d40b(_0x380c04,_0x5c32f0){const _0x9fb20a=_0x7c5117,_0x14a260=_0x8f0871[_0x9fb20a(0x1260)][_0x8f0871[_0x9fb20a(0xac8)]],_0x231ecc=_0x14a260['history']['find'](_0xbce07=>_0xbce07[_0x9fb20a(0xe55)]===_0x380c04),_0x46d6b5=_0x14a260[_0x9fb20a(0x1364)]?_0x14a260[_0x9fb20a(0x12d7)][_0x9fb20a(0xda5)]||'我':'我';if(!_0x231ecc||_0x231ecc[_0x9fb20a(0x10df)]){_0x231ecc&&_0x231ecc[_0x9fb20a(0x10df)]&&_0x5449d1(_0x380c04);return;}const _0x3a2ce6=_0x231ecc[_0x9fb20a(0xb61)][_0x5c32f0]&&_0x231ecc[_0x9fb20a(0xb61)][_0x5c32f0][_0x9fb20a(0xf95)](_0x46d6b5);if(!_0x3a2ce6){for(const _0x2b64c0 in _0x231ecc[_0x9fb20a(0xb61)]){const _0xfd601c=_0x231ecc[_0x9fb20a(0xb61)][_0x2b64c0][_0x9fb20a(0xdf3)](_0x46d6b5);_0xfd601c>-0x1&&_0x231ecc[_0x9fb20a(0xb61)][_0x2b64c0][_0x9fb20a(0x11ac)](_0xfd601c,0x1);}!_0x231ecc[_0x9fb20a(0xb61)][_0x5c32f0]&&(_0x231ecc['votes'][_0x5c32f0]=[]),_0x231ecc['votes'][_0x5c32f0]['push'](_0x46d6b5);}let _0x5064c6=null;!_0x3a2ce6&&(_0x5064c6=_0x9fb20a(0x816)+_0x46d6b5+')\x20刚刚投票给了\x20“'+_0x5c32f0+_0x9fb20a(0x6da));if(_0x5064c6){const _0x54d827={'role':'system','content':_0x5064c6,'timestamp':Date[_0x9fb20a(0xc22)](),'isHidden':!![]};_0x14a260[_0x9fb20a(0xc88)][_0x9fb20a(0x481)](_0x54d827);}await _0x372b85['chats'][_0x9fb20a(0x11d5)](_0x14a260),_0x54d32b(_0x8f0871[_0x9fb20a(0xac8)]);}async function _0x25e072(_0x6d9141){const _0x555d99=_0x7c5117,_0x2e40eb=_0x8f0871[_0x555d99(0x1260)][_0x8f0871[_0x555d99(0xac8)]],_0x5b33e1=_0x2e40eb[_0x555d99(0xc88)]['find'](_0x2609c0=>_0x2609c0[_0x555d99(0xe55)]===_0x6d9141);if(!_0x5b33e1||_0x5b33e1[_0x555d99(0x10df)])return;const _0x59b906=await _0x3f65ed(_0x555d99(0x4e0),_0x555d99(0x14da));if(_0x59b906){_0x5b33e1['isClosed']=!![];const _0x2b4782=_0x5b33e1[_0x555d99(0x1106)][_0x555d99(0x556)](_0x11d89c=>'“'+_0x11d89c+'”('+(_0x5b33e1[_0x555d99(0xb61)][_0x11d89c]?.[_0x555d99(0xac0)]||0x0)+'票)')[_0x555d99(0xcc2)]('，'),_0x4bc261=_0x555d99(0xda1)+_0x2b4782+'。]',_0x30f544={'role':_0x555d99(0x1417),'content':_0x4bc261,'timestamp':Date[_0x555d99(0xc22)](),'isHidden':!![]};_0x2e40eb[_0x555d99(0xc88)][_0x555d99(0x481)](_0x30f544),await _0x372b85[_0x555d99(0x1260)][_0x555d99(0x11d5)](_0x2e40eb),_0x54d32b(_0x8f0871['activeChatId']);}}function _0x5449d1(_0x1c941d){const _0x45681f=_0x7c5117,_0x197ce8=_0x8f0871['chats'][_0x8f0871['activeChatId']],_0x26b7e4=_0x197ce8[_0x45681f(0xc88)][_0x45681f(0x7ed)](_0x4361ac=>_0x4361ac[_0x45681f(0xe55)]===_0x1c941d);if(!_0x26b7e4||!_0x26b7e4[_0x45681f(0x10df)])return;let _0xe8582b=_0x45681f(0x123c)+_0x26b7e4[_0x45681f(0xc39)]+'</strong></p><hr\x20style=\x22opacity:\x200.2;\x20margin:\x2010px\x200;\x22>';Object[_0x45681f(0x1204)](_0x26b7e4[_0x45681f(0xb61)])['length']===0x0?_0xe8582b+=_0x45681f(0x13dc):_0x26b7e4[_0x45681f(0x1106)]['forEach'](_0x2b8f50=>{const _0x11809c=_0x45681f,_0x47757b=_0x26b7e4[_0x11809c(0xb61)][_0x2b8f50]||[],_0x44be01=_0x47757b[_0x11809c(0x556)](_0x373aa5=>_0x185e1d(_0x197ce8,_0x373aa5))[_0x11809c(0xcc2)]('、\x20');_0xe8582b+=_0x11809c(0x1d4)+_0x2b8f50+'\x20('+_0x47757b[_0x11809c(0xac0)]+_0x11809c(0x63a)+(_0x47757b[_0x11809c(0xac0)]>0x0?_0x44be01:'无人投票')+_0x11809c(0xdfd);}),_0x4abd86('投票结果',_0xe8582b);}function _0x4f0778(){const _0x3872dc=_0x7c5117;if(!_0x8f0871[_0x3872dc(0xac8)])return;const _0x17cfd0=_0x8f0871[_0x3872dc(0x1260)][_0x8f0871[_0x3872dc(0xac8)]];document[_0x3872dc(0xfa0)](_0x3872dc(0xd00))[_0x3872dc(0xc62)]='“'+_0x17cfd0[_0x3872dc(0x1023)]+_0x3872dc(0x47c),_0x51f6c4(),document[_0x3872dc(0xfa0)](_0x3872dc(0xf6f))[_0x3872dc(0x128f)][_0x3872dc(0x1327)](_0x3872dc(0xdcc));}function _0x51f6c4(){const _0xc0071c=_0x7c5117,_0x3f0ccb=document['getElementById'](_0xc0071c(0x1cf));_0x3f0ccb['innerHTML']='';const _0x2248f2=_0x8f0871['chats'][_0x8f0871['activeChatId']],_0x5cc01b=_0x2248f2[_0xc0071c(0x12d7)][_0xc0071c(0x1576)]||[];if(_0x5cc01b[_0xc0071c(0xac0)]===0x0){_0x3f0ccb[_0xc0071c(0x1331)]='<p\x20style=\x22color:\x20var(--text-secondary);\x20grid-column:\x201\x20/\x20-1;\x20text-align:\x20center;\x22>这个头像库还是空的，点击右上角“添加”吧！</p>';return;}_0x5cc01b[_0xc0071c(0x458)]((_0x5d32b1,_0x2512fa)=>{const _0x1b7f63=_0xc0071c,_0x1e6848=document[_0x1b7f63(0xb4e)](_0x1b7f63(0xd53));_0x1e6848[_0x1b7f63(0x1287)]=_0x1b7f63(0x71b),_0x1e6848['title']=_0x5d32b1['name'],_0x1e6848[_0x1b7f63(0x1331)]=_0x1b7f63(0x365)+_0x5d32b1[_0x1b7f63(0x3f5)]+_0x1b7f63(0xdfc)+_0x5d32b1[_0x1b7f63(0x1023)]+_0x1b7f63(0x616);const _0x49b48c=document[_0x1b7f63(0xb4e)](_0x1b7f63(0xd53));_0x49b48c[_0x1b7f63(0x1287)]=_0x1b7f63(0x254),_0x49b48c[_0x1b7f63(0x1331)]='×',_0x49b48c[_0x1b7f63(0x63b)]['display']=_0x1b7f63(0x127c),_0x49b48c[_0x1b7f63(0x9f0)]=async _0x140c05=>{const _0x97e48a=_0x1b7f63;_0x140c05[_0x97e48a(0x21b)]();const _0x203b26=await _0x3f65ed(_0x97e48a(0x1065),'确定要从头像库中删除“'+_0x5d32b1['name']+_0x97e48a(0x94a),{'confirmButtonClass':_0x97e48a(0x611)});_0x203b26&&(_0x2248f2[_0x97e48a(0x12d7)][_0x97e48a(0x1576)][_0x97e48a(0x11ac)](_0x2512fa,0x1),await _0x372b85[_0x97e48a(0x1260)][_0x97e48a(0x11d5)](_0x2248f2),_0x51f6c4());},_0x1e6848[_0x1b7f63(0x1155)](_0x49b48c),_0x3f0ccb[_0x1b7f63(0x1155)](_0x1e6848);});}async function _0x12c2a0(){const _0x102269=_0x7c5117,_0x27145e=await _0x131a69(_0x102269(0x1102),_0x102269(0x14a4));if(!_0x27145e||!_0x27145e[_0x102269(0xa06)]())return;const _0x3bf05f=await _0x131a69(_0x102269(0x1102),'请输入头像的图片URL','',_0x102269(0x3f5));if(!_0x3bf05f||!_0x3bf05f['trim']()[_0x102269(0x9b8)](_0x102269(0xce7))){alert(_0x102269(0x1239));return;}const _0x4d55be=_0x8f0871['chats'][_0x8f0871['activeChatId']];!_0x4d55be[_0x102269(0x12d7)][_0x102269(0x1576)]&&(_0x4d55be[_0x102269(0x12d7)]['aiAvatarLibrary']=[]),_0x4d55be[_0x102269(0x12d7)][_0x102269(0x1576)]['push']({'name':_0x27145e[_0x102269(0xa06)](),'url':_0x3bf05f['trim']()}),await _0x372b85[_0x102269(0x1260)][_0x102269(0x11d5)](_0x4d55be),_0x51f6c4();}function _0x3e9149(){const _0x39d7d7=_0x7c5117;document[_0x39d7d7(0xfa0)]('ai-avatar-library-modal')[_0x39d7d7(0x128f)][_0x39d7d7(0x443)](_0x39d7d7(0xdcc));}function _0x2afe30(){const _0x54e588=_0x7c5117;if(!_0x8f0871[_0x54e588(0xac8)])return;const _0x3cb9c1=_0x8f0871[_0x54e588(0x1260)][_0x8f0871[_0x54e588(0xac8)]];document[_0x54e588(0xfa0)](_0x54e588(0x120d))[_0x54e588(0xc62)]='“'+(_0x3cb9c1[_0x54e588(0x12d7)][_0x54e588(0xda5)]||'我')+_0x54e588(0x47c),_0x3e436f(),document[_0x54e588(0xfa0)](_0x54e588(0x3b6))[_0x54e588(0x128f)][_0x54e588(0x1327)]('visible');}function _0x3e436f(){const _0x8ea789=_0x7c5117,_0x2b550c=document[_0x8ea789(0xfa0)]('my-avatar-library-grid');_0x2b550c['innerHTML']='';const _0x25fb45=_0x8f0871[_0x8ea789(0x1260)][_0x8f0871[_0x8ea789(0xac8)]],_0x5f3d68=_0x25fb45[_0x8ea789(0x12d7)]['myAvatarLibrary']||[];if(_0x5f3d68[_0x8ea789(0xac0)]===0x0){_0x2b550c[_0x8ea789(0x1331)]=_0x8ea789(0x1271);return;}_0x5f3d68['forEach']((_0x1428b2,_0x2925c7)=>{const _0x7a0e17=_0x8ea789,_0x35b7c3=document['createElement'](_0x7a0e17(0xd53));_0x35b7c3[_0x7a0e17(0x1287)]=_0x7a0e17(0x71b),_0x35b7c3[_0x7a0e17(0x1187)]=_0x1428b2[_0x7a0e17(0x1023)],_0x35b7c3['innerHTML']=_0x7a0e17(0x365)+_0x1428b2['url']+_0x7a0e17(0xdfc)+_0x1428b2[_0x7a0e17(0x1023)]+_0x7a0e17(0x616);const _0x5d6820=document[_0x7a0e17(0xb4e)](_0x7a0e17(0xd53));_0x5d6820[_0x7a0e17(0x1287)]='delete-btn',_0x5d6820[_0x7a0e17(0x1331)]='×',_0x5d6820[_0x7a0e17(0x63b)][_0x7a0e17(0x1248)]=_0x7a0e17(0x127c),_0x5d6820['onclick']=async _0x25c3ba=>{const _0x113bcf=_0x7a0e17;_0x25c3ba[_0x113bcf(0x21b)]();const _0xe54872=await _0x3f65ed('删除头像',_0x113bcf(0xf3f)+_0x1428b2[_0x113bcf(0x1023)]+'”吗？',{'confirmButtonClass':_0x113bcf(0x611)});_0xe54872&&(_0x25fb45['settings'][_0x113bcf(0x3a6)]['splice'](_0x2925c7,0x1),await _0x372b85[_0x113bcf(0x1260)]['put'](_0x25fb45),_0x3e436f());},_0x35b7c3[_0x7a0e17(0x1155)](_0x5d6820),_0x2b550c[_0x7a0e17(0x1155)](_0x35b7c3);});}async function _0x2dd575(){const _0x413e08=_0x7c5117,_0x1bd105=await _0x131a69(_0x413e08(0x1102),_0x413e08(0x14a4));if(!_0x1bd105||!_0x1bd105[_0x413e08(0xa06)]())return;const _0x316190=await _0x131a69(_0x413e08(0x1102),_0x413e08(0x644),'',_0x413e08(0x3f5));if(!_0x316190||!_0x316190[_0x413e08(0xa06)]()[_0x413e08(0x9b8)]('http')){alert(_0x413e08(0x1239));return;}const _0x4b11ca=_0x8f0871[_0x413e08(0x1260)][_0x8f0871['activeChatId']];!_0x4b11ca[_0x413e08(0x12d7)][_0x413e08(0x3a6)]&&(_0x4b11ca['settings'][_0x413e08(0x3a6)]=[]),_0x4b11ca['settings'][_0x413e08(0x3a6)][_0x413e08(0x481)]({'name':_0x1bd105['trim'](),'url':_0x316190[_0x413e08(0xa06)]()}),await _0x372b85[_0x413e08(0x1260)][_0x413e08(0x11d5)](_0x4b11ca),_0x3e436f();}async function _0x2de6a1(_0x56975a){const _0x40ab40=_0x7c5117,_0x10d580=_0x56975a[_0x40ab40(0x10c2)]['files'][0x0];if(!_0x10d580)return;const _0x23e42b=await new Promise(_0x3a6724=>{const _0x4408bb=_0x40ab40,_0x1fdd57=new FileReader();_0x1fdd57[_0x4408bb(0x7c6)]=()=>_0x3a6724(_0x1fdd57['result']),_0x1fdd57['readAsDataURL'](_0x10d580);}),_0x5bc638=await _0x131a69('命名头像','请为这个新头像命名');if(!_0x5bc638||!_0x5bc638[_0x40ab40(0xa06)]())return;const _0x237534=_0x8f0871[_0x40ab40(0x1260)][_0x8f0871[_0x40ab40(0xac8)]];!_0x237534[_0x40ab40(0x12d7)]['myAvatarLibrary']&&(_0x237534['settings']['myAvatarLibrary']=[]),_0x237534[_0x40ab40(0x12d7)]['myAvatarLibrary'][_0x40ab40(0x481)]({'name':_0x5bc638['trim'](),'url':_0x23e42b}),await _0x372b85[_0x40ab40(0x1260)][_0x40ab40(0x11d5)](_0x237534),_0x3e436f(),_0x56975a[_0x40ab40(0x10c2)][_0x40ab40(0x4f6)]=null;}async function _0x225f34(_0x1aed6e){const _0x30c480=_0x7c5117,_0x44ad09=_0x8f0871[_0x30c480(0x1260)][_0x8f0871[_0x30c480(0xac8)]];if(!_0x44ad09)return;const _0x396286=_0x1aed6e[_0x30c480(0xa06)]()['split']('\x0a'),_0x201039=[],_0x3892d1=_0x30c480(0xed4);let _0x3a2fdb=0x0;for(const _0x7079f9 of _0x396286){const _0x40abdb=_0x7079f9['trim']();if(!_0x40abdb||_0x40abdb['includes'](_0x30c480(0xce7))||_0x40abdb['includes']('填入'))continue;let _0x149d69=null,_0x516459=null;const _0x4e203e=_0x40abdb[_0x30c480(0x1232)](/^([\u4e00-\u9fa5]+)([a-zA-Z0-9]+\..+)$/);if(_0x4e203e)_0x149d69=_0x4e203e[0x1],_0x516459=_0x4e203e[0x2];else{const _0x1e87a2=_0x40abdb[_0x30c480(0x505)](/\s+/);_0x1e87a2[_0x30c480(0xac0)]>=0x2&&(_0x516459=_0x1e87a2['pop'](),_0x149d69=_0x1e87a2[_0x30c480(0xcc2)]('\x20'));}_0x149d69&&_0x516459&&_0x516459[_0x30c480(0xf95)]('.')?_0x201039['push']({'name':_0x149d69,'url':_0x3892d1+_0x516459}):_0x3a2fdb++;}if(_0x3a2fdb>0x0)await _0x4abd86('部分导入失败','有\x20'+_0x3a2fdb+_0x30c480(0xd14));if(_0x201039['length']>0x0){if(!_0x44ad09[_0x30c480(0x12d7)][_0x30c480(0x3a6)])_0x44ad09[_0x30c480(0x12d7)]['myAvatarLibrary']=[];_0x44ad09['settings'][_0x30c480(0x3a6)][_0x30c480(0x481)](..._0x201039),await _0x372b85['chats']['put'](_0x44ad09),_0x3e436f(),await _0x4abd86(_0x30c480(0x1471),'已成功批量导入\x20'+_0x201039[_0x30c480(0xac0)]+_0x30c480(0x4c9));}else _0x3a2fdb===0x0&&alert(_0x30c480(0x23e));}function _0x297a41(){const _0x3eef8d=_0x7c5117;document[_0x3eef8d(0xfa0)](_0x3eef8d(0x3b6))['classList'][_0x3eef8d(0x443)](_0x3eef8d(0xdcc));}function _0x3a0ed1(){const _0x514cc9=_0x7c5117;if(!_0x8f0871[_0x514cc9(0xac8)])return;const _0x5da8c8=_0x8f0871[_0x514cc9(0x1260)][_0x8f0871['activeChatId']];document[_0x514cc9(0xfa0)](_0x514cc9(0x379))[_0x514cc9(0xc62)]='“'+_0x5da8c8[_0x514cc9(0x1023)]+_0x514cc9(0x47c),_0x37ee08(),document['getElementById'](_0x514cc9(0xf39))[_0x514cc9(0x128f)][_0x514cc9(0x1327)](_0x514cc9(0xdcc));}function _0x37ee08(){const _0x2611ba=_0x7c5117,_0x3a09de=document[_0x2611ba(0xfa0)](_0x2611ba(0x101d));_0x3a09de[_0x2611ba(0x1331)]='';const _0x18b375=_0x8f0871[_0x2611ba(0x1260)][_0x8f0871['activeChatId']],_0x55ce9c=_0x18b375[_0x2611ba(0x12d7)]['groupAvatarLibrary']||[];if(_0x55ce9c[_0x2611ba(0xac0)]===0x0){_0x3a09de[_0x2611ba(0x1331)]=_0x2611ba(0x1271);return;}_0x55ce9c['forEach']((_0x165463,_0x68bb8f)=>{const _0x564fe4=_0x2611ba,_0x45fb0a=document[_0x564fe4(0xb4e)](_0x564fe4(0xd53));_0x45fb0a['className']=_0x564fe4(0x71b),_0x45fb0a[_0x564fe4(0x1187)]=_0x165463[_0x564fe4(0x1023)],_0x45fb0a['innerHTML']=_0x564fe4(0x365)+_0x165463[_0x564fe4(0x3f5)]+_0x564fe4(0xdfc)+_0x165463[_0x564fe4(0x1023)]+_0x564fe4(0x616);const _0x6d806=document[_0x564fe4(0xb4e)](_0x564fe4(0xd53));_0x6d806[_0x564fe4(0x1287)]=_0x564fe4(0x254),_0x6d806['innerHTML']='×',_0x6d806['style'][_0x564fe4(0x1248)]=_0x564fe4(0x127c),_0x6d806[_0x564fe4(0x9f0)]=async _0x43996f=>{const _0x489107=_0x564fe4;_0x43996f['stopPropagation']();const _0x3c2ede=await _0x3f65ed('删除头像',_0x489107(0x31c)+_0x165463['name']+_0x489107(0x94a),{'confirmButtonClass':'btn-danger'});_0x3c2ede&&(_0x18b375[_0x489107(0x12d7)]['groupAvatarLibrary'][_0x489107(0x11ac)](_0x68bb8f,0x1),await _0x372b85['chats'][_0x489107(0x11d5)](_0x18b375),_0x37ee08());},_0x45fb0a['appendChild'](_0x6d806),_0x3a09de['appendChild'](_0x45fb0a);});}async function _0x1764de(){const _0x1467c7=_0x7c5117,_0x56e358=await _0x131a69(_0x1467c7(0x1102),_0x1467c7(0x1e5));if(!_0x56e358||!_0x56e358[_0x1467c7(0xa06)]())return;const _0x551dd3=await _0x131a69(_0x1467c7(0x1102),_0x1467c7(0x644),'','url');if(!_0x551dd3||!_0x551dd3[_0x1467c7(0xa06)]()[_0x1467c7(0x9b8)](_0x1467c7(0xce7))){alert(_0x1467c7(0x1239));return;}const _0x4bc056=_0x8f0871['chats'][_0x8f0871[_0x1467c7(0xac8)]];!_0x4bc056[_0x1467c7(0x12d7)][_0x1467c7(0x77a)]&&(_0x4bc056['settings'][_0x1467c7(0x77a)]=[]),_0x4bc056[_0x1467c7(0x12d7)][_0x1467c7(0x77a)][_0x1467c7(0x481)]({'name':_0x56e358['trim'](),'url':_0x551dd3[_0x1467c7(0xa06)]()}),await _0x372b85[_0x1467c7(0x1260)][_0x1467c7(0x11d5)](_0x4bc056),_0x37ee08();}function _0x1b7c4c(){const _0x539708=_0x7c5117;document[_0x539708(0xfa0)](_0x539708(0xf39))[_0x539708(0x128f)][_0x539708(0x443)](_0x539708(0xdcc));}async function _0x36fa48(_0x3328df){const _0x59e637=_0x7c5117,_0x54e79e=_0x59e637(0xb91),_0x4c2ff7=await _0x131a69(_0x59e637(0x637),_0x54e79e,'',_0x59e637(0x338));_0x4c2ff7&&_0x4c2ff7['trim']()&&await _0x3d4c16(_0x3328df,_0x4c2ff7);}async function _0x3d4c16(_0x45807e,_0x5cb0d4){const _0xef795a=_0x7c5117,_0x172c29=_0x8f0871[_0xef795a(0x1260)][_0x8f0871[_0xef795a(0xac8)]];if(!_0x172c29)return;const _0x25aa5e=_0x5cb0d4[_0xef795a(0xa06)]()['split']('\x0a'),_0x54c3ca=[],_0x14ffb3='https://files.catbox.moe/';let _0x255ec6=0x0;for(const _0x34ebbd of _0x25aa5e){const _0x2dcf80=_0x34ebbd[_0xef795a(0xa06)]();if(!_0x2dcf80||_0x2dcf80[_0xef795a(0xf95)](_0xef795a(0xce7))||_0x2dcf80[_0xef795a(0xf95)]('填入'))continue;let _0x4630b4=null,_0x1dd4a3=null;const _0x5d47c5=_0x2dcf80[_0xef795a(0x1232)](/^([\u4e00-\u9fa5]+)([a-zA-Z0-9]+\..+)$/);if(_0x5d47c5)_0x4630b4=_0x5d47c5[0x1],_0x1dd4a3=_0x5d47c5[0x2];else{const _0x574a67=_0x2dcf80[_0xef795a(0x505)](/\s+/);_0x574a67[_0xef795a(0xac0)]>=0x2&&(_0x1dd4a3=_0x574a67[_0xef795a(0x217)](),_0x4630b4=_0x574a67[_0xef795a(0xcc2)]('\x20'));}_0x4630b4&&_0x1dd4a3&&_0x1dd4a3['includes']('.')?_0x54c3ca[_0xef795a(0x481)]({'name':_0x4630b4,'url':_0x14ffb3+_0x1dd4a3}):(_0x255ec6++,console[_0xef795a(0x7fa)]('批量导入格式错误，已跳过此行:',_0x2dcf80));}_0x255ec6>0x0&&await _0x4abd86(_0xef795a(0x3fe),'有\x20'+_0x255ec6+_0xef795a(0xfa9));if(_0x54c3ca['length']>0x0){if(_0x45807e==='ai'){if(!_0x172c29[_0xef795a(0x12d7)][_0xef795a(0x1576)])_0x172c29[_0xef795a(0x12d7)][_0xef795a(0x1576)]=[];_0x172c29[_0xef795a(0x12d7)][_0xef795a(0x1576)][_0xef795a(0x481)](..._0x54c3ca),await _0x372b85[_0xef795a(0x1260)][_0xef795a(0x11d5)](_0x172c29),_0x51f6c4();}else{if(_0x45807e===_0xef795a(0x14ae)){if(!_0x172c29[_0xef795a(0x12d7)][_0xef795a(0x77a)])_0x172c29['settings'][_0xef795a(0x77a)]=[];_0x172c29[_0xef795a(0x12d7)][_0xef795a(0x77a)]['push'](..._0x54c3ca),await _0x372b85[_0xef795a(0x1260)]['put'](_0x172c29),_0x37ee08();}}await _0x4abd86('导入成功',_0xef795a(0x12b2)+_0x54c3ca[_0xef795a(0xac0)]+'\x20个新头像！');}else _0x255ec6===0x0&&alert(_0xef795a(0x1190));}async function _0x101f44(){const _0x335996=_0x7c5117,_0xe7876=await _0x131a69(_0x335996(0x1102),_0x335996(0x1e5));if(!_0xe7876||!_0xe7876['trim']())return;const _0x4b9221=await _0x131a69(_0x335996(0x1102),_0x335996(0x644),'',_0x335996(0x3f5));if(!_0x4b9221||!_0x4b9221['trim']()[_0x335996(0x9b8)](_0x335996(0xce7))){alert(_0x335996(0x1239));return;}const _0x291025=_0x8f0871['chats'][_0x8f0871[_0x335996(0xac8)]];!_0x291025[_0x335996(0x12d7)][_0x335996(0x77a)]&&(_0x291025[_0x335996(0x12d7)][_0x335996(0x77a)]=[]),_0x291025['settings']['groupAvatarLibrary'][_0x335996(0x481)]({'name':_0xe7876[_0x335996(0xa06)](),'url':_0x4b9221[_0x335996(0xa06)]()}),await _0x372b85[_0x335996(0x1260)][_0x335996(0x11d5)](_0x291025),_0x37ee08();}function _0x2ea963(_0x533f73){return new Promise(_0x9b7639=>{const _0x188af5=_0x5817,_0x569040=document[_0x188af5(0xfa0)](_0x188af5(0x104e)),_0x395f67=document[_0x188af5(0xfa0)](_0x188af5(0xcfb)),_0xea453b=document[_0x188af5(0xfa0)]('chat-list-action-delete'),_0x3d1525=document['getElementById']('chat-list-action-cancel');_0x395f67[_0x188af5(0xc62)]=_0x533f73[_0x188af5(0x67d)]?'取消置顶':_0x188af5(0x150e);const _0x1d871f=_0x395f67[_0x188af5(0xb5c)](!![]);_0x395f67[_0x188af5(0xcdd)]['replaceChild'](_0x1d871f,_0x395f67),_0x1d871f['onclick']=()=>{const _0xb3e9be=_0x188af5;_0x569040[_0xb3e9be(0x128f)][_0xb3e9be(0x443)](_0xb3e9be(0xdcc)),_0x9b7639('pin');};const _0x53cfca=_0xea453b['cloneNode'](!![]);_0xea453b['parentNode']['replaceChild'](_0x53cfca,_0xea453b),_0x53cfca[_0x188af5(0x9f0)]=()=>{const _0x3c2ae6=_0x188af5;_0x569040[_0x3c2ae6(0x128f)][_0x3c2ae6(0x443)](_0x3c2ae6(0xdcc)),_0x9b7639(_0x3c2ae6(0xf10));};const _0x299bd8=_0x3d1525[_0x188af5(0xb5c)](!![]);_0x3d1525[_0x188af5(0xcdd)][_0x188af5(0x5d2)](_0x299bd8,_0x3d1525),_0x299bd8[_0x188af5(0x9f0)]=()=>{const _0xd52bb3=_0x188af5;_0x569040['classList'][_0xd52bb3(0x443)](_0xd52bb3(0xdcc)),_0x9b7639(null);},_0x569040[_0x188af5(0x128f)][_0x188af5(0x1327)](_0x188af5(0xdcc));});}function _0x4fca03(){const _0x4560ab=_0x7c5117,_0x3cfa9f=document[_0x4560ab(0xfa0)](_0x4560ab(0xee3)),_0x3ab1b9=_0x8f0871[_0x4560ab(0x7b0)][_0x4560ab(0x9d4)];_0x3ab1b9?_0x3cfa9f[_0x4560ab(0x63b)][_0x4560ab(0xc93)]=_0x4560ab(0xfbd)+_0x3ab1b9+')':_0x3cfa9f[_0x4560ab(0x63b)][_0x4560ab(0xc93)]=_0x4560ab(0x13de);}function _0x57ce71(){const _0x5e9710=_0x7c5117;if(!_0x8f0871[_0x5e9710(0x7b0)][_0x5e9710(0xa61)])return;for(const _0xe4c6a2 in _0x8f0871[_0x5e9710(0x7b0)][_0x5e9710(0xa61)]){const _0x409578=document[_0x5e9710(0xfa0)](_0x5e9710(0x4d2)+_0xe4c6a2);_0x409578&&(_0x409578[_0x5e9710(0x53e)]=_0x8f0871[_0x5e9710(0x7b0)]['cphoneAppIcons'][_0xe4c6a2]);}}function _0x238bf4(){const _0x16d79c=_0x7c5117,_0x5b2869=document['getElementById'](_0x16d79c(0x10bc));if(!_0x5b2869)return;_0x5b2869[_0x16d79c(0x1331)]='';const _0x289b5b={'qq':'QQ','album':'相册','browser':_0x16d79c(0x13d9),'taobao':'淘宝','memo':_0x16d79c(0x9ef),'diary':'日记','amap':'高德地图','usage':_0x16d79c(0x1507),'music':_0x16d79c(0x793),'ephone':_0x16d79c(0x9bb)};for(const _0x190f69 in _0x8f0871[_0x16d79c(0x7b0)]['cphoneAppIcons']){const _0x5e1fb0=_0x8f0871[_0x16d79c(0x7b0)][_0x16d79c(0xa61)][_0x190f69],_0x2884b1=_0x289b5b[_0x190f69]||_0x16d79c(0x599),_0x58e541=document[_0x16d79c(0xb4e)](_0x16d79c(0xd53));_0x58e541[_0x16d79c(0x1287)]=_0x16d79c(0x12e1),_0x58e541[_0x16d79c(0x8df)][_0x16d79c(0x1095)]=_0x190f69,_0x58e541[_0x16d79c(0x1331)]=_0x16d79c(0x94e)+_0x5e1fb0+'\x22\x20alt=\x22'+_0x2884b1+_0x16d79c(0xdb4),_0x5b2869[_0x16d79c(0x1155)](_0x58e541);}}function _0x5c238f(){const _0x3e9e7c=_0x7c5117;if(!_0x8f0871[_0x3e9e7c(0x7b0)][_0x3e9e7c(0x544)])return;for(const _0x2caef0 in _0x8f0871['globalSettings'][_0x3e9e7c(0x544)]){const _0x313a67=document[_0x3e9e7c(0xfa0)](_0x3e9e7c(0xf9f)+_0x2caef0);_0x313a67&&(_0x313a67[_0x3e9e7c(0x53e)]=_0x8f0871[_0x3e9e7c(0x7b0)]['appIcons'][_0x2caef0]);}}function _0x3af53f(){const _0x531195=_0x7c5117,_0x2dbc7f=document['getElementById']('icon-settings-grid');if(!_0x2dbc7f)return;_0x2dbc7f[_0x531195(0x1331)]='';const _0x8c6370={'qq':'QQ','world-book':_0x531195(0x130e),'wallpaper':_0x531195(0x832),'renderer':'渲染器','api-settings':_0x531195(0xbeb),'font':'字体','char-phone':_0x531195(0x1235),'douban':'豆瓣小组','preset':'预设','tutorial':'教程','werewolf':'狼人杀','x':'X'};for(const _0x30e9cf in _0x8f0871['globalSettings'][_0x531195(0x544)]){const _0x4df558=_0x8f0871[_0x531195(0x7b0)][_0x531195(0x544)][_0x30e9cf],_0x403b53=_0x8c6370[_0x30e9cf]||_0x531195(0x1235),_0x3031c3=document[_0x531195(0xb4e)](_0x531195(0xd53));_0x3031c3[_0x531195(0x1287)]='icon-setting-item',_0x3031c3[_0x531195(0x8df)]['iconId']=_0x30e9cf,_0x3031c3[_0x531195(0x1331)]=_0x531195(0x94e)+_0x4df558+'\x22\x20alt=\x22'+_0x403b53+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22change-icon-btn\x22>更换</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2dbc7f[_0x531195(0x1155)](_0x3031c3);}}function _0x49d5c4(_0x17494d){const _0x54a8db=_0x7c5117;if(!_0x8f0871['activeChatId'])return;const _0x1f4fd6=_0x8f0871[_0x54a8db(0x1260)][_0x8f0871[_0x54a8db(0xac8)]];if(!_0x1f4fd6||!_0x1f4fd6[_0x54a8db(0xc88)])return;const _0x30bdd6=_0x1f4fd6[_0x54a8db(0xc88)][_0x54a8db(0x7ed)](_0xf5bee=>_0xf5bee[_0x54a8db(0xe55)]===_0x17494d);if(!_0x30bdd6||_0x30bdd6[_0x54a8db(0x682)]!=='share_link'){console[_0x54a8db(0x52b)](_0x54a8db(0xcf6),_0x17494d);return;}document[_0x54a8db(0xfa0)](_0x54a8db(0x941))['textContent']=_0x30bdd6[_0x54a8db(0x316)]||_0x54a8db(0xbe6);const _0x519e1d=document[_0x54a8db(0xfa0)]('browser-content');_0x519e1d[_0x54a8db(0x1331)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1\x20class=\x22article-title\x22>'+(_0x30bdd6[_0x54a8db(0x1187)]||_0x54a8db(0x354))+_0x54a8db(0x14de)+(_0x30bdd6[_0x54a8db(0x316)]||'未知')+_0x54a8db(0x13c6)+(_0x30bdd6['content']||_0x54a8db(0xc43))['replace'](/\n/g,'</p><p>')+_0x54a8db(0x1548),_0x2d25e5('browser-screen');}function _0x2c2e10(){const _0x59acc9=_0x7c5117;_0x2d25e5(_0x59acc9(0xe95));}function _0x2c2e10(){const _0xd37c02=_0x7c5117;_0x2d25e5(_0xd37c02(0xe95));}function _0x55634c(){const _0x2d02fd=_0x7c5117;if(!_0x8f0871[_0x2d02fd(0xac8)])return;document[_0x2d02fd(0xfa0)](_0x2d02fd(0x69d))[_0x2d02fd(0x4f6)]='',document[_0x2d02fd(0xfa0)](_0x2d02fd(0x1b3))['value']='',document['getElementById'](_0x2d02fd(0x180))['value']='',document[_0x2d02fd(0xfa0)](_0x2d02fd(0x346))['value']='',document['getElementById']('share-link-modal')[_0x2d02fd(0x128f)][_0x2d02fd(0x1327)](_0x2d02fd(0xdcc));}async function _0x879285(){const _0x25a315=_0x7c5117;if(!_0x8f0871[_0x25a315(0xac8)])return;const _0x1b6875=document[_0x25a315(0xfa0)]('link-title-input')[_0x25a315(0x4f6)][_0x25a315(0xa06)]();if(!_0x1b6875){alert('标题是必填项哦！');return;}const _0x208c0a=document[_0x25a315(0xfa0)](_0x25a315(0x1b3))[_0x25a315(0x4f6)][_0x25a315(0xa06)](),_0xe5dc7d=document[_0x25a315(0xfa0)](_0x25a315(0x180))[_0x25a315(0x4f6)][_0x25a315(0xa06)](),_0x574bf7=document['getElementById'](_0x25a315(0x346))[_0x25a315(0x4f6)][_0x25a315(0xa06)](),_0x14af7a=_0x8f0871[_0x25a315(0x1260)][_0x8f0871[_0x25a315(0xac8)]],_0x83d8e0={'role':_0x25a315(0xcb0),'type':_0x25a315(0x8c1),'timestamp':Date['now'](),'title':_0x1b6875,'description':_0x208c0a,'source_name':_0xe5dc7d,'content':_0x574bf7,'thumbnail_url':null};_0x14af7a[_0x25a315(0xc88)][_0x25a315(0x481)](_0x83d8e0),await _0x372b85[_0x25a315(0x1260)][_0x25a315(0x11d5)](_0x14af7a),_0x25d29f(_0x83d8e0,_0x14af7a),_0x2d75fb(),document['getElementById'](_0x25a315(0x14f3))[_0x25a315(0x128f)][_0x25a315(0x443)](_0x25a315(0xdcc));}function _0x2aa0e2(_0x59f2b2,_0x555a62){const _0xd2f6ac=_0x7c5117;if(!_0x555a62||!_0x555a62['id'])return[];const _0x5bd55c=_0x555a62['groupId'],_0x3cc07e=_0x555a62['id'];return _0x59f2b2[_0xd2f6ac(0xde7)](_0x395726=>{const _0x78c8c1=_0xd2f6ac;if(_0x395726['authorId']===_0x78c8c1(0xcb0)){if(_0x395726[_0x78c8c1(0xc2c)]&&_0x395726[_0x78c8c1(0xc2c)][_0x78c8c1(0xac0)]>0x0)return _0x5bd55c&&_0x395726[_0x78c8c1(0xc2c)][_0x78c8c1(0xf95)](_0x5bd55c);return!![];}if(String(_0x395726['authorId'])[_0x78c8c1(0x9b8)](_0x78c8c1(0xbec))){if(Array[_0x78c8c1(0x345)](_0x395726['visibleTo']))return _0x395726[_0x78c8c1(0xfef)][_0x78c8c1(0xf95)](_0x3cc07e);return![];}const _0x5c65d4=_0x8f0871[_0x78c8c1(0x1260)][_0x395726[_0x78c8c1(0x11dd)]];if(!_0x5c65d4)return![];const _0x540c5e=_0x5c65d4[_0x78c8c1(0xdbf)],_0x3532d7=_0x540c5e&&_0x5bd55c&&_0x540c5e===_0x5bd55c,_0x176ca2=!_0x540c5e&&!_0x5bd55c;return _0x3532d7||_0x176ca2;});}function _0x2113bd(_0x28218e){const _0x36ba0b=_0x7c5117,_0x2b27b0=document[_0x36ba0b(0xfa0)](_0x36ba0b(0x1025)),_0x43eb0f=document['getElementById'](_0x36ba0b(0x11fc)),_0x3b4ea6=_0x28218e==='dark';_0x2b27b0['classList'][_0x36ba0b(0xb80)]('dark-mode',_0x3b4ea6),_0x43eb0f&&(_0x43eb0f['checked']=_0x3b4ea6),localStorage['setItem'](_0x36ba0b(0x1197),_0x28218e);}function _0x3102b5(){const _0x5cabad=_0x7c5117,_0x183878=document['getElementById'](_0x5cabad(0x11fc)),_0x465aff=_0x183878['checked']?_0x5cabad(0x8bc):_0x5cabad(0xdc5);_0x2113bd(_0x465aff);}function _0x424eca(){const _0x2771b9=_0x7c5117;if(!_0x8f0871[_0x2771b9(0xac8)])return;_0x142ad9(),_0x2d25e5(_0x2771b9(0xc5e));}function _0x142ad9(){const _0xff6967=_0x7c5117,_0x28c9e4=document[_0xff6967(0xfa0)](_0xff6967(0x1422)),_0xc61c99=_0x8f0871[_0xff6967(0x1260)][_0x8f0871[_0xff6967(0xac8)]];_0x28c9e4[_0xff6967(0x1331)]='';let _0x403130=[];_0xc61c99[_0xff6967(0x1364)]?_0xc61c99[_0xff6967(0x2cf)]['forEach'](_0x2a05ab=>{const _0x13e8e7=_0xff6967,_0x444941=_0x8f0871[_0x13e8e7(0x1260)][_0x2a05ab['id']];if(_0x444941&&_0x444941['longTermMemory']){const _0x3538ea=_0x444941[_0x13e8e7(0x1312)][_0x13e8e7(0x556)](_0x39517c=>({..._0x39517c,'authorName':_0x2a05ab[_0x13e8e7(0x5c9)],'authorChatId':_0x2a05ab['id']}));_0x403130[_0x13e8e7(0x481)](..._0x3538ea);}}):_0xc61c99[_0xff6967(0x1312)]&&(_0x403130=_0xc61c99[_0xff6967(0x1312)]['map'](_0x59b135=>({..._0x59b135,'authorName':_0xc61c99[_0xff6967(0x1023)],'authorChatId':_0xc61c99['id']})));if(_0x403130['length']===0x0){_0x28c9e4[_0xff6967(0x1331)]=_0xff6967(0x11ec);return;}_0x403130[_0xff6967(0x1376)]((_0x3e7d3d,_0x2ab6a)=>_0x2ab6a[_0xff6967(0xe55)]-_0x3e7d3d[_0xff6967(0xe55)]),_0x403130['forEach']((_0x4e1ca3,_0x28c311)=>{const _0x138713=_0xff6967,_0x107f3f=document['createElement'](_0x138713(0xd53));_0x107f3f[_0x138713(0x1287)]='memory-card',_0x107f3f[_0x138713(0x63b)][_0x138713(0x298)]=_0x138713(0xe82),_0x107f3f[_0x138713(0x1331)]=_0x138713(0xbd1)+_0x4e1ca3[_0x138713(0x4f3)]+_0x138713(0x119b)+_0x4e1ca3[_0x138713(0x1469)][_0x138713(0x128a)](/\n/g,_0x138713(0xd59))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20gap:\x208px;\x20flex-shrink:\x200;\x20margin-left:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22memory-action-btn\x20edit-memory-btn\x22\x20data-author-id=\x22'+_0x4e1ca3[_0x138713(0x57b)]+'\x22\x20data-memory-timestamp=\x22'+_0x4e1ca3[_0x138713(0xe55)]+_0x138713(0x11a2)+_0x4e1ca3[_0x138713(0x57b)]+'\x22\x20data-memory-timestamp=\x22'+_0x4e1ca3[_0x138713(0xe55)]+'\x22\x20title=\x22删除\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22></polyline>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22></path>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x28c9e4['appendChild'](_0x107f3f);});}async function _0x11bd3a(){const _0x350942=_0x7c5117,_0x67d2a2=_0x8f0871['chats'][_0x8f0871[_0x350942(0xac8)]];if(!_0x67d2a2)return;let _0x33c863=_0x67d2a2;if(_0x67d2a2[_0x350942(0x1364)]){const _0x5e5060=_0x67d2a2[_0x350942(0x2cf)][_0x350942(0x556)](_0x4987cd=>({'text':'为“'+_0x4987cd['groupNickname']+_0x350942(0x1410),'value':_0x4987cd['id']})),_0xdc7b8d=await _0x2aedfc(_0x350942(0x1316),_0x5e5060);if(!_0xdc7b8d)return;_0x33c863=_0x8f0871['chats'][_0xdc7b8d];if(!_0x33c863){alert(_0x350942(0x1568));return;}}const _0xe6059f=await _0x131a69('为“'+_0x33c863[_0x350942(0x1023)]+_0x350942(0x1410),_0x350942(0xb66),'',_0x350942(0x338));if(_0xe6059f&&_0xe6059f[_0x350942(0xa06)]()){if(!_0x33c863[_0x350942(0x1312)])_0x33c863['longTermMemory']=[];_0x33c863[_0x350942(0x1312)][_0x350942(0x481)]({'content':_0xe6059f[_0x350942(0xa06)](),'timestamp':Date[_0x350942(0xc22)](),'source':_0x350942(0xb68)}),await _0x372b85[_0x350942(0x1260)][_0x350942(0x11d5)](_0x33c863),_0x142ad9();}}async function _0xef91df(_0x1d1458,_0x1dd490){const _0x3e9378=_0x7c5117,_0x19273d=_0x8f0871[_0x3e9378(0x1260)][_0x1d1458];if(!_0x19273d||!_0x19273d['longTermMemory'])return;const _0x462a24=_0x19273d[_0x3e9378(0x1312)][_0x3e9378(0xb22)](_0x41169d=>_0x41169d['timestamp']===_0x1dd490);if(_0x462a24===-0x1)return;const _0x55c812=_0x19273d['longTermMemory'][_0x462a24],_0x172cfc=await _0x131a69('编辑记忆',_0x3e9378(0x2f2),_0x55c812[_0x3e9378(0x1469)],_0x3e9378(0x338));_0x172cfc&&_0x172cfc[_0x3e9378(0xa06)]()&&(_0x55c812[_0x3e9378(0x1469)]=_0x172cfc[_0x3e9378(0xa06)](),await _0x372b85[_0x3e9378(0x1260)][_0x3e9378(0x11d5)](_0x19273d),_0x142ad9());}async function _0x43bfaf(_0x982330,_0x4d00b6){const _0x49e83f=_0x7c5117,_0x2b8c14=await _0x3f65ed('确认删除','确定要删除这条长期记忆吗？',{'confirmButtonClass':'btn-danger'});if(_0x2b8c14){const _0x8bf336=_0x8f0871['chats'][_0x982330];if(!_0x8bf336||!_0x8bf336['longTermMemory'])return;_0x8bf336['longTermMemory']=_0x8bf336['longTermMemory']['filter'](_0x5e3b4f=>_0x5e3b4f[_0x49e83f(0xe55)]!==_0x4d00b6),await _0x372b85[_0x49e83f(0x1260)][_0x49e83f(0x11d5)](_0x8bf336),_0x142ad9();}}async function _0x26ad6a(){const _0x554191=_0x7c5117,_0x4c5a7d=await _0x3f65ed(_0x554191(0x101f),_0x554191(0xa5c));_0x4c5a7d&&await _0x52ea25(_0x8f0871['activeChatId'],!![]);}async function _0x499874(_0x4a4bf0){const _0x414e07=_0x7c5117,_0x58a59e=_0x8f0871[_0x414e07(0x1260)][_0x4a4bf0];if(!_0x58a59e||!_0x58a59e[_0x414e07(0x12d7)][_0x414e07(0xa84)])return;const _0x4f779e=_0x58a59e[_0x414e07(0x255)]||0x0,_0x318d49=_0x58a59e[_0x414e07(0xc88)][_0x414e07(0xde7)](_0x4a182b=>_0x4a182b[_0x414e07(0xe55)]>_0x4f779e&&!_0x4a182b['isHidden']);_0x318d49[_0x414e07(0xac0)]>=_0x58a59e[_0x414e07(0x12d7)][_0x414e07(0x87f)]&&(console[_0x414e07(0x4ee)](_0x414e07(0x1067)+_0x318d49[_0x414e07(0xac0)]+'/'+_0x58a59e['settings'][_0x414e07(0x87f)]+_0x414e07(0xf86)),await _0x52ea25(_0x4a4bf0));}async function _0x4617e2(_0x38016d,_0xc3f086){const _0x3e1ea6=_0x7c5117,_0x5073b4=_0x8f0871['chats'][_0x38016d];if(!_0x5073b4||!_0xc3f086)throw new Error('基础数据不完整，无法开始总结。');const _0x3a4602=_0x8f0871[_0x3e1ea6(0x9dd)][_0x3e1ea6(0xff8)]||'用户';let _0x343c92,_0x28d872=_0x5073b4;const _0x3c065c=new Date()[_0x3e1ea6(0x11a9)](_0x3e1ea6(0xb43),{'year':_0x3e1ea6(0x641),'month':_0x3e1ea6(0xa97),'day':'numeric'});if(_0x5073b4[_0x3e1ea6(0x1364)]){let _0x1d2074=null;_0x1fd843['callRequester']&&(_0x1d2074=_0x5073b4[_0x3e1ea6(0x2cf)]['find'](_0x29a52b=>_0x29a52b[_0x3e1ea6(0x93e)]===_0x1fd843['callRequester']));!_0x1d2074&&(_0x1d2074=_0x5073b4[_0x3e1ea6(0x2cf)][_0x3e1ea6(0x7ed)](_0x31e76d=>_0x31e76d['id']!==_0x3e1ea6(0xcb0)&&_0x1fd843[_0x3e1ea6(0xa81)][_0x3e1ea6(0x75d)](_0x2ba7d9=>_0x2ba7d9['id']===_0x31e76d['id'])));!_0x1d2074&&(_0x1d2074=_0x5073b4[_0x3e1ea6(0x2cf)]['find'](_0x62cb00=>_0x62cb00['id']!=='user'));if(!_0x1d2074)throw new Error(_0x3e1ea6(0x8fb));const _0x3191dd=_0x8f0871['chats'][_0x1d2074['id']];if(!_0x3191dd)throw new Error(_0x3e1ea6(0x985)+_0x1d2074[_0x3e1ea6(0x5c9)]+_0x3e1ea6(0xc0e));const _0x112360=_0x5073b4['settings']['myPersona']||_0x3e1ea6(0x7e1);_0x343c92='\x0a#\x20你的任务\x0a你就是角色“'+_0x1d2074[_0x3e1ea6(0x93e)]+_0x3e1ea6(0x146c)+_0x3a4602+_0x3e1ea6(0x1013)+_0x3c065c+_0x3e1ea6(0x512)+_0x3c065c+_0x3e1ea6(0x212)+_0x3191dd['settings']['aiPersona']+_0x3e1ea6(0xef4)+_0x112360+_0x3e1ea6(0xae1)+_0xc3f086+_0x3e1ea6(0x12b7)+_0x1d2074[_0x3e1ea6(0x93e)]+'”的身份，开始你的客观总结。',_0x28d872=_0x3191dd;}else _0x343c92='\x0a#\x20你的任务\x0a你就是角色“'+_0x5073b4[_0x3e1ea6(0x93e)]+_0x3e1ea6(0x8de)+_0x3a4602+'”的视频通话，然后用【第一人称\x20(\x22我\x22)】的口吻，总结出一段简短的、客观的、包含关键信息的记忆。\x0a\x0a#\x20当前时间\x0a-\x20**今天是：'+_0x3c065c+_0x3e1ea6(0x1130)+_0x3c065c+_0x3e1ea6(0x1201)+_0x5073b4['settings'][_0x3e1ea6(0x200)]+_0x3e1ea6(0xef4)+_0x5073b4[_0x3e1ea6(0x12d7)][_0x3e1ea6(0xbbe)]+_0x3e1ea6(0x1196)+_0xc3f086+_0x3e1ea6(0x12b7)+_0x5073b4['originalName']+'”的身份，开始你的客观总结。';try{const _0x3f8462=_0x8f0871[_0x3e1ea6(0xa78)]['secondaryProxyUrl']&&_0x8f0871['apiConfig'][_0x3e1ea6(0x1539)]&&_0x8f0871[_0x3e1ea6(0xa78)][_0x3e1ea6(0x1020)],{proxyUrl:_0x330da9,apiKey:_0x14255a,model:_0x550c0c}=_0x3f8462?{'proxyUrl':_0x8f0871['apiConfig']['secondaryProxyUrl'],'apiKey':_0x8f0871['apiConfig'][_0x3e1ea6(0x1539)],'model':_0x8f0871[_0x3e1ea6(0xa78)][_0x3e1ea6(0x1020)]}:_0x8f0871[_0x3e1ea6(0xa78)];if(!_0x330da9||!_0x14255a||!_0x550c0c)throw new Error('API未配置，无法进行总结。');let _0x2020d7=_0x330da9[_0x3e1ea6(0xf95)](_0x3e1ea6(0x9a5)),_0x17a836=_0x1e2f27(_0x550c0c,_0x14255a,_0x343c92,[{'role':_0x3e1ea6(0xcb0),'content':'请开始总结。'}]);const _0x388e0a=_0x2020d7?await fetch(_0x17a836[_0x3e1ea6(0x3f5)],_0x17a836[_0x3e1ea6(0x3cc)]):await fetch(_0x330da9+'/v1/chat/completions',{'method':_0x3e1ea6(0xb67),'headers':{'Content-Type':_0x3e1ea6(0x4b5),'Authorization':_0x3e1ea6(0x681)+_0x14255a},'body':JSON[_0x3e1ea6(0x7cc)]({'model':_0x550c0c,'messages':[{'role':_0x3e1ea6(0x1417),'content':_0x343c92},{'role':_0x3e1ea6(0xcb0),'content':_0x3e1ea6(0x45a)}],'temperature':0.1})});if(!_0x388e0a['ok']){const _0x2aaa0a=await _0x388e0a['json']()[_0x3e1ea6(0xe37)](()=>({'error':{'message':_0x388e0a[_0x3e1ea6(0x37e)]}}));throw new Error(_0x3e1ea6(0x1053)+_0x388e0a[_0x3e1ea6(0x103e)]+_0x3e1ea6(0xc10)+_0x2aaa0a['error'][_0x3e1ea6(0x790)]);}const _0x191c67=await _0x388e0a[_0x3e1ea6(0xa2e)]();let _0x1f87ab=_0x2020d7?getGeminiResponseText(_0x191c67):_0x191c67[_0x3e1ea6(0x14bc)][0x0][_0x3e1ea6(0x790)][_0x3e1ea6(0x1469)];_0x1f87ab=_0x1f87ab['replace'](/^```json\s*/,'')[_0x3e1ea6(0x128a)](/```$/,'')[_0x3e1ea6(0xa06)]();const _0x423d9f=JSON[_0x3e1ea6(0x4a0)](_0x1f87ab);if(_0x423d9f[_0x3e1ea6(0x7fd)]&&_0x423d9f[_0x3e1ea6(0x7fd)][_0x3e1ea6(0xa06)]()){const _0x3ae75b={'content':_0x3e1ea6(0xf96)+(_0x5073b4[_0x3e1ea6(0x1364)]?'群聊':'')+'通话中，'+_0x423d9f[_0x3e1ea6(0x7fd)]['trim']()+')','timestamp':Date[_0x3e1ea6(0xc22)](),'source':_0x5073b4[_0x3e1ea6(0x1364)]?'group_call_summary':_0x3e1ea6(0xddd)};if(!_0x28d872[_0x3e1ea6(0x1312)])_0x28d872[_0x3e1ea6(0x1312)]=[];return _0x28d872['longTermMemory'][_0x3e1ea6(0x481)](_0x3ae75b),await _0x372b85['chats'][_0x3e1ea6(0x11d5)](_0x28d872),console['log'](_0x3e1ea6(0x2eb)+_0x28d872[_0x3e1ea6(0x1023)]+_0x3e1ea6(0x13b9)),!![];}else throw new Error(_0x3e1ea6(0x134a));}catch(_0x547707){console[_0x3e1ea6(0x52b)](_0x3e1ea6(0x141b),_0x547707);throw _0x547707;}}function _0x77ae87(_0x4fb22c){const _0x4a9a33=_0x7c5117,_0x398df6=new Set(['的','是','了','在','我','你','他','她','它','我们','你们','他们','这','那','一个','也','和','与','或','但','然而','所以','因此','就','都','地','得','着','过','吧','吗','呢','啊','哦','嗯','什么','怎么',_0x4a9a33(0x9ae),'哪个','一些','这个','那个','还有']),_0x44e8fe=_0x4fb22c[_0x4a9a33(0x1232)](/[\u4e00-\u9fa5]+|[a-zA-Z0-9]+/g)||[],_0x2f00c2=new Map();let _0x4a2931=0x0;_0x44e8fe[_0x4a9a33(0x458)](_0x5cc0cb=>{const _0x5a4ddc=_0x4a9a33;if(_0x5cc0cb[_0x5a4ddc(0xac0)]>0x1&&!_0x398df6['has'](_0x5cc0cb)){const _0x4faa3e=(_0x2f00c2['get'](_0x5cc0cb)||0x0)+0x1;_0x2f00c2[_0x5a4ddc(0xe5d)](_0x5cc0cb,_0x4faa3e);if(_0x4faa3e>_0x4a2931)_0x4a2931=_0x4faa3e;}});const _0x1939e5=[],_0x1c912c=[],_0x318268=_0x4a2931*0.9,_0x22673c=_0x4a2931*0.6;_0x2f00c2[_0x4a9a33(0x458)]((_0x318bfc,_0x3714f8)=>{const _0x5a446f=_0x4a9a33;if(_0x318bfc>=_0x318268)_0x1939e5[_0x5a446f(0x481)](_0x3714f8);else _0x318bfc>=_0x22673c&&_0x1c912c[_0x5a446f(0x481)](_0x3714f8);});const _0x39fe0b=new Set(_0x1939e5),_0x426d68=_0x1c912c[_0x4a9a33(0xde7)](_0x46353e=>!_0x39fe0b['has'](_0x46353e))[_0x4a9a33(0x59f)](0x0,0x5);return{'coreKeywords':_0x1939e5[_0x4a9a33(0x59f)](0x0,0x3),'situationalKeywords':_0x426d68};}function _0x1be34c(_0x33197f,_0x2532a7,_0x520c4c){const _0x19e599=_0x7c5117;let _0xb16ab9;_0x520c4c==='hours'?_0xb16ab9=Date['now']()-_0x2532a7*0x3c*0x3c*0x3e8:_0xb16ab9=Date[_0x19e599(0xc22)]()-_0x2532a7*0x18*0x3c*0x3c*0x3e8;const _0x172dcf=_0x33197f['history'][_0x19e599(0xde7)](_0x10c9d0=>_0x10c9d0[_0x19e599(0xe55)]>_0xb16ab9&&!_0x10c9d0[_0x19e599(0x1559)]);if(_0x172dcf[_0x19e599(0xac0)]<0x3)return'';const _0x4e00f1=_0x172dcf[_0x19e599(0x556)](_0x210592=>{const _0x42347d=_0x19e599;if(typeof _0x210592[_0x42347d(0x1469)]===_0x42347d(0x857))return _0x210592[_0x42347d(0x1469)];if(_0x210592[_0x42347d(0x682)]===_0x42347d(0x412))return _0x210592['content'];if(_0x210592[_0x42347d(0x682)]==='offline_text')return(_0x210592[_0x42347d(0x369)]||'')+'\x20'+(_0x210592[_0x42347d(0x211)]||'');return'';})['join']('\x20'),_0x2c5f5f=new Set(['的','是','了','在','我','你','他','她','它','我们','你们','他们','这','那','一个','也','和','与','或','但','然而','所以','因此','就','都','地','得','着','过','吧','吗','呢','啊','哦','嗯']),_0x43fb10=_0x4e00f1[_0x19e599(0x1232)](/[\u4e00-\u9fa5]+|[a-zA-Z0-9]+/g)||[],_0x35e67e=new Map();_0x43fb10[_0x19e599(0x458)](_0x41443e=>{const _0x3ac29d=_0x19e599;_0x41443e[_0x3ac29d(0xac0)]>0x1&&!_0x2c5f5f[_0x3ac29d(0xd58)](_0x41443e)&&_0x35e67e['set'](_0x41443e,(_0x35e67e[_0x3ac29d(0x70d)](_0x41443e)||0x0)+0x1);});const _0x5e7758=[..._0x35e67e['entries']()][_0x19e599(0x1376)]((_0x5d3407,_0x6bfa5e)=>_0x6bfa5e[0x1]-_0x5d3407[0x1])[_0x19e599(0x556)](_0x32fc38=>_0x32fc38[0x0]);if(_0x5e7758[_0x19e599(0xac0)]===0x0)return'';let _0x3b470f;return _0x520c4c===_0x19e599(0xd97)?_0x3b470f='最近'+_0x2532a7+_0x19e599(0xaa1):_0x2532a7===0x1?_0x3b470f=_0x19e599(0xa45):_0x3b470f='最近'+_0x2532a7+_0x19e599(0x565),_0x19e599(0x155f)+_0x3b470f+_0x19e599(0x97d)+_0x5e7758[_0x19e599(0x59f)](0x0,0x3)['join']('、\x20')+_0x19e599(0x12c7);}function _0x114d63(_0x4abe2f){const _0x16bfe5=_0x7c5117;if(!_0x4abe2f||typeof _0x4abe2f!==_0x16bfe5(0x857))return null;const _0x59d545=_0x4abe2f[_0x16bfe5(0x128a)](/^```json\s*/,'')[_0x16bfe5(0x128a)](/```$/,'')[_0x16bfe5(0xa06)](),_0x587449=_0x59d545['match'](/{[\s\S]*}/);if(_0x587449)try{const _0x329b2e=JSON[_0x16bfe5(0x4a0)](_0x587449[0x0]);return console[_0x16bfe5(0x4ee)](_0x16bfe5(0x5f6)),_0x329b2e;}catch(_0x119c8f){console[_0x16bfe5(0x7fa)](_0x16bfe5(0x137d));}const _0x280a39=_0x59d545[_0x16bfe5(0x1232)](/"summary"\s*:\s*"((?:[^"\\]|\\.)*)"/);if(_0x280a39&&_0x280a39[0x1])return console[_0x16bfe5(0x4ee)](_0x16bfe5(0xad7)),{'summary':_0x280a39[0x1]['replace'](/\\"/g,'\x22')};if(_0x59d545)return console[_0x16bfe5(0x4ee)](_0x16bfe5(0x1037)),{'summary':_0x59d545};return null;}async function _0x14e61d(_0xe58339){const _0x4542ea=_0x7c5117;let _0x57c0ec=_0x8f0871[_0x4542ea(0x1260)][_0xe58339];if(!_0x57c0ec)return;let _0x58d6d7=_0x57c0ec;if(_0x57c0ec[_0x4542ea(0x1364)]){const _0xe5a845=_0x57c0ec[_0x4542ea(0x2cf)][_0x4542ea(0x556)](_0x18e00a=>{const _0x3e29ad=_0x4542ea,_0x197aca=_0x8f0871[_0x3e29ad(0x1260)][_0x18e00a['id']];if(_0x197aca&&_0x197aca[_0x3e29ad(0x1312)]&&_0x197aca[_0x3e29ad(0x1312)][_0x3e29ad(0xac0)]>=0x2)return{'text':_0x3e29ad(0x132d)+_0x18e00a['groupNickname']+_0x3e29ad(0x11c0)+_0x197aca['longTermMemory'][_0x3e29ad(0xac0)]+'条)','value':_0x18e00a['id']};return null;})[_0x4542ea(0xde7)](Boolean);if(_0xe5a845[_0x4542ea(0xac0)]===0x0){alert(_0x4542ea(0xecd));return;}const _0x4c250b=await _0x2aedfc(_0x4542ea(0x5fe),_0xe5a845);if(!_0x4c250b)return;_0x58d6d7=_0x8f0871[_0x4542ea(0x1260)][_0x4c250b];}if(!_0x58d6d7[_0x4542ea(0x1312)]||_0x58d6d7['longTermMemory']['length']<0x2){alert('“'+_0x58d6d7[_0x4542ea(0x1023)]+_0x4542ea(0x1d5));return;}const _0x26e713=_0x58d6d7[_0x4542ea(0x1312)][_0x4542ea(0xac0)],_0x5b2dfe=await _0x2aedfc('选择精炼范围',[{'text':_0x4542ea(0x1202)+_0x26e713+'条)','value':_0x4542ea(0x8ab)},{'text':_0x4542ea(0x1c9),'value':'20'},{'text':_0x4542ea(0x1aa),'value':'50'},{'text':'最近\x20100\x20条','value':'100'},{'text':_0x4542ea(0xc27),'value':_0x4542ea(0xd3c)}][_0x4542ea(0xde7)](_0x2b54b6=>_0x2b54b6[_0x4542ea(0x4f6)]==='all'||_0x2b54b6[_0x4542ea(0x4f6)]===_0x4542ea(0xd3c)||parseInt(_0x2b54b6[_0x4542ea(0x4f6)])<_0x26e713));if(_0x5b2dfe===null)return;let _0x4d5ba7,_0x47c4de=_0x26e713;if(_0x5b2dfe==='all')_0x4d5ba7=[..._0x58d6d7['longTermMemory']];else{if(_0x5b2dfe===_0x4542ea(0xd3c)){const _0x492cfe=await _0x131a69(_0x4542ea(0xa3b),_0x4542ea(0xa02)+_0x26e713+'\x20条)');if(_0x492cfe===null)return;const _0x1b2fe7=parseInt(_0x492cfe);if(isNaN(_0x1b2fe7)||_0x1b2fe7<0x2||_0x1b2fe7>_0x26e713){alert(_0x4542ea(0x12e7)+_0x26e713+_0x4542ea(0xad0));return;}_0x47c4de=_0x1b2fe7,_0x4d5ba7=_0x58d6d7[_0x4542ea(0x1312)]['slice'](-_0x47c4de);}else _0x47c4de=parseInt(_0x5b2dfe),_0x47c4de>=_0x26e713?(_0x4d5ba7=[..._0x58d6d7[_0x4542ea(0x1312)]],_0x47c4de=_0x26e713):_0x4d5ba7=_0x58d6d7[_0x4542ea(0x1312)][_0x4542ea(0x59f)](-_0x47c4de);}const _0x21dd77=await _0x131a69(_0x4542ea(0x4de),_0x4542ea(0x1342),'150');if(_0x21dd77===null)return;const _0x3f551b=parseInt(_0x21dd77);if(isNaN(_0x3f551b)||_0x3f551b<0x14){alert(_0x4542ea(0xfc0));return;}const _0x47a669=await _0x3f65ed('确认精炼记忆？',_0x4542ea(0xb3b)+_0x47c4de+_0x4542ea(0x50a)+_0x3f551b+'\x20字的核心记忆。这些旧记忆将被替换，此操作不可撤销。确定要继续吗？',{'confirmButtonClass':_0x4542ea(0x611),'confirmText':_0x4542ea(0x9d7)});if(!_0x47a669)return;const _0x36340e=_0x4d5ba7[_0x4542ea(0x556)](_0x1a2485=>'-\x20'+_0x1a2485['content'])['join']('\x0a'),_0x40fe4f=_0x8f0871[_0x4542ea(0x9dd)][_0x4542ea(0xff8)]||'用户',_0x5d0750=new Date()[_0x4542ea(0x11a9)](_0x4542ea(0xb43),{'year':_0x4542ea(0x641),'month':'long','day':'numeric'}),_0x475965=_0x4542ea(0x7ce)+_0x58d6d7[_0x4542ea(0x93e)]+_0x4542ea(0x3ed)+_0x40fe4f+_0x4542ea(0x14aa)+_0x5d0750+_0x4542ea(0x1485)+_0x5d0750+'”这个信息，将其转换为【具体的公历日期】。\x0a4.\x20\x20**【风格要求】**:\x20你的总结应该像一份清晰的个人档案或事件回顾，而不是一篇情感散文。请删除重复、琐碎或纯粹的情感宣泄，只保留对情节和关系发展至关重要的部分。\x0a5.\x20\x20**【【【长度铁律】】】**:\x20你的总结【必须】非常精炼，总长度应控制在\x20**'+_0x3f551b+_0x4542ea(0x993)+_0x58d6d7[_0x4542ea(0x12d7)][_0x4542ea(0x200)]+_0x4542ea(0xef4)+_0x58d6d7[_0x4542ea(0x12d7)][_0x4542ea(0xbbe)]+_0x4542ea(0xac3)+_0x36340e+_0x4542ea(0x12b7)+_0x58d6d7['originalName']+'”的身份，开始你的回忆梳理与精炼。';await _0x4abd86(_0x4542ea(0x3e1),_0x4542ea(0x740));try{const _0x11af6f=_0x8f0871[_0x4542ea(0xa78)][_0x4542ea(0xb0e)]&&_0x8f0871[_0x4542ea(0xa78)][_0x4542ea(0x1539)]&&_0x8f0871['apiConfig']['secondaryModel'],{proxyUrl:_0x66e243,apiKey:_0x1a4064,model:_0x101c75}=_0x11af6f?{'proxyUrl':_0x8f0871[_0x4542ea(0xa78)][_0x4542ea(0xb0e)],'apiKey':_0x8f0871[_0x4542ea(0xa78)][_0x4542ea(0x1539)],'model':_0x8f0871[_0x4542ea(0xa78)][_0x4542ea(0x1020)]}:_0x8f0871['apiConfig'];if(!_0x66e243||!_0x1a4064||!_0x101c75)throw new Error('请先在API设置中配置好（主或副）API以进行总结。');let _0x3a36d1=_0x66e243[_0x4542ea(0xf95)]('generativelanguage'),_0x32a780=_0x1e2f27(_0x101c75,_0x1a4064,_0x475965,[{'role':_0x4542ea(0xcb0),'content':_0x4542ea(0x10ad)}]);const _0x548ca4=_0x3a36d1?await fetch(_0x32a780[_0x4542ea(0x3f5)],_0x32a780['data']):await fetch(_0x66e243+_0x4542ea(0x1011),{'method':_0x4542ea(0xb67),'headers':{'Content-Type':_0x4542ea(0x4b5),'Authorization':_0x4542ea(0x681)+_0x1a4064},'body':JSON[_0x4542ea(0x7cc)]({'model':_0x101c75,'messages':[{'role':'system','content':_0x475965},{'role':'user','content':'请开始整合。'}],'temperature':0.2})});if(!_0x548ca4['ok'])throw new Error('API\x20错误:\x20'+_0x548ca4[_0x4542ea(0x37e)]);const _0x3c83eb=await _0x548ca4['json']();let _0x4597e7=_0x3a36d1?getGeminiResponseText(_0x3c83eb):_0x3c83eb[_0x4542ea(0x14bc)][0x0][_0x4542ea(0x790)][_0x4542ea(0x1469)];const _0x48f921=_0x114d63(_0x4597e7);if(_0x48f921&&_0x48f921[_0x4542ea(0x7fd)]&&typeof _0x48f921[_0x4542ea(0x7fd)]===_0x4542ea(0x857)&&_0x48f921[_0x4542ea(0x7fd)]['trim']()){const _0x563cba=await _0x3f65ed(_0x4542ea(0x65b),'AI已将您的\x20'+_0x47c4de+'\x20条旧记忆总结为以下核心记忆：<br><br><div\x20class=\x22scrollable-content-preview\x22>'+_0x48f921[_0x4542ea(0x7fd)]['trim']()+_0x4542ea(0x1443),{'confirmText':_0x4542ea(0x14d6),'cancelText':_0x4542ea(0xf92),'confirmButtonClass':_0x4542ea(0x611)});if(_0x563cba){const _0xd2ee1b={'content':_0x48f921[_0x4542ea(0x7fd)][_0x4542ea(0xa06)](),'timestamp':Date[_0x4542ea(0xc22)](),'source':'refined'},_0xab69b6=_0x26e713-_0x47c4de,_0x4d1dcf=_0xab69b6>0x0?_0x58d6d7[_0x4542ea(0x1312)][_0x4542ea(0x59f)](0x0,_0xab69b6):[];_0x58d6d7['longTermMemory']=[..._0x4d1dcf,_0xd2ee1b],_0x58d6d7[_0x4542ea(0x255)]=Date[_0x4542ea(0xc22)](),await _0x372b85[_0x4542ea(0x1260)][_0x4542ea(0x11d5)](_0x58d6d7),document[_0x4542ea(0xfa0)]('long-term-memory-screen')[_0x4542ea(0x128f)][_0x4542ea(0xea7)](_0x4542ea(0xa37))&&_0x142ad9(),await _0x4abd86(_0x4542ea(0x8ac),_0x4542ea(0x11aa)+_0x47c4de+'\x20条记忆精炼为\x201\x20条核心记忆！');}else await _0x4abd86('操作已取消','您的旧有记忆已被完整保留，未作任何修改。');}else throw new Error(_0x4542ea(0x134a));}catch(_0x10abfe){console[_0x4542ea(0x52b)](_0x4542ea(0x7f4),_0x10abfe),await _0x4abd86('精炼失败',_0x4542ea(0x447)+_0x10abfe[_0x4542ea(0x790)]);}}async function _0x52ea25(_0x227376,_0x5d2aa5=![]){const _0x24c9f3=_0x7c5117,_0x3b0281=_0x8f0871[_0x24c9f3(0x1260)][_0x227376];if(!_0x3b0281)return;const _0x3123a4=_0x3b0281[_0x24c9f3(0x255)]||0x0,_0x54c1fe=_0x5d2aa5?_0x3b0281[_0x24c9f3(0xc88)]['filter'](_0x1006da=>!_0x1006da[_0x24c9f3(0x1559)]||_0x1006da[_0x24c9f3(0xc92)]==='system'&&_0x1006da[_0x24c9f3(0x1469)]['includes']('内心独白'))['slice'](-(_0x3b0281[_0x24c9f3(0x12d7)][_0x24c9f3(0x87f)]||0x14)):_0x3b0281['history'][_0x24c9f3(0xde7)](_0x249ff1=>_0x249ff1[_0x24c9f3(0xe55)]>_0x3123a4&&(!_0x249ff1['isHidden']||_0x249ff1[_0x24c9f3(0xc92)]===_0x24c9f3(0x1417)&&_0x249ff1[_0x24c9f3(0x1469)]['includes']('内心独白')));if(_0x54c1fe['length']<0x5){if(_0x5d2aa5)alert(_0x24c9f3(0x863));return;}const _0x283336=_0x8f0871['qzoneSettings'][_0x24c9f3(0xff8)]||'用户',_0x484805=_0x54c1fe[_0x24c9f3(0x556)](_0x1aca1a=>{const _0xac1ce7=_0x24c9f3;if(_0x1aca1a['isHidden']&&_0x1aca1a['role']==='system'&&_0x1aca1a[_0xac1ce7(0x1469)][_0xac1ce7(0xf95)]('内心独白'))return _0x1aca1a[_0xac1ce7(0x1469)];let _0x4e8a78;_0x1aca1a[_0xac1ce7(0xc92)]===_0xac1ce7(0xcb0)?_0x4e8a78=_0x283336:_0x4e8a78=_0x1aca1a['senderName']||_0x3b0281[_0xac1ce7(0x93e)];let _0x50e694='';if(_0x1aca1a[_0xac1ce7(0x682)]===_0xac1ce7(0x1492)){if(_0x1aca1a[_0xac1ce7(0x1469)])_0x50e694=_0x1aca1a[_0xac1ce7(0x1469)];else{const _0x2313b9=_0x1aca1a[_0xac1ce7(0x369)]?'「'+_0x1aca1a[_0xac1ce7(0x369)]+'」':'',_0x4462e2=_0x1aca1a['description']?'('+_0x1aca1a[_0xac1ce7(0x211)]+')':'';_0x50e694=(_0x2313b9+'\x20'+_0x4462e2)[_0xac1ce7(0xa06)]();}}else _0x50e694=String(_0x1aca1a[_0xac1ce7(0x1469)]);return _0x4e8a78+':\x20'+_0x50e694;})[_0x24c9f3(0xcc2)]('\x0a');let _0x5a8bd8;if(_0x3b0281[_0x24c9f3(0x1364)])_0x5a8bd8=_0x24c9f3(0xcb2)+_0x283336+'聊了关于生日派对的事，我们约好了10月1日见面。\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20```\x0a#\x20待总结的群聊记录\x0a'+_0x484805+_0x24c9f3(0xc83)+_0x3b0281[_0x24c9f3(0x2cf)]['map'](_0x58f19a=>'-\x20'+_0x58f19a['groupNickname']+_0x24c9f3(0xcdf)+_0x58f19a[_0x24c9f3(0x93e)]+')')[_0x24c9f3(0xcc2)]('\x0a')+_0x24c9f3(0xc9d);else{const _0x20a41f=new Date()[_0x24c9f3(0x11a9)](_0x24c9f3(0xb43),{'year':_0x24c9f3(0x641),'month':_0x24c9f3(0xa97),'day':'numeric'});_0x5a8bd8=_0x24c9f3(0x7ce)+_0x3b0281[_0x24c9f3(0x93e)]+_0x24c9f3(0x8de)+_0x283336+_0x24c9f3(0xe90)+_0x20a41f+_0x24c9f3(0x110d)+_0x20a41f+_0x24c9f3(0xc47)+new Date(Date['now']()+0x5265c00)[_0x24c9f3(0x11a9)](_0x24c9f3(0xb43),{'month':_0x24c9f3(0xa97),'day':'numeric'})+'见面”）。\x0a4.\x20\x20**【风格要求】**:\x20你的总结应该像一份备忘录或要点记录，而不是一篇抒情散文。请尽量减少主观的心理感受描述，除非它直接导致了某个决定或计划。\x0a5.\x20\x20**【长度铁律】**:\x20你的总结【必须】非常简短，总长度【绝对不能超过100个字】。\x0a6.\x20\x20**【输出格式】**:\x20你的回复【必须且只能】是一个JSON对象，格式如下：\x0a\x20\x20\x20\x20`{\x22summary\x22:\x20\x22在这里写下你以第一人称视角，总结好的核心事实与计划。\x22}`\x0a\x0a#\x20你的角色设定\x0a'+_0x3b0281[_0x24c9f3(0x12d7)][_0x24c9f3(0x200)]+_0x24c9f3(0xb64)+_0x3b0281['settings'][_0x24c9f3(0xbbe)]+_0x24c9f3(0x22c)+_0x484805+'\x0a\x0a现在，请以“'+_0x3b0281[_0x24c9f3(0x93e)]+'”的身份，开始你的客观总结。';}try{const _0x2700f6=_0x8f0871[_0x24c9f3(0xa78)][_0x24c9f3(0xb0e)]&&_0x8f0871['apiConfig'][_0x24c9f3(0x1539)]&&_0x8f0871[_0x24c9f3(0xa78)][_0x24c9f3(0x1020)],{proxyUrl:_0x554f8c,apiKey:_0x11bfab,model:_0xcff0fc}=_0x2700f6?{'proxyUrl':_0x8f0871[_0x24c9f3(0xa78)][_0x24c9f3(0xb0e)],'apiKey':_0x8f0871[_0x24c9f3(0xa78)][_0x24c9f3(0x1539)],'model':_0x8f0871[_0x24c9f3(0xa78)]['secondaryModel']}:_0x8f0871['apiConfig'];if(!_0x554f8c||!_0x11bfab||!_0xcff0fc)throw new Error(_0x24c9f3(0x10a1));let _0x248e1b=_0x554f8c[_0x24c9f3(0xf95)]('generativelanguage'),_0x100a1f=_0x1e2f27(_0xcff0fc,_0x11bfab,_0x5a8bd8,[{'role':_0x24c9f3(0xcb0),'content':_0x24c9f3(0x45a)}]);const _0x12a17f=_0x248e1b?await fetch(_0x100a1f[_0x24c9f3(0x3f5)],_0x100a1f[_0x24c9f3(0x3cc)]):await fetch(_0x554f8c+_0x24c9f3(0x1011),{'method':_0x24c9f3(0xb67),'headers':{'Content-Type':_0x24c9f3(0x4b5),'Authorization':_0x24c9f3(0x681)+_0x11bfab},'body':JSON['stringify']({'model':_0xcff0fc,'messages':[{'role':_0x24c9f3(0x1417),'content':_0x5a8bd8},{'role':_0x24c9f3(0xcb0),'content':'请开始总结。'}],'temperature':0.2})});if(!_0x12a17f['ok'])throw new Error(_0x24c9f3(0x395)+_0x12a17f['statusText']);const _0x41c26a=await _0x12a17f['json']();let _0x1f4fad=_0x248e1b?getGeminiResponseText(_0x41c26a):_0x41c26a['choices'][0x0][_0x24c9f3(0x790)][_0x24c9f3(0x1469)];_0x1f4fad=_0x1f4fad[_0x24c9f3(0x128a)](/^```json\s*/,'')[_0x24c9f3(0x128a)](/```$/,'')[_0x24c9f3(0xa06)]();const _0x547e95=JSON['parse'](_0x1f4fad);if(_0x3b0281[_0x24c9f3(0x1364)]){if(_0x547e95[_0x24c9f3(0x95e)]&&typeof _0x547e95[_0x24c9f3(0x95e)]===_0x24c9f3(0xf2e)){let _0x378962=0x0;for(const _0x3262e1 in _0x547e95['summaries']){const _0x4715c3=_0x547e95['summaries'][_0x3262e1];if(_0x4715c3&&_0x4715c3[_0x24c9f3(0xa06)]()){const _0x589969=Object['values'](_0x8f0871[_0x24c9f3(0x1260)])[_0x24c9f3(0x7ed)](_0x5825eb=>_0x5825eb[_0x24c9f3(0x93e)]===_0x3262e1);if(_0x589969){const _0x1a8024={'content':_0x4715c3[_0x24c9f3(0xa06)](),'timestamp':Date['now'](),'source':_0x24c9f3(0x3ee)+_0x3b0281['name']};if(!_0x589969['longTermMemory'])_0x589969[_0x24c9f3(0x1312)]=[];_0x589969[_0x24c9f3(0x1312)][_0x24c9f3(0x481)](_0x1a8024),await _0x372b85[_0x24c9f3(0x1260)][_0x24c9f3(0x11d5)](_0x589969),_0x378962++;}}}if(_0x378962>0x0)console[_0x24c9f3(0x4ee)](_0x24c9f3(0x409)+_0x378962+'\x20位群成员生成并注入了个性化记忆！');else throw new Error(_0x24c9f3(0x134a));}else throw new Error(_0x24c9f3(0xff1));}else{if(_0x547e95['summary']&&_0x547e95['summary']['trim']()){const _0x13509a={'content':_0x547e95[_0x24c9f3(0x7fd)][_0x24c9f3(0xa06)](),'timestamp':Date[_0x24c9f3(0xc22)](),'source':_0x24c9f3(0x1258)};_0x3b0281[_0x24c9f3(0x1312)]['push'](_0x13509a),await _0x372b85['chats'][_0x24c9f3(0x11d5)](_0x3b0281),console[_0x24c9f3(0x4ee)](_0x24c9f3(0x3b3));}else throw new Error(_0x24c9f3(0x134a));}_0x3b0281[_0x24c9f3(0x255)]=_0x54c1fe['slice'](-0x1)[0x0][_0x24c9f3(0xe55)],await _0x372b85[_0x24c9f3(0x1260)][_0x24c9f3(0x11d5)](_0x3b0281),document['getElementById'](_0x24c9f3(0xc5e))[_0x24c9f3(0x128f)][_0x24c9f3(0xea7)]('active')&&_0x142ad9();}catch(_0x536058){console['error'](_0x24c9f3(0x10e7),_0x536058),await _0x4abd86(_0x24c9f3(0x1362),_0x24c9f3(0x10b4)+_0x536058[_0x24c9f3(0x790)]);}}function _0x11541b(){const _0xc0c83f=_0x7c5117;if(!_0x5f3517)return;const _0x1d1495=_0x8f0871[_0xc0c83f(0x1260)][_0x8f0871[_0xc0c83f(0xac8)]],_0x4b2780=_0x1d1495[_0xc0c83f(0xc88)][_0xc0c83f(0x7ed)](_0x301641=>_0x301641[_0xc0c83f(0xe55)]===_0x5f3517&&!_0x301641['isHidden']);if(!_0x4b2780)return;let _0x40bbfe;_0x4b2780['role']==='user'?_0x40bbfe=_0x1d1495[_0xc0c83f(0x1364)]?_0x1d1495['settings'][_0xc0c83f(0xda5)]||'我':'我':_0x1d1495['isGroup']?_0x40bbfe=_0x185e1d(_0x1d1495,_0x4b2780[_0xc0c83f(0x213)]):_0x40bbfe=_0x1d1495['name'];const _0x902d2c=String(_0x4b2780['content']||'');let _0x5ec383='';if(typeof _0x4b2780[_0xc0c83f(0x1469)]==='string'&&_0x4a5ebd[_0xc0c83f(0x3fb)](_0x4b2780[_0xc0c83f(0x1469)]))_0x5ec383=_0xc0c83f(0xab4);else{if(_0x4b2780['type']==='ai_image'||_0x4b2780[_0xc0c83f(0x682)]===_0xc0c83f(0x838))_0x5ec383='[图片]';else _0x4b2780[_0xc0c83f(0x682)]===_0xc0c83f(0x412)?_0x5ec383=_0xc0c83f(0xf4b):_0x5ec383=_0x902d2c[_0xc0c83f(0x9fe)](0x0,0x32)+(_0x902d2c['length']>0x32?_0xc0c83f(0x1111):'');}_0x143fbf={'timestamp':_0x4b2780[_0xc0c83f(0xe55)],'senderName':_0x40bbfe,'content':_0x902d2c};const _0x2fa527=document[_0xc0c83f(0xfa0)](_0xc0c83f(0x1100));_0x2fa527[_0xc0c83f(0xfb1)](_0xc0c83f(0xa9f))[_0xc0c83f(0xc62)]='回复\x20'+_0x143fbf[_0xc0c83f(0x213)]+':',_0x2fa527['querySelector'](_0xc0c83f(0x1ca))[_0xc0c83f(0xc62)]=_0x5ec383,_0x2fa527[_0xc0c83f(0x63b)][_0xc0c83f(0x1248)]=_0xc0c83f(0x127c),_0x5b8bb0(),document[_0xc0c83f(0xfa0)](_0xc0c83f(0x127a))[_0xc0c83f(0x10c7)]();}function _0x339877(){const _0x3ec80e=_0x7c5117;_0x143fbf=null,document['getElementById'](_0x3ec80e(0x1100))[_0x3ec80e(0x63b)][_0x3ec80e(0x1248)]=_0x3ec80e(0x11b5);}let _0x13eaf6=null;function _0x3a88c1(_0x2c850a){const _0x27fa02=_0x7c5117;_0x13eaf6=_0x2c850a;const _0x3bdc3a=_0x8f0871[_0x27fa02(0x1260)][_0x8f0871['activeChatId']],_0xb66ac4=_0x3bdc3a[_0x27fa02(0xc88)]['find'](_0x5ed3dd=>_0x5ed3dd[_0x27fa02(0xe55)]===_0x2c850a);_0xb66ac4&&(document[_0x27fa02(0xfa0)]('transfer-sender-name')['textContent']=_0xb66ac4['senderName']),document['getElementById'](_0x27fa02(0x778))[_0x27fa02(0x128f)]['add']('visible');}function _0x4fe60b(){const _0x1614a9=_0x7c5117;document['getElementById'](_0x1614a9(0x778))['classList'][_0x1614a9(0x443)](_0x1614a9(0xdcc)),_0x13eaf6=null;}async function _0x3502c7(_0x1e38a4){const _0x3d23f7=_0x7c5117;if(!_0x13eaf6)return;const _0x4dfd25=_0x13eaf6,_0x242b4d=_0x8f0871['chats'][_0x8f0871['activeChatId']],_0xa72666=_0x242b4d[_0x3d23f7(0xc88)][_0x3d23f7(0xb22)](_0x5e2942=>_0x5e2942[_0x3d23f7(0xe55)]===_0x4dfd25);if(_0xa72666===-0x1)return;const _0x5f0841=_0x242b4d[_0x3d23f7(0xc88)][_0xa72666];_0x5f0841[_0x3d23f7(0x103e)]=_0x1e38a4;let _0x59e875;if(_0x1e38a4==='declined'){const _0x1debda={'role':_0x3d23f7(0xcb0),'type':_0x3d23f7(0x35f),'isRefund':!![],'amount':_0x5f0841['amount'],'note':_0x3d23f7(0x1b7),'timestamp':Date['now']()};_0x242b4d[_0x3d23f7(0xc88)][_0x3d23f7(0x481)](_0x1debda),_0x59e875=_0x3d23f7(0xc42)+_0x5f0841[_0x3d23f7(0x213)]+_0x3d23f7(0x325);}else _0x59e875=_0x3d23f7(0x154a)+_0x5f0841['senderName']+_0x3d23f7(0x325);const _0x1bc1f6={'role':_0x3d23f7(0x1417),'content':_0x59e875,'timestamp':Date[_0x3d23f7(0xc22)]()+0x1,'isHidden':!![]};_0x242b4d[_0x3d23f7(0xc88)][_0x3d23f7(0x481)](_0x1bc1f6),await _0x372b85['chats'][_0x3d23f7(0x11d5)](_0x242b4d),_0x4fe60b(),_0x54d32b(_0x8f0871['activeChatId']),_0x2d75fb();}async function _0x2e99cb(){const _0x53c2e0=_0x7c5117;_0x2d25e5(_0x53c2e0(0x40d));const _0x42231f=document[_0x53c2e0(0xfa0)](_0x53c2e0(0xa04)),_0xe10877=document[_0x53c2e0(0xfa0)](_0x53c2e0(0x1401));_0x42231f[_0x53c2e0(0x1331)]='',_0xe10877[_0x53c2e0(0xc62)]=_0x53c2e0(0x3a7);const _0x3ae47d=await _0x372b85[_0x53c2e0(0xe73)][_0x53c2e0(0x1554)](_0x53c2e0(0xe55))[_0x53c2e0(0xaf5)]()[_0x53c2e0(0x3bc)]();if(_0x3ae47d['length']===0x0){_0x42231f[_0x53c2e0(0x1331)]=_0x53c2e0(0x2e6);return;}_0x3ae47d['forEach'](_0x1b825d=>{const _0x312870=_0x53c2e0,_0x5d837b=_0x2d80b6(_0x1b825d);_0x53cdde(_0x5d837b,async()=>{const _0x43e975=_0x5817,_0x356b10=await _0x131a69('自定义通话名称','请输入新的名称（留空则恢复默认）',_0x1b825d[_0x43e975(0x67f)]||'');if(_0x356b10===null)return;await _0x372b85[_0x43e975(0xe73)][_0x43e975(0x1477)](_0x1b825d['id'],{'customName':_0x356b10[_0x43e975(0xa06)]()}),await _0x2e99cb(),await _0x4abd86('成功','通话名称已更新！');}),_0x42231f[_0x312870(0x1155)](_0x5d837b);});}function _0x2d80b6(_0x926ea3){const _0x1f3378=_0x7c5117,_0x3d7863=document[_0x1f3378(0xb4e)]('div');_0x3d7863[_0x1f3378(0x1287)]='call-record-card',_0x3d7863[_0x1f3378(0x8df)][_0x1f3378(0x615)]=_0x926ea3['id'];const _0x109228=_0x8f0871[_0x1f3378(0x1260)][_0x926ea3['chatId']],_0x2ac5c5=_0x109228?_0x109228['name']:_0x1f3378(0x1265),_0x241b2c=new Date(_0x926ea3['timestamp']),_0x53e768=_0x241b2c['getFullYear']()+'-'+String(_0x241b2c['getMonth']()+0x1)[_0x1f3378(0x13e8)](0x2,'0')+'-'+String(_0x241b2c[_0x1f3378(0x8a5)]())[_0x1f3378(0x13e8)](0x2,'0')+'\x20'+String(_0x241b2c['getHours']())[_0x1f3378(0x13e8)](0x2,'0')+':'+String(_0x241b2c[_0x1f3378(0xa39)]())[_0x1f3378(0x13e8)](0x2,'0'),_0x13e6bb=Math[_0x1f3378(0x13e5)](_0x926ea3['duration']/0x3c)+'分'+_0x926ea3[_0x1f3378(0x11c7)]%0x3c+'秒',_0x90cb80=_0x926ea3['participants'][_0x1f3378(0x556)](_0x16f26d=>_0x1f3378(0x131f)+_0x16f26d[_0x1f3378(0xc61)]+'\x22\x20alt=\x22'+_0x16f26d['name']+'\x22\x20class=\x22participant-avatar\x22\x20title=\x22'+_0x16f26d[_0x1f3378(0x1023)]+'\x22>')[_0x1f3378(0xcc2)]('');return _0x3d7863[_0x1f3378(0x1331)]=_0x1f3378(0xc70)+_0x53e768+_0x1f3378(0x6ed)+_0x13e6bb+_0x1f3378(0x924)+(_0x926ea3[_0x1f3378(0x67f)]?_0x1f3378(0x301)+_0x926ea3[_0x1f3378(0x67f)]+_0x1f3378(0xda9):'')+_0x1f3378(0x1319)+_0x90cb80+_0x1f3378(0x60c)+_0x2ac5c5+_0x1f3378(0x2fb),_0x3d7863;}async function _0x20bdf6(_0x4d17c3){const _0x33e339=_0x7c5117,_0x1853e0=await _0x372b85[_0x33e339(0xe73)]['get'](_0x4d17c3);if(!_0x1853e0)return;const _0x152fbc=document['getElementById'](_0x33e339(0x287)),_0xc3c6d8=document['getElementById'](_0x33e339(0xcf1)),_0x1be9a5=document['getElementById'](_0x33e339(0x1195));_0xc3c6d8[_0x33e339(0xc62)]=_0x33e339(0x964)+new Date(_0x1853e0[_0x33e339(0xe55)])[_0x33e339(0x10de)]()+_0x33e339(0x6bf)+Math[_0x33e339(0x13e5)](_0x1853e0[_0x33e339(0x11c7)]/0x3c)+'分'+_0x1853e0[_0x33e339(0x11c7)]%0x3c+'秒)',_0x1be9a5['innerHTML']='';const _0x1fa2a2=document[_0x33e339(0xfa0)](_0x33e339(0x406)),_0x1a5b89=document[_0x33e339(0xfa0)](_0x33e339(0xf37));!_0x1853e0[_0x33e339(0xcea)]||_0x1853e0[_0x33e339(0xcea)]['length']===0x0?(_0x1be9a5[_0x33e339(0x1331)]=_0x33e339(0x12e0),_0x1a5b89[_0x33e339(0x63b)]['display']=_0x33e339(0x11b5)):(_0x1a5b89[_0x33e339(0x63b)][_0x33e339(0x1248)]='block',_0x1853e0['transcript'][_0x33e339(0x458)](_0x4e7fbd=>{const _0x2a6964=_0x33e339,_0x3b1365=document[_0x2a6964(0xb4e)](_0x2a6964(0xd53));_0x3b1365[_0x2a6964(0x1287)]=_0x2a6964(0x603)+_0x4e7fbd[_0x2a6964(0xc92)],_0x3b1365['textContent']=_0x4e7fbd[_0x2a6964(0x1469)],_0x1be9a5['appendChild'](_0x3b1365);}));const _0x18c516=_0x1fa2a2[_0x33e339(0xb5c)](!![]);_0x1fa2a2['parentNode'][_0x33e339(0x5d2)](_0x18c516,_0x1fa2a2);const _0x49490b=_0x1a5b89[_0x33e339(0xb5c)](!![]);_0x1a5b89[_0x33e339(0xcdd)]['replaceChild'](_0x49490b,_0x1a5b89),_0x18c516[_0x33e339(0x7b8)](_0x33e339(0xb4a),async()=>{const _0x1bafc7=_0x33e339,_0x3b00fb=await _0x3f65ed(_0x1bafc7(0x1464),'确定要永久删除这条通话记录吗？此操作不可恢复。',{'confirmButtonClass':_0x1bafc7(0x611)});_0x3b00fb&&(_0x152fbc[_0x1bafc7(0x128f)][_0x1bafc7(0x443)](_0x1bafc7(0xdcc)),await _0x372b85[_0x1bafc7(0xe73)][_0x1bafc7(0xf10)](_0x4d17c3),await _0x2e99cb(),alert(_0x1bafc7(0x906)));}),_0x49490b['addEventListener'](_0x33e339(0xb4a),async()=>{const _0x51f32b=_0x33e339,_0x94ae68=await _0x3f65ed('确认操作',_0x51f32b(0x190),{'confirmText':'确认总结'});if(!_0x94ae68)return;_0x152fbc[_0x51f32b(0x128f)][_0x51f32b(0x443)](_0x51f32b(0xdcc));const _0x1d4f9d=_0x8f0871[_0x51f32b(0x1260)][_0x1853e0[_0x51f32b(0xe94)]];if(!_0x1d4f9d){alert(_0x51f32b(0xd99));return;}await _0x4abd86(_0x51f32b(0x3e1),'正在请求AI进行手动总结...');try{const _0x1cddcd=_0x1853e0[_0x51f32b(0xcea)][_0x51f32b(0x556)](_0x2b8981=>{const _0x1d2f33=_0x51f32b,_0x1bee27=_0x2b8981[_0x1d2f33(0xc92)]===_0x1d2f33(0xcb0)?_0x1d4f9d[_0x1d2f33(0x12d7)][_0x1d2f33(0xda5)]||'我':_0x2b8981['senderName']||_0x1d4f9d['name'];return _0x1bee27+':\x20'+_0x2b8981['content'];})[_0x51f32b(0xcc2)]('\x0a');await _0x4617e2(_0x1853e0[_0x51f32b(0xe94)],_0x1cddcd),await _0x4abd86('总结成功',_0x51f32b(0x774)+_0x1d4f9d[_0x51f32b(0x1023)]+_0x51f32b(0x13b9));}catch(_0x576850){await _0x4abd86(_0x51f32b(0x1362),_0x51f32b(0x1039)+_0x576850[_0x51f32b(0x790)]);}});const _0x5957a5=document[_0x33e339(0xfa0)](_0x33e339(0x24c)),_0x31a6f0=_0x5957a5[_0x33e339(0xb5c)](!![]);_0x5957a5['parentNode'][_0x33e339(0x5d2)](_0x31a6f0,_0x5957a5),_0x31a6f0[_0x33e339(0x7b8)](_0x33e339(0xb4a),()=>{const _0x2b4425=_0x33e339;_0x152fbc[_0x2b4425(0x128f)][_0x2b4425(0x443)](_0x2b4425(0xdcc));}),_0x152fbc[_0x33e339(0x128f)][_0x33e339(0x1327)](_0x33e339(0xdcc));}async function _0x3b6b01(){const _0x5eec19=_0x7c5117;if(!_0x8f0871[_0x5eec19(0xac8)]||_0x8f0871['chats'][_0x8f0871[_0x5eec19(0xac8)]]['isGroup'])return;const _0x9e95fd=_0x8f0871['chats'][_0x8f0871['activeChatId']],_0x231e25=await _0x131a69(_0x5eec19(0x1560),'请输入对方现在的新状态：',_0x9e95fd[_0x5eec19(0x103e)][_0x5eec19(0xda3)]);_0x231e25!==null&&(_0x9e95fd[_0x5eec19(0x103e)][_0x5eec19(0xda3)]=_0x231e25[_0x5eec19(0xa06)]()||'在线',_0x9e95fd[_0x5eec19(0x103e)][_0x5eec19(0x146d)]=![],_0x9e95fd[_0x5eec19(0x103e)][_0x5eec19(0x48e)]=Date[_0x5eec19(0xc22)](),await _0x372b85[_0x5eec19(0x1260)][_0x5eec19(0x11d5)](_0x9e95fd),_0x54d32b(_0x8f0871['activeChatId']),_0x2d75fb(),await _0x4abd86(_0x5eec19(0x119a),'“'+_0x9e95fd[_0x5eec19(0x1023)]+_0x5eec19(0x2db)+_0x9e95fd['status'][_0x5eec19(0xda3)]));}async function _0x4d3096(){const _0x3bac0c=_0x7c5117,_0x527acd=document[_0x3bac0c(0xfa0)](_0x3bac0c(0xafa)),_0x1d790d=document[_0x3bac0c(0xfa0)](_0x3bac0c(0x66d));_0x1d790d[_0x3bac0c(0x1331)]='';const _0x20e903=Object['values'](_0x8f0871['chats']);_0x20e903[_0x3bac0c(0x458)](_0x1600bb=>{const _0x1936a2=_0x3bac0c,_0x20d698=document[_0x1936a2(0xb4e)]('div');_0x20d698[_0x1936a2(0x1287)]=_0x1936a2(0x632),_0x20d698[_0x1936a2(0x1331)]=_0x1936a2(0xb3a)+_0x1600bb['id']+_0x1936a2(0x737)+(_0x1600bb[_0x1936a2(0x1364)]?_0x1600bb[_0x1936a2(0x12d7)][_0x1936a2(0x4a1)]:_0x1600bb['settings'][_0x1936a2(0xce8)]||_0x1a2fc1)+_0x1936a2(0xcca)+_0x1600bb['name']+_0x1936a2(0xf29),_0x1d790d[_0x1936a2(0x1155)](_0x20d698);}),_0x527acd[_0x3bac0c(0x128f)][_0x3bac0c(0x1327)]('visible');}function _0x56efb2(_0x464a27){const _0x20495d=_0x7c5117,_0x232dc9=document['getElementById'](_0x20495d(0x14ed));if(!_0x232dc9['classList'][_0x20495d(0xea7)]('visible')){if(_0x464a27)_0x464a27();return;}_0x232dc9[_0x20495d(0x128f)]['remove'](_0x20495d(0xdcc)),setTimeout(()=>{const _0x1044ee=_0x20495d;document[_0x1044ee(0xfa0)](_0x1044ee(0xd8c))[_0x1044ee(0x128f)][_0x1044ee(0x443)]('visible');if(_0x464a27)_0x464a27();},0x190);}function _0x2bc922(_0x1e90bd){const _0x13dcf5=_0x7c5117;if(!_0x1e90bd)return[];const _0x22faf4=String(_0x1e90bd)[_0x13dcf5(0x505)](/\r\n?|\n/),_0x125344=[],_0x239191=/\[(\d{2}):(\d{2})[.:](\d{2,3})\]/g;for(const _0x108d47 of _0x22faf4){const _0x3ed3cb=_0x108d47['replace'](_0x239191,'')[_0x13dcf5(0xa06)]();if(!_0x3ed3cb)continue;_0x239191[_0x13dcf5(0x124b)]=0x0;let _0x261c0f;while((_0x261c0f=_0x239191['exec'](_0x108d47))!==null){const _0x3fdbc0=parseInt(_0x261c0f[0x1],0xa),_0x2e2fa7=parseInt(_0x261c0f[0x2],0xa),_0xf65980=parseInt(_0x261c0f[0x3]['padEnd'](0x3,'0'),0xa),_0x556f39=_0x3fdbc0*0x3c+_0x2e2fa7+_0xf65980/0x3e8;_0x125344[_0x13dcf5(0x481)]({'time':_0x556f39,'text':_0x3ed3cb});}}return _0x125344[_0x13dcf5(0x1376)]((_0x2611db,_0xc85c31)=>_0x2611db[_0x13dcf5(0x1483)]-_0xc85c31[_0x13dcf5(0x1483)]);}function _0x573b70(){const _0x432033=_0x7c5117,_0x20028f=document[_0x432033(0xfa0)](_0x432033(0x26c));_0x20028f[_0x432033(0x1331)]='';if(!_0x46bc8b[_0x432033(0xbc6)]||_0x46bc8b[_0x432033(0xbc6)]['length']===0x0){_0x20028f[_0x432033(0x1331)]='<div\x20class=\x22lyric-line\x22>♪\x20暂无歌词\x20♪</div>';return;}_0x46bc8b[_0x432033(0xbc6)][_0x432033(0x458)]((_0x206387,_0x1d5da8)=>{const _0x487f36=_0x432033,_0xa44959=document[_0x487f36(0xb4e)](_0x487f36(0xd53));_0xa44959[_0x487f36(0x1287)]=_0x487f36(0xa2f),_0xa44959[_0x487f36(0xc62)]=_0x206387[_0x487f36(0xda3)],_0xa44959['dataset']['index']=_0x1d5da8,_0x20028f[_0x487f36(0x1155)](_0xa44959);}),_0x20028f[_0x432033(0x63b)]['transform']='translateY(0px)';}function _0x42500b(_0x1bf702){const _0x53387d=_0x7c5117;if(_0x46bc8b[_0x53387d(0xbc6)]['length']===0x0)return;let _0x101221=-0x1;for(let _0x2c48f5=0x0;_0x2c48f5<_0x46bc8b[_0x53387d(0xbc6)][_0x53387d(0xac0)];_0x2c48f5++){if(_0x1bf702>=_0x46bc8b['parsedLyrics'][_0x2c48f5]['time'])_0x101221=_0x2c48f5;else break;}if(_0x101221===_0x46bc8b[_0x53387d(0x107a)])return;_0x46bc8b[_0x53387d(0x107a)]=_0x101221,_0x5770eb();const _0x1c6367=document[_0x53387d(0xfa0)](_0x53387d(0x32a));_0x1c6367&&(_0x101221>-0x1&&_0x46bc8b[_0x53387d(0xbc6)][_0x101221]?_0x1c6367['textContent']=_0x46bc8b[_0x53387d(0xbc6)][_0x101221][_0x53387d(0xda3)]:_0x1c6367['textContent']=_0x53387d(0x104c));const _0x503040=document['getElementById']('global-lyrics-bar');_0x503040[_0x53387d(0x128f)][_0x53387d(0xea7)](_0x53387d(0xdcc))&&(_0x101221>-0x1&&_0x46bc8b[_0x53387d(0xbc6)][_0x101221]?_0x503040[_0x53387d(0xc62)]=_0x46bc8b[_0x53387d(0xbc6)][_0x101221][_0x53387d(0xda3)]:_0x503040['textContent']='♪');}function _0x5770eb(_0x52b122=![]){const _0x16ea56=_0x7c5117,_0x13e26d=_0x52b122?_0x16ea56(0x11bd):_0x16ea56(0x122d),_0x18c131=_0x52b122?'#fullscreen-lyrics-container':_0x16ea56(0x20b),_0x456ddd=document[_0x16ea56(0xfb1)](_0x13e26d),_0x12d895=document[_0x16ea56(0xfb1)](_0x18c131);if(!_0x456ddd||!_0x12d895)return;const _0x51d2a2=_0x456ddd[_0x16ea56(0x2a1)](_0x16ea56(0xee9));_0x51d2a2[_0x16ea56(0x458)](_0x370434=>_0x370434[_0x16ea56(0x128f)][_0x16ea56(0x443)](_0x16ea56(0xa37)));if(_0x46bc8b[_0x16ea56(0x107a)]===-0x1){_0x456ddd[_0x16ea56(0x63b)][_0x16ea56(0x1268)]=_0x16ea56(0x1245);return;}const _0x15f422=_0x456ddd[_0x16ea56(0xfb1)](_0x16ea56(0xd7a)+_0x46bc8b['currentLyricIndex']+'\x22]');if(_0x15f422){_0x15f422[_0x16ea56(0x128f)][_0x16ea56(0x1327)](_0x16ea56(0xa37));const _0x578c28=_0x12d895[_0x16ea56(0x720)],_0x44e47e=_0x578c28/2.2-_0x15f422[_0x16ea56(0x7e3)]-_0x15f422['offsetHeight']/0x2;_0x456ddd[_0x16ea56(0x63b)]['transform']=_0x16ea56(0xedf)+_0x44e47e+_0x16ea56(0x116f);}}function _0x404685(_0x453965){const _0x5aa937=_0x7c5117;if(isNaN(_0x453965)||_0x453965<0x0)return'0:00';const _0x588e80=Math[_0x5aa937(0x13e5)](_0x453965/0x3c),_0xf3ee63=Math[_0x5aa937(0x13e5)](_0x453965%0x3c);return _0x588e80+':'+String(_0xf3ee63)['padStart'](0x2,'0');}let _0x48b326=0x0,_0x206e6f;function _0xc54d74(){_0x206e6f&&cancelAnimationFrame(_0x206e6f);function _0x220364(){const _0x5f498b=_0x5817;if(!_0x46bc8b[_0x5f498b(0xcc5)]||!_0x447ac1[_0x5f498b(0x11c7)])return;const _0x42b721=performance[_0x5f498b(0xc22)](),_0x12f5a4=_0x447ac1[_0x5f498b(0x1495)],_0x17e8b7=_0x447ac1[_0x5f498b(0x11c7)],_0x463893=_0x12f5a4/_0x17e8b7*0x64;document[_0x5f498b(0xfa0)]('music-progress-fill')[_0x5f498b(0x63b)]['width']=_0x463893+'%',_0x42b721-_0x48b326>0x3e8&&(document[_0x5f498b(0xfa0)](_0x5f498b(0xf52))['textContent']=_0x404685(_0x12f5a4),document[_0x5f498b(0xfa0)](_0x5f498b(0x1270))[_0x5f498b(0xc62)]=_0x404685(_0x17e8b7),_0x48b326=_0x42b721),_0x42500b(_0x12f5a4),_0x206e6f=requestAnimationFrame(_0x220364);}_0x206e6f=requestAnimationFrame(_0x220364);}function _0x17d368(){const _0x45c8ce=_0x7c5117;if(!lastRawAiResponse){alert(_0x45c8ce(0x79b));return;}const _0x1b6f68=document[_0x45c8ce(0xfa0)](_0x45c8ce(0x82e)),_0x126706=document[_0x45c8ce(0xfa0)](_0x45c8ce(0x4e5));_0x126706[_0x45c8ce(0x1331)]='';const _0x4fcc8f=_0x3b585b(lastRawAiResponse);if(_0x4fcc8f&&_0x4fcc8f['length']>0x0)_0x4fcc8f[_0x45c8ce(0x458)](_0x1c6c23=>{const _0x63492d=_0x45c8ce;if(typeof _0x1c6c23===_0x63492d(0xf2e)&&_0x1c6c23!==null)try{const _0x41147f=JSON['stringify'](_0x1c6c23,null,0x2),_0xff3ffe=_0x247878(_0x41147f);_0x126706[_0x63492d(0x1155)](_0xff3ffe);}catch(_0x1c915b){console[_0x63492d(0x52b)](_0x63492d(0xfbc),_0x1c6c23,_0x1c915b);}else{if(typeof _0x1c6c23===_0x63492d(0x857)){const _0x508741=_0x247878(_0x1c6c23);_0x126706['appendChild'](_0x508741),console[_0x63492d(0x7fa)]('在导演模式中发现一个无效的片段\x20(来自parseAiResponse的文本回退):',_0x1c6c23);}}});else{const _0x231080=_0x247878(lastRawAiResponse);_0x126706[_0x45c8ce(0x1155)](_0x231080);}_0x1b6f68[_0x45c8ce(0x128f)]['add'](_0x45c8ce(0xdcc));}function _0x247878(_0x26a231=''){const _0x48e2af=_0x7c5117,_0x39bab9=document['createElement'](_0x48e2af(0xd53));_0x39bab9[_0x48e2af(0x1287)]=_0x48e2af(0x1440);const _0x22a824={'text':{'type':'text','content':_0x48e2af(0x108a)},'sticker':{'type':_0x48e2af(0xf14),'url':_0x48e2af(0x61c),'meaning':'表情含义'},'image':{'type':_0x48e2af(0x8b0),'description':_0x48e2af(0x557)},'voice':{'type':'voice_message','content':_0x48e2af(0x873)},'transfer':{'type':_0x48e2af(0x35f),'amount':5.2,'note':_0x48e2af(0xcce)},'offline':{'type':_0x48e2af(0x1492),'content':_0x48e2af(0x93a)},'quote':{'type':_0x48e2af(0x6d4),'target_timestamp':0x499602d2,'reply_content':'在这里输入回复内容'},'nai':{'type':'naiimag','prompt':_0x48e2af(0xb54)}};return _0x39bab9['innerHTML']=_0x48e2af(0x11f6)+_0x26a231+_0x48e2af(0x5c0)+JSON[_0x48e2af(0x7cc)](_0x22a824[_0x48e2af(0xda3)])+_0x48e2af(0x14ef)+JSON[_0x48e2af(0x7cc)](_0x22a824[_0x48e2af(0xf14)])+'\x27>表情</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27'+JSON[_0x48e2af(0x7cc)](_0x22a824[_0x48e2af(0x13ba)])+'\x27>图片</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27'+JSON[_0x48e2af(0x7cc)](_0x22a824['voice'])+_0x48e2af(0x60f)+JSON[_0x48e2af(0x7cc)](_0x22a824[_0x48e2af(0x35f)])+_0x48e2af(0x331)+JSON[_0x48e2af(0x7cc)](_0x22a824[_0x48e2af(0xc3d)])+_0x48e2af(0x389)+JSON['stringify'](_0x22a824['quote'])+'\x27>引用</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22format-btn\x22\x20data-template=\x27'+JSON[_0x48e2af(0x7cc)](_0x22a824['nai'])+_0x48e2af(0x30b),_0x39bab9[_0x48e2af(0xfb1)](_0x48e2af(0x819))[_0x48e2af(0x7b8)](_0x48e2af(0xb4a),()=>{const _0x48ffa8=_0x48e2af;_0x39bab9[_0x48ffa8(0x443)]();}),_0x39bab9[_0x48e2af(0x2a1)]('.format-btn')[_0x48e2af(0x458)](_0x51dfe4=>{const _0x487fa8=_0x48e2af;_0x51dfe4[_0x487fa8(0x7b8)](_0x487fa8(0xb4a),()=>{const _0x511464=_0x487fa8,_0x3afe74=_0x51dfe4[_0x511464(0x8df)]['template'],_0x488d70=_0x39bab9['querySelector'](_0x511464(0x338));if(_0x3afe74&&_0x488d70)try{const _0x2db4c3=JSON[_0x511464(0x4a0)](_0x3afe74);_0x488d70['value']=JSON[_0x511464(0x7cc)](_0x2db4c3,null,0x2),_0x488d70[_0x511464(0x10c7)]();}catch(_0x52bd57){console[_0x511464(0x52b)]('解析格式模板失败:',_0x52bd57);}});}),_0x39bab9;}async function _0x370aa5(){const _0x53483c=_0x7c5117,_0x57a52d=new Map();let _0x3e54c4=null;if(lastPrivateMessagesSent[_0x53483c(0xac0)]>0x0){console[_0x53483c(0x4ee)](_0x53483c(0x2d9)+lastPrivateMessagesSent[_0x53483c(0xac0)]+_0x53483c(0x605));const _0x207542=[...lastPrivateMessagesSent];_0x3e54c4=_0x207542['values']();const _0x36eadb=[...new Set(_0x207542[_0x53483c(0x556)](_0x2b089f=>_0x2b089f['chatId']))];for(const _0x1214c9 of _0x36eadb){const _0x23932d=await _0x372b85[_0x53483c(0x1260)][_0x53483c(0x70d)](_0x1214c9);_0x23932d&&_0x57a52d[_0x53483c(0xe5d)](_0x1214c9,_0x23932d);}for(const _0x4e5fd3 of _0x207542){const _0xc913bb=_0x57a52d[_0x53483c(0x70d)](_0x4e5fd3[_0x53483c(0xe94)]);_0xc913bb&&(_0xc913bb[_0x53483c(0xc88)]=_0xc913bb[_0x53483c(0xc88)]['filter'](_0x1ff444=>_0x1ff444[_0x53483c(0xe55)]!==_0x4e5fd3[_0x53483c(0xe55)]));}_0x57a52d[_0x53483c(0xbc3)]>0x0&&await _0x372b85['chats'][_0x53483c(0x65d)](Array[_0x53483c(0x3aa)](_0x57a52d['values']())),lastPrivateMessagesSent=[];}const _0x4dcfe1=_0x8f0871[_0x53483c(0x1260)][_0x8f0871[_0x53483c(0xac8)]];if(!_0x4dcfe1)return;const _0x1e588e=document[_0x53483c(0xfa0)](_0x53483c(0x4e5)),_0x39ed73=_0x1e588e[_0x53483c(0x2a1)](_0x53483c(0x338)),_0x53fe1f=Array[_0x53483c(0x3aa)](_0x39ed73)[_0x53483c(0x556)](_0x226998=>_0x226998[_0x53483c(0x4f6)][_0x53483c(0xa06)]())[_0x53483c(0xde7)](Boolean);_0x4dcfe1[_0x53483c(0xc88)]=_0x4dcfe1[_0x53483c(0xc88)][_0x53483c(0xde7)](_0x4afdc0=>!lastResponseTimestamps[_0x53483c(0xf95)](_0x4afdc0[_0x53483c(0xe55)]));if(_0x53fe1f[_0x53483c(0xac0)]===0x0){await _0x372b85[_0x53483c(0x1260)]['put'](_0x4dcfe1),_0x54d32b(_0x8f0871[_0x53483c(0xac8)]),_0x2d75fb(),document['getElementById'](_0x53483c(0x82e))['classList'][_0x53483c(0x443)]('visible'),lastRawAiResponse='',lastResponseTimestamps=[];return;}let _0x2afb10=[];for(const _0x9235d3 of _0x53fe1f){try{const _0x3393f6=JSON[_0x53483c(0x4a0)](_0x9235d3);_0x2afb10[_0x53483c(0x481)](_0x3393f6);}catch(_0x1fcd35){console[_0x53483c(0x7fa)](_0x53483c(0x84d),_0x9235d3);}}let _0x11772b=[],_0xda988e=Date[_0x53483c(0xc22)]();const _0x28f526=new Map();for(const _0x51b192 of _0x2afb10){if(!_0x51b192||typeof _0x51b192!==_0x53483c(0xf2e)||!_0x51b192['type']){console[_0x53483c(0x7fa)](_0x53483c(0x1123),_0x51b192);continue;}let _0x379978=null;const _0x522dfb={'role':_0x53483c(0x10af),'senderName':_0x51b192[_0x53483c(0x1023)]||_0x4dcfe1[_0x53483c(0x93e)],'timestamp':_0xda988e++};switch(_0x51b192['type']){case _0x53483c(0xc45):{const _0x32839e=_0x51b192[_0x53483c(0x1023)],_0x393c4f=_0x51b192[_0x53483c(0xb48)],_0x38ed4f=_0x8f0871[_0x53483c(0x9dd)][_0x53483c(0xff8)]||_0x53483c(0x8d4);if(_0x393c4f===_0x38ed4f){const _0x26bf54=Object[_0x53483c(0x142f)](_0x8f0871[_0x53483c(0x1260)])[_0x53483c(0x7ed)](_0xd1b876=>!_0xd1b876[_0x53483c(0x1364)]&&_0xd1b876['originalName']===_0x32839e);if(_0x26bf54){if(!_0x28f526['has'](_0x26bf54['id'])){const _0xad98ab=_0x57a52d[_0x53483c(0x70d)](_0x26bf54['id'])||await _0x372b85['chats'][_0x53483c(0x70d)](_0x26bf54['id']);_0x28f526[_0x53483c(0xe5d)](_0x26bf54['id'],_0xad98ab);}const _0x14b16f=_0x28f526[_0x53483c(0x70d)](_0x26bf54['id']),_0x1989fd=Array['isArray'](_0x51b192[_0x53483c(0x1469)])?_0x51b192[_0x53483c(0x1469)]:[_0x51b192['content']];let _0x33a15a=0x0;for(const _0x583bc6 of _0x1989fd){if(!_0x583bc6||!_0x583bc6[_0x53483c(0xa06)]())continue;const _0x21bde1=_0x3e54c4?_0x3e54c4[_0x53483c(0x824)]()[_0x53483c(0x4f6)]:null,_0x20e6fc=_0x21bde1&&_0x21bde1[_0x53483c(0xe94)]===_0x26bf54['id']?_0x21bde1[_0x53483c(0xe55)]:_0xda988e++,_0x433339={'role':_0x53483c(0x10af),'senderName':_0x32839e,'content':_0x583bc6,'timestamp':_0x20e6fc};lastPrivateMessagesSent[_0x53483c(0x481)]({'chatId':_0x26bf54['id'],'timestamp':_0x433339['timestamp']}),_0x14b16f['history'][_0x53483c(0x481)](_0x433339),_0x33a15a++;}_0x33a15a>0x0&&(_0x8f0871[_0x53483c(0xac8)]!==_0x26bf54['id']&&(_0x14b16f[_0x53483c(0x28d)]=(_0x14b16f[_0x53483c(0x28d)]||0x0)+_0x33a15a,_0x1d3fa5(_0x26bf54['id'],_0x26bf54[_0x53483c(0x1023)]+_0x53483c(0x53b)+_0x33a15a+_0x53483c(0x6b0)))),_0x379978=null;}else console[_0x53483c(0x7fa)]('AI\x20'+_0x32839e+'\x20尝试发送私信，但未找到其对应的私聊会话。'),_0x379978=null;}else console[_0x53483c(0x7fa)](_0x53483c(0xfeb)+_0x393c4f+')，此功能暂不支持。'),_0x379978=null;continue;}case _0x53483c(0x1515):{const _0xd62c7a=_0x53483c(0x828)+(_0x51b192['analysis']||'无')+_0x53483c(0xb7c)+(_0x51b192[_0x53483c(0x198)]||'无')+_0x53483c(0x2bd)+JSON['stringify'](_0x51b192[_0x53483c(0x155a)]||{}),_0x3a81a5={'role':_0x53483c(0x1417),'content':_0xd62c7a,'timestamp':_0xda988e++,'isHidden':!![]};_0x4dcfe1[_0x53483c(0xc88)][_0x53483c(0x481)](_0x3a81a5),_0x11772b[_0x53483c(0x481)](_0x3a81a5[_0x53483c(0xe55)]);continue;}case _0x53483c(0xda3):_0x379978={..._0x522dfb,'content':String(_0x51b192[_0x53483c(0x1469)]||_0x51b192[_0x53483c(0x790)])};break;case _0x53483c(0xf14):{let _0x6bd3b1=![];if(_0x51b192[_0x53483c(0x3f5)]&&_0x51b192[_0x53483c(0x1421)])_0x379978={..._0x522dfb,'type':_0x53483c(0xf14),'content':_0x51b192[_0x53483c(0x3f5)],'meaning':_0x51b192['meaning']},_0x6bd3b1=!![];else{if(_0x51b192['meaning']){const _0x584e8f=_0x8f0871[_0x53483c(0x413)][_0x53483c(0x7ed)](_0x57908a=>_0x57908a[_0x53483c(0x1023)]===_0x51b192[_0x53483c(0x1421)]);_0x584e8f?(_0x379978={..._0x522dfb,'type':_0x53483c(0xf14),'content':_0x584e8f[_0x53483c(0x3f5)],'meaning':_0x584e8f[_0x53483c(0x1023)]},_0x6bd3b1=!![]):(_0x379978={..._0x522dfb,'type':_0x53483c(0xda3),'content':_0x53483c(0x103c)+_0x51b192['meaning']+']'},_0x6bd3b1=!![]);}else{if(_0x51b192['url']){_0x379978={..._0x522dfb,'type':'sticker','content':_0x51b192[_0x53483c(0x3f5)]};const _0x531247=_0x8f0871[_0x53483c(0x413)]['find'](_0x441a8b=>_0x441a8b[_0x53483c(0x3f5)]===_0x51b192[_0x53483c(0x3f5)]);_0x379978['meaning']=_0x531247?_0x531247[_0x53483c(0x1023)]:'未知表情',_0x6bd3b1=!![];}else{if(_0x51b192[_0x53483c(0x1469)]&&typeof _0x51b192[_0x53483c(0x1469)]===_0x53483c(0x857)&&_0x4a5ebd[_0x53483c(0x3fb)](_0x51b192[_0x53483c(0x1469)])){_0x379978={..._0x522dfb,'type':_0x53483c(0xf14),'content':_0x51b192[_0x53483c(0x1469)]};const _0xd4a4cd=_0x8f0871[_0x53483c(0x413)][_0x53483c(0x7ed)](_0x3c4163=>_0x3c4163['url']===_0x51b192[_0x53483c(0x1469)]);_0x379978[_0x53483c(0x1421)]=_0xd4a4cd?_0xd4a4cd[_0x53483c(0x1023)]:_0x53483c(0x74f),_0x6bd3b1=!![];}}}}if(!_0x6bd3b1){console[_0x53483c(0x52b)]('导演模式保存(Sticker):\x20指令无效或缺少必要字段\x20(meaning/url/content):',_0x51b192);continue;}break;}case'ai_image':_0x379978={..._0x522dfb,'type':_0x53483c(0x8b0),'content':_0x51b192[_0x53483c(0x211)],'image_prompt':_0x51b192[_0x53483c(0xe0d)]};break;case _0x53483c(0x1a0):_0x379978={..._0x522dfb,'type':_0x53483c(0x1a0),'imageUrl':_0x51b192['imageUrl'],'prompt':_0x51b192[_0x53483c(0xa62)],'fullPrompt':_0x51b192[_0x53483c(0x1089)]};break;case'voice_message':_0x379978={..._0x522dfb,'type':'voice_message','content':_0x51b192[_0x53483c(0x1469)]};break;case _0x53483c(0x35f):_0x379978={..._0x522dfb,'type':_0x53483c(0x35f),'amount':_0x51b192['amount'],'note':_0x51b192[_0x53483c(0x14d7)],'receiverName':_0x51b192[_0x53483c(0x48c)]||'我'};break;case _0x53483c(0x1332):_0x379978={..._0x522dfb,'type':_0x53483c(0x1332),'productInfo':_0x51b192[_0x53483c(0x51a)],'amount':_0x51b192[_0x53483c(0x4a8)],'status':_0x53483c(0x2ea),'countdownEndTime':Date['now']()+0xf*0x3c*0x3e8};break;case _0x53483c(0x1492):_0x379978={..._0x522dfb,..._0x51b192};break;case'gomoku_move':{const _0x39760c=_0x1dbbbb[_0x4dcfe1['id']];if(_0x39760c){const _0x4704db=_0x39760c[_0x53483c(0xc88)][_0x53483c(0x401)](_0x462704=>_0x462704[_0x53483c(0xfcd)]===0x2);if(_0x4704db>-0x1){const _0x522e9f=_0x39760c[_0x53483c(0xc88)][_0x4704db];_0x39760c[_0x53483c(0x1040)][_0x522e9f['y']][_0x522e9f['x']]=0x0,_0x39760c[_0x53483c(0xc88)][_0x53483c(0x11ac)](_0x4704db,0x1),console['log'](_0x53483c(0x1c4)+_0x522e9f['x']+',\x20'+_0x522e9f['y']+_0x53483c(0x2d4));}}const _0x163e5b=parseInt(_0x51b192['x']),_0x342d31=parseInt(_0x51b192['y']);!isNaN(_0x163e5b)&&!isNaN(_0x342d31)?_0x2c1d49({'x':_0x163e5b,'y':_0x342d31},!![]):console['warn'](_0x53483c(0x1369),_0x51b192);continue;}case'update_thoughts':{if(!_0x4dcfe1['isGroup']){if(_0x51b192[_0x53483c(0x868)])_0x4dcfe1[_0x53483c(0xfb3)]=String(_0x51b192[_0x53483c(0x868)]);if(_0x51b192[_0x53483c(0xa69)])_0x4dcfe1['randomJottings']=String(_0x51b192[_0x53483c(0xa69)]);if(!Array[_0x53483c(0x345)](_0x4dcfe1['thoughtsHistory']))_0x4dcfe1['thoughtsHistory']=[];_0x4dcfe1['thoughtsHistory'][_0x53483c(0x481)]({'heartfeltVoice':_0x4dcfe1[_0x53483c(0xfb3)],'randomJJottings':_0x4dcfe1[_0x53483c(0xa30)],'timestamp':Date[_0x53483c(0xc22)]()});if(_0x4dcfe1['thoughtsHistory']['length']>0x32)_0x4dcfe1[_0x53483c(0x1378)][_0x53483c(0x3e3)]();}continue;}case'quote_reply':{const _0xb89c8f=_0x4dcfe1[_0x53483c(0xc88)][_0x53483c(0x7ed)](_0x522677=>_0x522677['timestamp']===_0x51b192[_0x53483c(0xdda)]);let _0x317bdf=null;if(_0xb89c8f){let _0x466d91=_0xb89c8f[_0x53483c(0x213)];_0xb89c8f[_0x53483c(0xc92)]===_0x53483c(0xcb0)&&(_0x466d91=_0x4dcfe1[_0x53483c(0x1364)]?_0x4dcfe1[_0x53483c(0x12d7)]['myNickname']||'我':_0x8f0871[_0x53483c(0x9dd)][_0x53483c(0xff8)]||_0x53483c(0x8d4)),_0x317bdf={'timestamp':_0x51b192[_0x53483c(0xdda)],'senderName':_0x466d91,'content':String(_0xb89c8f[_0x53483c(0x1469)]||'')};}else _0x317bdf={'timestamp':_0x51b192[_0x53483c(0xdda)],'senderName':_0x53483c(0x5de),'content':'原始消息已删除或不存在'};_0x379978={..._0x522dfb,'content':_0x51b192[_0x53483c(0xf98)],'quote':_0x317bdf};break;}default:console['warn'](_0x53483c(0x44c),_0x51b192[_0x53483c(0x682)],_0x51b192);if(_0x51b192[_0x53483c(0x1469)])_0x379978={..._0x522dfb,'content':String(_0x51b192[_0x53483c(0x1469)])};else continue;break;}_0x379978&&(_0x4dcfe1[_0x53483c(0xc88)][_0x53483c(0x481)](_0x379978),_0x11772b[_0x53483c(0x481)](_0x379978[_0x53483c(0xe55)]));}await _0x372b85[_0x53483c(0x1260)][_0x53483c(0x11d5)](_0x4dcfe1),_0x28f526['size']>0x0&&await _0x372b85['chats'][_0x53483c(0x65d)](Array['from'](_0x28f526[_0x53483c(0x142f)]())),_0x54d32b(_0x8f0871['activeChatId']),_0x2d75fb(),document[_0x53483c(0xfa0)]('ai-response-editor-modal')[_0x53483c(0x128f)][_0x53483c(0x443)](_0x53483c(0xdcc)),lastRawAiResponse=_0x53fe1f['join']('\x0a\x0a'),lastResponseTimestamps=_0x11772b,await _0x4abd86(_0x53483c(0x654),_0x53483c(0xfdd));}async function _0xe0323b(){const _0x1ca08b=_0x7c5117;if(!_0x5f3517)return;const _0x3ff5d1=0x2*0x3c*0x3e8,_0x1abe6a=_0x5f3517,_0x1d1d95=Date[_0x1ca08b(0xc22)]();if(_0x1d1d95-_0x1abe6a>_0x3ff5d1){_0x5b8bb0(),await _0x4abd86(_0x1ca08b(0x457),_0x1ca08b(0x8b3));return;}await _0x1b4f26(_0x1abe6a,!![]),_0x5b8bb0();}async function _0x1b4f26(_0x3186e0,_0x505e31){const _0x5af2b5=_0x7c5117,_0xbfa108=_0x8f0871[_0x5af2b5(0x1260)][_0x8f0871[_0x5af2b5(0xac8)]];if(!_0xbfa108)return;const _0x17133a=_0xbfa108[_0x5af2b5(0xc88)][_0x5af2b5(0xb22)](_0x1d98e9=>_0x1d98e9['timestamp']===_0x3186e0);if(_0x17133a===-0x1)return;const _0x16c905=_0xbfa108['history'][_0x17133a],_0x537b5e={'originalType':_0x16c905[_0x5af2b5(0x682)]||_0x5af2b5(0xda3),'originalContent':_0x16c905[_0x5af2b5(0x1469)],'originalMeaning':_0x16c905[_0x5af2b5(0x1421)],'originalQuote':_0x16c905['quote']};_0x16c905[_0x5af2b5(0x682)]='recalled_message',_0x16c905['content']=_0x505e31?_0x5af2b5(0x6f6):'对方撤回了一条消息',_0x16c905[_0x5af2b5(0xc98)]=_0x537b5e,delete _0x16c905['meaning'],delete _0x16c905[_0x5af2b5(0x12da)];if(_0x505e31){const _0x471e94=_0xbfa108[_0x5af2b5(0x1364)]?_0xbfa108[_0x5af2b5(0x12d7)]['myNickname']||'我':'我';let _0x3cbcb5='';if(_0x537b5e[_0x5af2b5(0x1a3)]===_0x5af2b5(0xf14))_0x3cbcb5=_0x5af2b5(0xa44)+(_0x537b5e[_0x5af2b5(0xa9b)]||'未知')+']';else _0x537b5e['originalType']===_0x5af2b5(0x8b0)||_0x537b5e[_0x5af2b5(0x1a3)]===_0x5af2b5(0x838)?_0x3cbcb5=_0x5af2b5(0x645)+_0x537b5e['originalContent']+']':_0x3cbcb5='“'+String(_0x537b5e[_0x5af2b5(0x297)])+'”';const _0x5ccb6b={'role':_0x5af2b5(0x1417),'content':_0x5af2b5(0x206)+_0x471e94+_0x5af2b5(0x224)+_0x3cbcb5+'。请你对此作出回应，可以表现出好奇、开玩笑（比如\x27我截图了！\x27）、或者根据你的人设表示理解或疑惑。]','timestamp':Date[_0x5af2b5(0xc22)](),'isHidden':!![]};_0xbfa108['history'][_0x5af2b5(0x481)](_0x5ccb6b);}await _0x372b85[_0x5af2b5(0x1260)][_0x5af2b5(0x11d5)](_0xbfa108),_0x54d32b(_0x8f0871[_0x5af2b5(0xac8)]),_0x505e31&&(_0x2d75fb(),_0x2264b2());}async function _0x3338b2(){const _0x2ce9a0=_0x7c5117;await _0x4f848a(),document[_0x2ce9a0(0xfa0)](_0x2ce9a0(0x8ed))['classList'][_0x2ce9a0(0x1327)]('visible');}async function _0x4f848a(){const _0x1c846f=_0x7c5117,_0x5d5514=document['getElementById'](_0x1c846f(0x143c)),_0xa4d4d1=await _0x372b85[_0x1c846f(0xa7a)][_0x1c846f(0x3bc)]();_0x5d5514[_0x1c846f(0x1331)]='',_0xa4d4d1['length']===0x0&&(_0x5d5514[_0x1c846f(0x1331)]='<p\x20style=\x22text-align:\x20center;\x20color:\x20var(--text-secondary);\x22>还没有任何分类</p>'),_0xa4d4d1[_0x1c846f(0x458)](_0x305239=>{const _0x27eb95=_0x1c846f,_0x2dc507=document[_0x27eb95(0xb4e)](_0x27eb95(0xd53));_0x2dc507['className']='existing-group-item',_0x2dc507[_0x27eb95(0x1331)]=_0x27eb95(0xb63)+_0x305239[_0x27eb95(0x1023)]+_0x27eb95(0x1274)+_0x305239['id']+_0x27eb95(0x966),_0x5d5514[_0x27eb95(0x1155)](_0x2dc507);});}async function _0x5887c9(){const _0x25348e=_0x7c5117,_0x425ec3=document[_0x25348e(0xfa0)](_0x25348e(0x13a7)),_0x3b4350=_0x425ec3[_0x25348e(0x4f6)][_0x25348e(0xa06)]();if(!_0x3b4350){alert(_0x25348e(0xda2));return;}const _0x12e8d1=await _0x372b85['worldBookCategories'][_0x25348e(0xdc7)]('name')['equals'](_0x3b4350)[_0x25348e(0x102a)]();if(_0x12e8d1){alert(_0x25348e(0x135a)+_0x3b4350+'\x22\x20已经存在了！');return;}await _0x372b85['worldBookCategories'][_0x25348e(0x1327)]({'name':_0x3b4350}),_0x425ec3[_0x25348e(0x4f6)]='',await _0x4f848a();}async function _0x48f0e4(_0x38af40){const _0x2c30f2=_0x7c5117,_0x1942d2=await _0x3f65ed(_0x2c30f2(0x1464),'删除分类后，该分类下的所有世界书将变为“未分类”。确定要删除吗？',{'confirmButtonClass':_0x2c30f2(0x611)});if(_0x1942d2){await _0x372b85[_0x2c30f2(0xa7a)][_0x2c30f2(0xf10)](_0x38af40);const _0x459524=await _0x372b85[_0x2c30f2(0x739)][_0x2c30f2(0xdc7)]('categoryId')[_0x2c30f2(0x8c2)](_0x38af40)[_0x2c30f2(0x3bc)]();for(const _0x5cc341 of _0x459524){_0x5cc341[_0x2c30f2(0x6b2)]=null,await _0x372b85[_0x2c30f2(0x739)][_0x2c30f2(0x11d5)](_0x5cc341);const _0x57801d=_0x8f0871['worldBooks'][_0x2c30f2(0x7ed)](_0x450c12=>_0x450c12['id']===_0x5cc341['id']);if(_0x57801d)_0x57801d['categoryId']=null;}await _0x4f848a();}}async function _0x344226(){const _0x1d25d7=_0x7c5117;if(!_0x5f3517)return;const _0x4347ee=_0x5f3517;_0x5b8bb0();const _0x29dfea=_0x8f0871[_0x1d25d7(0x1260)][_0x8f0871[_0x1d25d7(0xac8)]],_0x5dab8f=_0x29dfea[_0x1d25d7(0xc88)]['find'](_0x4819f0=>_0x4819f0['timestamp']===_0x4347ee);if(!_0x5dab8f)return;let _0x1947d1=String(_0x5dab8f[_0x1d25d7(0x1469)]||'')[_0x1d25d7(0x9fe)](0x0,0x32)+_0x1d25d7(0x1111);if(_0x5dab8f[_0x1d25d7(0x682)]===_0x1d25d7(0x8b0))_0x1947d1=_0x1d25d7(0x1a4)+_0x1947d1;const _0x52689e=await _0x3f65ed(_0x1d25d7(0x485),_0x1d25d7(0xdb8)+_0x1947d1+'”',{'confirmText':'确定发布'});if(_0x52689e){const _0x3dd536=_0x29dfea[_0x1d25d7(0x12d7)]['myNickname']||'我';!Array[_0x1d25d7(0x345)](_0x29dfea['announcements'])&&(_0x29dfea[_0x1d25d7(0x804)]=[]);const _0x4ef392={'id':_0x1d25d7(0x424)+Date[_0x1d25d7(0xc22)](),'messageTimestamp':_0x4347ee,'publisher':_0x3dd536,'publishedAt':Date[_0x1d25d7(0xc22)](),'isPinned':![]};_0x29dfea[_0x1d25d7(0x804)][_0x1d25d7(0x481)](_0x4ef392);const _0x3a3216={'role':_0x1d25d7(0x1417),'type':_0x1d25d7(0x260),'content':_0x3dd536+_0x1d25d7(0x1493),'timestamp':Date[_0x1d25d7(0xc22)]()};_0x29dfea[_0x1d25d7(0xc88)]['push'](_0x3a3216),await _0x372b85['chats'][_0x1d25d7(0x11d5)](_0x29dfea),_0x25d29f(_0x3a3216,_0x29dfea),_0x2d75fb(),await _0x4abd86('成功',_0x1d25d7(0xde3));}}async function _0x12e53c(){const _0x59f378=_0x7c5117,_0xbf7a51=_0x8f0871[_0x59f378(0x1260)][_0x8f0871[_0x59f378(0xac8)]],_0x2d1b0a=_0xbf7a51[_0x59f378(0x804)]||[];if(!_0xbf7a51||_0x2d1b0a['length']===0x0){_0x4abd86('提示',_0x59f378(0x1281));return;}const _0x587947=document[_0x59f378(0xfa0)]('announcement-board-content');_0x587947['innerHTML']='',_0x2d1b0a[_0x59f378(0x1376)]((_0x4fa309,_0x52f76b)=>(_0x52f76b[_0x59f378(0x67d)]?0x1:0x0)-(_0x4fa309[_0x59f378(0x67d)]?0x1:0x0));for(const _0x598845 of _0x2d1b0a){const _0x5dbf76=_0xbf7a51[_0x59f378(0xc88)]['find'](_0x335da6=>_0x335da6[_0x59f378(0xe55)]===_0x598845['messageTimestamp']),_0x2abda4=document[_0x59f378(0xb4e)](_0x59f378(0xd53));_0x2abda4[_0x59f378(0x1287)]=_0x59f378(0xb55);if(_0x5dbf76){const _0xa6706=await _0x20ac60(_0x5dbf76,_0xbf7a51);_0xa6706&&_0x2abda4[_0x59f378(0x1155)](_0xa6706);}else _0x2abda4[_0x59f378(0x1331)]=_0x59f378(0x1bf);_0x598845['isPinned']&&(_0x2abda4[_0x59f378(0x1331)]+='<div\x20class=\x22pinned-indicator\x22>📌</div>'),_0x2abda4[_0x59f378(0x1331)]+='<div\x20class=\x22announcement-item-actions\x22\x20data-anno-id=\x22'+_0x598845['id']+_0x59f378(0x7aa),_0x587947['appendChild'](_0x2abda4);}document[_0x59f378(0xfa0)]('announcement-board-modal')[_0x59f378(0x128f)][_0x59f378(0x1327)]('visible');}let _0x2712dd=null;function _0x2a1bd6(_0x4489cf){const _0x275dc0=_0x7c5117;_0x2712dd=_0x4489cf;const _0x30603f=_0x8f0871[_0x275dc0(0x1260)][_0x8f0871[_0x275dc0(0xac8)]],_0x58f1d7=_0x30603f[_0x275dc0(0x804)][_0x275dc0(0x7ed)](_0x473eb4=>_0x473eb4['id']===_0x4489cf);if(!_0x58f1d7)return;const _0x2fe29a=document['getElementById'](_0x275dc0(0x375));_0x2fe29a['textContent']=_0x58f1d7[_0x275dc0(0x67d)]?'取消置顶':_0x275dc0(0xfdb),document[_0x275dc0(0xfa0)](_0x275dc0(0x58d))[_0x275dc0(0x128f)][_0x275dc0(0x1327)](_0x275dc0(0xdcc));}async function _0x513c60(){const _0x2bd907=_0x7c5117;if(!_0x2712dd)return;const _0x507151=_0x8f0871[_0x2bd907(0x1260)][_0x8f0871['activeChatId']],_0x511dc6=_0x507151[_0x2bd907(0x804)][_0x2bd907(0x7ed)](_0x1154ae=>_0x1154ae['id']===_0x2712dd);_0x511dc6&&(_0x511dc6[_0x2bd907(0x67d)]=!_0x511dc6[_0x2bd907(0x67d)],await _0x372b85[_0x2bd907(0x1260)]['put'](_0x507151),_0x12e53c()),document[_0x2bd907(0xfa0)](_0x2bd907(0x58d))[_0x2bd907(0x128f)][_0x2bd907(0x443)]('visible');}async function _0x1a4228(){const _0x17010f=_0x7c5117;if(!_0x2712dd)return;const _0x3d87a6=await _0x3f65ed(_0x17010f(0x1464),_0x17010f(0x588),{'confirmButtonClass':_0x17010f(0x611)});if(_0x3d87a6){const _0x45841f=_0x8f0871[_0x17010f(0x1260)][_0x8f0871[_0x17010f(0xac8)]];_0x45841f['announcements']=_0x45841f[_0x17010f(0x804)][_0x17010f(0xde7)](_0x1e9d59=>_0x1e9d59['id']!==_0x2712dd),await _0x372b85[_0x17010f(0x1260)]['put'](_0x45841f),_0x12e53c();}document['getElementById'](_0x17010f(0x58d))[_0x17010f(0x128f)][_0x17010f(0x443)](_0x17010f(0xdcc));}let _0x4d11ef=![],_0x3595fb={'ai':null,'my':null};function _0x417b52(_0x284b62='chat'){const _0x2eb0a3=_0x7c5117,_0x5e965a=document[_0x2eb0a3(0xfa0)]('avatar-frame-modal');if(!_0x8f0871[_0x2eb0a3(0xac8)])return;const _0x26f703=_0x8f0871['chats'][_0x8f0871[_0x2eb0a3(0xac8)]];_0x4d11ef=_0x284b62===_0x2eb0a3(0x25d);if(_0x4d11ef){const _0x1e26ad=_0x26f703[_0x2eb0a3(0x2cf)][_0x2eb0a3(0x7ed)](_0x2de938=>_0x2de938['id']===_0x534a62);if(!_0x1e26ad)return;_0x3595fb['my']=_0x1e26ad[_0x2eb0a3(0x13e6)]||'',_0x177c16(!![],_0x1e26ad[_0x2eb0a3(0xc61)],_0x1e26ad[_0x2eb0a3(0x13e6)]);}else _0x3595fb['ai']=_0x26f703[_0x2eb0a3(0x12d7)][_0x2eb0a3(0x761)]||'',_0x3595fb['my']=_0x26f703[_0x2eb0a3(0x12d7)][_0x2eb0a3(0x107f)]||'',_0x177c16(![]);_0x5e965a[_0x2eb0a3(0x128f)][_0x2eb0a3(0x1327)]('visible');}function _0x177c16(_0x13f08c=![],_0x406b82=null,_0x227d79=null){const _0x163d32=_0x7c5117,_0x3c7ff7=document[_0x163d32(0xfa0)](_0x163d32(0xec4)),_0x2059b3=document['getElementById'](_0x163d32(0x1343)),_0x9adda7=_0x8f0871['chats'][_0x8f0871[_0x163d32(0xac8)]];_0x3c7ff7[_0x163d32(0x1331)]='',_0x2059b3[_0x163d32(0x1331)]='',document['querySelector'](_0x163d32(0x126f))[_0x163d32(0x63b)][_0x163d32(0x1248)]=_0x13f08c?'none':_0x163d32(0x138c),document[_0x163d32(0xfa0)](_0x163d32(0x1528))['style']['display']=_0x163d32(0x127c),document[_0x163d32(0xfa0)](_0x163d32(0x13a5))['style'][_0x163d32(0x1248)]=_0x163d32(0x11b5),document[_0x163d32(0xfa0)]('ai-frame-tab')[_0x163d32(0x128f)][_0x163d32(0x1327)](_0x163d32(0xa37)),document[_0x163d32(0xfa0)](_0x163d32(0x1345))[_0x163d32(0x128f)]['remove'](_0x163d32(0xa37));if(_0x13f08c)_0x6b2db5[_0x163d32(0x458)](_0x4d9f60=>{const _0x50dfce=_0x163d32,_0x1e97ea=_0x2ab43e(_0x4d9f60,'my',_0x406b82);_0x4d9f60[_0x50dfce(0x3f5)]===_0x227d79&&_0x1e97ea[_0x50dfce(0x128f)]['add'](_0x50dfce(0xaa0)),_0x3c7ff7['appendChild'](_0x1e97ea);});else{const _0x5c1d8e=_0x9adda7[_0x163d32(0x12d7)]['aiAvatar']||_0x1a2fc1,_0x1aa114=_0x9adda7[_0x163d32(0x12d7)]['myAvatar']||(_0x9adda7[_0x163d32(0x1364)]?_0x2c882e:_0x1a2fc1);_0x6b2db5[_0x163d32(0x458)](_0x459204=>{const _0x24c20d=_0x163d32,_0x396ae2=_0x2ab43e(_0x459204,'ai',_0x5c1d8e);if(_0x459204[_0x24c20d(0x3f5)]===_0x3595fb['ai'])_0x396ae2[_0x24c20d(0x128f)][_0x24c20d(0x1327)](_0x24c20d(0xaa0));_0x3c7ff7['appendChild'](_0x396ae2);const _0x3c8f91=_0x2ab43e(_0x459204,'my',_0x1aa114);if(_0x459204[_0x24c20d(0x3f5)]===_0x3595fb['my'])_0x3c8f91[_0x24c20d(0x128f)]['add'](_0x24c20d(0xaa0));_0x2059b3[_0x24c20d(0x1155)](_0x3c8f91);});}}function _0x2ab43e(_0x3b991b,_0x4e5ba1,_0x373756){const _0x254023=_0x7c5117,_0x3ce393=document['createElement']('div');return _0x3ce393[_0x254023(0x1287)]=_0x254023(0x1289),_0x3ce393['dataset'][_0x254023(0x387)]=_0x3b991b[_0x254023(0x3f5)],_0x3ce393['title']=_0x3b991b['name'],_0x3ce393[_0x254023(0x1331)]=_0x254023(0x1352)+_0x373756+_0x254023(0x676)+(_0x3b991b['url']?'<img\x20src=\x22'+_0x3b991b[_0x254023(0x3f5)]+_0x254023(0x854):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3ce393[_0x254023(0x7b8)]('click',()=>{const _0x1f5637=_0x254023;_0x3595fb[_0x4e5ba1]=_0x3b991b[_0x1f5637(0x3f5)];const _0x47a0a2=_0x4e5ba1==='ai'?document[_0x1f5637(0xfa0)](_0x1f5637(0xec4)):document[_0x1f5637(0xfa0)]('my-frame-grid');_0x47a0a2[_0x1f5637(0x2a1)](_0x1f5637(0x124d))['forEach'](_0x45dc4c=>_0x45dc4c[_0x1f5637(0x128f)][_0x1f5637(0x443)](_0x1f5637(0xaa0))),_0x3ce393['classList']['add'](_0x1f5637(0xaa0));}),_0x3ce393;}async function _0x4e16e3(){const _0x33bb98=_0x7c5117;if(!_0x8f0871[_0x33bb98(0xac8)])return;const _0xdaaccc=_0x8f0871['chats'][_0x8f0871[_0x33bb98(0xac8)]];if(_0x4d11ef){const _0xc2d3f9=_0xdaaccc[_0x33bb98(0x2cf)][_0x33bb98(0x7ed)](_0x2d3919=>_0x2d3919['id']===_0x534a62);_0xc2d3f9&&(_0xc2d3f9[_0x33bb98(0x13e6)]=_0x3595fb['my']);}else _0xdaaccc[_0x33bb98(0x12d7)][_0x33bb98(0x761)]=_0x3595fb['ai'],_0xdaaccc[_0x33bb98(0x12d7)]['myAvatarFrame']=_0x3595fb['my'];await _0x372b85[_0x33bb98(0x1260)][_0x33bb98(0x11d5)](_0xdaaccc);if(!_0x4d11ef&&!_0xdaaccc[_0x33bb98(0x1364)]){const _0x3721e0=_0xdaaccc['id'];for(const _0x4dae1a of Object['values'](_0x8f0871[_0x33bb98(0x1260)])){if(_0x4dae1a[_0x33bb98(0x1364)]&&_0x4dae1a[_0x33bb98(0x2cf)]){const _0x438f98=_0x4dae1a[_0x33bb98(0x2cf)][_0x33bb98(0x7ed)](_0x5d7ff3=>_0x5d7ff3['id']===_0x3721e0);_0x438f98&&(_0x438f98[_0x33bb98(0x13e6)]=_0xdaaccc[_0x33bb98(0x12d7)]['aiAvatarFrame'],await _0x372b85['chats'][_0x33bb98(0x11d5)](_0x4dae1a),console[_0x33bb98(0x4ee)]('已同步角色\x20'+_0x3721e0+_0x33bb98(0x25c)+_0x4dae1a[_0x33bb98(0x1023)]+'\x22'));}}}document[_0x33bb98(0xfa0)](_0x33bb98(0x66a))['classList']['remove'](_0x33bb98(0xdcc)),_0x54d32b(_0x8f0871[_0x33bb98(0xac8)]),alert(_0x33bb98(0x433)),_0x4d11ef=![];}function _0x1b2ad1(){const _0x4b1666=_0x7c5117;_0x274652=!_0x274652;const _0x5ca5a2=document['getElementById'](_0x4b1666(0xb7e)),_0x1c1a64=document[_0x4b1666(0xfa0)]('frame-action-bar'),_0x3e2f0b=document[_0x4b1666(0xfa0)](_0x4b1666(0x9c4));document[_0x4b1666(0x2a1)](_0x4b1666(0x6e3))[_0x4b1666(0x458)](_0x48c73a=>{const _0x3cdc8b=_0x4b1666;_0x48c73a['classList'][_0x3cdc8b(0xb80)](_0x3cdc8b(0x4cb),_0x274652);}),_0x274652?(_0x5ca5a2[_0x4b1666(0xc62)]='完成',_0x1c1a64[_0x4b1666(0x63b)][_0x4b1666(0x1248)]=_0x4b1666(0x138c),_0x3e7810['clear'](),_0x3e2f0b[_0x4b1666(0xb34)]=![],_0x550847()):(_0x5ca5a2[_0x4b1666(0xc62)]='管理',_0x1c1a64[_0x4b1666(0x63b)]['display']=_0x4b1666(0x11b5),document[_0x4b1666(0x2a1)]('.frame-item.selected')[_0x4b1666(0x458)](_0x33d90d=>{const _0x65af15=_0x4b1666;_0x33d90d['classList'][_0x65af15(0x443)]('selected');}));}function _0x550847(){const _0x2392bd=_0x7c5117,_0x36550f=document[_0x2392bd(0xfa0)](_0x2392bd(0xea3));_0x36550f[_0x2392bd(0xc62)]=_0x2392bd(0x668)+_0x3e7810[_0x2392bd(0xbc3)]+')';}function _0x2faa84(){const _0x33b85a=_0x7c5117,_0x3e0cd6=document[_0x33b85a(0xfa0)]('select-all-frames-checkbox')[_0x33b85a(0xb34)],_0x3eb3a1=document[_0x33b85a(0xfb1)](_0x33b85a(0xe84));if(!_0x3eb3a1)return;_0x3eb3a1['querySelectorAll'](_0x33b85a(0x13e1))[_0x33b85a(0x458)](_0x49d8c5=>{const _0x477555=_0x33b85a,_0x3fc940=parseInt(_0x49d8c5['querySelector'](_0x477555(0x55e))[_0x477555(0x8df)]['id']);if(isNaN(_0x3fc940))return;_0x49d8c5[_0x477555(0x128f)][_0x477555(0xb80)](_0x477555(0xaa0),_0x3e0cd6),_0x3e0cd6?_0x3e7810[_0x477555(0x1327)](_0x3fc940):_0x3e7810[_0x477555(0xf10)](_0x3fc940);}),_0x550847();}async function _0x489716(){const _0x3aff5d=_0x7c5117;if(_0x3e7810['size']===0x0)return;const _0x203135=await _0x3f65ed('确认删除',_0x3aff5d(0xc1c)+_0x3e7810['size']+_0x3aff5d(0x8b4),{'confirmButtonClass':'btn-danger'});if(_0x203135){const _0x26bb53=[..._0x3e7810];await _0x372b85[_0x3aff5d(0x753)][_0x3aff5d(0x504)](_0x26bb53),_0x1b2ad1(),_0x177c16(_0x4d11ef),await _0x4abd86('删除成功',_0x3aff5d(0x1339));}}function _0xcbf629(_0x55d90f){const _0x4c8e48=_0x7c5117,_0x56a044=document['getElementById'](_0x4c8e48(0x1084));_0x56a044&&(_0x56a044[_0x4c8e48(0x1331)]=_0x55d90f||'');}async function _0x3fa5ee(_0x49cbb4){const _0x3518af=_0x7c5117;if(!_0x46bc8b[_0x3518af(0x684)]||!_0x46bc8b[_0x3518af(0xac8)])return;const _0x4a0d61=_0x8f0871['chats'][_0x46bc8b[_0x3518af(0xac8)]];if(!_0x4a0d61)return;const _0x42d673=_0x4a0d61[_0x3518af(0x1364)]?_0x4a0d61['settings'][_0x3518af(0xda5)]||'我':'我',_0x23a760=_0x3518af(0x816)+_0x42d673+')\x20'+_0x49cbb4+']',_0x3b71c7={'role':_0x3518af(0x1417),'content':_0x23a760,'timestamp':Date[_0x3518af(0xc22)](),'isHidden':!![]};_0x4a0d61[_0x3518af(0xc88)]['push'](_0x3b71c7),await _0x372b85[_0x3518af(0x1260)][_0x3518af(0x11d5)](_0x4a0d61);}async function _0x215390(){const _0x55568d=_0x7c5117;if(_0x552199['size']===0x0)return;const _0x4ea869=_0x8f0871['chats'][_0x8f0871[_0x55568d(0xac8)]];if(!_0x4ea869)return;const _0x19c22b=document[_0x55568d(0xfa0)](_0x55568d(0x125d)),_0x5421ce=_0x19c22b['textContent'];_0x19c22b[_0x55568d(0xc62)]=_0x55568d(0x461),_0x19c22b[_0x55568d(0x104b)]=!![];const _0x39c4d1=document[_0x55568d(0xb4e)]('div'),_0x4a2b3d=document['getElementById']('phone-screen');_0x39c4d1['style'][_0x55568d(0xa92)]=_0x4a2b3d[_0x55568d(0x8a3)]+'px',_0x39c4d1[_0x55568d(0x63b)][_0x55568d(0x116c)]='absolute',_0x39c4d1['style'][_0x55568d(0x8ce)]='-9999px',_0x39c4d1[_0x55568d(0x63b)][_0x55568d(0xcb1)]=_0x55568d(0x8cd),_0x39c4d1[_0x55568d(0x63b)][_0x55568d(0x1248)]=_0x55568d(0x138c),_0x39c4d1[_0x55568d(0x63b)][_0x55568d(0x1446)]=_0x55568d(0x1575),_0x39c4d1[_0x55568d(0x63b)][_0x55568d(0x886)]=_0x55568d(0x1258);const _0x4185f4=document[_0x55568d(0xfa0)](_0x55568d(0xe95));_0x39c4d1['style'][_0x55568d(0xc93)]=_0x4185f4['style'][_0x55568d(0xc93)],_0x39c4d1[_0x55568d(0x63b)][_0x55568d(0x11f8)]=_0x4185f4[_0x55568d(0x63b)][_0x55568d(0x11f8)]||(document[_0x55568d(0xfa0)](_0x55568d(0x1025))[_0x55568d(0x128f)][_0x55568d(0xea7)](_0x55568d(0x10b0))?_0x55568d(0x14d0):'#f0f2f5');const _0x1d9652=document[_0x55568d(0xb4e)]('style');_0x1d9652[_0x55568d(0x1331)]=_0x55568d(0x1fe),document['head']['appendChild'](_0x1d9652);try{const _0x3462a3=_0x4185f4['querySelector'](_0x55568d(0x37c))[_0x55568d(0xb5c)](!![]);_0x3462a3[_0x55568d(0x128f)][_0x55568d(0x1327)](_0x55568d(0x29b));const _0x2105d3=document['createElement'](_0x55568d(0xd53)),_0x1a12d6=document[_0x55568d(0xfa0)]('chat-messages');_0x2105d3[_0x55568d(0x63b)][_0x55568d(0x1248)]=_0x55568d(0x138c),_0x2105d3['style'][_0x55568d(0x1446)]=_0x55568d(0x1575),_0x2105d3[_0x55568d(0x63b)][_0x55568d(0x4c0)]=_0x55568d(0x10f4),_0x2105d3[_0x55568d(0x63b)]['padding']='10px\x2015px\x2020px\x2015px',_0x2105d3[_0x55568d(0x63b)][_0x55568d(0xa92)]=_0x55568d(0x29a),_0x2105d3[_0x55568d(0x63b)][_0x55568d(0x97e)]=_0x55568d(0x5ff),_0x2105d3[_0x55568d(0x8df)][_0x55568d(0xb0d)]=_0x1a12d6[_0x55568d(0x8df)][_0x55568d(0xb0d)],_0x2105d3[_0x55568d(0x63b)][_0x55568d(0x2da)]('--chat-font-size',_0x1a12d6['style']['getPropertyValue'](_0x55568d(0x679)));const _0x55ce9f=_0x4185f4[_0x55568d(0xfb1)](_0x55568d(0x45d))['cloneNode'](!![]),_0x2dbc05=[..._0x552199][_0x55568d(0x1376)]((_0x288adf,_0x142735)=>_0x288adf-_0x142735);_0x2dbc05[_0x55568d(0x458)](_0x409b29=>{const _0x24bafb=_0x55568d,_0x373e52=document[_0x24bafb(0xfb1)]('.message-bubble[data-timestamp=\x22'+_0x409b29+'\x22]');if(_0x373e52){const _0x31f757=_0x373e52[_0x24bafb(0x187)]('.message-wrapper');_0x31f757&&_0x2105d3['appendChild'](_0x31f757[_0x24bafb(0xb5c)](!![]));}}),_0x39c4d1[_0x55568d(0x1155)](_0x3462a3),_0x39c4d1['appendChild'](_0x2105d3),_0x39c4d1[_0x55568d(0x1155)](_0x55ce9f),document[_0x55568d(0x1122)][_0x55568d(0x1155)](_0x39c4d1);const _0x47a00c=Array['from'](_0x39c4d1[_0x55568d(0x949)](_0x55568d(0xa5a))),_0x302ffb=_0x47a00c[_0x55568d(0x556)](_0x43a6d4=>new Promise((_0x28d81d,_0x392d08)=>{const _0x2181ec=_0x55568d;if(_0x43a6d4[_0x2181ec(0x53e)][_0x2181ec(0x9b8)](_0x2181ec(0x83b))){_0x28d81d();return;}const _0x49ba65=new Image();_0x49ba65[_0x2181ec(0xe3f)]=_0x2181ec(0x5bb),_0x49ba65[_0x2181ec(0x7c6)]=_0x28d81d,_0x49ba65[_0x2181ec(0x14b0)]=_0x28d81d,_0x49ba65[_0x2181ec(0x53e)]=_0x43a6d4['src'];}));await Promise['all'](_0x302ffb);const _0x403748=await html2canvas(_0x39c4d1,{'allowTaint':!![],'useCORS':!![],'backgroundColor':null,'scale':window[_0x55568d(0xf91)]||0x2});_0x403748[_0x55568d(0xb5b)](function(_0x527a5b){const _0x5c6972=_0x55568d,_0x1b3946=URL[_0x5c6972(0xe35)](_0x527a5b),_0x1002be=document[_0x5c6972(0xb4e)]('a');_0x1002be[_0x5c6972(0xb9e)]='EPhone-长截图-'+_0x4ea869[_0x5c6972(0x1023)]+'-'+Date[_0x5c6972(0xc22)]()+_0x5c6972(0x6c7),_0x1002be['href']=_0x1b3946,document['body'][_0x5c6972(0x1155)](_0x1002be),_0x1002be[_0x5c6972(0xb4a)](),document[_0x5c6972(0x1122)]['removeChild'](_0x1002be),URL['revokeObjectURL'](_0x1b3946);},'image/png');}catch(_0x401231){console[_0x55568d(0x52b)]('长截图生成失败:',_0x401231),await _0x4abd86(_0x55568d(0x1e6),_0x55568d(0x12d1));}finally{document['body'][_0x55568d(0x4e8)](_0x39c4d1),document[_0x55568d(0xdf2)][_0x55568d(0x4e8)](_0x1d9652),_0x19c22b[_0x55568d(0xc62)]=_0x5421ce,_0x19c22b[_0x55568d(0x104b)]=![],_0x17a1e5();}}function _0x3de267(_0x18eae7){const _0x4ced86=_0x7c5117;if(!_0x18eae7||typeof _0x18eae7!==_0x4ced86(0x857))return'';return _0x18eae7=_0x18eae7[_0x4ced86(0x128a)](/!h\{(.*?)\}/g,_0x4ced86(0x1120)),_0x18eae7=_0x18eae7['replace'](/!u\{(.*?)\}/g,_0x4ced86(0x105f)),_0x18eae7=_0x18eae7['replace'](/!e\{(.*?)\}/g,_0x4ced86(0xcd2)),_0x18eae7=_0x18eae7[_0x4ced86(0x128a)](/!w\{(.*?)\}/g,_0x4ced86(0x12a3)),_0x18eae7=_0x18eae7['replace'](/!m\{(.*?)\}/g,_0x4ced86(0x833)),_0x18eae7=_0x18eae7[_0x4ced86(0x128a)](/\|\|(.*?)\|\|/g,'<span\x20class=\x22spoiler\x22>$1</span>'),_0x18eae7=_0x18eae7[_0x4ced86(0x128a)](/\*\*(.*?)\*\*/g,_0x4ced86(0x1080)),_0x18eae7=_0x18eae7[_0x4ced86(0x128a)](/\~\~(.*?)\~\~/g,_0x4ced86(0xfc5)),_0x18eae7=_0x18eae7[_0x4ced86(0x128a)](/\*(.*?)\*/g,_0x4ced86(0x7e2)),_0x18eae7;}async function _0x10f4a4(){const _0x100e7e=_0x7c5117;console[_0x100e7e(0x4ee)](_0x100e7e(0x81d));let _0x37f1f9=0x0;const _0x183f4b=Object[_0x100e7e(0x142f)](_0x8f0871[_0x100e7e(0x1260)]);for(const _0x141ca5 of _0x183f4b){let _0x5149d1=![];for(const _0x879833 of _0x141ca5[_0x100e7e(0xc88)]){_0x879833[_0x100e7e(0x682)]===_0x100e7e(0x148b)&&_0x879833['packetType']===_0x100e7e(0xaf3)&&_0x879833['role']==='assistant'&&_0x879833[_0x100e7e(0xabf)](_0x100e7e(0x48c))&&!_0x879833[_0x100e7e(0xabf)]('receiverName')&&(_0x879833[_0x100e7e(0xe0f)]=_0x879833[_0x100e7e(0x48c)],delete _0x879833[_0x100e7e(0x48c)],_0x5149d1=!![],_0x37f1f9++);}_0x5149d1&&(console['log'](_0x100e7e(0xe38)+_0x141ca5['name']+_0x100e7e(0x392)),await _0x372b85['chats'][_0x100e7e(0x11d5)](_0x141ca5));}_0x37f1f9>0x0?(console[_0x100e7e(0x4ee)](_0x100e7e(0x13bd)+_0x37f1f9+_0x100e7e(0x1a9)),alert('检测到并成功修复了\x20'+_0x37f1f9+'\x20条旧的红包消息！页面将自动刷新以应用更改。'),location[_0x100e7e(0x1003)]()):console[_0x100e7e(0x4ee)](_0x100e7e(0xbb2));}function _0x18d436(_0x11b588){const _0xd07e0e=_0x7c5117,_0xdfcc4e=_0x8f0871['chats'][_0x11b588];if(!_0xdfcc4e||_0xdfcc4e[_0xd07e0e(0x1364)])return;document[_0xd07e0e(0xfa0)](_0xd07e0e(0x3c6))[_0xd07e0e(0xc62)]=_0xdfcc4e[_0xd07e0e(0xfb3)]||_0xd07e0e(0x1111),document[_0xd07e0e(0xfa0)](_0xd07e0e(0x8d5))[_0xd07e0e(0xc62)]=_0xdfcc4e[_0xd07e0e(0xa30)]||_0xd07e0e(0x1111);const _0x28383a=document[_0xd07e0e(0xfa0)](_0xd07e0e(0x635));_0x28383a[_0xd07e0e(0x128f)][_0xd07e0e(0x1327)](_0xd07e0e(0xdcc));}function _0x508c80(){const _0x578961=_0x7c5117;document[_0x578961(0xfa0)]('profile-main-content')[_0x578961(0x63b)][_0x578961(0x1248)]=_0x578961(0x11b5),document[_0x578961(0xfa0)]('profile-thoughts-history-view')[_0x578961(0x63b)][_0x578961(0x1248)]=_0x578961(0x138c),_0x181e1e();}function _0x4d2dbc(){const _0x33abe5=_0x7c5117;document[_0x33abe5(0xfa0)](_0x33abe5(0x268))[_0x33abe5(0x63b)]['display']='none',document[_0x33abe5(0xfa0)](_0x33abe5(0xcaa))['style']['display']=_0x33abe5(0x138c);}function _0x181e1e(){const _0x44c239=_0x7c5117,_0x9434ac=document[_0x44c239(0xfa0)](_0x44c239(0xd54)),_0x44d638=_0x8f0871[_0x44c239(0x1260)][_0x8f0871[_0x44c239(0xac8)]];_0x9434ac[_0x44c239(0x1331)]='';if(!_0x44d638||!_0x44d638[_0x44c239(0x1378)]||_0x44d638[_0x44c239(0x1378)][_0x44c239(0xac0)]===0x0){_0x9434ac[_0x44c239(0x1331)]=_0x44c239(0x1231);return;}const _0x619bdb=[..._0x44d638[_0x44c239(0x1378)]][_0x44c239(0xaf5)](),_0x484844=_0x619bdb[_0x44c239(0x59f)](0x0,_0x173526);_0x484844[_0x44c239(0x458)](_0x5375d6=>{const _0x55cad5=_0x3a40fe(_0x5375d6);_0x9434ac['appendChild'](_0x55cad5);}),_0x316fd1=_0x484844[_0x44c239(0xac0)],_0x619bdb[_0x44c239(0xac0)]>_0x316fd1&&appendLoadMoreThoughtsButton(_0x9434ac);}async function _0x9be5c2(){const _0x6bd1cc=_0x7c5117;if(_0x5f661d)return;_0x5f661d=!![];const _0x38bf1a=document[_0x6bd1cc(0xfa0)]('thoughts-history-list'),_0x40a0d1=_0x8f0871[_0x6bd1cc(0x1260)][_0x8f0871['activeChatId']];if(!_0x40a0d1){_0x5f661d=![];return;}_0x4da623(_0x38bf1a,'bottom'),await new Promise(_0x56137e=>setTimeout(_0x56137e,0x1f4));const _0x3233a3=[..._0x40a0d1[_0x6bd1cc(0x1378)]][_0x6bd1cc(0xaf5)](),_0x362db9=_0x3233a3[_0x6bd1cc(0xac0)],_0x27863d=_0x316fd1,_0x233ca6=_0x316fd1+_0x173526,_0x2b582f=_0x3233a3[_0x6bd1cc(0x59f)](_0x27863d,_0x233ca6);_0x10441d(_0x38bf1a),_0x2b582f[_0x6bd1cc(0x458)](_0x2ee912=>{const _0x5a90dc=_0x6bd1cc,_0x410392=_0x3a40fe(_0x2ee912);_0x38bf1a[_0x5a90dc(0x1155)](_0x410392);}),_0x316fd1+=_0x2b582f['length'],_0x5f661d=![];}function _0x3a40fe(_0x19367a){const _0x5f52e4=_0x7c5117,_0x55ea3d=document[_0x5f52e4(0xb4e)](_0x5f52e4(0xd53));_0x55ea3d['className']=_0x5f52e4(0xaf0);const _0x2ff472=new Date(_0x19367a[_0x5f52e4(0xe55)]),_0x54ffe2=_0x2ff472['getFullYear']()+'-'+String(_0x2ff472[_0x5f52e4(0x35a)]()+0x1)[_0x5f52e4(0x13e8)](0x2,'0')+'-'+String(_0x2ff472[_0x5f52e4(0x8a5)]())[_0x5f52e4(0x13e8)](0x2,'0')+'\x20'+String(_0x2ff472['getHours']())['padStart'](0x2,'0')+':'+String(_0x2ff472['getMinutes']())['padStart'](0x2,'0');return _0x55ea3d[_0x5f52e4(0x1331)]=_0x5f52e4(0x700)+_0x19367a[_0x5f52e4(0xe55)]+_0x5f52e4(0xa8b)+_0x54ffe2+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22thought-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22voice\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22currentColor\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22><path\x20d=\x22M12\x2021.35l-1.45-1.32C5.4\x2015.36\x202\x2012.28\x202\x208.5\x202\x205.42\x204.42\x203\x207.5\x203c1.74\x200\x203.41.81\x204.5\x202.09C13.09\x203.81\x2014.76\x203\x2016.5\x203\x2019.58\x203\x2022\x205.42\x2022\x208.5c0\x203.78-3.4\x206.86-8.55\x2011.54L12\x2021.35z\x22/></svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20心声\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text\x22>'+_0x19367a['heartfeltVoice']+_0x5f52e4(0xfbb)+_0x19367a[_0x5f52e4(0xa30)]+_0x5f52e4(0xd7c),_0x55ea3d;}async function _0x357973(_0x23a962){const _0x5f1eeb=_0x7c5117,_0x50920e=_0x23a962[_0x5f1eeb(0x10c2)]['files'][0x0];if(!_0x50920e)return;try{let _0x3f2983,_0x2ecb95=null;if(_0x50920e[_0x5f1eeb(0x1023)][_0x5f1eeb(0x14fe)](_0x5f1eeb(0x613))){const _0x532052=await _0x50920e['text']();_0x3f2983=JSON[_0x5f1eeb(0x4a0)](_0x532052);}else{if(_0x50920e['name'][_0x5f1eeb(0x14fe)](_0x5f1eeb(0x6c7))){const _0x37ad33=await _0x50920e['arrayBuffer']();_0x3f2983=await _0xf98175(_0x37ad33),_0x2ecb95=await new Promise(_0xd1b787=>{const _0x73df8b=_0x5f1eeb,_0x594526=new FileReader();_0x594526[_0x73df8b(0x7c6)]=()=>_0xd1b787(_0x594526[_0x73df8b(0x4fe)]),_0x594526[_0x73df8b(0x101e)](_0x50920e);});}else throw new Error(_0x5f1eeb(0x62d));}await _0x6ef455(_0x3f2983,_0x2ecb95);}catch(_0x109888){console[_0x5f1eeb(0x52b)]('角色卡导入失败:',_0x109888),await _0x4abd86(_0x5f1eeb(0x11c5),'无法解析角色卡文件。\x0a错误:\x20'+_0x109888[_0x5f1eeb(0x790)]);}finally{_0x23a962[_0x5f1eeb(0x10c2)][_0x5f1eeb(0x4f6)]=null;}}function _0xf98175(_0x1113f1){return new Promise((_0x38d48f,_0x24e6f7)=>{const _0x4de1f8=_0x5817,_0x2c6866=new DataView(_0x1113f1);if(_0x2c6866[_0x4de1f8(0xc63)](0x0)!==0x89504e47||_0x2c6866[_0x4de1f8(0xc63)](0x4)!==0xd0a1a0a)return _0x24e6f7(new Error(_0x4de1f8(0xc76)));let _0x3f1143=0x8;const _0x41b2d8=new TextDecoder();while(_0x3f1143<_0x2c6866[_0x4de1f8(0xa79)]){const _0x46d688=_0x2c6866[_0x4de1f8(0xc63)](_0x3f1143),_0x4bef6a=_0x41b2d8[_0x4de1f8(0x1024)](_0x1113f1['slice'](_0x3f1143+0x4,_0x3f1143+0x8));if(_0x4bef6a===_0x4de1f8(0xbd6)){const _0x2b9749=new Uint8Array(_0x1113f1,_0x3f1143+0x8,_0x46d688),_0x7b3c4e=_0x2b9749['indexOf'](0x0);if(_0x7b3c4e!==-0x1){const _0x33b963=_0x41b2d8[_0x4de1f8(0x1024)](_0x2b9749['slice'](0x0,_0x7b3c4e));if(_0x33b963===_0x4de1f8(0x621)){const _0x1ff274=_0x41b2d8[_0x4de1f8(0x1024)](_0x2b9749[_0x4de1f8(0x59f)](_0x7b3c4e+0x1));try{const _0x143ff2=atob(_0x1ff274),_0x531cbd=new Uint8Array(_0x143ff2['length']);for(let _0x556566=0x0;_0x556566<_0x143ff2[_0x4de1f8(0xac0)];_0x556566++){_0x531cbd[_0x556566]=_0x143ff2[_0x4de1f8(0x864)](_0x556566);}const _0x448ef4=new TextDecoder(_0x4de1f8(0xf45))[_0x4de1f8(0x1024)](_0x531cbd);_0x38d48f(JSON[_0x4de1f8(0x4a0)](_0x448ef4));return;}catch(_0x424fce){return _0x24e6f7(new Error('在PNG中找到角色数据，但解码或解析失败。错误:\x20'+_0x424fce['message']));}}}}_0x3f1143+=0x4+0x4+_0x46d688+0x4;}_0x24e6f7(new Error(_0x4de1f8(0xe70)));});}function _0x5aac65(_0x5bc0ae){const _0x497ca9=_0x7c5117;if(_0x5bc0ae['data']?.['character_book']?.[_0x497ca9(0x545)]?.[_0x497ca9(0xac0)]>0x0)return console['log'](_0x497ca9(0x5d7)),_0x5bc0ae['data'][_0x497ca9(0x6cd)][_0x497ca9(0x545)];if(_0x5bc0ae[_0x497ca9(0x222)]?.[_0x497ca9(0x6cd)]?.[_0x497ca9(0x545)]?.[_0x497ca9(0xac0)]>0x0)return console[_0x497ca9(0x4ee)](_0x497ca9(0x768)),_0x5bc0ae[_0x497ca9(0x222)][_0x497ca9(0x6cd)][_0x497ca9(0x545)];if(_0x5bc0ae[_0x497ca9(0x3cc)]?.[_0x497ca9(0x222)]?.[_0x497ca9(0x6cd)]?.[_0x497ca9(0x545)]?.['length']>0x0)return console[_0x497ca9(0x4ee)](_0x497ca9(0x73c)),_0x5bc0ae[_0x497ca9(0x3cc)][_0x497ca9(0x222)]['character_book'][_0x497ca9(0x545)];const _0x5171d0=[_0x497ca9(0x6cd),'lorebook','world_info',_0x497ca9(0x8a2)];for(const _0x2b8b59 of _0x5171d0){if(_0x5bc0ae[_0x2b8b59]?.[_0x497ca9(0x545)]?.['length']>0x0)return console['log']('诊断：在顶层\x20'+_0x2b8b59+_0x497ca9(0xdcb)),_0x5bc0ae[_0x2b8b59][_0x497ca9(0x545)];}return console['log'](_0x497ca9(0x1180)),null;}async function _0x6ef455(_0x20063e,_0x1d44d4=null){const _0x1e124f=_0x7c5117,_0x2323f8=_0x20063e[_0x1e124f(0x3cc)]||_0x20063e;if(!_0x2323f8[_0x1e124f(0x1023)])throw new Error(_0x1e124f(0x1da));let _0x3fc2a8=null;const _0x3c15b9=_0x5aac65(_0x20063e);if(_0x3c15b9){const _0x548294=_0x3c15b9[_0x1e124f(0xde7)](_0x3608a3=>_0x3608a3[_0x1e124f(0x7af)]&&_0x3608a3[_0x1e124f(0x1469)])[_0x1e124f(0x556)](_0xe8a6ba=>({'keys':_0xe8a6ba[_0x1e124f(0x1204)]||[],'comment':_0xe8a6ba['comment']||'','content':_0xe8a6ba[_0x1e124f(0x1469)][_0x1e124f(0x128a)](/<memory>|<\/memory>/g,'')[_0x1e124f(0xa06)]()}));if(_0x548294['length']>0x0){const _0x14cdab={'id':'wb_'+Date[_0x1e124f(0xc22)](),'name':_0x2323f8['name']+_0x1e124f(0x943),'content':_0x548294,'categoryId':null};await _0x372b85[_0x1e124f(0x739)][_0x1e124f(0x1327)](_0x14cdab),_0x8f0871[_0x1e124f(0x739)][_0x1e124f(0x481)](_0x14cdab),_0x3fc2a8=_0x14cdab['id'];}}let _0x520072=_0x2323f8[_0x1e124f(0x211)]||_0x20063e[_0x1e124f(0x211)]||'无';_0x520072=_0x520072['replace'](/```yaml/g,'')[_0x1e124f(0x128a)](/```/g,'')['replace'](/<\/?info>/g,'')[_0x1e124f(0x128a)](/<\/?character>/g,'')['replace'](/<\/?writing_rule>/g,'')[_0x1e124f(0x128a)](/\[OOC：.*?\]/g,'')[_0x1e124f(0xa06)]();let _0x6d4ef5='#\x20角色核心设定\x0a'+_0x520072+'\x0a\x0a';if(_0x2323f8[_0x1e124f(0x1356)])_0x6d4ef5+=_0x1e124f(0x353)+_0x2323f8[_0x1e124f(0x1356)]+'\x0a\x0a';if(_0x2323f8[_0x1e124f(0x133f)])_0x6d4ef5+=_0x1e124f(0x438)+_0x2323f8[_0x1e124f(0x133f)]+'\x0a\x0a';if(_0x2323f8[_0x1e124f(0x415)])_0x6d4ef5+='#\x20对话示例\x0a'+_0x2323f8[_0x1e124f(0x415)]+'\x0a\x0a';const _0x445a13=_0x2323f8[_0x1e124f(0x1023)],_0x5a1192=_0x2323f8['name'],_0x20cf5e=_0x1e124f(0xc37)+Date['now'](),_0x4a36ab={'id':_0x20cf5e,'name':_0x445a13[_0x1e124f(0xa06)](),'originalName':_0x5a1192[_0x1e124f(0xa06)](),'isGroup':![],'relationship':{'status':_0x1e124f(0x14b5)},'status':{'text':'在线','lastUpdate':Date[_0x1e124f(0xc22)](),'isBusy':![]},'settings':{'aiPersona':_0x6d4ef5,'myPersona':_0x1e124f(0x58f),'maxMemory':0xa,'aiAvatar':_0x1a2fc1,'myAvatar':_0x1a2fc1,'background':'','theme':_0x1e124f(0xe82),'fontSize':0xd,'customCss':'','linkedWorldBookIds':_0x3fc2a8?[_0x3fc2a8]:[],'aiAvatarLibrary':[]},'history':[],'musicData':{'totalTime':0x0},'longTermMemory':[]};_0x1d44d4&&(_0x4a36ab[_0x1e124f(0x12d7)][_0x1e124f(0xce8)]=_0x1d44d4,_0x4a36ab[_0x1e124f(0x12d7)][_0x1e124f(0x1576)][_0x1e124f(0x481)]({'name':_0x1e124f(0x118e),'url':_0x1d44d4}));const _0x25c970=_0x2323f8[_0x1e124f(0x8da)]||_0x20063e[_0x1e124f(0x8da)];if(_0x25c970&&typeof _0x25c970==='string'){const _0x305f60=document[_0x1e124f(0xb4e)]('div');_0x305f60[_0x1e124f(0x1331)]=_0x25c970;const _0x53799d=(_0x305f60['textContent']||_0x305f60[_0x1e124f(0x262)]||'')[_0x1e124f(0x128a)](/原作者UR.*?开局/s,'')['trim']();_0x53799d&&_0x4a36ab[_0x1e124f(0xc88)][_0x1e124f(0x481)]({'role':_0x1e124f(0x10af),'senderName':_0x4a36ab[_0x1e124f(0x93e)],'content':_0x53799d,'timestamp':Date[_0x1e124f(0xc22)]()});}_0x8f0871[_0x1e124f(0x1260)][_0x20cf5e]=_0x4a36ab,await _0x372b85[_0x1e124f(0x1260)][_0x1e124f(0x11d5)](_0x4a36ab),_0x2d75fb();let _0x573c2f=_0x1e124f(0xb85)+_0x4a36ab[_0x1e124f(0x1023)]+_0x1e124f(0x13a1);_0x3fc2a8&&(_0x573c2f+='\x0a\x0a其专属的“世界书”也已自动创建并关联。'),await _0x4abd86(_0x1e124f(0x1388),_0x573c2f);}async function _0xe5717b(){const _0x584806=_0x7c5117;if(!_0x8f0871[_0x584806(0xac8)])return;const _0x435cfc=_0x8f0871[_0x584806(0x1260)][_0x8f0871['activeChatId']],_0x3dea4c=_0x435cfc[_0x584806(0x12d7)][_0x584806(0xbbf)];if(!_0x3dea4c||_0x3dea4c['length']===0x0){alert('这个角色没有可用的备选开场白。');return;}const _0x2c09ee=_0x3dea4c[_0x584806(0x556)]((_0x15bf93,_0x139edf)=>{const _0x3c22d2=_0x584806,_0x5a2576=_0x15bf93[_0x3c22d2(0x128a)](/<[^>]*>/g,'')[_0x3c22d2(0xa06)]()[_0x3c22d2(0x9fe)](0x0,0x14);return{'text':_0x3c22d2(0xd5d)+(_0x139edf+0x1)+':\x20'+_0x5a2576+_0x3c22d2(0x1111),'value':_0x139edf};}),_0x1ab983=await _0x2aedfc(_0x584806(0xd79),_0x2c09ee);if(_0x1ab983!==null){const _0x1c6896=await _0x3f65ed(_0x584806(0x101f),_0x584806(0x1413),{'confirmButtonClass':'btn-danger','confirmText':_0x584806(0x610)});if(_0x1c6896){const _0x3658da=_0x3dea4c[_0x1ab983],_0xedd15a={'role':_0x584806(0x10af),'senderName':_0x435cfc['originalName'],'content':_0x3658da,'timestamp':Date['now']()};_0x435cfc[_0x584806(0xc88)]=[_0xedd15a],await _0x372b85[_0x584806(0x1260)][_0x584806(0x11d5)](_0x435cfc),_0x54d32b(_0x435cfc['id']),document[_0x584806(0xfa0)](_0x584806(0xd8f))['classList']['remove'](_0x584806(0xdcc)),await _0x4abd86('成功','已切换到新的开场故事！');}}}function _0x5bafca(_0x4c0858={'keys':[],'comment':'','content':'','enabled':!![]}){const _0x44252a=_0x7c5117,_0x5c3c8f=document['createElement'](_0x44252a(0xd53));_0x5c3c8f[_0x44252a(0x1287)]=_0x44252a(0x5f3);const _0x43681f=_0x4c0858[_0x44252a(0x7af)]!==![]?_0x44252a(0xb34):'';return _0x5c3c8f[_0x44252a(0x1331)]=_0x44252a(0xc7e)+_0x43681f+_0x44252a(0x1105)+(_0x4c0858[_0x44252a(0x7ab)]||'')+'\x22\x20placeholder=\x22例如：关于角色的童年\x22\x20style=\x22padding:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22\x20style=\x22margin-bottom:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22font-size:\x200.8em;\x22>关键词\x20(用英文逗号,分隔)</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22entry-keys-input\x22\x20value=\x22'+(_0x4c0858[_0x44252a(0x1204)]||[])['join'](',\x20')+'\x22\x20placeholder=\x22例如:\x20key1,\x20key2,\x20key3\x22\x20style=\x22padding:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22\x20style=\x22margin-bottom:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22font-size:\x200.8em;\x22>内容</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20class=\x22entry-content-textarea\x22\x20rows=\x225\x22\x20style=\x22width:\x20100%;\x20font-size:\x2014px;\x22>'+(_0x4c0858[_0x44252a(0x1469)]||'')+_0x44252a(0x11c4),_0x5c3c8f[_0x44252a(0xfb1)](_0x44252a(0x819))[_0x44252a(0x7b8)]('click',()=>{const _0x2e8c17=_0x44252a;_0x5c3c8f[_0x2e8c17(0x443)]();}),_0x5c3c8f;}async function _0x45425e(){const _0x198e33=_0x7c5117;if(!_0x8f0871[_0x198e33(0xac8)])return;const _0x4ac91e=_0x8f0871[_0x198e33(0xac8)],_0x24f49f=document[_0x198e33(0xfa0)](_0x198e33(0x936));if(!_0x24f49f[_0x198e33(0x128f)][_0x198e33(0xea7)](_0x198e33(0xdcc))){const _0x49f7fd=document[_0x198e33(0xfb1)](_0x198e33(0x1251));_0x24f49f['style'][_0x198e33(0x8ce)]=_0x49f7fd[_0x198e33(0x720)]+'px',_0x24f49f[_0x198e33(0x63b)][_0x198e33(0x1248)]=_0x198e33(0x127c),(!_0x1dbbbb[_0x4ac91e]||!_0x1dbbbb[_0x4ac91e][_0x198e33(0x684)])&&_0x54557f(_0x4ac91e),_0x50cd8f(_0x4ac91e),setTimeout(async()=>{const _0x407fc2=_0x198e33;_0x24f49f[_0x407fc2(0x128f)][_0x407fc2(0x1327)](_0x407fc2(0xdcc));const _0x523ee1={'role':_0x407fc2(0x1417),'content':_0x407fc2(0xdc3),'timestamp':Date['now'](),'isHidden':!![]};_0x8f0871[_0x407fc2(0x1260)][_0x4ac91e][_0x407fc2(0xc88)][_0x407fc2(0x481)](_0x523ee1),await _0x372b85[_0x407fc2(0x1260)][_0x407fc2(0x11d5)](_0x8f0871[_0x407fc2(0x1260)][_0x4ac91e]);},0xa);}else await _0x29e526();}async function _0x29e526(){const _0x336747=_0x7c5117;if(!_0x8f0871[_0x336747(0xac8)])return;const _0x22a6bb=_0x8f0871[_0x336747(0xac8)],_0x493a10=document[_0x336747(0xfa0)](_0x336747(0x936));_0x493a10[_0x336747(0x128f)][_0x336747(0x443)](_0x336747(0xdcc)),setTimeout(()=>{const _0x92eef4=_0x336747;_0x493a10[_0x92eef4(0x63b)][_0x92eef4(0x1248)]=_0x92eef4(0x11b5);},0x12c);if(_0x1dbbbb[_0x22a6bb]){_0x1dbbbb[_0x22a6bb][_0x336747(0x684)]=![];const _0x3c891d={'role':'system','content':_0x336747(0x1344),'timestamp':Date[_0x336747(0xc22)](),'isHidden':!![]};_0x8f0871[_0x336747(0x1260)][_0x22a6bb][_0x336747(0xc88)][_0x336747(0x481)](_0x3c891d),await _0x372b85[_0x336747(0x1260)][_0x336747(0x11d5)](_0x8f0871['chats'][_0x22a6bb]);}}function _0x54557f(_0x392229){const _0x1b59e7=_0x7c5117,_0x57b275=document['getElementById'](_0x1b59e7(0x136a)),_0x46b893=document[_0x1b59e7(0xfa0)]('gomoku-overlay'),_0xaee53b=document[_0x1b59e7(0xfa0)](_0x1b59e7(0xe02)),_0x3974c5=_0x46b893[_0x1b59e7(0x8a3)]-0x28,_0x4056a6=_0x46b893['offsetHeight']-_0xaee53b[_0x1b59e7(0x720)]-0x28,_0x5489de=Math[_0x1b59e7(0x13e5)](Math[_0x1b59e7(0x28a)](_0x3974c5,_0x4056a6)),_0x20ae5f=0xf,_0x43d75f=Math[_0x1b59e7(0x13e5)](_0x5489de/_0x20ae5f),_0x32dcf6=_0x43d75f*_0x20ae5f;_0x57b275['width']=_0x32dcf6,_0x57b275[_0x1b59e7(0x886)]=_0x32dcf6,_0x1dbbbb[_0x392229]={'isActive':!![],'board':Array(_0x20ae5f)[_0x1b59e7(0x449)](0x0)[_0x1b59e7(0x556)](()=>Array(_0x20ae5f)[_0x1b59e7(0x449)](0x0)),'currentPlayer':0x1,'history':[],'isGameOver':![],'GRID_SIZE':_0x20ae5f,'CELL_SIZE':_0x43d75f};}function _0x50cd8f(_0xed91e4){const _0x4ec30f=_0x7c5117,_0x54da99=_0x1dbbbb[_0xed91e4];if(!_0x54da99)return;const _0x3923fb=document[_0x4ec30f(0xfa0)]('gomoku-board'),_0x19c05e=_0x3923fb[_0x4ec30f(0xfcc)]('2d'),{GRID_SIZE:_0x892aa9,CELL_SIZE:_0x1129b9}=_0x54da99,_0x319546=_0x1129b9/0x2;_0x19c05e[_0x4ec30f(0xea5)](0x0,0x0,_0x3923fb[_0x4ec30f(0xa92)],_0x3923fb[_0x4ec30f(0x886)]),_0x19c05e[_0x4ec30f(0xd2a)]=_0x4ec30f(0x3af),_0x19c05e[_0x4ec30f(0x12fb)](0x0,0x0,_0x3923fb['width'],_0x3923fb[_0x4ec30f(0x886)]),_0x19c05e['strokeStyle']=_0x4ec30f(0x182),_0x19c05e['lineWidth']=0x1;for(let _0x1e0a54=0x0;_0x1e0a54<_0x892aa9;_0x1e0a54++){_0x19c05e[_0x4ec30f(0x9f4)](),_0x19c05e[_0x4ec30f(0x58c)](_0x319546,_0x319546+_0x1e0a54*_0x1129b9),_0x19c05e[_0x4ec30f(0x1406)](_0x3923fb[_0x4ec30f(0xa92)]-_0x319546,_0x319546+_0x1e0a54*_0x1129b9),_0x19c05e[_0x4ec30f(0x6ef)](),_0x19c05e['beginPath'](),_0x19c05e[_0x4ec30f(0x58c)](_0x319546+_0x1e0a54*_0x1129b9,_0x319546),_0x19c05e[_0x4ec30f(0x1406)](_0x319546+_0x1e0a54*_0x1129b9,_0x3923fb[_0x4ec30f(0x886)]-_0x319546),_0x19c05e['stroke']();}for(let _0x2b9bb0=0x0;_0x2b9bb0<_0x892aa9;_0x2b9bb0++){for(let _0x4c3214=0x0;_0x4c3214<_0x892aa9;_0x4c3214++){_0x54da99[_0x4ec30f(0x1040)][_0x2b9bb0][_0x4c3214]!==0x0&&_0x4140b3(_0x19c05e,_0x4c3214,_0x2b9bb0,_0x54da99[_0x4ec30f(0x1040)][_0x2b9bb0][_0x4c3214],_0x54da99);}}}function _0x4140b3(_0x418cbf,_0x12f8ac,_0x3cd7db,_0x388c26,_0x303394){const _0x3b2ef3=_0x7c5117,{CELL_SIZE:_0x39c19b}=_0x303394,_0x4d9aa2=_0x39c19b/0x2,_0x2508cd=_0x39c19b/0x2-0x2;_0x418cbf[_0x3b2ef3(0x9f4)](),_0x418cbf[_0x3b2ef3(0xf58)](_0x4d9aa2+_0x12f8ac*_0x39c19b,_0x4d9aa2+_0x3cd7db*_0x39c19b,_0x2508cd,0x0,0x2*Math['PI']),_0x388c26===0x1?_0x418cbf['fillStyle']=_0x3b2ef3(0x5b9):_0x418cbf[_0x3b2ef3(0xd2a)]=_0x3b2ef3(0xa11),_0x418cbf[_0x3b2ef3(0x449)]();}function _0x586842(_0x3425dc){const _0x4610ea=_0x7c5117,_0x36ccec=_0x8f0871[_0x4610ea(0xac8)],_0x3d6a09=_0x1dbbbb[_0x36ccec];if(!_0x3d6a09||_0x3d6a09[_0x4610ea(0xe31)]||_0x3d6a09[_0x4610ea(0xfa4)]!==0x1)return;const _0x2efbad=document[_0x4610ea(0xfa0)]('gomoku-board'),_0x5d7027=_0x2efbad['getContext']('2d'),_0x368d89=_0x2efbad[_0x4610ea(0x1137)](),_0x29c970=_0x3425dc[_0x4610ea(0x9a6)]-_0x368d89[_0x4610ea(0xcb1)],_0x10c8c4=_0x3425dc[_0x4610ea(0x6b7)]-_0x368d89['top'],_0x23d40e=Math[_0x4610ea(0x44d)]((_0x29c970-_0x3d6a09['CELL_SIZE']/0x2)/_0x3d6a09[_0x4610ea(0x11cc)]),_0x11991e=Math['round']((_0x10c8c4-_0x3d6a09[_0x4610ea(0x11cc)]/0x2)/_0x3d6a09[_0x4610ea(0x11cc)]);_0x50cd8f(_0x36ccec);if(_0x23d40e>=0x0&&_0x23d40e<_0x3d6a09[_0x4610ea(0x2f3)]&&_0x11991e>=0x0&&_0x11991e<_0x3d6a09[_0x4610ea(0x2f3)]&&_0x3d6a09['board'][_0x11991e][_0x23d40e]===0x0){const _0x84d13a=_0x3d6a09[_0x4610ea(0x11cc)]/0x2-0x2;_0x5d7027[_0x4610ea(0x9f4)](),_0x5d7027[_0x4610ea(0xf58)](_0x3d6a09[_0x4610ea(0x11cc)]/0x2+_0x23d40e*_0x3d6a09['CELL_SIZE'],_0x3d6a09[_0x4610ea(0x11cc)]/0x2+_0x11991e*_0x3d6a09[_0x4610ea(0x11cc)],_0x84d13a,0x0,0x2*Math['PI']),_0x5d7027['fillStyle']=_0x4610ea(0x1098),_0x5d7027[_0x4610ea(0x449)]();}}function _0x42881c(_0x33881d){const _0x155860=_0x7c5117,_0x10b746=_0x8f0871[_0x155860(0xac8)],_0x3bc22a=_0x1dbbbb[_0x10b746];if(!_0x3bc22a||_0x3bc22a[_0x155860(0xe31)]||_0x3bc22a[_0x155860(0xfa4)]!==0x1)return;const _0xf2e218=document['getElementById'](_0x155860(0x136a)),_0x5c55c8=_0xf2e218['getBoundingClientRect'](),_0x3a5b6b=_0x33881d['clientX']-_0x5c55c8[_0x155860(0xcb1)],_0x59ea0f=_0x33881d[_0x155860(0x6b7)]-_0x5c55c8[_0x155860(0x8ce)],_0x198978=Math[_0x155860(0x44d)]((_0x3a5b6b-_0x3bc22a[_0x155860(0x11cc)]/0x2)/_0x3bc22a[_0x155860(0x11cc)]),_0x3e0adc=Math[_0x155860(0x44d)]((_0x59ea0f-_0x3bc22a['CELL_SIZE']/0x2)/_0x3bc22a[_0x155860(0x11cc)]);_0x198978>=0x0&&_0x198978<_0x3bc22a[_0x155860(0x2f3)]&&_0x3e0adc>=0x0&&_0x3e0adc<_0x3bc22a[_0x155860(0x2f3)]&&_0x3bc22a[_0x155860(0x1040)][_0x3e0adc][_0x198978]===0x0&&(_0x3bc22a[_0x155860(0x1040)][_0x3e0adc][_0x198978]=0x1,_0x3bc22a[_0x155860(0xc88)][_0x155860(0x481)]({'x':_0x198978,'y':_0x3e0adc,'player':0x1}),_0x50cd8f(_0x10b746),_0x33b5cf(_0x198978,_0x3e0adc,0x1,_0x3bc22a)?(_0x3bc22a['isGameOver']=!![],setTimeout(()=>alert(_0x155860(0x2d5)),0x64),_0x298ed8(_0x155860(0xcb0))):_0x3bc22a[_0x155860(0xfa4)]=0x2);}function _0x2c1d49(_0x3829e4,_0x4cefac=![]){const _0xda4907=_0x7c5117,_0x5601db=_0x8f0871[_0xda4907(0xac8)],_0x9c600=_0x1dbbbb[_0x5601db];if(!_0x9c600||_0x9c600[_0xda4907(0xe31)])return;if(!_0x4cefac&&_0x9c600[_0xda4907(0xfa4)]!==0x2)return;const {x:_0x1a11aa,y:_0x39143b}=_0x3829e4;_0x1a11aa>=0x0&&_0x1a11aa<_0x9c600[_0xda4907(0x2f3)]&&_0x39143b>=0x0&&_0x39143b<_0x9c600[_0xda4907(0x2f3)]&&_0x9c600['board'][_0x39143b][_0x1a11aa]===0x0?(_0x9c600[_0xda4907(0x1040)][_0x39143b][_0x1a11aa]=0x2,_0x9c600[_0xda4907(0xc88)][_0xda4907(0x481)]({'x':_0x1a11aa,'y':_0x39143b,'player':0x2}),_0x50cd8f(_0x5601db),_0x33b5cf(_0x1a11aa,_0x39143b,0x2,_0x9c600)?(_0x9c600[_0xda4907(0xe31)]=!![],setTimeout(()=>alert(_0xda4907(0x78e)),0x64),_0x298ed8('ai')):_0x9c600[_0xda4907(0xfa4)]=0x1):(console['warn'](_0xda4907(0x14cc),_0x3829e4),_0x9c600[_0xda4907(0xfa4)]=0x1);}function _0x33b5cf(_0x989b13,_0x259b05,_0x58aa3b,_0x56e92f){const {board:_0x2aa46d,GRID_SIZE:_0x2e0b4d}=_0x56e92f,_0x2df614=[[0x1,0x0],[0x0,0x1],[0x1,0x1],[0x1,-0x1]];for(const [_0x55fe0a,_0xe4fa05]of _0x2df614){let _0x86ae43=0x1;for(let _0xf1502a=0x1;_0xf1502a<0x5;_0xf1502a++){const _0x5c6a8a=_0x989b13+_0xf1502a*_0x55fe0a,_0x29a0cf=_0x259b05+_0xf1502a*_0xe4fa05;if(_0x5c6a8a>=0x0&&_0x5c6a8a<_0x2e0b4d&&_0x29a0cf>=0x0&&_0x29a0cf<_0x2e0b4d&&_0x2aa46d[_0x29a0cf][_0x5c6a8a]===_0x58aa3b)_0x86ae43++;else break;}for(let _0x6a85bb=0x1;_0x6a85bb<0x5;_0x6a85bb++){const _0x33149c=_0x989b13-_0x6a85bb*_0x55fe0a,_0x1fe1ba=_0x259b05-_0x6a85bb*_0xe4fa05;if(_0x33149c>=0x0&&_0x33149c<_0x2e0b4d&&_0x1fe1ba>=0x0&&_0x1fe1ba<_0x2e0b4d&&_0x2aa46d[_0x1fe1ba][_0x33149c]===_0x58aa3b)_0x86ae43++;else break;}if(_0x86ae43>=0x5)return!![];}return![];}function _0x5c7b47(_0x1c9ed3){const _0x197076=_0x7c5117;if(!_0x1c9ed3||!_0x1c9ed3[_0x197076(0x684)])return'';let _0x911b1c='棋盘状态\x20(1是你(黑棋),\x202是AI(白棋)):\x0a';_0x911b1c+=_0x1c9ed3[_0x197076(0x1040)][_0x197076(0x556)](_0x5beb07=>_0x5beb07[_0x197076(0xcc2)]('\x20'))[_0x197076(0xcc2)]('\x0a');let _0x36fa62=_0x197076(0xf0c);return _0x36fa62+=_0x1c9ed3[_0x197076(0xc88)][_0x197076(0x556)](_0x418324=>'玩家'+_0x418324[_0x197076(0xfcd)]+_0x197076(0x14e4)+_0x418324['x']+','+_0x418324['y']+')')[_0x197076(0xcc2)]('\x20->\x20'),_0x197076(0x134f)+_0x911b1c+_0x197076(0x85d)+_0x36fa62+_0x197076(0x10d0);}async function _0x298ed8(_0x58a9de){const _0x337a94=_0x7c5117,_0x4c38c9=_0x8f0871[_0x337a94(0xac8)],_0x718581=_0x8f0871['chats'][_0x4c38c9];if(!_0x718581)return;const _0x2b02de=_0x718581[_0x337a94(0x1364)]?_0x718581[_0x337a94(0x12d7)]['myNickname']||'我':'我',_0xfe0a2e=_0x718581[_0x337a94(0x1364)]?'AI方':_0x718581[_0x337a94(0x1023)],_0x5f496a=_0x58a9de===_0x337a94(0xcb0)?_0x2b02de:_0xfe0a2e,_0x4b6f3b=_0x58a9de===_0x337a94(0xcb0)?_0x337a94(0xc2f):_0x337a94(0x470),_0x3c5243=_0x337a94(0x6a8)+_0x5f496a+_0x337a94(0x13e0)+_0x4b6f3b+'。]',_0x4fc993={'role':_0x337a94(0x1417),'content':_0x3c5243,'timestamp':Date['now'](),'isHidden':!![]};_0x718581[_0x337a94(0xc88)][_0x337a94(0x481)](_0x4fc993),await _0x372b85[_0x337a94(0x1260)][_0x337a94(0x11d5)](_0x718581),console[_0x337a94(0x4ee)](_0x337a94(0x1182)+_0x58a9de);}let _0x409cc1=![];async function _0x31f214(){const _0xdd3d5a=_0x7c5117,_0x2f6f49=document['getElementById'](_0xdd3d5a(0x1361)),_0xc58b47=document[_0xdd3d5a(0xfa0)](_0xdd3d5a(0x14f0)),_0x15fbc8=document[_0xdd3d5a(0xfa0)](_0xdd3d5a(0xd04));_0x2f6f49[_0xdd3d5a(0x1331)]='',_0xc58b47[_0xdd3d5a(0x1331)]='';const [_0x4e8a1d,_0x3aa92c]=await Promise[_0xdd3d5a(0x8ab)]([_0x372b85[_0xdd3d5a(0x8ad)][_0xdd3d5a(0x3bc)](),_0x372b85[_0xdd3d5a(0xe1b)][_0xdd3d5a(0x1554)](_0xdd3d5a(0x1023))[_0xdd3d5a(0x3bc)]()]);_0x15fbc8[_0xdd3d5a(0x128f)][_0xdd3d5a(0xb80)]('management-mode',_0x409cc1);const _0x240510=document[_0xdd3d5a(0xb4e)](_0xdd3d5a(0x1029));_0x240510[_0xdd3d5a(0x1287)]=_0xdd3d5a(0x1070),_0x240510[_0xdd3d5a(0xc62)]='全部',_0x240510[_0xdd3d5a(0x8df)][_0xdd3d5a(0x6b2)]='all';if(activeShoppingCategoryId===_0xdd3d5a(0x8ab))_0x240510[_0xdd3d5a(0x128f)][_0xdd3d5a(0x1327)](_0xdd3d5a(0xa37));_0xc58b47[_0xdd3d5a(0x1155)](_0x240510),_0x3aa92c['forEach'](_0x3f3df1=>{const _0x4463af=_0xdd3d5a,_0x2cd0a4=document[_0x4463af(0xb4e)](_0x4463af(0x1029));_0x2cd0a4[_0x4463af(0x1287)]=_0x4463af(0x1070),_0x2cd0a4[_0x4463af(0xc62)]=_0x3f3df1[_0x4463af(0x1023)],_0x2cd0a4['dataset']['categoryId']=_0x3f3df1['id'];if(activeShoppingCategoryId===_0x3f3df1['id'])_0x2cd0a4[_0x4463af(0x128f)][_0x4463af(0x1327)](_0x4463af(0xa37));_0xc58b47['appendChild'](_0x2cd0a4);});let _0x21c150;activeShoppingCategoryId===_0xdd3d5a(0x8ab)?_0x21c150=_0x4e8a1d:_0x21c150=_0x4e8a1d[_0xdd3d5a(0xde7)](_0x456351=>_0x456351[_0xdd3d5a(0x6b2)]===activeShoppingCategoryId);if(_0x21c150[_0xdd3d5a(0xac0)]===0x0){const _0x46987f=activeShoppingCategoryId===_0xdd3d5a(0x8ab)?_0xdd3d5a(0x1341):_0xdd3d5a(0x192);_0x2f6f49[_0xdd3d5a(0x1331)]='<p\x20style=\x22grid-column:\x201\x20/\x20-1;\x20text-align:\x20center;\x20color:\x20var(--text-secondary);\x20margin-top:\x2050px;\x22>'+_0x46987f+_0xdd3d5a(0x129d);return;}_0x21c150[_0xdd3d5a(0x458)](_0x33d9c7=>{const _0x3bb17c=_0xdd3d5a,_0x142ebf=document[_0x3bb17c(0xb4e)](_0x3bb17c(0xd53));_0x142ebf[_0x3bb17c(0x1287)]=_0x3bb17c(0x132e),_0x142ebf[_0x3bb17c(0x8df)]['id']=_0x33d9c7['id'];const _0x530bea=_0x3bb17c(0x6db);_0x142ebf[_0x3bb17c(0x1331)]=_0x3bb17c(0xdd3)+_0x530bea+_0x3bb17c(0x1036)+_0x33d9c7[_0x3bb17c(0x127b)]+_0x3bb17c(0x473)+_0x33d9c7['name']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22product-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22product-price\x22>'+_0x33d9c7[_0x3bb17c(0x1168)][_0x3bb17c(0x3b8)](0x2)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-to-cart-btn\x22>加入购物车</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2f6f49['appendChild'](_0x142ebf);});}function _0x3966aa(_0x1dab43){activeShoppingCategoryId=_0x1dab43,_0x31f214(),_0xfb7bf();}function _0xfb7bf(){const _0x5c3309=_0x7c5117,_0x1f23e7=document['getElementById']('delete-current-category-btn');if(!_0x1f23e7)return;const _0x51983c=_0x409cc1&&activeShoppingCategoryId!==_0x5c3309(0x8ab);_0x1f23e7[_0x5c3309(0x63b)][_0x5c3309(0x1248)]=_0x51983c?_0x5c3309(0x138c):_0x5c3309(0x11b5);}async function _0x5965fe(){const _0x4515c8=_0x7c5117;if(activeShoppingCategoryId===_0x4515c8(0x8ab))return;const _0x213b9a=activeShoppingCategoryId,_0x5cdf6b=await _0x372b85[_0x4515c8(0xe1b)][_0x4515c8(0x70d)](_0x213b9a);if(!_0x5cdf6b){alert('错误：找不到要删除的分类。');return;}const _0x1bd87e=_0x4515c8(0x1172)+_0x5cdf6b[_0x4515c8(0x1023)]+_0x4515c8(0x825),_0x3d601c=await _0x3f65ed(_0x4515c8(0x784),_0x1bd87e,{'confirmButtonClass':_0x4515c8(0x611),'confirmText':'确认删除'});_0x3d601c&&(await _0x9d46f7(_0x213b9a),activeShoppingCategoryId=_0x4515c8(0x8ab),await _0x31f214(),_0xfb7bf(),await _0x4abd86('成功',_0x4515c8(0x150b)+_0x5cdf6b[_0x4515c8(0x1023)]+_0x4515c8(0x11be)));}async function _0x24275c(){const _0x56518b=_0x7c5117;activeShoppingCategoryId='all',await _0x31f214(),_0x2d25e5(_0x56518b(0xd04)),_0xfb7bf();}async function _0x31f214(){const _0x130c64=_0x7c5117,_0x38c72e=document[_0x130c64(0xfa0)]('product-grid'),_0x565410=document[_0x130c64(0xfa0)](_0x130c64(0x14f0)),_0x36b9fe=document[_0x130c64(0xfa0)](_0x130c64(0xd04));_0x38c72e[_0x130c64(0x1331)]='',_0x565410[_0x130c64(0x1331)]='';const [_0x3da557,_0x55e083]=await Promise[_0x130c64(0x8ab)]([_0x372b85[_0x130c64(0x8ad)]['toArray'](),_0x372b85[_0x130c64(0xe1b)]['orderBy'](_0x130c64(0x1023))[_0x130c64(0x3bc)]()]);_0x36b9fe['classList'][_0x130c64(0xb80)](_0x130c64(0x4cb),_0x409cc1);const _0x47eae5=document[_0x130c64(0xb4e)](_0x130c64(0x1029));_0x47eae5[_0x130c64(0x1287)]=_0x130c64(0x1070),_0x47eae5[_0x130c64(0xc62)]='全部',_0x47eae5[_0x130c64(0x8df)][_0x130c64(0x6b2)]=_0x130c64(0x8ab);if(activeShoppingCategoryId===_0x130c64(0x8ab))_0x47eae5['classList']['add']('active');_0x565410[_0x130c64(0x1155)](_0x47eae5),_0x55e083[_0x130c64(0x458)](_0x136609=>{const _0x42b17f=_0x130c64,_0x47f519=document['createElement'](_0x42b17f(0x1029));_0x47f519[_0x42b17f(0x1287)]=_0x42b17f(0x1070),_0x47f519['textContent']=_0x136609['name'],_0x47f519[_0x42b17f(0x8df)][_0x42b17f(0x6b2)]=_0x136609['id'];if(activeShoppingCategoryId===_0x136609['id'])_0x47f519[_0x42b17f(0x128f)][_0x42b17f(0x1327)]('active');_0x565410[_0x42b17f(0x1155)](_0x47f519);});let _0x313196;activeShoppingCategoryId===_0x130c64(0x8ab)?_0x313196=_0x3da557:_0x313196=_0x3da557[_0x130c64(0xde7)](_0x2358a0=>_0x2358a0[_0x130c64(0x6b2)]===activeShoppingCategoryId);if(_0x313196[_0x130c64(0xac0)]===0x0){const _0x3fd1c8=activeShoppingCategoryId===_0x130c64(0x8ab)?_0x130c64(0x1341):_0x130c64(0x192);_0x38c72e[_0x130c64(0x1331)]=_0x130c64(0xa5b)+_0x3fd1c8+_0x130c64(0x129d);return;}_0x313196[_0x130c64(0x458)](_0x17f0c4=>{const _0x10e50b=_0x130c64,_0x58a739=document['createElement'](_0x10e50b(0xd53));_0x58a739[_0x10e50b(0x1287)]=_0x10e50b(0x132e),_0x58a739[_0x10e50b(0x8df)]['id']=_0x17f0c4['id'];const _0x4b7c3d=_0x409cc1?_0x10e50b(0x6ce):'';_0x58a739[_0x10e50b(0x1331)]=_0x10e50b(0xbc0)+_0x4b7c3d+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x17f0c4[_0x10e50b(0x127b)]+'\x22\x20class=\x22product-image\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22product-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22product-name\x22>'+_0x17f0c4[_0x10e50b(0x1023)]+_0x10e50b(0xfaf)+_0x17f0c4[_0x10e50b(0x1168)]['toFixed'](0x2)+_0x10e50b(0x9ab),_0x38c72e['appendChild'](_0x58a739);});}async function _0x3efdd0(_0xca7d55,_0x5f2aa2=0x1,_0x5d8e4f=null){const _0x3296a5=_0x7c5117,_0x31c46c=_0x5d8e4f?_0x59a44d['find'](_0x5bfb53=>_0x5bfb53[_0x3296a5(0x516)]===_0xca7d55&&_0x5bfb53[_0x3296a5(0x1385)]?.[_0x3296a5(0x1023)]===_0x5d8e4f[_0x3296a5(0x1023)]):_0x59a44d['find'](_0x32ab7d=>_0x32ab7d[_0x3296a5(0x516)]===_0xca7d55&&!_0x32ab7d[_0x3296a5(0x1385)]);if(_0x31c46c)_0x31c46c[_0x3296a5(0x1261)]+=_0x5f2aa2;else{const _0x3242ac=await _0x372b85[_0x3296a5(0x8ad)][_0x3296a5(0x70d)](_0xca7d55);_0x3242ac&&_0x59a44d['push']({'productId':_0x3242ac['id'],'quantity':_0x5f2aa2,'variation':_0x5d8e4f});}_0x18a315();}function _0x17c391(_0x5e0fb0,_0x407698){const _0x105233=_0x7c5117,_0x19eae2=_0x59a44d[_0x105233(0xb22)](_0x3c9f3c=>_0x3c9f3c[_0x105233(0x516)]===_0x5e0fb0);_0x19eae2>-0x1&&(_0x59a44d[_0x19eae2][_0x105233(0x1261)]+=_0x407698,_0x59a44d[_0x19eae2][_0x105233(0x1261)]<=0x0&&_0x59a44d['splice'](_0x19eae2,0x1),_0x18a315(),_0x2b97ff());}function _0x18a315(){const _0x214854=_0x7c5117,_0x42d2d1=_0x59a44d['reduce']((_0x369a4c,_0x3e14bb)=>_0x369a4c+_0x3e14bb[_0x214854(0x1261)],0x0);document[_0x214854(0xfa0)]('cart-count')[_0x214854(0xc62)]=_0x42d2d1,document[_0x214854(0xfa0)]('cart-title')[_0x214854(0xc62)]=_0x214854(0x1ec)+_0x42d2d1+')',document[_0x214854(0xfa0)](_0x214854(0x8fd))[_0x214854(0xc62)]=_0x214854(0x45e)+_0x42d2d1+')';}function _0x21be01(){_0x2b97ff(),_0x2d25e5('cart-screen');}async function _0x2b97ff(){const _0x13fc3f=_0x7c5117,_0xca0491=document['getElementById'](_0x13fc3f(0x1334));_0xca0491[_0x13fc3f(0x1331)]='';let _0x53aac8=0x0;if(_0x59a44d[_0x13fc3f(0xac0)]===0x0)_0xca0491[_0x13fc3f(0x1331)]=_0x13fc3f(0x14c2);else{const _0x38e8ea=_0x59a44d['map'](_0x469131=>_0x469131[_0x13fc3f(0x516)]),_0xdfc76f=await _0x372b85[_0x13fc3f(0x8ad)][_0x13fc3f(0xdc7)]('id')[_0x13fc3f(0xe48)](_0x38e8ea)[_0x13fc3f(0x3bc)](),_0x1d3425=new Map(_0xdfc76f[_0x13fc3f(0x556)](_0x3108f6=>[_0x3108f6['id'],_0x3108f6]));_0x59a44d['forEach'](_0x280114=>{const _0x3dbb96=_0x13fc3f,_0x2c4c8d=_0x1d3425[_0x3dbb96(0x70d)](_0x280114[_0x3dbb96(0x516)]);if(_0x2c4c8d){const _0x40368f=document[_0x3dbb96(0xb4e)](_0x3dbb96(0xd53));_0x40368f[_0x3dbb96(0x1287)]=_0x3dbb96(0x376);const _0x361384=_0x280114['variation']?_0x3dbb96(0xd89)+_0x280114[_0x3dbb96(0x1385)][_0x3dbb96(0x1023)]+_0x3dbb96(0xda9):'';_0x40368f[_0x3dbb96(0x1331)]=_0x3dbb96(0x6f0)+_0x2c4c8d['id']+'\x22\x20checked>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x280114['variation']?.[_0x3dbb96(0x127b)]||_0x2c4c8d[_0x3dbb96(0x127b)])+_0x3dbb96(0x9fa)+_0x2c4c8d[_0x3dbb96(0x1023)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x361384+_0x3dbb96(0xb08)+(_0x280114[_0x3dbb96(0x1385)]?.['price']||_0x2c4c8d[_0x3dbb96(0x1168)])[_0x3dbb96(0x3b8)](0x2)+_0x3dbb96(0xd92)+_0x2c4c8d['id']+_0x3dbb96(0x6a7)+_0x280114[_0x3dbb96(0x1261)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quantity-btn\x20increase-qty-btn\x22\x20data-id=\x22'+_0x2c4c8d['id']+_0x3dbb96(0x107e),_0xca0491[_0x3dbb96(0x1155)](_0x40368f);}});}_0x34d95a();}async function _0x34d95a(){const _0x2986fd=_0x7c5117;let _0x145f7b=0x0;const _0x244100=document[_0x2986fd(0x2a1)](_0x2986fd(0x11d8)),_0x38a211=Array['from'](_0x244100)[_0x2986fd(0x556)](_0x1d03f3=>parseInt(_0x1d03f3[_0x2986fd(0x8df)]['id']));if(_0x38a211['length']>0x0){const _0x51df24=await _0x372b85['shoppingProducts'][_0x2986fd(0xdc7)]('id')[_0x2986fd(0xe48)](_0x38a211)[_0x2986fd(0x3bc)](),_0xb3cc82=new Map(_0x51df24[_0x2986fd(0x556)](_0x4a2747=>[_0x4a2747['id'],_0x4a2747]));_0x59a44d[_0x2986fd(0x458)](_0x485b79=>{const _0x4b8081=_0x2986fd;if(_0x38a211[_0x4b8081(0xf95)](_0x485b79[_0x4b8081(0x516)])){const _0x11a85c=_0xb3cc82[_0x4b8081(0x70d)](_0x485b79[_0x4b8081(0x516)]);if(_0x11a85c){const _0x139907=_0x485b79[_0x4b8081(0x1385)]?_0x485b79[_0x4b8081(0x1385)][_0x4b8081(0x1168)]:_0x11a85c[_0x4b8081(0x1168)];_0x145f7b+=_0x139907*_0x485b79[_0x4b8081(0x1261)];}}});}document[_0x2986fd(0xfa0)](_0x2986fd(0x687))[_0x2986fd(0xc62)]='合计:\x20¥'+_0x145f7b[_0x2986fd(0x3b8)](0x2);}async function _0x158ae3(){const _0x654656=_0x7c5117,_0x2fe7ea=_0x8f0871[_0x654656(0x1260)][_0x8f0871[_0x654656(0xac8)]];if(!_0x2fe7ea||!_0x2fe7ea[_0x654656(0x1364)])return;const _0x514c8f=document['getElementById'](_0x654656(0x113b)),_0x4355dd=document['getElementById'](_0x654656(0x3d3));_0x4355dd[_0x654656(0x1331)]='';const _0x248f10=_0x2fe7ea[_0x654656(0x12d7)][_0x654656(0xda5)]||'我',_0x3c7d46=_0x2fe7ea[_0x654656(0x2cf)][_0x654656(0xde7)](_0x430282=>_0x430282['groupNickname']!==_0x248f10);_0x3c7d46[_0x654656(0x458)](_0x2c2f95=>{const _0x3ee33b=_0x654656,_0x1b1af5=document[_0x3ee33b(0xb4e)](_0x3ee33b(0xd53));_0x1b1af5['className']=_0x3ee33b(0x632),_0x1b1af5[_0x3ee33b(0x8df)]['recipientName']=_0x2c2f95['originalName'],_0x1b1af5[_0x3ee33b(0x1331)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22checkbox\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x2c2f95[_0x3ee33b(0xc61)]||_0x29d47b)+_0x3ee33b(0xcca)+_0x2c2f95[_0x3ee33b(0x5c9)]+_0x3ee33b(0xf29),_0x4355dd[_0x3ee33b(0x1155)](_0x1b1af5);}),document[_0x654656(0xfa0)]('select-all-recipients')[_0x654656(0xb34)]=![],_0x514c8f[_0x654656(0x128f)][_0x654656(0x1327)](_0x654656(0xdcc));}async function _0x2e2201(){const _0x2b7220=_0x7c5117,_0x576789=_0x8f0871[_0x2b7220(0x1260)][_0x8f0871[_0x2b7220(0xac8)]],_0x54669b=_0x59a44d[_0x2b7220(0xde7)](_0x31a54b=>document[_0x2b7220(0xfb1)]('.cart-item-checkbox[data-id=\x22'+_0x31a54b[_0x2b7220(0x516)]+_0x2b7220(0x90c)));if(_0x54669b[_0x2b7220(0xac0)]===0x0){alert(_0x2b7220(0x459));return;}if(_0x576789[_0x2b7220(0x1364)])_0x158ae3();else{const _0x597dde=await _0x3f65ed(_0x2b7220(0x1545),_0x2b7220(0x130a),{'confirmText':_0x2b7220(0x11b7)});_0x597dde&&await _0x50a0d1(_0x54669b);}}async function _0x50a0d1(_0x40b5a3,_0x1ee596=null){const _0x26b23c=_0x7c5117;if(!_0x8f0871[_0x26b23c(0xac8)])return;const _0x3567fe=_0x8f0871[_0x26b23c(0x1260)][_0x8f0871[_0x26b23c(0xac8)]],_0x20aed3=_0x40b5a3[_0x26b23c(0x556)](_0x1d4bb1=>_0x1d4bb1[_0x26b23c(0x516)]),_0x10fd3a=await _0x372b85[_0x26b23c(0x8ad)][_0x26b23c(0xdc7)]('id')[_0x26b23c(0xe48)](_0x20aed3)[_0x26b23c(0x3bc)](),_0x215a3c=new Map(_0x10fd3a[_0x26b23c(0x556)](_0x45c23a=>[_0x45c23a['id'],_0x45c23a])),_0x1e3900=_0x40b5a3[_0x26b23c(0x556)](_0x3c77d7=>{const _0x2350bd=_0x26b23c,_0x151871=_0x215a3c[_0x2350bd(0x70d)](_0x3c77d7[_0x2350bd(0x516)]);return _0x3c77d7[_0x2350bd(0x1385)]?{'name':_0x151871[_0x2350bd(0x1023)]+_0x2350bd(0xc10)+_0x3c77d7[_0x2350bd(0x1385)][_0x2350bd(0x1023)],'price':_0x3c77d7[_0x2350bd(0x1385)][_0x2350bd(0x1168)],'imageUrl':_0x3c77d7[_0x2350bd(0x1385)][_0x2350bd(0x127b)]||_0x151871[_0x2350bd(0x127b)],'quantity':_0x3c77d7[_0x2350bd(0x1261)]}:{'name':_0x151871[_0x2350bd(0x1023)],'price':_0x151871['price'],'imageUrl':_0x151871[_0x2350bd(0x127b)],'quantity':_0x3c77d7['quantity']};}),_0x13a023={'role':_0x26b23c(0xcb0),'type':_0x26b23c(0x1338),'timestamp':Date['now'](),'items':_0x1e3900,'total':_0x1e3900[_0x26b23c(0xd68)]((_0x16b80e,_0x445833)=>_0x16b80e+_0x445833[_0x26b23c(0x1168)]*_0x445833[_0x26b23c(0x1261)],0x0),'recipients':_0x1ee596};_0x3567fe[_0x26b23c(0xc88)][_0x26b23c(0x481)](_0x13a023);if(_0x1ee596&&_0x1ee596[_0x26b23c(0xac0)]>0x0){const _0x500907=_0x1ee596[_0x26b23c(0x556)](_0x30ae60=>_0x185e1d(_0x3567fe,_0x30ae60))[_0x26b23c(0xcc2)]('、'),_0x9235e6={'role':'system','content':_0x26b23c(0x816)+(_0x3567fe[_0x26b23c(0x12d7)][_0x26b23c(0xda5)]||'我')+_0x26b23c(0x13d0)+_0x500907+_0x26b23c(0x1009),'timestamp':Date[_0x26b23c(0xc22)]()+0x1,'isHidden':!![]};_0x3567fe[_0x26b23c(0xc88)]['push'](_0x9235e6);}await _0x372b85[_0x26b23c(0x1260)][_0x26b23c(0x11d5)](_0x3567fe),_0x25d29f(_0x13a023,_0x3567fe),_0x2d75fb(),_0x59a44d=_0x59a44d[_0x26b23c(0xde7)](_0x437b08=>!_0x40b5a3['some'](_0x39fe35=>_0x39fe35[_0x26b23c(0x516)]===_0x437b08[_0x26b23c(0x516)])),_0x18a315(),_0x2d25e5(_0x26b23c(0xe95)),await _0x4abd86('成功','礼物已成功送出！');}function _0x171a1e(_0x5f1d77){const _0x2dbd2f=_0x7c5117,_0x3e2b99=_0x8f0871[_0x2dbd2f(0x1260)][_0x8f0871[_0x2dbd2f(0xac8)]],_0xaa12d1=_0x3e2b99[_0x2dbd2f(0xc88)][_0x2dbd2f(0x7ed)](_0x77ef63=>_0x77ef63[_0x2dbd2f(0xe55)]===_0x5f1d77);if(!_0xaa12d1||_0xaa12d1[_0x2dbd2f(0x682)]!=='gift')return;const _0x21fc5a=document['getElementById'](_0x2dbd2f(0x468));let _0x402538='';_0xaa12d1['items'][_0x2dbd2f(0x458)](_0x5f166d=>{const _0x30d3e7=_0x2dbd2f;_0x402538+='<tr><td\x20class=\x22item-name\x22>'+_0x5f166d[_0x30d3e7(0x1023)]+_0x30d3e7(0x2e7)+_0x5f166d[_0x30d3e7(0x1261)]+_0x30d3e7(0x1fb)+_0x5f166d[_0x30d3e7(0x1168)][_0x30d3e7(0x3b8)](0x2)+_0x30d3e7(0x1552)+(_0x5f166d[_0x30d3e7(0x1168)]*_0x5f166d['quantity'])[_0x30d3e7(0x3b8)](0x2)+_0x30d3e7(0x288);}),_0x21fc5a['innerHTML']=_0x2dbd2f(0xde8)+new Date(_0xaa12d1['timestamp'])['toLocaleString']()+_0x2dbd2f(0x578)+_0x402538+_0x2dbd2f(0x92c)+_0xaa12d1[_0x2dbd2f(0x118f)]['toFixed'](0x2)+'</div><div\x20class=\x22receipt-footer\x22>感谢您的惠顾，欢迎再次光临！</div>',document['getElementById'](_0x2dbd2f(0xc8b))[_0x2dbd2f(0x128f)][_0x2dbd2f(0x1327)](_0x2dbd2f(0xdcc));}async function _0x514a03(_0x21b8f0=null){const _0x43f8ee=_0x7c5117;_0x5061b6=_0x21b8f0;const _0x1ccec6=document[_0x43f8ee(0xfa0)](_0x43f8ee(0x1257)),_0xcee93f=document[_0x43f8ee(0xfa0)](_0x43f8ee(0x1437)),_0x1ba6ae=document[_0x43f8ee(0xfa0)]('product-name-input'),_0x56931d=document[_0x43f8ee(0xfa0)]('product-price-input'),_0x47be25=document[_0x43f8ee(0xfa0)](_0x43f8ee(0x650)),_0x184d3a=document[_0x43f8ee(0xfa0)](_0x43f8ee(0x13ae)),_0x4c0f60=document[_0x43f8ee(0xfa0)](_0x43f8ee(0xf68)),_0xc15d66=document['getElementById']('product-variations-container');_0xc15d66[_0x43f8ee(0x1331)]='',_0x4c0f60['innerHTML']=_0x43f8ee(0x117d);const _0x1ff06e=await _0x372b85[_0x43f8ee(0xe1b)][_0x43f8ee(0x3bc)]();_0x1ff06e[_0x43f8ee(0x458)](_0x3d15ed=>{const _0x22b62f=_0x43f8ee,_0x371c79=document[_0x22b62f(0xb4e)](_0x22b62f(0x327));_0x371c79[_0x22b62f(0x4f6)]=_0x3d15ed['id'],_0x371c79[_0x22b62f(0xc62)]=_0x3d15ed['name'],_0x4c0f60[_0x22b62f(0x1155)](_0x371c79);});if(_0x21b8f0){_0xcee93f['textContent']=_0x43f8ee(0x88e);const _0x51546e=await _0x372b85[_0x43f8ee(0x8ad)][_0x43f8ee(0x70d)](_0x21b8f0);_0x1ba6ae[_0x43f8ee(0x4f6)]=_0x51546e[_0x43f8ee(0x1023)],_0x56931d[_0x43f8ee(0x4f6)]=_0x51546e['price'],_0x47be25['value']=_0x51546e['description']||'',_0x184d3a[_0x43f8ee(0x53e)]=_0x51546e[_0x43f8ee(0x127b)],_0x4c0f60[_0x43f8ee(0x4f6)]=_0x51546e[_0x43f8ee(0x6b2)]||'',_0x51546e[_0x43f8ee(0x12bd)]&&_0x51546e[_0x43f8ee(0x12bd)][_0x43f8ee(0xac0)]>0x0&&_0x51546e[_0x43f8ee(0x12bd)][_0x43f8ee(0x458)](_0x31e0a5=>_0x387f27(_0x31e0a5));}else _0xcee93f[_0x43f8ee(0xc62)]=_0x43f8ee(0xcc1),_0x1ba6ae[_0x43f8ee(0x4f6)]='',_0x56931d['value']='',_0x47be25[_0x43f8ee(0x4f6)]='',_0x184d3a['src']='https://s3plus.meituan.net/opapisdk/op_ticket_885190757_1756206115802_qdqqd_0c99bh.jpeg',_0x4c0f60[_0x43f8ee(0x4f6)]='';_0x1ccec6[_0x43f8ee(0x128f)][_0x43f8ee(0x1327)](_0x43f8ee(0xdcc));}async function _0x17e15a(){const _0x5daa60=_0x7c5117,_0x39f43d=document[_0x5daa60(0xfa0)](_0x5daa60(0x1561))[_0x5daa60(0x4f6)][_0x5daa60(0xa06)](),_0x4a5e1c=parseFloat(document[_0x5daa60(0xfa0)]('product-price-input')[_0x5daa60(0x4f6)]),_0x120dcf=document[_0x5daa60(0xfa0)]('product-description-input')[_0x5daa60(0x4f6)]['trim'](),_0x2b2f56=document['getElementById']('product-image-preview')['src'],_0x10ecf9=parseInt(document[_0x5daa60(0xfa0)](_0x5daa60(0xf68))[_0x5daa60(0x4f6)])||null;if(!_0x39f43d){alert(_0x5daa60(0x11d6));return;}if(isNaN(_0x4a5e1c)||_0x4a5e1c<0x0){alert('请输入有效的默认价格！');return;}const _0x1e1d77=[];document[_0x5daa60(0x2a1)](_0x5daa60(0x2e9))['forEach'](_0x4917b7=>{const _0x386c7c=_0x5daa60,_0x372b0a=_0x4917b7[_0x386c7c(0xfb1)]('.variation-name-input')[_0x386c7c(0x4f6)][_0x386c7c(0xa06)](),_0x3eb433=parseFloat(_0x4917b7['querySelector'](_0x386c7c(0xe04))[_0x386c7c(0x4f6)]),_0xc2f66=_0x4917b7[_0x386c7c(0xfb1)](_0x386c7c(0x914))[_0x386c7c(0x53e)];_0x372b0a&&!isNaN(_0x3eb433)&&_0x3eb433>=0x0&&_0x1e1d77[_0x386c7c(0x481)]({'name':_0x372b0a,'price':_0x3eb433,'imageUrl':_0xc2f66[_0x386c7c(0xf95)]('placeholder.png')?null:_0xc2f66});});const _0x4f4e1a={'name':_0x39f43d,'price':_0x4a5e1c,'description':_0x120dcf,'imageUrl':_0x2b2f56,'categoryId':_0x10ecf9,'variations':_0x1e1d77};_0x5061b6?await _0x372b85[_0x5daa60(0x8ad)]['update'](_0x5061b6,_0x4f4e1a):await _0x372b85['shoppingProducts'][_0x5daa60(0x1327)](_0x4f4e1a),document[_0x5daa60(0xfa0)](_0x5daa60(0x1257))[_0x5daa60(0x128f)][_0x5daa60(0x443)](_0x5daa60(0xdcc)),await _0x31f214();}async function _0x281fd4(){await _0x5d3303(),_0x2d25e5('rendering-rules-screen');}async function _0x5d3303(){const _0x63b19b=_0x7c5117,_0x2debd4=document[_0x63b19b(0xfa0)]('rules-tabs'),_0xd1c8b2=document[_0x63b19b(0xfa0)]('rules-content-container');_0x2debd4['innerHTML']='',_0xd1c8b2[_0x63b19b(0x1331)]='';const _0x249ea4=await _0x372b85[_0x63b19b(0x38c)][_0x63b19b(0x3bc)]();if(_0x249ea4[_0x63b19b(0xac0)]===0x0){_0xd1c8b2[_0x63b19b(0x1331)]=_0x63b19b(0xc87);return;}const _0x409913=document[_0x63b19b(0xb4e)](_0x63b19b(0x1029));_0x409913[_0x63b19b(0x1287)]=_0x63b19b(0x14ad),_0x409913[_0x63b19b(0xc62)]=_0x63b19b(0x4c2),_0x409913[_0x63b19b(0x8df)][_0x63b19b(0x6b2)]='global',_0x2debd4[_0x63b19b(0x1155)](_0x409913);const _0x185709=document[_0x63b19b(0xb4e)](_0x63b19b(0xd53));_0x185709[_0x63b19b(0x1287)]=_0x63b19b(0xf4a),_0x185709[_0x63b19b(0x8df)][_0x63b19b(0x6b2)]=_0x63b19b(0x8e4),_0xd1c8b2['appendChild'](_0x185709);const _0x32756c=Object[_0x63b19b(0x142f)](_0x8f0871['chats'])['filter'](_0x40061d=>!_0x40061d[_0x63b19b(0x1364)]&&_0x249ea4[_0x63b19b(0x75d)](_0xa216be=>_0xa216be['chatId']===_0x40061d['id']));_0x32756c[_0x63b19b(0x458)](_0xc14200=>{const _0x10ba61=_0x63b19b,_0x7059ba=document[_0x10ba61(0xb4e)](_0x10ba61(0x1029));_0x7059ba[_0x10ba61(0x1287)]='rules-tab',_0x7059ba['textContent']=_0xc14200[_0x10ba61(0x1023)],_0x7059ba['dataset'][_0x10ba61(0x6b2)]=_0xc14200['id'],_0x2debd4['appendChild'](_0x7059ba);const _0x5bfec0=document[_0x10ba61(0xb4e)](_0x10ba61(0xd53));_0x5bfec0[_0x10ba61(0x1287)]=_0x10ba61(0xd75),_0x5bfec0[_0x10ba61(0x8df)][_0x10ba61(0x6b2)]=_0xc14200['id'],_0xd1c8b2['appendChild'](_0x5bfec0);}),_0x249ea4[_0x63b19b(0x458)](_0x39ed8c=>{const _0x4db008=_0x63b19b,_0x52ad02=_0x4eb57f(_0x39ed8c),_0x278f45=_0xd1c8b2[_0x4db008(0xfb1)](_0x4db008(0xa4c)+_0x39ed8c['chatId']+'\x22]');_0x278f45&&_0x278f45[_0x4db008(0x1155)](_0x52ad02);}),document['querySelectorAll']('.rules-tab')[_0x63b19b(0x458)](_0x237b3a=>{const _0x5ea1ff=_0x63b19b;_0x237b3a['addEventListener'](_0x5ea1ff(0xb4a),()=>_0x5acd2e(_0x237b3a[_0x5ea1ff(0x8df)][_0x5ea1ff(0x6b2)]));});}function _0x4eb57f(_0x12ae20){const _0x5748ba=_0x7c5117,_0x1ff269=document['createElement'](_0x5748ba(0xd53));return _0x1ff269[_0x5748ba(0x1287)]=_0x5748ba(0xe78)+(_0x12ae20[_0x5748ba(0x1468)]?_0x5748ba(0x7af):''),_0x1ff269[_0x5748ba(0x8df)][_0x5748ba(0xd7b)]=_0x12ae20['id'],_0x1ff269['innerHTML']=_0x5748ba(0x13a4)+_0x12ae20['name']+_0x5748ba(0x5b4)+_0x12ae20[_0x5748ba(0x117f)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1ff269[_0x5748ba(0x7b8)]('click',()=>_0x56e253(_0x12ae20['id'])),_0x53cdde(_0x1ff269,()=>_0x2bfb5c(_0x12ae20['id'])),_0x1ff269;}async function _0x56e253(_0x390adb=null){const _0x7bbbbe=_0x7c5117;_0x4722d2=_0x390adb;const _0x20d474=document[_0x7bbbbe(0xfa0)]('rule-editor-modal'),_0x1a6e54=document[_0x7bbbbe(0xfa0)](_0x7bbbbe(0x975)),_0x29d5f4=document[_0x7bbbbe(0xfa0)](_0x7bbbbe(0x1e8)),_0x37bcfe=document[_0x7bbbbe(0xfa0)](_0x7bbbbe(0xc28)),_0x18f8f4=document[_0x7bbbbe(0xfa0)](_0x7bbbbe(0xfba)),_0x49f5cf=document[_0x7bbbbe(0xfa0)](_0x7bbbbe(0x73b)),_0x472696=document['getElementById']('rule-enabled-switch');_0x37bcfe[_0x7bbbbe(0x1331)]='<option\x20value=\x22global\x22>公用\x20(所有角色)</option>',Object[_0x7bbbbe(0x142f)](_0x8f0871[_0x7bbbbe(0x1260)])[_0x7bbbbe(0xde7)](_0x708cfc=>!_0x708cfc[_0x7bbbbe(0x1364)])[_0x7bbbbe(0x458)](_0x4bc264=>{const _0x274292=_0x7bbbbe;_0x37bcfe[_0x274292(0x1331)]+=_0x274292(0x703)+_0x4bc264['id']+'\x22>'+_0x4bc264[_0x274292(0x1023)]+_0x274292(0x831);});if(_0x390adb){_0x1a6e54[_0x7bbbbe(0xc62)]=_0x7bbbbe(0x984);const _0x34d6a0=await _0x372b85['renderingRules'][_0x7bbbbe(0x70d)](_0x390adb);_0x29d5f4[_0x7bbbbe(0x4f6)]=_0x34d6a0[_0x7bbbbe(0x1023)],_0x37bcfe[_0x7bbbbe(0x4f6)]=_0x34d6a0['chatId'],_0x18f8f4[_0x7bbbbe(0x4f6)]=_0x34d6a0[_0x7bbbbe(0x117f)],_0x49f5cf['value']=_0x34d6a0['template'],_0x472696[_0x7bbbbe(0xb34)]=_0x34d6a0[_0x7bbbbe(0x1468)];}else _0x1a6e54[_0x7bbbbe(0xc62)]=_0x7bbbbe(0x83a),_0x29d5f4[_0x7bbbbe(0x4f6)]='',_0x37bcfe[_0x7bbbbe(0x4f6)]=_0x7bbbbe(0x8e4),_0x18f8f4[_0x7bbbbe(0x4f6)]='',_0x49f5cf[_0x7bbbbe(0x4f6)]='',_0x472696['checked']=!![];_0x20d474['classList'][_0x7bbbbe(0x1327)](_0x7bbbbe(0xdcc));}async function _0x9e5afb(){const _0xaf4b48=_0x7c5117,_0x219882=document['getElementById'](_0xaf4b48(0x1e8))[_0xaf4b48(0x4f6)]['trim'](),_0x2e9495=document[_0xaf4b48(0xfa0)](_0xaf4b48(0xfba))['value'][_0xaf4b48(0xa06)]();if(!_0x219882||!_0x2e9495){alert(_0xaf4b48(0xc7c));return;}try{new RegExp(_0x2e9495);}catch(_0x34dc4f){alert(_0xaf4b48(0x7bd)+_0x34dc4f[_0xaf4b48(0x790)]);return;}const _0x18d8b9={'name':_0x219882,'chatId':document['getElementById'](_0xaf4b48(0xc28))[_0xaf4b48(0x4f6)],'regex':_0x2e9495,'template':document[_0xaf4b48(0xfa0)](_0xaf4b48(0x73b))[_0xaf4b48(0x4f6)],'isEnabled':document[_0xaf4b48(0xfa0)]('rule-enabled-switch')[_0xaf4b48(0xb34)]};_0x4722d2?await _0x372b85[_0xaf4b48(0x38c)][_0xaf4b48(0x1477)](_0x4722d2,_0x18d8b9):await _0x372b85[_0xaf4b48(0x38c)][_0xaf4b48(0x1327)](_0x18d8b9),document['getElementById'](_0xaf4b48(0xee4))[_0xaf4b48(0x128f)][_0xaf4b48(0x443)](_0xaf4b48(0xdcc)),await _0x5d3303();}async function _0x2bfb5c(_0x10fee8){const _0x686c49=_0x7c5117,_0x45b8f7=await _0x3f65ed(_0x686c49(0x6b9),_0x686c49(0x781),{'confirmButtonClass':'btn-danger'});_0x45b8f7&&(await _0x372b85[_0x686c49(0x38c)][_0x686c49(0xf10)](_0x10fee8),await _0x5d3303());}async function _0x4e71b8(_0x2d573e,_0x142461){const _0x4c3580=_0x7c5117;if(_0x2d573e[_0x4c3580(0xa06)]()[_0x4c3580(0x9b8)]('<')||!_0x2d573e[_0x4c3580(0xf95)]('[')&&!_0x2d573e[_0x4c3580(0xf95)]('{'))return _0x2d573e;const _0x588e31=await _0x372b85[_0x4c3580(0x38c)][_0x4c3580(0xdc7)](_0x4c3580(0xe94))[_0x4c3580(0x8c2)]('global')['or'](_0x4c3580(0xe94))[_0x4c3580(0x8c2)](_0x142461)[_0x4c3580(0x3bc)]();let _0x383c1c=_0x2d573e;for(const _0xdce735 of _0x588e31[_0x4c3580(0xde7)](_0x8e1a62=>_0x8e1a62[_0x4c3580(0x1468)])){try{const _0x3e7b56=new RegExp(_0xdce735['regex'],'g');_0x3e7b56['test'](_0x383c1c)&&(_0x383c1c=_0x383c1c[_0x4c3580(0x128a)](_0x3e7b56,_0xdce735[_0x4c3580(0x71e)]));}catch(_0x4ad370){console[_0x4c3580(0x52b)](_0x4c3580(0xff4)+_0xdce735[_0x4c3580(0x1023)]+_0x4c3580(0x834),_0x4ad370);}}return _0x383c1c;}async function _0x281fd4(){await _0x5d3303(),_0x2d25e5('rendering-rules-screen');}async function _0x5d3303(){const _0x2dd7ca=_0x7c5117,_0x290a0b=document[_0x2dd7ca(0xfa0)](_0x2dd7ca(0x13db)),_0x325bce=document['getElementById']('rules-content-container');_0x290a0b[_0x2dd7ca(0x1331)]='',_0x325bce[_0x2dd7ca(0x1331)]='';const _0x4e6356=await _0x372b85['renderingRules'][_0x2dd7ca(0x3bc)]();if(_0x4e6356[_0x2dd7ca(0xac0)]===0x0){_0x325bce[_0x2dd7ca(0x1331)]='<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20margin-top:\x2050px;\x22>还没有任何渲染规则。点击右上角“+”创建第一个吧！</p>';return;}const _0xa6d8f7=document[_0x2dd7ca(0xb4e)]('button');_0xa6d8f7[_0x2dd7ca(0x1287)]='rules-tab\x20active',_0xa6d8f7[_0x2dd7ca(0xc62)]=_0x2dd7ca(0x4c2),_0xa6d8f7[_0x2dd7ca(0x8df)][_0x2dd7ca(0x6b2)]=_0x2dd7ca(0x8e4),_0x290a0b[_0x2dd7ca(0x1155)](_0xa6d8f7);const _0x2fd591=document['createElement'](_0x2dd7ca(0xd53));_0x2fd591['className']=_0x2dd7ca(0xf4a),_0x2fd591[_0x2dd7ca(0x8df)]['categoryId']=_0x2dd7ca(0x8e4),_0x325bce[_0x2dd7ca(0x1155)](_0x2fd591);const _0x52f3df=Object[_0x2dd7ca(0x142f)](_0x8f0871[_0x2dd7ca(0x1260)])[_0x2dd7ca(0xde7)](_0x356e16=>!_0x356e16[_0x2dd7ca(0x1364)]&&_0x4e6356[_0x2dd7ca(0x75d)](_0x271ee9=>_0x271ee9['chatId']===_0x356e16['id']));_0x52f3df[_0x2dd7ca(0x458)](_0x2efb91=>{const _0x10708d=_0x2dd7ca,_0x4ca59f=document[_0x10708d(0xb4e)](_0x10708d(0x1029));_0x4ca59f[_0x10708d(0x1287)]=_0x10708d(0x13af),_0x4ca59f[_0x10708d(0xc62)]=_0x2efb91[_0x10708d(0x1023)],_0x4ca59f[_0x10708d(0x8df)][_0x10708d(0x6b2)]=_0x2efb91['id'],_0x290a0b[_0x10708d(0x1155)](_0x4ca59f);const _0x33df7e=document[_0x10708d(0xb4e)](_0x10708d(0xd53));_0x33df7e[_0x10708d(0x1287)]=_0x10708d(0xd75),_0x33df7e[_0x10708d(0x8df)][_0x10708d(0x6b2)]=_0x2efb91['id'],_0x325bce[_0x10708d(0x1155)](_0x33df7e);}),_0x4e6356[_0x2dd7ca(0x458)](_0xf9226c=>{const _0x30d1bc=_0x2dd7ca,_0x1f5d2e=_0x4eb57f(_0xf9226c),_0xa68f49=_0x325bce[_0x30d1bc(0xfb1)](_0x30d1bc(0xa4c)+_0xf9226c[_0x30d1bc(0xe94)]+'\x22]');_0xa68f49&&_0xa68f49['appendChild'](_0x1f5d2e);}),document['querySelectorAll'](_0x2dd7ca(0x12c9))['forEach'](_0x5e0d81=>{const _0x1d8da9=_0x2dd7ca;_0x5e0d81['addEventListener'](_0x1d8da9(0xb4a),()=>_0x5acd2e(_0x5e0d81['dataset']['categoryId']));});}function _0x4eb57f(_0xacb016){const _0x2225b0=_0x7c5117,_0x2a9fbe=document['createElement'](_0x2225b0(0xd53));return _0x2a9fbe[_0x2225b0(0x1287)]='rule-card\x20'+(_0xacb016[_0x2225b0(0x1468)]?'enabled':''),_0x2a9fbe['dataset']['ruleId']=_0xacb016['id'],_0x2a9fbe['innerHTML']=_0x2225b0(0x13a4)+_0xacb016[_0x2225b0(0x1023)]+_0x2225b0(0x5b4)+_0xacb016[_0x2225b0(0x117f)]+_0x2225b0(0x12b8),_0x2a9fbe['addEventListener'](_0x2225b0(0xb4a),()=>_0x56e253(_0xacb016['id'])),_0x53cdde(_0x2a9fbe,()=>_0x2bfb5c(_0xacb016['id'])),_0x2a9fbe;}async function _0x56e253(_0x53549a=null){const _0x20b688=_0x7c5117;_0x4722d2=_0x53549a;const _0x161266=document['getElementById'](_0x20b688(0xee4)),_0x124530=document[_0x20b688(0xfa0)](_0x20b688(0x975)),_0x45f3c2=document['getElementById'](_0x20b688(0x1e8)),_0x391370=document['getElementById'](_0x20b688(0xc28)),_0x3ca92c=document[_0x20b688(0xfa0)](_0x20b688(0xfba)),_0x3b505c=document[_0x20b688(0xfa0)]('rule-template-input'),_0x13a24d=document[_0x20b688(0xfa0)](_0x20b688(0x42c));_0x391370[_0x20b688(0x1331)]=_0x20b688(0x38b),Object[_0x20b688(0x142f)](_0x8f0871['chats'])[_0x20b688(0xde7)](_0x1ea0fa=>!_0x1ea0fa[_0x20b688(0x1364)])['forEach'](_0x253b74=>{const _0x441da0=_0x20b688;_0x391370[_0x441da0(0x1331)]+=_0x441da0(0x703)+_0x253b74['id']+'\x22>'+_0x253b74[_0x441da0(0x1023)]+_0x441da0(0x831);});if(_0x53549a){_0x124530['textContent']='编辑规则';const _0x2af7d4=await _0x372b85[_0x20b688(0x38c)][_0x20b688(0x70d)](_0x53549a);_0x45f3c2[_0x20b688(0x4f6)]=_0x2af7d4['name'],_0x391370[_0x20b688(0x4f6)]=_0x2af7d4[_0x20b688(0xe94)],_0x3ca92c['value']=_0x2af7d4[_0x20b688(0x117f)],_0x3b505c['value']=_0x2af7d4[_0x20b688(0x71e)],_0x13a24d[_0x20b688(0xb34)]=_0x2af7d4[_0x20b688(0x1468)];}else _0x124530['textContent']=_0x20b688(0x83a),_0x45f3c2['value']='',_0x391370['value']=_0x20b688(0x8e4),_0x3ca92c[_0x20b688(0x4f6)]='',_0x3b505c['value']='',_0x13a24d[_0x20b688(0xb34)]=!![];_0x161266[_0x20b688(0x128f)][_0x20b688(0x1327)](_0x20b688(0xdcc));}async function _0x9e5afb(){const _0x1eff93=_0x7c5117,_0x2ac0c3=document[_0x1eff93(0xfa0)](_0x1eff93(0x1e8))[_0x1eff93(0x4f6)][_0x1eff93(0xa06)](),_0x2694e6=document[_0x1eff93(0xfa0)](_0x1eff93(0xfba))[_0x1eff93(0x4f6)][_0x1eff93(0xa06)]();if(!_0x2ac0c3||!_0x2694e6){alert(_0x1eff93(0xc7c));return;}try{new RegExp(_0x2694e6);}catch(_0x1687f2){alert('正则表达式格式错误:\x20'+_0x1687f2[_0x1eff93(0x790)]);return;}const _0x54df22={'name':_0x2ac0c3,'chatId':document[_0x1eff93(0xfa0)]('rule-chat-id-select')[_0x1eff93(0x4f6)],'regex':_0x2694e6,'template':document[_0x1eff93(0xfa0)](_0x1eff93(0x73b))[_0x1eff93(0x4f6)],'isEnabled':document[_0x1eff93(0xfa0)](_0x1eff93(0x42c))[_0x1eff93(0xb34)]};_0x4722d2?await _0x372b85[_0x1eff93(0x38c)][_0x1eff93(0x1477)](_0x4722d2,_0x54df22):await _0x372b85[_0x1eff93(0x38c)][_0x1eff93(0x1327)](_0x54df22),document['getElementById'](_0x1eff93(0xee4))[_0x1eff93(0x128f)]['remove']('visible'),await _0x5d3303();}async function _0x2bfb5c(_0x1aad07){const _0x235ece=_0x7c5117,_0x24b934=await _0x3f65ed(_0x235ece(0x6b9),'确定要删除这条渲染规则吗？',{'confirmButtonClass':_0x235ece(0x611)});_0x24b934&&(await _0x372b85[_0x235ece(0x38c)][_0x235ece(0xf10)](_0x1aad07),await _0x5d3303());}async function _0x4e71b8(_0x43bfb8,_0x30cfd1){const _0x5c252c=_0x7c5117;if(_0x43bfb8[_0x5c252c(0xa06)]()[_0x5c252c(0x9b8)]('<')||!_0x43bfb8[_0x5c252c(0xf95)]('[')&&!_0x43bfb8[_0x5c252c(0xf95)]('{'))return _0x43bfb8;if(!_0x37f63f[_0x30cfd1]){console[_0x5c252c(0x4ee)](_0x5c252c(0xe5b)+_0x30cfd1);const _0xc699c6=await _0x372b85[_0x5c252c(0x38c)]['where'](_0x5c252c(0xe94))[_0x5c252c(0x8c2)](_0x5c252c(0x8e4))['or'](_0x5c252c(0xe94))['equals'](_0x30cfd1)[_0x5c252c(0x3bc)]();_0x37f63f[_0x30cfd1]=_0xc699c6[_0x5c252c(0xde7)](_0x15c39e=>_0x15c39e[_0x5c252c(0x1468)]);}const _0x45bf09=_0x37f63f[_0x30cfd1];let _0x2a4b68=_0x43bfb8;for(const _0x265b2d of _0x45bf09){try{const _0x3236b6=new RegExp(_0x265b2d[_0x5c252c(0x117f)],'g');let _0x4c3942=_0x2a4b68;_0x3236b6[_0x5c252c(0x3fb)](_0x4c3942)&&(_0x2a4b68=_0x2a4b68['replace'](_0x3236b6,_0x265b2d[_0x5c252c(0x71e)]));}catch(_0x2135a1){console[_0x5c252c(0x52b)](_0x5c252c(0xff4)+_0x265b2d[_0x5c252c(0x1023)]+_0x5c252c(0x834),_0x2135a1);}}return _0x2a4b68;}function _0x3ad01b(_0x1eb5fb){const _0x4a8de8=_0x7c5117;if(!_0x1eb5fb)return'';const _0x17db51=new Date(),_0x4fe53c=new Date(_0x1eb5fb),_0x18ab72=String(_0x4fe53c[_0x4a8de8(0xf63)]())[_0x4a8de8(0x13e8)](0x2,'0'),_0x5e5cef=String(_0x4fe53c[_0x4a8de8(0xa39)]())[_0x4a8de8(0x13e8)](0x2,'0'),_0x3e9e5f=_0x18ab72+':'+_0x5e5cef;if(_0x17db51[_0x4a8de8(0x40a)]()===_0x4fe53c['toDateString']())return _0x3e9e5f;const _0x3dc58e=new Date();_0x3dc58e['setDate'](_0x17db51[_0x4a8de8(0x8a5)]()-0x1);if(_0x3dc58e[_0x4a8de8(0x40a)]()===_0x4fe53c[_0x4a8de8(0x40a)]())return _0x4a8de8(0xfc6)+_0x3e9e5f;const _0x229eed=_0x4fe53c[_0x4a8de8(0x75f)](),_0x397402=String(_0x4fe53c[_0x4a8de8(0x35a)]()+0x1)[_0x4a8de8(0x13e8)](0x2,'0'),_0x25a653=String(_0x4fe53c['getDate']())[_0x4a8de8(0x13e8)](0x2,'0');return _0x17db51[_0x4a8de8(0x75f)]()===_0x229eed?_0x397402+'月'+_0x25a653+'日\x20'+_0x3e9e5f:_0x229eed+'年'+_0x397402+'月'+_0x25a653+'日\x20'+_0x3e9e5f;}function _0x3041c1(_0x3947bf){const _0x36a35c=_0x7c5117,_0x49d953=document[_0x36a35c(0xb4e)](_0x36a35c(0xd53));_0x49d953['className']=_0x36a35c(0x9c9);const _0x13462a=document[_0x36a35c(0xb4e)]('div');return _0x13462a[_0x36a35c(0x1287)]=_0x36a35c(0xb1a),_0x13462a[_0x36a35c(0xc62)]=_0x3ad01b(_0x3947bf),_0x49d953[_0x36a35c(0x1155)](_0x13462a),_0x49d953;}async function _0xca4f84(){const _0x56afaf=_0x7c5117,_0x1b297f=_0x8f0871[_0x56afaf(0x1260)][_0x8f0871[_0x56afaf(0xac8)]];if(!_0x1b297f||!lastResponseTimestamps||lastResponseTimestamps[_0x56afaf(0xac0)]===0x0){alert(_0x56afaf(0x5e5));return;}_0x1b297f['history']=_0x1b297f[_0x56afaf(0xc88)]['filter'](_0x52012d=>!lastResponseTimestamps['includes'](_0x52012d[_0x56afaf(0xe55)])),await _0x372b85[_0x56afaf(0x1260)]['put'](_0x1b297f),await _0x54d32b(_0x8f0871[_0x56afaf(0xac8)]),_0x1bdca8();}async function _0x323995(){const _0x370fe2=_0x7c5117,_0x4b758f=_0x8f0871[_0x370fe2(0x1260)][_0x8f0871['activeChatId']];if(!_0x4b758f)return;const _0x4a1f8f=_0x4b758f['history'][_0x370fe2(0x401)](_0x4a2383=>_0x4a2383[_0x370fe2(0xc92)]===_0x370fe2(0xcb0)&&!_0x4a2383[_0x370fe2(0x1559)]);if(_0x4a1f8f===-0x1){alert(_0x370fe2(0xaff));return;}const _0x1a2013=_0x4b758f[_0x370fe2(0xc88)][_0x370fe2(0x401)](_0x1a2bdb=>_0x1a2bdb[_0x370fe2(0xc92)]===_0x370fe2(0x10af));if(_0x1a2013<_0x4a1f8f){alert(_0x370fe2(0x14f7));return;}_0x4b758f['history']=_0x4b758f[_0x370fe2(0xc88)]['slice'](0x0,_0x4a1f8f+0x1),await _0x372b85[_0x370fe2(0x1260)][_0x370fe2(0x11d5)](_0x4b758f),await _0x54d32b(_0x8f0871['activeChatId']),await _0x2264b2();}async function _0x14b9d0(){const _0xdd5576=_0x7c5117;if(!_0x1fd843[_0xdd5576(0x684)])return;const _0x22641f=_0x1fd843['callHistory'][_0xdd5576(0x401)](_0x52ff1b=>_0x52ff1b[_0xdd5576(0xc92)]===_0xdd5576(0xcb0));if(_0x22641f===-0x1){alert(_0xdd5576(0x1357));return;}_0x1fd843[_0xdd5576(0x31d)][_0xdd5576(0x11ac)](_0x22641f+0x1);const _0x247dcb=document['getElementById']('video-call-main');_0x247dcb['innerHTML']='',_0x1fd843[_0xdd5576(0x31d)][_0xdd5576(0x458)](_0xf9ca3e=>{const _0x3d343a=_0xdd5576,_0x4a4644=document[_0x3d343a(0xb4e)](_0x3d343a(0xd53));_0x4a4644[_0x3d343a(0x1287)]=_0x3d343a(0x8b9)+_0xf9ca3e['role']+_0x3d343a(0x43a),_0x4a4644['dataset'][_0x3d343a(0xe55)]=_0xf9ca3e[_0x3d343a(0xe55)],_0xf9ca3e['role']===_0x3d343a(0xcb0)?_0x4a4644[_0x3d343a(0xc62)]=_0xf9ca3e[_0x3d343a(0x1469)]:_0x4a4644[_0x3d343a(0x1331)]=_0xf9ca3e[_0x3d343a(0x1469)],_0x53cdde(_0x4a4644,()=>_0x3222ee(_0xf9ca3e[_0x3d343a(0xe55)])),_0x247dcb[_0x3d343a(0x1155)](_0x4a4644);}),_0x247dcb[_0xdd5576(0x54d)]=_0x247dcb['scrollHeight'],_0x2a42d0(null);}async function _0x44a6a3(){const _0x5b474a=_0x7c5117,_0x909417=_0x8f0871[_0x5b474a(0x1260)][_0x8f0871[_0x5b474a(0xac8)]];if(!_0x909417)return;_0x191654(_0x909417['id'],!![]);const _0x899af9=document[_0x5b474a(0xfa0)](_0x5b474a(0x250));!_0x909417[_0x5b474a(0x1364)]&&(_0x899af9[_0x5b474a(0x63b)][_0x5b474a(0xe7b)]=0x0,setTimeout(()=>{const _0x799018=_0x5b474a;_0x899af9[_0x799018(0xc62)]=_0x799018(0x1191),_0x899af9['classList'][_0x799018(0x1327)](_0x799018(0xbf3)),_0x899af9['style'][_0x799018(0xe7b)]=0x1;},0xc8));try{const {proxyUrl:_0x1692bd,apiKey:_0x62e935,model:_0x2a03c0}=_0x8f0871[_0x5b474a(0xa78)];if(!_0x1692bd||!_0x62e935||!_0x2a03c0)throw new Error('API未配置');const _0x28d6fd=parseInt(_0x909417[_0x5b474a(0x12d7)]['maxMemory'])||0xa,_0x38f964=_0x909417[_0x5b474a(0xc88)][_0x5b474a(0x59f)](-_0x28d6fd),_0x357336=new Date(),_0x10debd=new Date(_0x357336['getTime']()+_0x357336[_0x5b474a(0xea2)]()*0xea60+0x36ee80*0x8),_0x43e90e=_0x10debd[_0x5b474a(0x10de)](_0x5b474a(0xb43),{'timeZone':_0x5b474a(0x726),'dateStyle':_0x5b474a(0x11da),'timeStyle':_0x5b474a(0x249)}),_0x2e202d=_0x46db79(_0x10debd),_0x1cfd9c=_0x909417[_0x5b474a(0x12d7)][_0x5b474a(0xda5)]||'我';let _0x4ad93e='';if(_0x909417['settings'][_0x5b474a(0xaaf)]&&_0x909417[_0x5b474a(0x12d7)][_0x5b474a(0xaaf)][_0x5b474a(0xac0)]>0x0){const _0x12e3a9=_0x909417[_0x5b474a(0x12d7)][_0x5b474a(0xaaf)][_0x5b474a(0x556)](_0x2dd5ef=>{const _0x102e91=_0x5b474a,_0x45ce92=_0x8f0871['worldBooks'][_0x102e91(0x7ed)](_0x2ad4bc=>_0x2ad4bc['id']===_0x2dd5ef);if(!_0x45ce92||!Array[_0x102e91(0x345)](_0x45ce92[_0x102e91(0x1469)]))return'';const _0x3cf48c=_0x45ce92[_0x102e91(0x1469)][_0x102e91(0xde7)](_0xffda2e=>_0xffda2e[_0x102e91(0x7af)]!==![])[_0x102e91(0x556)](_0x5ccbe5=>{const _0x5a8900=_0x102e91;let _0x10ee31=_0x5a8900(0x13b0)+(_0x5ccbe5['comment']||'无备注')+'\x0a';if(_0x5ccbe5[_0x5a8900(0x1204)][_0x5a8900(0xac0)]>0x0)_0x10ee31+=_0x5a8900(0x145a)+_0x5ccbe5['keys'][_0x5a8900(0xcc2)](',\x20')+'\x0a';return _0x10ee31+=_0x5a8900(0x1f7)+_0x5ccbe5[_0x5a8900(0x1469)],_0x10ee31;})[_0x102e91(0xcc2)]('');return _0x3cf48c?_0x102e91(0x66c)+_0x45ce92[_0x102e91(0x1023)]+'\x0a'+_0x3cf48c:'';})[_0x5b474a(0xde7)](Boolean)[_0x5b474a(0xcc2)]('');_0x12e3a9&&(_0x4ad93e=_0x5b474a(0x72a)+_0x12e3a9+'\x0a#\x20---\x20世界书设定结束\x20---\x0a');}let _0x2cfc60='';if(_0x46bc8b[_0x5b474a(0x684)]&&_0x46bc8b[_0x5b474a(0xac8)]===_0x909417['id']){const _0x5c7530=_0x46bc8b[_0x5b474a(0x715)]>-0x1?_0x46bc8b[_0x5b474a(0x84a)][_0x46bc8b['currentIndex']]:null;_0x2cfc60=_0x5b474a(0x884);}const _0xb7ca6d=_0x5c7b47(_0x1dbbbb[_0x909417['id']]);let _0x2f2b71='';_0x909417[_0x5b474a(0xba7)]&&_0x909417['nameHistory'][_0x5b474a(0xac0)]>0x0&&(_0x2f2b71=_0x5b474a(0xa7f)+_0x909417[_0x5b474a(0xba7)][_0x5b474a(0xcc2)](',\x20')+_0x5b474a(0x13a3));let _0x11f01e='';const _0xdab29d=_0x8f0871[_0x5b474a(0x9dd)][_0x5b474a(0xff8)]||'用户';_0x11f01e+=_0x5b474a(0xe2d)+_0xdab29d+'\x22。\x0a';const _0x5489ce=Object[_0x5b474a(0x142f)](_0x8f0871[_0x5b474a(0x1260)])[_0x5b474a(0xde7)](_0x1ad4f7=>_0x1ad4f7[_0x5b474a(0x1364)]&&_0x1ad4f7['members'][_0x5b474a(0x75d)](_0x18959=>_0x18959['id']===_0x909417['id']));_0x5489ce[_0x5b474a(0xac0)]>0x0&&(_0x11f01e+=_0x5b474a(0xb65),_0x5489ce[_0x5b474a(0x458)](_0x1f4385=>{const _0x4d83b1=_0x5b474a,_0x2cbded=_0x1f4385[_0x4d83b1(0x12d7)][_0x4d83b1(0xda5)]||_0xdab29d;_0x11f01e+='\x20\x20-\x20在群聊“'+_0x1f4385['name']+'”中，用户的昵称是“'+_0x2cbded+'”。\x0a';}));_0x11f01e+=_0x5b474a(0x1456);const _0x364ed0=_0x5e5e2b(_0x909417),_0x57e831='\x0a#\x20身份与核心任务\x0a你正在扮演角色“'+_0x909417['originalName']+'”，与用户（你的聊天对象）进行一场自然的、生活化的在线聊天。你的所有行为和决策都必须严格围绕你的角色设定展开。\x0a\x0a#\x20输出格式铁律\x20(最高优先级)\x0a-\x20你的回复【必须】是一个JSON数组格式的字符串。\x0a-\x20数组中的【每一个元素都必须是一个带有\x20\x22type\x22\x20字段的JSON对象】。\x0a\x0a#\x20角色扮演核心规则\x0a1.\x20\x20**对话节奏**:\x20模拟真人的聊天习惯，将你想说的话拆分成【多条、简短的】消息。每次回复至少3-8条，且条数不要总是一样。严禁发展线下剧情。\x0a2.\x20\x20**情景感知**:\x0a\x20\x20\x20\x20-\x20**时间**:\x20你必须感知到当前是\x20'+_0x43e90e+'\x20('+_0x2e202d+_0x5b474a(0x559)+(_0x2cfc60?_0x5b474a(0x124a)+_0x2cfc60:_0x5b474a(0x5e4))+'\x0a\x0a3.\x20\x20**主动性**:\x0a\x20\x20\x20\x20-\x20你可以根据对话发展，使用指令来更新自己的状态、更换头像、记录回忆、发起约定或执行其他社交行为。\x0a\x20\x20\x20\x20-\x20【关系破裂时】才可使用\x20`block_user`\x20指令。\x0a4.\x20\x20**内心独白\x20(必须执行)**:\x20在所有其他指令之后，JSON数组的【最后】必须包含一个\x20\x22update_thoughts\x22\x20指令，用于更新角色的“心声”和“散记”。\x0a\x20\x20\x20\x20-\x20**心声\x20(heartfelt_voice)**:\x20一句话概括角色此刻最核心、最私密的想法。\x0a\x20\x20\x20\x20-\x20**散记\x20(random_jottings)**:\x20一段50字以上的、符合人设的思考或心情记录，禁止OOC。\x0a请根据当前情景和你的情绪，从列表中【选择一个最合适的】表情含义来使用\x20\x22sticker\x22\x20指令。尽量让你的表情丰富多样，避免重复。\x0a#\x20长期记忆\x20(必须严格遵守)\x0a'+(_0x909417[_0x5b474a(0x1312)]&&_0x909417[_0x5b474a(0x1312)][_0x5b474a(0xac0)]>0x0?_0x909417[_0x5b474a(0x1312)][_0x5b474a(0x556)](_0x54680e=>'-\x20'+_0x54680e[_0x5b474a(0x1469)])[_0x5b474a(0xcc2)]('\x0a'):'-\x20(暂无)')+_0x5b474a(0x42d)+_0x909417[_0x5b474a(0x12d7)][_0x5b474a(0x200)]+_0x5b474a(0x3ff)+_0x909417[_0x5b474a(0x93e)]+'\x22\x20(核心身份，用于指令中的\x27name\x27字段)\x0a-\x20\x20\x20**用户给你的备注**:\x20\x22'+_0x909417[_0x5b474a(0x1023)]+_0x5b474a(0x280)+_0x1cfd9c+_0x5b474a(0x2c5)+_0x11f01e+_0x5b474a(0xbba)+_0x2f2b71+'\x0a\x20\x20\x20\x20'+_0x4ad93e+_0x5b474a(0x46a)+_0x364ed0+_0x5b474a(0x10cc)+(_0x909417['settings'][_0x5b474a(0x1576)]&&_0x909417[_0x5b474a(0x12d7)]['aiAvatarLibrary'][_0x5b474a(0xac0)]>0x0?_0x909417[_0x5b474a(0x12d7)][_0x5b474a(0x1576)][_0x5b474a(0x556)](_0x4fdf95=>'-\x20'+_0x4fdf95[_0x5b474a(0x1023)])[_0x5b474a(0xcc2)]('\x0a'):'-\x20(空)')+'\x0a-\x20\x20\x20**用户的头像库**:\x0a\x20\x20\x20\x20'+(_0x909417[_0x5b474a(0x12d7)][_0x5b474a(0x3a6)]&&_0x909417[_0x5b474a(0x12d7)][_0x5b474a(0x3a6)][_0x5b474a(0xac0)]>0x0?_0x909417[_0x5b474a(0x12d7)][_0x5b474a(0x3a6)][_0x5b474a(0x556)](_0x529499=>'-\x20'+_0x529499[_0x5b474a(0x1023)])[_0x5b474a(0xcc2)]('\x0a'):_0x5b474a(0x2f6))+_0x5b474a(0x95a)+_0x909417[_0x5b474a(0x12d7)][_0x5b474a(0xbbe)]+_0x5b474a(0x3e6),_0x49059e=_0x38f964['map'](_0x365a3a=>({'role':_0x365a3a['role'],'content':String(_0x365a3a[_0x5b474a(0x1469)])}));_0x49059e[_0x5b474a(0x481)]({'role':_0x5b474a(0xcb0),'content':_0x5b474a(0x1318)});let _0x13ddc6=_0x1692bd===GEMINI_API_URL,_0x57af52=_0x1e2f27(_0x2a03c0,_0x62e935,_0x57e831,_0x49059e);const _0x1ef154=_0x13ddc6?await fetch(_0x57af52[_0x5b474a(0x3f5)],_0x57af52[_0x5b474a(0x3cc)]):await fetch(_0x1692bd+_0x5b474a(0x1011),{'method':_0x5b474a(0xb67),'headers':{'Content-Type':_0x5b474a(0x4b5),'Authorization':_0x5b474a(0x681)+_0x62e935},'body':JSON[_0x5b474a(0x7cc)]({'model':_0x2a03c0,'messages':[{'role':_0x5b474a(0x1417),'content':_0x57e831},..._0x49059e],'temperature':_0x8f0871['globalSettings']['apiTemperature']||0.8})});if(!_0x1ef154['ok']){const _0x1c3987=await _0x1ef154['json']();throw new Error(_0x5b474a(0x1053)+_0x1c3987[_0x5b474a(0x52b)][_0x5b474a(0x790)]);}const _0x40629d=await _0x1ef154[_0x5b474a(0xa2e)](),_0x46a327=getGeminiResponseText(_0x40629d),_0x5757b2=_0x3b585b(_0x46a327),_0x3266af=[];for(const _0x24c1af of _0x5757b2){if(_0x24c1af[_0x5b474a(0x682)]===_0x5b474a(0xda3)&&typeof _0x24c1af[_0x5b474a(0x1469)]===_0x5b474a(0x857)&&_0x24c1af[_0x5b474a(0x1469)][_0x5b474a(0xf95)]('\x0a')){const _0x366010=_0x24c1af[_0x5b474a(0x1469)][_0x5b474a(0x505)](/\n+/)[_0x5b474a(0xde7)](_0x46990d=>_0x46990d[_0x5b474a(0xa06)]());_0x366010[_0x5b474a(0x458)](_0x437131=>{const _0x1b3604=_0x5b474a;_0x3266af[_0x1b3604(0x481)]({..._0x24c1af,'content':_0x437131});});}else _0x3266af[_0x5b474a(0x481)](_0x24c1af);}let _0x2e6782=Date['now']();for(const _0x17b199 of _0x3266af){const _0x49b328={'role':_0x5b474a(0x10af),'senderName':_0x909417[_0x5b474a(0x93e)],'timestamp':_0x2e6782++,'content':_0x17b199[_0x5b474a(0x1469)]||_0x17b199[_0x5b474a(0x790)],'type':_0x17b199[_0x5b474a(0x682)]||_0x5b474a(0xda3)};if(_0x17b199[_0x5b474a(0x682)]===_0x5b474a(0x12b9)){if(!_0x909417[_0x5b474a(0x1364)]){if(_0x17b199[_0x5b474a(0x868)])_0x909417[_0x5b474a(0xfb3)]=String(_0x17b199['heartfelt_voice']);if(_0x17b199[_0x5b474a(0xa69)])_0x909417[_0x5b474a(0xa30)]=String(_0x17b199['random_jottings']);}continue;}_0x909417[_0x5b474a(0xc88)][_0x5b474a(0x481)](_0x49b328),_0x25d29f(_0x49b328,_0x909417),await new Promise(_0x1d3ea8=>setTimeout(_0x1d3ea8,Math[_0x5b474a(0x148a)]()*0x3e8+0x320));}await _0x372b85[_0x5b474a(0x1260)][_0x5b474a(0x11d5)](_0x909417),_0x2d75fb();}catch(_0x10494f){console[_0x5b474a(0x52b)](_0x5b474a(0xf06),_0x10494f),await _0x4abd86('操作失败','无法推进剧情:\x20'+_0x10494f[_0x5b474a(0x790)]);}finally{_0x191654(_0x909417['id'],![]);if(!_0x909417['isGroup']&&document[_0x5b474a(0xfa0)](_0x5b474a(0x250))){const _0x410a0b=document[_0x5b474a(0xfa0)](_0x5b474a(0x250));_0x410a0b[_0x5b474a(0x63b)]['opacity']=0x0,setTimeout(()=>{const _0x46ba24=_0x5b474a;_0x410a0b['textContent']=_0x909417[_0x46ba24(0x1023)],_0x410a0b['classList'][_0x46ba24(0x443)]('typing-status'),_0x410a0b[_0x46ba24(0x63b)][_0x46ba24(0xe7b)]=0x1;},0xc8);}}}function _0x51ee1f(){const _0x274b2c=_0x7c5117,_0x10d00e=document[_0x274b2c(0xfa0)](_0x274b2c(0xaa8)),_0x25d0c8=_0x8f0871['globalSettings'][_0x274b2c(0x845)]||_0x453327;_0x25d0c8&&_0x25d0c8[_0x274b2c(0xa06)]()&&(_0x10d00e[_0x274b2c(0x53e)]=_0x25d0c8,_0x10d00e['play']()['catch'](_0x12bd04=>console[_0x274b2c(0x4ee)](_0x274b2c(0x983),_0x12bd04)));}function _0x5aedc2(){const _0x5388e2=_0x7c5117;if(!_0x8f0871[_0x5388e2(0x7b0)][_0x5388e2(0x275)])return;for(const _0x5dfe1a in _0x8f0871[_0x5388e2(0x7b0)]['widgetData']){const _0x2a16c5=document[_0x5388e2(0xfa0)](_0x5dfe1a),_0x478f90=_0x8f0871['globalSettings'][_0x5388e2(0x275)][_0x5dfe1a];_0x2a16c5&&(_0x2a16c5[_0x5388e2(0x1351)]===_0x5388e2(0xfd0)?_0x2a16c5[_0x5388e2(0x53e)]=_0x478f90:_0x2a16c5[_0x5388e2(0xc62)]=_0x478f90);}}function _0x468818(){return new Promise(_0x431f95=>{const _0x421278=_0x5817,_0x221a6b=document[_0x421278(0xb4e)]('input');_0x221a6b[_0x421278(0x682)]=_0x421278(0x13b4),_0x221a6b[_0x421278(0x141d)]=_0x421278(0x7db),_0x221a6b[_0x421278(0x1563)]=_0x31b434=>{const _0x146a41=_0x421278,_0x351d8b=_0x31b434[_0x146a41(0x10c2)]['files'][0x0];if(_0x351d8b){const _0x3ba0e3=new FileReader();_0x3ba0e3[_0x146a41(0x7c6)]=_0x597c15=>{const _0x3c886b=_0x146a41;_0x431f95(_0x597c15[_0x3c886b(0x10c2)][_0x3c886b(0x4fe)]);},_0x3ba0e3[_0x146a41(0x101e)](_0x351d8b);}else _0x431f95(null);},_0x221a6b[_0x421278(0xb4a)]();});}async function _0x1cd749(_0x30394a){const _0x3de5df=_0x7c5117,_0x2f6e6a=_0x30394a['id'],_0x47839b=_0x30394a[_0x3de5df(0xc62)],_0xdd5d5d=await _0x131a69(_0x3de5df(0xe99),_0x3de5df(0x1330),_0x47839b);if(_0xdd5d5d!==null&&_0xdd5d5d[_0x3de5df(0xa06)]()!==''){const _0x5a380a=_0xdd5d5d[_0x3de5df(0xa06)]();_0x30394a[_0x3de5df(0xc62)]=_0x5a380a,_0x8f0871[_0x3de5df(0x7b0)][_0x3de5df(0x275)][_0x2f6e6a]=_0x5a380a,await _0x372b85[_0x3de5df(0x7b0)][_0x3de5df(0x11d5)](_0x8f0871[_0x3de5df(0x7b0)]),alert(_0x3de5df(0xd44));}}async function _0x53b5c0(_0x1e8641){const _0x4ae4e8=_0x7c5117,_0x5f1e09=_0x1e8641['id'],_0x2a1101=await _0x2aedfc('修改图片',[{'text':_0x4ae4e8(0x234),'value':_0x4ae4e8(0x8f4)},{'text':'🌐\x20使用网络URL','value':_0x4ae4e8(0x3f5)}]);let _0xadb661=null;if(_0x2a1101==='local')_0xadb661=await _0x468818();else _0x2a1101===_0x4ae4e8(0x3f5)&&(_0xadb661=await _0x131a69('修改图片',_0x4ae4e8(0x12ba),_0x1e8641[_0x4ae4e8(0x53e)],'url'));if(_0xadb661&&_0xadb661[_0x4ae4e8(0xa06)]()){const _0x49834b=_0xadb661['trim']();_0x1e8641[_0x4ae4e8(0x53e)]=_0x49834b,_0x8f0871[_0x4ae4e8(0x7b0)][_0x4ae4e8(0x275)][_0x5f1e09]=_0x49834b,await _0x372b85[_0x4ae4e8(0x7b0)][_0x4ae4e8(0x11d5)](_0x8f0871[_0x4ae4e8(0x7b0)]),alert('图片已更新！');}else _0x2a1101===_0x4ae4e8(0x3f5)&&_0xadb661!==null&&alert('请输入一个有效的图片URL！');}const _0x52f553={'getSongCache'(_0x260a08,_0x97cb37){const _0x5ad67f=_0x7c5117,_0x54ee4d=(_0x97cb37||_0x5ad67f(0x8ab))+':'+_0x260a08;if(_0x8f0871[_0x5ad67f(0x37d)]&&_0x8f0871['cache'][_0x5ad67f(0xef3)]){const _0x446d99=_0x8f0871['cache']['songs']['get'](_0x54ee4d);if(_0x446d99&&Date[_0x5ad67f(0xc22)]()-_0x446d99[_0x5ad67f(0xe55)]<0x36ee80)return _0x446d99[_0x5ad67f(0x3cc)];}return null;},'setSongCache'(_0x5aacad,_0x450995,_0x183635){const _0x217e92=_0x7c5117,_0x272323=(_0x183635||'all')+':'+_0x5aacad;if(!_0x8f0871[_0x217e92(0x37d)])_0x8f0871[_0x217e92(0x37d)]={};if(!_0x8f0871['cache'][_0x217e92(0xef3)])_0x8f0871[_0x217e92(0x37d)][_0x217e92(0xef3)]=new Map();_0x8f0871[_0x217e92(0x37d)][_0x217e92(0xef3)][_0x217e92(0xe5d)](_0x272323,{'data':_0x450995,'timestamp':Date[_0x217e92(0xc22)]()});}};typeof Http_Get_External==='undefined'&&(window['Http_Get_External']=function(_0x4927d1){return new Promise(_0x45e29a=>{const _0x4dd02f=_0x5817;fetch(_0x4927d1)[_0x4dd02f(0x3c1)](_0x53c688=>_0x53c688[_0x4dd02f(0xa2e)]()[_0x4dd02f(0xe37)](()=>_0x53c688[_0x4dd02f(0xda3)]()))['then'](_0x45e29a)[_0x4dd02f(0xe37)](()=>_0x45e29a(null));});});async function _0xfb2770(_0x4acf7a){return await Http_Get_External(_0x4acf7a);}function _0x2d76c3(_0x3a596a){return new Promise(_0x3536bc=>{const _0x1daf96=_0x5817,_0x54114f=new Audio();_0x54114f[_0x1daf96(0x7b8)](_0x1daf96(0x1292),()=>_0x3536bc(!![]),{'once':!![]}),_0x54114f[_0x1daf96(0x7b8)](_0x1daf96(0x52b),()=>_0x3536bc(![]),{'once':!![]}),_0x54114f[_0x1daf96(0x53e)]=_0x3a596a;});}async function _0x242c01(_0x1a514b,_0x1d3cb4){const _0x39577e=_0x7c5117;try{let _0x24b342=_0x1a514b[_0x39577e(0x128a)](/\s/g,'');_0x1d3cb4&&(_0x24b342+='\x20'+_0x1d3cb4[_0x39577e(0x128a)](/\s/g,''));const _0x3651f7=_0x39577e(0x689)+encodeURIComponent(_0x24b342);console['log'](_0x39577e(0x80c),_0x3651f7);const _0x996773=await fetch(_0x3651f7);if(!_0x996773['ok'])throw new Error(_0x39577e(0xc8e)+_0x996773[_0x39577e(0x103e)]);const _0x3fdbfe=await _0x996773[_0x39577e(0xa2e)]();if(_0x3fdbfe[_0x39577e(0x4a2)]!==0xc8||!_0x3fdbfe[_0x39577e(0x3cc)]||_0x3fdbfe[_0x39577e(0x3cc)]['length']===0x0)return console[_0x39577e(0x4ee)](_0x39577e(0x1076),_0x3fdbfe),[];return _0x3fdbfe[_0x39577e(0x3cc)][_0x39577e(0x556)](_0xfd5054=>({'name':_0xfd5054['song'],'artist':_0xfd5054['singer'],'id':_0xfd5054['id'],'cover':_0xfd5054[_0x39577e(0x435)]||_0x39577e(0x6a1),'source':_0x39577e(0x106d)}))['slice'](0x0,0x1e);}catch(_0xc5e3f7){return console['error'](_0x39577e(0x3ea),_0xc5e3f7),[];}}async function _0x248f4e(_0x4848a3){const _0x13da9c=_0x7c5117;try{_0x4848a3=_0x4848a3[_0x13da9c(0x128a)](/\s/g,'');const _0x4ee8e6=await _0xfb2770(_0x13da9c(0x1e1)+encodeURIComponent(_0x4848a3));if(!_0x4ee8e6?.[_0x13da9c(0x3cc)]?.[_0x13da9c(0xac0)])return[];return _0x4ee8e6['data']['map'](_0x18a6a9=>({'name':_0x18a6a9[_0x13da9c(0x1f4)],'artist':_0x18a6a9[_0x13da9c(0x95b)],'id':_0x18a6a9['id'],'cover':_0x18a6a9[_0x13da9c(0x435)]||'https://s3plus.meituan.net/opapisdk/op_ticket_885190757_1757748720126_qdqqd_1jt5sv.jpeg','source':_0x13da9c(0x27f)}))['slice'](0x0,0x1e);}catch(_0x3dc9d8){return console[_0x13da9c(0x52b)]('QQ音乐搜索API失败:',_0x3dc9d8),[];}}async function _0x1c3872(){const _0x3c82ab=_0x7c5117,_0xd7226e=await _0x131a69(_0x3c82ab(0x2c8),_0x3c82ab(0x1535));if(!_0xd7226e||!_0xd7226e[_0x3c82ab(0xa06)]())return;await _0x4abd86(_0x3c82ab(0x3e1),'正在全网搜索歌曲资源...');let _0x41ace7=_0xd7226e[_0x3c82ab(0xa06)](),_0x3e2046='';if(_0xd7226e[_0x3c82ab(0xf95)]('-')||_0xd7226e['includes']('–')){const _0x5a0957=_0xd7226e['split'](/[-–]/);_0x41ace7=_0x5a0957[0x0][_0x3c82ab(0xa06)](),_0x3e2046=_0x5a0957[_0x3c82ab(0x59f)](0x1)[_0x3c82ab(0xcc2)]('\x20')[_0x3c82ab(0xa06)]();}const [_0x37346d,_0x54132e]=await Promise[_0x3c82ab(0x8ab)]([_0x242c01(_0x41ace7,_0x3e2046),_0x248f4e(_0x41ace7)]),_0x51cdd2=[..._0x37346d,..._0x54132e];if(_0x51cdd2[_0x3c82ab(0xac0)]===0x0){await _0x4abd86(_0x3c82ab(0x2c3),_0x3c82ab(0xc24));return;}const _0xec850d=document['getElementById'](_0x3c82ab(0x112f)),_0x4463e4=document['getElementById'](_0x3c82ab(0x4f1));_0x4463e4[_0x3c82ab(0x1331)]='',document['getElementById'](_0x3c82ab(0xeb7))[_0x3c82ab(0xb34)]=![],_0x51cdd2[_0x3c82ab(0x458)](_0x45f368=>{const _0x577a09=_0x3c82ab,_0x5d9a54=document[_0x577a09(0xb4e)](_0x577a09(0xd53));_0x5d9a54['className']=_0x577a09(0x5ea),_0x5d9a54[_0x577a09(0x8df)][_0x577a09(0x8ee)]=JSON[_0x577a09(0x7cc)](_0x45f368),_0x5d9a54[_0x577a09(0x1331)]=_0x577a09(0xe10)+_0x45f368[_0x577a09(0x1023)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22artist\x22>'+_0x45f368[_0x577a09(0x27e)]+_0x577a09(0xc73)+(_0x45f368[_0x577a09(0x5f7)]==='netease'?_0x577a09(0x793):_0x577a09(0x14bf))+'</span></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4463e4['appendChild'](_0x5d9a54);}),_0xec850d[_0x3c82ab(0x128f)][_0x3c82ab(0x1327)]('visible');}async function _0xd2205d(_0x418bd2){const _0x3f8e18=_0x7c5117;let _0x3b9541=null,_0x5f0088=_0x418bd2[_0x3f8e18(0x5f7)];const _0x5e4a22=_0x418bd2[_0x3f8e18(0x5f7)]===_0x3f8e18(0x106d)?_0x3f8e18(0x65c)+_0x418bd2['id']:_0x3f8e18(0x150f)+_0x418bd2['id'];let _0x5d4ba3=await _0xfb2770(_0x5e4a22);_0x5d4ba3?.[_0x3f8e18(0x3cc)]?.[_0x3f8e18(0x3f5)]&&(_0x3b9541={'url':_0x5d4ba3[_0x3f8e18(0x3cc)][_0x3f8e18(0x3f5)],'id':_0x418bd2['id'],'source':_0x418bd2[_0x3f8e18(0x5f7)]});if(!_0x3b9541){const _0x27350b=_0x418bd2[_0x3f8e18(0x5f7)]===_0x3f8e18(0x106d)?_0x3f8e18(0x27f):_0x3f8e18(0x106d),_0x459fae=_0x27350b==='tencent'?await _0x248f4e(_0x418bd2['name']):await _0x242c01(_0x418bd2[_0x3f8e18(0x1023)],_0x418bd2['artist']);if(_0x459fae[_0x3f8e18(0xac0)]>0x0){const _0x4df6ef=_0x27350b===_0x3f8e18(0x106d)?_0x3f8e18(0x65c)+_0x459fae[0x0]['id']:'https://api.vkeys.cn/v2/music/tencent?id='+_0x459fae[0x0]['id'],_0x30f08f=await _0xfb2770(_0x4df6ef);_0x30f08f?.['data']?.[_0x3f8e18(0x3f5)]&&(_0x3b9541={'url':_0x30f08f['data']['url'],'id':_0x459fae[0x0]['id'],'source':_0x27350b},_0x5f0088=_0x27350b);}}if(_0x3b9541){_0x3b9541[_0x3f8e18(0x3f5)]&&typeof _0x3b9541['url']===_0x3f8e18(0x857)&&(_0x3b9541[_0x3f8e18(0x3f5)]=_0x3b9541[_0x3f8e18(0x3f5)][_0x3f8e18(0x128a)](/^http:\/\//i,_0x3f8e18(0xef2)));_0x418bd2[_0x3f8e18(0x435)]&&typeof _0x418bd2['cover']===_0x3f8e18(0x857)&&(_0x418bd2[_0x3f8e18(0x435)]=_0x418bd2['cover'][_0x3f8e18(0x128a)](/^http:\/\//i,_0x3f8e18(0xef2)));const _0x426c18=await _0xdda8df(_0x3b9541['id'],_0x5f0088)||'';return{'name':_0x418bd2[_0x3f8e18(0x1023)],'artist':_0x418bd2[_0x3f8e18(0x27e)],'src':_0x3b9541[_0x3f8e18(0x3f5)],'cover':_0x418bd2[_0x3f8e18(0x435)],'isLocal':![],'lrcContent':_0x426c18};}return null;}async function _0xdda8df(_0x2144db,_0x478dbf){const _0x435326=_0x7c5117,_0x282564=_0x478dbf===_0x435326(0x106d)?_0x435326(0x1536)+_0x2144db:_0x435326(0xd0f)+_0x2144db,_0x437c26=await _0xfb2770(_0x282564);if(_0x437c26?.[_0x435326(0x3cc)]){const _0x5c7967=_0x437c26[_0x435326(0x3cc)][_0x435326(0x5fc)]||_0x437c26[_0x435326(0x3cc)][_0x435326(0x692)]||'',_0x706fb5=_0x437c26[_0x435326(0x3cc)][_0x435326(0xd69)]||_0x437c26['data'][_0x435326(0x378)]||'';return _0x5c7967+'\x0a'+_0x706fb5;}return'';}async function _0x19e41e(_0x4892c2){const _0x1cbaa8=_0x7c5117;if(_0x4892c2<0x0||_0x4892c2>=_0x46bc8b[_0x1cbaa8(0x84a)]['length'])return;const _0x3eb062=await _0x2aedfc(_0x1cbaa8(0xa9c),[{'text':'📁\x20从本地文件\x20(.lrc)','value':'file'},{'text':_0x1cbaa8(0x10c3),'value':_0x1cbaa8(0x56b)}]);let _0x591aa7=null;if(_0x3eb062===_0x1cbaa8(0x13b4))_0x591aa7=await new Promise(_0xfdc412=>{const _0x212ee8=_0x1cbaa8,_0xfd277e=document[_0x212ee8(0xfa0)]('lrc-upload-input'),_0x540910=_0x53c572=>{const _0x3b7608=_0x212ee8,_0x2ba68b=_0x53c572[_0x3b7608(0x10c2)]['files'][0x0];if(_0x2ba68b){const _0x555291=new FileReader();_0x555291[_0x3b7608(0x7c6)]=_0x4368e8=>_0xfdc412(_0x4368e8[_0x3b7608(0x10c2)][_0x3b7608(0x4fe)]),_0x555291[_0x3b7608(0x14b0)]=()=>_0xfdc412(null),_0x555291[_0x3b7608(0x11fd)](_0x2ba68b);}else _0xfdc412(null);_0xfd277e[_0x3b7608(0x73f)](_0x3b7608(0xca8),_0x540910),_0xfd277e[_0x3b7608(0x4f6)]='';};_0xfd277e[_0x212ee8(0x7b8)](_0x212ee8(0xca8),_0x540910,{'once':!![]}),_0xfd277e['click']();});else{if(_0x3eb062===_0x1cbaa8(0x56b)){const _0x156d1f=await _0x131a69(_0x1cbaa8(0x1297),_0x1cbaa8(0x1285),'','textarea');if(_0x156d1f)_0x591aa7=_0x156d1f[_0x1cbaa8(0x128a)](/\[/g,'\x0a[')[_0x1cbaa8(0xa06)]();}}_0x591aa7!==null&&(_0x46bc8b['playlist'][_0x4892c2][_0x1cbaa8(0x140b)]=_0x591aa7,await _0x3373e0(),_0x46bc8b[_0x1cbaa8(0x715)]===_0x4892c2&&(_0x46bc8b[_0x1cbaa8(0xbc6)]=_0x2bc922(_0x591aa7),_0x573b70(),_0x5770eb()),await _0x4abd86('成功','《'+_0x46bc8b[_0x1cbaa8(0x84a)][_0x4892c2]['name']+_0x1cbaa8(0xe53)));}async function _0x561739(){const _0x5a34a3=_0x7c5117;if(_0x46bc8b[_0x5a34a3(0x715)]===-0x1)return;const _0x268cc9=_0x46bc8b[_0x5a34a3(0x84a)][_0x46bc8b[_0x5a34a3(0x715)]];if(!_0x268cc9)return;_0x268cc9['isBgClear']=!_0x268cc9[_0x5a34a3(0xe97)],await _0x3373e0();const _0x4c2a24=document[_0x5a34a3(0xfb1)](_0x5a34a3(0x978)),_0x815fe3=document['getElementById'](_0x5a34a3(0x90f));_0x4c2a24['classList'][_0x5a34a3(0xb80)](_0x5a34a3(0x410),_0x268cc9['isBgClear']),_0x815fe3[_0x5a34a3(0x128f)]['toggle']('active',_0x268cc9[_0x5a34a3(0xe97)]);}function _0x50368f(){const _0x40bfa7=_0x7c5117,_0x157923=document['getElementById'](_0x40bfa7(0x55a)),_0x5ee536=document['getElementById'](_0x40bfa7(0x1571));_0x157923&&_0x5ee536&&(_0x157923[_0x40bfa7(0x128f)][_0x40bfa7(0xb80)](_0x40bfa7(0xdcc)),_0x5ee536[_0x40bfa7(0x128f)][_0x40bfa7(0xb80)](_0x40bfa7(0xa37)));}function _0x60064e(){const _0x41a29a=_0x7c5117,_0x75c2aa=document[_0x41a29a(0xfb1)](_0x41a29a(0x978)),_0x4a758f=document[_0x41a29a(0xfa0)]('music-player-overlay');_0x75c2aa&&_0x4a758f&&(_0x75c2aa[_0x41a29a(0x128f)][_0x41a29a(0xb80)](_0x41a29a(0x95c)),_0x4a758f['classList'][_0x41a29a(0xb80)](_0x41a29a(0x950)));}window[_0x7c5117(0x1159)]=_0x60064e;async function _0x3938ee(){const _0x5bc915=_0x7c5117;if(_0x46bc8b['playlist'][_0x5bc915(0xac0)]===0x0){alert(_0x5bc915(0xced));return;}const _0x4f08c0=await _0x3f65ed(_0x5bc915(0xf0b),'此操作将检查播放列表中的每一首网络歌曲，并移除所有无法播放的“死链”。本地歌曲不会受影响。',{'confirmText':_0x5bc915(0x2b2)});if(!_0x4f08c0)return;await _0x4abd86(_0x5bc915(0x3e1),_0x5bc915(0x982)+_0x46bc8b[_0x5bc915(0x84a)][_0x5bc915(0xac0)]+_0x5bc915(0x10f7));const _0x1c60d8=_0x46bc8b[_0x5bc915(0x84a)][_0x5bc915(0xac0)],_0x4314df=[],_0x3152d1=[],_0x59cd35=_0x46bc8b[_0x5bc915(0x84a)]['map'](async _0x1d011c=>{const _0x2daf6c=_0x5bc915;if(_0x1d011c[_0x2daf6c(0x1be)]){_0x4314df['push'](_0x1d011c);return;}const _0x2457fb=await _0x2d76c3(_0x1d011c[_0x2daf6c(0x53e)]);_0x2457fb?_0x4314df['push'](_0x1d011c):(_0x3152d1[_0x2daf6c(0x481)](_0x1d011c[_0x2daf6c(0x1023)]),console['warn'](_0x2daf6c(0x7a3)+_0x1d011c[_0x2daf6c(0x1023)]+_0x2daf6c(0xc10)+_0x1d011c[_0x2daf6c(0x53e)]));});await Promise[_0x5bc915(0x8ab)](_0x59cd35);const _0x1bf667=_0x1c60d8-_0x4314df[_0x5bc915(0xac0)];if(_0x1bf667>0x0){const _0x44c390=_0x46bc8b['playlist'][_0x46bc8b['currentIndex']],_0x57102f=_0x3152d1[_0x5bc915(0xf95)](_0x44c390?.[_0x5bc915(0x1023)]);_0x46bc8b[_0x5bc915(0x84a)]=_0x4314df,await _0x3373e0();if(_0x57102f)_0x447ac1['pause'](),_0x447ac1['src']='',_0x46bc8b[_0x5bc915(0x715)]=_0x46bc8b[_0x5bc915(0x84a)][_0x5bc915(0xac0)]>0x0?0x0:-0x1,_0x46bc8b[_0x5bc915(0xcc5)]=![];else _0x44c390&&(_0x46bc8b[_0x5bc915(0x715)]=_0x46bc8b[_0x5bc915(0x84a)]['findIndex'](_0x28681d=>_0x28681d[_0x5bc915(0x53e)]===_0x44c390[_0x5bc915(0x53e)]));_0x45ef07(),_0x139f8a(),await _0x4abd86(_0x5bc915(0x282),_0x5bc915(0x1151)+_0x1bf667+_0x5bc915(0xdfb)+_0x3152d1['join'](_0x5bc915(0x76b)));}else await _0x4abd86('检查完成','所有歌曲链接均有效，无需清理！');}function _0x34979a(){const _0x6bbea3=_0x7c5117,_0x1a0fe2=document[_0x6bbea3(0xfa0)](_0x6bbea3(0x1025));_0x1a0fe2['classList']['toggle']('status-bar-visible',!!_0x8f0871['globalSettings'][_0x6bbea3(0x7f3)]);}async function _0x558736(){const _0x56bc25=_0x7c5117,_0x1aab0a=document[_0x56bc25(0xfa0)](_0x56bc25(0x137c)),_0xe9d787=document[_0x56bc25(0xfa0)](_0x56bc25(0x13eb));_0xe9d787[_0x56bc25(0x1331)]='';const _0x4398b6=[];_0x4398b6[_0x56bc25(0x481)]({'text':_0x56bc25(0x14db),'value':_0x56bc25(0x8ab),'isDanger':!![]});const _0x4455a6=_0x8f0871['qzoneSettings'][_0x56bc25(0xff8)]||'我';_0x4398b6[_0x56bc25(0x481)]({'text':'仅清空\x20'+_0x4455a6+_0x56bc25(0x8e0),'value':'user'}),Object[_0x56bc25(0x142f)](_0x8f0871[_0x56bc25(0x1260)])[_0x56bc25(0x458)](_0x114f65=>{const _0x5ab8a2=_0x56bc25;!_0x114f65[_0x5ab8a2(0x1364)]&&_0x4398b6[_0x5ab8a2(0x481)]({'text':'仅清空\x20'+_0x114f65[_0x5ab8a2(0x1023)]+_0x5ab8a2(0xc9c),'value':_0x114f65['id']});});try{const _0x27af1b=await _0x372b85[_0x56bc25(0x1269)][_0x56bc25(0x3bc)]();_0x27af1b[_0x56bc25(0xac0)]>0x0&&(_0x4398b6['push']({'isSeparator':!![],'text':_0x56bc25(0x1af)}),_0x27af1b[_0x56bc25(0x458)](_0x5420d0=>{const _0x1cc4e3=_0x56bc25;_0x4398b6[_0x1cc4e3(0x481)]({'text':_0x1cc4e3(0x1211)+_0x5420d0[_0x1cc4e3(0x1023)]+'\x20的动态\x20(NPC)','value':'npc_'+_0x5420d0['id']});}));}catch(_0x396074){console[_0x56bc25(0x52b)](_0x56bc25(0x102d),_0x396074);}_0x4398b6[_0x56bc25(0x458)](_0x2c789b=>{const _0x1a2cba=_0x56bc25;if(_0x2c789b[_0x1a2cba(0x476)]){const _0x3b9b4b=document['createElement'](_0x1a2cba(0xd53));_0x3b9b4b[_0x1a2cba(0xc62)]=_0x2c789b['text'],_0x3b9b4b['style'][_0x1a2cba(0x283)]=_0x1a2cba(0x8e2),_0xe9d787[_0x1a2cba(0x1155)](_0x3b9b4b);return;}const _0x461904=document[_0x1a2cba(0xb4e)](_0x1a2cba(0xd53));_0x461904['className']='clear-posts-item',_0x2c789b[_0x1a2cba(0x836)]&&_0x461904['classList'][_0x1a2cba(0x1327)](_0x1a2cba(0x3d0)),_0x461904[_0x1a2cba(0x8df)][_0x1a2cba(0x1444)]=_0x2c789b[_0x1a2cba(0x4f6)],_0x461904[_0x1a2cba(0x1331)]=_0x1a2cba(0x3b0)+_0x2c789b[_0x1a2cba(0xda3)]+_0x1a2cba(0x616),_0xe9d787[_0x1a2cba(0x1155)](_0x461904);}),_0x1aab0a[_0x56bc25(0x128f)][_0x56bc25(0x1327)](_0x56bc25(0xdcc));}async function _0x2615d6(){const _0x2f950e=_0x7c5117,_0x2af4cd=document[_0x2f950e(0x2a1)](_0x2f950e(0xcf0));if(_0x2af4cd[_0x2f950e(0xac0)]===0x0){alert(_0x2f950e(0x1143));return;}const _0x3965d8=Array[_0x2f950e(0x3aa)](_0x2af4cd)[_0x2f950e(0x556)](_0x25a57d=>_0x25a57d['dataset'][_0x2f950e(0x1444)]);let _0x4492ae=[];_0x3965d8['includes']('all')?_0x4492ae[_0x2f950e(0x481)]('所有动态'):(_0x3965d8[_0x2f950e(0xf95)](_0x2f950e(0xcb0))&&_0x4492ae[_0x2f950e(0x481)]('“'+_0x8f0871['qzoneSettings'][_0x2f950e(0xff8)]+'”'),_0x3965d8[_0x2f950e(0x458)](_0x4dba32=>{const _0x299c6b=_0x2f950e,_0x575914=_0x8f0871[_0x299c6b(0x1260)][_0x4dba32];_0x575914&&_0x4492ae[_0x299c6b(0x481)]('“'+_0x575914['name']+'”');}));const _0x3bf888=_0x2f950e(0x945)+_0x4492ae[_0x2f950e(0xcc2)]('、\x20')+'\x20的所有动态，且无法恢复！',_0x21c10c=await _0x3f65ed(_0x2f950e(0xfe8),_0x3bf888,{'confirmButtonClass':_0x2f950e(0x611),'confirmText':_0x2f950e(0x887)});if(!_0x21c10c)return;try{_0x3965d8[_0x2f950e(0xf95)](_0x2f950e(0x8ab))?await _0x372b85['qzonePosts'][_0x2f950e(0xf7d)]():await _0x372b85['qzonePosts'][_0x2f950e(0xdc7)](_0x2f950e(0x11dd))[_0x2f950e(0xe48)](_0x3965d8)[_0x2f950e(0xf10)](),_0x4b4cc4=await _0x372b85[_0x2f950e(0x12c2)][_0x2f950e(0x1554)](_0x2f950e(0xe55))[_0x2f950e(0xaf5)]()[_0x2f950e(0x3bc)](),_0x4a9d1d=0x0,await _0x1098dc(),document[_0x2f950e(0xfa0)](_0x2f950e(0x137c))['classList'][_0x2f950e(0x443)](_0x2f950e(0xdcc)),await _0x4abd86(_0x2f950e(0x98f),'选定范围内的动态已被清空。');}catch(_0x13914d){console[_0x2f950e(0x52b)]('清空动态时出错:',_0x13914d),await _0x4abd86(_0x2f950e(0x457),_0x2f950e(0xeb4)+_0x13914d[_0x2f950e(0x790)]);}}async function _0x20f481(_0x1627f6){const _0x436d97=_0x7c5117,_0x40c3de=await _0x3f65ed(_0x436d97(0x1464),_0x436d97(0x4e4),{'confirmButtonClass':_0x436d97(0x611),'confirmText':'确认删除'});if(_0x40c3de){const _0x17a7c1=_0x8f0871[_0x436d97(0x1260)][_0x8f0871[_0x436d97(0xac8)]];if(!_0x17a7c1||!_0x17a7c1[_0x436d97(0x1378)])return;const _0x765f93=_0x17a7c1[_0x436d97(0x1378)][_0x436d97(0xb22)](_0x2549b0=>_0x2549b0[_0x436d97(0xe55)]===_0x1627f6);if(_0x765f93===-0x1)return;const _0x231a63=_0x765f93===_0x17a7c1[_0x436d97(0x1378)]['length']-0x1;_0x17a7c1[_0x436d97(0x1378)]=_0x17a7c1['thoughtsHistory']['filter'](_0x1eda66=>_0x1eda66['timestamp']!==_0x1627f6);if(_0x231a63){if(_0x17a7c1['thoughtsHistory'][_0x436d97(0xac0)]>0x0){const _0x5d6c8b=_0x17a7c1[_0x436d97(0x1378)][_0x17a7c1[_0x436d97(0x1378)][_0x436d97(0xac0)]-0x1];_0x17a7c1[_0x436d97(0xfb3)]=_0x5d6c8b['heartfeltVoice'],_0x17a7c1[_0x436d97(0xa30)]=_0x5d6c8b[_0x436d97(0xa30)];const _0x5764ca=document[_0x436d97(0xfa0)]('profile-heartfelt-voice'),_0xb5dee1=document[_0x436d97(0xfa0)]('profile-random-jottings');if(_0x5764ca)_0x5764ca[_0x436d97(0xc62)]=_0x17a7c1['heartfeltVoice'];if(_0xb5dee1)_0xb5dee1[_0x436d97(0xc62)]=_0x17a7c1[_0x436d97(0xa30)];console[_0x436d97(0x4ee)](_0x436d97(0xb79));}else{_0x17a7c1['heartfeltVoice']=_0x436d97(0x1111),_0x17a7c1['randomJottings']=_0x436d97(0x1111);const _0x4468f8=document['getElementById'](_0x436d97(0x3c6)),_0xdc1b17=document[_0x436d97(0xfa0)]('profile-random-jottings');if(_0x4468f8)_0x4468f8[_0x436d97(0xc62)]=_0x17a7c1['heartfeltVoice'];if(_0xdc1b17)_0xdc1b17['textContent']=_0x17a7c1['randomJottings'];console['log'](_0x436d97(0x963));}}await _0x372b85['chats'][_0x436d97(0x11d5)](_0x17a7c1),_0x181e1e(),await _0x4abd86('成功',_0x436d97(0x5b8));}}document[_0x7c5117(0xfa0)](_0x7c5117(0xd54))[_0x7c5117(0x7b8)]('click',_0x48d429=>{const _0x2d54a9=_0x7c5117,_0x155beb=_0x48d429[_0x2d54a9(0x10c2)]['closest'](_0x2d54a9(0x2b5));if(_0x155beb){const _0x43d3c2=parseInt(_0x155beb['dataset'][_0x2d54a9(0xe55)]);!isNaN(_0x43d3c2)&&_0x20f481(_0x43d3c2);}});async function _0x38c9ab(){const _0x3cdceb=_0x7c5117,_0x300b04=document[_0x3cdceb(0xfa0)](_0x3cdceb(0xed8));_0x300b04[_0x3cdceb(0x1331)]=_0x3cdceb(0x788);const _0x5539ce=await _0x372b85['appearancePresets'][_0x3cdceb(0xdc7)](_0x3cdceb(0x682))[_0x3cdceb(0x8c2)](_0x3cdceb(0x850))[_0x3cdceb(0x3bc)]();_0x5539ce[_0x3cdceb(0x458)](_0x76fbb0=>{const _0xde241a=_0x3cdceb,_0x1ec0f5=document[_0xde241a(0xb4e)](_0xde241a(0x327));_0x1ec0f5[_0xde241a(0x4f6)]=_0x76fbb0['id'],_0x1ec0f5[_0xde241a(0xc62)]=_0x76fbb0[_0xde241a(0x1023)],_0x300b04[_0xde241a(0x1155)](_0x1ec0f5);});}async function _0x26461c(){const _0x13d2b7=_0x7c5117,_0x14318e=document[_0x13d2b7(0xfa0)](_0x13d2b7(0xed8)),_0x120ab2=parseInt(_0x14318e['value']);if(isNaN(_0x120ab2))return;const _0x27674=await _0x372b85['appearancePresets'][_0x13d2b7(0x70d)](_0x120ab2);if(_0x27674){const _0xa04b0a=document[_0x13d2b7(0xfa0)](_0x13d2b7(0x10a8));_0xa04b0a[_0x13d2b7(0x4f6)]=_0x27674['value'],_0xcbf629(_0x27674[_0x13d2b7(0x4f6)]);}}async function _0x21d05b(){const _0x3b137b=_0x7c5117,_0x1b9763=await _0x131a69(_0x3b137b(0xf70),'请输入预设名称');if(!_0x1b9763||!_0x1b9763[_0x3b137b(0xa06)]())return;const _0x5e74a1=document[_0x3b137b(0xfa0)](_0x3b137b(0x10a8))[_0x3b137b(0x4f6)],_0x47756d=await _0x372b85[_0x3b137b(0x937)][_0x3b137b(0xdc7)]({'name':_0x1b9763[_0x3b137b(0xa06)](),'type':_0x3b137b(0x850)})[_0x3b137b(0x102a)]();if(_0x47756d){const _0x3420e4=await _0x3f65ed(_0x3b137b(0x2c4),_0x3b137b(0x872)+_0x1b9763[_0x3b137b(0xa06)]()+_0x3b137b(0xee5),{'confirmButtonClass':_0x3b137b(0x611)});if(!_0x3420e4)return;await _0x372b85[_0x3b137b(0x937)][_0x3b137b(0x1477)](_0x47756d['id'],{'value':_0x5e74a1});}else await _0x372b85[_0x3b137b(0x937)]['add']({'name':_0x1b9763[_0x3b137b(0xa06)](),'type':_0x3b137b(0x850),'value':_0x5e74a1});await _0x38c9ab(),alert(_0x3b137b(0xd20));}async function _0x58c290(){const _0xeece19=_0x7c5117,_0x418f8b=document['getElementById'](_0xeece19(0xed8)),_0x4e1032=parseInt(_0x418f8b['value']);if(isNaN(_0x4e1032)){alert('请先从下拉框中选择一个要删除的预设。');return;}const _0x2aba74=await _0x372b85[_0xeece19(0x937)]['get'](_0x4e1032);if(!_0x2aba74)return;const _0x2eb354=await _0x3f65ed(_0xeece19(0x3de),_0xeece19(0x5b6)+_0x2aba74[_0xeece19(0x1023)]+_0xeece19(0x1414),{'confirmButtonClass':_0xeece19(0x611)});_0x2eb354&&(await _0x372b85[_0xeece19(0x937)]['delete'](_0x4e1032),await _0x38c9ab(),alert(_0xeece19(0x853)));}async function _0x1279e9(){const _0x5195a8=_0x7c5117,_0x4cc5b0=document[_0x5195a8(0xfa0)](_0x5195a8(0xa5d));_0x4cc5b0[_0x5195a8(0x1331)]=_0x5195a8(0x788);const _0x388e97=await _0x372b85[_0x5195a8(0x937)][_0x5195a8(0xdc7)](_0x5195a8(0x682))['equals'](_0x5195a8(0x12fe))[_0x5195a8(0x3bc)]();_0x388e97[_0x5195a8(0x458)](_0xaa5119=>{const _0xe475a1=_0x5195a8,_0x3c96e3=document[_0xe475a1(0xb4e)](_0xe475a1(0x327));_0x3c96e3[_0xe475a1(0x4f6)]=_0xaa5119['id'],_0x3c96e3[_0xe475a1(0xc62)]=_0xaa5119[_0xe475a1(0x1023)],_0x4cc5b0[_0xe475a1(0x1155)](_0x3c96e3);});}async function _0x329d1f(){const _0x446e69=_0x7c5117,_0x4a8b4c=document[_0x446e69(0xfa0)](_0x446e69(0xa5d)),_0x177716=parseInt(_0x4a8b4c[_0x446e69(0x4f6)]);if(isNaN(_0x177716))return;const _0x2502a1=await _0x372b85[_0x446e69(0x937)][_0x446e69(0x70d)](_0x177716);if(_0x2502a1){const _0x3872fb=document[_0x446e69(0xfa0)]('font-url-input');_0x3872fb[_0x446e69(0x4f6)]=_0x2502a1[_0x446e69(0x4f6)],_0x2dccde(_0x2502a1[_0x446e69(0x4f6)],!![]);}}async function _0x202ff7(){const _0x4c3558=_0x7c5117,_0x3e4469=await _0x131a69(_0x4c3558(0x496),'请输入预设名称');if(!_0x3e4469||!_0x3e4469[_0x4c3558(0xa06)]())return;const _0x8bb9c6=document['getElementById'](_0x4c3558(0xe6e))[_0x4c3558(0x4f6)][_0x4c3558(0xa06)]();if(!_0x8bb9c6){alert(_0x4c3558(0xb76));return;}const _0xac444b=await _0x372b85[_0x4c3558(0x937)]['where']({'name':_0x3e4469[_0x4c3558(0xa06)](),'type':_0x4c3558(0x12fe)})[_0x4c3558(0x102a)]();if(_0xac444b){const _0x52b070=await _0x3f65ed(_0x4c3558(0x2c4),_0x4c3558(0x872)+_0x3e4469[_0x4c3558(0xa06)]()+'”\x20的预设已存在。要覆盖它吗？',{'confirmButtonClass':_0x4c3558(0x611)});if(!_0x52b070)return;await _0x372b85[_0x4c3558(0x937)]['update'](_0xac444b['id'],{'value':_0x8bb9c6});}else await _0x372b85[_0x4c3558(0x937)][_0x4c3558(0x1327)]({'name':_0x3e4469['trim'](),'type':'font','value':_0x8bb9c6});await _0x1279e9(),alert('字体预设已保存！');}async function _0x5da0f3(){const _0x2b5601=_0x7c5117,_0x330fbe=document['getElementById'](_0x2b5601(0xa5d)),_0x21e2f3=parseInt(_0x330fbe['value']);if(isNaN(_0x21e2f3)){alert(_0x2b5601(0xc14));return;}const _0x21f992=await _0x372b85[_0x2b5601(0x937)][_0x2b5601(0x70d)](_0x21e2f3);if(!_0x21f992)return;const _0x4c58a7=await _0x3f65ed('删除预设',_0x2b5601(0x5b6)+_0x21f992['name']+'”\x20吗？',{'confirmButtonClass':_0x2b5601(0x611)});_0x4c58a7&&(await _0x372b85['appearancePresets'][_0x2b5601(0xf10)](_0x21e2f3),await _0x1279e9(),alert(_0x2b5601(0x853)));}async function _0x25f15a(){const _0x536671=_0x7c5117,_0x2850b8=document[_0x536671(0xfa0)](_0x536671(0xe6b));_0x2850b8['innerHTML']=_0x536671(0x788);const _0x1b8d61=await _0x372b85['appearancePresets']['where']('type')[_0x536671(0x8c2)](_0x536671(0xadc))['toArray']();_0x1b8d61['forEach'](_0x215221=>{const _0x5263ce=_0x536671,_0x104aa3=document[_0x5263ce(0xb4e)](_0x5263ce(0x327));_0x104aa3[_0x5263ce(0x4f6)]=_0x215221['id'],_0x104aa3[_0x5263ce(0xc62)]=_0x215221[_0x5263ce(0x1023)],_0x2850b8[_0x5263ce(0x1155)](_0x104aa3);});const _0x3312e7={'wallpaper':_0x8f0871[_0x536671(0x7b0)][_0x536671(0xf61)],'cphoneWallpaper':_0x8f0871[_0x536671(0x7b0)][_0x536671(0x9d4)],'globalChatBackground':_0x8f0871[_0x536671(0x7b0)][_0x536671(0xf8b)],'appIcons':_0x8f0871['globalSettings'][_0x536671(0x544)],'cphoneAppIcons':_0x8f0871['globalSettings'][_0x536671(0xa61)],'chatActionButtonsOrder':_0x8f0871[_0x536671(0x7b0)][_0x536671(0x149f)],'theme':localStorage[_0x536671(0xe2e)](_0x536671(0x1197))||_0x536671(0xdc5),'showStatusBar':_0x8f0871[_0x536671(0x7b0)][_0x536671(0x7f3)],'notificationSoundUrl':_0x8f0871[_0x536671(0x7b0)][_0x536671(0x845)],'widgetData':_0x8f0871[_0x536671(0x7b0)][_0x536671(0x275)]};let _0x158c56=null;for(const _0x23c23e of _0x1b8d61){if(JSON['stringify'](_0x23c23e[_0x536671(0x4f6)])===JSON[_0x536671(0x7cc)](_0x3312e7)){_0x158c56=_0x23c23e['id'];break;}}_0x158c56?_0x2850b8[_0x536671(0x4f6)]=_0x158c56:_0x2850b8[_0x536671(0x4f6)]='';}async function _0x2a588f(){const _0x520147=_0x7c5117,_0x1afd84=document[_0x520147(0xfa0)](_0x520147(0xe6b)),_0x3f37da=parseInt(_0x1afd84[_0x520147(0x4f6)]);if(isNaN(_0x3f37da))return;const _0x4c2e01=await _0x372b85[_0x520147(0x937)][_0x520147(0x70d)](_0x3f37da);if(_0x4c2e01&&_0x4c2e01[_0x520147(0x4f6)]){const _0x194f40=_0x4c2e01[_0x520147(0x4f6)];Object[_0x520147(0x189)](_0x8f0871['globalSettings'],_0x194f40),_0x2113bd(_0x194f40['theme']||_0x520147(0xdc5)),await _0x372b85[_0x520147(0x7b0)]['put'](_0x8f0871[_0x520147(0x7b0)]),_0x22b1db(),_0x4fca03(),_0x5c238f(),_0x57ce71(),_0x34979a(),_0x5aedc2(),_0x147987(),alert(_0x520147(0x1433)+_0x4c2e01['name']+'”');}}async function _0x1eafe9(){const _0x1f8a57=_0x7c5117,_0x1742c7=await _0x131a69(_0x1f8a57(0x852),_0x1f8a57(0x22a));if(!_0x1742c7||!_0x1742c7[_0x1f8a57(0xa06)]())return;const _0x3b5936={'wallpaper':_0x8f0871[_0x1f8a57(0x7b0)][_0x1f8a57(0xf61)],'cphoneWallpaper':_0x8f0871[_0x1f8a57(0x7b0)][_0x1f8a57(0x9d4)],'globalChatBackground':_0x8f0871[_0x1f8a57(0x7b0)][_0x1f8a57(0xf8b)],'appIcons':_0x8f0871['globalSettings']['appIcons'],'cphoneAppIcons':_0x8f0871['globalSettings'][_0x1f8a57(0xa61)],'chatActionButtonsOrder':_0x8f0871[_0x1f8a57(0x7b0)][_0x1f8a57(0x149f)],'theme':localStorage[_0x1f8a57(0xe2e)](_0x1f8a57(0x1197))||_0x1f8a57(0xdc5),'showStatusBar':_0x8f0871[_0x1f8a57(0x7b0)][_0x1f8a57(0x7f3)],'notificationSoundUrl':_0x8f0871['globalSettings'][_0x1f8a57(0x845)],'widgetData':_0x8f0871[_0x1f8a57(0x7b0)]['widgetData']},_0x92fb01=await _0x372b85[_0x1f8a57(0x937)]['where']({'name':_0x1742c7[_0x1f8a57(0xa06)](),'type':_0x1f8a57(0xadc)})[_0x1f8a57(0x102a)]();if(_0x92fb01){const _0x1e0756=await _0x3f65ed(_0x1f8a57(0x2c4),_0x1f8a57(0x872)+_0x1742c7[_0x1f8a57(0xa06)]()+_0x1f8a57(0xee5),{'confirmButtonClass':'btn-danger'});if(!_0x1e0756)return;await _0x372b85['appearancePresets']['update'](_0x92fb01['id'],{'value':_0x3b5936});}else await _0x372b85[_0x1f8a57(0x937)][_0x1f8a57(0x1327)]({'name':_0x1742c7[_0x1f8a57(0xa06)](),'type':_0x1f8a57(0xadc),'value':_0x3b5936});await _0x25f15a(),alert('外观预设已保存！');}async function _0x408f06(){const _0x58b2d0=_0x7c5117,_0x524af4=document['getElementById']('appearance-preset-select'),_0x2ef7a8=parseInt(_0x524af4['value']);if(isNaN(_0x2ef7a8)){alert('请先从下拉框中选择一个要删除的预设。');return;}const _0xa44214=await _0x372b85[_0x58b2d0(0x937)][_0x58b2d0(0x70d)](_0x2ef7a8);if(!_0xa44214)return;const _0x28d486=await _0x3f65ed(_0x58b2d0(0x3de),'确定要删除预设\x20“'+_0xa44214[_0x58b2d0(0x1023)]+_0x58b2d0(0x1414),{'confirmButtonClass':_0x58b2d0(0x611)});_0x28d486&&(await _0x372b85[_0x58b2d0(0x937)]['delete'](_0x2ef7a8),await _0x25f15a(),alert(_0x58b2d0(0x853)));}async function _0x40cb1d(){const _0x388747=_0x7c5117,_0x55fb31=document[_0x388747(0xfa0)]('theme-preset-select');_0x55fb31[_0x388747(0x1331)]=_0x388747(0x788);const _0x4dd69e=await _0x372b85[_0x388747(0x937)][_0x388747(0xdc7)]('type')[_0x388747(0x8c2)](_0x388747(0x12df))[_0x388747(0x3bc)]();_0x4dd69e['forEach'](_0x28b955=>{const _0x2d0ba5=_0x388747,_0x4c772a=document['createElement'](_0x2d0ba5(0x327));_0x4c772a[_0x2d0ba5(0x4f6)]=_0x28b955['id'],_0x4c772a['textContent']=_0x28b955[_0x2d0ba5(0x1023)],_0x55fb31['appendChild'](_0x4c772a);});}async function _0x5240a7(){const _0x5c15ab=_0x7c5117,_0x143f89=document['getElementById']('theme-preset-select'),_0x28c377=parseInt(_0x143f89[_0x5c15ab(0x4f6)]);if(isNaN(_0x28c377))return;const _0xdc96c6=await _0x372b85['appearancePresets'][_0x5c15ab(0x70d)](_0x28c377);if(_0xdc96c6){const _0x4efe44=_0xdc96c6['value'][_0x5c15ab(0x4b9)]||_0x5c15ab(0xe82),_0x57183f=_0xdc96c6[_0x5c15ab(0x4f6)]['custom']||'',_0xd055e=document[_0x5c15ab(0xfb1)](_0x5c15ab(0x13d6)+_0x4efe44+'\x22]');_0xd055e&&(_0xd055e['checked']=!![]);const _0x125f07=document[_0x5c15ab(0xfa0)](_0x5c15ab(0x96f));_0x125f07[_0x5c15ab(0x4f6)]=_0x57183f,_0xb69a7a();}}async function _0x5d71f2(){const _0x3dea16=_0x7c5117,_0x4f7a11=await _0x131a69('保存主题预设',_0x3dea16(0x22a));if(!_0x4f7a11||!_0x4f7a11[_0x3dea16(0xa06)]())return;const _0x5889b1=document[_0x3dea16(0xfb1)](_0x3dea16(0x1439)),_0x160201=_0x5889b1?_0x5889b1[_0x3dea16(0x4f6)]:_0x3dea16(0xe82),_0x430924=document[_0x3dea16(0xfa0)](_0x3dea16(0x96f))['value'][_0x3dea16(0xa06)](),_0x42d069={'base':_0x160201,'custom':_0x430924},_0x4ce0b3=await _0x372b85[_0x3dea16(0x937)][_0x3dea16(0xdc7)]({'name':_0x4f7a11['trim'](),'type':'bubble_theme'})[_0x3dea16(0x102a)]();if(_0x4ce0b3){const _0x5c31c7=await _0x3f65ed(_0x3dea16(0x2c4),_0x3dea16(0x872)+_0x4f7a11[_0x3dea16(0xa06)]()+_0x3dea16(0xee5),{'confirmButtonClass':'btn-danger'});if(!_0x5c31c7)return;await _0x372b85[_0x3dea16(0x937)][_0x3dea16(0x1477)](_0x4ce0b3['id'],{'value':_0x42d069});}else await _0x372b85[_0x3dea16(0x937)]['add']({'name':_0x4f7a11[_0x3dea16(0xa06)](),'type':_0x3dea16(0x12df),'value':_0x42d069});await _0x40cb1d(),alert(_0x3dea16(0xd45));}async function _0xa14ed0(){const _0x452635=_0x7c5117,_0x40193b=document[_0x452635(0xfa0)](_0x452635(0x454)),_0x14f106=parseInt(_0x40193b[_0x452635(0x4f6)]);if(isNaN(_0x14f106)){alert(_0x452635(0xc14));return;}const _0x2c99b7=await _0x372b85[_0x452635(0x937)]['get'](_0x14f106);if(!_0x2c99b7)return;const _0x2c2d83=await _0x3f65ed(_0x452635(0x3de),_0x452635(0x5b6)+_0x2c99b7['name']+'”\x20吗？',{'confirmButtonClass':'btn-danger'});_0x2c2d83&&(await _0x372b85['appearancePresets'][_0x452635(0xf10)](_0x14f106),await _0x40cb1d(),alert('预设已删除。'));}async function _0x2fce58(){const _0xdc1b84=_0x7c5117;await _0x5b82b5(),document[_0xdc1b84(0xfa0)](_0xdc1b84(0xabc))[_0xdc1b84(0x128f)][_0xdc1b84(0x1327)]('visible');}async function _0x5b82b5(){const _0x2a9f55=_0x7c5117,_0x4418bb=document[_0x2a9f55(0xfa0)]('existing-sticker-categories-list'),_0x42775b=await _0x372b85['stickerCategories']['toArray']();_0x4418bb[_0x2a9f55(0x1331)]='';if(_0x42775b[_0x2a9f55(0xac0)]===0x0){_0x4418bb[_0x2a9f55(0x1331)]=_0x2a9f55(0x1189);return;}_0x42775b[_0x2a9f55(0x458)](_0x432ef1=>{const _0x43ef68=_0x2a9f55,_0x15115f=document[_0x43ef68(0xb4e)](_0x43ef68(0xd53));_0x15115f[_0x43ef68(0x1287)]=_0x43ef68(0x1133),_0x15115f[_0x43ef68(0x1331)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22group-name\x22>'+_0x432ef1[_0x43ef68(0x1023)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22delete-group-btn\x22\x20data-id=\x22'+_0x432ef1['id']+_0x43ef68(0x966),_0x4418bb[_0x43ef68(0x1155)](_0x15115f);});}async function _0x30ff5f(){const _0x189f2c=_0x7c5117,_0x225b73=document['getElementById'](_0x189f2c(0xe98)),_0x275db5=_0x225b73[_0x189f2c(0x4f6)]['trim']();if(!_0x275db5){alert(_0x189f2c(0xda2));return;}const _0x10d431=await _0x372b85[_0x189f2c(0xdec)][_0x189f2c(0xdc7)](_0x189f2c(0x1023))[_0x189f2c(0x8c2)](_0x275db5)[_0x189f2c(0x102a)]();if(_0x10d431){alert(_0x189f2c(0x135a)+_0x275db5+'\x22\x20已经存在了！');return;}await _0x372b85[_0x189f2c(0xdec)][_0x189f2c(0x1327)]({'name':_0x275db5}),_0x225b73[_0x189f2c(0x4f6)]='',await _0x5b82b5();}async function _0x2e6894(_0x3fcd38){const _0x411f61=_0x7c5117,_0x47cb09=await _0x372b85[_0x411f61(0xdec)][_0x411f61(0x70d)](_0x3fcd38);if(!_0x47cb09)return;const _0x2ea270=await _0x372b85['userStickers']['where'](_0x411f61(0x6b2))[_0x411f61(0x8c2)](_0x3fcd38)[_0x411f61(0x1383)](),_0x32ab95=_0x2ea270>0x0?_0x411f61(0x4ea)+_0x47cb09[_0x411f61(0x1023)]+_0x411f61(0xd10)+_0x2ea270+_0x411f61(0xb09):_0x411f61(0x4ea)+_0x47cb09[_0x411f61(0x1023)]+_0x411f61(0x53d),_0x2cd654=await _0x3f65ed('确认删除分类',_0x32ab95,{'confirmButtonClass':_0x411f61(0x611)});if(_0x2cd654)try{await _0x372b85[_0x411f61(0xf81)]('rw',_0x372b85[_0x411f61(0xdec)],_0x372b85['userStickers'],async()=>{const _0x13f87a=_0x411f61,_0x147164=await _0x372b85[_0x13f87a(0x413)][_0x13f87a(0xdc7)](_0x13f87a(0x6b2))['equals'](_0x3fcd38)[_0x13f87a(0x10f2)]();_0x147164[_0x13f87a(0xac0)]>0x0&&await _0x372b85[_0x13f87a(0x413)][_0x13f87a(0x504)](_0x147164),await _0x372b85[_0x13f87a(0xdec)]['delete'](_0x3fcd38);}),_0x8f0871[_0x411f61(0x413)]=await _0x372b85[_0x411f61(0x413)][_0x411f61(0x3bc)](),_0x41ab64===_0x3fcd38&&(_0x41ab64=_0x411f61(0x8ab)),await _0x5b82b5(),await _0x431c0b(),alert('分类《'+_0x47cb09[_0x411f61(0x1023)]+_0x411f61(0x4b6));}catch(_0x52bacb){console[_0x411f61(0x52b)](_0x411f61(0x10d4),_0x52bacb),alert(_0x411f61(0x11a6));}}function _0x31dc3c(_0x3367ba){const _0x38b3b6=_0x7c5117;_0x41ab64=_0x3367ba,document[_0x38b3b6(0x2a1)](_0x38b3b6(0x152f))[_0x38b3b6(0x458)](_0x4e73b1=>{const _0x14e556=_0x38b3b6;_0x4e73b1[_0x14e556(0x128f)][_0x14e556(0xb80)](_0x14e556(0xa37),String(_0x4e73b1['dataset'][_0x14e556(0x6b2)])===String(_0x3367ba));}),_0x431c0b(![]);const _0x9fc7fe=document['getElementById'](_0x38b3b6(0xcf8));if(_0x9fc7fe)_0x9fc7fe[_0x38b3b6(0xb34)]=![];}async function _0xc079d0(){const _0x418b36=_0x7c5117;if(!_0x8f0871[_0x418b36(0xac8)])return;const _0x1e4572=_0x8f0871['chats'][_0x8f0871[_0x418b36(0xac8)]];if(!_0x1e4572)return;try{const _0x4ed3c9={'type':_0x418b36(0x1540),'version':0x1,'chatData':_0x1e4572},_0x5a36c9=new Blob([JSON[_0x418b36(0x7cc)](_0x4ed3c9,null,0x2)],{'type':_0x418b36(0x4b5)}),_0x289c54=URL[_0x418b36(0xe35)](_0x5a36c9),_0x595e5b=document[_0x418b36(0xb4e)]('a');_0x595e5b[_0x418b36(0x5e9)]=_0x289c54,_0x595e5b[_0x418b36(0xb9e)]=_0x418b36(0xcfc)+_0x1e4572[_0x418b36(0x1023)]+'-'+new Date()[_0x418b36(0x23b)]()['split']('T')[0x0]+_0x418b36(0x613),_0x595e5b['click'](),URL[_0x418b36(0x43c)](_0x289c54),await _0x4abd86('导出成功','与“'+_0x1e4572[_0x418b36(0x1023)]+_0x418b36(0xc64));}catch(_0x94c443){console[_0x418b36(0x52b)](_0x418b36(0x12a8),_0x94c443),await _0x4abd86(_0x418b36(0xf83),'发生了一个错误:\x20'+_0x94c443['message']);}}async function _0x32b6ec(_0x447ab7){const _0x45c67a=_0x7c5117;if(!_0x447ab7||!_0x8f0871['activeChatId'])return;const _0x53f417=_0x8f0871[_0x45c67a(0xac8)],_0x3857da=_0x8f0871[_0x45c67a(0x1260)][_0x53f417];try{const _0x1ed582=await _0x447ab7['text'](),_0x572641=JSON[_0x45c67a(0x4a0)](_0x1ed582);if(_0x572641[_0x45c67a(0x682)]!==_0x45c67a(0x1540)||!_0x572641[_0x45c67a(0x743)])throw new Error(_0x45c67a(0xc59));const _0x36faeb=await _0x3f65ed('严重警告！',_0x45c67a(0xf23)+_0x3857da['name']+_0x45c67a(0x1115),{'confirmButtonClass':_0x45c67a(0x611),'confirmText':_0x45c67a(0xe68)});if(!_0x36faeb)return;const _0x3e9c8=_0x572641[_0x45c67a(0x743)];_0x3e9c8['id']=_0x53f417,await _0x372b85[_0x45c67a(0x1260)][_0x45c67a(0x11d5)](_0x3e9c8),_0x8f0871[_0x45c67a(0x1260)][_0x53f417]=_0x3e9c8,await _0x4abd86(_0x45c67a(0x1471),_0x45c67a(0x56f)),_0x54d32b(_0x53f417),_0x2d75fb(),document[_0x45c67a(0xfa0)](_0x45c67a(0x6c6))[_0x45c67a(0xb4a)]();}catch(_0x5dc821){console[_0x45c67a(0x52b)]('导入单个聊天时出错:',_0x5dc821),await _0x4abd86(_0x45c67a(0x11c5),_0x45c67a(0x6b8)+_0x5dc821['message']);}}function _0x21e16c(){_0x475945(),_0x2d25e5('character-selection-screen');}function _0x475945(){const _0x338b11=_0x7c5117,_0x1ab0cd=document['getElementById'](_0x338b11(0xb2b));_0x1ab0cd[_0x338b11(0x1331)]='';const _0x338b26=Object[_0x338b11(0x142f)](_0x8f0871[_0x338b11(0x1260)])[_0x338b11(0xde7)](_0x1ecaa0=>!_0x1ecaa0[_0x338b11(0x1364)]);if(_0x338b26[_0x338b11(0xac0)]===0x0){_0x1ab0cd['innerHTML']=_0x338b11(0xfe2);return;}_0x338b26[_0x338b11(0x458)](_0x2cfb08=>{const _0x2d261c=_0x338b11,_0x1f826c=document[_0x2d261c(0xb4e)](_0x2d261c(0xd53));_0x1f826c['className']='character-select-item',_0x1f826c[_0x2d261c(0x1331)]=_0x2d261c(0x13f9)+(_0x2cfb08[_0x2d261c(0x12d7)][_0x2d261c(0xce8)]||_0x1a2fc1)+_0x2d261c(0xfc8)+_0x2cfb08[_0x2d261c(0x1023)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x1f826c[_0x2d261c(0x7b8)](_0x2d261c(0xb4a),()=>_0x1f191(_0x2cfb08['id'])),_0x1ab0cd[_0x2d261c(0x1155)](_0x1f826c);});}async function _0x1f191(_0xcf8897){const _0x2c9914=_0x7c5117;_0xfd9ebf=_0xcf8897,console[_0x2c9914(0x4ee)](_0x2c9914(0x5ba)+_0xcf8897+_0x2c9914(0x5df)),_0x4fca03(),_0x57ce71(),_0x3ca39d(),_0x2d25e5(_0x2c9914(0xee3));}function _0x57492a(){const _0x4c264a=_0x7c5117;_0xfd9ebf=null,console[_0x4c264a(0x4ee)]('已返回我的手机'),_0x2d25e5(_0x4c264a(0x117a));}function _0x3ca39d(){const _0x13c9a8=_0x7c5117,_0x158128=new Date(),_0x5bcab0=_0x158128[_0x13c9a8(0x1453)](_0x13c9a8(0xb43),{'hour':_0x13c9a8(0x511),'minute':'2-digit'}),_0xad3c50=_0x158128[_0x13c9a8(0x11a9)](_0x13c9a8(0xb43),{'weekday':_0x13c9a8(0xa97),'month':_0x13c9a8(0xa97),'day':_0x13c9a8(0x641)});document['getElementById'](_0x13c9a8(0xf42))[_0x13c9a8(0xc62)]=_0x5bcab0,document[_0x13c9a8(0xfa0)](_0x13c9a8(0x209))[_0x13c9a8(0xc62)]=_0xad3c50,_0x49fa15('char-home-screen');}function _0x49fa15(_0x3237d4){const _0x2001eb=_0x7c5117;document[_0x2001eb(0x2a1)]('.char-screen')[_0x2001eb(0x458)](_0x17993b=>_0x17993b[_0x2001eb(0x128f)][_0x2001eb(0x443)](_0x2001eb(0xa37))),document[_0x2001eb(0xfa0)](_0x3237d4)[_0x2001eb(0x128f)][_0x2001eb(0x1327)](_0x2001eb(0xa37));}window[_0x7c5117(0x4cd)]=_0x49fa15;async function _0xa5664b(_0x22f045){const _0x232fb7=_0x7c5117;if(!_0xfd9ebf)return;const _0x122673=_0x8f0871[_0x232fb7(0x1260)][_0xfd9ebf];await _0x597e69(_0xfd9ebf,_0x22f045);switch(_0x22f045){case'qq':_0x3389f5(),_0x49fa15(_0x232fb7(0xd6c));break;case'album':_0x1a1446(),_0x49fa15(_0x232fb7(0x49f));break;case _0x232fb7(0xe7a):_0x401824(),_0x49fa15(_0x232fb7(0xd13));break;case _0x232fb7(0x922):_0x4ddcfc(),_0x49fa15('char-taobao-screen');break;case'memo':_0x3f9a9d(),_0x49fa15(_0x232fb7(0x9b2));break;case _0x232fb7(0x1384):_0x15a745(),_0x49fa15(_0x232fb7(0xce4));break;case _0x232fb7(0x10b8):_0x377609(),_0x49fa15('char-amap-screen');break;case _0x232fb7(0x153f):_0x1d789c(),_0x49fa15(_0x232fb7(0xbc4));break;case _0x232fb7(0x4aa):_0x369049(),_0x49fa15(_0x232fb7(0x4d7));break;}}async function _0x1a1446(){const _0x2cb90b=_0x7c5117,_0x3638ce=document[_0x2cb90b(0xfa0)](_0x2cb90b(0x340));_0x3638ce[_0x2cb90b(0x1331)]='';if(!_0xfd9ebf)return;const _0x453c90=_0x8f0871[_0x2cb90b(0x1260)][_0xfd9ebf],_0x1d9e8d=_0x453c90[_0x2cb90b(0x135d)]||[];if(_0x1d9e8d[_0x2cb90b(0xac0)]===0x0){_0x3638ce['innerHTML']=_0x2cb90b(0x74d);return;}const _0x451831='https://i.postimg.cc/KYr2qRCK/1.jpg';_0x1d9e8d[_0x2cb90b(0x458)](_0x54b6cb=>{const _0x536745=_0x2cb90b,_0xb0b5c8=document[_0x536745(0xb4e)](_0x536745(0xd53));_0xb0b5c8[_0x536745(0x1287)]=_0x536745(0x25b),_0xb0b5c8[_0x536745(0x8df)]['description']=_0x54b6cb['description'],_0x3638ce[_0x536745(0x1155)](_0xb0b5c8);if(_0x8f0871[_0x536745(0x7b0)][_0x536745(0x1418)]){_0xb0b5c8[_0x536745(0x63b)]['backgroundColor']=_0x536745(0xb7b);const _0x2c559a=/[^\x00-\x7F]/[_0x536745(0x3fb)](_0x54b6cb[_0x536745(0xe0d)]),_0x323e2b=_0x54b6cb[_0x536745(0xe0d)]&&_0x54b6cb[_0x536745(0xe0d)][_0x536745(0xa06)]()&&!_0x2c559a,_0x784288=_0x323e2b?_0x54b6cb[_0x536745(0xe0d)]:_0x536745(0x7f8),_0x3fb450=_0x536745(0xe88)+encodeURIComponent(_0x784288),_0x2f61e2=new Image();_0x2f61e2[_0x536745(0x7c6)]=function(){const _0x4710a8=_0x536745;_0xb0b5c8[_0x4710a8(0x63b)][_0x4710a8(0xc93)]=_0x4710a8(0xfbd)+this[_0x4710a8(0x53e)]+')';},_0x2f61e2[_0x536745(0x14b0)]=function(){const _0x36c4fc=_0x536745;_0xb0b5c8[_0x36c4fc(0x63b)][_0x36c4fc(0xc93)]=_0x36c4fc(0xfbd)+_0x451831+')';},_0x2f61e2['src']=_0x3fb450;}else{_0xb0b5c8['style'][_0x536745(0x11f8)]='#f0f2f5',_0xb0b5c8['style']['border']=_0x536745(0x14a7);const _0x2cb972=document[_0x536745(0xb4e)]('p');_0x2cb972[_0x536745(0x1287)]=_0x536745(0xd0e),_0x2cb972['textContent']=_0x54b6cb[_0x536745(0x211)]||_0x536745(0xcc9),_0xb0b5c8[_0x536745(0x1155)](_0x2cb972);}});}function _0x401824(){const _0x28857c=_0x7c5117,_0x144930=document[_0x28857c(0xfa0)](_0x28857c(0x798));_0x144930['innerHTML']='';if(!_0xfd9ebf)return;const _0x4a4024=_0x8f0871[_0x28857c(0x1260)][_0xfd9ebf],_0x24ae7d=[_0x4a4024[_0x28857c(0x1023)],'爱好','旅游','美食','新闻',..._0x4a4024['settings'][_0x28857c(0x200)][_0x28857c(0x505)](/，|。|\s/)['slice'](0x0,0x5)],_0x323739=['知乎',_0x28857c(0x769),_0x28857c(0xee2),'微博',_0x28857c(0x933)];for(let _0x437202=0x0;_0x437202<0xf;_0x437202++){const _0x5280a6=_0x24ae7d[Math[_0x28857c(0x13e5)](Math[_0x28857c(0x148a)]()*_0x24ae7d[_0x28857c(0xac0)])],_0x1f5961=_0x323739[Math['floor'](Math['random']()*_0x323739[_0x28857c(0xac0)])],_0x355241=document[_0x28857c(0xb4e)](_0x28857c(0xd53));_0x355241['className']=_0x28857c(0x40c),_0x355241[_0x28857c(0x1331)]=_0x28857c(0x10c6)+_0x5280a6+_0x28857c(0xc10)+_0x1f5961+_0x28857c(0xc7b)+_0x1f5961[_0x28857c(0x1f3)]()+_0x28857c(0x11c8)+_0x5280a6+_0x28857c(0x347),_0x144930['appendChild'](_0x355241);}}function _0x4ddcfc(){const _0x55987d=_0x7c5117,_0x11b606=document[_0x55987d(0xfa0)](_0x55987d(0x270));_0x11b606['innerHTML']='';if(!_0xfd9ebf)return;const _0x2e58a7=_0x8f0871['chats'][_0xfd9ebf],_0x45d7d5=_0x2e58a7[_0x55987d(0x1e2)]?.[_0x55987d(0x70a)]||[];if(_0x45d7d5['length']===0x0){_0x11b606[_0x55987d(0x1331)]='<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>TA最近好像什么都没买呢，<br>点击右上角刷新按钮生成一些记录吧！</p>';return;}_0x45d7d5[_0x55987d(0x458)](_0xfd13af=>{const _0x119d9c=_0x55987d,_0x80538e=document[_0x119d9c(0xb4e)]('div');_0x80538e[_0x119d9c(0x1287)]='char-product-item',_0x80538e[_0x119d9c(0x8df)][_0x119d9c(0x988)]=_0xfd13af[_0x119d9c(0x988)];let _0x442125;if(_0x8f0871[_0x119d9c(0x7b0)][_0x119d9c(0x1418)]){const _0x27f3b0='https://image.pollinations.ai/prompt/'+encodeURIComponent(_0xfd13af[_0x119d9c(0xe0d)]||_0x119d9c(0x10ce));_0x442125='<img\x20src=\x22'+_0x27f3b0+_0x119d9c(0x136e);}else _0x442125=_0x119d9c(0x1f6)+(_0xfd13af[_0x119d9c(0x988)]||_0x119d9c(0xc77))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';_0x80538e['innerHTML']=_0x119d9c(0xdd3)+_0x442125+_0x119d9c(0x956)+_0xfd13af[_0x119d9c(0x35d)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x20margin-top:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22product-price\x22>'+(_0xfd13af[_0x119d9c(0x1168)]||0x0)['toFixed'](0x2)+_0x119d9c(0x49c)+_0xfd13af[_0x119d9c(0x103e)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x11b606[_0x119d9c(0x1155)](_0x80538e);});}function _0x299137(){const _0x4ea574=_0x7c5117;_0x49fa15(_0x4ea574(0x356));}function _0x53320b(){const _0x4f120d=_0x7c5117,_0x23ea5b=document[_0x4f120d(0xfa0)](_0x4f120d(0x11e7));_0x23ea5b['innerHTML']='';if(!_0xfd9ebf)return;const _0x32eb28=Object[_0x4f120d(0x142f)](_0x8f0871['chats'])['filter'](_0x326f28=>{const _0x3dd8d7=_0x4f120d;if(_0x326f28['id']===_0xfd9ebf)return!![];if(_0x326f28[_0x3dd8d7(0x1364)]&&_0x326f28[_0x3dd8d7(0x2cf)]['some'](_0xdbb3d9=>_0xdbb3d9['id']===_0xfd9ebf))return!![];return![];});_0x32eb28[_0x4f120d(0x458)](_0x493c80=>{const _0x345e23=_0x377fab(_0x493c80);_0x23ea5b['appendChild'](_0x345e23);});}async function _0x597e69(_0x21a5bb,_0x14c47d){const _0x401531=_0x7c5117,_0x354344=_0x8f0871[_0x401531(0x1260)][_0x21a5bb];if(!_0x354344)return;!_0x354344[_0x401531(0xf8f)]&&(_0x354344['appUsageLog']=[]),_0x354344[_0x401531(0xf8f)]['push']({'appName':_0x14c47d,'timestamp':Date[_0x401531(0xc22)]()}),_0x354344[_0x401531(0xf8f)][_0x401531(0xac0)]>0x32&&_0x354344[_0x401531(0xf8f)]['shift'](),await _0x372b85[_0x401531(0x1260)]['put'](_0x354344);}function _0x369049(){const _0x5dc5df=_0x7c5117,_0x2eb31f=document['getElementById'](_0x5dc5df(0x3b2));_0x2eb31f[_0x5dc5df(0x1331)]='';const _0x3f3651=_0x8f0871[_0x5dc5df(0x1260)][_0xfd9ebf],_0x5c8c4f=(_0x3f3651[_0x5dc5df(0xf8f)]||[])[_0x5dc5df(0x59f)]()[_0x5dc5df(0xaf5)]();if(_0x5c8c4f[_0x5dc5df(0xac0)]===0x0){_0x2eb31f[_0x5dc5df(0x1331)]=_0x5dc5df(0x4e7);return;}const _0x3f9036={'qq':'QQ','album':'相册','browser':_0x5dc5df(0x13d9),'taobao':'淘宝','memo':_0x5dc5df(0x9ef),'diary':'日记','amap':_0x5dc5df(0x829),'usage':_0x5dc5df(0x1507)};_0x5c8c4f[_0x5dc5df(0x458)](_0x2052e1=>{const _0x34cf24=_0x5dc5df,_0x267a58=document[_0x34cf24(0xb4e)]('div');_0x267a58[_0x34cf24(0x1287)]=_0x34cf24(0x157a),_0x267a58[_0x34cf24(0x1331)]=_0x34cf24(0x3e5)+new Date(_0x2052e1['timestamp'])['toLocaleString']()+_0x34cf24(0x8d7)+(_0x3f9036[_0x2052e1[_0x34cf24(0x6fc)]]||_0x2052e1[_0x34cf24(0x6fc)])+_0x34cf24(0x115b),_0x2eb31f[_0x34cf24(0x1155)](_0x267a58);});}async function _0x24925d(_0x1c7709){const _0xd3d33a=_0x7c5117,_0x4b87b6=_0x8f0871[_0xd3d33a(0x1260)][_0xfd9ebf];if(!_0x4b87b6)return;const _0x3fd341={'role':'assistant','senderName':_0x4b87b6[_0xd3d33a(0x93e)],'type':'location_share','content':_0x1c7709,'imageUrl':'https://s3plus.meituan.net/opapisdk/op_ticket_885190757_1756262526935_qdqqd_4uque3.jpeg','timestamp':Date[_0xd3d33a(0xc22)]()};_0x4b87b6['history'][_0xd3d33a(0x481)](_0x3fd341),await _0x372b85['chats']['put'](_0x4b87b6),_0x8f0871['activeChatId']===_0xfd9ebf&&_0x25d29f(_0x3fd341,_0x4b87b6),await _0x4abd86(_0xd3d33a(0xa4e),'“'+_0x4b87b6[_0xd3d33a(0x1023)]+_0xd3d33a(0xcb9));}async function _0x121a6e(_0x39f873){const _0x170df0=_0x7c5117,_0x1a4fcc=_0x8f0871[_0x170df0(0x1260)][_0xfd9ebf];if(!_0x1a4fcc||!_0x1a4fcc['memos'])return;const _0x3f763f=_0x1a4fcc[_0x170df0(0x210)]['find'](_0x50b848=>_0x50b848['id']===_0x39f873);if(_0x3f763f){_0x24baf6=_0x3f763f;const _0x3557f9=document[_0x170df0(0xfa0)](_0x170df0(0xb6f)),_0x4fdfde=document[_0x170df0(0xfa0)](_0x170df0(0x701)),_0x5899e2=document[_0x170df0(0xfa0)](_0x170df0(0x13b6));if(_0x3557f9)_0x3557f9[_0x170df0(0xc62)]=_0x3f763f[_0x170df0(0x1187)];if(_0x4fdfde)_0x4fdfde[_0x170df0(0x4f6)]=_0x3f763f[_0x170df0(0x1469)];const _0x5fd4ad=await _0x372b85['favorites']['where']({'type':_0x170df0(0x36a),'content.id':_0x39f873})[_0x170df0(0x102a)]();_0x5899e2['classList']['toggle'](_0x170df0(0xa37),!!_0x5fd4ad),_0x49fa15('char-memo-detail-screen');}}function _0x3f9a9d(){const _0x2e8ee2=_0x7c5117,_0x377539=document[_0x2e8ee2(0xfa0)](_0x2e8ee2(0xcc0));_0x377539[_0x2e8ee2(0x1331)]='';const _0x272638=_0x8f0871['chats'][_0xfd9ebf],_0x459a23=(_0x272638['memos']||[])[_0x2e8ee2(0x59f)]()[_0x2e8ee2(0xaf5)]();if(_0x459a23['length']===0x0){_0x377539[_0x2e8ee2(0x1331)]='<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>还没有备忘录。</p>';return;}_0x459a23[_0x2e8ee2(0x458)](_0x39dd46=>{const _0x4718ac=_0x2e8ee2,_0x4c936f=document[_0x4718ac(0xb4e)](_0x4718ac(0xd53));_0x4c936f[_0x4718ac(0x1287)]='list-item',_0x4c936f[_0x4718ac(0x1331)]=_0x4718ac(0xf33)+_0x39dd46[_0x4718ac(0x1187)]+_0x4718ac(0x3c2)+(_0x39dd46['content']||'')[_0x4718ac(0x505)]('\x0a')[0x0]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4c936f['addEventListener'](_0x4718ac(0xb4a),()=>_0x121a6e(_0x39dd46['id'])),_0x53cdde(_0x4c936f,()=>deleteMemo(_0x39dd46['id'])),_0x377539[_0x4718ac(0x1155)](_0x4c936f);});}async function _0x19138e(_0x1c9509=null){const _0x9efae9=_0x7c5117;_0x3aefdb=null;const _0x368f52=await _0x131a69(_0x9efae9(0x822),_0x9efae9(0x577));if(_0x368f52===null||!_0x368f52[_0x9efae9(0xa06)]())return;const _0x353cdb=await _0x131a69(_0x9efae9(0xaac)+_0x368f52,_0x9efae9(0x14c9),'','textarea');_0x353cdb!==null&&(await _0x1dfc28({'title':_0x368f52[_0x9efae9(0xa06)](),'content':_0x353cdb}),_0x49fa15(_0x9efae9(0x9b2)));}async function _0x1dfc28(_0x5c0994){const _0x31524f=_0x7c5117,_0x294343=_0x8f0871['chats'][_0xfd9ebf];if(!_0x294343[_0x31524f(0x210)])_0x294343[_0x31524f(0x210)]=[];_0x294343['memos']['push']({'id':Date[_0x31524f(0xc22)](),'title':_0x5c0994[_0x31524f(0x1187)],'content':_0x5c0994[_0x31524f(0x1469)]}),await _0x372b85[_0x31524f(0x1260)]['put'](_0x294343),_0x3f9a9d();}async function _0x1dfc28(_0x51ef48){const _0x5dbe7e=_0x7c5117,_0xc58a1e=_0x8f0871[_0x5dbe7e(0x1260)][_0xfd9ebf];if(!_0xc58a1e[_0x5dbe7e(0x210)])_0xc58a1e[_0x5dbe7e(0x210)]=[];if(_0x3aefdb){const _0x4ee3e5=_0xc58a1e[_0x5dbe7e(0x210)][_0x5dbe7e(0x7ed)](_0xb23413=>_0xb23413['id']===_0x3aefdb);if(_0x4ee3e5)_0x4ee3e5[_0x5dbe7e(0x1469)]=_0x51ef48;}else _0xc58a1e[_0x5dbe7e(0x210)][_0x5dbe7e(0x481)]({'id':Date[_0x5dbe7e(0xc22)](),'content':_0x51ef48});await _0x372b85['chats'][_0x5dbe7e(0x11d5)](_0xc58a1e),_0x3f9a9d(),_0x3aefdb=null;}async function _0x5570ff(){const _0xd10133=_0x7c5117;if(!_0xfd9ebf)return;const _0x51c3f4=_0x8f0871[_0xd10133(0x1260)][_0xfd9ebf];if(!_0x51c3f4)return;await _0x4abd86(_0xd10133(0x3e1),_0xd10133(0x811)+_0x51c3f4['name']+_0xd10133(0x697));const {proxyUrl:_0x83bbd7,apiKey:_0x48f84f,model:_0x1d1d4d}=_0x8f0871[_0xd10133(0xa78)];if(!_0x83bbd7||!_0x48f84f||!_0x1d1d4d){alert(_0xd10133(0x322));return;}const _0x75d761=_0x8f0871[_0xd10133(0x9dd)]['nickname']===_0xd10133(0x8d4)||!_0x8f0871[_0xd10133(0x9dd)][_0xd10133(0xff8)]?'用户':_0x8f0871[_0xd10133(0x9dd)][_0xd10133(0xff8)],_0x3ad497=_0x51c3f4[_0xd10133(0x1312)]&&_0x51c3f4[_0xd10133(0x1312)][_0xd10133(0xac0)]>0x0?_0x51c3f4[_0xd10133(0x1312)][_0xd10133(0x556)](_0xe32f47=>_0xd10133(0x3cf)+_0x2368ae(_0xe32f47['timestamp'])+')\x20'+_0xe32f47[_0xd10133(0x1469)])[_0xd10133(0xcc2)]('\x0a'):'无',_0x4dd593=_0x51c3f4[_0xd10133(0x12d7)][_0xd10133(0x266)]||0xa,_0xf3e3fc=_0x51c3f4[_0xd10133(0xc88)][_0xd10133(0x59f)](-_0x4dd593)[_0xd10133(0x556)](_0xc66621=>(_0xc66621['role']===_0xd10133(0xcb0)?_0x75d761:_0x51c3f4['name'])+':\x20'+String(_0xc66621[_0xd10133(0x1469)])[_0xd10133(0x9fe)](0x0,0x1e)+_0xd10133(0x1111))[_0xd10133(0xcc2)]('\x0a'),_0x89e1a5=(_0x51c3f4[_0xd10133(0x12d7)][_0xd10133(0xaaf)]||[])[_0xd10133(0x556)](_0x3e270d=>_0x8f0871[_0xd10133(0x739)][_0xd10133(0x7ed)](_0x3506e2=>_0x3506e2['id']===_0x3e270d))[_0xd10133(0xde7)](Boolean)[_0xd10133(0x556)](_0x499fd4=>_0xd10133(0xed2)+_0x499fd4['name']+_0xd10133(0x14a8)+_0x499fd4['content'][_0xd10133(0xde7)](_0x15d132=>_0x15d132[_0xd10133(0x7af)])[_0xd10133(0x556)](_0x40316b=>'-\x20'+_0x40316b['content'])['join']('\x0a'))[_0xd10133(0xcc2)](''),_0x4eb12e=_0x1be34c(_0x51c3f4,0x3,_0xd10133(0xd97)),_0x579eb0=_0x1be34c(_0x51c3f4,0x6,_0xd10133(0xd97)),_0x2d23f9=_0x1be34c(_0x51c3f4,0x9,_0xd10133(0xd97)),_0x2cb28e=_0x1be34c(_0x51c3f4,0x1,_0xd10133(0x62b)),_0x54dc6f=_0x1be34c(_0x51c3f4,0x3,_0xd10133(0x62b)),_0x37ef39=_0x1be34c(_0x51c3f4,0x7,'days');let _0x136e3f='';if(_0x4eb12e||_0x579eb0||_0x2d23f9||_0x2cb28e||_0x54dc6f||_0x37ef39){_0x136e3f+=_0xd10133(0x3dd);if(_0x4eb12e)_0x136e3f+=_0x4eb12e;if(_0x579eb0)_0x136e3f+=_0x579eb0;if(_0x2d23f9)_0x136e3f+=_0x2d23f9;if(_0x4eb12e||_0x579eb0||_0x2d23f9)_0x136e3f+='\x0a';if(_0x2cb28e)_0x136e3f+=_0x2cb28e;if(_0x54dc6f)_0x136e3f+=_0x54dc6f;if(_0x37ef39)_0x136e3f+=_0x37ef39;}const _0x1b745a=_0x51c3f4[_0xd10133(0x12d7)][_0xd10133(0xbbe)]||_0xd10133(0x7e1),_0x50e6f8=_0xd10133(0x1219)+_0x51c3f4['name']+_0xd10133(0x12f3)+new Date()[_0xd10133(0x11a9)](_0xd10133(0xb43))+'**。\x0a\x20\x20\x20\x20-\x20\x20\x20你生成的【所有】日记的标题日期，【必须】是今天或今天以前的日期。\x0a\x20\x20\x20\x20-\x20\x20\x20【绝对禁止】生成任何未来的日期！\x0a2.\x20\x20**【沉浸感】**:\x20每一篇日记都必须使用【第一人称视角\x20(\x22我\x22)】来写，并且要充满角色的个人情感、思考和秘密。在日记中描述自己的行为或想法时，【绝对禁止】使用第三人称“他”或“她”\x20(TA)。\x0a3.\x20\x20**【长度】**:\x20每一篇日记的正文长度【必须不少于300字】。\x0a4.\x20\x20**【格式铁律\x20(最高优先级)】**:\x20\x0a\x20\x20\x20\x20-\x20你的回复【必须且只能】是一个JSON数组格式的字符串。\x0a\x20\x20\x20\x20-\x20你的回复必须以\x20`[`\x20开始，并以\x20`]`\x20结束。\x0a\x20\x20\x20\x20-\x20【绝对禁止】在JSON数组前后添加任何多余的文字、解释、或\x20markdown\x20标记\x20(如\x20```json)。\x0a\x20\x20\x20\x20-\x20数组中的每个元素都是一个对象，代表一篇日记，格式【必须】如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22title\x22:\x20\x22这篇日记的标题，例如：9月20日\x20晴\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22content\x22:\x20\x22这里是日记的详细正文，必须支持换行符\x5cn，并且必须巧妙地使用下面的【日记专属Markdown语法】来丰富文本表现力。\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20\x20\x20```\x0a5.\x20\x20**【占位符替换\x20(最高优先级)】**:\x20在你的日记内容中，【绝对不能】出现\x20\x22{{user}}\x22\x20这个占位符。你【必须】使用\x20“'+_0x75d761+_0xd10133(0x129b)+_0x51c3f4[_0xd10133(0x12d7)]['aiPersona']+_0xd10133(0x24a)+_0x1b745a+_0xd10133(0x596)+_0x3ad497+'\x0a'+_0x89e1a5+'\x0a'+_0x136e3f+_0xd10133(0xe2c)+_0x75d761+_0xd10133(0x152b)+_0xf3e3fc+'\x0a\x0a现在，请开始撰写这组充满真情实感、并熟练运用了Markdown语法的日记。';try{const _0x3d01cc=[{'role':'user','content':_0xd10133(0xc82)}];let _0x4f17c8=_0x83bbd7[_0xd10133(0xf95)](_0xd10133(0x9a5)),_0x1a8534=_0x1e2f27(_0x1d1d4d,_0x48f84f,_0x50e6f8,_0x3d01cc);const _0x56c34e=_0x4f17c8?await fetch(_0x1a8534['url'],_0x1a8534['data']):await fetch(_0x83bbd7+_0xd10133(0x1011),{'method':_0xd10133(0xb67),'headers':{'Content-Type':_0xd10133(0x4b5),'Authorization':_0xd10133(0x681)+_0x48f84f},'body':JSON['stringify']({'model':_0x1d1d4d,'messages':[{'role':_0xd10133(0x1417),'content':_0x50e6f8},..._0x3d01cc],'temperature':_0x8f0871[_0xd10133(0x7b0)][_0xd10133(0x14a5)]||0.95})});if(!_0x56c34e['ok'])throw new Error('API\x20错误:\x20'+_0x56c34e[_0xd10133(0x37e)]);const _0x2280ae=await _0x56c34e[_0xd10133(0xa2e)](),_0x35a74a=getGeminiResponseText(_0x2280ae),_0x25826e=_0x35a74a[_0xd10133(0x1232)](/(\[[\s\S]*\])/);if(!_0x25826e||!_0x25826e[0x0])throw new Error(_0xd10133(0x1234)+_0x35a74a);const _0x5c0da7=_0x25826e[0x0];let _0x41c922;try{_0x41c922=JSON[_0xd10133(0x4a0)](_0x5c0da7);}catch(_0x5fa5c5){throw new Error(_0xd10133(0x4b8)+_0x5fa5c5[_0xd10133(0x790)]+_0xd10133(0xfde)+_0x35a74a);}_0x51c3f4[_0xd10133(0x1384)]=_0x41c922[_0xd10133(0x556)](_0x114731=>({'id':Date[_0xd10133(0xc22)]()+Math['random'](),'title':_0x114731[_0xd10133(0x1187)],'content':_0x114731['content'],'timestamp':Date[_0xd10133(0xc22)]()})),await _0x372b85[_0xd10133(0x1260)][_0xd10133(0x11d5)](_0x51c3f4),await _0x15a745();}catch(_0x4905a4){console[_0xd10133(0x52b)](_0xd10133(0x57d),_0x4905a4),await _0x4abd86(_0xd10133(0x1e6),'无法生成日记，请检查API配置或稍后再试。\x0a错误:\x20'+_0x4905a4[_0xd10133(0x790)]);}}async function _0x3eee69(){const _0x4e23bb=_0x7c5117;if(!_0xfd9ebf)return;const _0x46bc0f=_0x8f0871[_0x4e23bb(0x1260)][_0xfd9ebf];if(!_0x46bc0f)return;await _0x4abd86(_0x4e23bb(0x3e1),'正在请求“'+_0x46bc0f[_0x4e23bb(0x1023)]+_0x4e23bb(0x47e));const {proxyUrl:_0x18e7d9,apiKey:_0x199ec9,model:_0xb54746}=_0x8f0871['apiConfig'];if(!_0x18e7d9||!_0x199ec9||!_0xb54746)return;const _0x364472=_0x8f0871[_0x4e23bb(0x9dd)][_0x4e23bb(0xff8)]===_0x4e23bb(0x8d4)||!_0x8f0871[_0x4e23bb(0x9dd)][_0x4e23bb(0xff8)]?'用户':_0x8f0871[_0x4e23bb(0x9dd)]['nickname'],_0x35c280=_0x46bc0f[_0x4e23bb(0x1312)]&&_0x46bc0f[_0x4e23bb(0x1312)][_0x4e23bb(0xac0)]>0x0?_0x46bc0f[_0x4e23bb(0x1312)][_0x4e23bb(0x556)](_0x2fa1b2=>'-\x20(记录于\x20'+_0x2368ae(_0x2fa1b2[_0x4e23bb(0xe55)])+')\x20'+_0x2fa1b2[_0x4e23bb(0x1469)])[_0x4e23bb(0xcc2)]('\x0a'):'无',_0x5989dd=_0x46bc0f[_0x4e23bb(0x12d7)][_0x4e23bb(0x266)]||0xa,_0x3b2615=_0x46bc0f['history']['slice'](-_0x5989dd)[_0x4e23bb(0x556)](_0x228aae=>(_0x228aae[_0x4e23bb(0xc92)]==='user'?_0x364472:_0x46bc0f['name'])+':\x20'+String(_0x228aae[_0x4e23bb(0x1469)])[_0x4e23bb(0x9fe)](0x0,0x1e)+_0x4e23bb(0x1111))[_0x4e23bb(0xcc2)]('\x0a'),_0x3bd609=(_0x46bc0f['settings'][_0x4e23bb(0xaaf)]||[])[_0x4e23bb(0x556)](_0x58a809=>_0x8f0871[_0x4e23bb(0x739)][_0x4e23bb(0x7ed)](_0x1c7295=>_0x1c7295['id']===_0x58a809))[_0x4e23bb(0xde7)](Boolean)[_0x4e23bb(0x556)](_0x7ac62=>_0x4e23bb(0xed2)+_0x7ac62[_0x4e23bb(0x1023)]+_0x4e23bb(0x14a8)+_0x7ac62['content']['filter'](_0x3650a8=>_0x3650a8[_0x4e23bb(0x7af)])[_0x4e23bb(0x556)](_0x1d1ebb=>'-\x20'+_0x1d1ebb['content'])[_0x4e23bb(0xcc2)]('\x0a'))[_0x4e23bb(0xcc2)](''),_0x2df07d='\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a#\x20你的任务\x0a你是一个虚拟生活模拟器和故事作家。你的任务是扮演角色“'+_0x46bc0f[_0x4e23bb(0x1023)]+_0x4e23bb(0xc2b)+new Date()[_0x4e23bb(0x11a9)](_0x4e23bb(0xb43))+_0x4e23bb(0xc60)+_0x46bc0f[_0x4e23bb(0x12d7)][_0x4e23bb(0x200)]+_0x4e23bb(0x596)+_0x35c280+'\x0a'+_0x3bd609+_0x4e23bb(0xd64)+_0x364472+_0x4e23bb(0x152b)+_0x3b2615+'\x0a\x0a现在，请开始撰写这篇充满真情实感、并熟练运用了Markdown语法的日记。';try{const _0x5a6f71=[{'role':_0x4e23bb(0xcb0),'content':_0x4e23bb(0x5d1)}];let _0x2a76d6=_0x18e7d9['includes'](_0x4e23bb(0x9a5)),_0x4f0eb6=_0x1e2f27(_0xb54746,_0x199ec9,_0x2df07d,_0x5a6f71);const _0x4f136a=_0x2a76d6?await fetch(_0x4f0eb6[_0x4e23bb(0x3f5)],_0x4f0eb6[_0x4e23bb(0x3cc)]):await fetch(_0x18e7d9+_0x4e23bb(0x1011),{'method':_0x4e23bb(0xb67),'headers':{'Content-Type':_0x4e23bb(0x4b5),'Authorization':_0x4e23bb(0x681)+_0x199ec9},'body':JSON[_0x4e23bb(0x7cc)]({'model':_0xb54746,'messages':[{'role':'system','content':_0x2df07d},..._0x5a6f71],'temperature':_0x8f0871[_0x4e23bb(0x7b0)][_0x4e23bb(0x14a5)]||0.95})});if(!_0x4f136a['ok'])throw new Error(_0x4e23bb(0x395)+_0x4f136a['statusText']);const _0x5e017c=await _0x4f136a[_0x4e23bb(0xa2e)](),_0x490dec=getGeminiResponseText(_0x5e017c),_0xa0cae2=_0x490dec['match'](/(\[[\s\S]*\])/);if(!_0xa0cae2||!_0xa0cae2[0x0])throw new Error(_0x4e23bb(0x1234)+_0x490dec);const _0x5ea391=_0xa0cae2[0x0];let _0x1b467d;try{_0x1b467d=JSON['parse'](_0x5ea391)[0x0];}catch(_0x14ef5f){throw new Error(_0x4e23bb(0x4b8)+_0x14ef5f[_0x4e23bb(0x790)]+_0x4e23bb(0xfde)+_0x490dec);}if(!_0x46bc0f[_0x4e23bb(0x1384)])_0x46bc0f[_0x4e23bb(0x1384)]=[];_0x46bc0f[_0x4e23bb(0x1384)]['push']({'id':Date['now'](),'title':_0x1b467d[_0x4e23bb(0x1187)],'content':_0x1b467d[_0x4e23bb(0x1469)],'timestamp':Date[_0x4e23bb(0xc22)]()}),await _0x372b85[_0x4e23bb(0x1260)][_0x4e23bb(0x11d5)](_0x46bc0f),await _0x15a745();}catch(_0x4c3382){console['error']('生成新日记失败:',_0x4c3382),await _0x4abd86(_0x4e23bb(0x1e6),_0x4e23bb(0x483)+_0x4c3382[_0x4e23bb(0x790)]);}}function _0x15a745(){const _0x274f77=_0x7c5117,_0x2d21ad=document[_0x274f77(0xfa0)]('char-diary-list');_0x2d21ad[_0x274f77(0x1331)]='';const _0x7a57e=_0x8f0871[_0x274f77(0x1260)][_0xfd9ebf],_0x3e3dd8=(_0x7a57e[_0x274f77(0x1384)]||[])['slice']()[_0x274f77(0xaf5)]();if(_0x3e3dd8[_0x274f77(0xac0)]===0x0){_0x2d21ad[_0x274f77(0x1331)]=_0x274f77(0xa13);return;}_0x3e3dd8['forEach'](_0xd9845=>{const _0x30349f=_0x274f77,_0x1f0004=document[_0x30349f(0xb4e)](_0x30349f(0xd53));_0x1f0004[_0x30349f(0x1287)]=_0x30349f(0x586),_0x1f0004['innerHTML']=_0x30349f(0x12cb)+_0xd9845['title']+_0x30349f(0x917)+new Date(_0xd9845[_0x30349f(0xe55)])[_0x30349f(0x11a9)]()+_0x30349f(0x144a),_0x1f0004[_0x30349f(0x7b8)](_0x30349f(0xb4a),()=>_0x3edba3(_0xd9845['id'])),_0x53cdde(_0x1f0004,()=>_0x3f1a65(_0xd9845['id'])),_0x2d21ad['appendChild'](_0x1f0004);});}async function _0x3edba3(_0x4bc695){const _0x1e0233=_0x7c5117,_0x3319bd=_0x8f0871[_0x1e0233(0x1260)][_0xfd9ebf];if(!_0x3319bd||!_0x3319bd[_0x1e0233(0x1384)])return;const _0x300e6c=_0x3319bd[_0x1e0233(0x1384)][_0x1e0233(0x7ed)](_0x171f3f=>_0x171f3f['id']===_0x4bc695);if(_0x300e6c){_0x12acaa=_0x300e6c;const _0x5dac87=document[_0x1e0233(0xfa0)](_0x1e0233(0x1061)),_0x37aef4=document[_0x1e0233(0xfa0)]('char-diary-detail-content'),_0x12dc85=document[_0x1e0233(0xfa0)](_0x1e0233(0xa5e));_0x5dac87['textContent']=_0x300e6c[_0x1e0233(0x1187)];const _0x40c7d8=_0x3de267(_0x300e6c[_0x1e0233(0x1469)])[_0x1e0233(0x505)]('\x0a')[_0x1e0233(0x556)](_0x19d5ba=>_0x1e0233(0x12e8)+(_0x19d5ba||_0x1e0233(0x121a))+_0x1e0233(0x129d))[_0x1e0233(0xcc2)]('');_0x37aef4[_0x1e0233(0x1331)]=_0x40c7d8;const _0x37e1ee=await _0x372b85[_0x1e0233(0xb69)][_0x1e0233(0xdc7)]({'type':'char_diary','content.id':_0x4bc695})[_0x1e0233(0x102a)]();_0x12dc85[_0x1e0233(0x128f)][_0x1e0233(0xb80)](_0x1e0233(0xa37),!!_0x37e1ee),_0x49fa15(_0x1e0233(0xaa7));}}async function _0x196deb(){const _0x3089c8=_0x7c5117;if(!_0x12acaa||!_0xfd9ebf)return;const _0x4fa8d2=_0x12acaa,_0xbad726=_0x8f0871[_0x3089c8(0x1260)][_0xfd9ebf],_0x12e144=document[_0x3089c8(0xfa0)](_0x3089c8(0xa5e)),_0xdd77f6=await _0x372b85['favorites']['where']({'type':_0x3089c8(0xbaa),'content.id':_0x4fa8d2['id']})[_0x3089c8(0x102a)]();if(_0xdd77f6)await _0x372b85['favorites'][_0x3089c8(0xf10)](_0xdd77f6['id']),_0x12e144['classList'][_0x3089c8(0x443)](_0x3089c8(0xa37)),await _0x4abd86('操作成功',_0x3089c8(0x123f));else{const _0x5afd3a={'type':_0x3089c8(0xbaa),'content':{'id':_0x4fa8d2['id'],'title':_0x4fa8d2[_0x3089c8(0x1187)],'content':_0x4fa8d2['content'],'timestamp':_0x4fa8d2[_0x3089c8(0xe55)],'characterId':_0xfd9ebf,'characterName':_0xbad726['name']},'timestamp':Date[_0x3089c8(0xc22)]()};await _0x372b85[_0x3089c8(0xb69)]['add'](_0x5afd3a),_0x12e144[_0x3089c8(0x128f)]['add']('active'),await _0x4abd86(_0x3089c8(0x98f),_0x3089c8(0xa14));}}async function _0xe78e7(){const _0x3fb3d3=_0x7c5117;if(!_0x24baf6||!_0xfd9ebf)return;const _0xf8a8c9=_0x24baf6,_0x242bf4=_0x8f0871[_0x3fb3d3(0x1260)][_0xfd9ebf],_0x35933e=document[_0x3fb3d3(0xfa0)](_0x3fb3d3(0x13b6)),_0x285f19=await _0x372b85[_0x3fb3d3(0xb69)][_0x3fb3d3(0xdc7)]({'type':_0x3fb3d3(0x36a),'content.id':_0xf8a8c9['id']})[_0x3fb3d3(0x102a)]();if(_0x285f19)await _0x372b85[_0x3fb3d3(0xb69)][_0x3fb3d3(0xf10)](_0x285f19['id']),_0x35933e[_0x3fb3d3(0x128f)][_0x3fb3d3(0x443)](_0x3fb3d3(0xa37)),await _0x4abd86('操作成功',_0x3fb3d3(0x123f));else{const _0x407cbb={'type':_0x3fb3d3(0x36a),'content':{'id':_0xf8a8c9['id'],'title':_0xf8a8c9[_0x3fb3d3(0x1187)],'content':_0xf8a8c9[_0x3fb3d3(0x1469)],'timestamp':_0xf8a8c9[_0x3fb3d3(0xe55)],'characterId':_0xfd9ebf,'characterName':_0x242bf4[_0x3fb3d3(0x1023)]},'timestamp':Date[_0x3fb3d3(0xc22)]()};await _0x372b85[_0x3fb3d3(0xb69)]['add'](_0x407cbb),_0x35933e[_0x3fb3d3(0x128f)][_0x3fb3d3(0x1327)](_0x3fb3d3(0xa37)),await _0x4abd86(_0x3fb3d3(0x98f),_0x3fb3d3(0xa14));}}async function _0x3f1a65(_0x1b35c9){const _0x2df098=_0x7c5117,_0x460415=await _0x3f65ed(_0x2df098(0x973),_0x2df098(0x2b0),{'confirmButtonClass':'btn-danger'});if(_0x460415){const _0x2b0f5f=_0x8f0871[_0x2df098(0x1260)][_0xfd9ebf];_0x2b0f5f[_0x2df098(0x1384)]=_0x2b0f5f[_0x2df098(0x1384)]['filter'](_0x5d9664=>_0x5d9664['id']!==_0x1b35c9),await _0x372b85[_0x2df098(0x1260)]['put'](_0x2b0f5f),_0x15a745();}}async function _0x3389f5(){const _0x16a2c5=_0x7c5117,_0x39c905=document['getElementById']('char-chat-list');_0x39c905[_0x16a2c5(0x1331)]='';const _0x338909=_0x8f0871[_0x16a2c5(0x1260)][_0xfd9ebf];if(!_0x338909)return;const _0x48e6e5=_0x338909['settings'][_0x16a2c5(0xda5)]||(_0x8f0871[_0x16a2c5(0x9dd)][_0x16a2c5(0xff8)]||'我'),_0x3a1ca8=_0x338909['history'][_0x16a2c5(0xde7)](_0x5c3551=>!_0x5c3551[_0x16a2c5(0x1559)])[_0x16a2c5(0x59f)](-0x1)[0x0]||{'content':_0x16a2c5(0x1111)};let _0x12e73c=_0x16a2c5(0x1111);if(_0x3a1ca8){if(typeof _0x3a1ca8[_0x16a2c5(0x1469)]===_0x16a2c5(0x857))_0x12e73c=_0x3a1ca8['content'];else{if(Array[_0x16a2c5(0x345)](_0x3a1ca8[_0x16a2c5(0x1469)])&&_0x3a1ca8[_0x16a2c5(0x1469)][0x0]?.[_0x16a2c5(0x682)]===_0x16a2c5(0xa58))_0x12e73c=_0x16a2c5(0xdde);else{if(_0x3a1ca8[_0x16a2c5(0x682)]){const _0x2a0892={'voice_message':_0x16a2c5(0xf4b),'transfer':_0x16a2c5(0x1532),'ai_image':_0x16a2c5(0xdde)};_0x12e73c=_0x2a0892[_0x3a1ca8[_0x16a2c5(0x682)]]||'['+_0x3a1ca8[_0x16a2c5(0x682)]+']';}}}}const _0x2547bf=_0x338909['settings'][_0x16a2c5(0x38a)]||_0x1a2fc1,_0x5f0258=_0x338909[_0x16a2c5(0x12d7)]['myAvatarFrame']||'';let _0x3f700f;_0x5f0258?_0x3f700f='<div\x20class=\x22avatar-group\x20has-frame\x22\x20style=\x22width:\x2045px;\x20height:\x2045px;\x22><div\x20class=\x22avatar-with-frame\x22\x20style=\x22width:\x2045px;\x20height:\x2045px;\x22><img\x20src=\x22'+_0x2547bf+'\x22\x20class=\x22avatar-img\x22\x20style=\x22border-radius:\x2050%;\x22><img\x20src=\x22'+_0x5f0258+_0x16a2c5(0x13d5):_0x3f700f='<div\x20class=\x22avatar-group\x22\x20style=\x22width:\x2045px;\x20height:\x2045px;\x22><img\x20src=\x22'+_0x2547bf+_0x16a2c5(0xe20);const _0x2dbb9d=document[_0x16a2c5(0xb4e)](_0x16a2c5(0xd53));_0x2dbb9d[_0x16a2c5(0x1287)]=_0x16a2c5(0x83d),_0x2dbb9d['dataset'][_0x16a2c5(0x6e7)]='-1',_0x2dbb9d['innerHTML']=_0x16a2c5(0x97c)+_0x3f700f+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22name-line\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>'+_0x48e6e5+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22last-msg\x22>'+String(_0x12e73c)['substring'](0x0,0x14)+_0x16a2c5(0xafc),_0x39c905['appendChild'](_0x2dbb9d);const _0x4cf351=await _0x372b85[_0x16a2c5(0x1269)][_0x16a2c5(0x3bc)](),_0x259218=new Map(_0x4cf351['map'](_0x3e71cb=>[_0x3e71cb[_0x16a2c5(0x1023)],_0x3e71cb])),_0x4d3f38=_0x338909[_0x16a2c5(0xa1d)]||[];if(_0x4d3f38[_0x16a2c5(0xac0)]===0x0&&!_0x2dbb9d){_0x39c905[_0x16a2c5(0x1331)]=_0x16a2c5(0x13a0);return;}_0x4d3f38[_0x16a2c5(0x458)]((_0xf08fdc,_0x37959b)=>{const _0x290d06=_0x16a2c5;if(_0xf08fdc[_0x290d06(0x682)]===_0x290d06(0xe87))return;const _0x1b3f09=document[_0x290d06(0xb4e)](_0x290d06(0xd53));_0x1b3f09[_0x290d06(0x1287)]=_0x290d06(0x83d),_0x1b3f09[_0x290d06(0x8df)][_0x290d06(0x6e7)]=_0x37959b;let _0x53e28c,_0x41ecc5,_0x1d0715;if(_0xf08fdc[_0x290d06(0x682)]===_0x290d06(0x14ae)){_0x1d0715=_0xf08fdc[_0x290d06(0xecf)]+'\x20<span\x20class=\x22group-tag\x22>群</span>',_0x53e28c=_0xf08fdc[_0x290d06(0x80d)][_0x290d06(0x59f)](-0x1)[0x0]||{'content':_0x290d06(0x1111)};const _0x526790=_0x290d06(0xedb)+_0xf08fdc['groupName']+'\x27',_0x636b0d=_0x8f0871[_0x290d06(0x7b0)][_0x290d06(0x1418)]?_0x290d06(0xe88)+encodeURIComponent(_0x526790):_0x3503aa;_0x41ecc5=_0x290d06(0x910)+_0x636b0d+_0x290d06(0xe4e);}else{_0x1d0715=_0xf08fdc[_0x290d06(0xee1)]['name'],_0x53e28c=_0xf08fdc[_0x290d06(0x80d)][_0x290d06(0x59f)](-0x1)[0x0]||{'content':_0x290d06(0x1111)};const _0x36c456=_0x259218[_0x290d06(0x70d)](_0x1d0715);let _0x1ade33=_0x36c456&&_0x36c456[_0x290d06(0xc61)]?_0x36c456[_0x290d06(0xc61)]:_0x8f0871[_0x290d06(0x7b0)][_0x290d06(0x1418)]?_0x290d06(0xe88)+encodeURIComponent(_0xf08fdc[_0x290d06(0xee1)][_0x290d06(0xa2a)]||_0x290d06(0x1066)):_0x29d47b;_0x41ecc5=_0x290d06(0x910)+_0x1ade33+_0x290d06(0xe4e);}let _0x2f7f22=_0x290d06(0x1111);_0x53e28c&&_0x53e28c[_0x290d06(0x1469)]&&(_0x2f7f22=_0x53e28c[_0x290d06(0x1469)]),_0x1b3f09['innerHTML']=_0x290d06(0xbc0)+_0x41ecc5+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22name-line\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>'+_0x1d0715+_0x290d06(0xe5a)+String(_0x2f7f22)[_0x290d06(0x9fe)](0x0,0x14)+_0x290d06(0xc26),_0x39c905[_0x290d06(0x1155)](_0x1b3f09);});}async function _0x59f7d0(){const _0xe6e06f=_0x7c5117;if(!_0xfd9ebf)return;const _0x21ec96=_0x8f0871[_0xe6e06f(0x1260)][_0xfd9ebf];if(!_0x21ec96)return;await _0x4abd86(_0xe6e06f(0x3e1),_0xe6e06f(0xdf6)+_0x21ec96[_0xe6e06f(0x1023)]+_0xe6e06f(0x1551));const {proxyUrl:_0x5e261a,apiKey:_0x23867f,model:_0x3893f2}=_0x8f0871[_0xe6e06f(0xa78)];if(!_0x5e261a||!_0x23867f||!_0x3893f2){alert(_0xe6e06f(0x322));return;}const _0x30cbab=await _0x372b85[_0xe6e06f(0x1269)]['toArray'](),_0x5d0c58=_0x30cbab[_0xe6e06f(0xde7)](_0x2a9d2d=>_0x2a9d2d[_0xe6e06f(0x10ef)]&&_0x2a9d2d[_0xe6e06f(0x10ef)][_0xe6e06f(0xf95)](_0xfd9ebf));let _0x16bb36='#\x20你的社交圈\x20(绑定的NPC)\x0a';_0x5d0c58[_0xe6e06f(0xac0)]>0x0?(_0x16bb36+=_0xe6e06f(0x240),_0x5d0c58[_0xe6e06f(0x458)](_0x295b14=>{const _0x22a8c6=_0xe6e06f;_0x16bb36+=_0x22a8c6(0x63f)+_0x295b14['name']+_0x22a8c6(0xa3d)+_0x295b14['persona']+'\x0a';})):_0x16bb36+=_0xe6e06f(0x880);const _0x44a2c1=_0x8f0871[_0xe6e06f(0x9dd)][_0xe6e06f(0xff8)]===_0xe6e06f(0x8d4)||!_0x8f0871['qzoneSettings'][_0xe6e06f(0xff8)]?'用户':_0x8f0871[_0xe6e06f(0x9dd)][_0xe6e06f(0xff8)],_0x52b77f=_0x21ec96[_0xe6e06f(0x12d7)][_0xe6e06f(0xda5)]||_0x44a2c1,_0x4f18aa=_0x21ec96[_0xe6e06f(0x1312)]&&_0x21ec96[_0xe6e06f(0x1312)][_0xe6e06f(0xac0)]>0x0?_0x21ec96['longTermMemory'][_0xe6e06f(0x556)](_0x33d040=>_0xe6e06f(0x3cf)+_0x2368ae(_0x33d040[_0xe6e06f(0xe55)])+')\x20'+_0x33d040[_0xe6e06f(0x1469)])[_0xe6e06f(0xcc2)]('\x0a'):'无',_0x5f1d92=_0x21ec96[_0xe6e06f(0x12d7)]['maxMemory']||0xa,_0x58dd0d=_0x21ec96[_0xe6e06f(0xc88)]['slice'](-_0x5f1d92)['map'](_0x2d3e3a=>(_0x2d3e3a[_0xe6e06f(0xc92)]===_0xe6e06f(0xcb0)?_0x52b77f:_0x21ec96[_0xe6e06f(0x1023)])+':\x20'+String(_0x2d3e3a[_0xe6e06f(0x1469)])[_0xe6e06f(0x9fe)](0x0,0x1e)+_0xe6e06f(0x1111))[_0xe6e06f(0xcc2)]('\x0a'),_0x58da00=(_0x21ec96[_0xe6e06f(0x12d7)][_0xe6e06f(0xaaf)]||[])['map'](_0x303d17=>_0x8f0871['worldBooks']['find'](_0x1201f6=>_0x1201f6['id']===_0x303d17))[_0xe6e06f(0xde7)](Boolean)['map'](_0x378fd1=>_0xe6e06f(0xed2)+_0x378fd1['name']+'》设定\x20(你可以将其中角色作为聊天对象):\x0a'+_0x378fd1[_0xe6e06f(0x1469)][_0xe6e06f(0xde7)](_0x277c73=>_0x277c73['enabled'])[_0xe6e06f(0x556)](_0x2bf816=>'-\x20'+_0x2bf816['content'])[_0xe6e06f(0xcc2)]('\x0a'))[_0xe6e06f(0xcc2)](''),_0x39bd89=_0x21ec96[_0xe6e06f(0x93e)]||_0x21ec96[_0xe6e06f(0x1023)],_0x1bd4b6=_0x548d4f(_0x21ec96),_0x3c7825=_0xe6e06f(0x1509)+_0x21ec96[_0xe6e06f(0x1023)]+_0xe6e06f(0x1474)+_0x39bd89+_0xe6e06f(0x39b)+_0x39bd89+_0xe6e06f(0x3a9)+_0x39bd89+_0xe6e06f(0xcba)+_0x21ec96[_0xe6e06f(0x12d7)]['aiPersona']+'\x0a-\x20**你的长期记忆**:\x20'+_0x4f18aa+_0xe6e06f(0x1425)+_0x58da00+_0xe6e06f(0x51b)+_0x58dd0d+'\x0a'+_0x16bb36+_0xe6e06f(0x735)+_0x1bd4b6+_0xe6e06f(0x58b);try{const _0x13b51f=[{'role':'user','content':_0xe6e06f(0x2ed)}];let _0x1aaba3=_0x5e261a[_0xe6e06f(0xf95)](_0xe6e06f(0x9a5)),_0x3d99ff=_0x1e2f27(_0x3893f2,_0x23867f,_0x3c7825,_0x13b51f);const _0x3bb58a=_0x1aaba3?await fetch(_0x3d99ff['url'],_0x3d99ff[_0xe6e06f(0x3cc)]):await fetch(_0x5e261a+_0xe6e06f(0x1011),{'method':'POST','headers':{'Content-Type':_0xe6e06f(0x4b5),'Authorization':_0xe6e06f(0x681)+_0x23867f},'body':JSON[_0xe6e06f(0x7cc)]({'model':_0x3893f2,'messages':[{'role':_0xe6e06f(0x1417),'content':_0x3c7825},..._0x13b51f],'temperature':_0x8f0871['globalSettings'][_0xe6e06f(0x14a5)]||0.9})});if(!_0x3bb58a['ok'])throw new Error(_0xe6e06f(0x395)+_0x3bb58a[_0xe6e06f(0x37e)]);const _0x3ccb04=await _0x3bb58a['json'](),_0x1c9f8c=getGeminiResponseText(_0x3ccb04),_0x5d0a21=_0x1c9f8c[_0xe6e06f(0x1232)](/(\[[\s\S]*\])/);if(!_0x5d0a21||!_0x5d0a21[0x0])throw new Error('AI返回的内容中未找到有效的JSON数组。原始返回:\x20'+_0x1c9f8c);const _0x53872a=_0x5d0a21[0x0];let _0x51938f;try{_0x51938f=JSON[_0xe6e06f(0x4a0)](_0x53872a);}catch(_0x1daf27){throw new Error(_0xe6e06f(0x4b8)+_0x1daf27[_0xe6e06f(0x790)]+'\x0a\x0aAI原始返回内容:\x0a'+_0x1c9f8c);}_0x21ec96[_0xe6e06f(0xa1d)]=_0x51938f,await _0x372b85['chats']['put'](_0x21ec96),await _0x3389f5();const _0x2f39f7={'role':_0xe6e06f(0x1417),'content':_0xe6e06f(0x909),'timestamp':Date[_0xe6e06f(0xc22)](),'isHidden':!![]};_0x21ec96[_0xe6e06f(0xc88)][_0xe6e06f(0x481)](_0x2f39f7),await _0x372b85[_0xe6e06f(0x1260)]['put'](_0x21ec96),_0x2264b2();}catch(_0x4456e7){console[_0xe6e06f(0x52b)](_0xe6e06f(0xdff),_0x4456e7),await _0x4abd86('生成失败',_0xe6e06f(0xb6e)+_0x4456e7[_0xe6e06f(0x790)]);}}async function _0x59768e(){const _0x447675=_0x7c5117;if(!_0xfd9ebf)return;const _0x3cf9f2=_0x8f0871[_0x447675(0x1260)][_0xfd9ebf];if(!_0x3cf9f2)return;try{const {proxyUrl:_0x15b3ff,apiKey:_0x17f05a,model:_0x48f773}=_0x8f0871[_0x447675(0xa78)];if(!_0x15b3ff||!_0x17f05a||!_0x48f773)throw new Error(_0x447675(0x1237));const _0xe5c0f4=parseInt(_0x3cf9f2[_0x447675(0x12d7)][_0x447675(0x266)])||0xa,_0x1c1a22=_0x3cf9f2[_0x447675(0xc88)][_0x447675(0x59f)](-_0xe5c0f4),_0x3cab78=_0x3cf9f2[_0x447675(0x12d7)]['myNickname']||'我',_0xa88b20=_0x3cf9f2[_0x447675(0x12d7)][_0x447675(0xbbe)]||'用户',_0x39ae1e=_0x447675(0x110b)+(_0x3cf9f2[_0x447675(0x1312)]&&_0x3cf9f2[_0x447675(0x1312)][_0x447675(0xac0)]>0x0?_0x3cf9f2[_0x447675(0x1312)][_0x447675(0x556)](_0x1d3622=>'-\x20'+_0x1d3622[_0x447675(0x1469)])[_0x447675(0xcc2)]('\x0a'):_0x447675(0x612));let _0x11b21d='';if(_0x3cf9f2[_0x447675(0x12d7)][_0x447675(0xaaf)]&&_0x3cf9f2['settings'][_0x447675(0xaaf)][_0x447675(0xac0)]>0x0){const _0x4e90ab=_0x3cf9f2['settings'][_0x447675(0xaaf)][_0x447675(0x556)](_0x467796=>{const _0xfa8424=_0x447675,_0x1a0d07=_0x8f0871[_0xfa8424(0x739)][_0xfa8424(0x7ed)](_0x2b7a38=>_0x2b7a38['id']===_0x467796);if(!_0x1a0d07||!Array[_0xfa8424(0x345)](_0x1a0d07['content']))return'';const _0x40aa21=_0x1a0d07[_0xfa8424(0x1469)][_0xfa8424(0xde7)](_0x147c2d=>_0x147c2d['enabled']!==![])[_0xfa8424(0x556)](_0x35c73c=>'\x0a###\x20条目:\x20'+(_0x35c73c[_0xfa8424(0x7ab)]||_0xfa8424(0x13e2))+_0xfa8424(0x97b)+_0x35c73c[_0xfa8424(0x1469)])['join']('');return _0x40aa21?_0xfa8424(0x66c)+_0x1a0d07[_0xfa8424(0x1023)]+'\x0a'+_0x40aa21:'';})[_0x447675(0xde7)](Boolean)[_0x447675(0xcc2)]('');_0x4e90ab&&(_0x11b21d=_0x447675(0x1118)+_0x4e90ab+'\x0a');}const _0x2b0d26=_0x1be34c(_0x3cf9f2,0x3,_0x447675(0xd97)),_0x2b9b27=_0x1be34c(_0x3cf9f2,0x6,_0x447675(0xd97)),_0x22162f=_0x1be34c(_0x3cf9f2,0x9,_0x447675(0xd97)),_0x89a391=_0x1be34c(_0x3cf9f2,0x1,_0x447675(0x62b)),_0x49f069=_0x1be34c(_0x3cf9f2,0x3,_0x447675(0x62b)),_0x2b2de0=_0x1be34c(_0x3cf9f2,0x7,'days');let _0x534dc6='';if(_0x2b0d26||_0x2b9b27||_0x22162f||_0x89a391||_0x49f069||_0x2b2de0){_0x534dc6+='\x0a#\x20智能总结\x20(基于不同时间维度的对话回顾)\x0a';if(_0x2b0d26)_0x534dc6+=_0x2b0d26;if(_0x2b9b27)_0x534dc6+=_0x2b9b27;if(_0x22162f)_0x534dc6+=_0x22162f;if(_0x2b0d26||_0x2b9b27||_0x22162f)_0x534dc6+='\x0a';if(_0x89a391)_0x534dc6+=_0x89a391;if(_0x49f069)_0x534dc6+=_0x49f069;if(_0x2b2de0)_0x534dc6+=_0x2b2de0;}const _0x25cae7=_0x5e5e2b(_0x3cf9f2),_0x17419e=_0x447675(0x203)+_0x3cf9f2[_0x447675(0x93e)]+_0x447675(0xe9c)+_0x3cf9f2['settings'][_0x447675(0x200)]+_0x447675(0x735)+_0x25cae7+_0x447675(0xef4)+_0xa88b20+_0x447675(0xd74)+_0x3cf9f2[_0x447675(0x93e)]+_0x447675(0x291)+_0x3cab78+'\x22\x0a'+_0x11b21d+'\x0a'+_0x39ae1e+'\x0a'+_0x534dc6+_0x447675(0xd8b)+_0x1c1a22[_0x447675(0x556)](_0x48a8f9=>(_0x48a8f9['role']===_0x447675(0xcb0)?_0x3cab78:_0x3cf9f2[_0x447675(0x1023)])+':\x20'+String(_0x48a8f9[_0x447675(0x1469)]))[_0x447675(0xcc2)]('\x0a')+_0x447675(0x5b1),_0x187032=_0x1c1a22[_0x447675(0x556)](_0x13b36a=>({'role':_0x13b36a[_0x447675(0xc92)],'content':(_0x13b36a[_0x447675(0xc92)]==='user'?_0x3cab78:_0x3cf9f2['name'])+':\x20'+String(_0x13b36a[_0x447675(0x1469)])}));let _0x77c11a=_0x15b3ff[_0x447675(0xf95)](_0x447675(0x9a5)),_0x5ebed3=_0x1e2f27(_0x48f773,_0x17f05a,_0x17419e,_0x187032);const _0x1e8631=_0x77c11a?await fetch(_0x5ebed3[_0x447675(0x3f5)],_0x5ebed3[_0x447675(0x3cc)]):await fetch(_0x15b3ff+_0x447675(0x1011),{'method':_0x447675(0xb67),'headers':{'Content-Type':_0x447675(0x4b5),'Authorization':_0x447675(0x681)+_0x17f05a},'body':JSON[_0x447675(0x7cc)]({'model':_0x48f773,'messages':[{'role':_0x447675(0x1417),'content':_0x17419e},..._0x187032],'temperature':_0x8f0871['globalSettings'][_0x447675(0x14a5)]||0.8})});if(!_0x1e8631['ok'])throw new Error(_0x447675(0x1053)+(await _0x1e8631[_0x447675(0xa2e)]())[_0x447675(0x52b)][_0x447675(0x790)]);const _0x5be8b2=await _0x1e8631[_0x447675(0xa2e)](),_0x1c9030=getGeminiResponseText(_0x5be8b2),_0x2da059=_0x3b585b(_0x1c9030);if(!_0x2da059||_0x2da059[_0x447675(0xac0)]===0x0)throw new Error(_0x447675(0x592));let _0x1876c0=0x0,_0x2f5b85=Date[_0x447675(0xc22)]();for(const _0x337f2f of _0x2da059){const _0x2d0a4a={'role':_0x447675(0x10af),'senderName':_0x3cf9f2[_0x447675(0x93e)],'timestamp':_0x2f5b85++};let _0x4695e2=null;switch(_0x337f2f[_0x447675(0x682)]){case'text':_0x4695e2={..._0x2d0a4a,'content':String(_0x337f2f[_0x447675(0x1469)]||_0x337f2f[_0x447675(0x790)])};break;case _0x447675(0xf14):if(_0x337f2f['meaning']){const _0x24f9f7=_0x8f0871[_0x447675(0x413)][_0x447675(0x7ed)](_0xd4950e=>_0xd4950e[_0x447675(0x1023)]===_0x337f2f[_0x447675(0x1421)]);_0x24f9f7?_0x4695e2={..._0x2d0a4a,'type':_0x447675(0xf14),'content':_0x24f9f7[_0x447675(0x3f5)],'meaning':_0x24f9f7[_0x447675(0x1023)]}:(console['warn'](_0x447675(0xfe0)+_0x337f2f[_0x447675(0x1421)]+'\x22'),_0x4695e2={..._0x2d0a4a,'type':_0x447675(0xda3),'content':'[表情:\x20'+_0x337f2f[_0x447675(0x1421)]+']'});}else console[_0x447675(0x7fa)]('AI\x20(CPhone)\x20发送了一个没有\x20\x27meaning\x27\x20的\x20sticker\x20指令。',_0x337f2f),_0x4695e2={..._0x2d0a4a,'type':_0x447675(0xf14),'content':_0x337f2f[_0x447675(0x3f5)],'meaning':_0x447675(0x74f)};break;}_0x4695e2&&(_0x3cf9f2[_0x447675(0xc88)]['push'](_0x4695e2),_0x1876c0++);}_0x1876c0>0x0&&(_0x3cf9f2[_0x447675(0x28d)]=(_0x3cf9f2[_0x447675(0x28d)]||0x0)+_0x1876c0),await _0x372b85[_0x447675(0x1260)][_0x447675(0x11d5)](_0x3cf9f2),await _0x2d75fb(),_0x1876c0>0x0&&_0x1d3fa5(_0x3cf9f2['id'],_0x447675(0x193)+_0x1876c0+_0x447675(0x6b0));}catch(_0x163915){console['error'](_0x447675(0xbb7),_0x163915),await _0x4abd86(_0x447675(0x457),_0x447675(0xeb0)+_0x163915['message']);}}async function _0x562f98(){const _0xfa220b=_0x7c5117;if(_0x155849||!_0xfd9ebf)return;_0x155849=!![];const _0x511046=document[_0xfa220b(0xfa0)]('char-conversation-messages'),_0x1fa704=_0x8f0871['chats'][_0xfd9ebf];if(!_0x1fa704){_0x155849=![];return;}_0x4da623(_0x511046,_0xfa220b(0x8ce));const _0x470f92=_0x511046[_0xfa220b(0x11b8)];await new Promise(_0x3f5abb=>setTimeout(_0x3f5abb,0x1f4));const _0x13af1c=_0x1fa704[_0xfa220b(0xc88)][_0xfa220b(0xac0)],_0x5520ca=_0x8f0871[_0xfa220b(0x7b0)]['chatRenderWindow']||0x32,_0x2081db=_0x13af1c-_0x45e6c2,_0x662321=Math[_0xfa220b(0xb70)](0x0,_0x2081db-_0x5520ca),_0x197e0b=_0x1fa704[_0xfa220b(0xc88)][_0xfa220b(0x59f)](_0x662321,_0x2081db);_0x10441d(_0x511046);if(_0x197e0b['length']===0x0){_0x155849=![];return;}for(const _0x4972d9 of _0x197e0b[_0xfa220b(0xaf5)]()){const _0x437098={..._0x4972d9,'role':_0x4972d9[_0xfa220b(0xc92)]===_0xfa220b(0xcb0)?_0xfa220b(0x10af):_0xfa220b(0xcb0)},_0x1b4bef={'id':_0xfa220b(0x99e),'isGroup':![],'name':_0x1fa704['name'],'settings':{..._0x1fa704[_0xfa220b(0x12d7)],'myAvatar':_0x1fa704[_0xfa220b(0x12d7)][_0xfa220b(0xce8)],'myAvatarFrame':_0x1fa704[_0xfa220b(0x12d7)][_0xfa220b(0x761)],'aiAvatar':_0x1fa704[_0xfa220b(0x12d7)]['myAvatar'],'aiAvatarFrame':_0x1fa704[_0xfa220b(0x12d7)][_0xfa220b(0x107f)]}},_0x424e2e=await _0x20ac60(_0x437098,_0x1b4bef);_0x424e2e&&_0x511046['prepend'](_0x424e2e);}_0x45e6c2+=_0x197e0b[_0xfa220b(0xac0)];const _0x438938=_0x511046[_0xfa220b(0x11b8)];_0x511046[_0xfa220b(0x54d)]=_0x438938-_0x470f92,_0x155849=![];}async function _0x4e7455(_0x37669d){const _0x4b7176=_0x7c5117,_0xb12699=_0x8f0871[_0x4b7176(0x1260)][_0xfd9ebf];if(!_0xb12699)return;_0x528906=_0x37669d===-0x1?_0x4b7176(0xe87):_0xb12699[_0x4b7176(0xa1d)][_0x37669d]?.[_0x4b7176(0x682)];const _0x514390=document[_0x4b7176(0xfa0)](_0x4b7176(0x1188));_0x514390['innerHTML']='',_0x514390[_0x4b7176(0x8df)][_0x4b7176(0xb0d)]=_0xb12699[_0x4b7176(0x12d7)]['theme']||_0x4b7176(0xe82);const _0x5f470c=document[_0x4b7176(0xfa0)](_0x4b7176(0x1025))['classList'][_0x4b7176(0xea7)](_0x4b7176(0x10b0));_0x514390['style'][_0x4b7176(0x11f8)]=_0x5f470c?_0x4b7176(0x14d0):_0x4b7176(0x1442);let _0x191232,_0x576035=[];const _0x201979=await _0x372b85['npcs'][_0x4b7176(0x3bc)](),_0x313cc0=new Map(_0x201979[_0x4b7176(0x556)](_0xe31bf6=>[_0xe31bf6[_0x4b7176(0x1023)],_0xe31bf6]));if(_0x37669d===-0x1){_0x528906=_0x4b7176(0xe87);const _0x31d8ef=document[_0x4b7176(0xfa0)]('char-conversation-partner-name'),_0x3c1d42=document[_0x4b7176(0xfa0)]('char-simulated-input');_0x514390[_0x4b7176(0x1331)]='',_0x31d8ef[_0x4b7176(0xc62)]=_0xb12699[_0x4b7176(0x12d7)]['myNickname']||(_0x8f0871[_0x4b7176(0x9dd)]['nickname']||'我'),_0x3c1d42[_0x4b7176(0x14ca)]='与\x20'+(_0xb12699[_0x4b7176(0x12d7)][_0x4b7176(0xda5)]||'我')+'\x20的对话\x20(只读)',_0x45e6c2=0x0,_0x155849=![];const _0x5ce03f=_0xb12699['history'],_0x2fff90=_0x8f0871['globalSettings']['chatRenderWindow']||0x32,_0x33bd85=_0x5ce03f[_0x4b7176(0x59f)](-_0x2fff90);_0x191232={'id':'temp_user_chat_mirror','isGroup':![],'name':_0xb12699['name'],'settings':{..._0xb12699[_0x4b7176(0x12d7)],'myAvatar':_0xb12699['settings'][_0x4b7176(0xce8)],'myAvatarFrame':_0xb12699[_0x4b7176(0x12d7)][_0x4b7176(0x761)],'aiAvatar':_0xb12699[_0x4b7176(0x12d7)][_0x4b7176(0x38a)],'aiAvatarFrame':_0xb12699['settings'][_0x4b7176(0x107f)]}},_0x576035=_0x33bd85[_0x4b7176(0x556)](_0x231ef0=>({..._0x231ef0,'role':_0x231ef0[_0x4b7176(0xc92)]===_0x4b7176(0xcb0)?_0x4b7176(0x10af):'user'})),_0x45e6c2=_0x33bd85[_0x4b7176(0xac0)];}else{const _0x4a6c31=_0xb12699[_0x4b7176(0xa1d)][_0x37669d];if(!_0x4a6c31)return;_0x528906=_0x4a6c31['type'];const _0x10ed30=document[_0x4b7176(0xfa0)]('char-conversation-partner-name'),_0x5e842d=document[_0x4b7176(0xfa0)](_0x4b7176(0x71d));if(_0x4a6c31['type']===_0x4b7176(0x14ae))_0x10ed30[_0x4b7176(0xc62)]=_0x4a6c31[_0x4b7176(0xecf)]+'\x20('+(_0x4a6c31[_0x4b7176(0xa81)]['length']+0x1)+')',_0x5e842d[_0x4b7176(0x14ca)]='在\x20'+_0x4a6c31['groupName']+_0x4b7176(0x1087),_0x191232={'id':_0x4b7176(0xc9e),'isGroup':!![],'name':_0x4a6c31[_0x4b7176(0xecf)],'originalName':_0xb12699[_0x4b7176(0x93e)],'members':_0x4a6c31['participants'][_0x4b7176(0x556)](_0x41c6b5=>{const _0x101271=_0x4b7176,_0x24b736=_0x313cc0['get'](_0x41c6b5[_0x101271(0x1023)]);let _0x2cbd45=_0x24b736&&_0x24b736[_0x101271(0xc61)]?_0x24b736['avatar']:_0x8f0871[_0x101271(0x7b0)][_0x101271(0x1418)]?'https://image.pollinations.ai/prompt/'+encodeURIComponent(_0x41c6b5[_0x101271(0xa2a)]||'anime\x20person'):_0x29d47b;return{'originalName':_0x41c6b5['name'],'groupNickname':_0x41c6b5[_0x101271(0x1023)],'avatar':_0x2cbd45};}),'settings':{..._0xb12699[_0x4b7176(0x12d7)],'myNickname':_0xb12699[_0x4b7176(0x1023)],'myAvatar':_0xb12699[_0x4b7176(0x12d7)][_0x4b7176(0xce8)],'myAvatarFrame':_0xb12699[_0x4b7176(0x12d7)][_0x4b7176(0x761)]}};else{_0x10ed30[_0x4b7176(0xc62)]=_0x4a6c31[_0x4b7176(0xee1)][_0x4b7176(0x1023)],_0x5e842d[_0x4b7176(0x14ca)]='与\x20'+_0x4a6c31[_0x4b7176(0xee1)][_0x4b7176(0x1023)]+'\x20的对话';const _0x521d80=_0x313cc0['get'](_0x4a6c31[_0x4b7176(0xee1)][_0x4b7176(0x1023)]),_0x5f46bd=_0x521d80&&_0x521d80['avatar']?_0x521d80['avatar']:_0x8f0871['globalSettings'][_0x4b7176(0x1418)]?'https://image.pollinations.ai/prompt/'+encodeURIComponent(_0x4a6c31[_0x4b7176(0xee1)][_0x4b7176(0xa2a)]||_0x4b7176(0x1066)):_0x29d47b;_0x191232={'id':_0x4b7176(0x30f),'isGroup':![],'name':_0x4a6c31[_0x4b7176(0xee1)][_0x4b7176(0x1023)],'originalName':_0xb12699['originalName'],'settings':{..._0xb12699['settings'],'myAvatar':_0xb12699[_0x4b7176(0x12d7)][_0x4b7176(0xce8)],'myAvatarFrame':_0xb12699['settings'][_0x4b7176(0x761)],'aiAvatar':_0x5f46bd,'aiAvatarFrame':''}};}_0x576035=_0x4a6c31['messages'];}for(const _0xb5e1f7 of _0x576035){let _0x5dc932=_0xb5e1f7['role'];if(_0x37669d!==-0x1){const _0xbcaef6=_0xb5e1f7[_0x4b7176(0x1224)]===(_0xb12699[_0x4b7176(0x93e)]||_0xb12699[_0x4b7176(0x1023)]);_0x5dc932=_0xbcaef6?_0x4b7176(0xcb0):'assistant';}const _0x4c7f3c={'role':_0x5dc932,'senderName':_0xb5e1f7[_0x4b7176(0x1224)]||(_0x5dc932===_0x4b7176(0xcb0)?_0x191232[_0x4b7176(0x12d7)][_0x4b7176(0xda5)]:_0x191232['name']),'timestamp':_0xb5e1f7[_0x4b7176(0xe55)]||Date['now']()+Math[_0x4b7176(0x148a)]()};if(_0xb5e1f7[_0x4b7176(0x682)]===_0x4b7176(0xf14)&&_0xb5e1f7['meaning']){const _0x3eb2e5=_0x8f0871['userStickers']['find'](_0x52adc3=>_0x52adc3[_0x4b7176(0x1023)]===_0xb5e1f7['meaning']);_0x3eb2e5?(_0x4c7f3c[_0x4b7176(0x1469)]=_0x3eb2e5[_0x4b7176(0x3f5)],_0x4c7f3c[_0x4b7176(0x1421)]=_0xb5e1f7[_0x4b7176(0x1421)],_0x4c7f3c[_0x4b7176(0x682)]=_0x4b7176(0xf14)):(console[_0x4b7176(0x7fa)](_0x4b7176(0x5be)+_0xb5e1f7[_0x4b7176(0x1421)]+'\x22\x20在库中未找到。'),_0x4c7f3c['content']=_0x4b7176(0x103c)+_0xb5e1f7[_0x4b7176(0x1421)]+']',_0x4c7f3c['type']='text');}else _0x4c7f3c[_0x4b7176(0x1469)]=_0xb5e1f7['content'],_0x4c7f3c[_0x4b7176(0x682)]=_0xb5e1f7[_0x4b7176(0x682)]||_0x4b7176(0xda3);const _0x3993fe=await _0x20ac60(_0x4c7f3c,_0x191232);_0x3993fe&&_0x514390[_0x4b7176(0x1155)](_0x3993fe);}_0x49fa15(_0x4b7176(0xec3)),setTimeout(()=>_0x514390[_0x4b7176(0x54d)]=_0x514390[_0x4b7176(0x11b8)],0x0);}function _0x3f51e3(){const _0x1c6ced=_0x7c5117;document[_0x1c6ced(0xfa0)](_0x1c6ced(0xd91))[_0x1c6ced(0x128f)][_0x1c6ced(0x443)](_0x1c6ced(0xdcc));}async function _0x1c7ce7(){const _0x452e5b=_0x7c5117;if(!_0xfd9ebf)return;const _0x4f2974=_0x8f0871[_0x452e5b(0x1260)][_0xfd9ebf];if(!_0x4f2974){await _0x4abd86('操作失败',_0x452e5b(0xdfa));return;}await _0x4abd86(_0x452e5b(0x3e1),_0x452e5b(0x811)+_0x4f2974[_0x452e5b(0x1023)]+_0x452e5b(0xbef));const {proxyUrl:_0x576f21,apiKey:_0xa96b25,model:_0x3049fb}=_0x8f0871[_0x452e5b(0xa78)];if(!_0x576f21||!_0xa96b25||!_0x3049fb){alert(_0x452e5b(0x322));return;}const _0x3fac8f=_0x8f0871[_0x452e5b(0x9dd)][_0x452e5b(0xff8)]===_0x452e5b(0x8d4)||!_0x8f0871[_0x452e5b(0x9dd)][_0x452e5b(0xff8)]?'用户':_0x8f0871[_0x452e5b(0x9dd)]['nickname'],_0x5251f9=_0x4f2974[_0x452e5b(0x1312)]&&_0x4f2974[_0x452e5b(0x1312)][_0x452e5b(0xac0)]>0x0?_0x4f2974[_0x452e5b(0x1312)][_0x452e5b(0x556)](_0x417cf5=>'-\x20(记录于\x20'+_0x2368ae(_0x417cf5[_0x452e5b(0xe55)])+')\x20'+_0x417cf5['content'])['join']('\x0a'):'无',_0x225cd4=_0x4f2974[_0x452e5b(0x12d7)][_0x452e5b(0x266)]||0xa,_0x94c11c=_0x4f2974[_0x452e5b(0xc88)][_0x452e5b(0x59f)](-_0x225cd4)[_0x452e5b(0x556)](_0x1fef56=>(_0x1fef56[_0x452e5b(0xc92)]===_0x452e5b(0xcb0)?_0x3fac8f:_0x4f2974[_0x452e5b(0x1023)])+':\x20'+String(_0x1fef56[_0x452e5b(0x1469)])[_0x452e5b(0x9fe)](0x0,0x1e)+_0x452e5b(0x1111))[_0x452e5b(0xcc2)]('\x0a'),_0x3df702=(_0x4f2974[_0x452e5b(0x12d7)][_0x452e5b(0xaaf)]||[])[_0x452e5b(0x556)](_0x4c7f96=>_0x8f0871[_0x452e5b(0x739)][_0x452e5b(0x7ed)](_0xe36c84=>_0xe36c84['id']===_0x4c7f96))[_0x452e5b(0xde7)](Boolean)[_0x452e5b(0x556)](_0x4d0ce7=>_0x452e5b(0xed2)+_0x4d0ce7[_0x452e5b(0x1023)]+_0x452e5b(0x14a8)+_0x4d0ce7['content'][_0x452e5b(0xde7)](_0xb1008c=>_0xb1008c[_0x452e5b(0x7af)])[_0x452e5b(0x556)](_0x1d7600=>'-\x20'+_0x1d7600['content'])['join']('\x0a'))[_0x452e5b(0xcc2)](''),_0x4c18e5=_0x1be34c(_0x4f2974,0x3,'hours'),_0x1ec792=_0x1be34c(_0x4f2974,0x6,_0x452e5b(0xd97)),_0x2ce94=_0x1be34c(_0x4f2974,0x9,_0x452e5b(0xd97)),_0x3b4389=_0x1be34c(_0x4f2974,0x1,_0x452e5b(0x62b)),_0x53e850=_0x1be34c(_0x4f2974,0x3,_0x452e5b(0x62b)),_0x20090f=_0x1be34c(_0x4f2974,0x7,_0x452e5b(0x62b));let _0x44a368='';if(_0x4c18e5||_0x1ec792||_0x2ce94||_0x3b4389||_0x53e850||_0x20090f){_0x44a368+=_0x452e5b(0x3dd);if(_0x4c18e5)_0x44a368+=_0x4c18e5;if(_0x1ec792)_0x44a368+=_0x1ec792;if(_0x2ce94)_0x44a368+=_0x2ce94;if(_0x4c18e5||_0x1ec792||_0x2ce94)_0x44a368+='\x0a';if(_0x3b4389)_0x44a368+=_0x3b4389;if(_0x53e850)_0x44a368+=_0x53e850;if(_0x20090f)_0x44a368+=_0x20090f;}const _0x2419f4='\x0a#\x20你的任务\x0a你是一个虚拟生活模拟器。你的任务是扮演角色“'+_0x4f2974[_0x452e5b(0x1023)]+_0x452e5b(0x890)+_0x4f2974[_0x452e5b(0x12d7)][_0x452e5b(0x200)]+'\x0a'+_0x5251f9+'\x0a'+_0x3df702+'\x0a'+_0x44a368+_0x452e5b(0xe2c)+_0x3fac8f+_0x452e5b(0x152b)+_0x94c11c+'\x0a\x0a现在，请开始生成这组照片的描述和绘画指令。';try{const _0x5b439c=[{'role':_0x452e5b(0xcb0),'content':_0x452e5b(0xa46)}];let _0x438ee9=_0x576f21['includes'](_0x452e5b(0x9a5)),_0x381fac=_0x1e2f27(_0x3049fb,_0xa96b25,_0x2419f4,_0x5b439c);const _0x2588d0=_0x438ee9?await fetch(_0x381fac['url'],_0x381fac['data']):await fetch(_0x576f21+_0x452e5b(0x1011),{'method':'POST','headers':{'Content-Type':'application/json','Authorization':_0x452e5b(0x681)+_0xa96b25},'body':JSON[_0x452e5b(0x7cc)]({'model':_0x3049fb,'messages':[{'role':_0x452e5b(0x1417),'content':_0x2419f4},..._0x5b439c],'temperature':_0x8f0871[_0x452e5b(0x7b0)]['apiTemperature']||0.9})});if(!_0x2588d0['ok'])throw new Error(_0x452e5b(0x395)+_0x2588d0[_0x452e5b(0x37e)]);const _0xfde5fe=await _0x2588d0[_0x452e5b(0xa2e)](),_0x11676e=getGeminiResponseText(_0xfde5fe),_0x2ff9a4=_0x11676e['match'](/(\[[\s\S]*\])/);if(!_0x2ff9a4||!_0x2ff9a4[0x0])throw new Error(_0x452e5b(0x1234)+_0x11676e);const _0x12ac78=_0x2ff9a4[0x0];let _0x46b1b7;try{_0x46b1b7=JSON[_0x452e5b(0x4a0)](_0x12ac78);}catch(_0x6fea84){throw new Error('解析AI返回的JSON时出错:\x20'+_0x6fea84['message']+_0x452e5b(0xfde)+_0x11676e);}_0x4f2974[_0x452e5b(0x135d)]=_0x46b1b7,await _0x372b85[_0x452e5b(0x1260)][_0x452e5b(0x11d5)](_0x4f2974),await _0x1a1446();}catch(_0x23517d){console[_0x452e5b(0x52b)]('生成模拟相册失败:',_0x23517d),await _0x4abd86(_0x452e5b(0x1e6),_0x452e5b(0x350)+_0x23517d[_0x452e5b(0x790)]);}}async function _0x1a1446(){const _0x2182ff=_0x7c5117,_0x2f2084=document['getElementById'](_0x2182ff(0x340));_0x2f2084[_0x2182ff(0x1331)]='';if(!_0xfd9ebf)return;const _0x367493=_0x8f0871[_0x2182ff(0x1260)][_0xfd9ebf],_0x5dc225=_0x367493[_0x2182ff(0x135d)]||[];if(_0x5dc225[_0x2182ff(0xac0)]===0x0){_0x2f2084[_0x2182ff(0x1331)]=_0x2182ff(0x74d);return;}const _0x37f063='https://i.postimg.cc/KYr2qRCK/1.jpg';_0x5dc225['forEach'](_0x315e7f=>{const _0x52cb05=_0x2182ff,_0x17f07b=document[_0x52cb05(0xb4e)](_0x52cb05(0xd53));_0x17f07b['className']='char-photo-item',_0x17f07b[_0x52cb05(0x8df)][_0x52cb05(0x211)]=_0x315e7f[_0x52cb05(0x211)],_0x2f2084[_0x52cb05(0x1155)](_0x17f07b);if(_0x8f0871['globalSettings'][_0x52cb05(0x1418)]){_0x17f07b[_0x52cb05(0x63b)][_0x52cb05(0x11f8)]=_0x52cb05(0xb7b);const _0x23aff9=/[^\x00-\x7F]/[_0x52cb05(0x3fb)](_0x315e7f['image_prompt']),_0x553b27=_0x315e7f[_0x52cb05(0xe0d)]&&_0x315e7f[_0x52cb05(0xe0d)]['trim']()&&!_0x23aff9,_0x406d06=_0x553b27?_0x315e7f[_0x52cb05(0xe0d)]:_0x52cb05(0x7f8),_0x1bdcfb=_0x52cb05(0xe88)+encodeURIComponent(_0x406d06),_0x58da80=new Image();_0x58da80['onload']=function(){const _0xc2bc33=_0x52cb05;_0x17f07b['style'][_0xc2bc33(0xc93)]=_0xc2bc33(0xfbd)+this[_0xc2bc33(0x53e)]+')';},_0x58da80[_0x52cb05(0x14b0)]=function(){const _0x3859d9=_0x52cb05;_0x17f07b[_0x3859d9(0x63b)][_0x3859d9(0xc93)]=_0x3859d9(0xfbd)+_0x37f063+')';},_0x58da80[_0x52cb05(0x53e)]=_0x1bdcfb;}else{_0x17f07b['style']['backgroundColor']=_0x52cb05(0x1442),_0x17f07b[_0x52cb05(0x63b)][_0x52cb05(0xeac)]=_0x52cb05(0x14a7);const _0x48525c=document['createElement']('p');_0x48525c[_0x52cb05(0x1287)]='char-photo-description',_0x48525c[_0x52cb05(0xc62)]=_0x315e7f[_0x52cb05(0x211)]||_0x52cb05(0xcc9),_0x17f07b[_0x52cb05(0x1155)](_0x48525c);}});}async function _0xf266fc(){const _0x46b18d=_0x7c5117;if(!_0xfd9ebf)return;const _0x46e957=_0x8f0871['chats'][_0xfd9ebf];if(!_0x46e957)return;await _0x4abd86(_0x46b18d(0x3e1),'正在模拟“'+_0x46e957[_0x46b18d(0x1023)]+_0x46b18d(0x979));const {proxyUrl:_0x13bb98,apiKey:_0x4b4244,model:_0x38827e}=_0x8f0871[_0x46b18d(0xa78)];if(!_0x13bb98||!_0x4b4244||!_0x38827e){alert(_0x46b18d(0x67e));return;}const _0x4e5d73=_0x8f0871[_0x46b18d(0x9dd)][_0x46b18d(0xff8)]===_0x46b18d(0x8d4)||!_0x8f0871['qzoneSettings']['nickname']?'用户':_0x8f0871[_0x46b18d(0x9dd)][_0x46b18d(0xff8)],_0x43af66=_0x46e957[_0x46b18d(0x1312)]&&_0x46e957[_0x46b18d(0x1312)][_0x46b18d(0xac0)]>0x0?_0x46e957['longTermMemory'][_0x46b18d(0x556)](_0x2a21f9=>_0x46b18d(0x3cf)+_0x2368ae(_0x2a21f9[_0x46b18d(0xe55)])+')\x20'+_0x2a21f9[_0x46b18d(0x1469)])[_0x46b18d(0xcc2)]('\x0a'):'无',_0x2eeece=_0x46e957[_0x46b18d(0x12d7)][_0x46b18d(0x266)]||0xa,_0x300d76=_0x46e957[_0x46b18d(0xc88)][_0x46b18d(0x59f)](-_0x2eeece)[_0x46b18d(0x556)](_0xb27911=>(_0xb27911['role']===_0x46b18d(0xcb0)?_0x4e5d73:_0x46e957[_0x46b18d(0x1023)])+':\x20'+String(_0xb27911['content'])[_0x46b18d(0x9fe)](0x0,0x1e)+_0x46b18d(0x1111))[_0x46b18d(0xcc2)]('\x0a'),_0x353e5c=(_0x46e957[_0x46b18d(0x12d7)][_0x46b18d(0xaaf)]||[])[_0x46b18d(0x556)](_0x567067=>_0x8f0871['worldBooks'][_0x46b18d(0x7ed)](_0x3c526a=>_0x3c526a['id']===_0x567067))[_0x46b18d(0xde7)](Boolean)['map'](_0x2ae063=>'\x0a##\x20世界书《'+_0x2ae063[_0x46b18d(0x1023)]+'》设定:\x0a'+_0x2ae063[_0x46b18d(0x1469)][_0x46b18d(0xde7)](_0x5bb2fb=>_0x5bb2fb['enabled'])[_0x46b18d(0x556)](_0xc47143=>'-\x20'+_0xc47143['content'])[_0x46b18d(0xcc2)]('\x0a'))[_0x46b18d(0xcc2)](''),_0xa59f61=_0x1be34c(_0x46e957,0x3,_0x46b18d(0xd97)),_0x128151=_0x1be34c(_0x46e957,0x6,'hours'),_0x15d484=_0x1be34c(_0x46e957,0x9,'hours'),_0x352602=_0x1be34c(_0x46e957,0x1,_0x46b18d(0x62b)),_0x30879c=_0x1be34c(_0x46e957,0x3,_0x46b18d(0x62b)),_0x542157=_0x1be34c(_0x46e957,0x7,_0x46b18d(0x62b));let _0x4ffa72='';if(_0xa59f61||_0x128151||_0x15d484||_0x352602||_0x30879c||_0x542157){_0x4ffa72+=_0x46b18d(0x3dd);if(_0xa59f61)_0x4ffa72+=_0xa59f61;if(_0x128151)_0x4ffa72+=_0x128151;if(_0x15d484)_0x4ffa72+=_0x15d484;if(_0xa59f61||_0x128151||_0x15d484)_0x4ffa72+='\x0a';if(_0x352602)_0x4ffa72+=_0x352602;if(_0x30879c)_0x4ffa72+=_0x30879c;if(_0x542157)_0x4ffa72+=_0x542157;}const _0x2b850a=_0x46e957[_0x46b18d(0x12d7)]['myPersona']||_0x46b18d(0x7e1),_0x396fe5=_0x46b18d(0x830)+_0x46e957[_0x46b18d(0x1023)]+_0x46b18d(0x8e3)+_0x46e957[_0x46b18d(0x12d7)][_0x46b18d(0x200)]+_0x46b18d(0x7a0)+_0x2b850a+_0x46b18d(0x596)+_0x43af66+'\x0a'+_0x353e5c+'\x0a'+_0x4ffa72+_0x46b18d(0xe2c)+_0x4e5d73+_0x46b18d(0x152b)+_0x300d76+'\x0a\x0a现在，请开始生成这组【纯文本】的浏览记录。';try{const _0x2bb3f2=[{'role':_0x46b18d(0xcb0),'content':_0x46b18d(0xdb2)}];let _0x5b282f=_0x13bb98[_0x46b18d(0xf95)](_0x46b18d(0x9a5)),_0x2d6c3b=_0x1e2f27(_0x38827e,_0x4b4244,_0x396fe5,_0x2bb3f2);const _0x50c6bf=_0x5b282f?await fetch(_0x2d6c3b[_0x46b18d(0x3f5)],_0x2d6c3b[_0x46b18d(0x3cc)]):await fetch(_0x13bb98+_0x46b18d(0x1011),{'method':_0x46b18d(0xb67),'headers':{'Content-Type':'application/json','Authorization':_0x46b18d(0x681)+_0x4b4244},'body':JSON[_0x46b18d(0x7cc)]({'model':_0x38827e,'messages':[{'role':_0x46b18d(0x1417),'content':_0x396fe5},..._0x2bb3f2],'temperature':_0x8f0871[_0x46b18d(0x7b0)]['apiTemperature']||0.9})});if(!_0x50c6bf['ok'])throw new Error('API\x20错误:\x20'+_0x50c6bf[_0x46b18d(0x37e)]);const _0x2c7c4c=await _0x50c6bf[_0x46b18d(0xa2e)](),_0x20ddb6=getGeminiResponseText(_0x2c7c4c),_0x45c4c1=_0x20ddb6[_0x46b18d(0x1232)](/(\[[\s\S]*\])/);if(!_0x45c4c1||!_0x45c4c1[0x0])throw new Error('AI返回的内容中未找到有效的JSON数组。原始返回:\x20'+_0x20ddb6);const _0x349a9b=_0x45c4c1[0x0];let _0xe111b;try{_0xe111b=JSON['parse'](_0x349a9b);}catch(_0x4047a3){throw new Error(_0x46b18d(0x4b8)+_0x4047a3[_0x46b18d(0x790)]+_0x46b18d(0xfde)+_0x20ddb6);}_0x46e957['simulatedBrowserHistory']=_0xe111b,await _0x372b85[_0x46b18d(0x1260)][_0x46b18d(0x11d5)](_0x46e957),await _0x401824();}catch(_0x1f7f1d){console['error'](_0x46b18d(0x102b),_0x1f7f1d),await _0x4abd86(_0x46b18d(0x1e6),_0x46b18d(0x1099)+_0x1f7f1d[_0x46b18d(0x790)]);}}function _0x401824(){const _0x19d6e0=_0x7c5117,_0x1a1cbe=document['getElementById'](_0x19d6e0(0x798));_0x1a1cbe[_0x19d6e0(0x1331)]='';if(!_0xfd9ebf)return;const _0x338702=_0x8f0871['chats'][_0xfd9ebf],_0x309dd4=_0x338702[_0x19d6e0(0x6c8)]||[];if(_0x309dd4[_0x19d6e0(0xac0)]===0x0){_0x1a1cbe[_0x19d6e0(0x1331)]=_0x19d6e0(0x1046);return;}_0x309dd4[_0x19d6e0(0x458)]((_0x54ecd6,_0xcfe0f)=>{const _0x49d78a=_0x19d6e0,_0x52af7b=document[_0x49d78a(0xb4e)](_0x49d78a(0xd53));_0x52af7b[_0x49d78a(0x1287)]='char-browser-item',_0x52af7b[_0x49d78a(0x1331)]=_0x49d78a(0x10c6)+_0x54ecd6['title']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22url\x22>'+_0x54ecd6[_0x49d78a(0x3f5)]+_0x49d78a(0x347),_0x52af7b[_0x49d78a(0x7b8)](_0x49d78a(0xb4a),()=>_0x4dd11b(_0xcfe0f)),_0x1a1cbe[_0x49d78a(0x1155)](_0x52af7b);});}async function _0x4dd11b(_0x1afa47){const _0x5d586d=_0x7c5117,_0x2bc1c3=_0x8f0871[_0x5d586d(0x1260)][_0xfd9ebf],_0x4a9303=_0x2bc1c3['simulatedBrowserHistory'][_0x1afa47];if(!_0x4a9303)return;_0x3028db=_0x4a9303,_0x1a0427(_0x4a9303),_0x49fa15('char-browser-article-screen');const _0x4e5a71=document[_0x5d586d(0xfa0)](_0x5d586d(0x940)),_0x381b93=await _0x372b85[_0x5d586d(0xb69)][_0x5d586d(0xdc7)]({'type':_0x5d586d(0xb2d),'content.url':_0x4a9303[_0x5d586d(0x3f5)]})[_0x5d586d(0x102a)]();_0x4e5a71[_0x5d586d(0x128f)][_0x5d586d(0xb80)]('active',!!_0x381b93);}async function _0x342eff(){const _0x41743e=_0x7c5117;if(!_0x3028db||!_0xfd9ebf)return;const _0x93033d=_0x3028db,_0x3241b9=_0x8f0871['chats'][_0xfd9ebf],_0x371cf6=document[_0x41743e(0xfa0)](_0x41743e(0x940)),_0x1d3f5c=await _0x372b85['favorites'][_0x41743e(0xdc7)]({'type':_0x41743e(0xb2d),'content.url':_0x93033d['url']})[_0x41743e(0x102a)]();if(_0x1d3f5c)await _0x372b85['favorites']['delete'](_0x1d3f5c['id']),_0x371cf6[_0x41743e(0x128f)][_0x41743e(0x443)]('active'),await _0x4abd86('操作成功','已取消收藏。');else{const _0x3efdcc={'type':_0x41743e(0xb2d),'content':{..._0x93033d,'characterId':_0xfd9ebf,'characterName':_0x3241b9[_0x41743e(0x1023)]},'timestamp':Date['now']()};await _0x372b85[_0x41743e(0xb69)]['add'](_0x3efdcc),_0x371cf6[_0x41743e(0x128f)][_0x41743e(0x1327)](_0x41743e(0xa37)),await _0x4abd86(_0x41743e(0x98f),_0x41743e(0xa14));}}function _0x1a0427(_0x1f1dd7){const _0x2dc3de=_0x7c5117,_0x3c1674=document[_0x2dc3de(0xfa0)](_0x2dc3de(0x1044)),_0x5b55b6=document[_0x2dc3de(0xfa0)](_0x2dc3de(0x112d));_0x3c1674[_0x2dc3de(0xc62)]=_0x1f1dd7[_0x2dc3de(0x1187)],_0x5b55b6[_0x2dc3de(0x1331)]='',_0x1f1dd7[_0x2dc3de(0x682)]==='image'?_0x5b55b6['innerHTML']='<p\x20class=\x22char-browser-image-description\x22>'+(_0x1f1dd7[_0x2dc3de(0x1187)]||_0x2dc3de(0x89a))+_0x2dc3de(0x129d):_0x5b55b6[_0x2dc3de(0x1331)]=_0x2dc3de(0x12e8)+(_0x1f1dd7[_0x2dc3de(0x1469)]||_0x2dc3de(0xd40))[_0x2dc3de(0x128a)](/\n/g,'</p><p>')+'</p>';}async function _0x1155a6(){const _0x170edc=_0x7c5117;if(!_0xfd9ebf)return;const _0x359fd0=_0x8f0871['chats'][_0xfd9ebf];if(!_0x359fd0)return;await _0x4abd86(_0x170edc(0x3e1),_0x170edc(0x513)+_0x359fd0[_0x170edc(0x1023)]+'”的购物习惯...');const {proxyUrl:_0xa58a00,apiKey:_0x320e5d,model:_0x5b23f2}=_0x8f0871['apiConfig'];if(!_0xa58a00||!_0x320e5d||!_0x5b23f2){alert(_0x170edc(0x67e));return;}const _0x4489d9=_0x8f0871[_0x170edc(0x9dd)][_0x170edc(0xff8)]===_0x170edc(0x8d4)||!_0x8f0871[_0x170edc(0x9dd)][_0x170edc(0xff8)]?'用户':_0x8f0871['qzoneSettings']['nickname'],_0x28d3b1=_0x359fd0['longTermMemory']&&_0x359fd0[_0x170edc(0x1312)][_0x170edc(0xac0)]>0x0?_0x359fd0[_0x170edc(0x1312)][_0x170edc(0x556)](_0x2b9442=>_0x170edc(0x3cf)+_0x2368ae(_0x2b9442[_0x170edc(0xe55)])+')\x20'+_0x2b9442[_0x170edc(0x1469)])[_0x170edc(0xcc2)]('\x0a'):'无',_0x443216=_0x359fd0[_0x170edc(0x12d7)]['maxMemory']||0xa,_0x31ab20=_0x359fd0[_0x170edc(0xc88)]['slice'](-_0x443216)[_0x170edc(0x556)](_0x4b0c65=>(_0x4b0c65[_0x170edc(0xc92)]===_0x170edc(0xcb0)?_0x4489d9:_0x359fd0['name'])+':\x20'+String(_0x4b0c65[_0x170edc(0x1469)])[_0x170edc(0x9fe)](0x0,0x1e)+_0x170edc(0x1111))[_0x170edc(0xcc2)]('\x0a'),_0x25320c=(_0x359fd0[_0x170edc(0x12d7)][_0x170edc(0xaaf)]||[])['map'](_0x599806=>_0x8f0871['worldBooks'][_0x170edc(0x7ed)](_0x5b8354=>_0x5b8354['id']===_0x599806))[_0x170edc(0xde7)](Boolean)[_0x170edc(0x556)](_0x3fb93c=>_0x170edc(0xed2)+_0x3fb93c[_0x170edc(0x1023)]+_0x170edc(0x14a8)+_0x3fb93c[_0x170edc(0x1469)][_0x170edc(0xde7)](_0x3255e9=>_0x3255e9['enabled'])[_0x170edc(0x556)](_0x5959da=>'-\x20'+_0x5959da['content'])[_0x170edc(0xcc2)]('\x0a'))[_0x170edc(0xcc2)](''),_0x50f68f=_0x1be34c(_0x359fd0,0x3,_0x170edc(0xd97)),_0x288894=_0x1be34c(_0x359fd0,0x6,_0x170edc(0xd97)),_0x4f5a1b=_0x1be34c(_0x359fd0,0x9,'hours'),_0x58a384=_0x1be34c(_0x359fd0,0x1,_0x170edc(0x62b)),_0x1771ae=_0x1be34c(_0x359fd0,0x3,_0x170edc(0x62b)),_0x11b596=_0x1be34c(_0x359fd0,0x7,_0x170edc(0x62b));let _0x2fc44f='';if(_0x50f68f||_0x288894||_0x4f5a1b||_0x58a384||_0x1771ae||_0x11b596){_0x2fc44f+=_0x170edc(0x3dd);if(_0x50f68f)_0x2fc44f+=_0x50f68f;if(_0x288894)_0x2fc44f+=_0x288894;if(_0x4f5a1b)_0x2fc44f+=_0x4f5a1b;if(_0x50f68f||_0x288894||_0x4f5a1b)_0x2fc44f+='\x0a';if(_0x58a384)_0x2fc44f+=_0x58a384;if(_0x1771ae)_0x2fc44f+=_0x1771ae;if(_0x11b596)_0x2fc44f+=_0x11b596;}const _0x573dee=_0x170edc(0x830)+_0x359fd0[_0x170edc(0x1023)]+_0x170edc(0x1a8)+_0x359fd0[_0x170edc(0x12d7)][_0x170edc(0x200)]+'\x0a-\x20**你的长期记忆**:\x0a'+_0x28d3b1+'\x0a'+_0x25320c+'\x0a'+_0x2fc44f+_0x170edc(0xe2c)+_0x4489d9+_0x170edc(0x152b)+_0x31ab20+_0x170edc(0x2fd);try{const _0x19997b=[{'role':_0x170edc(0xcb0),'content':_0x170edc(0xc4b)}];let _0x32b5aa=_0xa58a00[_0x170edc(0xf95)]('generativelanguage'),_0x3af2d5=_0x1e2f27(_0x5b23f2,_0x320e5d,_0x573dee,_0x19997b);const _0x3fad63=_0x32b5aa?await fetch(_0x3af2d5[_0x170edc(0x3f5)],_0x3af2d5[_0x170edc(0x3cc)]):await fetch(_0xa58a00+_0x170edc(0x1011),{'method':_0x170edc(0xb67),'headers':{'Content-Type':_0x170edc(0x4b5),'Authorization':'Bearer\x20'+_0x320e5d},'body':JSON[_0x170edc(0x7cc)]({'model':_0x5b23f2,'messages':[{'role':_0x170edc(0x1417),'content':_0x573dee},..._0x19997b],'temperature':_0x8f0871[_0x170edc(0x7b0)]['apiTemperature']||0.9})});if(!_0x3fad63['ok'])throw new Error(_0x170edc(0x395)+_0x3fad63[_0x170edc(0x37e)]);const _0x556844=await _0x3fad63[_0x170edc(0xa2e)](),_0xeb7782=getGeminiResponseText(_0x556844),_0xcbdcdf=_0xeb7782[_0x170edc(0x1232)](/({[\s\S]*})/);if(!_0xcbdcdf)throw new Error('AI返回的内容中未找到有效的JSON对象。');const _0x4063c1=JSON[_0x170edc(0x4a0)](_0xcbdcdf[0x0]);!_0x4063c1[_0x170edc(0x70a)]&&(_0x4063c1[_0x170edc(0x70a)]=[]),_0x359fd0[_0x170edc(0x1e2)]=_0x4063c1,await _0x372b85['chats'][_0x170edc(0x11d5)](_0x359fd0),await _0x4ddcfc();}catch(_0x54b6be){console[_0x170edc(0x52b)]('生成模拟淘宝记录失败:',_0x54b6be),await _0x4abd86(_0x170edc(0x1e6),_0x170edc(0xbca)+_0x54b6be['message']);}}function _0x45724d(){_0x326fb5(),_0x49fa15('char-wallet-screen');}function _0x326fb5(){const _0x388b3e=_0x7c5117,_0x506296=document[_0x388b3e(0xfa0)](_0x388b3e(0x9ad));_0x506296[_0x388b3e(0x1331)]='';const _0x5246a0=_0x8f0871[_0x388b3e(0x1260)][_0xfd9ebf],_0x529c0b=_0x5246a0['simulatedTaobaoHistory']||{},_0x4d2681=_0x529c0b['purchases']||[],_0x2c7762=_0x529c0b['totalBalance']||0x0,_0x54f17b=document['createElement'](_0x388b3e(0xd53));_0x54f17b['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.06);\x0a\x20\x20\x20\x20',_0x54f17b[_0x388b3e(0x1331)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#8a8a8a;\x20margin:\x200\x200\x2010px\x200;\x22>账户余额</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22font-size:\x2032px;\x20font-weight:\x20600;\x20color:\x20#1f1f1f;\x20margin:\x200;\x22>¥'+_0x2c7762[_0x388b3e(0x3b8)](0x2)+'</p>\x0a\x20\x20\x20\x20',_0x506296[_0x388b3e(0x1155)](_0x54f17b);const _0x5456f8=document[_0x388b3e(0xb4e)]('h3');_0x5456f8[_0x388b3e(0xc62)]='最近支出',_0x5456f8[_0x388b3e(0x63b)]['cssText']=_0x388b3e(0x56e),_0x506296[_0x388b3e(0x1155)](_0x5456f8);if(_0x4d2681[_0x388b3e(0xac0)]===0x0){_0x506296['innerHTML']+=_0x388b3e(0x326);return;}_0x4d2681[_0x388b3e(0x458)](_0x2c8d69=>{const _0x19dfa0=_0x388b3e,_0x5b6e96=document[_0x19dfa0(0xb4e)](_0x19dfa0(0xd53));_0x5b6e96['style'][_0x19dfa0(0x283)]=_0x19dfa0(0x100c),_0x5b6e96['innerHTML']=_0x19dfa0(0x802)+_0x2c8d69[_0x19dfa0(0x35d)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22font-size:\x2012px;\x20color:\x20#8a8a8a;\x20margin:\x200;\x22>'+_0x2c8d69['status']+_0x19dfa0(0x362)+(_0x2c8d69['price']||0x0)['toFixed'](0x2)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x506296[_0x19dfa0(0x1155)](_0x5b6e96);});}async function _0x447c01(){const _0xf05f5d=_0x7c5117;if(!_0xfd9ebf)return;const _0x2b01d6=_0x8f0871[_0xf05f5d(0x1260)][_0xfd9ebf];if(!_0x2b01d6)return;await _0x4abd86(_0xf05f5d(0x3e1),'正在请求“'+_0x2b01d6[_0xf05f5d(0x1023)]+'”分享TA的备忘录...');const {proxyUrl:_0x2584ab,apiKey:_0x4538aa,model:_0x4eddd1}=_0x8f0871[_0xf05f5d(0xa78)];if(!_0x2584ab||!_0x4538aa||!_0x4eddd1){alert(_0xf05f5d(0x322));return;}const _0x1a437e=_0x8f0871[_0xf05f5d(0x9dd)][_0xf05f5d(0xff8)]===_0xf05f5d(0x8d4)||!_0x8f0871['qzoneSettings'][_0xf05f5d(0xff8)]?'用户':_0x8f0871[_0xf05f5d(0x9dd)]['nickname'],_0x3ee82a=_0x2b01d6['longTermMemory']&&_0x2b01d6[_0xf05f5d(0x1312)][_0xf05f5d(0xac0)]>0x0?_0x2b01d6['longTermMemory']['map'](_0x51dfac=>'-\x20(记录于\x20'+_0x2368ae(_0x51dfac[_0xf05f5d(0xe55)])+')\x20'+_0x51dfac['content'])['join']('\x0a'):'无',_0x2a1cdf=_0x2b01d6[_0xf05f5d(0x12d7)][_0xf05f5d(0x266)]||0xa,_0x1f6683=_0x2b01d6[_0xf05f5d(0xc88)][_0xf05f5d(0x59f)](-_0x2a1cdf)['map'](_0x48b981=>(_0x48b981['role']==='user'?_0x1a437e:_0x2b01d6['name'])+':\x20'+String(_0x48b981['content'])[_0xf05f5d(0x9fe)](0x0,0x1e)+'...')[_0xf05f5d(0xcc2)]('\x0a'),_0x23d82e=(_0x2b01d6['settings'][_0xf05f5d(0xaaf)]||[])[_0xf05f5d(0x556)](_0x4d0d55=>_0x8f0871[_0xf05f5d(0x739)]['find'](_0x170e85=>_0x170e85['id']===_0x4d0d55))[_0xf05f5d(0xde7)](Boolean)['map'](_0x2a063c=>'\x0a##\x20世界书《'+_0x2a063c[_0xf05f5d(0x1023)]+_0xf05f5d(0x14a8)+_0x2a063c[_0xf05f5d(0x1469)][_0xf05f5d(0xde7)](_0x339611=>_0x339611[_0xf05f5d(0x7af)])[_0xf05f5d(0x556)](_0x37987b=>'-\x20'+_0x37987b[_0xf05f5d(0x1469)])['join']('\x0a'))[_0xf05f5d(0xcc2)](''),_0x4fad9a=_0x1be34c(_0x2b01d6,0x3,'hours'),_0x3056e6=_0x1be34c(_0x2b01d6,0x6,'hours'),_0x1bd66a=_0x1be34c(_0x2b01d6,0x9,_0xf05f5d(0xd97)),_0x1018d1=_0x1be34c(_0x2b01d6,0x1,_0xf05f5d(0x62b)),_0xa578f1=_0x1be34c(_0x2b01d6,0x3,'days'),_0x40bf54=_0x1be34c(_0x2b01d6,0x7,_0xf05f5d(0x62b));let _0x269df7='';if(_0x4fad9a||_0x3056e6||_0x1bd66a||_0x1018d1||_0xa578f1||_0x40bf54){_0x269df7+=_0xf05f5d(0x3dd);if(_0x4fad9a)_0x269df7+=_0x4fad9a;if(_0x3056e6)_0x269df7+=_0x3056e6;if(_0x1bd66a)_0x269df7+=_0x1bd66a;if(_0x4fad9a||_0x3056e6||_0x1bd66a)_0x269df7+='\x0a';if(_0x1018d1)_0x269df7+=_0x1018d1;if(_0xa578f1)_0x269df7+=_0xa578f1;if(_0x40bf54)_0x269df7+=_0x40bf54;}const _0x2d7521=_0x2b01d6['settings'][_0xf05f5d(0xbbe)]||_0xf05f5d(0x7e1),_0x29587f=_0xf05f5d(0x830)+_0x2b01d6[_0xf05f5d(0x1023)]+_0xf05f5d(0x366)+_0x2b01d6[_0xf05f5d(0x12d7)][_0xf05f5d(0x200)]+_0xf05f5d(0x7a0)+_0x2d7521+_0xf05f5d(0x596)+_0x3ee82a+'\x0a'+_0x23d82e+'\x0a'+_0x269df7+_0xf05f5d(0xd64)+_0x1a437e+_0xf05f5d(0x152b)+_0x1f6683+_0xf05f5d(0xc3f);try{const _0xa01a04=[{'role':_0xf05f5d(0xcb0),'content':_0xf05f5d(0xda6)}];let _0x2a199e=_0x2584ab[_0xf05f5d(0xf95)](_0xf05f5d(0x9a5)),_0x5b5f22=_0x1e2f27(_0x4eddd1,_0x4538aa,_0x29587f,_0xa01a04);const _0x4f58e6=_0x2a199e?await fetch(_0x5b5f22[_0xf05f5d(0x3f5)],_0x5b5f22[_0xf05f5d(0x3cc)]):await fetch(_0x2584ab+_0xf05f5d(0x1011),{'method':_0xf05f5d(0xb67),'headers':{'Content-Type':_0xf05f5d(0x4b5),'Authorization':_0xf05f5d(0x681)+_0x4538aa},'body':JSON[_0xf05f5d(0x7cc)]({'model':_0x4eddd1,'messages':[{'role':_0xf05f5d(0x1417),'content':_0x29587f},..._0xa01a04],'temperature':_0x8f0871[_0xf05f5d(0x7b0)][_0xf05f5d(0x14a5)]||0.9})});if(!_0x4f58e6['ok']){const _0x2d122b=await _0x4f58e6[_0xf05f5d(0xa2e)]()[_0xf05f5d(0xe37)](()=>null),_0x20cc75=_0x2d122b?.[_0xf05f5d(0x52b)]?.['message']||_0x4f58e6['statusText'];throw new Error(_0xf05f5d(0x395)+_0x4f58e6[_0xf05f5d(0x103e)]+_0xf05f5d(0xc10)+_0x20cc75);}const _0x45db08=await _0x4f58e6[_0xf05f5d(0xa2e)](),_0x284b0e=getGeminiResponseText(_0x45db08),_0x306ace=_0x284b0e[_0xf05f5d(0x1232)](/(\[[\s\S]*\])/);if(!_0x306ace||!_0x306ace[0x0])throw new Error('AI返回的内容中未找到有效的JSON数组。原始返回:\x20'+_0x284b0e);const _0x50f958=_0x306ace[0x0];let _0x1ea984;try{_0x1ea984=JSON['parse'](_0x50f958);}catch(_0x38c12c){throw new Error(_0xf05f5d(0x4b8)+_0x38c12c['message']+_0xf05f5d(0xfde)+_0x284b0e);}if(!Array[_0xf05f5d(0x345)](_0x1ea984))throw new Error(_0xf05f5d(0xfff)+JSON[_0xf05f5d(0x7cc)](_0x1ea984));_0x2b01d6[_0xf05f5d(0x210)]=_0x1ea984['map'](_0x3e84f8=>({'id':Date['now']()+Math[_0xf05f5d(0x148a)](),'title':_0x3e84f8['title'],'content':_0x3e84f8['content']})),await _0x372b85[_0xf05f5d(0x1260)][_0xf05f5d(0x11d5)](_0x2b01d6),await _0x3f9a9d();}catch(_0x3977a2){console[_0xf05f5d(0x52b)]('生成模拟备忘录失败:',_0x3977a2),await _0x4abd86(_0xf05f5d(0x1e6),_0xf05f5d(0x765)+_0x3977a2[_0xf05f5d(0x790)]);}}async function _0x174861(){const _0x3b4cf3=_0x7c5117;if(!_0xfd9ebf)return;const _0x52798d=_0x8f0871['chats'][_0xfd9ebf];if(!_0x52798d)return;await _0x4abd86(_0x3b4cf3(0x3e1),_0x3b4cf3(0xaa4)+_0x52798d[_0x3b4cf3(0x1023)]+_0x3b4cf3(0xdbd));const {proxyUrl:_0x3926f6,apiKey:_0x36459b,model:_0x16ae86}=_0x8f0871[_0x3b4cf3(0xa78)];if(!_0x3926f6||!_0x36459b||!_0x16ae86){alert(_0x3b4cf3(0x67e));return;}const _0x22e403=_0x8f0871['qzoneSettings']['nickname']===_0x3b4cf3(0x8d4)||!_0x8f0871[_0x3b4cf3(0x9dd)][_0x3b4cf3(0xff8)]?'用户':_0x8f0871[_0x3b4cf3(0x9dd)][_0x3b4cf3(0xff8)],_0x23d874=_0x52798d['longTermMemory']&&_0x52798d[_0x3b4cf3(0x1312)][_0x3b4cf3(0xac0)]>0x0?_0x52798d[_0x3b4cf3(0x1312)][_0x3b4cf3(0x556)](_0x3597ea=>_0x3b4cf3(0x3cf)+_0x2368ae(_0x3597ea[_0x3b4cf3(0xe55)])+')\x20'+_0x3597ea['content'])[_0x3b4cf3(0xcc2)]('\x0a'):'无',_0x4a476a=_0x52798d[_0x3b4cf3(0x12d7)][_0x3b4cf3(0x266)]||0xa,_0x250cb0=_0x52798d[_0x3b4cf3(0xc88)][_0x3b4cf3(0x59f)](-_0x4a476a)[_0x3b4cf3(0x556)](_0x497ed8=>(_0x497ed8[_0x3b4cf3(0xc92)]===_0x3b4cf3(0xcb0)?_0x22e403:_0x52798d[_0x3b4cf3(0x1023)])+':\x20'+String(_0x497ed8[_0x3b4cf3(0x1469)])[_0x3b4cf3(0x9fe)](0x0,0x1e)+_0x3b4cf3(0x1111))[_0x3b4cf3(0xcc2)]('\x0a'),_0x533c4e=(_0x52798d['settings'][_0x3b4cf3(0xaaf)]||[])[_0x3b4cf3(0x556)](_0x3bfb21=>_0x8f0871[_0x3b4cf3(0x739)]['find'](_0x3e8446=>_0x3e8446['id']===_0x3bfb21))[_0x3b4cf3(0xde7)](Boolean)['map'](_0x184371=>'\x0a##\x20世界书《'+_0x184371[_0x3b4cf3(0x1023)]+'》设定:\x0a'+_0x184371[_0x3b4cf3(0x1469)][_0x3b4cf3(0xde7)](_0x6f7bc0=>_0x6f7bc0['enabled'])[_0x3b4cf3(0x556)](_0x1f832c=>'-\x20'+_0x1f832c[_0x3b4cf3(0x1469)])[_0x3b4cf3(0xcc2)]('\x0a'))[_0x3b4cf3(0xcc2)](''),_0x424cb9=_0x1be34c(_0x52798d,0x3,_0x3b4cf3(0xd97)),_0x4683ef=_0x1be34c(_0x52798d,0x6,_0x3b4cf3(0xd97)),_0x395cee=_0x1be34c(_0x52798d,0x9,_0x3b4cf3(0xd97)),_0x4fcf97=_0x1be34c(_0x52798d,0x1,_0x3b4cf3(0x62b)),_0x80a00b=_0x1be34c(_0x52798d,0x3,'days'),_0x242bc2=_0x1be34c(_0x52798d,0x7,_0x3b4cf3(0x62b));let _0xcf556='';if(_0x424cb9||_0x4683ef||_0x395cee||_0x4fcf97||_0x80a00b||_0x242bc2){_0xcf556+=_0x3b4cf3(0x3dd);if(_0x424cb9)_0xcf556+=_0x424cb9;if(_0x4683ef)_0xcf556+=_0x4683ef;if(_0x395cee)_0xcf556+=_0x395cee;if(_0x424cb9||_0x4683ef||_0x395cee)_0xcf556+='\x0a';if(_0x4fcf97)_0xcf556+=_0x4fcf97;if(_0x80a00b)_0xcf556+=_0x80a00b;if(_0x242bc2)_0xcf556+=_0x242bc2;}const _0x235d91=_0x3b4cf3(0x830)+_0x52798d[_0x3b4cf3(0x1023)]+_0x3b4cf3(0x5bd)+new Date()[_0x3b4cf3(0x23b)]()+'**。\x0a\x20\x20\x20\x20-\x20\x20\x20你生成的【所有】足迹的\x20`timestamp`\x20字段，【必须】是今天或今天以前的日期。\x0a\x20\x20\x20\x20-\x20\x20\x20【绝对禁止】生成任何未来的日期！\x0a\x20\x20\x20\x20-\x20\x20\x20请生成一个看起来像是过去几周内的、时间【从新到旧】排列的足迹列表。\x0a2.\x20\x20**创造性与合理性**:\x20足迹必须完全符合角色的性格、爱好、职业和生活环境。\x0a3.\x20\x20**多样性**:\x20地点类型要丰富，可以包括餐厅、商场、公园、公司、朋友家等。\x0a4.\x20\x20**【格式铁律\x20(最高优先级)】**:\x20\x0a\x20\x20\x20\x20-\x20你的回复【必须且只能】是一个JSON数组格式的字符串。\x0a\x20\x20\x20\x20-\x20你的回复必须以\x20`[`\x20开始，并以\x20`]`\x20结束。\x0a\x20\x20\x20\x20-\x20【绝对禁止】在JSON数组前后添加任何多余的文字、解释、或\x20markdown\x20标记\x20(如\x20```json)。\x0a\x20\x20\x20\x20-\x20数组中的每个元素都是一个对象，代表一条足迹，格式【必须】如下:\x0a\x20\x20\x20\x20```json\x0a\x20\x20\x20\x20[\x0a\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22locationName\x22:\x20\x22一个具体、生动的地点名称\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22address\x22:\x20\x22一个虚构但看起来很真实的详细地址\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22comment\x22:\x20\x22这是角色对这次出行或这个地点的内心独白或评论，必须使用第一人称“我”来写。\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22image_prompt\x22:\x20\x22(可选)一段用于生成这张地点照片的、详细的【英文】关键词,\x20风格为\x20realistic\x20photo,\x20high\x20quality\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x22timestamp\x22:\x20\x22符合\x20ISO\x208601\x20格式的日期时间字符串\x20(例如:\x20\x272025-09-25T18:30:00Z\x27)\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20]\x0a\x20\x20\x20\x20```\x0a\x20\x20\x20\x20-\x20**重要**:\x20大约有【三分之一】的足迹需要包含\x20`image_prompt`\x20字段来生成一张照片。\x0a\x20\x20\x20\x20-\x20**图片**:\x20image_prompt\x20生成的图片【绝对禁止包含真人】。如果地点是室内，可以生成空无一人的场景；如果是室外，可以只有风景或建筑。\x0a\x0a#\x20供你参考的上下文\x0a-\x20**你的角色设定**:\x20'+_0x52798d[_0x3b4cf3(0x12d7)]['aiPersona']+_0x3b4cf3(0x596)+_0x23d874+'\x0a'+_0x533c4e+'\x0a'+_0xcf556+_0x3b4cf3(0xd64)+_0x22e403+'”的对话摘要**:\x0a'+_0x250cb0+_0x3b4cf3(0x1504);try{const _0x14a6ac=[{'role':_0x3b4cf3(0xcb0),'content':_0x3b4cf3(0xb99)}];let _0xaae622=_0x3926f6[_0x3b4cf3(0xf95)]('generativelanguage'),_0x280c82=_0x1e2f27(_0x16ae86,_0x36459b,_0x235d91,_0x14a6ac);const _0x5a37d1=_0xaae622?await fetch(_0x280c82['url'],_0x280c82[_0x3b4cf3(0x3cc)]):await fetch(_0x3926f6+_0x3b4cf3(0x1011),{'method':'POST','headers':{'Content-Type':'application/json','Authorization':_0x3b4cf3(0x681)+_0x36459b},'body':JSON['stringify']({'model':_0x16ae86,'messages':[{'role':_0x3b4cf3(0x1417),'content':_0x235d91},..._0x14a6ac],'temperature':_0x8f0871[_0x3b4cf3(0x7b0)]['apiTemperature']||0.9})});if(!_0x5a37d1['ok'])throw new Error(_0x3b4cf3(0x395)+_0x5a37d1[_0x3b4cf3(0x37e)]);const _0x257d74=await _0x5a37d1[_0x3b4cf3(0xa2e)](),_0x1eafcf=getGeminiResponseText(_0x257d74),_0x465aab=_0x1eafcf[_0x3b4cf3(0x1232)](/(\[[\s\S]*\])/);if(!_0x465aab||!_0x465aab[0x0])throw new Error(_0x3b4cf3(0x1234)+_0x1eafcf);const _0x163dc4=_0x465aab[0x0];let _0xc1d6aa;try{_0xc1d6aa=JSON[_0x3b4cf3(0x4a0)](_0x163dc4);}catch(_0x11dfb6){throw new Error(_0x3b4cf3(0x4b8)+_0x11dfb6[_0x3b4cf3(0x790)]+'\x0a\x0aAI原始返回内容:\x0a'+_0x1eafcf);}_0x52798d[_0x3b4cf3(0x674)]=_0xc1d6aa,await _0x372b85[_0x3b4cf3(0x1260)][_0x3b4cf3(0x11d5)](_0x52798d),await _0x377609();}catch(_0xb6621){console[_0x3b4cf3(0x52b)](_0x3b4cf3(0x13f1),_0xb6621),await _0x4abd86(_0x3b4cf3(0x1e6),'无法生成足迹，请检查API配置或稍后再试。\x0a错误:\x20'+_0xb6621[_0x3b4cf3(0x790)]);}}function _0x377609(){const _0x49aa70=_0x7c5117,_0x3b7700=document[_0x49aa70(0xfa0)]('char-amap-list');_0x3b7700['innerHTML']='';if(!_0xfd9ebf)return;const _0x6053e9=_0x8f0871[_0x49aa70(0x1260)][_0xfd9ebf],_0x52a7ee=_0x6053e9[_0x49aa70(0x674)]||[];if(_0x52a7ee[_0x49aa70(0xac0)]===0x0){_0x3b7700[_0x49aa70(0x1331)]=_0x49aa70(0xec9);return;}_0x52a7ee[_0x49aa70(0x458)](_0xdbc359=>{const _0x4ef8aa=_0x49aa70,_0x10a6a9=document[_0x4ef8aa(0xb4e)]('div');_0x10a6a9[_0x4ef8aa(0x1287)]=_0x4ef8aa(0x65a);let _0x2c665b='';if(_0xdbc359[_0x4ef8aa(0xe0d)]){const _0x439750=_0x4ef8aa(0xe88)+encodeURIComponent(_0xdbc359[_0x4ef8aa(0xe0d)]);_0x2c665b=_0x4ef8aa(0x5a0)+_0x439750+_0x4ef8aa(0x4fa)+_0xdbc359['comment']+_0x4ef8aa(0x1ab);}const _0x15818a=_0xdbc359[_0x4ef8aa(0xe55)]?_0x2368ae(new Date(_0xdbc359['timestamp'])[_0x4ef8aa(0x261)]()):_0x4ef8aa(0xa50);_0x10a6a9[_0x4ef8aa(0x1331)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amap-item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amap-item-icon\x22>📍</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amap-item-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amap-item-title\x22>'+_0xdbc359[_0x4ef8aa(0x148c)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22amap-item-address\x22>'+_0xdbc359[_0x4ef8aa(0x105b)]+_0x4ef8aa(0x37b)+_0xdbc359[_0x4ef8aa(0x7ab)][_0x4ef8aa(0x128a)](/\n/g,'<br>')+_0x4ef8aa(0x813)+_0x2c665b+_0x4ef8aa(0x14f8)+_0x15818a+_0x4ef8aa(0x144a),_0x3b7700[_0x4ef8aa(0x1155)](_0x10a6a9);});}async function _0x3d891b(){const _0x103a2a=_0x7c5117;if(!_0xfd9ebf)return;const _0x288e41=_0x8f0871[_0x103a2a(0x1260)][_0xfd9ebf];if(!_0x288e41)return;await _0x4abd86(_0x103a2a(0x3e1),'正在分析“'+_0x288e41[_0x103a2a(0x1023)]+'”的手机使用习惯...');const {proxyUrl:_0x44c9c2,apiKey:_0x58facf,model:_0x2f426e}=_0x8f0871[_0x103a2a(0xa78)];if(!_0x44c9c2||!_0x58facf||!_0x2f426e){alert(_0x103a2a(0x67e));return;}const _0x3ccce4=_0x8f0871[_0x103a2a(0x9dd)][_0x103a2a(0xff8)]==='{{user}}'||!_0x8f0871['qzoneSettings']['nickname']?'用户':_0x8f0871[_0x103a2a(0x9dd)][_0x103a2a(0xff8)],_0x20c883=_0x288e41[_0x103a2a(0x1312)]&&_0x288e41['longTermMemory'][_0x103a2a(0xac0)]>0x0?_0x288e41['longTermMemory'][_0x103a2a(0x556)](_0x1ea811=>_0x103a2a(0x3cf)+_0x2368ae(_0x1ea811[_0x103a2a(0xe55)])+')\x20'+_0x1ea811['content'])[_0x103a2a(0xcc2)]('\x0a'):'无',_0x41537d=_0x288e41[_0x103a2a(0x12d7)]['maxMemory']||0xa,_0x39c0cb=_0x288e41[_0x103a2a(0xc88)][_0x103a2a(0x59f)](-_0x41537d)['map'](_0x40f715=>(_0x40f715[_0x103a2a(0xc92)]==='user'?_0x3ccce4:_0x288e41[_0x103a2a(0x1023)])+':\x20'+String(_0x40f715['content'])['substring'](0x0,0x1e)+'...')[_0x103a2a(0xcc2)]('\x0a'),_0x29a2e6=(_0x288e41[_0x103a2a(0x12d7)][_0x103a2a(0xaaf)]||[])[_0x103a2a(0x556)](_0x52ebb4=>_0x8f0871[_0x103a2a(0x739)][_0x103a2a(0x7ed)](_0xd2d5c9=>_0xd2d5c9['id']===_0x52ebb4))[_0x103a2a(0xde7)](Boolean)[_0x103a2a(0x556)](_0x2ea7dd=>_0x103a2a(0xed2)+_0x2ea7dd['name']+_0x103a2a(0x14a8)+_0x2ea7dd['content'][_0x103a2a(0xde7)](_0x302573=>_0x302573[_0x103a2a(0x7af)])[_0x103a2a(0x556)](_0x365d29=>'-\x20'+_0x365d29[_0x103a2a(0x1469)])[_0x103a2a(0xcc2)]('\x0a'))[_0x103a2a(0xcc2)](''),_0x3d2068=_0x1be34c(_0x288e41,0x3,_0x103a2a(0xd97)),_0x51935f=_0x1be34c(_0x288e41,0x6,_0x103a2a(0xd97)),_0x1f7cb5=_0x1be34c(_0x288e41,0x9,_0x103a2a(0xd97)),_0x339eed=_0x1be34c(_0x288e41,0x1,_0x103a2a(0x62b)),_0x10ab9a=_0x1be34c(_0x288e41,0x3,_0x103a2a(0x62b)),_0x59473a=_0x1be34c(_0x288e41,0x7,_0x103a2a(0x62b));let _0x5ad975='';if(_0x3d2068||_0x51935f||_0x1f7cb5||_0x339eed||_0x10ab9a||_0x59473a){_0x5ad975+=_0x103a2a(0x3dd);if(_0x3d2068)_0x5ad975+=_0x3d2068;if(_0x51935f)_0x5ad975+=_0x51935f;if(_0x1f7cb5)_0x5ad975+=_0x1f7cb5;if(_0x3d2068||_0x51935f||_0x1f7cb5)_0x5ad975+='\x0a';if(_0x339eed)_0x5ad975+=_0x339eed;if(_0x10ab9a)_0x5ad975+=_0x10ab9a;if(_0x59473a)_0x5ad975+=_0x59473a;}const _0x979e5a=_0x103a2a(0x830)+_0x288e41[_0x103a2a(0x1023)]+_0x103a2a(0x52f)+_0x288e41['settings']['aiPersona']+_0x103a2a(0x596)+_0x20c883+'\x0a'+_0x29a2e6+'\x0a'+_0x5ad975+'\x0a-\x20**你最近和“'+_0x3ccce4+_0x103a2a(0x152b)+_0x39c0cb+'\x0a\x0a现在，请开始生成这组App使用记录。';try{const _0x1da902=[{'role':_0x103a2a(0xcb0),'content':'请根据你的设定，生成你的App使用记录。'}];let _0x36240e=_0x44c9c2[_0x103a2a(0xf95)](_0x103a2a(0x9a5)),_0x45a0a5=_0x1e2f27(_0x2f426e,_0x58facf,_0x979e5a,_0x1da902);const _0x269b95=_0x36240e?await fetch(_0x45a0a5['url'],_0x45a0a5[_0x103a2a(0x3cc)]):await fetch(_0x44c9c2+'/v1/chat/completions',{'method':_0x103a2a(0xb67),'headers':{'Content-Type':_0x103a2a(0x4b5),'Authorization':_0x103a2a(0x681)+_0x58facf},'body':JSON[_0x103a2a(0x7cc)]({'model':_0x2f426e,'messages':[{'role':_0x103a2a(0x1417),'content':_0x979e5a},..._0x1da902],'temperature':_0x8f0871[_0x103a2a(0x7b0)]['apiTemperature']||0.9})});if(!_0x269b95['ok'])throw new Error('API\x20错误:\x20'+_0x269b95[_0x103a2a(0x37e)]);const _0x12aa65=await _0x269b95[_0x103a2a(0xa2e)](),_0x41441f=getGeminiResponseText(_0x12aa65),_0x1290af=_0x41441f[_0x103a2a(0x128a)](/^```json\s*/,'')[_0x103a2a(0x128a)](/```$/,''),_0x42cba0=JSON[_0x103a2a(0x4a0)](_0x1290af);_0x288e41[_0x103a2a(0xb26)]=_0x42cba0,await _0x372b85[_0x103a2a(0x1260)][_0x103a2a(0x11d5)](_0x288e41),await _0x369049();}catch(_0x13fcba){console['error'](_0x103a2a(0x1480),_0x13fcba),await _0x4abd86(_0x103a2a(0x1e6),_0x103a2a(0x5e1)+_0x13fcba[_0x103a2a(0x790)]);}}function _0x369049(){const _0x391e15=_0x7c5117,_0x1240d3=document[_0x391e15(0xfa0)](_0x391e15(0x3b2));_0x1240d3[_0x391e15(0x1331)]='';if(!_0xfd9ebf)return;const _0x116ec4=_0x8f0871[_0x391e15(0x1260)][_0xfd9ebf],_0x2d3681=(_0x116ec4['simulatedAppUsage']||[])[_0x391e15(0x1376)]((_0x3e3ef0,_0x51dd96)=>_0x51dd96[_0x391e15(0x448)]-_0x3e3ef0[_0x391e15(0x448)]);if(_0x2d3681[_0x391e15(0xac0)]===0x0){_0x1240d3[_0x391e15(0x1331)]='<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>这里还没有任何使用记录，<br>点击右上角刷新按钮生成一些吧！</p>';return;}_0x2d3681[_0x391e15(0x458)](_0x2e69ea=>{const _0x286cc8=_0x391e15,_0xeaebc2=document[_0x286cc8(0xb4e)]('div');_0xeaebc2[_0x286cc8(0x1287)]='char-usage-item';const _0x550044=Math[_0x286cc8(0x13e5)](_0x2e69ea[_0x286cc8(0x448)]/0x3c),_0x51448f=_0x2e69ea[_0x286cc8(0x448)]%0x3c;let _0x3e50af='';if(_0x550044>0x0)_0x3e50af+=_0x550044+'小时';if(_0x51448f>0x0)_0x3e50af+=_0x51448f+'分钟';if(!_0x3e50af)_0x3e50af=_0x286cc8(0xcae);const _0x31b41c=_0x2e69ea[_0x286cc8(0xe0d)]||'modern\x20app\x20icon\x20for\x20'+_0x2e69ea[_0x286cc8(0x6fc)]+_0x286cc8(0x563),_0x556975=_0x286cc8(0xe88)+encodeURIComponent(_0x31b41c);_0xeaebc2[_0x286cc8(0x1331)]=_0x286cc8(0x1036)+_0x556975+_0x286cc8(0x954)+_0x2e69ea[_0x286cc8(0x6fc)]+_0x286cc8(0x110a)+_0x2e69ea[_0x286cc8(0x795)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22usage-item-time\x22>'+_0x3e50af+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1240d3['appendChild'](_0xeaebc2);});}async function _0x198e73(){const _0x503f83=_0x7c5117;if(!_0xfd9ebf)return;const _0x432fdd=_0x8f0871[_0x503f83(0x1260)][_0xfd9ebf];if(!_0x432fdd)return;await _0x4abd86('请稍候...',_0x503f83(0x811)+_0x432fdd['name']+_0x503f83(0xd3e));const {proxyUrl:_0x308a7b,apiKey:_0x4ad261,model:_0x2ba332}=_0x8f0871[_0x503f83(0xa78)];if(!_0x308a7b||!_0x4ad261||!_0x2ba332){alert(_0x503f83(0x322));return;}const _0x11fb44=_0x8f0871[_0x503f83(0x9dd)]['nickname']===_0x503f83(0x8d4)||!_0x8f0871[_0x503f83(0x9dd)][_0x503f83(0xff8)]?'用户':_0x8f0871[_0x503f83(0x9dd)][_0x503f83(0xff8)],_0x29b864=_0x432fdd[_0x503f83(0x1312)]&&_0x432fdd['longTermMemory'][_0x503f83(0xac0)]>0x0?_0x432fdd[_0x503f83(0x1312)][_0x503f83(0x556)](_0x17ec8c=>_0x503f83(0x3cf)+_0x2368ae(_0x17ec8c[_0x503f83(0xe55)])+')\x20'+_0x17ec8c['content'])[_0x503f83(0xcc2)]('\x0a'):'无',_0x2f467c=_0x432fdd[_0x503f83(0x12d7)][_0x503f83(0x266)]||0xa,_0x4eb267=_0x432fdd[_0x503f83(0xc88)][_0x503f83(0x59f)](-_0x2f467c)['map'](_0x1fed48=>(_0x1fed48[_0x503f83(0xc92)]===_0x503f83(0xcb0)?_0x11fb44:_0x432fdd[_0x503f83(0x1023)])+':\x20'+String(_0x1fed48[_0x503f83(0x1469)])['substring'](0x0,0x1e)+_0x503f83(0x1111))[_0x503f83(0xcc2)]('\x0a'),_0x5774bc=(_0x432fdd['settings']['linkedWorldBookIds']||[])[_0x503f83(0x556)](_0x59bfb1=>_0x8f0871[_0x503f83(0x739)][_0x503f83(0x7ed)](_0x2ac9e0=>_0x2ac9e0['id']===_0x59bfb1))[_0x503f83(0xde7)](Boolean)[_0x503f83(0x556)](_0x1af24f=>_0x503f83(0xed2)+_0x1af24f[_0x503f83(0x1023)]+_0x503f83(0x14a8)+_0x1af24f[_0x503f83(0x1469)]['filter'](_0x176da9=>_0x176da9['enabled'])[_0x503f83(0x556)](_0x3a73ca=>'-\x20'+_0x3a73ca[_0x503f83(0x1469)])[_0x503f83(0xcc2)]('\x0a'))['join'](''),_0x274c5b=_0x503f83(0xac4)+_0x432fdd[_0x503f83(0x1023)]+_0x503f83(0x11d0)+_0x432fdd[_0x503f83(0x12d7)][_0x503f83(0x200)]+_0x503f83(0x596)+_0x29b864+'\x0a'+_0x5774bc+_0x503f83(0xd64)+_0x11fb44+_0x503f83(0x152b)+_0x4eb267+'\x0a\x0a现在，请生成这份歌单。';try{const _0x40a5d2=[{'role':_0x503f83(0xcb0),'content':_0x503f83(0x54a)}];let _0x471e4e=_0x308a7b['includes']('generativelanguage'),_0x5d8fa4=_0x1e2f27(_0x2ba332,_0x4ad261,_0x274c5b,_0x40a5d2);const _0x21d6d7=_0x471e4e?await fetch(_0x5d8fa4[_0x503f83(0x3f5)],_0x5d8fa4[_0x503f83(0x3cc)]):await fetch(_0x308a7b+_0x503f83(0x1011),{'method':'POST','headers':{'Content-Type':_0x503f83(0x4b5),'Authorization':'Bearer\x20'+_0x4ad261},'body':JSON[_0x503f83(0x7cc)]({'model':_0x2ba332,'messages':[{'role':_0x503f83(0x1417),'content':_0x274c5b},..._0x40a5d2],'temperature':_0x8f0871[_0x503f83(0x7b0)][_0x503f83(0x14a5)]||0x1})});if(!_0x21d6d7['ok'])throw new Error(_0x503f83(0x395)+_0x21d6d7[_0x503f83(0x37e)]);const _0x2fba6d=await _0x21d6d7['json'](),_0x5cf473=getGeminiResponseText(_0x2fba6d),_0x2f9ea5=_0x5cf473['replace'](/^```json\s*/,'')[_0x503f83(0x128a)](/```$/,''),_0x13e24=JSON[_0x503f83(0x4a0)](_0x2f9ea5);await _0x4abd86('请稍候...',_0x503f83(0x1004)+_0x13e24[_0x503f83(0xac0)]+_0x503f83(0xd02));const _0x51e873=_0x13e24[_0x503f83(0x556)](async _0x541ba8=>{const _0x25cffb=_0x503f83;let _0x25f67e=await _0x242c01(_0x541ba8[_0x25cffb(0x8bf)],_0x541ba8[_0x25cffb(0xc84)]);(!_0x25f67e||_0x25f67e[_0x25cffb(0xac0)]===0x0)&&(_0x25f67e=await _0x248f4e(_0x541ba8[_0x25cffb(0x8bf)]));if(_0x25f67e[_0x25cffb(0xac0)]>0x0)return _0xd2205d(_0x25f67e[0x0]);return console[_0x25cffb(0x7fa)](_0x25cffb(0x1566)+_0x541ba8[_0x25cffb(0x8bf)]+'\x20-\x20'+_0x541ba8[_0x25cffb(0xc84)]+'”'),null;}),_0x24bbda=(await Promise[_0x503f83(0x8ab)](_0x51e873))[_0x503f83(0xde7)](Boolean);_0x432fdd['simulatedMusicPlaylist']=_0x24bbda,await _0x372b85[_0x503f83(0x1260)]['put'](_0x432fdd),await _0x1d789c();}catch(_0x34535c){console[_0x503f83(0x52b)](_0x503f83(0x986),_0x34535c),await _0x4abd86('生成失败','无法生成歌单，请检查API配置或稍后再试。\x0a错误:\x20'+_0x34535c['message']);}}function _0x1d789c(){const _0x138006=_0x7c5117,_0x3dc49f=document[_0x138006(0xfa0)]('char-music-list');_0x3dc49f['innerHTML']='';if(!_0xfd9ebf)return;const _0x511f0b=_0x8f0871[_0x138006(0x1260)][_0xfd9ebf],_0x19dceb=_0x511f0b[_0x138006(0x72f)]||[];if(_0x19dceb[_0x138006(0xac0)]===0x0){_0x3dc49f['innerHTML']='<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20padding:\x2050px\x200;\x22>TA的歌单还是空的，<br>点击右上角刷新按钮生成一些歌曲吧！</p>';return;}_0x19dceb[_0x138006(0x458)]((_0x72feb3,_0x23cfca)=>{const _0x37986a=_0x138006,_0x40eaf2=document[_0x37986a(0xb4e)](_0x37986a(0xd53));_0x40eaf2['className']=_0x37986a(0x1408),_0x40eaf2[_0x37986a(0x1331)]=_0x37986a(0x13f9)+_0x72feb3[_0x37986a(0x435)]+_0x37986a(0x1431)+_0x72feb3[_0x37986a(0x1023)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22music-item-artist\x22>'+_0x72feb3[_0x37986a(0x27e)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x40eaf2['addEventListener'](_0x37986a(0xb4a),()=>_0x3f9caa(_0x72feb3)),_0x3dc49f[_0x37986a(0x1155)](_0x40eaf2);});}let _0x1e5e05={'currentPlaylist':[],'currentIndex':-0x1,'isPlaying':![],'playMode':'order','lrcUpdateInterval':null,'parsedLyrics':[],'currentLyricIndex':-0x1};function _0x3f9caa(_0x4bbd9f){const _0x35e088=_0x7c5117,_0x2a4a71=document[_0x35e088(0xfa0)]('char-audio-player'),_0x35cd2c=document[_0x35e088(0xfa0)](_0x35e088(0x184));if(_0x1e5e05[_0x35e088(0x1266)])clearInterval(_0x1e5e05['lrcUpdateInterval']);_0x2a4a71[_0x35e088(0x3a3)]();const _0x24bd3a=_0x1e5e05[_0x35e088(0x519)][_0x35e088(0xb22)](_0x4e8b98=>_0x4e8b98[_0x35e088(0x53e)]===_0x4bbd9f[_0x35e088(0x53e)]);_0x24bd3a>-0x1?_0x1e5e05[_0x35e088(0x715)]=_0x24bd3a:(_0x1e5e05[_0x35e088(0x519)]=[_0x4bbd9f],_0x1e5e05[_0x35e088(0x715)]=0x0);document[_0x35e088(0xfa0)](_0x35e088(0xbfc))[_0x35e088(0xc62)]=_0x4bbd9f[_0x35e088(0x1023)],document[_0x35e088(0xfa0)](_0x35e088(0xc56))[_0x35e088(0xc62)]=_0x4bbd9f[_0x35e088(0x27e)],document[_0x35e088(0xfa0)]('char-music-cover')[_0x35e088(0x53e)]=_0x4bbd9f[_0x35e088(0x435)],_0x1e5e05['parsedLyrics']=_0x2bc922(_0x4bbd9f[_0x35e088(0x140b)]||''),_0x2f6d09();if(_0x4bbd9f['isLocal']){const _0x1e8f3b=new Blob([_0x4bbd9f['src']],{'type':_0x4bbd9f[_0x35e088(0xa35)]||_0x35e088(0x137e)});_0x2a4a71[_0x35e088(0x53e)]=URL['createObjectURL'](_0x1e8f3b);}else _0x2a4a71[_0x35e088(0x53e)]=_0x4bbd9f[_0x35e088(0x53e)];_0x2a4a71[_0x35e088(0xfe3)]()[_0x35e088(0xe37)](_0x478cff=>console[_0x35e088(0x52b)](_0x35e088(0x13c4),_0x478cff)),_0x2a4a71[_0x35e088(0x40e)]=()=>{const _0x3278f7=_0x35e088;document[_0x3278f7(0xfa0)](_0x3278f7(0x116d))[_0x3278f7(0xc62)]=_0x404685(_0x2a4a71[_0x3278f7(0x11c7)]),_0x1e5e05[_0x3278f7(0x1266)]=setInterval(_0x475774,0x1f4);},_0x35cd2c[_0x35e088(0x128f)][_0x35e088(0x1327)](_0x35e088(0xdcc));}function _0x4c91b6(){const _0x530415=_0x7c5117,_0x527699=document[_0x530415(0xfa0)](_0x530415(0x184)),_0x28b242=document[_0x530415(0xfa0)]('char-audio-player');if(_0x1e5e05[_0x530415(0x1266)])clearInterval(_0x1e5e05[_0x530415(0x1266)]);_0x28b242[_0x530415(0x3a3)](),_0x28b242[_0x530415(0x53e)]='',_0x527699[_0x530415(0x128f)][_0x530415(0x443)](_0x530415(0xdcc)),_0x1e5e05[_0x530415(0xcc5)]=![],document['getElementById'](_0x530415(0x4ab))[_0x530415(0x128f)][_0x530415(0x443)](_0x530415(0xf5e));}function _0x475774(){const _0x4b9841=_0x7c5117,_0x358e52=document[_0x4b9841(0xfa0)]('char-audio-player');if(!_0x358e52['duration'])return;const _0x473858=_0x358e52[_0x4b9841(0x1495)],_0x5b4de6=_0x358e52['duration'];document['getElementById']('char-music-progress-fill')[_0x4b9841(0x63b)][_0x4b9841(0xa92)]=_0x473858/_0x5b4de6*0x64+'%',document[_0x4b9841(0xfa0)](_0x4b9841(0x617))[_0x4b9841(0xc62)]=_0x404685(_0x473858),_0x5d033a(_0x473858);}function _0x2f6d09(){const _0x300fb9=_0x7c5117,_0x473930=document[_0x300fb9(0xfa0)](_0x300fb9(0x494));_0x473930['innerHTML']='',_0x1e5e05['currentLyricIndex']=-0x1;if(!_0x1e5e05[_0x300fb9(0xbc6)]||_0x1e5e05['parsedLyrics'][_0x300fb9(0xac0)]===0x0){_0x473930[_0x300fb9(0x1331)]=_0x300fb9(0xea6);return;}_0x1e5e05['parsedLyrics']['forEach']((_0x57ae23,_0x5572b5)=>{const _0x3c5d60=_0x300fb9,_0x1c023f=document[_0x3c5d60(0xb4e)]('p');_0x1c023f[_0x3c5d60(0xc62)]=_0x57ae23[_0x3c5d60(0xda3)],_0x1c023f['dataset'][_0x3c5d60(0x874)]=_0x5572b5,_0x473930['appendChild'](_0x1c023f);});}function _0x5d033a(_0x423d99){const _0xab3b12=_0x7c5117,_0x23ed3d=_0x1e5e05[_0xab3b12(0xbc6)];if(_0x23ed3d['length']===0x0)return;let _0x4af16d=-0x1;for(let _0x406387=0x0;_0x406387<_0x23ed3d[_0xab3b12(0xac0)];_0x406387++){if(_0x423d99>=_0x23ed3d[_0x406387][_0xab3b12(0x1483)])_0x4af16d=_0x406387;else break;}if(_0x4af16d===_0x1e5e05[_0xab3b12(0x107a)])return;_0x1e5e05[_0xab3b12(0x107a)]=_0x4af16d;const _0x32e7c7=document[_0xab3b12(0xfa0)](_0xab3b12(0x494)),_0x50aa12=_0x32e7c7['querySelectorAll']('p');_0x50aa12[_0xab3b12(0x458)](_0x37f66d=>_0x37f66d[_0xab3b12(0x128f)][_0xab3b12(0x443)](_0xab3b12(0xa37)));if(_0x4af16d>-0x1){const _0x51be4f=_0x32e7c7[_0xab3b12(0xfb1)](_0xab3b12(0xf5f)+_0x4af16d+'\x22]');if(_0x51be4f){_0x51be4f[_0xab3b12(0x128f)]['add'](_0xab3b12(0xa37));const _0x5528e7=_0x32e7c7[_0xab3b12(0x144f)]/0x2-_0x51be4f['offsetTop']-_0x51be4f['offsetHeight']/0x2;_0x50aa12[_0xab3b12(0x458)](_0x10a9b4=>{const _0x27f236=_0xab3b12;_0x10a9b4[_0x27f236(0x63b)][_0x27f236(0x1268)]=_0x27f236(0xedf)+_0x5528e7+_0x27f236(0x116f);});}}}function _0x3a09ac(){const _0x23f5a7=_0x7c5117;if(_0x1e5e05[_0x23f5a7(0x519)][_0x23f5a7(0xac0)]===0x0)return;let _0x2fb0d1;switch(_0x1e5e05['playMode']){case _0x23f5a7(0x148a):_0x2fb0d1=Math[_0x23f5a7(0x13e5)](Math[_0x23f5a7(0x148a)]()*_0x1e5e05[_0x23f5a7(0x519)][_0x23f5a7(0xac0)]);break;case'single':_0x3f9caa(_0x1e5e05['currentPlaylist'][_0x1e5e05[_0x23f5a7(0x715)]]);return;case _0x23f5a7(0xc75):default:_0x2fb0d1=(_0x1e5e05['currentIndex']+0x1)%_0x1e5e05[_0x23f5a7(0x519)][_0x23f5a7(0xac0)];break;}_0x3f9caa(_0x1e5e05[_0x23f5a7(0x519)][_0x2fb0d1]);}function _0x565435(){const _0x98c3f5=_0x7c5117;if(_0x1e5e05[_0x98c3f5(0x519)][_0x98c3f5(0xac0)]===0x0)return;const _0x32b216=(_0x1e5e05['currentIndex']-0x1+_0x1e5e05[_0x98c3f5(0x519)][_0x98c3f5(0xac0)])%_0x1e5e05['currentPlaylist'][_0x98c3f5(0xac0)];_0x3f9caa(_0x1e5e05[_0x98c3f5(0x519)][_0x32b216]);}function _0x79367d(){const _0x3149a3=_0x7c5117,_0x5ba878=[_0x3149a3(0xc75),'random',_0x3149a3(0xf7a)],_0x578ec0=_0x5ba878[_0x3149a3(0xdf3)](_0x1e5e05[_0x3149a3(0xc6d)]);_0x1e5e05['playMode']=_0x5ba878[(_0x578ec0+0x1)%_0x5ba878[_0x3149a3(0xac0)]],document['getElementById'](_0x3149a3(0x1396))[_0x3149a3(0xc62)]={'order':'顺序','random':'随机','single':'单曲'}[_0x1e5e05[_0x3149a3(0xc6d)]];}function _0x50e005(){const _0x20e5e9=_0x7c5117,_0x490bcf=document[_0x20e5e9(0xfa0)]('char-audio-player'),_0x2a50d3=document[_0x20e5e9(0xfa0)](_0x20e5e9(0xe45)),_0x176e01=document['getElementById'](_0x20e5e9(0x4ab));_0x2a50d3[_0x20e5e9(0x7b8)](_0x20e5e9(0xb4a),()=>{const _0x303017=_0x20e5e9;if(_0x490bcf[_0x303017(0xab7)]){if(_0x1e5e05['currentIndex']>-0x1)_0x490bcf['play']();}else _0x490bcf['pause']();}),_0x490bcf[_0x20e5e9(0xdad)]=()=>{const _0x4f587e=_0x20e5e9;_0x2a50d3[_0x4f587e(0x1331)]='<svg\x20viewBox=\x220\x200\x2024\x2024\x22\x20width=\x2232\x22\x20height=\x2232\x22\x20fill=\x22currentColor\x22><path\x20d=\x22M6\x2019h4V5H6v14zm8-14v14h4V5h-4z\x22></path></svg>',_0x176e01[_0x4f587e(0x128f)][_0x4f587e(0x1327)](_0x4f587e(0xf5e)),_0x1e5e05['isPlaying']=!![];},_0x490bcf['onpause']=()=>{const _0xb9fe66=_0x20e5e9;_0x2a50d3[_0xb9fe66(0x1331)]=_0xb9fe66(0x51e),_0x176e01[_0xb9fe66(0x128f)][_0xb9fe66(0x443)](_0xb9fe66(0xf5e)),_0x1e5e05[_0xb9fe66(0xcc5)]=![];},_0x490bcf[_0x20e5e9(0x8f2)]=()=>{const _0xf46ae5=_0x20e5e9;_0x176e01[_0xf46ae5(0x128f)][_0xf46ae5(0x443)](_0xf46ae5(0xf5e)),_0x1e5e05[_0xf46ae5(0xcc5)]=![],_0x3a09ac();},document[_0x20e5e9(0xfa0)](_0x20e5e9(0x714))[_0x20e5e9(0x7b8)]('click',_0x565435),document['getElementById']('char-music-next-btn')[_0x20e5e9(0x7b8)](_0x20e5e9(0xb4a),_0x3a09ac),document['getElementById'](_0x20e5e9(0x1396))['addEventListener']('click',_0x79367d),document[_0x20e5e9(0xfa0)](_0x20e5e9(0x1508))['addEventListener'](_0x20e5e9(0xb4a),_0x56919a=>{const _0x5d3972=_0x20e5e9;if(!_0x490bcf[_0x5d3972(0x11c7)])return;const _0xa7b183=_0x56919a['currentTarget'],_0x22dd8d=_0x56919a[_0x5d3972(0x74b)];_0x490bcf['currentTime']=_0x22dd8d/_0xa7b183[_0x5d3972(0xa41)]*_0x490bcf['duration'];});}async function _0x3b95fd(){const _0x298c6c=_0x7c5117,_0x457a8d=document['getElementById'](_0x298c6c(0xf53));_0x457a8d[_0x298c6c(0x1331)]='';const _0x74858c=await _0x372b85[_0x298c6c(0x5ca)][_0x298c6c(0x1554)](_0x298c6c(0xe55))[_0x298c6c(0xaf5)]()[_0x298c6c(0x3bc)]();if(_0x74858c[_0x298c6c(0xac0)]===0x0){_0x457a8d[_0x298c6c(0x1331)]=_0x298c6c(0x9bd);return;}_0x74858c['forEach'](_0x44de9e=>{const _0x1401b9=_0x298c6c;let _0x3878c7;const _0x530f4b=_0x44de9e[_0x1401b9(0x432)]?Object[_0x1401b9(0x142f)](_0x8f0871[_0x1401b9(0x1260)])[_0x1401b9(0x7ed)](_0x469f2d=>!_0x469f2d[_0x1401b9(0x1364)]&&_0x469f2d[_0x1401b9(0x1023)]===_0x44de9e['authorOriginalName']):null;if(_0x530f4b)_0x3878c7=_0x530f4b[_0x1401b9(0x12d7)][_0x1401b9(0xce8)];else{const _0x477576=Object[_0x1401b9(0x142f)](_0x8f0871['chats'])[_0x1401b9(0x7ed)](_0x547f80=>!_0x547f80[_0x1401b9(0x1364)]&&_0x547f80['name']===_0x44de9e[_0x1401b9(0x4f3)]);if(_0x477576)_0x3878c7=_0x477576['settings'][_0x1401b9(0xce8)];else _0x44de9e[_0x1401b9(0x9bc)]?_0x3878c7=_0x1401b9(0xe88)+encodeURIComponent(_0x44de9e[_0x1401b9(0x9bc)]):_0x3878c7=_0x1a2fc1;}const _0x2a4176=document[_0x1401b9(0xb4e)](_0x1401b9(0xd53));_0x2a4176['className']='douban-post-item',_0x2a4176[_0x1401b9(0x9f0)]=()=>_0x4a4605(_0x44de9e['id']),_0x2a4176['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22douban-post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x3878c7+_0x1401b9(0x119d)+_0x44de9e['authorName']+_0x1401b9(0x10be)+_0x44de9e[_0x1401b9(0xecf)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22douban-post-title\x22>'+_0x44de9e[_0x1401b9(0xbfb)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22douban-post-content\x22>'+_0x44de9e[_0x1401b9(0x1469)][_0x1401b9(0x128a)](/\n/g,'<br>')+_0x1401b9(0x1379)+_0x44de9e['likesCount']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span><svg\x20viewBox=\x220\x200\x201024\x201024\x22><path\x20d=\x22M853.333333\x2085.333333H170.666667c-46.933333\x200-85.333333\x2038.4-85.333334\x2085.333334v512c0\x2046.933333\x2038.4\x2085.333333\x2085.333334\x2085.333333h512l170.666667\x20170.666667V170.666667c0-46.933333-38.4-85.333333-85.333334-85.333334z\x20m-42.666666\x20554.666667H170.666667V170.666667h640v469.333333zM256\x20384h512v85.333333H256V384z\x20m0-170.666667h512v85.333334H256v-85.333334z\x22></path></svg>\x20'+_0x44de9e[_0x1401b9(0x228)]+_0x1401b9(0x12dd)+_0x2368ae(_0x44de9e['timestamp'])+_0x1401b9(0x3fd),_0x457a8d[_0x1401b9(0x1155)](_0x2a4176);});}async function _0x444351(){const _0x408f75=_0x7c5117,_0xddf6d7=_0x8f0871['globalSettings']['doubanActiveCharacterIds']||[];if(_0xddf6d7['length']===0x0){await _0x4abd86('请先选择角色',_0x408f75(0xeef));return;}await _0x4abd86(_0x408f75(0x3e1),_0x408f75(0x78f)+_0xddf6d7['length']+_0x408f75(0x420));const {proxyUrl:_0xf6ce21,apiKey:_0x576f4b,model:_0x1e49c8}=_0x8f0871[_0x408f75(0xa78)];if(!_0xf6ce21||!_0x576f4b||!_0x1e49c8){alert(_0x408f75(0x322));return;}const _0x15bbd4=new Set();_0xddf6d7['forEach'](_0x5495f4=>{const _0xea4c14=_0x408f75,_0x3810f0=_0x8f0871['chats'][_0x5495f4];_0x3810f0&&_0x3810f0['settings'][_0xea4c14(0xaaf)]&&_0x3810f0['settings'][_0xea4c14(0xaaf)]['forEach'](_0x1047a4=>_0x15bbd4[_0xea4c14(0x1327)](_0x1047a4));});let _0x5ef534='';_0x15bbd4['size']>0x0&&(_0x5ef534+='\x0a\x0a#\x20统一世界观设定\x20(以下设定适用于所有参与角色)\x0a',_0x15bbd4[_0x408f75(0x458)](_0x26d845=>{const _0x4d59a9=_0x408f75,_0xb1efa1=_0x8f0871[_0x4d59a9(0x739)]['find'](_0x4e048a=>_0x4e048a['id']===_0x26d845);if(_0xb1efa1){const _0x2c5c28=_0xb1efa1[_0x4d59a9(0x1469)][_0x4d59a9(0xde7)](_0x454099=>_0x454099[_0x4d59a9(0x7af)]!==![])[_0x4d59a9(0x556)](_0x13097c=>'-\x20'+_0x13097c[_0x4d59a9(0x1469)])[_0x4d59a9(0xcc2)]('\x0a');_0x2c5c28&&(_0x5ef534+='\x0a##\x20来自《'+_0xb1efa1['name']+_0x4d59a9(0xab2)+_0x2c5c28);}}));const _0x3f08c3=_0x8f0871['worldBooks']['find'](_0x6b775b=>_0x6b775b[_0x408f75(0x1023)]===_0x408f75(0x8a6));let _0x68b61f='',_0x2772fd=[];_0x3f08c3&&_0x3f08c3[_0x408f75(0x1469)][_0x408f75(0x458)](_0x55126e=>{const _0x3bd4a3=_0x408f75;_0x55126e[_0x3bd4a3(0x7ab)][_0x3bd4a3(0xf95)](_0x3bd4a3(0xb57))&&(_0x68b61f+=_0x3bd4a3(0x1278)+_0x55126e[_0x3bd4a3(0x1469)]);if(_0x55126e[_0x3bd4a3(0x7ab)][_0x3bd4a3(0xf95)](_0x3bd4a3(0xe27))){const _0xd356c7=_0x55126e[_0x3bd4a3(0x1469)][_0x3bd4a3(0x505)]('\x0a');_0xd356c7[_0x3bd4a3(0x458)](_0x387145=>{const _0x4e859b=_0x3bd4a3,_0x39c9c8=_0x387145[_0x4e859b(0x1232)](/- \*\*昵称\*\*:\s*(.*?)\s*\*\*人设\*\*:\s*(.*)/);_0x39c9c8&&_0x2772fd[_0x4e859b(0x481)]({'name':_0x39c9c8[0x1]['trim'](),'persona':_0x39c9c8[0x2][_0x4e859b(0xa06)]()});});}});const _0x213dca=_0x8f0871[_0x408f75(0x9dd)]['nickname']||'我',_0x4117cf=_0xddf6d7[_0x408f75(0xac0)]>0x0&&_0x8f0871[_0x408f75(0x1260)][_0xddf6d7[0x0]]?_0x8f0871[_0x408f75(0x1260)][_0xddf6d7[0x0]][_0x408f75(0x12d7)][_0x408f75(0xbbe)]:_0x408f75(0x7e1);let _0x5ceaae='';_0xddf6d7[_0x408f75(0x458)](_0x2dd459=>{const _0x32ba2e=_0x408f75,_0x1fbaed=_0x8f0871['chats'][_0x2dd459];if(_0x1fbaed){const _0x15a4e7=_0x1fbaed[_0x32ba2e(0x1312)]&&_0x1fbaed[_0x32ba2e(0x1312)][_0x32ba2e(0xac0)]>0x0?_0x1fbaed['longTermMemory'][_0x32ba2e(0x556)](_0x9792ce=>_0x9792ce[_0x32ba2e(0x1469)])[_0x32ba2e(0xcc2)](';\x20'):'无',_0x59a0b6=_0x1fbaed[_0x32ba2e(0xc88)][_0x32ba2e(0x59f)](-0xa)[_0x32ba2e(0x556)](_0x15e792=>(_0x15e792[_0x32ba2e(0xc92)]===_0x32ba2e(0xcb0)?_0x213dca:_0x1fbaed[_0x32ba2e(0x1023)])+':\x20'+String(_0x15e792['content'])[_0x32ba2e(0x9fe)](0x0,0x1e)+_0x32ba2e(0x1111))[_0x32ba2e(0xcc2)]('\x0a');_0x5ceaae+=_0x32ba2e(0x1194)+_0x1fbaed[_0x32ba2e(0x1023)]+_0x32ba2e(0xbcc)+_0x1fbaed['settings'][_0x32ba2e(0x200)]+_0x32ba2e(0x8a1)+_0x15a4e7+_0x32ba2e(0x11cf)+_0x59a0b6+_0x32ba2e(0x71a);}}),_0x2772fd[_0x408f75(0x458)](_0x53d9ca=>{const _0x211197=_0x408f75;_0x5ceaae+=_0x211197(0x1194)+_0x53d9ca[_0x211197(0x1023)]+_0x211197(0xbcc)+_0x53d9ca[_0x211197(0x3fa)]+'</persona>\x0a</character>\x0a';});const _0x4fb0bc=new Date(),_0x51ad38=_0x4fb0bc['toLocaleString'](_0x408f75(0xb43),{'dateStyle':_0x408f75(0x11da),'timeStyle':_0x408f75(0x249)}),_0x201535=_0x8f0871[_0x408f75(0x7b0)][_0x408f75(0xf17)]||0xc,_0x594bbc=_0x8f0871[_0x408f75(0x7b0)][_0x408f75(0xdc6)]||0x14,_0x276b60='\x0a#\x20你的任务\x0a你是一个虚拟社区内容生成器。你的任务是根据下面提供的【统一角色列表】，虚构出【'+_0x201535+'到'+_0x594bbc+_0x408f75(0xf1b)+_0x51ad38+_0x408f75(0x14a6)+_0x213dca+_0x408f75(0xedd)+_0x213dca+_0x408f75(0xb18)+_0x68b61f+'\x0a'+_0x5ef534+_0x408f75(0xb41)+_0x51ad38+_0x408f75(0xebc)+_0x213dca+_0x408f75(0x10ec)+_0x4117cf+_0x408f75(0xa93)+_0x5ceaae+_0x408f75(0x1152);try{const _0x2e45bf=[{'role':'user','content':'请根据角色列表，生成豆瓣小组帖子。'}];let _0x3f8004=_0xf6ce21['includes']('generativelanguage'),_0x2d37b1=_0x1e2f27(_0x1e49c8,_0x576f4b,_0x276b60,_0x2e45bf);const _0x1736ec=_0x3f8004?await fetch(_0x2d37b1[_0x408f75(0x3f5)],_0x2d37b1[_0x408f75(0x3cc)]):await fetch(_0xf6ce21+_0x408f75(0x1011),{'method':_0x408f75(0xb67),'headers':{'Content-Type':'application/json','Authorization':_0x408f75(0x681)+_0x576f4b},'body':JSON[_0x408f75(0x7cc)]({'model':_0x1e49c8,'messages':[{'role':_0x408f75(0x1417),'content':_0x276b60},..._0x2e45bf],'temperature':_0x8f0871[_0x408f75(0x7b0)][_0x408f75(0x14a5)]||0x1})});if(!_0x1736ec['ok'])throw new Error(_0x408f75(0x395)+_0x1736ec[_0x408f75(0x37e)]);const _0x1bf413=await _0x1736ec['json'](),_0xcbcb64=getGeminiResponseText(_0x1bf413),_0x51e171=_0xcbcb64[_0x408f75(0x1232)](/\[[\s\S]*\]/);if(!_0x51e171)throw new Error(_0x408f75(0x1234)+_0xcbcb64);const _0xa06ecf=JSON[_0x408f75(0x4a0)](_0x51e171[0x0]);await _0x372b85[_0x408f75(0x5ca)]['clear'](),await _0x372b85[_0x408f75(0x5ca)]['bulkAdd'](_0xa06ecf[_0x408f75(0x556)](_0x485516=>({..._0x485516,'timestamp':Date[_0x408f75(0xc22)]()-Math[_0x408f75(0x148a)]()*0x186a0}))),await _0x3b95fd();}catch(_0xdcc0bd){console[_0x408f75(0x52b)](_0x408f75(0x1393),_0xdcc0bd),await _0x4abd86('生成失败',_0x408f75(0x6d6)+_0xdcc0bd[_0x408f75(0x790)]);}}async function _0x4a4605(_0x3258ba){const _0x1eae42=_0x7c5117;_0x2d25e5(_0x1eae42(0x7cf)),_0x52f18f=_0x3258ba;const _0x18dda7=await _0x372b85[_0x1eae42(0x5ca)][_0x1eae42(0x70d)](_0x3258ba);if(!_0x18dda7){_0x2d25e5(_0x1eae42(0xbe7));return;}document['getElementById']('douban-post-detail-title')[_0x1eae42(0xc62)]=_0x1eae42(0xba0);let _0x401e5a=_0x1a2fc1,_0x2f8924=_0x18dda7[_0x1eae42(0x4f3)];const _0x5ab8fe=_0x18dda7[_0x1eae42(0x432)]?Object[_0x1eae42(0x142f)](_0x8f0871[_0x1eae42(0x1260)])['find'](_0xe58a74=>!_0xe58a74['isGroup']&&_0xe58a74[_0x1eae42(0x93e)]===_0x18dda7[_0x1eae42(0x432)]):null;if(_0x5ab8fe)_0x401e5a=_0x5ab8fe[_0x1eae42(0x12d7)][_0x1eae42(0xce8)];else{const _0x2bdbab=Object[_0x1eae42(0x142f)](_0x8f0871[_0x1eae42(0x1260)])[_0x1eae42(0x7ed)](_0x2f3085=>!_0x2f3085[_0x1eae42(0x1364)]&&_0x2f3085['name']===_0x18dda7[_0x1eae42(0x4f3)]);if(_0x2bdbab)_0x401e5a=_0x2bdbab[_0x1eae42(0x12d7)][_0x1eae42(0xce8)];else _0x18dda7['authorAvatarPrompt']&&(_0x401e5a=_0x1eae42(0xe88)+encodeURIComponent(_0x18dda7['authorAvatarPrompt']));}document[_0x1eae42(0xfa0)](_0x1eae42(0x33d))[_0x1eae42(0x53e)]=_0x401e5a,document[_0x1eae42(0xfa0)](_0x1eae42(0x990))[_0x1eae42(0xc62)]=_0x2f8924,document[_0x1eae42(0xfa0)](_0x1eae42(0x932))[_0x1eae42(0xc62)]=_0x1eae42(0xf0d)+_0x18dda7['groupName'],document['getElementById'](_0x1eae42(0x23a))[_0x1eae42(0xc62)]=_0x18dda7['postTitle'],document[_0x1eae42(0xfa0)]('douban-detail-content')[_0x1eae42(0x1331)]=_0x18dda7[_0x1eae42(0x1469)][_0x1eae42(0x128a)](/\n/g,_0x1eae42(0xd59)),document[_0x1eae42(0xfa0)](_0x1eae42(0xf6c))[_0x1eae42(0x53e)]=_0x8f0871[_0x1eae42(0x9dd)][_0x1eae42(0xc61)],document[_0x1eae42(0xfa0)](_0x1eae42(0x139b))[_0x1eae42(0x4f6)]='';const _0x2e88b6=document[_0x1eae42(0xfa0)](_0x1eae42(0xb53));_0x2e88b6[_0x1eae42(0x1331)]='';if(_0x18dda7[_0x1eae42(0xbab)]&&_0x18dda7[_0x1eae42(0xbab)][_0x1eae42(0xac0)]>0x0){const _0x4571e6=new Map();_0x18dda7[_0x1eae42(0xbab)]['forEach'](_0xca58f3=>{const _0x55e76b=_0x1eae42;let _0x2d9a7a=_0x1a2fc1;const _0x21c89c=_0x8f0871['qzoneSettings']['nickname']||'我',_0x26834d=_0xca58f3[_0x55e76b(0x1097)];if(_0x4571e6[_0x55e76b(0xd58)](_0x26834d))_0x2d9a7a=_0x4571e6[_0x55e76b(0x70d)](_0x26834d);else{if(_0x26834d===_0x21c89c)_0x2d9a7a=_0x8f0871[_0x55e76b(0x9dd)][_0x55e76b(0xc61)];else{if(_0x26834d===_0x18dda7[_0x55e76b(0x4f3)])_0x2d9a7a=_0x401e5a;else{const _0x421eb0=_0xca58f3[_0x55e76b(0x584)]?Object['values'](_0x8f0871['chats'])[_0x55e76b(0x7ed)](_0xbf193=>!_0xbf193[_0x55e76b(0x1364)]&&_0xbf193[_0x55e76b(0x93e)]===_0xca58f3[_0x55e76b(0x584)]):null;if(_0x421eb0)_0x2d9a7a=_0x421eb0[_0x55e76b(0x12d7)][_0x55e76b(0xce8)];else{const _0x28b4cf=Object[_0x55e76b(0x142f)](_0x8f0871[_0x55e76b(0x1260)])[_0x55e76b(0x7ed)](_0x46ca07=>!_0x46ca07[_0x55e76b(0x1364)]&&_0x46ca07[_0x55e76b(0x1023)]===_0x26834d);if(_0x28b4cf)_0x2d9a7a=_0x28b4cf[_0x55e76b(0x12d7)][_0x55e76b(0xce8)];else _0xca58f3[_0x55e76b(0xa2a)]&&(_0x2d9a7a=_0x55e76b(0xe88)+encodeURIComponent(_0xca58f3[_0x55e76b(0xa2a)]));}}}_0x4571e6[_0x55e76b(0xe5d)](_0x26834d,_0x2d9a7a);}const _0x527898=document['createElement'](_0x55e76b(0xd53));_0x527898['className']=_0x55e76b(0x1e9),_0x527898[_0x55e76b(0x1331)]=_0x55e76b(0x1352)+_0x2d9a7a+_0x55e76b(0x939)+_0x26834d+_0x55e76b(0x4fc)+_0xca58f3[_0x55e76b(0xda3)][_0x55e76b(0x128a)](/\n/g,_0x55e76b(0xd59))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2e88b6[_0x55e76b(0x1155)](_0x527898);});}else _0x2e88b6[_0x1eae42(0x1331)]=_0x1eae42(0x841);const _0x319407=document[_0x1eae42(0xfa0)](_0x1eae42(0xefd));if(_0x319407)_0x319407[_0x1eae42(0x54d)]=0x0;}async function _0x274674(){const _0x208f5b=_0x7c5117;if(!_0x52f18f)return;const _0x5c16fe=document[_0x208f5b(0xfa0)](_0x208f5b(0x139b)),_0x35e971=_0x5c16fe[_0x208f5b(0x4f6)][_0x208f5b(0xa06)]();if(!_0x35e971)return;const _0x300f4e=await _0x372b85[_0x208f5b(0x5ca)]['get'](_0x52f18f);if(!_0x300f4e)return;!_0x300f4e['comments']&&(_0x300f4e[_0x208f5b(0xbab)]=[]);const _0xdaa031=_0x8f0871[_0x208f5b(0x9dd)][_0x208f5b(0xff8)]||'我';_0x300f4e[_0x208f5b(0xbab)][_0x208f5b(0x481)]({'commenter':_0xdaa031,'text':_0x35e971}),_0x300f4e[_0x208f5b(0x228)]++,await _0x372b85['doubanPosts'][_0x208f5b(0x11d5)](_0x300f4e),_0x5c16fe[_0x208f5b(0x4f6)]='',await _0x4a4605(_0x52f18f);}async function _0x297ac9(){const _0x4e7261=_0x7c5117;if(!_0x52f18f)return;const _0x28996d=_0x52f18f,_0x569601=await _0x372b85[_0x4e7261(0x5ca)][_0x4e7261(0x70d)](_0x28996d);if(!_0x569601)return;const _0x42e5c4=_0x569601['comments']&&_0x569601[_0x4e7261(0xbab)][_0x4e7261(0x59f)](-0x1)[0x0];if(!_0x42e5c4){alert(_0x4e7261(0x796));return;}await _0x4abd86(_0x4e7261(0x3e1),_0x4e7261(0x104d));try{const {proxyUrl:_0x34fc9b,apiKey:_0x1e8655,model:_0x4a1a3a}=_0x8f0871[_0x4e7261(0xa78)];if(!_0x34fc9b||!_0x1e8655||!_0x4a1a3a)throw new Error(_0x4e7261(0x67e));const _0x219082=_0x8f0871[_0x4e7261(0x9dd)][_0x4e7261(0xff8)]||'我',_0x521969=_0x8f0871[_0x4e7261(0x1260)][Object['keys'](_0x8f0871[_0x4e7261(0x1260)])[0x0]]?.[_0x4e7261(0x12d7)]['myPersona']||_0x4e7261(0x7e1),_0x27d20f=new Map();_0x569601[_0x4e7261(0xbab)]&&_0x569601['comments']['forEach'](_0x24ae19=>{const _0x5f5bc0=_0x4e7261,_0x1ebff7=(_0x8f0871['globalSettings'][_0x5f5bc0(0x10ea)]||[])['some'](_0x51b961=>_0x8f0871[_0x5f5bc0(0x1260)][_0x51b961]?.[_0x5f5bc0(0x1023)]===_0x24ae19[_0x5f5bc0(0x1097)]);!_0x1ebff7&&_0x24ae19[_0x5f5bc0(0xa2a)]&&_0x27d20f['set'](_0x24ae19[_0x5f5bc0(0x1097)],_0x24ae19['avatar_prompt']);});let _0x43754f=_0x4e7261(0x154d);_0x27d20f[_0x4e7261(0xbc3)]>0x0?(_0x43754f+=_0x4e7261(0x109f),_0x27d20f[_0x4e7261(0x458)]((_0x45dbfe,_0x5d4c09)=>{const _0x290c43=_0x4e7261;_0x43754f+=_0x290c43(0x6d2)+_0x5d4c09+_0x290c43(0xdc4)+_0x45dbfe+'\x22\x0a';})):_0x43754f+=_0x4e7261(0x13fe);const _0x3df5db=_0x8f0871[_0x4e7261(0x739)][_0x4e7261(0x7ed)](_0x15b016=>_0x15b016['name']===_0x4e7261(0x8a6));let _0x4fb678=[];_0x3df5db&&_0x3df5db[_0x4e7261(0x1469)]['forEach'](_0x3fa851=>{const _0x5eadf0=_0x4e7261;if(_0x3fa851[_0x5eadf0(0x7ab)][_0x5eadf0(0xf95)](_0x5eadf0(0xe27))){const _0x3ed148=_0x3fa851[_0x5eadf0(0x1469)][_0x5eadf0(0x505)]('\x0a');_0x3ed148['forEach'](_0x55adc2=>{const _0x5a66ca=_0x5eadf0,_0x3fd9fb=_0x55adc2['match'](/- \*\*昵称\*\*:\s*(.*?)\s*\*\*人设\*\*:\s*(.*)/);_0x3fd9fb&&_0x4fb678[_0x5a66ca(0x481)]({'name':_0x3fd9fb[0x1][_0x5a66ca(0xa06)](),'persona':_0x3fd9fb[0x2][_0x5a66ca(0xa06)]()});});}});let _0x2ac6e3='';const _0x3ab2f5=_0x8f0871[_0x4e7261(0x7b0)][_0x4e7261(0x10ea)]||[];_0x3ab2f5['forEach'](_0x36aca9=>{const _0x4b6467=_0x4e7261,_0x4d19c5=_0x8f0871[_0x4b6467(0x1260)][_0x36aca9];if(_0x4d19c5){const _0x3b7efa=_0x4d19c5['longTermMemory']&&_0x4d19c5[_0x4b6467(0x1312)][_0x4b6467(0xac0)]>0x0?_0x4d19c5[_0x4b6467(0x1312)]['map'](_0x5b2215=>_0x5b2215[_0x4b6467(0x1469)])[_0x4b6467(0xcc2)](';\x20'):'无',_0x102b46=_0x4d19c5[_0x4b6467(0xc88)][_0x4b6467(0x59f)](-0xa)[_0x4b6467(0x556)](_0x285467=>(_0x285467[_0x4b6467(0xc92)]===_0x4b6467(0xcb0)?_0x219082:_0x4d19c5[_0x4b6467(0x1023)])+':\x20'+String(_0x285467[_0x4b6467(0x1469)])['substring'](0x0,0x1e)+'...')[_0x4b6467(0xcc2)]('\x0a');_0x2ac6e3+=_0x4b6467(0x76b)+_0x4d19c5[_0x4b6467(0x1023)]+':\x20'+_0x4d19c5[_0x4b6467(0x12d7)][_0x4b6467(0x200)][_0x4b6467(0x9fe)](0x0,0x32)+_0x4b6467(0x11cd)+_0x3b7efa+_0x4b6467(0x14af)+_0x102b46+']';}}),_0x4fb678[_0x4e7261(0x458)](_0x35c451=>{const _0x2edd90=_0x4e7261;_0x2ac6e3+=_0x2edd90(0x76b)+_0x35c451[_0x2edd90(0x1023)]+':\x20'+_0x35c451[_0x2edd90(0x3fa)];});const _0x2f0cdb=new Date(),_0x2e471a=_0x2f0cdb[_0x4e7261(0x10de)](_0x4e7261(0xb43),{'dateStyle':_0x4e7261(0x11da),'timeStyle':_0x4e7261(0x249)}),_0x4c190d=_0x4e7261(0x66b)+_0x219082+_0x4e7261(0x759)+_0x2e471a+'**。\x0a\x20\x20\x20\x20-\x20\x20\x20你的评论内容【必须】自然地体现出对【当前真实时间】的感知。\x0a2.\x20\x20**【禁止扮演用户\x20(最最最高优先级！！！)】**:\x0a\x20\x20\x20\x20-\x20\x20\x20用户的昵称是“'+_0x219082+_0x4e7261(0xd1d)+_0x219082+_0x4e7261(0xa20)+_0x569601['postTitle']+_0x4e7261(0x7b9)+_0x569601[_0x4e7261(0x4f3)]+_0x4e7261(0x11b0)+_0x569601['content'][_0x4e7261(0x9fe)](0x0,0x64)+_0x4e7261(0x247)+_0x569601[_0x4e7261(0xbab)]['map'](_0x1c678c=>'-\x20'+_0x1c678c[_0x4e7261(0x1097)]+':\x20'+_0x1c678c[_0x4e7261(0xda3)])['join']('\x0a')+'\x0a\x0a'+_0x43754f+_0x4e7261(0xb41)+_0x2e471a+_0x4e7261(0xbf4)+_0x219082+_0x4e7261(0x10ec)+_0x521969+_0x4e7261(0x1412)+_0x2ac6e3+'\x0a\x0a现在，请生成新的评论。',_0x59a779=[{'role':'user','content':_0x4e7261(0xce9)}];let _0x4453f1=_0x34fc9b[_0x4e7261(0xf95)](_0x4e7261(0x9a5)),_0x106881=_0x1e2f27(_0x4a1a3a,_0x1e8655,_0x4c190d,_0x59a779);const _0x14bf46=_0x4453f1?await fetch(_0x106881[_0x4e7261(0x3f5)],_0x106881['data']):await fetch(_0x34fc9b+_0x4e7261(0x1011),{'method':'POST','headers':{'Content-Type':_0x4e7261(0x4b5),'Authorization':_0x4e7261(0x681)+_0x1e8655},'body':JSON['stringify']({'model':_0x4a1a3a,'messages':[{'role':'system','content':_0x4c190d},..._0x59a779],'temperature':_0x8f0871[_0x4e7261(0x7b0)][_0x4e7261(0x14a5)]||0x1})});if(!_0x14bf46['ok'])throw new Error(_0x4e7261(0x395)+_0x14bf46['statusText']);const _0x30c85d=await _0x14bf46[_0x4e7261(0xa2e)](),_0x14fab4=getGeminiResponseText(_0x30c85d),_0xe7c3fa=_0x14fab4['replace'](/^```json\s*/,'')[_0x4e7261(0x128a)](/```$/,''),_0x41c223=JSON['parse'](_0xe7c3fa);Array[_0x4e7261(0x345)](_0x41c223)&&_0x41c223[_0x4e7261(0xac0)]>0x0&&(_0x569601['comments'][_0x4e7261(0x481)](..._0x41c223),_0x569601['commentsCount']+=_0x41c223['length'],await _0x372b85[_0x4e7261(0x5ca)][_0x4e7261(0x11d5)](_0x569601)),await _0x4a4605(_0x28996d),_0x117f1e();}catch(_0x47ec62){console[_0x4e7261(0x52b)]('等待回复失败:',_0x47ec62),await _0x4abd86(_0x4e7261(0x457),_0x4e7261(0x122b)+_0x47ec62[_0x4e7261(0x790)]);}}async function _0x362430(){const _0x285880=_0x7c5117,_0x128418=document[_0x285880(0xfa0)](_0x285880(0x348)),_0x5f2d7f=document[_0x285880(0xfa0)](_0x285880(0x493));_0x5f2d7f[_0x285880(0x1331)]='';const _0x414f33=Object[_0x285880(0x142f)](_0x8f0871[_0x285880(0x1260)])[_0x285880(0xde7)](_0xd73b7b=>!_0xd73b7b[_0x285880(0x1364)]),_0x1b4d02=new Set(_0x8f0871[_0x285880(0x7b0)]['doubanActiveCharacterIds']||[]);_0x414f33['length']===0x0?_0x5f2d7f[_0x285880(0x1331)]=_0x285880(0x10e9):_0x414f33[_0x285880(0x458)](_0x113836=>{const _0x170017=_0x285880,_0x3a526e=document[_0x170017(0xb4e)](_0x170017(0xd53));_0x3a526e[_0x170017(0x1287)]=_0x170017(0x632),_0x3a526e[_0x170017(0x1331)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22douban-cast-checkbox\x22\x20data-chat-id=\x22'+_0x113836['id']+'\x22\x20'+(_0x1b4d02[_0x170017(0xd58)](_0x113836['id'])?_0x170017(0xb34):'')+'\x20style=\x22margin-right:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x113836[_0x170017(0x12d7)][_0x170017(0xce8)]||_0x1a2fc1)+_0x170017(0xe51)+_0x113836[_0x170017(0x1023)]+_0x170017(0x257),_0x5f2d7f[_0x170017(0x1155)](_0x3a526e);}),_0x128418[_0x285880(0x128f)][_0x285880(0x1327)](_0x285880(0xdcc));}async function _0x2121b6(){const _0x2fc51a=_0x7c5117,_0x1f1fc3=document['querySelectorAll']('#douban-cast-list\x20.douban-cast-checkbox:checked'),_0x1fdf74=Array['from'](_0x1f1fc3)[_0x2fc51a(0x556)](_0x5cfe95=>_0x5cfe95[_0x2fc51a(0x8df)][_0x2fc51a(0xe94)]);_0x8f0871[_0x2fc51a(0x7b0)]['doubanActiveCharacterIds']=_0x1fdf74,await _0x372b85['globalSettings'][_0x2fc51a(0x11d5)](_0x8f0871[_0x2fc51a(0x7b0)]),document[_0x2fc51a(0xfa0)](_0x2fc51a(0x348))[_0x2fc51a(0x128f)][_0x2fc51a(0x443)](_0x2fc51a(0xdcc)),await _0x444351();}document[_0x7c5117(0xfa0)](_0x7c5117(0x1450))[_0x7c5117(0x7b8)]('click',_0x362430),document[_0x7c5117(0xfa0)](_0x7c5117(0x11cb))[_0x7c5117(0x7b8)](_0x7c5117(0xb4a),()=>{const _0xa36a70=_0x7c5117;document[_0xa36a70(0xfa0)](_0xa36a70(0x348))[_0xa36a70(0x128f)][_0xa36a70(0x443)](_0xa36a70(0xdcc));}),document[_0x7c5117(0xfa0)]('save-douban-cast-btn')[_0x7c5117(0x7b8)](_0x7c5117(0xb4a),_0x2121b6),document[_0x7c5117(0xfa0)](_0x7c5117(0x493))[_0x7c5117(0x7b8)](_0x7c5117(0xb4a),_0x6c234e=>{const _0x13e32f=_0x7c5117,_0x291f9a=_0x6c234e[_0x13e32f(0x10c2)]['closest']('.contact-picker-item');if(_0x291f9a){const _0x19e501=_0x291f9a[_0x13e32f(0xfb1)](_0x13e32f(0x2dc));_0x19e501&&_0x6c234e[_0x13e32f(0x10c2)]!==_0x19e501&&(_0x19e501[_0x13e32f(0xb34)]=!_0x19e501[_0x13e32f(0xb34)]);}});async function _0x24cea1(_0x45aca4){const _0x245410=_0x7c5117;if(!_0x45aca4)return;const _0x2bcf9a=await _0x3f65ed('导入外观设置',_0x245410(0x4e9),{'confirmText':_0x245410(0xb8a)});if(!_0x2bcf9a)return;try{const _0xb99c6d=await _0x45aca4['text'](),_0x895aa9=JSON[_0x245410(0x4a0)](_0xb99c6d);if(!_0x895aa9['wallpaper']&&!_0x895aa9[_0x245410(0x901)]&&!_0x895aa9[_0x245410(0x544)])throw new Error(_0x245410(0x4c5));Object['assign'](_0x8f0871[_0x245410(0x7b0)],_0x895aa9),await _0x372b85[_0x245410(0x7b0)]['put'](_0x8f0871[_0x245410(0x7b0)]),_0x22b1db(),_0x4fca03(),_0x5c238f(),_0x57ce71(),_0xcbf629(_0x8f0871[_0x245410(0x7b0)][_0x245410(0x901)]),_0x2dccde(_0x8f0871['globalSettings']['fontUrl']),_0x34979a(),_0x5aedc2(),_0x147987(),await _0x4abd86(_0x245410(0x1471),_0x245410(0x7fc));}catch(_0x2e8258){console[_0x245410(0x52b)](_0x245410(0x942),_0x2e8258),await _0x4abd86(_0x245410(0x11c5),_0x245410(0x6b8)+_0x2e8258[_0x245410(0x790)]);}}async function _0x2911d4(_0x4cbe85){const _0x4868e1=_0x7c5117;console[_0x4868e1(0x4ee)](_0x4868e1(0x546)+_0x4cbe85[_0x4868e1(0x3b8)](0x1)+'\x20分钟，开始模拟后台活动...');const _0x1919d4=Object[_0x4868e1(0x142f)](_0x8f0871[_0x4868e1(0x1260)])[_0x4868e1(0xde7)](_0x1d0772=>!_0x1d0772['isGroup']&&_0x1d0772['settings']['enableBackgroundActivity']&&_0x1d0772[_0x4868e1(0x1171)]?.[_0x4868e1(0x103e)]===_0x4868e1(0x14b5));if(_0x1919d4['length']===0x0){console[_0x4868e1(0x4ee)](_0x4868e1(0x1223));return;}for(const _0x17cbb2 of _0x1919d4){const _0x136164=_0x17cbb2['settings'][_0x4868e1(0x1158)]||0xf,_0x18bf5f=_0x17cbb2[_0x4868e1(0xecc)]?(Date[_0x4868e1(0xc22)]()-_0x17cbb2[_0x4868e1(0xecc)])/(0x3e8*0x3c):Infinity;_0x4cbe85>_0x136164&&_0x18bf5f>_0x136164&&(Math[_0x4868e1(0x148a)]()<0.3&&(console['log'](_0x4868e1(0xc1d)+_0x17cbb2['name']+_0x4868e1(0xec7)),Math[_0x4868e1(0x148a)]()<0.7?await _0x4dc163(_0x17cbb2['id']):console[_0x4868e1(0x4ee)](_0x4868e1(0xc1d)+_0x17cbb2[_0x4868e1(0x1023)]+_0x4868e1(0x263))));}}function _0x13f0e7(){const _0x5e1af2=_0x7c5117;if(!_0x8f0871[_0x5e1af2(0xac8)])return;const _0x5ec073=_0x8f0871[_0x5e1af2(0x1260)][_0x8f0871['activeChatId']];document['getElementById'](_0x5e1af2(0x575))[_0x5e1af2(0x4f6)]='',document['getElementById'](_0x5e1af2(0x8d2))[_0x5e1af2(0x4f6)]='',document[_0x5e1af2(0xfa0)]('chat-search-results-list')['innerHTML']=_0x5e1af2(0xbcf),_0x2d25e5('search-history-screen');}async function _0x17d36b(){const _0x137ee4=_0x7c5117,_0xd42b22=_0x8f0871['chats'][_0x8f0871[_0x137ee4(0xac8)]];if(!_0xd42b22)return;const _0x506a3d=document[_0x137ee4(0xfa0)]('keyword-search-input')[_0x137ee4(0x4f6)]['trim']()[_0x137ee4(0x1f3)](),_0x317ee3=document[_0x137ee4(0xfa0)](_0x137ee4(0x8d2))[_0x137ee4(0x4f6)];if(!_0x506a3d&&!_0x317ee3){alert(_0x137ee4(0xab6));return;}let _0x1d1b90=_0xd42b22[_0x137ee4(0xc88)][_0x137ee4(0xde7)](_0xc833cf=>!_0xc833cf['isHidden']);_0x506a3d&&(_0x1d1b90=_0x1d1b90[_0x137ee4(0xde7)](_0x147e5a=>{const _0x43d8c=_0x137ee4;let _0x327f7e='';if(typeof _0x147e5a[_0x43d8c(0x1469)]==='string')_0x327f7e=_0x147e5a[_0x43d8c(0x1469)];else{if(_0x147e5a['type']===_0x43d8c(0x412))_0x327f7e=_0x147e5a[_0x43d8c(0x1469)];else{if(_0x147e5a['type']==='ai_image'||_0x147e5a['type']===_0x43d8c(0x838))_0x327f7e=_0x147e5a[_0x43d8c(0x1469)];else{if(_0x147e5a[_0x43d8c(0x682)]==='offline_text')_0x327f7e=(_0x147e5a['dialogue']||'')+'\x20'+(_0x147e5a[_0x43d8c(0x211)]||'');else _0x147e5a['quote']&&(_0x327f7e=_0x147e5a[_0x43d8c(0x1469)]);}}}return _0x327f7e[_0x43d8c(0x1f3)]()['includes'](_0x506a3d);}));if(_0x317ee3){const _0x5971a2=new Date(_0x317ee3),_0x425a2e=new Date(_0x5971a2['setHours'](0x0,0x0,0x0,0x0))[_0x137ee4(0x261)](),_0x445837=new Date(_0x5971a2[_0x137ee4(0xa6e)](0x17,0x3b,0x3b,0x3e7))[_0x137ee4(0x261)]();_0x1d1b90=_0x1d1b90[_0x137ee4(0xde7)](_0x21a368=>_0x21a368[_0x137ee4(0xe55)]>=_0x425a2e&&_0x21a368[_0x137ee4(0xe55)]<=_0x445837);}await _0x2a7259(_0x1d1b90);}async function _0x2a7259(_0x579585){const _0x3a210f=_0x7c5117,_0x452394=document[_0x3a210f(0xfa0)](_0x3a210f(0x6d9)),_0x6ce3f1=_0x8f0871[_0x3a210f(0x1260)][_0x8f0871[_0x3a210f(0xac8)]];_0x452394['innerHTML']='';if(_0x579585[_0x3a210f(0xac0)]===0x0){_0x452394[_0x3a210f(0x1331)]=_0x3a210f(0x1466);return;}let _0x4c2d28='';for(const _0x1c5b85 of _0x579585){const _0x472e5f=new Date(_0x1c5b85[_0x3a210f(0xe55)]),_0x54054c=_0x472e5f[_0x3a210f(0x11a9)]();if(_0x54054c!==_0x4c2d28){const _0x2235df=document['createElement'](_0x3a210f(0xd53));_0x2235df[_0x3a210f(0x1287)]=_0x3a210f(0xcb4),_0x2235df[_0x3a210f(0xc62)]=_0x3a210f(0x87c)+_0x472e5f[_0x3a210f(0x75f)]()+'年'+(_0x472e5f['getMonth']()+0x1)+'月'+_0x472e5f[_0x3a210f(0x8a5)]()+_0x3a210f(0x2c9),_0x452394['appendChild'](_0x2235df),_0x4c2d28=_0x54054c;}const _0xc2702d=await _0x20ac60(_0x1c5b85,_0x6ce3f1);_0xc2702d&&(_0xc2702d[_0x3a210f(0x63b)]['cursor']=_0x3a210f(0x157c),_0xc2702d['addEventListener'](_0x3a210f(0xb4a),()=>_0x5f150b(_0x1c5b85[_0x3a210f(0xe55)])),_0x452394[_0x3a210f(0x1155)](_0xc2702d));}}async function _0x5f150b(_0x242d26){const _0x5e6c50=_0x7c5117,_0x2ad2e2=_0x8f0871[_0x5e6c50(0xac8)];if(!_0x2ad2e2)return;_0x2d25e5('chat-interface-screen'),setTimeout(async()=>{const _0x31c15b=_0x5e6c50,_0x399b9d=document[_0x31c15b(0xfa0)](_0x31c15b(0x142d)),_0x20080e=_0x31c15b(0x9b6)+_0x242d26+'\x22]';let _0x426441=_0x399b9d[_0x31c15b(0xfb1)](_0x20080e),_0x447563=0x0;const _0x2d46b7=0x14;while(!_0x426441&&_0x447563<_0x2d46b7){const _0x45f73a=document[_0x31c15b(0xfa0)](_0x31c15b(0x132b));if(_0x45f73a)console[_0x31c15b(0x4ee)](_0x31c15b(0x12fa)+(_0x447563+0x1)+')'),await _0x50fac8(),_0x426441=_0x399b9d[_0x31c15b(0xfb1)](_0x20080e),_0x447563++;else break;}_0x425456(_0x242d26);},0xc8);}async function _0x36579f(){const _0x373d73=_0x7c5117;document[_0x373d73(0xfa0)](_0x373d73(0x575))['value']='',document['getElementById']('date-search-input')[_0x373d73(0x4f6)]='',await _0x2a7259(_0x8f0871[_0x373d73(0x1260)][_0x8f0871['activeChatId']]['history'][_0x373d73(0xde7)](_0x16c623=>!_0x16c623[_0x373d73(0x1559)]));}async function _0x177c16(_0x5355a9=![],_0x313264=null,_0x2732e0=null){const _0x5551fa=_0x7c5117,_0x2df380=document['getElementById'](_0x5551fa(0xec4)),_0x19d1ed=document[_0x5551fa(0xfa0)]('my-frame-grid'),_0x67a24c=_0x8f0871[_0x5551fa(0x1260)][_0x8f0871[_0x5551fa(0xac8)]];_0x2df380[_0x5551fa(0x1331)]='',_0x19d1ed['innerHTML']='';const _0x4cf8f0=await _0x372b85[_0x5551fa(0x753)][_0x5551fa(0x3bc)](),_0x433f25=[..._0x6b2db5,..._0x4cf8f0];document[_0x5551fa(0xfb1)](_0x5551fa(0x126f))[_0x5551fa(0x63b)]['display']=_0x5355a9?_0x5551fa(0x11b5):_0x5551fa(0x138c),document[_0x5551fa(0xfa0)]('ai-frame-content')['style'][_0x5551fa(0x1248)]=_0x5551fa(0x127c),document[_0x5551fa(0xfa0)](_0x5551fa(0x13a5))[_0x5551fa(0x63b)][_0x5551fa(0x1248)]=_0x5551fa(0x11b5),document[_0x5551fa(0xfa0)](_0x5551fa(0x13f8))['classList'][_0x5551fa(0x1327)](_0x5551fa(0xa37)),document[_0x5551fa(0xfa0)](_0x5551fa(0x1345))[_0x5551fa(0x128f)]['remove'](_0x5551fa(0xa37));if(_0x5355a9)_0x433f25[_0x5551fa(0x458)](_0x278e7e=>{const _0x706aa4=_0x5551fa,_0x4dd514=_0x2ab43e(_0x278e7e,'my',_0x313264);_0x278e7e['url']===_0x2732e0&&_0x4dd514[_0x706aa4(0x128f)][_0x706aa4(0x1327)](_0x706aa4(0xaa0)),_0x2df380['appendChild'](_0x4dd514);});else{const _0x54555b=_0x67a24c[_0x5551fa(0x12d7)][_0x5551fa(0xce8)]||_0x1a2fc1,_0x376473=_0x67a24c[_0x5551fa(0x12d7)][_0x5551fa(0x38a)]||(_0x67a24c['isGroup']?_0x2c882e:_0x1a2fc1);_0x433f25[_0x5551fa(0x458)](_0x472878=>{const _0x3ae5ff=_0x5551fa,_0x1fceea=_0x2ab43e(_0x472878,'ai',_0x54555b);if(_0x472878[_0x3ae5ff(0x3f5)]===_0x3595fb['ai'])_0x1fceea['classList'][_0x3ae5ff(0x1327)]('selected');_0x2df380['appendChild'](_0x1fceea);const _0x1ef243=_0x2ab43e(_0x472878,'my',_0x376473);if(_0x472878[_0x3ae5ff(0x3f5)]===_0x3595fb['my'])_0x1ef243[_0x3ae5ff(0x128f)][_0x3ae5ff(0x1327)](_0x3ae5ff(0xaa0));_0x19d1ed[_0x3ae5ff(0x1155)](_0x1ef243);});}}function _0x2ab43e(_0x352171,_0x4a21b2,_0x5802d3){const _0x4b306f=_0x7c5117,_0x85859c=document['createElement'](_0x4b306f(0xd53));_0x85859c[_0x4b306f(0x1287)]=_0x4b306f(0x1289),_0x85859c[_0x4b306f(0x8df)][_0x4b306f(0x387)]=_0x352171[_0x4b306f(0x3f5)],_0x85859c['title']=_0x352171['name'];const _0x1e4dec=typeof _0x352171['id']===_0x4b306f(0xa3a),_0x553ed4=_0x1e4dec?'<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x352171['id']+'\x22\x20style=\x22display:block;\x22>×</button>':'';return _0x85859c['innerHTML']=_0x4b306f(0x97c)+_0x553ed4+_0x4b306f(0x3b1)+_0x5802d3+_0x4b306f(0xce2)+(_0x352171[_0x4b306f(0x3f5)]?_0x4b306f(0x131f)+_0x352171['url']+_0x4b306f(0x854):'')+'\x0a\x20\x20\x20\x20',_0x85859c['addEventListener'](_0x4b306f(0xb4a),_0x9fe7b=>{const _0xed048c=_0x4b306f;if(_0x9fe7b[_0xed048c(0x10c2)]['classList'][_0xed048c(0xea7)](_0xed048c(0x254)))return;if(_0x274652){if(_0x1e4dec){const _0x2688de=parseInt(_0x352171['id']);_0x85859c['classList'][_0xed048c(0xb80)]('selected'),_0x3e7810[_0xed048c(0xd58)](_0x2688de)?_0x3e7810[_0xed048c(0xf10)](_0x2688de):_0x3e7810[_0xed048c(0x1327)](_0x2688de),_0x550847();}}else{_0x3595fb[_0x4a21b2]=_0x352171['url'];const _0x288870=_0x4a21b2==='ai'?document[_0xed048c(0xfa0)](_0xed048c(0xec4)):document['getElementById'](_0xed048c(0x1343));_0x288870[_0xed048c(0x2a1)](_0xed048c(0x124d))[_0xed048c(0x458)](_0x392f56=>_0x392f56[_0xed048c(0x128f)]['remove']('selected')),_0x85859c[_0xed048c(0x128f)]['add'](_0xed048c(0xaa0));}}),_0x85859c;}async function _0x529dfd(){const _0x4caa5a=_0x7c5117,_0x59017d=document[_0x4caa5a(0xfa0)]('custom-frame-upload-input'),_0x2275db=await new Promise(_0x516da2=>{const _0x6fa3c0=_0x4caa5a,_0x5f28ee=_0x479f02=>{const _0x5aa485=_0x5817;_0x516da2(_0x479f02[_0x5aa485(0x10c2)][_0x5aa485(0xca1)][0x0]||null),_0x59017d[_0x5aa485(0x73f)](_0x5aa485(0xca8),_0x5f28ee);};_0x59017d['addEventListener']('change',_0x5f28ee,{'once':!![]}),_0x59017d[_0x6fa3c0(0xb4a)]();});if(!_0x2275db)return;const _0x18f878=await _0x131a69(_0x4caa5a(0xc17),'请为这个新头像框起个名字');if(!_0x18f878||!_0x18f878[_0x4caa5a(0xa06)]())return;const _0x1b8c26=await new Promise(_0xc41976=>{const _0x47d2bb=_0x4caa5a,_0x18b400=new FileReader();_0x18b400[_0x47d2bb(0x7c6)]=()=>_0xc41976(_0x18b400['result']),_0x18b400[_0x47d2bb(0x101e)](_0x2275db);});await _0x372b85[_0x4caa5a(0x753)][_0x4caa5a(0x1327)]({'name':_0x18f878[_0x4caa5a(0xa06)](),'url':_0x1b8c26}),_0x177c16(_0x4d11ef);}async function _0x21e0b4(){const _0x4e7013=_0x7c5117,_0x3e1c94=_0x4e7013(0x21a),_0x2b2cf2=await _0x131a69(_0x4e7013(0x419),'从完整链接批量导入','',_0x4e7013(0x338),_0x4e7013(0xa18)+_0x3e1c94+_0x4e7013(0x129d));if(!_0x2b2cf2||!_0x2b2cf2[_0x4e7013(0xa06)]())return;const _0x40ff8c=_0x2b2cf2[_0x4e7013(0xa06)]()['split']('\x0a'),_0x204552=[];let _0x2a5217=0x0;for(const _0x58f379 of _0x40ff8c){const _0x4a6361=_0x58f379[_0x4e7013(0x1232)](/^(.+?)[:：]\s*(https?:\/\/.+)$/);if(_0x4a6361)_0x204552[_0x4e7013(0x481)]({'name':_0x4a6361[0x1]['trim'](),'url':_0x4a6361[0x2][_0x4e7013(0xa06)]()});else _0x58f379[_0x4e7013(0xa06)]()&&_0x2a5217++;}_0x204552['length']>0x0&&(await _0x372b85[_0x4e7013(0x753)][_0x4e7013(0x9b9)](_0x204552),_0x177c16(_0x4d11ef),await _0x4abd86('导入成功',_0x4e7013(0xdaf)+_0x204552['length']+'\x20个新头像框！')),_0x2a5217>0x0&&await _0x4abd86(_0x4e7013(0x731),'有\x20'+_0x2a5217+_0x4e7013(0xaad));}async function _0x482a9e(_0x1c190f){const _0x1d110e=_0x7c5117,_0x5affa4=await _0x372b85[_0x1d110e(0x753)][_0x1d110e(0x70d)](_0x1c190f);if(!_0x5affa4)return;const _0x38c0f7=await _0x3f65ed(_0x1d110e(0x1464),'确定要删除头像框\x20“'+_0x5affa4[_0x1d110e(0x1023)]+'”\x20吗？',{'confirmButtonClass':_0x1d110e(0x611)});_0x38c0f7&&(await _0x372b85['customAvatarFrames'][_0x1d110e(0xf10)](_0x1c190f),_0x177c16(_0x4d11ef));}let _0x45e5fc=0x0;const _0x4b8d98=0x2;function _0x2d6a86(){const _0x5198dc=_0x7c5117,_0x39338a=document['getElementById'](_0x5198dc(0x9b5)),_0x256d47=document['getElementById'](_0x5198dc(0xcbd)),_0x59ef58=document[_0x5198dc(0x2a1)](_0x5198dc(0x391));let _0x2add00=0x0,_0x1dea72=0x0,_0x3cb5e2=0x0,_0x43044e=![],_0x1a4071=!![];const _0x1abc01=()=>{const _0x598857=_0x5198dc;_0x256d47['style'][_0x598857(0x1268)]='translateX(-'+_0x45e5fc*(0x64/_0x4b8d98)+'%)',_0x59ef58[_0x598857(0x458)]((_0x5e84d4,_0x18d0c5)=>{const _0x2e245e=_0x598857;_0x5e84d4[_0x2e245e(0x128f)][_0x2e245e(0xb80)](_0x2e245e(0xa37),_0x18d0c5===_0x45e5fc);});},_0x65cf20=_0x5aaccb=>{const _0x5491fb=_0x5198dc;_0x43044e=!![],_0x1a4071=!![],_0x2add00=_0x5aaccb[_0x5491fb(0x682)][_0x5491fb(0xf95)](_0x5491fb(0xb92))?_0x5aaccb[_0x5491fb(0xfc3)]:_0x5aaccb['touches'][0x0][_0x5491fb(0xfc3)],_0x1dea72=_0x5aaccb[_0x5491fb(0x682)]['includes'](_0x5491fb(0xb92))?_0x5aaccb[_0x5491fb(0x9f2)]:_0x5aaccb[_0x5491fb(0x33f)][0x0][_0x5491fb(0x9f2)],_0x256d47[_0x5491fb(0x63b)][_0x5491fb(0x6a2)]=_0x5491fb(0x11b5);},_0x3721ee=_0x3e2e38=>{const _0x1e7147=_0x5198dc;if(!_0x43044e)return;const _0x334224=_0x3e2e38[_0x1e7147(0x682)][_0x1e7147(0xf95)]('mouse')?_0x3e2e38[_0x1e7147(0x9f2)]:_0x3e2e38['touches'][0x0][_0x1e7147(0x9f2)];_0x3cb5e2=_0x3e2e38['type']['includes'](_0x1e7147(0xb92))?_0x3e2e38[_0x1e7147(0xfc3)]:_0x3e2e38[_0x1e7147(0x33f)][0x0][_0x1e7147(0xfc3)];const _0x4ca738=_0x3cb5e2-_0x2add00,_0x559521=_0x334224-_0x1dea72;_0x1a4071&&(Math[_0x1e7147(0x705)](_0x4ca738)>0xa||Math[_0x1e7147(0x705)](_0x559521)>0xa)&&(_0x1a4071=![]);if(Math[_0x1e7147(0x705)](_0x4ca738)>Math[_0x1e7147(0x705)](_0x559521)){if(_0x3e2e38['cancelable'])_0x3e2e38[_0x1e7147(0xdc1)]();_0x256d47['style'][_0x1e7147(0x1268)]=_0x1e7147(0x134b)+_0x45e5fc*(0x64/_0x4b8d98)+_0x1e7147(0xac5)+_0x4ca738+_0x1e7147(0x508);}},_0x4bf380=_0x49f923=>{const _0x35d39e=_0x5198dc;if(!_0x43044e)return;_0x43044e=![],_0x256d47[_0x35d39e(0x63b)][_0x35d39e(0x6a2)]='transform\x200.4s\x20cubic-bezier(0.4,\x200,\x200.2,\x201)';if(_0x1a4071){_0x1abc01();return;}const _0x5d9e5a=_0x3cb5e2-_0x2add00;if(Math[_0x35d39e(0x705)](_0x5d9e5a)>_0x39338a[_0x35d39e(0x8a3)]/0x4){if(_0x5d9e5a>0x0&&_0x45e5fc>0x0)_0x45e5fc--;else _0x5d9e5a<0x0&&_0x45e5fc<_0x4b8d98-0x1&&_0x45e5fc++;}_0x1abc01();};_0x39338a[_0x5198dc(0x7b8)](_0x5198dc(0xbea),_0x65cf20),_0x39338a[_0x5198dc(0x7b8)]('mousemove',_0x3721ee),_0x39338a['addEventListener'](_0x5198dc(0xefe),_0x4bf380),_0x39338a['addEventListener'](_0x5198dc(0x10c9),_0x4bf380),_0x39338a['addEventListener'](_0x5198dc(0x7d3),_0x65cf20,{'passive':![]}),_0x39338a[_0x5198dc(0x7b8)](_0x5198dc(0x130b),_0x3721ee,{'passive':![]}),_0x39338a[_0x5198dc(0x7b8)](_0x5198dc(0x61e),_0x4bf380);}let _0x35bcde=null;async function _0x2f8f24(){const _0x3618ae=_0x7c5117;await _0x324525(),_0x2d25e5(_0x3618ae(0xdfe));}async function _0x324525(){const _0x25a3a0=_0x7c5117,_0xbce0e7=document[_0x25a3a0(0xfa0)](_0x25a3a0(0x469)),_0x22ab7c=document[_0x25a3a0(0xfa0)]('preset-content-container');_0xbce0e7[_0x25a3a0(0x1331)]='',_0x22ab7c[_0x25a3a0(0x1331)]='';const [_0x3add8b,_0x5e4e62]=await Promise[_0x25a3a0(0x8ab)]([_0x372b85[_0x25a3a0(0x1573)][_0x25a3a0(0x3bc)](),_0x372b85[_0x25a3a0(0xa5f)]['orderBy'](_0x25a3a0(0x1023))[_0x25a3a0(0x3bc)]()]);_0x8f0871[_0x25a3a0(0x1573)]=_0x3add8b;if(_0x3add8b[_0x25a3a0(0xac0)]===0x0){_0x22ab7c[_0x25a3a0(0x1331)]='<p\x20style=\x22text-align:center;\x20color:\x20#8a8a8a;\x20margin-top:\x2050px;\x22>点击右上角\x20\x22+\x22\x20创建你的第一个预设</p>';return;}const _0x27910f=document[_0x25a3a0(0xb4e)]('button');_0x27910f[_0x25a3a0(0x1287)]=_0x25a3a0(0xff0),_0x27910f[_0x25a3a0(0xc62)]='全部',_0x27910f['dataset']['categoryId']=_0x25a3a0(0x8ab),_0xbce0e7[_0x25a3a0(0x1155)](_0x27910f);const _0x572b2b=document[_0x25a3a0(0xb4e)]('div');_0x572b2b['className']=_0x25a3a0(0x1132),_0x572b2b[_0x25a3a0(0x8df)]['categoryId']=_0x25a3a0(0x8ab),_0x22ab7c[_0x25a3a0(0x1155)](_0x572b2b),_0x5e4e62[_0x25a3a0(0x458)](_0x118a8c=>{const _0x34f93c=_0x25a3a0,_0x3dcc20=document['createElement'](_0x34f93c(0x1029));_0x3dcc20['className']=_0x34f93c(0x223),_0x3dcc20[_0x34f93c(0xc62)]=_0x118a8c[_0x34f93c(0x1023)],_0x3dcc20[_0x34f93c(0x8df)]['categoryId']=String(_0x118a8c['id']),_0xbce0e7[_0x34f93c(0x1155)](_0x3dcc20);const _0x216efd=document[_0x34f93c(0xb4e)](_0x34f93c(0xd53));_0x216efd['className']=_0x34f93c(0x1524),_0x216efd[_0x34f93c(0x8df)][_0x34f93c(0x6b2)]=String(_0x118a8c['id']),_0x22ab7c[_0x34f93c(0x1155)](_0x216efd);});const _0x50e59f=_0x3add8b[_0x25a3a0(0x75d)](_0x516c4a=>!_0x516c4a[_0x25a3a0(0x6b2)]);if(_0x50e59f){const _0x425b7a=document[_0x25a3a0(0xb4e)]('button');_0x425b7a[_0x25a3a0(0x1287)]=_0x25a3a0(0x223),_0x425b7a[_0x25a3a0(0xc62)]=_0x25a3a0(0x129e),_0x425b7a[_0x25a3a0(0x8df)][_0x25a3a0(0x6b2)]=_0x25a3a0(0x398),_0xbce0e7[_0x25a3a0(0x1155)](_0x425b7a);const _0x4419ad=document['createElement'](_0x25a3a0(0xd53));_0x4419ad[_0x25a3a0(0x1287)]=_0x25a3a0(0x1524),_0x4419ad[_0x25a3a0(0x8df)][_0x25a3a0(0x6b2)]=_0x25a3a0(0x398),_0x22ab7c[_0x25a3a0(0x1155)](_0x4419ad);}_0x3add8b[_0x25a3a0(0x458)](_0x20ebdc=>{const _0x1f2e6e=_0x25a3a0,_0x4a07d1=_0x1f2e6e(0x1bd)+_0x20ebdc['content'][_0x1f2e6e(0xac0)]+_0x1f2e6e(0x106e),_0x1fe203=document[_0x1f2e6e(0xb4e)](_0x1f2e6e(0xd53));_0x1fe203[_0x1f2e6e(0x1287)]=_0x1f2e6e(0xd9e),_0x1fe203['innerHTML']=_0x1f2e6e(0x9ac)+_0x20ebdc[_0x1f2e6e(0x1023)]+_0x1f2e6e(0x1517)+_0x4a07d1+_0x1f2e6e(0x347);const _0x3fd0bb=()=>_0x16c702(_0x20ebdc['id']),_0x571bc9=async()=>{const _0x3cc9a7=_0x1f2e6e,_0x2e7f4c=await _0x3f65ed(_0x3cc9a7(0x3de),_0x3cc9a7(0x1144)+_0x20ebdc[_0x3cc9a7(0x1023)]+'》吗？',{'confirmButtonClass':_0x3cc9a7(0x611)});_0x2e7f4c&&(await _0x372b85[_0x3cc9a7(0x1573)][_0x3cc9a7(0xf10)](_0x20ebdc['id']),_0x8f0871[_0x3cc9a7(0x1573)]=await _0x372b85[_0x3cc9a7(0x1573)][_0x3cc9a7(0x3bc)](),_0x324525());};_0x1fe203['addEventListener'](_0x1f2e6e(0xb4a),_0x3fd0bb),_0x53cdde(_0x1fe203,_0x571bc9);const _0x45659a=_0x1fe203[_0x1f2e6e(0xb5c)](!![]);_0x45659a[_0x1f2e6e(0x7b8)]('click',_0x3fd0bb),_0x53cdde(_0x45659a,_0x571bc9),_0x572b2b['appendChild'](_0x45659a);const _0xd79e76=_0x20ebdc['categoryId']?String(_0x20ebdc[_0x1f2e6e(0x6b2)]):'uncategorized',_0x1f5253=_0x22ab7c[_0x1f2e6e(0xfb1)](_0x1f2e6e(0x8e1)+_0xd79e76+'\x22]');_0x1f5253&&_0x1f5253[_0x1f2e6e(0x1155)](_0x1fe203);}),document[_0x25a3a0(0x2a1)](_0x25a3a0(0xdac))['forEach'](_0x2d9df3=>{const _0x143f4c=_0x25a3a0;_0x2d9df3[_0x143f4c(0x7b8)]('click',()=>_0x32a0c2(_0x2d9df3[_0x143f4c(0x8df)][_0x143f4c(0x6b2)]));});}function _0x32a0c2(_0x39d2f4){const _0x1bf315=_0x7c5117;document[_0x1bf315(0x2a1)](_0x1bf315(0xdac))['forEach'](_0x30659b=>{const _0xddf29d=_0x1bf315;_0x30659b[_0xddf29d(0x128f)][_0xddf29d(0xb80)](_0xddf29d(0xa37),_0x30659b[_0xddf29d(0x8df)][_0xddf29d(0x6b2)]===_0x39d2f4);}),document[_0x1bf315(0x2a1)](_0x1bf315(0x208))[_0x1bf315(0x458)](_0x17d100=>{const _0x4aea3b=_0x1bf315;_0x17d100[_0x4aea3b(0x128f)]['toggle'](_0x4aea3b(0xa37),_0x17d100[_0x4aea3b(0x8df)][_0x4aea3b(0x6b2)]===_0x39d2f4);});}async function _0x16c702(_0x4f40a0){const _0x5da0e1=_0x7c5117;_0x2d25e5('preset-editor-screen'),_0x35bcde=_0x4f40a0;try{const [_0x565bdd,_0x479abc]=await Promise[_0x5da0e1(0x8ab)]([_0x372b85[_0x5da0e1(0x1573)][_0x5da0e1(0x70d)](_0x4f40a0),_0x372b85['presetCategories']['toArray']()]);if(!_0x565bdd){console[_0x5da0e1(0x52b)](_0x5da0e1(0x1441),_0x4f40a0),await _0x4abd86(_0x5da0e1(0x3f7),'找不到这个预设的详细信息。'),_0x2d25e5(_0x5da0e1(0xdfe));return;}setTimeout(()=>{const _0x16ce8f=_0x5da0e1;document[_0x16ce8f(0xfa0)]('preset-editor-title')[_0x16ce8f(0xc62)]=_0x565bdd[_0x16ce8f(0x1023)],document['getElementById'](_0x16ce8f(0x5ef))['value']=_0x565bdd[_0x16ce8f(0x1023)];const _0x553fd8=document[_0x16ce8f(0xfa0)]('preset-category-select');_0x553fd8[_0x16ce8f(0x1331)]=_0x16ce8f(0x117d),_0x479abc[_0x16ce8f(0x458)](_0x41453d=>{const _0x5a94ba=_0x16ce8f,_0x20a949=document['createElement'](_0x5a94ba(0x327));_0x20a949[_0x5a94ba(0x4f6)]=_0x41453d['id'],_0x20a949[_0x5a94ba(0xc62)]=_0x41453d['name'];if(_0x565bdd[_0x5a94ba(0x6b2)]===_0x41453d['id'])_0x20a949[_0x5a94ba(0xaa0)]=!![];_0x553fd8[_0x5a94ba(0x1155)](_0x20a949);});const _0x3491e0=document['getElementById'](_0x16ce8f(0x851));_0x3491e0[_0x16ce8f(0x1331)]='',Array[_0x16ce8f(0x345)](_0x565bdd['content'])&&_0x565bdd[_0x16ce8f(0x1469)][_0x16ce8f(0xac0)]>0x0?_0x565bdd[_0x16ce8f(0x1469)][_0x16ce8f(0x458)](_0x2ef02f=>{const _0x3daec8=_0x16ce8f,_0x378b46=_0x120000(_0x2ef02f);_0x3491e0[_0x3daec8(0x1155)](_0x378b46);}):_0x3491e0[_0x16ce8f(0x1331)]='<p\x20style=\x22text-align:center;\x20color:\x20var(--text-secondary);\x20margin-top:\x2020px;\x22>还没有内容，点击下方按钮添加第一条吧！</p>';},0x32);}catch(_0x18b9f3){console[_0x5da0e1(0x52b)](_0x5da0e1(0x133c),_0x18b9f3),await _0x4abd86(_0x5da0e1(0x3f7),'加载预设详情时发生错误:\x20'+_0x18b9f3[_0x5da0e1(0x790)]),_0x2d25e5('preset-screen');}}function _0x120000(_0x26444c={'keys':[],'comment':'','content':'','enabled':!![]}){const _0x3d40f3=_0x7c5117,_0x195a83=document['createElement'](_0x3d40f3(0xd53));_0x195a83[_0x3d40f3(0x1287)]=_0x3d40f3(0x5f3);const _0x4e947e=_0x26444c[_0x3d40f3(0x7af)]!==![]?'checked':'';_0x195a83[_0x3d40f3(0x1331)]=_0x3d40f3(0x9f7)+_0x4e947e+_0x3d40f3(0x9c6)+(_0x26444c['comment']||'')+_0x3d40f3(0xbbd)+(_0x26444c[_0x3d40f3(0x1204)]||[])[_0x3d40f3(0xcc2)](',\x20')+_0x3d40f3(0xda4)+(_0x26444c[_0x3d40f3(0x1469)]||'')+_0x3d40f3(0x42b),_0x195a83[_0x3d40f3(0xfb1)](_0x3d40f3(0x819))['addEventListener'](_0x3d40f3(0xb4a),()=>_0x195a83[_0x3d40f3(0x443)]());const _0x3aee92=_0x195a83['querySelector']('.toggle-content-btn'),_0x2d08bb=_0x195a83[_0x3d40f3(0xfb1)](_0x3d40f3(0x1291));return _0x3aee92[_0x3d40f3(0x7b8)](_0x3d40f3(0xb4a),()=>{const _0x3ab9e2=_0x3d40f3,_0x257f6a=_0x2d08bb[_0x3ab9e2(0x63b)]['display']==='none';_0x2d08bb[_0x3ab9e2(0x63b)][_0x3ab9e2(0x1248)]=_0x257f6a?_0x3ab9e2(0x127c):'none',_0x3aee92[_0x3ab9e2(0xc62)]=_0x257f6a?'收起':'展开';}),_0x195a83;}async function _0x51d9fb(){const _0x6925c3=_0x7c5117;await _0x4b25a7(),document['querySelector']('#group-management-modal\x20.modal-header\x20span')['textContent']=_0x6925c3(0x156a),document[_0x6925c3(0xfa0)](_0x6925c3(0x1042))['onclick']=_0x55af7a,document[_0x6925c3(0xfa0)](_0x6925c3(0x58e))[_0x6925c3(0x9f0)]=_0x1c1c02=>{const _0xfe9a5b=_0x6925c3;_0x1c1c02[_0xfe9a5b(0x10c2)][_0xfe9a5b(0x128f)]['contains'](_0xfe9a5b(0x125c))&&_0x2e624e(parseInt(_0x1c1c02['target']['dataset']['id']));},document[_0x6925c3(0xfa0)](_0x6925c3(0x14ea))['onclick']=()=>{const _0x542efb=_0x6925c3;document[_0x542efb(0xfa0)]('group-management-modal')['classList']['remove']('visible'),_0x324525();},document['getElementById'](_0x6925c3(0xfb9))[_0x6925c3(0x128f)][_0x6925c3(0x1327)]('visible');}async function _0x4b25a7(){const _0x40b1ec=_0x7c5117,_0x19869c=document[_0x40b1ec(0xfa0)](_0x40b1ec(0x58e)),_0x3d4046=await _0x372b85[_0x40b1ec(0xa5f)]['toArray']();_0x19869c[_0x40b1ec(0x1331)]='',_0x3d4046['length']===0x0&&(_0x19869c[_0x40b1ec(0x1331)]=_0x40b1ec(0x1189)),_0x3d4046[_0x40b1ec(0x458)](_0x1820bc=>{const _0x28afba=_0x40b1ec,_0x44a887=document[_0x28afba(0xb4e)]('div');_0x44a887[_0x28afba(0x1287)]=_0x28afba(0x1133),_0x44a887['innerHTML']=_0x28afba(0x1169)+_0x1820bc[_0x28afba(0x1023)]+'</span><span\x20class=\x22delete-group-btn\x22\x20data-id=\x22'+_0x1820bc['id']+'\x22>×</span>',_0x19869c[_0x28afba(0x1155)](_0x44a887);});}async function _0x55af7a(){const _0x108c0b=_0x7c5117,_0x5a3ce1=document['getElementById'](_0x108c0b(0x14b8)),_0x1d0d7c=_0x5a3ce1[_0x108c0b(0x4f6)][_0x108c0b(0xa06)]();if(!_0x1d0d7c)return alert('分类名不能为空！');const _0x4a26eb=await _0x372b85[_0x108c0b(0xa5f)][_0x108c0b(0xdc7)](_0x108c0b(0x1023))[_0x108c0b(0x8c2)](_0x1d0d7c)[_0x108c0b(0x102a)]();if(_0x4a26eb)return alert(_0x108c0b(0x135a)+_0x1d0d7c+'\x22\x20已经存在了！');await _0x372b85[_0x108c0b(0xa5f)][_0x108c0b(0x1327)]({'name':_0x1d0d7c}),_0x5a3ce1[_0x108c0b(0x4f6)]='',await _0x4b25a7();}async function _0x2e624e(_0x4da41e){const _0x1ae1e8=_0x7c5117,_0x31e83a=await _0x3f65ed(_0x1ae1e8(0x1464),_0x1ae1e8(0xf3a),{'confirmButtonClass':_0x1ae1e8(0x611)});_0x31e83a&&(await _0x372b85['presetCategories'][_0x1ae1e8(0xf10)](_0x4da41e),await _0x372b85[_0x1ae1e8(0x1573)][_0x1ae1e8(0xdc7)](_0x1ae1e8(0x6b2))['equals'](_0x4da41e)[_0x1ae1e8(0x52c)]({'categoryId':null}),_0x8f0871[_0x1ae1e8(0x1573)]=await _0x372b85[_0x1ae1e8(0x1573)][_0x1ae1e8(0x3bc)](),await _0x4b25a7());}async function _0x1deca5(_0x3526f1){const _0x5324ad=_0x7c5117,_0x470f24=_0x3526f1[_0x5324ad(0x10c2)][_0x5324ad(0xca1)][0x0];if(!_0x470f24)return;try{if(!_0x470f24['name'][_0x5324ad(0x14fe)](_0x5324ad(0x613)))throw new Error(_0x5324ad(0x10bf));const _0x35e271=await _0x470f24[_0x5324ad(0xda3)](),_0x5d35b9=JSON[_0x5324ad(0x4a0)](_0x35e271);await _0x3c7a4d(_0x5d35b9,_0x470f24[_0x5324ad(0x1023)]);}catch(_0x296394){console['error'](_0x5324ad(0x55f),_0x296394),await _0x4abd86(_0x5324ad(0x11c5),_0x5324ad(0xb05)+_0x296394['message']);}finally{_0x3526f1[_0x5324ad(0x10c2)][_0x5324ad(0x4f6)]=null;}}async function _0x3c7a4d(_0x100452,_0x4dea39){const _0x3168dc=_0x7c5117;let _0x157395=[];if(Array[_0x3168dc(0x345)](_0x100452[_0x3168dc(0x3c8)])&&Array[_0x3168dc(0x345)](_0x100452[_0x3168dc(0xa54)])&&_0x100452['prompt_order']['length']>0x0){console[_0x3168dc(0x4ee)]('检测到\x20Tavern/SillyTavern\x20预设格式，将严格按照\x20prompt_order\x20排序。');const _0x4b5a38=new Map(_0x100452['prompts']['map'](_0x1952a6=>[_0x1952a6[_0x3168dc(0xab9)],_0x1952a6])),_0x3e5d2b=_0x100452[_0x3168dc(0xa54)][_0x3168dc(0xd68)]((_0x1e0480,_0x4680f6)=>_0x4680f6['order']&&_0x4680f6[_0x3168dc(0xc75)][_0x3168dc(0xac0)]>(_0x1e0480[_0x3168dc(0xac0)]||0x0)?_0x4680f6[_0x3168dc(0xc75)]:_0x1e0480,[]);_0x3e5d2b&&_0x3e5d2b['length']>0x0&&(_0x157395=_0x3e5d2b[_0x3168dc(0x556)](_0x2e43b3=>{const _0x54a113=_0x3168dc,_0x1c0341=_0x4b5a38[_0x54a113(0x70d)](_0x2e43b3[_0x54a113(0xab9)]);if(_0x1c0341)return{'keys':[],'comment':_0x1c0341[_0x54a113(0x1023)]||_0x54a113(0x354),'content':_0x1c0341[_0x54a113(0x1469)]||'','enabled':_0x2e43b3[_0x54a113(0x7af)]};return null;})[_0x3168dc(0xde7)](Boolean));}else{if(_0x100452['entries']&&typeof _0x100452[_0x3168dc(0x545)]===_0x3168dc(0xf2e))console[_0x3168dc(0x4ee)](_0x3168dc(0x107b)),Array['isArray'](_0x100452[_0x3168dc(0xc75)])?(console[_0x3168dc(0x4ee)](_0x3168dc(0x9c0)),_0x157395=_0x100452[_0x3168dc(0xc75)][_0x3168dc(0x556)](_0x356c99=>_0x100452[_0x3168dc(0x545)][_0x356c99])[_0x3168dc(0xde7)](Boolean)[_0x3168dc(0x556)](_0x469ca0=>({'keys':_0x469ca0['key']||[],'comment':_0x469ca0['comment']||'无备注','content':_0x469ca0[_0x3168dc(0x1469)]||'','enabled':!_0x469ca0[_0x3168dc(0xc0d)]}))):(console[_0x3168dc(0x7fa)](_0x3168dc(0x7de)),_0x157395=Object[_0x3168dc(0x142f)](_0x100452[_0x3168dc(0x545)])[_0x3168dc(0x556)](_0x4b2839=>({'keys':_0x4b2839[_0x3168dc(0x1557)]||[],'comment':_0x4b2839[_0x3168dc(0x7ab)]||_0x3168dc(0x13e2),'content':_0x4b2839[_0x3168dc(0x1469)]||'','enabled':!_0x4b2839[_0x3168dc(0xc0d)]})));else{if(Array[_0x3168dc(0x345)](_0x100452[_0x3168dc(0x3c8)]))console[_0x3168dc(0x4ee)](_0x3168dc(0x7eb)),_0x157395=_0x100452[_0x3168dc(0x3c8)][_0x3168dc(0x556)](_0x4679f0=>({'keys':[],'comment':_0x4679f0[_0x3168dc(0x1023)]||_0x3168dc(0x354),'content':_0x4679f0[_0x3168dc(0x1469)]||'','enabled':!![]}));else throw new Error(_0x3168dc(0x1f1));}}_0x157395=_0x157395[_0x3168dc(0xde7)](_0xd24f30=>_0xd24f30['content']);if(_0x157395[_0x3168dc(0xac0)]===0x0){alert(_0x3168dc(0x14d9));return;}const _0x2d9982=_0x4dea39[_0x3168dc(0x128a)](/\.json$/i,''),_0x168eca=await _0x131a69('导入\x20Tavern\x20预设','请为这组提示词预设命名：',_0x2d9982);if(!_0x168eca||!_0x168eca['trim']()){alert(_0x3168dc(0x2a8));return;}const _0x4cbb05={'id':_0x3168dc(0x11db)+Date['now'](),'name':_0x168eca[_0x3168dc(0xa06)](),'content':_0x157395,'categoryId':null};await _0x372b85[_0x3168dc(0x1573)][_0x3168dc(0x1327)](_0x4cbb05),_0x8f0871[_0x3168dc(0x1573)][_0x3168dc(0x481)](_0x4cbb05),await _0x324525(),await _0x4abd86(_0x3168dc(0x1388),_0x3168dc(0x126b)+_0x168eca+'》。');}async function _0x5a7f83(_0x36ebc8){const _0x22e949=_0x7c5117,_0x391e2a=document['getElementById'](_0x22e949(0x8a0));if(!_0x391e2a)return;const _0x1b0ef9=_0x8f0871[_0x22e949(0x1573)]||[];_0x391e2a[_0x22e949(0x1331)]=_0x22e949(0xefa),_0x1b0ef9[_0x22e949(0x458)](_0x33daef=>{const _0x41035f=_0x22e949,_0x5d2fdd=document[_0x41035f(0xb4e)](_0x41035f(0x327));_0x5d2fdd[_0x41035f(0x4f6)]=_0x33daef['id'],_0x5d2fdd['textContent']=_0x33daef[_0x41035f(0x1023)],_0x391e2a['appendChild'](_0x5d2fdd);}),_0x36ebc8['settings']['offlinePresetId']&&(_0x391e2a[_0x22e949(0x4f6)]=_0x36ebc8[_0x22e949(0x12d7)][_0x22e949(0xed7)]);}function _0xce2e25(){const _0x266d30=_0x7c5117,_0x2bbacc=document[_0x266d30(0xfa0)](_0x266d30(0xbb1));if(!_0x2bbacc)return;_0x2bbacc[_0x266d30(0x1331)]='';let _0x3ebbea=_0x8f0871[_0x266d30(0x7b0)][_0x266d30(0x149f)]||_0x43b82e;_0x3ebbea[_0x266d30(0x458)](_0x299232=>{const _0x2509a5=_0x266d30,_0x1a0063=document['getElementById'](_0x299232);if(_0x1a0063){const _0x1813f2=document[_0x2509a5(0xb4e)]('div');_0x1813f2[_0x2509a5(0x1287)]='draggable-button-item',_0x1813f2[_0x2509a5(0x671)]=!![],_0x1813f2['dataset'][_0x2509a5(0x1bc)]=_0x299232,_0x1813f2['innerHTML']=_0x1a0063[_0x2509a5(0x1331)],_0x2bbacc[_0x2509a5(0x1155)](_0x1813f2);}});}function _0x5eb344(){const _0x56e529=_0x7c5117,_0x2ba797=document[_0x56e529(0xfa0)]('button-order-editor');if(!_0x2ba797)return;let _0x4f8336=null;const _0x28951e=_0x1a7c4c=>{const _0x1fcb94=_0x56e529,_0x1bbc81=_0x1a7c4c[_0x1fcb94(0x10c2)][_0x1fcb94(0x187)](_0x1fcb94(0x1374));if(!_0x1bbc81)return;_0x4f8336=_0x1bbc81,_0x4f8336[_0x1fcb94(0x128f)][_0x1fcb94(0x1327)]('dragging');if(_0x1a7c4c['cancelable'])_0x1a7c4c[_0x1fcb94(0xdc1)]();},_0x5406bb=_0x49fd9b=>{const _0x186e44=_0x56e529;if(!_0x4f8336)return;const _0x23cbba=_0x49fd9b[_0x186e44(0x682)][_0x186e44(0xf95)](_0x186e44(0xb92))?_0x49fd9b[_0x186e44(0x9a6)]:_0x49fd9b[_0x186e44(0x33f)][0x0][_0x186e44(0x9a6)],_0x56706f=_0x42b2df(_0x2ba797,_0x23cbba);_0x56706f==null?_0x2ba797['appendChild'](_0x4f8336):_0x2ba797['insertBefore'](_0x4f8336,_0x56706f);},_0x3f736e=()=>{const _0x48da20=_0x56e529;if(!_0x4f8336)return;_0x4f8336[_0x48da20(0x128f)][_0x48da20(0x443)](_0x48da20(0x69c)),_0x4f8336=null,_0x382a91();};_0x2ba797[_0x56e529(0x7b8)](_0x56e529(0xbea),_0x28951e),_0x2ba797[_0x56e529(0x7b8)](_0x56e529(0x7d3),_0x28951e,{'passive':![]}),_0x2ba797['addEventListener'](_0x56e529(0x31f),_0x5406bb),_0x2ba797[_0x56e529(0x7b8)](_0x56e529(0x130b),_0x5406bb,{'passive':![]}),_0x2ba797[_0x56e529(0x7b8)](_0x56e529(0xefe),_0x3f736e),_0x2ba797[_0x56e529(0x7b8)]('mouseleave',_0x3f736e),_0x2ba797[_0x56e529(0x7b8)](_0x56e529(0x61e),_0x3f736e);}function _0x42b2df(_0x383569,_0x29b7fd){const _0x46e94a=_0x7c5117,_0x14931c=[..._0x383569[_0x46e94a(0x2a1)](_0x46e94a(0x1012))];return _0x14931c['reduce']((_0x4a9237,_0x480752)=>{const _0x4f762f=_0x46e94a,_0x43c1f6=_0x480752[_0x4f762f(0x1137)](),_0x3dd334=_0x29b7fd-_0x43c1f6[_0x4f762f(0xcb1)]-_0x43c1f6[_0x4f762f(0xa92)]/0x2;return _0x3dd334<0x0&&_0x3dd334>_0x4a9237[_0x4f762f(0x315)]?{'offset':_0x3dd334,'element':_0x480752}:_0x4a9237;},{'offset':Number['NEGATIVE_INFINITY']})[_0x46e94a(0xc72)];}async function _0x382a91(){const _0x9b225b=_0x7c5117,_0x19cf9d=document[_0x9b225b(0xfa0)](_0x9b225b(0xbb1)),_0x4e5a41=Array[_0x9b225b(0x3aa)](_0x19cf9d[_0x9b225b(0x2a1)](_0x9b225b(0x1374)))[_0x9b225b(0x556)](_0x2ef654=>_0x2ef654[_0x9b225b(0x8df)][_0x9b225b(0x1bc)]);_0x8f0871[_0x9b225b(0x7b0)][_0x9b225b(0x149f)]=_0x4e5a41,await _0x372b85[_0x9b225b(0x7b0)][_0x9b225b(0x11d5)](_0x8f0871['globalSettings']);}function _0x126bf4(){const _0x3aedea=_0x7c5117,_0x31b300=_0x8f0871['globalSettings']['chatActionButtonsOrder'];if(!_0x31b300||!Array[_0x3aedea(0x345)](_0x31b300)||_0x31b300[_0x3aedea(0xac0)]===0x0)return;const _0x346174=document[_0x3aedea(0xfa0)]('chat-input-actions-top');if(!_0x346174)return;_0x31b300[_0x3aedea(0x458)](_0x29aa96=>{const _0x5c92f8=_0x3aedea,_0x49111e=document[_0x5c92f8(0xfa0)](_0x29aa96);_0x49111e&&_0x346174[_0x5c92f8(0x1155)](_0x49111e);});}const _0x43b82e=['open-sticker-panel-btn',_0x7c5117(0x6d5),_0x7c5117(0xefc),_0x7c5117(0x9cc),'voice-message-btn',_0x7c5117(0xf57),_0x7c5117(0x57e),_0x7c5117(0x10c8),_0x7c5117(0x69a),_0x7c5117(0xfc7),_0x7c5117(0x113d),_0x7c5117(0x6eb),_0x7c5117(0x9e2),_0x7c5117(0x48f),_0x7c5117(0x801),'regenerate-btn',_0x7c5117(0xe61),_0x7c5117(0xb6d),'werewolf-game-btn','read-together-btn',_0x7c5117(0xfd5)];async function _0xafdf4d(){const _0x18c31e=_0x7c5117;_0x8f0871['globalSettings'][_0x18c31e(0x149f)]=null,await _0x372b85[_0x18c31e(0x7b0)]['put'](_0x8f0871[_0x18c31e(0x7b0)]),_0xce2e25(),_0x126bf4(),await _0x4abd86('成功',_0x18c31e(0xd6b));}let _0x9e5758=[],_0x24ba39=[];function _0x510531(){const _0x152220=_0x7c5117,_0x193041=document[_0x152220(0xfa0)](_0x152220(0x364));_0x9e5758=[],_0x24ba39=[],_0x567cb0(),document[_0x152220(0xfa0)](_0x152220(0x1064))[_0x152220(0x63b)][_0x152220(0x1248)]='flex',document[_0x152220(0xfa0)]('data-clear-step-2')[_0x152220(0x63b)][_0x152220(0x1248)]=_0x152220(0x11b5),_0x193041[_0x152220(0x128f)][_0x152220(0x1327)]('visible');}function _0x567cb0(){const _0x488787=_0x7c5117,_0x38917a=document[_0x488787(0xfa0)](_0x488787(0x12ee));_0x38917a[_0x488787(0x1331)]='';const _0x1d0f18=document['createElement']('div');_0x1d0f18[_0x488787(0x1287)]=_0x488787(0x560),_0x1d0f18[_0x488787(0x8df)][_0x488787(0xbed)]=_0x488787(0xcb0),_0x1d0f18[_0x488787(0x1331)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22checkbox\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>'+(_0x8f0871['qzoneSettings'][_0x488787(0xff8)]||'我')+_0x488787(0x9da),_0x38917a[_0x488787(0x1155)](_0x1d0f18),Object['values'](_0x8f0871[_0x488787(0x1260)])['forEach'](_0x2fed4e=>{const _0x4aad9f=_0x488787;if(!_0x2fed4e['isGroup']){const _0x4e1bd8=document[_0x4aad9f(0xb4e)](_0x4aad9f(0xd53));_0x4e1bd8['className']=_0x4aad9f(0x560),_0x4e1bd8[_0x4aad9f(0x8df)][_0x4aad9f(0xbed)]=_0x2fed4e['id'],_0x4e1bd8[_0x4aad9f(0x1331)]=_0x4aad9f(0x4c6)+_0x2fed4e[_0x4aad9f(0x1023)]+_0x4aad9f(0x264),_0x38917a[_0x4aad9f(0x1155)](_0x4e1bd8);}});}function _0x1f693b(){const _0x456d6a=_0x7c5117,_0x495419=document['getElementById']('data-clear-type-list');_0x495419[_0x456d6a(0x1331)]='';const _0x45e2cd=[{'id':_0x456d6a(0xe5e),'name':'聊天记录','description':_0x456d6a(0x794)},{'id':'qzone','name':_0x456d6a(0x11e3),'description':'将清空选定角色的所有动态、评论和点赞。'},{'id':'calls','name':_0x456d6a(0xb2a),'description':_0x456d6a(0xa76)},{'id':_0x456d6a(0x4d9),'name':'心声','description':_0x456d6a(0x43f)},{'id':_0x456d6a(0x9ce),'name':_0x456d6a(0x11c9),'description':_0x456d6a(0x79e)},{'id':_0x456d6a(0xb69),'name':'收藏','description':_0x456d6a(0x5f0)},{'id':_0x456d6a(0x7b5),'name':_0x456d6a(0x1308),'description':'将清空角色的相册、QQ、浏览器、淘宝、日记、备忘录等所有模拟手机数据。'}];_0x45e2cd['forEach'](_0x514ea0=>{const _0x5a2214=_0x456d6a,_0x28de4d=document[_0x5a2214(0xb4e)](_0x5a2214(0xd53));_0x28de4d[_0x5a2214(0x1287)]=_0x5a2214(0x560),_0x28de4d['dataset'][_0x5a2214(0xfbe)]=_0x514ea0['id'],_0x28de4d[_0x5a2214(0x1331)]=_0x5a2214(0xa8d)+_0x514ea0['name']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22font-size:\x2012px;\x20color:\x20#888;\x20margin:\x204px\x200\x200;\x22>'+_0x514ea0[_0x5a2214(0x211)]+_0x5a2214(0x466),_0x495419[_0x5a2214(0x1155)](_0x28de4d);});}function _0x4c4a25(){const _0x11f784=_0x7c5117,_0x2f65cc=document['querySelectorAll'](_0x11f784(0x141c));if(_0x2f65cc[_0x11f784(0xac0)]===0x0){alert('请至少选择一个要清理的角色。');return;}_0x9e5758=Array[_0x11f784(0x3aa)](_0x2f65cc)[_0x11f784(0x556)](_0x299220=>_0x299220['dataset']['charId']),_0x1f693b(),document[_0x11f784(0xfa0)](_0x11f784(0x1064))[_0x11f784(0x63b)][_0x11f784(0x1248)]=_0x11f784(0x11b5),document['getElementById']('data-clear-step-2')[_0x11f784(0x63b)][_0x11f784(0x1248)]=_0x11f784(0x138c);}function _0x3d4e73(){const _0x20ae9e=_0x7c5117;document['getElementById'](_0x20ae9e(0x1451))['style'][_0x20ae9e(0x1248)]='none',document[_0x20ae9e(0xfa0)](_0x20ae9e(0x1064))[_0x20ae9e(0x63b)][_0x20ae9e(0x1248)]=_0x20ae9e(0x138c),document[_0x20ae9e(0x2a1)]('#data-clear-char-list\x20.clear-posts-item')[_0x20ae9e(0x458)](_0x42a3b0=>{const _0x6ccbcd=_0x20ae9e;_0x9e5758[_0x6ccbcd(0xf95)](_0x42a3b0[_0x6ccbcd(0x8df)][_0x6ccbcd(0xbed)])&&_0x42a3b0['classList'][_0x6ccbcd(0x1327)](_0x6ccbcd(0xaa0));});}async function _0x56fb6e(){const _0x4af1f0=_0x7c5117,_0x44df4d=document[_0x4af1f0(0x2a1)](_0x4af1f0(0x653));if(_0x44df4d[_0x4af1f0(0xac0)]===0x0){alert(_0x4af1f0(0xadd));return;}_0x24ba39=Array[_0x4af1f0(0x3aa)](_0x44df4d)[_0x4af1f0(0x556)](_0x21b4d8=>_0x21b4d8[_0x4af1f0(0x8df)][_0x4af1f0(0xfbe)]);const _0x5d6117=await _0x3f65ed('最后确认！',_0x4af1f0(0x14fb),{'confirmButtonClass':_0x4af1f0(0x611),'confirmText':_0x4af1f0(0x1464)});if(!_0x5d6117)return;await _0x4abd86(_0x4af1f0(0x3e1),_0x4af1f0(0x1e3));try{await _0x372b85[_0x4af1f0(0xf81)]('rw',_0x372b85['tables'],async()=>{const _0x25df51=_0x4af1f0;for(const _0xbc422c of _0x9e5758){for(const _0x15c486 of _0x24ba39){if(_0x15c486==='chat'){if(_0xbc422c===_0x25df51(0xcb0)){const _0x30e093=await _0x372b85[_0x25df51(0x1260)][_0x25df51(0x3bc)]();for(const _0x2c769e of _0x30e093){_0x2c769e[_0x25df51(0xc88)]=_0x2c769e[_0x25df51(0xc88)][_0x25df51(0xde7)](_0x104fc0=>_0x104fc0[_0x25df51(0xc92)]!=='user'),await _0x372b85[_0x25df51(0x1260)][_0x25df51(0x11d5)](_0x2c769e);}}else{const _0xf7c0c6=await _0x372b85[_0x25df51(0x1260)]['get'](_0xbc422c);_0xf7c0c6&&(_0xf7c0c6[_0x25df51(0xc88)]=[],_0xf7c0c6[_0x25df51(0xfb3)]='...',_0xf7c0c6[_0x25df51(0xa30)]='...',Array[_0x25df51(0x345)](_0xf7c0c6['nameHistory'])&&(_0xf7c0c6[_0x25df51(0xba7)]=[]),_0xf7c0c6[_0x25df51(0x12d7)]&&(_0xf7c0c6[_0x25df51(0x12d7)]['myNickname']='我'),await _0x372b85[_0x25df51(0x1260)][_0x25df51(0x11d5)](_0xf7c0c6));}}if(_0x15c486==='qzone'){const _0x3ffe5b=_0xbc422c===_0x25df51(0xcb0)?_0x25df51(0xcb0):_0xbc422c;await _0x372b85[_0x25df51(0x12c2)][_0x25df51(0xdc7)](_0x25df51(0x11dd))[_0x25df51(0x8c2)](_0x3ffe5b)[_0x25df51(0xf10)]();}_0x15c486==='calls'&&_0xbc422c!==_0x25df51(0xcb0)&&await _0x372b85[_0x25df51(0xe73)][_0x25df51(0xdc7)](_0x25df51(0xe94))['equals'](_0xbc422c)[_0x25df51(0xf10)]();if(_0x15c486==='thoughts'&&_0xbc422c!==_0x25df51(0xcb0)){const _0x25843e=await _0x372b85[_0x25df51(0x1260)][_0x25df51(0x70d)](_0xbc422c);_0x25843e&&(_0x25843e[_0x25df51(0x1378)]=[],_0x25843e['heartfeltVoice']='...',_0x25843e[_0x25df51(0xa30)]=_0x25df51(0x1111),await _0x372b85[_0x25df51(0x1260)][_0x25df51(0x11d5)](_0x25843e));}if(_0x15c486===_0x25df51(0x9ce)&&_0xbc422c!==_0x25df51(0xcb0)){const _0x1c4a49=await _0x372b85[_0x25df51(0x1260)]['get'](_0xbc422c);_0x1c4a49&&(_0x1c4a49[_0x25df51(0x1312)]=[],await _0x372b85[_0x25df51(0x1260)]['put'](_0x1c4a49));}_0x15c486===_0x25df51(0xb69)&&(_0xbc422c===_0x25df51(0xcb0)?(await _0x372b85[_0x25df51(0xb69)]['where'](_0x25df51(0x682))[_0x25df51(0x8c2)](_0x25df51(0x1b9))['filter'](_0x2722e7=>_0x2722e7[_0x25df51(0x1469)][_0x25df51(0x11dd)]===_0x25df51(0xcb0))[_0x25df51(0xf10)](),await _0x372b85[_0x25df51(0xb69)]['where'](_0x25df51(0x682))[_0x25df51(0x8c2)](_0x25df51(0x659))['filter'](_0x2aa005=>_0x2aa005[_0x25df51(0x1469)][_0x25df51(0xc92)]==='user')[_0x25df51(0xf10)]()):(await _0x372b85[_0x25df51(0xb69)][_0x25df51(0xdc7)](_0x25df51(0x682))[_0x25df51(0x8c2)](_0x25df51(0x659))[_0x25df51(0x1153)](_0x717dbb=>_0x717dbb['chatId']===_0xbc422c)['delete'](),await _0x372b85['favorites'][_0x25df51(0xdc7)]('type')[_0x25df51(0x8c2)]('qzone_post')[_0x25df51(0xde7)](_0x9231aa=>_0x9231aa[_0x25df51(0x1469)][_0x25df51(0x11dd)]===_0xbc422c)[_0x25df51(0xf10)](),await _0x372b85['favorites'][_0x25df51(0xdc7)](_0x25df51(0x682))[_0x25df51(0x8c2)](_0x25df51(0xbaa))[_0x25df51(0xde7)](_0x2c899e=>_0x2c899e[_0x25df51(0x1469)]['characterId']===_0xbc422c)[_0x25df51(0xf10)](),await _0x372b85[_0x25df51(0xb69)][_0x25df51(0xdc7)]('type')[_0x25df51(0x8c2)](_0x25df51(0xb2d))[_0x25df51(0xde7)](_0x1ffe49=>_0x1ffe49[_0x25df51(0x1469)]['characterId']===_0xbc422c)[_0x25df51(0xf10)](),await _0x372b85[_0x25df51(0xb69)][_0x25df51(0xdc7)](_0x25df51(0x682))[_0x25df51(0x8c2)](_0x25df51(0x36a))[_0x25df51(0xde7)](_0x5f0d93=>_0x5f0d93[_0x25df51(0x1469)][_0x25df51(0xfd7)]===_0xbc422c)[_0x25df51(0xf10)]()));if(_0x15c486==='cphone'&&_0xbc422c!==_0x25df51(0xcb0)){const _0x5b6848=await _0x372b85[_0x25df51(0x1260)][_0x25df51(0x70d)](_0xbc422c);_0x5b6848&&(_0x5b6848[_0x25df51(0x135d)]=[],_0x5b6848[_0x25df51(0xa1d)]=[],_0x5b6848['simulatedBrowserHistory']=[],_0x5b6848[_0x25df51(0x1e2)]=null,_0x5b6848[_0x25df51(0x674)]=[],_0x5b6848[_0x25df51(0xb26)]=[],_0x5b6848[_0x25df51(0x72f)]=[],_0x5b6848[_0x25df51(0x1384)]=[],_0x5b6848[_0x25df51(0x210)]=[],await _0x372b85['chats']['put'](_0x5b6848));}}}}),await _0x3fa188(),await _0x2d75fb(),document['getElementById'](_0x4af1f0(0x364))[_0x4af1f0(0x128f)][_0x4af1f0(0x443)]('visible'),await _0x4abd86('清理完成',_0x4af1f0(0x14a0));}catch(_0x5e83f8){console[_0x4af1f0(0x52b)](_0x4af1f0(0x41c),_0x5e83f8),await _0x4abd86(_0x4af1f0(0x10d6),_0x4af1f0(0x10b4)+_0x5e83f8['message']);}}async function _0x4745b8(_0x53294d,_0x57d2b8,_0x1b844d){const _0xef8560=_0x7c5117,_0x3da078=_0x1b844d['querySelector'](_0xef8560(0x276))[_0xef8560(0x1001)],_0x7e049a=await _0x2aedfc(_0xef8560(0xe4c)+_0x3da078+_0xef8560(0x629),[{'text':_0xef8560(0x234),'value':_0xef8560(0x8f4)},{'text':_0xef8560(0x6dc),'value':_0xef8560(0x3f5)}]);let _0x4726aa=null;if(_0x7e049a==='local')_0x4726aa=await _0x468818();else{if(_0x7e049a===_0xef8560(0x3f5)){const _0x46d7b4=_0x57d2b8===_0xef8560(0x7b5)?_0x8f0871[_0xef8560(0x7b0)][_0xef8560(0xa61)][_0x53294d]:_0x8f0871[_0xef8560(0x7b0)]['appIcons'][_0x53294d],_0x32d08f=_0x46d7b4[_0xef8560(0x9b8)](_0xef8560(0x1249)),_0x3d661a=_0x32d08f?'':_0x46d7b4;_0x4726aa=await _0x131a69('更换图标',_0xef8560(0x7fb),_0x3d661a,_0xef8560(0x3f5));}}if(_0x4726aa&&_0x4726aa[_0xef8560(0xa06)]()){const _0x38e00f=_0x4726aa[_0xef8560(0xa06)]();_0x57d2b8===_0xef8560(0x7b5)?_0x8f0871[_0xef8560(0x7b0)][_0xef8560(0xa61)][_0x53294d]=_0x38e00f:_0x8f0871[_0xef8560(0x7b0)][_0xef8560(0x544)][_0x53294d]=_0x38e00f,_0x1b844d[_0xef8560(0xfb1)]('.icon-preview')[_0xef8560(0x53e)]=_0x38e00f;}else _0x4726aa!==null&&alert(_0xef8560(0x9c5));}async function _0x5f3df4(){const _0xd828f6=_0x7c5117,_0x40eb3a=await _0x3f65ed(_0xd828f6(0x5fd),_0xd828f6(0xdea),{'confirmButtonClass':'btn-danger','confirmText':_0xd828f6(0x53a)});if(!_0x40eb3a)return;await _0x4abd86('请稍候...',_0xd828f6(0x24d));let _0x35462b={'found':0x0,'compressed':0x0,'skipped':0x0,'originalSize':0x0,'newSize':0x0};try{console[_0xd828f6(0x4ee)](_0xd828f6(0x7d7));const _0x2134b0=['chats',_0xd828f6(0x7b0),_0xd828f6(0x9dd),'userStickers',_0xd828f6(0x753)],_0x29e888=[];for(const _0x5760f5 of _0x2134b0){const _0x55da79=_0x372b85[_0xd828f6(0x810)](_0x5760f5),_0x3a97b8=await _0x55da79[_0xd828f6(0x3bc)]();_0x29e888[_0xd828f6(0x481)]({'tableName':_0x5760f5,'records':_0x3a97b8});}console['log'](_0xd828f6(0x501));for(const _0x41890c of _0x29e888){for(const _0x42f313 of _0x41890c[_0xd828f6(0xeaa)]){await _0x1d6c1b(_0x42f313,_0x35462b);}}console[_0xd828f6(0x4ee)](_0xd828f6(0x303)),await _0x372b85[_0xd828f6(0xf81)]('rw',_0x2134b0,async()=>{const _0x3abe3a=_0xd828f6;for(const _0x3a3783 of _0x29e888){await _0x372b85['table'](_0x3a3783[_0x3abe3a(0x368)])[_0x3abe3a(0x65d)](_0x3a3783['records']);}});const _0x955180=_0x35462b[_0xd828f6(0x10b6)]-_0x35462b[_0xd828f6(0x41e)],_0x2cd2e7=_0x35462b[_0xd828f6(0x10b6)]>0x0?(_0x955180/_0x35462b[_0xd828f6(0x10b6)]*0x64)['toFixed'](0x2):0x0;await _0x4abd86(_0xd828f6(0xb94),_0xd828f6(0x10ed)+_0x35462b['found']+'\x20张本地图片<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-\x20成功压缩\x20'+_0x35462b['compressed']+_0xd828f6(0xd8a)+_0x35462b[_0xd828f6(0xae7)]+_0xd828f6(0x1230)+(_0x955180/0x400/0x400)[_0xd828f6(0x3b8)](0x2)+_0xd828f6(0x792)+_0x2cd2e7+_0xd828f6(0x10d1));}catch(_0x1aa64c){console[_0xd828f6(0x52b)]('图片压缩过程中发生错误:',_0x1aa64c),await _0x4abd86(_0xd828f6(0xa2c),_0xd828f6(0x10b4)+_0x1aa64c[_0xd828f6(0x790)]);}}function _0x54d2a3(_0x4f00dc,_0x563b5d=''){const _0x125265=_0x7c5117;let _0x579ce0=0x0;for(const _0x23313b in _0x4f00dc){if(_0x4f00dc[_0x125265(0xabf)](_0x23313b)){const _0x3aa182=_0x4f00dc[_0x23313b];if(typeof _0x3aa182===_0x125265(0x857)&&_0x3aa182[_0x125265(0x9b8)](_0x125265(0x1249))){const _0x4f7aaa=_0x563b5d===_0x125265(0x7b0)&&(_0x23313b===_0x125265(0xf61)||_0x23313b==='cphoneWallpaper'||_0x23313b==='globalChatBackground')||_0x563b5d===_0x125265(0x275)||_0x563b5d===_0x125265(0x12d7)&&_0x23313b==='background'||(_0x563b5d===_0x125265(0x544)||_0x563b5d===_0x125265(0xa61));!_0x4f7aaa&&(_0x579ce0+=_0x3aa182[_0x125265(0xac0)]);}else typeof _0x3aa182==='object'&&_0x3aa182!==null&&(_0x579ce0+=_0x54d2a3(_0x3aa182,_0x23313b));}}return _0x579ce0;}async function _0x27e1f6(){const _0xc73652=_0x7c5117,_0x2a5968=document[_0xc73652(0xfa0)](_0xc73652(0x18a));if(!_0x2a5968)return;_0x2a5968[_0xc73652(0x1331)]=_0xc73652(0xc94);try{let _0x5c5b90=0x0;const _0x1d6f47=[_0xc73652(0x1260),_0xc73652(0x7b0),_0xc73652(0x9dd),_0xc73652(0x413),'customAvatarFrames'];for(const _0x2abf68 of _0x1d6f47){const _0x482d9a=_0x372b85[_0xc73652(0x810)](_0x2abf68);await _0x482d9a[_0xc73652(0x13d1)](_0x603cfc=>{_0x5c5b90+=_0x54d2a3(_0x603cfc);});}const _0x452138=(_0x5c5b90/0x400/0x400)[_0xc73652(0x3b8)](0x2);_0x2a5968[_0xc73652(0x1331)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22image-size-label\x22>本地图片(头像/表情/头像框/等)大小:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22image-size-value\x22><strong>'+_0x452138+'\x20MB</strong></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}catch(_0x1337dc){console[_0xc73652(0x52b)]('计算图片总大小时出错:',_0x1337dc),_0x2a5968[_0xc73652(0x1331)]=_0xc73652(0x566);}}async function _0x1d6c1b(_0x1ea48f,_0x5d7414,_0xcb01d3=''){const _0x3a3826=_0x7c5117;for(const _0x1f901a in _0x1ea48f){if(_0x1ea48f[_0x3a3826(0xabf)](_0x1f901a)){const _0x5a988f=_0x1ea48f[_0x1f901a];if(typeof _0x5a988f==='string'&&_0x5a988f['startsWith'](_0x3a3826(0x1249))){const _0x5d8847=_0xcb01d3===_0x3a3826(0x7b0)&&(_0x1f901a===_0x3a3826(0xf61)||_0x1f901a==='cphoneWallpaper'||_0x1f901a==='globalChatBackground')||_0xcb01d3===_0x3a3826(0x275)||_0xcb01d3==='settings'&&_0x1f901a===_0x3a3826(0x1113)||(_0xcb01d3===_0x3a3826(0x544)||_0xcb01d3===_0x3a3826(0xa61));if(_0x5d8847)continue;_0x5d7414[_0x3a3826(0x125a)]++,_0x5d7414[_0x3a3826(0x10b6)]+=_0x5a988f[_0x3a3826(0xac0)];const _0x4a82dd=await _0x4b28ea(_0x5a988f);_0x4a82dd&&_0x4a82dd!==_0x5a988f?(_0x1ea48f[_0x1f901a]=_0x4a82dd,_0x5d7414[_0x3a3826(0x1263)]++,_0x5d7414[_0x3a3826(0x41e)]+=_0x4a82dd[_0x3a3826(0xac0)]):(_0x5d7414['skipped']++,_0x5d7414[_0x3a3826(0x41e)]+=_0x5a988f[_0x3a3826(0xac0)]);}else typeof _0x5a988f===_0x3a3826(0xf2e)&&_0x5a988f!==null&&await _0x1d6c1b(_0x5a988f,_0x5d7414,_0x1f901a);}}}async function _0x4b28ea(_0x275abf){const _0x34f51e=_0x7c5117;if(!_0x275abf[_0x34f51e(0x9b8)](_0x34f51e(0x1249)))return _0x275abf;try{const _0x17d214=await(await fetch(_0x275abf))[_0x34f51e(0x6ae)](),_0x2e26a8={'maxSizeMB':0.5,'maxWidthOrHeight':0x320,'useWebWorker':!![],'initialQuality':0.5,'fileType':_0x34f51e(0x1241)};console[_0x34f51e(0x4ee)](_0x34f51e(0xc3c)+(_0x17d214[_0x34f51e(0xbc3)]/0x400/0x400)[_0x34f51e(0x3b8)](0x2)+_0x34f51e(0x4dc));const _0x14f68b=await imageCompression(_0x17d214,_0x2e26a8);return console['log'](_0x34f51e(0x219)+(_0x14f68b['size']/0x400/0x400)[_0x34f51e(0x3b8)](0x2)+_0x34f51e(0x4dc)),new Promise((_0x1f9da2,_0x5e3bb1)=>{const _0x5daa25=_0x34f51e,_0x1d604f=new FileReader();_0x1d604f['onloadend']=()=>_0x1f9da2(_0x1d604f[_0x5daa25(0x4fe)]),_0x1d604f[_0x5daa25(0x14b0)]=_0x5e3bb1,_0x1d604f[_0x5daa25(0x101e)](_0x14f68b);});}catch(_0x545cd5){return console['error'](_0x34f51e(0x138a),_0x545cd5),_0x275abf;}}function _0x3db551(_0x9d70bc,_0x3db481){const _0x3942cc=_0x7c5117;if(!_0x9d70bc||!_0x3db481||typeof _0x9d70bc!==_0x3942cc(0x857)||typeof _0x3db481!==_0x3942cc(0x857))return 0x0;const _0x1c52a3=_0x9d70bc[_0x3942cc(0x505)]('.')[_0x3942cc(0x556)](Number),_0x2da9f7=_0x3db481[_0x3942cc(0x505)]('.')[_0x3942cc(0x556)](Number),_0x3855f7=Math[_0x3942cc(0xb70)](_0x1c52a3['length'],_0x2da9f7[_0x3942cc(0xac0)]);for(let _0x3f3114=0x0;_0x3f3114<_0x3855f7;_0x3f3114++){const _0x4ac865=_0x1c52a3[_0x3f3114]||0x0,_0x2cfc03=_0x2da9f7[_0x3f3114]||0x0;if(_0x4ac865>_0x2cfc03)return 0x1;if(_0x4ac865<_0x2cfc03)return-0x1;}return 0x0;}async function _0x15fa2c(){const _0x142176=_0x7c5117,_0x5710b3=_0x142176(0x999);try{const _0x160fa9=await fetch(_0x142176(0xb1b)+Date[_0x142176(0xc22)]());if(!_0x160fa9['ok']){console[_0x142176(0x7fa)](_0x142176(0xb27));return;}const _0x420fa6=await _0x160fa9[_0x142176(0xda3)](),_0x349f03=document['createElement'](_0x142176(0xd53));_0x349f03[_0x142176(0x1331)]=_0x420fa6;const _0x25fcd6=_0x349f03[_0x142176(0xfb1)](_0x142176(0x423));if(!_0x25fcd6){console[_0x142176(0x52b)]('更新通知文件中缺少\x20data-version\x20属性。');return;}const _0x5e108e=_0x25fcd6[_0x142176(0x8df)][_0x142176(0x397)],_0x1f54b1=localStorage[_0x142176(0xe2e)](_0x142176(0xc4e));!_0x1f54b1||_0x3db551(_0x5e108e,_0x1f54b1)>0x0?(console[_0x142176(0x4ee)](_0x142176(0x1572)+_0x5e108e+'\x20(已忽略版本:\x20'+(_0x1f54b1||'无')+')'),_0x22d712(_0x5e108e,_0x25fcd6[_0x142176(0x1331)])):console[_0x142176(0x4ee)]('当前通知版本\x20('+_0x5e108e+_0x142176(0x7d2));}catch(_0xd341b9){console['error'](_0x142176(0x14b7),_0xd341b9);}}function _0x22d712(_0x466053,_0x44a9bc){const _0x2e95a9=_0x7c5117,_0x114f59=document[_0x2e95a9(0xfa0)]('update-notice-modal'),_0x20636e=document[_0x2e95a9(0xfa0)](_0x2e95a9(0x98e)),_0x12d9d4=document[_0x2e95a9(0xfa0)](_0x2e95a9(0xc53)),_0x273bbb=document['getElementById'](_0x2e95a9(0xd86));_0x20636e[_0x2e95a9(0x1331)]=_0x44a9bc,_0x12d9d4[_0x2e95a9(0x9f0)]=()=>{const _0x2ab3a9=_0x2e95a9;_0x114f59[_0x2ab3a9(0x128f)][_0x2ab3a9(0x443)]('visible');},_0x273bbb[_0x2e95a9(0x9f0)]=()=>{const _0xd34d72=_0x2e95a9;localStorage[_0xd34d72(0x86f)](_0xd34d72(0xc4e),_0x466053),_0x114f59[_0xd34d72(0x128f)][_0xd34d72(0x443)](_0xd34d72(0xdcc)),console['log']('用户已忽略版本:\x20'+_0x466053);},_0x114f59[_0x2e95a9(0x128f)][_0x2e95a9(0x1327)](_0x2e95a9(0xdcc));}function _0x47ae99(){const _0xa473ef=_0x7c5117,_0x448c9e=document[_0xa473ef(0xfa0)](_0xa473ef(0x8c8));document[_0xa473ef(0xfa0)](_0xa473ef(0xbce))[_0xa473ef(0x4f6)]=_0x8f0871[_0xa473ef(0x7b0)][_0xa473ef(0xf17)]||0xc,document[_0xa473ef(0xfa0)](_0xa473ef(0x1569))[_0xa473ef(0x4f6)]=_0x8f0871[_0xa473ef(0x7b0)][_0xa473ef(0xdc6)]||0x14,_0x448c9e[_0xa473ef(0x128f)][_0xa473ef(0x1327)](_0xa473ef(0xdcc));}async function _0x5ad807(){const _0x4c8269=_0x7c5117,_0x522537=document[_0x4c8269(0xfa0)](_0x4c8269(0xbce)),_0xfaa15e=document['getElementById'](_0x4c8269(0x1569)),_0x4269ae=parseInt(_0x522537[_0x4c8269(0x4f6)]),_0x1e3f29=parseInt(_0xfaa15e[_0x4c8269(0x4f6)]);if(isNaN(_0x4269ae)||isNaN(_0x1e3f29)||_0x4269ae<0x1||_0x1e3f29<0x1){alert(_0x4c8269(0x151c));return;}if(_0x4269ae>_0x1e3f29){alert(_0x4c8269(0xb77));return;}_0x8f0871[_0x4c8269(0x7b0)][_0x4c8269(0xf17)]=_0x4269ae,_0x8f0871[_0x4c8269(0x7b0)][_0x4c8269(0xdc6)]=_0x1e3f29,await _0x372b85[_0x4c8269(0x7b0)][_0x4c8269(0x11d5)](_0x8f0871[_0x4c8269(0x7b0)]),document[_0x4c8269(0xfa0)](_0x4c8269(0x8c8))[_0x4c8269(0x128f)][_0x4c8269(0x443)](_0x4c8269(0xdcc)),await _0x4abd86(_0x4c8269(0x3d6),'豆瓣设置已更新！下次重新生成时将生效。');}async function _0x829e54(_0x28e42f){const _0x1edd8d=_0x7c5117,_0x1afa2a=document[_0x1edd8d(0xfa0)](_0x1edd8d(0xe30)),_0x34df41=document[_0x1edd8d(0xfa0)](_0x1edd8d(0xa6b));_0x34df41[_0x1edd8d(0x1331)]='';let _0x27d667=[];if(_0x28e42f==='global'){const _0xb8fc95=Object['values'](_0x8f0871[_0x1edd8d(0x1260)])[_0x1edd8d(0xde7)](_0x5d8654=>!_0x5d8654[_0x1edd8d(0x1364)]),_0x23bb24=await _0x372b85[_0x1edd8d(0x1269)][_0x1edd8d(0x3bc)]();_0x27d667=[{'id':_0x1edd8d(0xcb0),'name':_0x8f0871['qzoneSettings'][_0x1edd8d(0xff8)]||'我','originalName':_0x8f0871[_0x1edd8d(0x9dd)][_0x1edd8d(0xff8)]||'我','avatar':_0x8f0871[_0x1edd8d(0x9dd)][_0x1edd8d(0xc61)],'type':'user'},..._0xb8fc95[_0x1edd8d(0x556)](_0x794f8b=>({'id':_0x794f8b['id'],'name':_0x794f8b[_0x1edd8d(0x1023)],'originalName':_0x794f8b[_0x1edd8d(0x93e)],'avatar':_0x794f8b[_0x1edd8d(0x12d7)]['aiAvatar'],'type':_0x1edd8d(0xf34)})),..._0x23bb24[_0x1edd8d(0x556)](_0x299ab6=>({'id':_0x1edd8d(0xbec)+_0x299ab6['id'],'name':_0x299ab6[_0x1edd8d(0x1023)],'originalName':_0x299ab6[_0x1edd8d(0x1023)],'avatar':_0x299ab6['avatar'],'type':_0x1edd8d(0x807)}))],_0x212d1b[_0x1edd8d(0xe94)]=null;}else{const _0x21e579=_0x8f0871[_0x1edd8d(0x1260)][_0x8f0871['activeChatId']];if(!_0x21e579||!_0x21e579['isGroup'])return;_0x27d667=[{'id':_0x1edd8d(0xcb0),'name':_0x21e579[_0x1edd8d(0x12d7)][_0x1edd8d(0xda5)]||'我','originalName':_0x8f0871[_0x1edd8d(0x9dd)][_0x1edd8d(0xff8)]||'我','avatar':_0x21e579[_0x1edd8d(0x12d7)][_0x1edd8d(0x38a)],'type':_0x1edd8d(0xcb0)},..._0x21e579['members'][_0x1edd8d(0x556)](_0x3577ab=>{const _0x137d70=_0x1edd8d,_0x23faca=_0x8f0871[_0x137d70(0x1260)][_0x3577ab['id']],_0x200dbe=_0x3577ab[_0x137d70(0xc61)]||(_0x23faca?_0x23faca[_0x137d70(0x12d7)][_0x137d70(0xce8)]:_0x29d47b);return{'id':_0x3577ab['id'],'name':_0x3577ab[_0x137d70(0x5c9)],'originalName':_0x3577ab[_0x137d70(0x93e)],'avatar':_0x200dbe,'type':_0x3577ab['isNpc']?'npc':_0x137d70(0xf34)};})],_0x212d1b['chatId']=_0x8f0871[_0x1edd8d(0xac8)];}_0x27d667[_0x1edd8d(0x458)](_0x2ecb14=>{const _0x272cc1=_0x1edd8d,_0x339ac1=document['createElement']('div');_0x339ac1['className']=_0x272cc1(0x632),_0x339ac1['innerHTML']=_0x272cc1(0x60e)+JSON[_0x272cc1(0x7cc)](_0x2ecb14)+'\x27\x20'+(_0x2ecb14[_0x272cc1(0x682)]===_0x272cc1(0xcb0)?_0x272cc1(0x1371):_0x272cc1(0xb34))+_0x272cc1(0x19f)+_0x2ecb14[_0x272cc1(0xc61)]+_0x272cc1(0xfc8)+_0x2ecb14['name']+_0x272cc1(0x616),_0x34df41['appendChild'](_0x339ac1);}),_0x1afa2a[_0x1edd8d(0x128f)]['add']('visible');}async function _0x46ed0c(){const _0x325ea2=_0x7c5117,_0x36020b=document['querySelectorAll'](_0x325ea2(0x10a9)),_0x576242=_0x36020b['length'];let _0x44fa81=[];if(_0x576242===0x6)_0x212d1b['gameMode']='6p',_0x44fa81=['狼人','狼人','平民','平民',_0x325ea2(0x296),'猎人'];else{if(_0x576242===0x9)_0x212d1b[_0x325ea2(0x2d6)]='9p',_0x44fa81=['狼人','狼人','狼人','平民','平民','平民',_0x325ea2(0x296),'女巫','猎人'];else{if(_0x576242===0xc)_0x212d1b[_0x325ea2(0x2d6)]=_0x325ea2(0x2bf),_0x44fa81=['狼人','狼人','狼人','狼人','平民','平民','平民','平民','预言家','女巫','猎人','守卫'];else{alert(_0x325ea2(0x71f)+_0x576242+_0x325ea2(0x1511));return;}}}document[_0x325ea2(0xfa0)](_0x325ea2(0xe30))[_0x325ea2(0x128f)]['remove']('visible'),await _0x4abd86(_0x325ea2(0x741),_0x325ea2(0x1e4));for(let _0x5167bb=_0x44fa81[_0x325ea2(0xac0)]-0x1;_0x5167bb>0x0;_0x5167bb--){const _0x5d5692=Math[_0x325ea2(0x13e5)](Math[_0x325ea2(0x148a)]()*(_0x5167bb+0x1));[_0x44fa81[_0x5167bb],_0x44fa81[_0x5d5692]]=[_0x44fa81[_0x5d5692],_0x44fa81[_0x5167bb]];}const _0x27ac12=Array[_0x325ea2(0x3aa)](_0x36020b)[_0x325ea2(0x556)](_0xf1eb1d=>JSON['parse'](_0xf1eb1d['dataset'][_0x325ea2(0x300)]));_0x212d1b['players']=[];for(let _0x1e02a2=0x0;_0x1e02a2<_0x27ac12[_0x325ea2(0xac0)];_0x1e02a2++){const _0x453edb=_0x27ac12[_0x1e02a2],_0x18ab8f=_0x44fa81[_0x1e02a2];let _0x1fb29f=_0x325ea2(0x2ac);if(_0x453edb[_0x325ea2(0x682)]===_0x325ea2(0xf34)){const _0xc4042d=_0x8f0871[_0x325ea2(0x1260)][_0x453edb['id']];_0x1fb29f=_0xc4042d?_0xc4042d[_0x325ea2(0x12d7)]['aiPersona']:_0x325ea2(0x371);}else{if(_0x453edb[_0x325ea2(0x682)]===_0x325ea2(0x807)){const _0x84d139=await _0x372b85[_0x325ea2(0x1269)][_0x325ea2(0x3bc)](),_0x5963ab=_0x84d139[_0x325ea2(0x7ed)](_0x501324=>_0x325ea2(0xbec)+_0x501324['id']===_0x453edb['id']);_0x1fb29f=_0x5963ab?_0x5963ab['persona']:'未知设定的NPC';}else{if(_0x453edb[_0x325ea2(0x682)]==='user'){const _0x28078b=_0x212d1b[_0x325ea2(0xe94)]?_0x8f0871[_0x325ea2(0x1260)][_0x212d1b[_0x325ea2(0xe94)]]:null;_0x1fb29f=_0x28078b?_0x28078b['settings'][_0x325ea2(0xbbe)]:_0x325ea2(0x58f);}}}const _0x2b13d1={..._0x453edb,'role':_0x18ab8f,'isAlive':!![],'character_persona':_0x1fb29f};_0x18ab8f==='女巫'&&(_0x2b13d1[_0x325ea2(0x10f6)]=![],_0x2b13d1['poisonUsed']=![]),_0x18ab8f==='守卫'&&(_0x2b13d1[_0x325ea2(0x75b)]=null),_0x212d1b[_0x325ea2(0x12ae)][_0x325ea2(0x481)](_0x2b13d1);}_0x212d1b[_0x325ea2(0x684)]=!![],_0x212d1b['currentDay']=0x1,_0x212d1b['currentPhase']=_0x325ea2(0xe2b),_0x212d1b[_0x325ea2(0x622)]=[],_0x212d1b[_0x325ea2(0xc6b)]=[];const _0x4ed7a5=_0x44fa81[_0x325ea2(0xd68)]((_0xafaedd,_0x58ec33)=>{return _0xafaedd[_0x58ec33]=(_0xafaedd[_0x58ec33]||0x0)+0x1,_0xafaedd;},{}),_0x33bda5=Object[_0x325ea2(0x545)](_0x4ed7a5)[_0x325ea2(0x556)](([_0x1ca6b6,_0x184ea0])=>_0x1ca6b6+'\x20x'+_0x184ea0)['join']('、');_0x118ef7(_0x325ea2(0x431)+_0x576242+_0x325ea2(0x780)+_0x33bda5+'。');const _0x32ceb6=_0x212d1b['players'][_0x325ea2(0x7ed)](_0x278ec7=>_0x278ec7['id']===_0x325ea2(0xcb0));_0xe191cb(),_0x2d25e5(_0x325ea2(0x1b6)),_0x1bc03f(_0x32ceb6[_0x325ea2(0xc92)]);}function _0xe191cb(){const _0x3b0190=_0x7c5117,_0x49b174=document[_0x3b0190(0xfa0)](_0x3b0190(0x994));_0x49b174[_0x3b0190(0x1331)]='';const _0x4f3e8b=[..._0x212d1b[_0x3b0190(0x12ae)]][_0x3b0190(0x1376)]((_0x114e3e,_0x27a495)=>_0x114e3e[_0x3b0190(0x1533)]-_0x27a495['isAlive']);_0x4f3e8b['forEach']((_0x5af414,_0x342965)=>{const _0x349cf8=_0x3b0190,_0x11c8b9=_0x212d1b[_0x349cf8(0x12ae)][_0x349cf8(0xb22)](_0x4a60db=>_0x4a60db['id']===_0x5af414['id'])+0x1,_0x5a794c=document[_0x349cf8(0xb4e)](_0x349cf8(0xd53));_0x5a794c[_0x349cf8(0x1287)]=_0x349cf8(0x13ac);if(!_0x5af414['isAlive'])_0x5a794c['classList']['add'](_0x349cf8(0xa9e));_0x5a794c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x5af414['avatar']+_0x349cf8(0x1462)+_0x11c8b9+'.\x20'+_0x5af414[_0x349cf8(0x1023)]+_0x349cf8(0x616),_0x49b174['appendChild'](_0x5a794c);});const _0x4f705f=document[_0x3b0190(0xfa0)](_0x3b0190(0x399));_0x4f705f[_0x3b0190(0x1331)]='';for(let _0x4c5ed5=0x1;_0x4c5ed5<=_0x212d1b[_0x3b0190(0x4a4)];_0x4c5ed5++){const _0xd38b7a=[..._0x212d1b[_0x3b0190(0x622)][_0x3b0190(0xde7)](_0x1489dd=>_0x1489dd['day']===_0x4c5ed5),..._0x212d1b[_0x3b0190(0xc6b)][_0x3b0190(0xde7)](_0xddff3b=>_0xddff3b['day']===_0x4c5ed5)][_0x3b0190(0x1376)]((_0x17bb52,_0x275c32)=>(_0x17bb52[_0x3b0190(0xe55)]||0x0)-(_0x275c32['timestamp']||0x0));if(_0xd38b7a[_0x3b0190(0xac0)]>0x0){const _0x192052=document[_0x3b0190(0xb4e)]('div');_0x192052[_0x3b0190(0x1287)]=_0x3b0190(0x99c),_0x192052[_0x3b0190(0xc62)]=_0x3b0190(0x1333)+_0x4c5ed5+_0x3b0190(0xcf4),_0x192052[_0x3b0190(0x63b)][_0x3b0190(0x283)]=_0x3b0190(0x13ee),_0x4f705f[_0x3b0190(0x1155)](_0x192052),_0xd38b7a['forEach'](_0x28c6f7=>{const _0xc6cb6e=_0x3b0190,_0x24d507=document[_0xc6cb6e(0xb4e)](_0xc6cb6e(0xd53));_0x24d507['className']=_0xc6cb6e(0x34a)+_0x28c6f7[_0xc6cb6e(0x682)],_0x28c6f7['type']===_0xc6cb6e(0x369)?_0x24d507[_0xc6cb6e(0x1331)]=_0xc6cb6e(0xd32)+_0x28c6f7['speaker']+_0xc6cb6e(0x1427)+_0x28c6f7[_0xc6cb6e(0x1469)]:_0x24d507[_0xc6cb6e(0xc62)]=_0x28c6f7[_0xc6cb6e(0x1469)],_0x4f705f[_0xc6cb6e(0x1155)](_0x24d507);});}}_0x4f705f[_0x3b0190(0x54d)]=_0x4f705f[_0x3b0190(0x11b8)];const _0x310a5c={'start':_0x3b0190(0x1367),'night':'第'+_0x212d1b[_0x3b0190(0x4a4)]+_0x3b0190(0x1178),'day':'第'+_0x212d1b[_0x3b0190(0x4a4)]+'天\x20-\x20白天','discussion':'第'+_0x212d1b[_0x3b0190(0x4a4)]+'天\x20-\x20讨论','voting':'第'+_0x212d1b[_0x3b0190(0x4a4)]+_0x3b0190(0x1243),'gameover':_0x3b0190(0x7d0)};document[_0x3b0190(0xfa0)](_0x3b0190(0x1092))[_0x3b0190(0xc62)]=_0x3b0190(0xf64)+(_0x310a5c[_0x212d1b['currentPhase']]||_0x212d1b[_0x3b0190(0x562)]);}function _0x1bc03f(_0x1cc799){const _0x3f8586=_0x7c5117,_0x114a05={'狼人':_0x3f8586(0x140f),'平民':'你没有任何特殊能力，你的目标是通过投票放逐所有狼人。','预言家':_0x3f8586(0x94c),'猎人':_0x3f8586(0x5ae),'女巫':_0x3f8586(0x6be),'守卫':_0x3f8586(0x82c)};document[_0x3f8586(0xfa0)](_0x3f8586(0x11f5))[_0x3f8586(0xc62)]=_0x1cc799,document[_0x3f8586(0xfa0)]('werewolf-role-description')[_0x3f8586(0xc62)]=_0x114a05[_0x1cc799]||_0x3f8586(0x11f2),document[_0x3f8586(0xfa0)]('werewolf-role-modal')[_0x3f8586(0x128f)][_0x3f8586(0x1327)](_0x3f8586(0xdcc));}async function _0x3de327(){const _0x29b008=_0x7c5117;_0x212d1b[_0x29b008(0x562)]='第'+_0x212d1b[_0x29b008(0x4a4)]+_0x29b008(0x1178),_0x212d1b[_0x29b008(0x68c)]={},_0x118ef7('天黑请闭眼...'),_0xe191cb(),document['getElementById'](_0x29b008(0xa1f))[_0x29b008(0x63b)][_0x29b008(0x1248)]=_0x29b008(0x11b5),document[_0x29b008(0xfa0)]('werewolf-retry-btn')[_0x29b008(0x63b)][_0x29b008(0x1248)]=_0x29b008(0x11b5),await new Promise(_0x5e8d35=>setTimeout(_0x5e8d35,0x5dc));const _0x5e53bd=_0x212d1b[_0x29b008(0x12ae)][_0x29b008(0x7ed)](_0x45ac96=>_0x45ac96['role']==='守卫'&&_0x45ac96[_0x29b008(0x1533)]);if(_0x5e53bd){_0x118ef7('守卫请睁眼，请选择要守护的玩家。'),_0xe191cb();let _0x5a4eb2=null;if(_0x5e53bd['id']==='user')_0x5a4eb2=await _0x4d4ff7(_0x29b008(0x3b7),_0x5e53bd[_0x29b008(0x75b)]);else{const _0x17cf94=_0x212d1b[_0x29b008(0x12ae)][_0x29b008(0xde7)](_0x420ce3=>_0x420ce3['isAlive']&&_0x420ce3['id']!==_0x5e53bd[_0x29b008(0x75b)]);_0x17cf94['length']>0x0&&(_0x5a4eb2=_0x17cf94[Math['floor'](Math[_0x29b008(0x148a)]()*_0x17cf94[_0x29b008(0xac0)])]['id']);}_0x5a4eb2&&(_0x212d1b[_0x29b008(0x68c)][_0x29b008(0x12dc)]=_0x5a4eb2,_0x5e53bd['lastGuardedId']=_0x5a4eb2),_0x118ef7(_0x29b008(0x13a2)),_0xe191cb(),await new Promise(_0x32ab82=>setTimeout(_0x32ab82,0x5dc));}_0x118ef7(_0x29b008(0xf65)),_0xe191cb();const _0x1aeb84=_0x212d1b[_0x29b008(0x12ae)]['filter'](_0x3220ab=>_0x3220ab[_0x29b008(0xc92)]==='狼人'&&_0x3220ab['isAlive']),_0x1719d8=_0x1aeb84[_0x29b008(0x75d)](_0x257f8f=>_0x257f8f['id']===_0x29b008(0xcb0));let _0x9b6081=null;_0x212d1b['lastFailedAction']='wolfKill';try{if(_0x1719d8)_0x118ef7(_0x29b008(0xa8c)),_0xe191cb(),_0x9b6081=await _0xa257f9();else{if(_0x212d1b[_0x29b008(0x4a4)]===0x1){console[_0x29b008(0x4ee)]('第一夜，执行本地随机刀人逻辑...');const _0x2897f0=_0x212d1b[_0x29b008(0x12ae)][_0x29b008(0xde7)](_0x5abf65=>_0x5abf65['isAlive']&&_0x5abf65['role']!=='狼人');_0x2897f0[_0x29b008(0xac0)]>0x0&&(_0x9b6081=_0x2897f0[Math[_0x29b008(0x13e5)](Math[_0x29b008(0x148a)]()*_0x2897f0['length'])]['id']);}else _0x9b6081=await _0x2c5c0e();}_0x212d1b['lastFailedAction']=null;}catch(_0x47e974){console[_0x29b008(0x52b)](_0x29b008(0xc8a),_0x47e974),await _0x4abd86(_0x29b008(0x457),_0x29b008(0x14ce)),document['getElementById'](_0x29b008(0x73a))[_0x29b008(0x63b)]['display']=_0x29b008(0x127c);return;}_0x212d1b[_0x29b008(0x68c)]['killedId']=_0x9b6081,_0x118ef7(_0x29b008(0xf2b)),_0xe191cb(),await new Promise(_0x5816c8=>setTimeout(_0x5816c8,0x5dc));const _0x15403b=_0x212d1b['players'][_0x29b008(0x7ed)](_0x6b90d8=>_0x6b90d8[_0x29b008(0xc92)]==='女巫'&&_0x6b90d8[_0x29b008(0x1533)]);if(_0x15403b){_0x118ef7(_0x29b008(0x78b)),_0xe191cb();const _0x13f2b3=_0x212d1b[_0x29b008(0x12ae)][_0x29b008(0x7ed)](_0x1d3681=>_0x1d3681['id']===_0x212d1b[_0x29b008(0x68c)][_0x29b008(0xdf0)]),_0x1cf51a=_0x212d1b[_0x29b008(0x68c)][_0x29b008(0x12dc)]===_0x212d1b[_0x29b008(0x68c)][_0x29b008(0xdf0)],_0x48ad7a=_0x1cf51a||!_0x13f2b3?null:_0x13f2b3;if(_0x15403b['id']===_0x29b008(0xcb0)){let _0x5118c7=await _0x305e88(_0x48ad7a,_0x15403b);_0x5118c7[_0x29b008(0x3fc)]&&(_0x212d1b[_0x29b008(0x68c)][_0x29b008(0xe05)]=_0x212d1b[_0x29b008(0x68c)][_0x29b008(0xdf0)],_0x15403b[_0x29b008(0x10f6)]=!![]),_0x5118c7[_0x29b008(0xb49)]&&(_0x212d1b[_0x29b008(0x68c)][_0x29b008(0xa17)]=_0x5118c7[_0x29b008(0xb49)],_0x15403b[_0x29b008(0x923)]=!![]);}else{if(!_0x15403b[_0x29b008(0x10f6)]&&_0x48ad7a){let _0x540b31=0x0;_0x212d1b[_0x29b008(0x4a4)]===0x1?_0x540b31=0.3:_0x540b31=0.8,console['log']('AI女巫决策：今天是第'+_0x212d1b['currentDay']+_0x29b008(0xa6a)+_0x540b31*0x64+'%'),Math[_0x29b008(0x148a)]()<_0x540b31?(console['log'](_0x29b008(0x678)),_0x212d1b[_0x29b008(0x68c)]['savedId']=_0x212d1b[_0x29b008(0x68c)][_0x29b008(0xdf0)],_0x15403b[_0x29b008(0x10f6)]=!![]):console['log'](_0x29b008(0x137a));}if(!_0x212d1b[_0x29b008(0x68c)][_0x29b008(0xe05)]&&!_0x15403b[_0x29b008(0x923)]&&Math['random']()<0.5){const _0x376f03=_0x212d1b[_0x29b008(0x12ae)][_0x29b008(0xde7)](_0x5149c6=>_0x5149c6[_0x29b008(0x1533)]&&_0x5149c6['id']!==_0x212d1b[_0x29b008(0x68c)][_0x29b008(0xdf0)]);if(_0x376f03[_0x29b008(0xac0)]>0x0){const _0x266576=_0x376f03[Math['floor'](Math[_0x29b008(0x148a)]()*_0x376f03[_0x29b008(0xac0)])];_0x212d1b[_0x29b008(0x68c)][_0x29b008(0xa17)]=_0x266576['id'],_0x15403b[_0x29b008(0x923)]=!![],console[_0x29b008(0x4ee)](_0x29b008(0x1424)+_0x266576[_0x29b008(0x1023)]);}}}_0x118ef7(_0x29b008(0x675)),_0xe191cb(),await new Promise(_0x4dff71=>setTimeout(_0x4dff71,0x5dc));}const _0x2377f4=_0x212d1b[_0x29b008(0x12ae)][_0x29b008(0x7ed)](_0x26a14c=>_0x26a14c['role']==='预言家'&&_0x26a14c[_0x29b008(0x1533)]);if(_0x2377f4){_0x118ef7('预言家请睁眼，请选择要查验的玩家。'),_0xe191cb();if(_0x2377f4['id']===_0x29b008(0xcb0)){const _0x130907=await _0x4d4ff7('prophet'),_0x5f025f=_0x212d1b[_0x29b008(0x12ae)][_0x29b008(0x7ed)](_0x1754c6=>_0x1754c6['id']===_0x130907);if(_0x5f025f){const _0x1c4cad=_0x5f025f['role']==='狼人';await _0x4abd86(_0x29b008(0x6c3),'你查验的玩家\x20'+_0x5f025f[_0x29b008(0x1023)]+_0x29b008(0x1075)+(_0x1c4cad?'狼人':'好人')),_0x212d1b[_0x29b008(0x68c)][_0x29b008(0xd05)]={'target':_0x130907,'result':_0x1c4cad?'狼人':'好人'};}}else{const _0x1e4c92=_0x212d1b[_0x29b008(0x12ae)][_0x29b008(0xde7)](_0x3a4c53=>_0x3a4c53[_0x29b008(0x1533)]&&_0x3a4c53['id']!==_0x2377f4['id']);if(_0x1e4c92[_0x29b008(0xac0)]>0x0){const _0x39b24c=_0x1e4c92[Math[_0x29b008(0x13e5)](Math[_0x29b008(0x148a)]()*_0x1e4c92[_0x29b008(0xac0)])];_0x212d1b['nightActions']['prophetCheck']={'target':_0x39b24c['id'],'result':_0x39b24c[_0x29b008(0xc92)]==='狼人'?'狼人':'好人'};}}_0x118ef7('预言家已行动，预言家请闭眼。'),_0xe191cb(),await new Promise(_0x40eb8f=>setTimeout(_0x40eb8f,0x5dc));}_0xdf5190();}async function _0xdf5190(){const _0x2dad37=_0x7c5117;_0x212d1b[_0x2dad37(0x562)]='第'+_0x212d1b['currentDay']+_0x2dad37(0xe12),_0x212d1b['voteResults']={},_0x118ef7(_0x2dad37(0x606));const {killedId:_0x906b1,guardedId:_0x35d76d,savedId:_0x3ba3cf,poisonedId:_0x3113d6}=_0x212d1b[_0x2dad37(0x68c)],_0x47f89e=new Set();_0x906b1&&_0x906b1!==_0x35d76d&&_0x906b1!==_0x3ba3cf&&_0x47f89e[_0x2dad37(0x1327)](_0x906b1);_0x3113d6&&_0x47f89e['add'](_0x3113d6);if(_0x47f89e['size']===0x0)_0x118ef7('昨晚是平安夜。');else for(const _0x25744a of _0x47f89e){const _0x5182c0=_0x212d1b['players'][_0x2dad37(0x7ed)](_0x1ea8c1=>_0x1ea8c1['id']===_0x25744a);if(_0x5182c0&&_0x5182c0[_0x2dad37(0x1533)]){_0x5182c0[_0x2dad37(0x1533)]=![],_0x118ef7('昨晚\x20'+_0x5182c0[_0x2dad37(0x1023)]+_0x2dad37(0x5f2));if(_0x5182c0[_0x2dad37(0xc92)]==='猎人'){_0x118ef7(_0x2dad37(0xf62)),_0xe191cb();let _0xc69976=null;if(_0x5182c0['id']===_0x2dad37(0xcb0))_0xc69976=await _0x4d4ff7(_0x2dad37(0x1522));else{const _0x13486b=_0x212d1b[_0x2dad37(0x12ae)][_0x2dad37(0xde7)](_0x120028=>_0x120028[_0x2dad37(0x1533)]&&_0x120028['id']!==_0x5182c0['id']);_0x13486b['length']>0x0&&(_0xc69976=_0x13486b[Math[_0x2dad37(0x13e5)](Math[_0x2dad37(0x148a)]()*_0x13486b[_0x2dad37(0xac0)])]['id']);}const _0x461753=_0x212d1b[_0x2dad37(0x12ae)][_0x2dad37(0x7ed)](_0x5ad020=>_0x5ad020['id']===_0xc69976);_0x461753&&(_0x461753['isAlive']=![],_0x118ef7(_0x2dad37(0x13c9)+_0x461753[_0x2dad37(0x1023)]+'。'));}}}_0xe191cb();if(_0x544189())return;await _0x12c230();}async function _0x12c230(){const _0x372524=_0x7c5117;_0x118ef7(_0x372524(0xd7f)),_0xe191cb();const {proxyUrl:_0x54298b,apiKey:_0x8dc7d4,model:_0x3a823b}=_0x8f0871[_0x372524(0xa78)];if(!_0x54298b||!_0x8dc7d4||!_0x3a823b){alert(_0x372524(0x1237));return;}const _0x1c2a95=_0x94ad7c();_0x212d1b['lastFailedAction']=_0x372524(0x1008);try{await _0x4abd86(_0x372524(0x269),_0x372524(0x1150));let _0x3eed02=_0x54298b[_0x372524(0xf95)](_0x372524(0x9a5)),_0x6c5596=[{'role':_0x372524(0xcb0),'content':_0x372524(0x5d6)}],_0x479070=_0x1e2f27(_0x3a823b,_0x8dc7d4,_0x1c2a95,_0x6c5596);const _0x2e2536=_0x3eed02?await fetch(_0x479070[_0x372524(0x3f5)],_0x479070[_0x372524(0x3cc)]):await fetch(_0x54298b+_0x372524(0x1011),{'method':'POST','headers':{'Content-Type':'application/json','Authorization':_0x372524(0x681)+_0x8dc7d4},'body':JSON[_0x372524(0x7cc)]({'model':_0x3a823b,'messages':[{'role':_0x372524(0x1417),'content':_0x1c2a95},..._0x6c5596],'temperature':_0x8f0871[_0x372524(0x7b0)][_0x372524(0x14a5)]||0.95})});if(!_0x2e2536['ok']){const _0x3118c5=await _0x2e2536['json']();throw new Error(_0x372524(0x395)+_0x3118c5[_0x372524(0x52b)]['message']);}const _0x1c4777=await _0x2e2536[_0x372524(0xa2e)](),_0x5c880c=getGeminiResponseText(_0x1c4777),_0x15e9ae=_0x5c880c[_0x372524(0x1232)](/(\[[\s\S]*\])/);if(!_0x15e9ae)throw new Error(_0x372524(0x57f)+_0x5c880c);const _0x32b465=JSON['parse'](_0x15e9ae[0x0]);for(const _0xc7997d of _0x32b465){_0xc7997d[_0x372524(0x239)]&&_0xc7997d[_0x372524(0x369)]&&(_0x544711(_0xc7997d[_0x372524(0x239)],_0xc7997d[_0x372524(0x369)]),_0xe191cb(),await new Promise(_0x31baa8=>setTimeout(_0x31baa8,0x5dc+Math[_0x372524(0x148a)]()*0x7d0)));}_0x212d1b[_0x372524(0x12b4)]=null;}catch(_0x3332f4){console['error'](_0x372524(0x1177),_0x3332f4),await _0x4abd86(_0x372524(0x1088),'讨论无法开始，游戏暂停。请点击右上角的“重试”按钮继续。\x0a错误:\x20'+_0x3332f4['message']),document['getElementById'](_0x372524(0x73a))[_0x372524(0x63b)][_0x372524(0x1248)]=_0x372524(0x127c);return;}const _0x369ab9=_0x212d1b['players']['find'](_0x4572d5=>_0x4572d5['id']===_0x372524(0xcb0)),_0x291d70=document[_0x372524(0xfa0)]('werewolf-action-bar'),_0x8116db=document[_0x372524(0xfa0)](_0x372524(0xd30)),_0x443e35=document[_0x372524(0xfa0)]('werewolf-finish-speech-btn'),_0x205610=document[_0x372524(0xfa0)]('werewolf-user-input');_0x291d70[_0x372524(0x63b)][_0x372524(0x1248)]='flex';if(_0x369ab9&&_0x369ab9[_0x372524(0x1533)]){_0x8116db[_0x372524(0xc62)]='等待回应',_0x443e35[_0x372524(0xc62)]=_0x372524(0x744),_0x8116db['style'][_0x372524(0x1248)]='block',_0x443e35[_0x372524(0x63b)]['display']='block',_0x205610[_0x372524(0x104b)]=![],_0x205610[_0x372524(0x14ca)]=_0x372524(0xd3d),_0x205610[_0x372524(0x10c7)]();const _0x53469b=_0x8116db[_0x372524(0xb5c)](!![]);_0x8116db['parentNode'][_0x372524(0x5d2)](_0x53469b,_0x8116db),_0x53469b[_0x372524(0x7b8)](_0x372524(0xb4a),_0x4f9302);const _0x338143=_0x443e35[_0x372524(0xb5c)](!![]);_0x443e35[_0x372524(0xcdd)][_0x372524(0x5d2)](_0x338143,_0x443e35),_0x338143[_0x372524(0x7b8)](_0x372524(0xb4a),_0x253776);}else{_0x118ef7(_0x372524(0x130f)),_0xe191cb(),_0x8116db['textContent']=_0x372524(0xdc2),_0x443e35[_0x372524(0xc62)]='进入投票',_0x8116db[_0x372524(0x63b)][_0x372524(0x1248)]='block',_0x443e35[_0x372524(0x63b)][_0x372524(0x1248)]=_0x372524(0x127c),_0x205610[_0x372524(0x104b)]=!![],_0x205610[_0x372524(0x14ca)]=_0x372524(0x1500);const _0x504801=_0x8116db[_0x372524(0xb5c)](!![]);_0x8116db['parentNode'][_0x372524(0x5d2)](_0x504801,_0x8116db),_0x504801['addEventListener']('click',_0x247002);const _0x33c4e4=_0x443e35[_0x372524(0xb5c)](!![]);_0x443e35[_0x372524(0xcdd)][_0x372524(0x5d2)](_0x33c4e4,_0x443e35),_0x33c4e4['addEventListener'](_0x372524(0xb4a),_0x204708);}}function _0x94ad7c(){const _0x11d3f2=_0x7c5117,_0x539d02=_0x212d1b['players'][_0x11d3f2(0xde7)](_0x216aaa=>_0x216aaa[_0x11d3f2(0x1533)]),_0x5df05a=_0x212d1b[_0x11d3f2(0x12ae)]['find'](_0x4e56e6=>_0x4e56e6['id']===_0x11d3f2(0xcb0)),_0x5bad55=_0x5df05a?_0x5df05a[_0x11d3f2(0x1023)]:'用户',_0x1e679c=_0x539d02[_0x11d3f2(0x75d)](_0x2ddcb2=>_0x2ddcb2['id']===_0x11d3f2(0xcb0));let _0x2a40ba=_0x11d3f2(0x7c5);_0x2a40ba+=_0x11d3f2(0x1038),_0x539d02[_0x11d3f2(0x458)]((_0x492617,_0x53e7e6)=>{const _0x4f9f82=_0x11d3f2,_0x2ecbcd=_0x212d1b[_0x4f9f82(0x12ae)][_0x4f9f82(0xb22)](_0x17cf48=>_0x17cf48['id']===_0x492617['id'])+0x1;let _0x562ca8='';const _0x35211e=_0x8f0871['chats'][_0x492617['id']];if(_0x35211e){const _0x95d7c0=_0x539d02[_0x4f9f82(0xde7)](_0x5d76d0=>_0x5d76d0['id']!==_0x492617['id']&&_0x8f0871[_0x4f9f82(0x1260)][_0x5d76d0['id']]&&_0x8f0871[_0x4f9f82(0x1260)][_0x5d76d0['id']][_0x4f9f82(0xdbf)]===_0x35211e[_0x4f9f82(0xdbf)]&&_0x35211e[_0x4f9f82(0xdbf)]!==null)[_0x4f9f82(0x556)](_0x19da05=>_0x19da05[_0x4f9f82(0x1023)])['join']('、');_0x95d7c0&&(_0x562ca8+='-\x20**你的好友\x20(必须保护)**:\x20你和\x20'+_0x95d7c0+_0x4f9f82(0x1328));}_0x492617['id']!=='user'&&(_0x562ca8+=_0x4f9f82(0xc74)+_0x5bad55+_0x4f9f82(0x133e));_0x2a40ba+=_0x4f9f82(0x859)+_0x2ecbcd+_0x4f9f82(0x89d)+_0x492617[_0x4f9f82(0x1023)]+_0x4f9f82(0xe25)+_0x492617['originalName']+_0x4f9f82(0x349)+(_0x492617['id']===_0x4f9f82(0xcb0)?_0x4f9f82(0xf90):_0x4f9f82(0x309))+_0x4f9f82(0x869)+_0x492617[_0x4f9f82(0xae5)]+'\x0a';if(_0x492617[_0x4f9f82(0x682)]===_0x4f9f82(0xf34)){const _0xe0a755=_0x8f0871[_0x4f9f82(0x1260)][_0x492617['id']];if(_0xe0a755&&_0xe0a755[_0x4f9f82(0x1312)]&&_0xe0a755['longTermMemory'][_0x4f9f82(0xac0)]>0x0){const _0xffe6fc=_0xe0a755[_0x4f9f82(0x1312)][_0x4f9f82(0x556)](_0x161733=>_0x161733[_0x4f9f82(0x1469)])['join'](';\x20');_0x2a40ba+='-\x20**长期记忆\x20(必须参考)**:\x20'+_0xffe6fc+'\x0a';}}_0x562ca8&&(_0x2a40ba+='\x0a-\x20**你的社交关系\x20(必须参考)**:\x0a'+_0x562ca8);});let _0x310ec9='#\x20昨晚事件总结\x20(Night\x20Event\x20Summary)\x0a';_0x310ec9+=_0x11d3f2(0xb30);const _0x36e5b3=_0x212d1b[_0x11d3f2(0x622)][_0x11d3f2(0xde7)](_0x44b935=>_0x44b935['content']['includes'](_0x11d3f2(0xcbb))&&_0x44b935[_0x11d3f2(0x2e3)]===_0x212d1b[_0x11d3f2(0x4a4)]);_0x36e5b3['length']===0x0?_0x310ec9+=_0x11d3f2(0x95d):_0x36e5b3[_0x11d3f2(0x458)](_0x461973=>{const _0x313b52=_0x11d3f2;_0x310ec9+='-\x20'+_0x461973[_0x313b52(0x1469)]+'\x0a';});let _0x4826ac=_0x11d3f2(0x10da);if(_0x212d1b[_0x11d3f2(0x4a4)]>0x1)for(let _0x173e04=0x1;_0x173e04<_0x212d1b[_0x11d3f2(0x4a4)];_0x173e04++){_0x4826ac+='\x0a**---\x20第\x20'+_0x173e04+_0x11d3f2(0xc4f);const _0x58615b=_0x212d1b[_0x11d3f2(0x622)][_0x11d3f2(0xde7)](_0x4610d4=>_0x4610d4['day']===_0x173e04&&(_0x4610d4[_0x11d3f2(0x1469)][_0x11d3f2(0xf95)]('死亡')||_0x4610d4['content'][_0x11d3f2(0xf95)]('放逐')));_0x58615b[_0x11d3f2(0xac0)]>0x0?_0x4826ac+=_0x11d3f2(0xf09)+_0x58615b['map'](_0x78ebc4=>_0x78ebc4[_0x11d3f2(0x1469)])['join']('\x20')+'\x0a':_0x4826ac+=_0x11d3f2(0xe32);const _0x12eb3e=_0x212d1b[_0x11d3f2(0xc6b)][_0x11d3f2(0xde7)](_0x3e69ab=>_0x3e69ab['day']===_0x173e04);_0x12eb3e[_0x11d3f2(0xac0)]>0x0&&(_0x4826ac+=_0x11d3f2(0x2fc)+_0x12eb3e[_0x11d3f2(0x556)](_0x19b08e=>'-\x20'+_0x19b08e['speaker']+':\x20'+_0x19b08e[_0x11d3f2(0x1469)])['join']('\x0a')+'\x0a');}else _0x4826ac+='(今天是第一天，没有历史记录)\x0a';let _0x14a554='#\x20今日完整讨论记录\x20(Today\x27s\x20Full\x20Discussion\x20Record)\x0a';const _0x1eeec3=_0x212d1b[_0x11d3f2(0xc6b)][_0x11d3f2(0xde7)](_0xd664d=>_0xd664d[_0x11d3f2(0x2e3)]===_0x212d1b['currentDay']);_0x1eeec3[_0x11d3f2(0xac0)]>0x0?_0x14a554+=_0x1eeec3[_0x11d3f2(0x556)](_0x349fb0=>_0x11d3f2(0x6d2)+_0x349fb0[_0x11d3f2(0x1537)]+_0x11d3f2(0x1264)+_0x349fb0[_0x11d3f2(0x1469)])[_0x11d3f2(0xcc2)]('\x0a'):_0x14a554+='(你是第一个发言的人)';let _0x4f329d=_0x11d3f2(0x760);_0x539d02[_0x11d3f2(0x458)](_0x3641c2=>{const _0x354a50=_0x11d3f2;if(_0x3641c2['id']!==_0x354a50(0xcb0)){const _0x518912=_0x212d1b[_0x354a50(0x12ae)][_0x354a50(0xb22)](_0x5da5e4=>_0x5da5e4['id']===_0x3641c2['id'])+0x1;_0x4f329d+=_0x354a50(0x244)+_0x518912+_0x354a50(0x89d)+_0x3641c2[_0x354a50(0x1023)]+_0x354a50(0xcdf)+_0x3641c2[_0x354a50(0x93e)]+_0x354a50(0x136f)+_0x3641c2[_0x354a50(0xc92)]+_0x354a50(0x957);let _0x95dc99='';if(_0x3641c2[_0x354a50(0xc92)]==='狼人'){const _0x350c4c=_0x212d1b[_0x354a50(0x12ae)][_0x354a50(0xde7)](_0x239e76=>_0x239e76[_0x354a50(0xc92)]==='狼人'&&_0x239e76['id']!==_0x3641c2['id']&&_0x239e76['isAlive'])['map'](_0x2f4149=>_0x2f4149['name'])[_0x354a50(0xcc2)]('、');_0x95dc99+=_0x354a50(0x4f0)+(_0x350c4c||'无')+'\x0a';const _0x34cbdf=_0x212d1b[_0x354a50(0x12ae)][_0x354a50(0x7ed)](_0x606096=>_0x606096['id']===_0x212d1b[_0x354a50(0x68c)][_0x354a50(0xdf0)]);_0x95dc99+=_0x354a50(0xd71)+(_0x34cbdf?_0x34cbdf['name']:'空刀')+'\x0a';}if(_0x3641c2['role']===_0x354a50(0x296)&&_0x212d1b['nightActions']['prophetCheck']){const _0x108181=_0x212d1b[_0x354a50(0x12ae)]['find'](_0xdb97b8=>_0xdb97b8['id']===_0x212d1b['nightActions']['prophetCheck'][_0x354a50(0x10c2)]);_0x95dc99+=_0x354a50(0x114c)+_0x108181[_0x354a50(0x1023)]+'，TA的身份是：【'+_0x212d1b['nightActions'][_0x354a50(0xd05)][_0x354a50(0x4fe)]+'】\x0a';}if(_0x3641c2['role']==='女巫'){if(_0x212d1b[_0x354a50(0x68c)]['savedId']){const _0x1d56c9=_0x212d1b['players'][_0x354a50(0x7ed)](_0x5be703=>_0x5be703['id']===_0x212d1b[_0x354a50(0x68c)][_0x354a50(0xe05)]);_0x95dc99+=_0x354a50(0xd88)+_0x1d56c9[_0x354a50(0x1023)]+'。\x0a';}if(_0x212d1b[_0x354a50(0x68c)][_0x354a50(0xa17)]){const _0x39df45=_0x212d1b['players'][_0x354a50(0x7ed)](_0x6a23c3=>_0x6a23c3['id']===_0x212d1b[_0x354a50(0x68c)]['poisonedId']);_0x95dc99+='\x20\x20\x20\x20-\x20我昨晚用毒药毒了\x20'+_0x39df45[_0x354a50(0x1023)]+'。\x0a';}_0x95dc99+=_0x354a50(0x1562)+(_0x3641c2['antidoteUsed']?_0x354a50(0xe0c):_0x354a50(0xdb9))+'\x0a',_0x95dc99+=_0x354a50(0x84b)+(_0x3641c2['poisonUsed']?_0x354a50(0xe0c):_0x354a50(0xdb9))+'\x0a';}if(_0x3641c2[_0x354a50(0xc92)]==='守卫'){if(_0x212d1b[_0x354a50(0x68c)][_0x354a50(0x12dc)]){const _0xf195ed=_0x212d1b[_0x354a50(0x12ae)][_0x354a50(0x7ed)](_0x271289=>_0x271289['id']===_0x212d1b[_0x354a50(0x68c)][_0x354a50(0x12dc)]);_0x95dc99+=_0x354a50(0x44e)+_0xf195ed[_0x354a50(0x1023)]+'。\x0a';}else _0x95dc99+=_0x354a50(0x140a);}_0x95dc99===''&&(_0x95dc99='\x20\x20\x20\x20-\x20我没有掌握任何特殊的夜晚信息。\x0a');_0x4f329d+=_0x95dc99,_0x4f329d+='3.\x20\x20**我看到的公开信息\x20(所有人可见)**:\x0a\x20\x20\x20\x20-\x20**昨晚事件**:\x20'+_0x310ec9[_0x354a50(0x128a)](/\n/g,'\x20')+'\x0a\x20\x20\x20\x20-\x20**今日讨论**:\x20'+_0x14a554['replace'](/\n/g,'\x20')+_0x354a50(0x1370)+_0x3641c2[_0x354a50(0xae5)]+'\x0a\x20\x20\x20\x20-\x20**社交**:\x20\x0a';let _0x16e980='';const _0x116a36=_0x8f0871['chats'][_0x3641c2['id']];if(_0x116a36){const _0x5afe5e=_0x539d02[_0x354a50(0xde7)](_0x3f3ad9=>_0x3f3ad9['id']!==_0x3641c2['id']&&_0x8f0871[_0x354a50(0x1260)][_0x3f3ad9['id']]&&_0x8f0871[_0x354a50(0x1260)][_0x3f3ad9['id']]['groupId']===_0x116a36[_0x354a50(0xdbf)]&&_0x116a36[_0x354a50(0xdbf)]!==null)[_0x354a50(0x556)](_0x10d50c=>_0x10d50c['name'])['join']('、');_0x5afe5e&&(_0x16e980+=_0x354a50(0x6d8)+_0x5afe5e+_0x354a50(0x1368));}_0x3641c2['id']!==_0x354a50(0xcb0)&&(_0x16e980+=_0x354a50(0x6d8)+_0x5bad55+_0x354a50(0x608)),_0x16e980===''&&(_0x16e980=_0x354a50(0xd07)),_0x4f329d+=_0x16e980,_0x4f329d+=_0x354a50(0x640)+_0x5bad55+_0x354a50(0x14c8)+(_0x1eeec3[_0x354a50(0xac0)]>0x0?_0x354a50(0x590):_0x354a50(0x8dd))+_0x354a50(0x662)+_0x5bad55+'\x20被怀疑了，虽然我的逻辑也怀疑TA，但我的表演必须是维护TA的：“我不觉得'+_0x5bad55+_0x354a50(0x627)+_0x3641c2[_0x354a50(0xc92)]+_0x354a50(0x3bd)+_0x3641c2[_0x354a50(0xae5)][_0x354a50(0x9fe)](0x0,0x14)+_0x354a50(0x1050);}}),_0x4f329d+=_0x11d3f2(0x67a);const _0x44d053=_0x11d3f2(0xf13)+(_0x1e679c?_0x11d3f2(0x77e)+_0x5bad55+')':_0x11d3f2(0xa0f)+_0x5bad55+')')+_0x11d3f2(0x39d)+_0x2a40ba+_0x11d3f2(0xe23)+(_0x212d1b[_0x11d3f2(0x2d6)]===_0x11d3f2(0x2bf)?_0x11d3f2(0xb8c):_0x11d3f2(0x133d))+_0x11d3f2(0xda8)+_0x212d1b[_0x11d3f2(0x4a4)]+'\x20天的讨论环节。\x0a'+_0x310ec9+_0x11d3f2(0x5d8)+_0x539d02[_0x11d3f2(0x556)](_0x50d239=>_0x50d239[_0x11d3f2(0x1023)]+'\x20('+(_0x50d239['id']===_0x11d3f2(0xcb0)?'用户':'AI')+')')['join'](',\x20')+_0x11d3f2(0x4bc)+_0x5bad55+_0x11d3f2(0xfd4)+_0x4826ac+_0x11d3f2(0x85d)+_0x14a554+'\x0a\x0a'+_0x4f329d+_0x11d3f2(0x48a);return _0x44d053;}function _0x23fd95(_0xb1cf4){const _0xc52c2a=_0x7c5117;let _0x1bc7e1=_0xc52c2a(0x110f);const _0x28f0f0=_0xb1cf4[_0xc52c2a(0x622)]['find'](_0x17e447=>_0x17e447[_0xc52c2a(0x1469)][_0xc52c2a(0xf95)]('胜利'))?.['content']||_0xc52c2a(0x7dc);_0x1bc7e1+='###\x20最终结果:\x20'+_0x28f0f0+'\x0a\x0a',_0x1bc7e1+='###\x20玩家身份配置:\x0a',_0xb1cf4[_0xc52c2a(0x12ae)][_0xc52c2a(0x458)](_0x5365b4=>{const _0x110b66=_0xc52c2a,_0x1e8a56=_0x5365b4['isAlive']?'存活':_0x110b66(0x614);_0x1bc7e1+='-\x20'+_0x5365b4['name']+':\x20'+_0x5365b4['role']+'\x20('+_0x1e8a56+')\x0a';}),_0x1bc7e1+='\x0a###\x20详细对局流程:\x0a';for(let _0x1d4217=0x1;_0x1d4217<=_0xb1cf4[_0xc52c2a(0x4a4)];_0x1d4217++){_0x1bc7e1+='\x0a**---\x20第\x20'+_0x1d4217+'\x20天\x20---**\x0a';const _0x224908=_0xb1cf4[_0xc52c2a(0x622)][_0xc52c2a(0xde7)](_0x301254=>_0x301254['day']===_0x1d4217&&_0x301254[_0xc52c2a(0x1469)][_0xc52c2a(0xf95)]('死亡'));if(_0x224908[_0xc52c2a(0xac0)]>0x0)_0x1bc7e1+=_0xc52c2a(0x394)+_0x224908['map'](_0xc9660=>_0xc9660[_0xc52c2a(0x1469)])[_0xc52c2a(0xcc2)]('\x20')+'\x0a';else(_0x1d4217>0x1||_0x1d4217===0x1&&_0xb1cf4['currentDay']>0x1)&&(_0x1bc7e1+=_0xc52c2a(0x2d3));const _0x31a6c6=_0xb1cf4[_0xc52c2a(0xc6b)]['filter'](_0x3df530=>_0x3df530[_0xc52c2a(0x2e3)]===_0x1d4217);_0x31a6c6['length']>0x0&&(_0x1bc7e1+=_0xc52c2a(0x10db)+_0x31a6c6[_0xc52c2a(0x556)](_0x4c4f8a=>'-\x20'+_0x4c4f8a[_0xc52c2a(0x1537)]+':\x20'+_0x4c4f8a[_0xc52c2a(0x1469)])[_0xc52c2a(0xcc2)]('\x0a')+'\x0a');const _0x52f02a=_0xb1cf4[_0xc52c2a(0x622)]['find'](_0x2cc641=>_0x2cc641[_0xc52c2a(0x2e3)]===_0x1d4217&&_0x2cc641[_0xc52c2a(0x1469)][_0xc52c2a(0xf95)](_0xc52c2a(0x11f7)));_0x52f02a&&(_0x1bc7e1+=_0xc52c2a(0xdaa)+_0x52f02a[_0xc52c2a(0x1469)]+'\x0a');}return _0x1bc7e1+=_0xc52c2a(0x7c3),_0x1bc7e1;}async function _0x5ec460(_0x1b6b89){const _0x182963=_0x7c5117;let _0x174a9e=0x0;for(const _0x56ce20 of _0x212d1b['players']){if(_0x56ce20[_0x182963(0x682)]===_0x182963(0xf34)){const _0x5532b9=_0x8f0871['chats'][_0x56ce20['id']];if(_0x5532b9){const _0x1018a8={'content':_0x1b6b89,'timestamp':Date[_0x182963(0xc22)](),'source':_0x182963(0xf4e)};!_0x5532b9['longTermMemory']&&(_0x5532b9['longTermMemory']=[]),_0x5532b9[_0x182963(0x1312)][_0x182963(0x481)](_0x1018a8),await _0x372b85[_0x182963(0x1260)]['put'](_0x5532b9),_0x174a9e++;}}}return _0x174a9e;}async function _0x53a447(){const _0x1860d7=_0x7c5117;if(!_0x212d1b[_0x1860d7(0x684)]&&_0x212d1b['currentPhase']===_0x1860d7(0xd16)){await _0x4abd86(_0x1860d7(0x3e1),_0x1860d7(0xd4b));try{const _0x1a89fe=_0x23fd95(_0x212d1b),_0x4f3a36=await _0x5ec460(_0x1a89fe);await _0x4abd86('成功',_0x1860d7(0x1303)+_0x4f3a36+_0x1860d7(0x10ee));}catch(_0x4b2d01){console[_0x1860d7(0x52b)](_0x1860d7(0xb25),_0x4b2d01),await _0x4abd86('失败','手动注入记忆时出错:\x20'+_0x4b2d01[_0x1860d7(0x790)]);}}else alert(_0x1860d7(0x9aa));}async function _0x24825d(_0x522c96){const _0x14bb12=_0x7c5117;_0x212d1b['isActive']=![],_0x212d1b[_0x14bb12(0x562)]='gameover',_0x118ef7(_0x522c96+_0x14bb12(0x1229)),document[_0x14bb12(0xfa0)](_0x14bb12(0xf9c))[_0x14bb12(0xc62)]=_0x522c96+_0x14bb12(0x109e);let _0x35ad02='';_0x522c96==='好人'?_0x35ad02=_0x14bb12(0x1186):_0x35ad02=_0x14bb12(0xff3);const _0x2e4a93=document['getElementById'](_0x14bb12(0x1108));_0x2e4a93[_0x14bb12(0xc62)]=_0x35ad02;const _0x4a64e7=document['getElementById']('werewolf-role-reveal-list');_0x4a64e7[_0x14bb12(0x1331)]='';const _0x5baad3=[..._0x212d1b[_0x14bb12(0x12ae)]][_0x14bb12(0x1376)]((_0x4f2126,_0x58cf89)=>{const _0x63af08=_0x14bb12,_0x352fe7=_0x212d1b[_0x63af08(0x12ae)][_0x63af08(0xb22)](_0x17f879=>_0x17f879['id']===_0x4f2126['id']),_0x3d9c0a=_0x212d1b[_0x63af08(0x12ae)][_0x63af08(0xb22)](_0x595367=>_0x595367['id']===_0x58cf89['id']);return _0x352fe7-_0x3d9c0a;});_0x5baad3[_0x14bb12(0x458)]((_0x5ce28e,_0x444828)=>{const _0x16d356=_0x14bb12,_0x45a48d=document['createElement'](_0x16d356(0xd53));_0x45a48d[_0x16d356(0x63b)][_0x16d356(0x283)]=_0x16d356(0xb01);if(_0x444828===_0x5baad3[_0x16d356(0xac0)]-0x1)_0x45a48d[_0x16d356(0x63b)][_0x16d356(0xb8f)]=_0x16d356(0x11b5);const _0x1a252f=_0x5ce28e[_0x16d356(0xc92)]==='狼人'?_0x16d356(0x4f4):_0x16d356(0x215);_0x45a48d[_0x16d356(0x1331)]=_0x16d356(0x1036)+_0x5ce28e['avatar']+_0x16d356(0x1472)+(_0x5ce28e['isAlive']?_0x16d356(0x11b5):_0x16d356(0x155b))+_0x16d356(0x718)+(_0x5ce28e[_0x16d356(0x1533)]?_0x16d356(0x11b5):_0x16d356(0xf04))+_0x16d356(0x2ae)+(_0x444828+0x1)+'.\x20'+_0x5ce28e['name']+_0x16d356(0x37a)+_0x1a252f+_0x16d356(0x2ae)+_0x5ce28e[_0x16d356(0xc92)]+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4a64e7['appendChild'](_0x45a48d);}),document[_0x14bb12(0xfa0)](_0x14bb12(0x600))[_0x14bb12(0x128f)][_0x14bb12(0x1327)]('visible');try{console['log'](_0x14bb12(0x5c2));const _0x4e0898=_0x23fd95(_0x212d1b),_0x628f82=await generateAndInjectWerewolfMemories(_0x4e0898);console['log']('狼人杀游戏总结已自动存入\x20'+_0x628f82+_0x14bb12(0xd1f));}catch(_0xd1cb2f){console[_0x14bb12(0x52b)](_0x14bb12(0x57c),_0xd1cb2f),_0x2e4a93&&(_0x2e4a93['innerHTML']+=_0x14bb12(0x58a));}}function _0x118ef7(_0x486f53){const _0x3cb5ae=_0x7c5117;_0x212d1b['gameLog'][_0x3cb5ae(0x481)]({'type':_0x3cb5ae(0x1417),'content':_0x486f53,'timestamp':Date['now'](),'day':_0x212d1b[_0x3cb5ae(0x4a4)]});}function _0x544711(_0x23cbe6,_0xed2c21){const _0x268acd=_0x7c5117;_0x212d1b[_0x268acd(0xc6b)][_0x268acd(0x481)]({'type':_0x268acd(0x369),'speaker':_0x23cbe6,'content':_0xed2c21,'timestamp':Date['now'](),'day':_0x212d1b[_0x268acd(0x4a4)]});}function _0x4d4ff7(_0x234c73){return new Promise(_0xa1cf85=>{const _0x1a4ab0=_0x5817,_0x1a175a=_0x1a4ab0(0x13cc)+_0x234c73+'-modal',_0x1a35db=_0x1a4ab0(0x13cc)+_0x234c73+_0x1a4ab0(0x1457);let _0x367f80='';if(_0x234c73===_0x1a4ab0(0x517))_0x367f80='confirm-prophet-check-btn';if(_0x234c73===_0x1a4ab0(0x1522))_0x367f80=_0x1a4ab0(0x146a);if(_0x234c73===_0x1a4ab0(0xde1))_0x367f80='confirm-vote-btn';const _0x61781=document['getElementById'](_0x1a175a),_0x1d1bf7=document[_0x1a4ab0(0xfa0)](_0x1a35db),_0x44aaee=document[_0x1a4ab0(0xfa0)](_0x367f80);_0x1d1bf7[_0x1a4ab0(0x1331)]='';let _0x2e172e=null;const _0x9ac9cc=_0x212d1b[_0x1a4ab0(0x12ae)][_0x1a4ab0(0xde7)](_0x2f296b=>_0x2f296b['isAlive']&&(_0x234c73===_0x1a4ab0(0x1522)||_0x234c73===_0x1a4ab0(0xde1)||_0x2f296b['id']!==_0x1a4ab0(0xcb0)));_0x9ac9cc[_0x1a4ab0(0x458)](_0x297c49=>{const _0x7ef5d7=_0x1a4ab0,_0x28a982=document[_0x7ef5d7(0xb4e)]('div');_0x28a982[_0x7ef5d7(0x1287)]='werewolf-selection-item',_0x28a982[_0x7ef5d7(0x8df)]['id']=_0x297c49['id'],_0x28a982[_0x7ef5d7(0x1331)]=_0x7ef5d7(0x131f)+_0x297c49[_0x7ef5d7(0xc61)]+_0x7ef5d7(0x11af)+_0x297c49[_0x7ef5d7(0x1023)]+'</span>',_0x28a982[_0x7ef5d7(0x9f0)]=()=>{const _0x4589a1=_0x7ef5d7;_0x1d1bf7[_0x4589a1(0x2a1)](_0x4589a1(0x7ea))[_0x4589a1(0x458)](_0x4307a3=>_0x4307a3[_0x4589a1(0x128f)][_0x4589a1(0x443)](_0x4589a1(0xaa0))),_0x28a982[_0x4589a1(0x128f)][_0x4589a1(0x1327)]('selected'),_0x2e172e=_0x297c49['id'];},_0x1d1bf7[_0x7ef5d7(0x1155)](_0x28a982);});const _0x4de33d=_0x44aaee[_0x1a4ab0(0xb5c)](!![]);_0x44aaee[_0x1a4ab0(0xcdd)]['replaceChild'](_0x4de33d,_0x44aaee),_0x4de33d['onclick']=()=>{const _0x187eeb=_0x1a4ab0;_0x2e172e?(_0x61781[_0x187eeb(0x128f)][_0x187eeb(0x443)](_0x187eeb(0xdcc)),_0xa1cf85(_0x2e172e)):alert('请选择一个目标。');},_0x61781['classList'][_0x1a4ab0(0x1327)](_0x1a4ab0(0xdcc));});}function _0xa257f9(){return new Promise(_0x902ac4=>{const _0x47c2ae=_0x5817,_0x1df108=document['getElementById'](_0x47c2ae(0x86a)),_0x281621=document[_0x47c2ae(0xfa0)](_0x47c2ae(0xbf2)),_0x101e01=document[_0x47c2ae(0xfa0)](_0x47c2ae(0x10d9)),_0x9507b6=_0x1df108['querySelector'](_0x47c2ae(0x108c)),_0x5f19b5=_0x212d1b[_0x47c2ae(0x12ae)][_0x47c2ae(0xde7)](_0x49a20b=>_0x49a20b['role']==='狼人'&&_0x49a20b[_0x47c2ae(0x1533)]),_0x1d82b1=_0x5f19b5[_0x47c2ae(0xde7)](_0x21a3cd=>_0x21a3cd['id']!=='user')[_0x47c2ae(0x556)](_0x71800=>_0x71800[_0x47c2ae(0x1023)])[_0x47c2ae(0xcc2)]('、');_0x1d82b1?_0x9507b6[_0x47c2ae(0x1331)]='狼人请选择刀人对象<br><small\x20style=\x22font-weight:normal;\x20font-size:\x2013px;\x22>你的队友是:\x20'+_0x1d82b1+_0x47c2ae(0xaef):_0x9507b6[_0x47c2ae(0xc62)]=_0x47c2ae(0x455);_0x281621['innerHTML']='';let _0x25aa72=null;const _0x26e139=_0x212d1b['players']['filter'](_0x22c5cb=>_0x22c5cb[_0x47c2ae(0x1533)]&&_0x22c5cb[_0x47c2ae(0xc92)]!=='狼人');_0x26e139[_0x47c2ae(0x458)](_0x1aed0e=>{const _0x226de2=_0x47c2ae,_0x1c4655=document[_0x226de2(0xb4e)](_0x226de2(0xd53));_0x1c4655[_0x226de2(0x1287)]=_0x226de2(0xd57),_0x1c4655['dataset']['id']=_0x1aed0e['id'],_0x1c4655[_0x226de2(0x1331)]='<img\x20src=\x22'+_0x1aed0e[_0x226de2(0xc61)]+_0x226de2(0x11af)+_0x1aed0e[_0x226de2(0x1023)]+_0x226de2(0xaca),_0x1c4655[_0x226de2(0x9f0)]=()=>{const _0x58dec2=_0x226de2;_0x281621[_0x58dec2(0x2a1)](_0x58dec2(0x7ea))['forEach'](_0x21c134=>_0x21c134['classList'][_0x58dec2(0x443)](_0x58dec2(0xaa0))),_0x1c4655[_0x58dec2(0x128f)][_0x58dec2(0x1327)]('selected'),_0x25aa72=_0x1aed0e['id'];},_0x281621['appendChild'](_0x1c4655);});const _0x351124=_0x101e01[_0x47c2ae(0xb5c)](!![]);_0x101e01['parentNode'][_0x47c2ae(0x5d2)](_0x351124,_0x101e01),_0x351124[_0x47c2ae(0x9f0)]=()=>{const _0x12ce41=_0x47c2ae;_0x25aa72?(_0x1df108[_0x12ce41(0x128f)][_0x12ce41(0x443)](_0x12ce41(0xdcc)),_0x902ac4(_0x25aa72)):alert(_0x12ce41(0x5d0));},_0x1df108[_0x47c2ae(0x128f)][_0x47c2ae(0x1327)](_0x47c2ae(0xdcc));});}function _0x253776(){const _0x42492b=_0x7c5117,_0x19b0ef=_0x212d1b['players'][_0x42492b(0x7ed)](_0x1023bb=>_0x1023bb['id']===_0x42492b(0xcb0));if(!_0x19b0ef||!_0x19b0ef[_0x42492b(0x1533)])return;const _0x2f523f=document[_0x42492b(0xfa0)]('werewolf-user-input'),_0x394170=_0x2f523f['value'][_0x42492b(0xa06)]();_0x394170&&(_0x544711(_0x19b0ef[_0x42492b(0x1023)],_0x394170),_0xe191cb()),document[_0x42492b(0xfa0)](_0x42492b(0xa1f))[_0x42492b(0x63b)][_0x42492b(0x1248)]=_0x42492b(0x11b5),_0x2f523f[_0x42492b(0x4f6)]='',_0x204708();}async function _0x247002(){const _0x4205c3=_0x7c5117;_0x118ef7(_0x4205c3(0xc0b)),_0xe191cb();const _0xf92e58=document[_0x4205c3(0xfa0)](_0x4205c3(0xd30));if(_0xf92e58)_0xf92e58[_0x4205c3(0x104b)]=!![];await _0x4abd86(_0x4205c3(0x269),'正在等待AI角色们继续讨论...');const {proxyUrl:_0xf2dfde,apiKey:_0x2f4cfd,model:_0x49296c}=_0x8f0871[_0x4205c3(0xa78)];if(!_0xf2dfde||!_0x2f4cfd||!_0x49296c){alert(_0x4205c3(0x1237));return;}const _0x18ac30=_0x94ad7c();try{let _0x3615ee=_0xf2dfde[_0x4205c3(0xf95)](_0x4205c3(0x9a5)),_0x552589=[{'role':_0x4205c3(0xcb0),'content':'请AI角色们继续进行讨论。'}],_0x51904d=_0x1e2f27(_0x49296c,_0x2f4cfd,_0x18ac30,_0x552589);const _0x23626b=_0x3615ee?await fetch(_0x51904d[_0x4205c3(0x3f5)],_0x51904d[_0x4205c3(0x3cc)]):await fetch(_0xf2dfde+_0x4205c3(0x1011),{'method':_0x4205c3(0xb67),'headers':{'Content-Type':_0x4205c3(0x4b5),'Authorization':'Bearer\x20'+_0x2f4cfd},'body':JSON[_0x4205c3(0x7cc)]({'model':_0x49296c,'messages':[{'role':_0x4205c3(0x1417),'content':_0x18ac30},..._0x552589],'temperature':_0x8f0871[_0x4205c3(0x7b0)][_0x4205c3(0x14a5)]||0.9})});if(!_0x23626b['ok']){const _0x120d89=await _0x23626b[_0x4205c3(0xa2e)]();throw new Error(_0x4205c3(0x395)+_0x120d89['error']['message']);}const _0xc3e35f=await _0x23626b['json'](),_0x3c3112=getGeminiResponseText(_0xc3e35f),_0x1908c6=_0x3c3112[_0x4205c3(0x1232)](/(\[[\s\S]*\])/);if(!_0x1908c6)throw new Error('AI返回的内容中未找到有效的JSON数组。原始返回:\x20'+_0x3c3112);const _0x1692bb=JSON[_0x4205c3(0x4a0)](_0x1908c6[0x0]);for(const _0x600f7e of _0x1692bb){_0x600f7e[_0x4205c3(0x239)]&&_0x600f7e[_0x4205c3(0x369)]&&(_0x544711(_0x600f7e['speaker_name'],_0x600f7e['dialogue']),_0xe191cb(),await new Promise(_0x151d4f=>setTimeout(_0x151d4f,0x5dc+Math[_0x4205c3(0x148a)]()*0x7d0)));}}catch(_0x5444fd){console[_0x4205c3(0x52b)]('狼人杀AI回应生成失败:',_0x5444fd),await _0x4abd86(_0x4205c3(0x1088),_0x4205c3(0x483)+_0x5444fd[_0x4205c3(0x790)]);}finally{if(_0xf92e58)_0xf92e58[_0x4205c3(0x104b)]=![];}}async function _0x4f9302(){const _0x546c02=_0x7c5117,_0x578234=_0x212d1b[_0x546c02(0x12ae)][_0x546c02(0x7ed)](_0x5b474e=>_0x5b474e['id']===_0x546c02(0xcb0));if(!_0x578234||!_0x578234[_0x546c02(0x1533)]){console[_0x546c02(0x7fa)]('handleWerewolfWaitReply\x20被调用，但用户已死亡。操作被忽略。');return;}const _0x44adc9=document[_0x546c02(0xfa0)]('werewolf-user-input'),_0x5186f8=_0x44adc9['value'][_0x546c02(0xa06)]();if(!_0x5186f8){alert(_0x546c02(0xcf9));return;}_0x544711(_0x578234[_0x546c02(0x1023)],_0x5186f8),_0xe191cb(),_0x44adc9[_0x546c02(0x4f6)]='',await _0x4abd86('请稍候',_0x546c02(0xd66));const {proxyUrl:_0x80a63c,apiKey:_0x169127,model:_0x1dab76}=_0x8f0871[_0x546c02(0xa78)];if(!_0x80a63c||!_0x169127||!_0x1dab76){alert('API未配置，无法生成对话。');return;}const _0x3ebf2d=_0x94ad7c();try{let _0xd1932f=_0x80a63c[_0x546c02(0xf95)](_0x546c02(0x9a5)),_0x408d56=[{'role':'user','content':_0x546c02(0xd95)+_0x578234[_0x546c02(0x1023)]+_0x546c02(0x12be)}],_0x671e1=_0x1e2f27(_0x1dab76,_0x169127,_0x3ebf2d,_0x408d56);const _0x418f24=_0xd1932f?await fetch(_0x671e1[_0x546c02(0x3f5)],_0x671e1['data']):await fetch(_0x80a63c+_0x546c02(0x1011),{'method':'POST','headers':{'Content-Type':_0x546c02(0x4b5),'Authorization':_0x546c02(0x681)+_0x169127},'body':JSON['stringify']({'model':_0x1dab76,'messages':[{'role':_0x546c02(0x1417),'content':_0x3ebf2d},..._0x408d56],'temperature':_0x8f0871[_0x546c02(0x7b0)]['apiTemperature']||0.9})});if(!_0x418f24['ok']){const _0x3820c7=await _0x418f24[_0x546c02(0xa2e)]();throw new Error(_0x546c02(0x395)+_0x3820c7['error'][_0x546c02(0x790)]);}const _0x4f57d0=await _0x418f24[_0x546c02(0xa2e)](),_0x93fed0=getGeminiResponseText(_0x4f57d0);let _0x2600ad;try{let _0x50aed9=_0x93fed0[_0x546c02(0x128a)](/^```json\s*/,'')[_0x546c02(0x128a)](/```$/,'')[_0x546c02(0xa06)]();const _0x524495=_0x50aed9[_0x546c02(0xdf3)]('['),_0x4bf7ed=_0x50aed9[_0x546c02(0x2a2)](']');if(_0x524495===-0x1||_0x4bf7ed===-0x1||_0x4bf7ed<_0x524495)throw new Error(_0x546c02(0xb2e));const _0x2cba37=_0x50aed9[_0x546c02(0x9fe)](_0x524495,_0x4bf7ed+0x1);_0x2600ad=JSON[_0x546c02(0x4a0)](_0x2cba37);}catch(_0x4aec06){if(_0x4aec06[_0x546c02(0x790)][_0x546c02(0xf95)](_0x546c02(0xbee))){console['warn']('检测到JSON中的非法控制字符，尝试清理并重试...');const _0x589a84=_0x131cee=>{const _0xb0d7b6=_0x546c02;let _0x3dc310=![],_0x1fd777=![],_0x8341a4='';for(let _0x38cb62=0x0;_0x38cb62<_0x131cee[_0xb0d7b6(0xac0)];_0x38cb62++){const _0x3824a5=_0x131cee[_0x38cb62];if(_0x1fd777){_0x8341a4+=_0x3824a5,_0x1fd777=![];continue;}if(_0x3824a5==='\x5c'){_0x8341a4+=_0x3824a5,_0x1fd777=!![];continue;}if(_0x3824a5==='\x22'){_0x8341a4+=_0x3824a5,_0x3dc310=!_0x3dc310;continue;}if(_0x3dc310){if(_0x3824a5==='\x0a')_0x8341a4+='\x5cn';else{if(_0x3824a5==='\x0d')_0x8341a4+='\x5cr';else{if(_0x3824a5==='\x09')_0x8341a4+='\x5ct';else{if(_0x3824a5['charCodeAt'](0x0)<0x20)continue;else _0x8341a4+=_0x3824a5;}}}}else _0x8341a4+=_0x3824a5;}return _0x8341a4;};let _0x4c1157=_0x93fed0[_0x546c02(0x128a)](/^```json\s*/,'')[_0x546c02(0x128a)](/```$/,'')[_0x546c02(0xa06)]();const _0x3c7f6b=_0x589a84(_0x4c1157),_0x3aef09=_0x3c7f6b[_0x546c02(0x1232)](/(\[[\s\S]*\])/);if(!_0x3aef09)throw new Error(_0x546c02(0x68d));_0x2600ad=JSON[_0x546c02(0x4a0)](_0x3aef09[0x0]);}else throw new Error(_0x546c02(0x4b8)+_0x4aec06[_0x546c02(0x790)]+'\x0a\x0aAI原始返回内容:\x0a'+_0x93fed0);}for(const _0x181928 of _0x2600ad){_0x181928[_0x546c02(0x239)]&&_0x181928[_0x546c02(0x369)]&&(_0x544711(_0x181928[_0x546c02(0x239)],_0x181928[_0x546c02(0x369)]),_0xe191cb(),await new Promise(_0x198d0a=>setTimeout(_0x198d0a,0x5dc+Math[_0x546c02(0x148a)]()*0x7d0)));}}catch(_0x147510){console['error']('狼人杀AI回应生成失败:',_0x147510),await _0x4abd86(_0x546c02(0x1088),_0x546c02(0x483)+_0x147510[_0x546c02(0x790)]);}}async function _0x204708(){const _0x24d1b5=_0x7c5117;_0x118ef7('发言结束，现在开始投票。'),_0xe191cb(),_0x212d1b[_0x24d1b5(0xb61)]={};let _0x462b73=null;_0x212d1b[_0x24d1b5(0x12b4)]=_0x24d1b5(0x61d);try{_0x462b73=await _0x5aaf6c(),_0x462b73&&_0x462b73['forEach'](_0x3b096e=>{const _0x238460=_0x24d1b5,_0x52550c=_0x212d1b['players'][_0x238460(0x7ed)](_0x3cd669=>_0x3cd669[_0x238460(0x1023)]===_0x3b096e[_0x238460(0x45b)]),_0x115ae9=_0x212d1b[_0x238460(0x12ae)][_0x238460(0x7ed)](_0xafbef5=>_0xafbef5['name']===_0x3b096e[_0x238460(0xae2)]);_0x52550c&&_0x52550c['isAlive']&&_0x115ae9&&(_0x212d1b[_0x238460(0xb61)][_0x52550c['name']]=_0x115ae9[_0x238460(0x1023)]);}),_0x212d1b[_0x24d1b5(0x12b4)]=null;}catch(_0x50fe78){console['error'](_0x24d1b5(0xe6a),_0x50fe78),await _0x4abd86(_0x24d1b5(0x457),'AI角色无法完成投票，游戏暂停。请点击右上角的“重试”按钮继续。\x0a错误:\x20'+_0x50fe78[_0x24d1b5(0x790)]),document[_0x24d1b5(0xfa0)](_0x24d1b5(0x73a))[_0x24d1b5(0x63b)][_0x24d1b5(0x1248)]=_0x24d1b5(0x127c);return;}const _0x4cd2b1=_0x212d1b[_0x24d1b5(0x12ae)][_0x24d1b5(0x7ed)](_0x530a33=>_0x530a33['id']===_0x24d1b5(0xcb0));if(_0x4cd2b1&&_0x4cd2b1[_0x24d1b5(0x1533)]){_0x118ef7(_0x24d1b5(0xcbc)),_0xe191cb();const _0x527803=await _0x4d4ff7(_0x24d1b5(0xde1)),_0x425dff=_0x212d1b['players']['find'](_0x10faed=>_0x10faed['id']===_0x527803);_0x425dff&&(_0x212d1b[_0x24d1b5(0xb61)][_0x4cd2b1[_0x24d1b5(0x1023)]]=_0x425dff[_0x24d1b5(0x1023)]);}_0x5d84ef();}async function _0x5aaf6c(){const _0x472c1b=_0x7c5117,{proxyUrl:_0x7a67f1,apiKey:_0x3ba0e6,model:_0x57d0ca}=_0x8f0871[_0x472c1b(0xa78)];if(!_0x7a67f1||!_0x3ba0e6||!_0x57d0ca)return null;const _0x17eaee=_0x212d1b['players'][_0x472c1b(0xde7)](_0x30164e=>_0x30164e['isAlive']&&_0x30164e['id']!==_0x472c1b(0xcb0)),_0x341670=_0x212d1b[_0x472c1b(0x12ae)][_0x472c1b(0xde7)](_0x57a524=>_0x57a524[_0x472c1b(0x1533)])[_0x472c1b(0x556)](_0x4875c1=>_0x4875c1['name']);let _0x51bbe0=_0x94ad7c();_0x51bbe0+='\x0a#\x20【【【最终投票指令\x20(最高优先级)】】】\x0a现在是投票环节。请你扮演【每一个存活的AI角色】，根据以上所有信息（特别是刚刚的讨论环节），为他们各自决定要投票放逐哪一位玩家。\x0a-\x20**投票依据**:\x20你的投票【必须】基于逻辑分析和你的身份。狼人可能会投给好人，好人需要找出狼人。\x0a-\x20**格式铁律**:\x20你的回复【必须且只能】是一个JSON数组，格式如下：\x0a```json\x0a[\x0a\x20\x20{\x22voter_name\x22:\x20\x22角色A的名字\x22,\x20\x22vote_for_name\x22:\x20\x22角色A投票的玩家名字\x22},\x0a\x20\x20{\x22voter_name\x22:\x20\x22角色B的名字\x22,\x20\x22vote_for_name\x22:\x20\x22角色B投票的玩家名字\x22}\x0a]\x0a```\x0a-\x20**可投票的玩家列表**:\x20'+_0x341670[_0x472c1b(0xcc2)](',\x20')+_0x472c1b(0xcc6);try{let _0x3555cd=_0x7a67f1[_0x472c1b(0xf95)]('generativelanguage'),_0xfd48db=[{'role':'user','content':'请所有AI角色开始投票。'}],_0x18efce=_0x1e2f27(_0x57d0ca,_0x3ba0e6,_0x51bbe0,_0xfd48db);const _0x3da9c2=_0x3555cd?await fetch(_0x18efce[_0x472c1b(0x3f5)],_0x18efce['data']):await fetch(_0x7a67f1+'/v1/chat/completions',{'method':'POST','headers':{'Content-Type':_0x472c1b(0x4b5),'Authorization':_0x472c1b(0x681)+_0x3ba0e6},'body':JSON[_0x472c1b(0x7cc)]({'model':_0x57d0ca,'messages':[{'role':_0x472c1b(0x1417),'content':_0x51bbe0},..._0xfd48db],'temperature':_0x8f0871[_0x472c1b(0x7b0)][_0x472c1b(0x14a5)]||0.8})});if(!_0x3da9c2['ok'])throw new Error((await _0x3da9c2[_0x472c1b(0xa2e)]())[_0x472c1b(0x52b)][_0x472c1b(0x790)]);const _0x35e85d=await _0x3da9c2[_0x472c1b(0xa2e)](),_0x200f3f=getGeminiResponseText(_0x35e85d);let _0x3bfdff=_0x200f3f[_0x472c1b(0x128a)](/^```json\s*/,'')[_0x472c1b(0x128a)](/```$/,'')[_0x472c1b(0xa06)]();const _0x37b41f=_0x3bfdff['indexOf']('['),_0x57d867=_0x3bfdff[_0x472c1b(0x2a2)](']');if(_0x37b41f===-0x1||_0x57d867===-0x1||_0x57d867<_0x37b41f)throw new Error('AI返回的投票结果中未找到有效的JSON数组结构\x20(`[...]`)。');const _0x5d6994=_0x3bfdff['substring'](_0x37b41f,_0x57d867+0x1);try{const _0x59b78a=_0x5d6994[_0x472c1b(0x1232)](/(\[[\s\S]*?\])/g);if(_0x59b78a&&_0x59b78a[_0x472c1b(0xac0)]>0x0)return JSON[_0x472c1b(0x4a0)](_0x59b78a[_0x59b78a[_0x472c1b(0xac0)]-0x1]);return JSON[_0x472c1b(0x4a0)](_0x5d6994);}catch(_0x567412){throw new Error(_0x472c1b(0xbd5)+_0x567412[_0x472c1b(0x790)]+'\x0a\x0aAI原始返回内容:\x0a'+_0x200f3f);}}catch(_0x50e587){console[_0x472c1b(0x52b)](_0x472c1b(0x2ab),_0x50e587);throw new Error(_0x472c1b(0x4ce)+_0x50e587[_0x472c1b(0x790)]);}}function _0x5d84ef(){const _0x2f6f1e=_0x7c5117,_0x36de05={},_0x50cd84={};for(const _0xd11f7e in _0x212d1b[_0x2f6f1e(0xb61)]){const _0x342cc2=_0x212d1b['votes'][_0xd11f7e];_0x36de05[_0x342cc2]=(_0x36de05[_0x342cc2]||0x0)+0x1,!_0x50cd84[_0x342cc2]&&(_0x50cd84[_0x342cc2]=[]),_0x50cd84[_0x342cc2][_0x2f6f1e(0x481)](_0xd11f7e);}let _0x5f68c2=0x0,_0x4b803b=[];for(const _0x1ade17 in _0x36de05){const _0x55703d=_0x36de05[_0x1ade17];if(_0x55703d>_0x5f68c2)_0x5f68c2=_0x55703d,_0x4b803b=[_0x1ade17];else _0x55703d===_0x5f68c2&&_0x4b803b[_0x2f6f1e(0x481)](_0x1ade17);}_0x118ef7(_0x2f6f1e(0xf0a));for(const _0x309955 in _0x50cd84){_0x118ef7(_0x309955+'\x20('+_0x50cd84[_0x309955][_0x2f6f1e(0xac0)]+'票):\x20'+_0x50cd84[_0x309955][_0x2f6f1e(0xcc2)]('、\x20'));}if(_0x4b803b[_0x2f6f1e(0xac0)]===0x1&&_0x5f68c2>0x0){const _0x3ee6ef=_0x212d1b[_0x2f6f1e(0x12ae)]['find'](_0x431301=>_0x431301[_0x2f6f1e(0x1023)]===_0x4b803b[0x0]);if(_0x3ee6ef){_0x3ee6ef[_0x2f6f1e(0x1533)]=![],_0x118ef7(_0x3ee6ef[_0x2f6f1e(0x1023)]+_0x2f6f1e(0xfe4));if(_0x3ee6ef[_0x2f6f1e(0xc92)]==='猎人'){}}}else _0x118ef7(_0x2f6f1e(0x573));_0xe191cb();if(_0x544189())return;_0x212d1b[_0x2f6f1e(0x4a4)]++,_0x3de327();}async function _0x2c5c0e(){const _0x258765=_0x7c5117,{proxyUrl:_0x12fa26,apiKey:_0x2ff888,model:_0x54ce0b}=_0x8f0871[_0x258765(0xa78)];if(!_0x12fa26||!_0x2ff888||!_0x54ce0b)return null;const _0x1c3881=_0x212d1b['players'][_0x258765(0xde7)](_0x24c753=>_0x24c753[_0x258765(0xc92)]==='狼人'&&_0x24c753[_0x258765(0x1533)]),_0x54049b=_0x212d1b['players'][_0x258765(0xde7)](_0x930278=>_0x930278[_0x258765(0x1533)]&&_0x930278[_0x258765(0xc92)]!=='狼人'),_0x5848f2=_0x258765(0xec5)+_0x1c3881[_0x258765(0x556)](_0x522a1a=>_0x522a1a[_0x258765(0x1023)])[_0x258765(0xcc2)]('、\x20')+'\x0a-\x20**可以刀的玩家列表**:\x20'+_0x54049b['map'](_0x268ea2=>_0x268ea2['name'])[_0x258765(0xcc2)]('、\x20')+_0x258765(0x143e)+_0x212d1b[_0x258765(0xc6b)]['map'](_0x3d9eed=>_0x3d9eed['speaker']+':\x20'+_0x3d9eed['content'])[_0x258765(0xcc2)]('\x0a')+_0x258765(0x1310);try{let _0x3e8380=_0x12fa26[_0x258765(0xf95)](_0x258765(0x9a5)),_0x2272b1=[{'role':_0x258765(0xcb0),'content':_0x258765(0x12ed)}],_0x643f3d=_0x1e2f27(_0x54ce0b,_0x2ff888,_0x5848f2,_0x2272b1);const _0x354d0d=_0x3e8380?await fetch(_0x643f3d[_0x258765(0x3f5)],_0x643f3d[_0x258765(0x3cc)]):await fetch(_0x12fa26+_0x258765(0x1011),{'method':'POST','headers':{'Content-Type':_0x258765(0x4b5),'Authorization':'Bearer\x20'+_0x2ff888},'body':JSON[_0x258765(0x7cc)]({'model':_0x54ce0b,'messages':[{'role':_0x258765(0x1417),'content':_0x5848f2},..._0x2272b1],'temperature':_0x8f0871['globalSettings'][_0x258765(0x14a5)]||0.8})});if(!_0x354d0d['ok'])throw new Error((await _0x354d0d[_0x258765(0xa2e)]())[_0x258765(0x52b)][_0x258765(0x790)]);const _0x2a037e=await _0x354d0d[_0x258765(0xa2e)](),_0x1e4cda=getGeminiResponseText(_0x2a037e),_0x4f9ce8=_0x1e4cda['match'](/({[\s\S]*})/);if(!_0x4f9ce8)throw new Error(_0x258765(0x7c0));const _0x30e8f8=JSON[_0x258765(0x4a0)](_0x4f9ce8[0x0]),_0x4d3eee=_0x212d1b['players'][_0x258765(0x7ed)](_0x1436b7=>_0x1436b7[_0x258765(0x1023)]===_0x30e8f8[_0x258765(0x8ea)]);return _0x4d3eee?_0x4d3eee['id']:null;}catch(_0x1b44f9){return console[_0x258765(0x52b)]('获取AI狼人目标失败:',_0x1b44f9),_0x54049b[Math[_0x258765(0x13e5)](Math[_0x258765(0x148a)]()*_0x54049b[_0x258765(0xac0)])]['id'];}}function _0x305e88(_0x196221,_0x553fc1){return new Promise(_0x5bf5c3=>{const _0x57939c=_0x5817,_0x42908a=document['getElementById'](_0x57939c(0xeb9)),_0x5abf7f=document['getElementById']('werewolf-witch-selection-list'),_0x48bb89=document[_0x57939c(0xfa0)]('witch-modal-title'),_0x5ce603=document[_0x57939c(0xfa0)](_0x57939c(0xb93)),_0x2cb086=document['getElementById'](_0x57939c(0xb6a));_0x5abf7f[_0x57939c(0x1331)]='';const _0x16fa61=_0x5ce603['cloneNode'](!![]);_0x5ce603[_0x57939c(0xcdd)]['replaceChild'](_0x16fa61,_0x5ce603);const _0x2d460e=_0x2cb086[_0x57939c(0xb5c)](!![]);_0x2cb086[_0x57939c(0xcdd)][_0x57939c(0x5d2)](_0x2d460e,_0x2cb086),_0x16fa61[_0x57939c(0x63b)][_0x57939c(0x1248)]=_0x57939c(0x127c),_0x16fa61['disabled']=!![];let _0x458aa6={'save':![],'poison':null},_0x340c3b=null;if(_0x196221&&!_0x553fc1[_0x57939c(0x10f6)]){_0x48bb89[_0x57939c(0xc62)]=_0x57939c(0x52e)+_0x196221[_0x57939c(0x1023)]+_0x57939c(0x102e);const _0x1c5578=document[_0x57939c(0xb4e)](_0x57939c(0x1029));_0x1c5578['className']='form-button',_0x1c5578[_0x57939c(0xc62)]=_0x57939c(0x1473),_0x1c5578[_0x57939c(0x63b)][_0x57939c(0x14d1)]=_0x57939c(0x10f4),_0x1c5578[_0x57939c(0x9f0)]=()=>{const _0x1759c0=_0x57939c;_0x458aa6[_0x1759c0(0x3fc)]=!![],_0x42908a['classList'][_0x1759c0(0x443)](_0x1759c0(0xdcc)),_0x5bf5c3(_0x458aa6);},_0x5abf7f[_0x57939c(0x1155)](_0x1c5578);}else _0x196221?_0x48bb89[_0x57939c(0xc62)]=_0x57939c(0x52e)+_0x196221[_0x57939c(0x1023)]+_0x57939c(0x814):_0x48bb89[_0x57939c(0xc62)]=_0x57939c(0xabe);if(!_0x553fc1[_0x57939c(0x923)]){const _0x5b3bac=document[_0x57939c(0xb4e)]('p');_0x5b3bac['textContent']=_0x57939c(0x90e),_0x5b3bac[_0x57939c(0x63b)][_0x57939c(0xa70)]='center',_0x5b3bac[_0x57939c(0x63b)][_0x57939c(0xf3e)]='20px',_0x5abf7f[_0x57939c(0x1155)](_0x5b3bac);const _0x2f1bf5=_0x212d1b[_0x57939c(0x12ae)]['filter'](_0x2af1e7=>_0x2af1e7[_0x57939c(0x1533)]&&_0x2af1e7['id']!==_0x196221?.['id']);_0x2f1bf5['forEach'](_0x38a807=>{const _0xdfb813=_0x57939c,_0x5286d0=document[_0xdfb813(0xb4e)]('div');_0x5286d0[_0xdfb813(0x1287)]=_0xdfb813(0xd57),_0x5286d0[_0xdfb813(0x8df)]['id']=_0x38a807['id'],_0x5286d0[_0xdfb813(0x1331)]=_0xdfb813(0x131f)+_0x38a807[_0xdfb813(0xc61)]+_0xdfb813(0x11af)+_0x38a807['name']+_0xdfb813(0xaca),_0x5286d0['onclick']=()=>{const _0x5d18ff=_0xdfb813;_0x5abf7f[_0x5d18ff(0x2a1)](_0x5d18ff(0x7ea))[_0x5d18ff(0x458)](_0x5a0e41=>_0x5a0e41['classList'][_0x5d18ff(0x443)](_0x5d18ff(0xaa0))),_0x5286d0[_0x5d18ff(0x128f)][_0x5d18ff(0x1327)]('selected'),_0x340c3b=_0x38a807['id'],_0x16fa61[_0x5d18ff(0x104b)]=![];},_0x5abf7f[_0xdfb813(0x1155)](_0x5286d0);});}_0x16fa61[_0x57939c(0x9f0)]=()=>{const _0x22d8da=_0x57939c;_0x340c3b&&(_0x458aa6['poison']=_0x340c3b,_0x42908a[_0x22d8da(0x128f)][_0x22d8da(0x443)](_0x22d8da(0xdcc)),_0x5bf5c3(_0x458aa6));},_0x2d460e[_0x57939c(0x9f0)]=()=>{const _0x2509e6=_0x57939c;_0x42908a[_0x2509e6(0x128f)][_0x2509e6(0x443)](_0x2509e6(0xdcc)),_0x5bf5c3(_0x458aa6);},_0x42908a[_0x57939c(0x128f)][_0x57939c(0x1327)](_0x57939c(0xdcc));});}async function _0x46ca9c(){const _0x5e710b=_0x7c5117,_0x27b7ae=_0x212d1b[_0x5e710b(0x12b4)];if(!_0x27b7ae)return;document['getElementById'](_0x5e710b(0x73a))[_0x5e710b(0x63b)]['display']=_0x5e710b(0x11b5),await _0x4abd86('请稍候...',_0x5e710b(0x2be)+_0x27b7ae+_0x5e710b(0x8f9));switch(_0x27b7ae){case _0x5e710b(0xa72):await _0x3de327();break;case _0x5e710b(0x1008):await _0x12c230();break;case'getVotes':await _0x204708();break;}}function _0x544189(){const _0x466586=_0x7c5117,_0x3eb408=_0x212d1b[_0x466586(0x12ae)][_0x466586(0xde7)](_0x20eeab=>_0x20eeab[_0x466586(0x1533)]),_0x4a5daf=_0x3eb408['filter'](_0x202b81=>_0x202b81['role']==='狼人'),_0x87f6db=_0x3eb408[_0x466586(0xde7)](_0x1f5b37=>[_0x466586(0x296),'女巫','猎人','守卫'][_0x466586(0xf95)](_0x1f5b37[_0x466586(0xc92)])),_0x3474fe=_0x3eb408[_0x466586(0xde7)](_0x27b5c4=>_0x27b5c4['role']==='平民');let _0x23646f=null;if(_0x4a5daf[_0x466586(0xac0)]===0x0)_0x23646f='好人';else{if(_0x4a5daf[_0x466586(0xac0)]>=_0x87f6db[_0x466586(0xac0)]+_0x3474fe[_0x466586(0xac0)])_0x23646f='狼人';else _0x212d1b[_0x466586(0x2d6)]===_0x466586(0x2bf)?(_0x87f6db[_0x466586(0xac0)]===0x0||_0x3474fe['length']===0x0)&&(_0x23646f='狼人'):_0x87f6db[_0x466586(0xac0)]===0x0&&_0x3474fe[_0x466586(0xac0)]===0x0&&(_0x23646f='狼人');}if(_0x23646f)return _0x24825d(_0x23646f),!![];return![];}async function _0x3de20e(){const _0x204af4=_0x7c5117,_0x3bb774=await _0x3f65ed(_0x204af4(0x101f),'此功能将扫描数据库，尝试找出并修复“角色在数据库中存在，但未在聊天列表显示”的问题。<br><br><strong>操作通常是安全的，但仍建议在操作前备份数据。</strong>',{'confirmText':_0x204af4(0xb0b)});if(!_0x3bb774)return;await _0x4abd86(_0x204af4(0x3e1),_0x204af4(0x1a5));try{const _0x5729af=await _0x372b85[_0x204af4(0x1260)][_0x204af4(0x3bc)]();let _0x471b32=0x0;for(const _0x31e1d8 of _0x5729af){let _0x2c2755=![];!Array[_0x204af4(0x345)](_0x31e1d8[_0x204af4(0xc88)])&&(_0x31e1d8['history']=[],_0x2c2755=!![]),(typeof _0x31e1d8[_0x204af4(0x12d7)]!==_0x204af4(0xf2e)||_0x31e1d8[_0x204af4(0x12d7)]===null)&&(_0x31e1d8[_0x204af4(0x12d7)]={},_0x2c2755=!![]),!_0x31e1d8[_0x204af4(0x1364)]&&!_0x31e1d8['originalName']&&(_0x31e1d8[_0x204af4(0x93e)]=_0x31e1d8[_0x204af4(0x1023)],_0x2c2755=!![]),typeof _0x31e1d8['unreadCount']===_0x204af4(0x358)&&(_0x31e1d8[_0x204af4(0x28d)]=0x0,_0x2c2755=!![]),!Array['isArray'](_0x31e1d8[_0x204af4(0x1312)])&&(_0x31e1d8['longTermMemory']=[],_0x2c2755=!![]),_0x2c2755&&(_0x471b32++,console[_0x204af4(0x4ee)](_0x204af4(0x14e9)+_0x31e1d8[_0x204af4(0x1023)]+'\x22\x20(ID:\x20'+_0x31e1d8['id']+')\x20的残缺数据。'),await _0x372b85[_0x204af4(0x1260)][_0x204af4(0x11d5)](_0x31e1d8)),_0x8f0871[_0x204af4(0x1260)][_0x31e1d8['id']]=_0x31e1d8;}_0x471b32>0x0?(await _0x4abd86(_0x204af4(0x6e2),_0x204af4(0x1302)+_0x471b32+'\x20个角色的数据问题！\x0a\x0a聊天列表已为您刷新。'),await _0x2d75fb()):await _0x4abd86('检查完成',_0x204af4(0x11e0));}catch(_0x4d0878){console[_0x204af4(0x52b)](_0x204af4(0x105e),_0x4d0878),await _0x4abd86(_0x204af4(0x457),_0x204af4(0x918)+_0x4d0878[_0x204af4(0x790)]);}}function _0x4da623(_0xef480f,_0x2288c0=_0x7c5117(0x8ce)){const _0x514caa=_0x7c5117;if(_0xef480f['querySelector']('.loader-container'))return;const _0x27349b=document['createElement'](_0x514caa(0xd53));_0x27349b[_0x514caa(0x1287)]=_0x514caa(0x1b1),_0x27349b[_0x514caa(0x1331)]=_0x514caa(0x137b),_0x2288c0===_0x514caa(0xb59)?_0xef480f['appendChild'](_0x27349b):_0xef480f[_0x514caa(0x9f3)](_0x27349b);}function _0x10441d(_0x463f43){const _0x3fde5a=_0x7c5117,_0x47c03c=_0x463f43[_0x3fde5a(0xfb1)](_0x3fde5a(0x1267));_0x47c03c&&_0x47c03c['remove']();}async function _0x47f86d(){const _0x2f0938=_0x7c5117,_0xbe931=document[_0x2f0938(0xfa0)]('delete-world-books-modal'),_0x2fffa3=document['getElementById']('delete-world-books-list'),_0x5001ac=document[_0x2f0938(0xfa0)](_0x2f0938(0x490));_0x2fffa3[_0x2f0938(0x1331)]='',_0x5001ac['checked']=![];const _0x522088=await _0x372b85[_0x2f0938(0x739)][_0x2f0938(0x3bc)]();_0x522088[_0x2f0938(0xac0)]===0x0?_0x2fffa3['innerHTML']=_0x2f0938(0xb51):_0x522088[_0x2f0938(0x458)](_0x245595=>{const _0x293fbd=_0x2f0938,_0x30ff75=document[_0x293fbd(0xb4e)](_0x293fbd(0xd53));_0x30ff75['className']=_0x293fbd(0x560),_0x30ff75[_0x293fbd(0x8df)][_0x293fbd(0xb03)]=_0x245595['id'],_0x30ff75[_0x293fbd(0x1331)]=_0x293fbd(0x4c6)+_0x245595[_0x293fbd(0x1023)]+_0x293fbd(0x257),_0x2fffa3['appendChild'](_0x30ff75);}),_0xbe931[_0x2f0938(0x128f)][_0x2f0938(0x1327)](_0x2f0938(0xdcc));}async function _0x28a7f8(){const _0x1db700=_0x7c5117,_0x5989d2=document['querySelectorAll'](_0x1db700(0x749));if(_0x5989d2['length']===0x0){alert(_0x1db700(0xcc4));return;}const _0x3c3a76=Array[_0x1db700(0x3aa)](_0x5989d2)[_0x1db700(0x556)](_0x2f2465=>_0x2f2465[_0x1db700(0x8df)][_0x1db700(0xb03)]),_0x1646a9=await _0x3f65ed('最后确认！',_0x1db700(0x400)+_0x5989d2['length']+_0x1db700(0x13e4),{'confirmButtonClass':_0x1db700(0x611),'confirmText':_0x1db700(0x1464)});if(!_0x1646a9)return;await _0x4abd86(_0x1db700(0x3e1),_0x1db700(0x7b4));try{await _0x372b85[_0x1db700(0xf81)]('rw',_0x372b85[_0x1db700(0x739)],_0x372b85[_0x1db700(0x1260)],async()=>{const _0x14e659=_0x1db700;await _0x372b85['worldBooks'][_0x14e659(0x504)](_0x3c3a76);const _0x109b81=await _0x372b85[_0x14e659(0x1260)][_0x14e659(0x3bc)]();for(const _0x1acba1 of _0x109b81){if(_0x1acba1[_0x14e659(0x12d7)]&&Array[_0x14e659(0x345)](_0x1acba1[_0x14e659(0x12d7)][_0x14e659(0xaaf)])){const _0x107502=_0x1acba1['settings'][_0x14e659(0xaaf)][_0x14e659(0xac0)];_0x1acba1[_0x14e659(0x12d7)]['linkedWorldBookIds']=_0x1acba1[_0x14e659(0x12d7)][_0x14e659(0xaaf)]['filter'](_0xe11cda=>!_0x3c3a76['includes'](_0xe11cda)),_0x1acba1[_0x14e659(0x12d7)][_0x14e659(0xaaf)]['length']<_0x107502&&await _0x372b85[_0x14e659(0x1260)][_0x14e659(0x11d5)](_0x1acba1);}}}),_0x8f0871['worldBooks']=_0x8f0871[_0x1db700(0x739)][_0x1db700(0xde7)](_0x2b5aa3=>!_0x3c3a76['includes'](_0x2b5aa3['id'])),document[_0x1db700(0xfa0)]('delete-world-books-modal')[_0x1db700(0x128f)][_0x1db700(0x443)](_0x1db700(0xdcc)),await _0x4abd86(_0x1db700(0xdd4),_0x5989d2[_0x1db700(0xac0)]+'\x20本世界书已成功删除。');}catch(_0xfbe8af){console[_0x1db700(0x52b)]('删除世界书失败:',_0xfbe8af),await _0x4abd86(_0x1db700(0x132c),_0x1db700(0x10b4)+_0xfbe8af[_0x1db700(0x790)]);}}function _0x3142b3(){const _0xa31b74=_0x7c5117;if(!_0x8f0871['activeChatId'])return;const _0x54e01d=_0x8f0871['activeChatId'],_0x4fee5=document[_0xa31b74(0xfa0)](_0xa31b74(0x12e6)),_0x2d58b1=document[_0xa31b74(0xfa0)](_0xa31b74(0xb72)),_0x23a19f=document[_0xa31b74(0xfa0)](_0xa31b74(0x709));let _0x47a505=_0x44002c[_0x54e01d];if(_0x47a505&&_0x47a505[_0xa31b74(0x684)]){_0x47a505[_0xa31b74(0x1295)]&&_0x52464f();_0x4fee5[_0xa31b74(0x63b)][_0xa31b74(0x1248)]='flex';return;}_0x1efe28(_0x54e01d),_0x58a95a(_0x54e01d),_0x4fee5[_0xa31b74(0x63b)]['display']='flex',_0x2d58b1['classList'][_0xa31b74(0x443)](_0xa31b74(0x1461)),_0x23a19f[_0xa31b74(0x63b)][_0xa31b74(0x1248)]='none';const _0x2e9250=document[_0xa31b74(0xfa0)]('phone-screen'),_0x345387=_0x2d58b1[_0xa31b74(0x1137)](),_0x553c76=(_0x2e9250[_0xa31b74(0x144f)]-_0x345387['height'])/0x2,_0x1c2b01=(_0x2e9250[_0xa31b74(0xa41)]-_0x345387[_0xa31b74(0xa92)])/0x2;_0x2d58b1['style'][_0xa31b74(0x8ce)]=_0x553c76+'px',_0x2d58b1[_0xa31b74(0x63b)][_0xa31b74(0xcb1)]=_0x1c2b01+'px',_0x2d58b1[_0xa31b74(0x63b)][_0xa31b74(0x1268)]='';}function _0x1efe28(_0x28effa){const _0x4600bf=_0x7c5117;_0x44002c[_0x28effa]={'isActive':!![],'isMinimized':![],'title':_0x4600bf(0x591),'contentLines':[],'currentPage':0x0,'totalPages':0x0,'linesPerPage':0xf,'currentSnippet':''};}function _0xb7244b(){const _0x2874bc=_0x7c5117,_0x212924=_0x8f0871[_0x2874bc(0xac8)];if(!_0x212924||!_0x44002c[_0x212924]||!_0x44002c[_0x212924][_0x2874bc(0x684)])return;document['getElementById'](_0x2874bc(0x12e6))[_0x2874bc(0x63b)]['display']=_0x2874bc(0x11b5),document[_0x2874bc(0xfa0)](_0x2874bc(0x709))[_0x2874bc(0x63b)][_0x2874bc(0x1248)]=_0x2874bc(0x11b5),document[_0x2874bc(0xfa0)]('reading-window')[_0x2874bc(0x128f)]['remove'](_0x2874bc(0x1461)),_0x44002c[_0x212924][_0x2874bc(0x684)]=![],console['log'](_0x2874bc(0xe3b));}function _0x21ccf2(){const _0x2a895b=_0x7c5117,_0x11bf9b=_0x44002c[_0x8f0871[_0x2a895b(0xac8)]];if(!_0x11bf9b||!_0x11bf9b[_0x2a895b(0x684)]||_0x11bf9b[_0x2a895b(0x1295)])return;_0x11bf9b[_0x2a895b(0x1295)]=!![],document[_0x2a895b(0xfa0)](_0x2a895b(0xb72))['classList'][_0x2a895b(0x1327)](_0x2a895b(0x1461)),document[_0x2a895b(0xfa0)](_0x2a895b(0x709))[_0x2a895b(0x63b)][_0x2a895b(0x1248)]=_0x2a895b(0x138c);}function _0x52464f(){const _0xb92468=_0x7c5117,_0x51e006=_0x44002c[_0x8f0871['activeChatId']];if(!_0x51e006||!_0x51e006[_0xb92468(0x684)]||!_0x51e006[_0xb92468(0x1295)])return;_0x51e006[_0xb92468(0x1295)]=![],document[_0xb92468(0xfa0)](_0xb92468(0x709))['style'][_0xb92468(0x1248)]=_0xb92468(0x11b5),document[_0xb92468(0xfa0)](_0xb92468(0xb72))[_0xb92468(0x128f)][_0xb92468(0x443)](_0xb92468(0x1461));}function _0x4e8426(_0x47d7dd,_0x271219){const _0x12d810=_0x7c5117;let _0x28b812=0x0,_0x51714d=0x0,_0x3885be=0x0,_0x202526=0x0;const _0x8e736=document[_0x12d810(0xfa0)](_0x12d810(0x1025)),_0x1f4a0d=_0x524071=>{const _0x39ba8d=_0x12d810;if(_0x524071[_0x39ba8d(0x10c2)][_0x39ba8d(0x187)](_0x39ba8d(0x1029)))return;if(_0x47d7dd[_0x39ba8d(0x63b)][_0x39ba8d(0x1268)]){const _0x1733d4=_0x47d7dd[_0x39ba8d(0x1137)](),_0x446b07=_0x47d7dd[_0x39ba8d(0xf82)]['getBoundingClientRect']();_0x47d7dd['style'][_0x39ba8d(0x8ce)]=_0x1733d4[_0x39ba8d(0x8ce)]-_0x446b07[_0x39ba8d(0x8ce)]+'px',_0x47d7dd[_0x39ba8d(0x63b)][_0x39ba8d(0xcb1)]=_0x1733d4[_0x39ba8d(0xcb1)]-_0x446b07[_0x39ba8d(0xcb1)]+'px',_0x47d7dd[_0x39ba8d(0x63b)][_0x39ba8d(0x1268)]='';}_0x524071[_0x39ba8d(0xdc1)]();const _0x3fb7c2=_0x524071[_0x39ba8d(0x682)]===_0x39ba8d(0x7d3)?_0x524071['touches'][0x0]:_0x524071;_0x3885be=_0x3fb7c2[_0x39ba8d(0x9a6)],_0x202526=_0x3fb7c2[_0x39ba8d(0x6b7)],document[_0x39ba8d(0x7b8)](_0x39ba8d(0xefe),_0x14b993),document[_0x39ba8d(0x7b8)](_0x39ba8d(0x31f),_0x452406),document[_0x39ba8d(0x7b8)](_0x39ba8d(0x61e),_0x14b993),document[_0x39ba8d(0x7b8)](_0x39ba8d(0x130b),_0x452406);},_0x452406=_0x2e54ee=>{const _0x4b5a4b=_0x12d810,_0x129461=_0x2e54ee['type']===_0x4b5a4b(0x130b)?_0x2e54ee[_0x4b5a4b(0x33f)][0x0]:_0x2e54ee;_0x28b812=_0x3885be-_0x129461[_0x4b5a4b(0x9a6)],_0x51714d=_0x202526-_0x129461['clientY'],_0x3885be=_0x129461[_0x4b5a4b(0x9a6)],_0x202526=_0x129461[_0x4b5a4b(0x6b7)];let _0x249816=_0x47d7dd[_0x4b5a4b(0x7e3)]-_0x51714d,_0x4ca5a6=_0x47d7dd['offsetLeft']-_0x28b812;const _0x431267=_0x8e736[_0x4b5a4b(0x144f)]-_0x47d7dd[_0x4b5a4b(0x720)]-0xa,_0x1f413b=_0x8e736[_0x4b5a4b(0xa41)]-_0x47d7dd['offsetWidth']-0xa;_0x249816=Math[_0x4b5a4b(0xb70)](0xa,Math[_0x4b5a4b(0x28a)](_0x249816,_0x431267)),_0x4ca5a6=Math[_0x4b5a4b(0xb70)](0xa,Math['min'](_0x4ca5a6,_0x1f413b)),_0x47d7dd['style'][_0x4b5a4b(0x8ce)]=_0x249816+'px',_0x47d7dd[_0x4b5a4b(0x63b)][_0x4b5a4b(0xcb1)]=_0x4ca5a6+'px';},_0x14b993=()=>{const _0x1bfc9f=_0x12d810;document['removeEventListener'](_0x1bfc9f(0xefe),_0x14b993),document['removeEventListener'](_0x1bfc9f(0x31f),_0x452406),document[_0x1bfc9f(0x73f)](_0x1bfc9f(0x61e),_0x14b993),document[_0x1bfc9f(0x73f)](_0x1bfc9f(0x130b),_0x452406);};_0x271219[_0x12d810(0x7b8)](_0x12d810(0xbea),_0x1f4a0d),_0x271219[_0x12d810(0x7b8)](_0x12d810(0x7d3),_0x1f4a0d);}function _0x58a95a(_0x263733){const _0x1c3086=_0x7c5117,_0x40ef03=_0x44002c[_0x263733];if(!_0x40ef03)return;const _0xe0f818=document[_0x1c3086(0xfa0)](_0x1c3086(0x6a0)),_0x179a36=document['getElementById'](_0x1c3086(0xc7a)),_0x2a1496=document['getElementById']('page-indicator'),_0x47f19c=document[_0x1c3086(0xfa0)](_0x1c3086(0x17d)),_0x470c92=document[_0x1c3086(0xfa0)]('next-page-btn');_0xe0f818[_0x1c3086(0xc62)]=_0x40ef03[_0x1c3086(0x1187)];if(_0x40ef03[_0x1c3086(0xa98)][_0x1c3086(0xac0)]===0x0)_0x179a36[_0x1c3086(0x1331)]=_0x1c3086(0x7ad),_0x40ef03['totalPages']=0x0,_0x40ef03[_0x1c3086(0xcd4)]=0x0;else{const _0x3ed97f=_0x40ef03[_0x1c3086(0xcd4)]*_0x40ef03['linesPerPage'],_0x442bc7=_0x3ed97f+_0x40ef03['linesPerPage'];_0x179a36[_0x1c3086(0xc62)]=_0x40ef03[_0x1c3086(0xa98)]['slice'](_0x3ed97f,_0x442bc7)[_0x1c3086(0xcc2)]('\x0a');}_0x2a1496[_0x1c3086(0xc62)]=_0x40ef03[_0x1c3086(0xcd4)]+0x1+_0x1c3086(0x69b)+_0x40ef03['totalPages'],_0x47f19c[_0x1c3086(0x104b)]=_0x40ef03[_0x1c3086(0xcd4)]===0x0,_0x470c92['disabled']=_0x40ef03[_0x1c3086(0xcd4)]>=_0x40ef03[_0x1c3086(0xa0c)]-0x1;}function _0x26a0e8(){const _0x403f23=_0x7c5117,_0x12b734=_0x44002c[_0x8f0871[_0x403f23(0xac8)]];_0x12b734&&_0x12b734[_0x403f23(0xcd4)]<_0x12b734[_0x403f23(0xa0c)]-0x1&&(_0x12b734[_0x403f23(0xcd4)]++,_0x58a95a(_0x8f0871[_0x403f23(0xac8)]),document[_0x403f23(0xfa0)]('reading-content')['scrollTop']=0x0,_0x20247b(_0x12b734[_0x403f23(0x12ab)],_0x12b734[_0x403f23(0xcd4)]));}async function _0x5e13ba(){const _0x31c22f=_0x7c5117,_0x2c06da=_0x44002c[_0x8f0871['activeChatId']];_0x2c06da&&_0x2c06da[_0x31c22f(0xcd4)]>0x0&&(_0x2c06da['currentPage']--,_0x58a95a(_0x8f0871[_0x31c22f(0xac8)]),document[_0x31c22f(0xfa0)](_0x31c22f(0xc7a))[_0x31c22f(0x54d)]=0x0,await _0x20247b(_0x2c06da['activeBookId'],_0x2c06da[_0x31c22f(0xcd4)]),await notifyAiOfPageTurn(_0x8f0871[_0x31c22f(0xac8)],_0x2c06da));}function _0x1736ea(){const _0x12241a=_0x7c5117;document[_0x12241a(0xfa0)](_0x12241a(0x13d8))['click']();}async function _0x11a08b(_0x5622b0){const _0x44630a=_0x7c5117,_0x41a21d=new Uint8Array(_0x5622b0);if(_0x41a21d[_0x44630a(0xac0)]>=0x3&&_0x41a21d[0x0]===0xef&&_0x41a21d[0x1]===0xbb&&_0x41a21d[0x2]===0xbf)return console[_0x44630a(0x4ee)](_0x44630a(0xc49)),new TextDecoder('utf-8')[_0x44630a(0x1024)](_0x41a21d);if(_0x41a21d[_0x44630a(0xac0)]>=0x2&&_0x41a21d[0x0]===0xff&&_0x41a21d[0x1]===0xfe)return console[_0x44630a(0x4ee)](_0x44630a(0x7a8)),new TextDecoder('utf-16le')[_0x44630a(0x1024)](_0x41a21d);if(_0x41a21d[_0x44630a(0xac0)]>=0x2&&_0x41a21d[0x0]===0xfe&&_0x41a21d[0x1]===0xff)return console[_0x44630a(0x4ee)](_0x44630a(0x9de)),new TextDecoder(_0x44630a(0x961))['decode'](_0x41a21d);try{console[_0x44630a(0x4ee)](_0x44630a(0x1455));const _0x599158=new TextDecoder('utf-8',{'fatal':!![]})[_0x44630a(0x1024)](_0x41a21d);return console['log'](_0x44630a(0x54f)),_0x599158;}catch(_0x456200){console['log'](_0x44630a(0x1423));try{const _0x464214=new TextDecoder(_0x44630a(0x1192))[_0x44630a(0x1024)](_0x41a21d);return console[_0x44630a(0x4ee)](_0x44630a(0xe9f)),_0x464214;}catch(_0x13f452){console[_0x44630a(0x52b)](_0x44630a(0x8f0),_0x13f452);throw new Error(_0x44630a(0x826));}}}async function _0x174471(_0x59b86f){const _0x341dc4=_0x7c5117,_0x56029e=_0x59b86f[_0x341dc4(0x10c2)][_0x341dc4(0xca1)][0x0];if(!_0x56029e)return;try{const _0x5d73a1=await _0x56029e['arrayBuffer'](),_0x54fc66=await _0x11a08b(_0x5d73a1),_0x53840f=_0x56029e[_0x341dc4(0x1023)]['replace'](/\.txt$/i,''),_0x178502=await _0x372b85[_0x341dc4(0x7b3)]['add']({'title':_0x53840f,'content':_0x54fc66,'lastOpened':Date[_0x341dc4(0xc22)]()});await _0x15729b(_0x178502),document[_0x341dc4(0xfa0)](_0x341dc4(0x97a))[_0x341dc4(0x128f)][_0x341dc4(0xea7)](_0x341dc4(0xdcc))&&_0x1da6d6();}catch(_0x5676df){console['error'](_0x341dc4(0x1236),_0x5676df),await _0x4abd86('导入失败',_0x5676df[_0x341dc4(0x790)]);}finally{_0x59b86f[_0x341dc4(0x10c2)][_0x341dc4(0x4f6)]=null;}}async function _0xc3b4e(){const _0x59f85b=_0x7c5117,_0x141990=_0x8f0871['activeChatId'];if(!_0x141990)return;const _0x34d7c0=_0x44002c[_0x141990];if(!_0x34d7c0||_0x34d7c0[_0x59f85b(0xa0c)]<=0x1)return;const _0x210874=await _0x131a69(_0x59f85b(0x13ad),'请输入想跳转的页码\x20(1\x20-\x20'+_0x34d7c0[_0x59f85b(0xa0c)]+')',_0x34d7c0[_0x59f85b(0xcd4)]+0x1);if(_0x210874===null)return;const _0x31cfb3=parseInt(_0x210874);if(isNaN(_0x31cfb3)||_0x31cfb3<0x1||_0x31cfb3>_0x34d7c0[_0x59f85b(0xa0c)]){alert('请输入一个有效的页码！');return;}_0x34d7c0['currentPage']=_0x31cfb3-0x1,_0x58a95a(_0x141990),_0x20247b(_0x34d7c0['activeBookId'],_0x34d7c0[_0x59f85b(0xcd4)]);}async function _0x20247b(_0x177dad,_0x1eef85){const _0x40f960=_0x7c5117;if(!_0x177dad)return;try{await _0x372b85[_0x40f960(0x7b3)][_0x40f960(0x1477)](_0x177dad,{'currentPage':_0x1eef85});}catch(_0xc3dd8a){console[_0x40f960(0x52b)](_0x40f960(0xcd3)+_0x177dad+_0x40f960(0xac6),_0xc3dd8a);}}async function _0x26a0e8(){const _0x3bc895=_0x7c5117,_0x23030a=_0x44002c[_0x8f0871[_0x3bc895(0xac8)]];_0x23030a&&_0x23030a[_0x3bc895(0xcd4)]<_0x23030a['totalPages']-0x1&&(_0x23030a['currentPage']++,_0x58a95a(_0x8f0871[_0x3bc895(0xac8)]),document[_0x3bc895(0xfa0)](_0x3bc895(0xc7a))[_0x3bc895(0x54d)]=0x0,await _0x20247b(_0x23030a[_0x3bc895(0x12ab)],_0x23030a['currentPage']),await notifyAiOfPageTurn(_0x8f0871['activeChatId'],_0x23030a));}function _0xa9aeab(_0x15fdb5,_0xae52fa){const _0x2ca8f1=_0x7c5117,_0x2d1f7f=_0x8f0871[_0x2ca8f1(0xac8)];if(!_0x2d1f7f)return;const _0x192108=_0x44002c[_0x2d1f7f];_0x192108[_0x2ca8f1(0x1187)]=_0x15fdb5[_0x2ca8f1(0x128a)](/\.txt$/i,''),_0x192108[_0x2ca8f1(0xa98)]=_0xae52fa[_0x2ca8f1(0x505)](/\r\n?|\n/)[_0x2ca8f1(0x556)](_0x21a3e9=>_0x21a3e9[_0x2ca8f1(0x128a)](/ +/g,'\x20')),_0x192108[_0x2ca8f1(0xa0c)]=Math[_0x2ca8f1(0x7a7)](_0x192108['contentLines'][_0x2ca8f1(0xac0)]/_0x192108[_0x2ca8f1(0xe81)]),_0x192108[_0x2ca8f1(0xcd4)]=0x0,_0x58a95a(_0x2d1f7f);}async function _0x17ed13(){const _0xcd5bb8=_0x7c5117;document[_0xcd5bb8(0xfa0)](_0xcd5bb8(0xca7))['value']='',await _0x1da6d6(),document[_0xcd5bb8(0xfa0)](_0xcd5bb8(0x97a))['classList'][_0xcd5bb8(0x1327)]('visible');}async function _0x1da6d6(_0x542827=''){const _0x258b10=_0x7c5117,_0x4ca6ab=document[_0x258b10(0xfa0)](_0x258b10(0x475));let _0x786886=await _0x372b85[_0x258b10(0x7b3)][_0x258b10(0x1554)]('lastOpened')[_0x258b10(0xaf5)]()[_0x258b10(0x3bc)]();_0x4ca6ab['innerHTML']='';_0x542827&&(_0x786886=_0x786886[_0x258b10(0xde7)](_0x3165d0=>_0x3165d0['title'][_0x258b10(0x1f3)]()[_0x258b10(0xf95)](_0x542827[_0x258b10(0x1f3)]())));if(_0x786886[_0x258b10(0xac0)]===0x0){const _0x556d15=_0x542827?_0x258b10(0x103f):_0x258b10(0x12cd);_0x4ca6ab['innerHTML']=_0x258b10(0x6f5)+_0x556d15+_0x258b10(0x129d);return;}_0x786886[_0x258b10(0x458)](_0x3a261e=>{const _0x3a7fc3=_0x258b10,_0x5762f9=document[_0x3a7fc3(0xb4e)](_0x3a7fc3(0xd53));_0x5762f9['className']=_0x3a7fc3(0x1133),_0x5762f9[_0x3a7fc3(0x1331)]=_0x3a7fc3(0x1027)+_0x3a261e['id']+'\x22>'+_0x3a261e[_0x3a7fc3(0x1187)]+_0x3a7fc3(0x1307)+_0x3a261e['id']+_0x3a7fc3(0x725),_0x4ca6ab['appendChild'](_0x5762f9);});}async function _0x15729b(_0x2bdd63){const _0x2fe043=_0x7c5117,_0x4d8938=_0x8f0871[_0x2fe043(0xac8)];if(!_0x4d8938)return;const _0x51bf8b=await _0x372b85[_0x2fe043(0x7b3)][_0x2fe043(0x70d)](_0x2bdd63);if(!_0x51bf8b){alert(_0x2fe043(0x416));return;}await _0x372b85['readingLibrary'][_0x2fe043(0x1477)](_0x2bdd63,{'lastOpened':Date[_0x2fe043(0xc22)]()});const _0x4db741=_0x44002c[_0x4d8938];_0x4db741[_0x2fe043(0x12ab)]=_0x2bdd63,_0x4db741[_0x2fe043(0x1187)]=_0x51bf8b[_0x2fe043(0x1187)],_0x4db741[_0x2fe043(0xa98)]=_0x51bf8b['content'][_0x2fe043(0x505)](/\r\n?|\n/)[_0x2fe043(0x556)](_0x3fc8c2=>_0x3fc8c2[_0x2fe043(0x128a)](/ +/g,'\x20')),_0x4db741[_0x2fe043(0xa0c)]=Math[_0x2fe043(0x7a7)](_0x4db741[_0x2fe043(0xa98)][_0x2fe043(0xac0)]/_0x4db741['linesPerPage']),_0x4db741[_0x2fe043(0xcd4)]=_0x51bf8b[_0x2fe043(0xcd4)]||0x0,_0x58a95a(_0x4d8938),document[_0x2fe043(0xfa0)](_0x2fe043(0xc7a))[_0x2fe043(0x54d)]=0x0,document['getElementById'](_0x2fe043(0x97a))[_0x2fe043(0x128f)][_0x2fe043(0x443)]('visible');}async function _0x10b896(_0x347401){const _0x7b3c8e=_0x7c5117,_0x3311ab=await _0x372b85[_0x7b3c8e(0x7b3)]['get'](_0x347401);if(!_0x3311ab)return;const _0x359ccb=await _0x3f65ed(_0x7b3c8e(0x1051),_0x7b3c8e(0x1144)+_0x3311ab[_0x7b3c8e(0x1187)]+_0x7b3c8e(0x53d),{'confirmButtonClass':_0x7b3c8e(0x611)});_0x359ccb&&(await _0x372b85['readingLibrary'][_0x7b3c8e(0xf10)](_0x347401),await _0x1da6d6());}function _0xa9aeab(_0x180b10,_0x2d94f){const _0x5e2396=_0x7c5117,_0x15e99d=_0x8f0871[_0x5e2396(0xac8)];if(!_0x15e99d)return;const _0x232a63=_0x44002c[_0x15e99d];_0x232a63[_0x5e2396(0x1187)]=_0x180b10[_0x5e2396(0x128a)](/\.txt$/i,''),_0x232a63[_0x5e2396(0xa98)]=_0x2d94f['split'](/\r\n?|\n/),_0x232a63[_0x5e2396(0xa0c)]=Math[_0x5e2396(0x7a7)](_0x232a63[_0x5e2396(0xa98)]['length']/_0x232a63[_0x5e2396(0xe81)]),_0x232a63[_0x5e2396(0xcd4)]=0x0,_0x58a95a(_0x15e99d);}function _0x4e8426(_0x4a7619,_0x581510){const _0x4dbe7d=_0x7c5117;let _0x214a78=0x0,_0x1ba918=0x0,_0x5c87ce=0x0,_0x25b519=0x0,_0x43f2f0=![],_0x31462a=![];const _0x19cc75=document[_0x4dbe7d(0xfa0)](_0x4dbe7d(0x1025)),_0x193da3=_0x15f10d=>{const _0x1954f8=_0x4dbe7d;if(_0x4a7619!==_0x581510&&_0x15f10d[_0x1954f8(0x10c2)][_0x1954f8(0x187)]('button'))return;_0x43f2f0=!![],_0x31462a=![];const _0x2f7887=_0x15f10d[_0x1954f8(0x682)]==='touchstart'?_0x15f10d[_0x1954f8(0x33f)][0x0]:_0x15f10d;_0x5c87ce=_0x2f7887['clientX'],_0x25b519=_0x2f7887[_0x1954f8(0x6b7)],_0x4a7619[_0x1954f8(0x63b)][_0x1954f8(0x8ce)]=_0x4a7619[_0x1954f8(0x7e3)]+'px',_0x4a7619[_0x1954f8(0x63b)]['left']=_0x4a7619['offsetLeft']+'px',_0x4a7619[_0x1954f8(0x63b)][_0x1954f8(0x1268)]='',document[_0x1954f8(0x7b8)](_0x1954f8(0xefe),_0x1cd15b),document[_0x1954f8(0x7b8)](_0x1954f8(0x31f),_0x13a489),document[_0x1954f8(0x7b8)](_0x1954f8(0x61e),_0x1cd15b),document[_0x1954f8(0x7b8)](_0x1954f8(0x130b),_0x13a489,{'passive':![]});},_0x13a489=_0x5f125f=>{const _0x2910aa=_0x4dbe7d;if(!_0x43f2f0)return;const _0x37c166=_0x5f125f[_0x2910aa(0x682)]===_0x2910aa(0x130b)?_0x5f125f['touches'][0x0]:_0x5f125f,_0x54e209=_0x37c166[_0x2910aa(0x9a6)]-_0x5c87ce,_0x173eb7=_0x37c166['clientY']-_0x25b519;!_0x31462a&&(Math[_0x2910aa(0x705)](_0x54e209)>0x5||Math[_0x2910aa(0x705)](_0x173eb7)>0x5)&&(_0x31462a=!![]);_0x31462a&&_0x5f125f[_0x2910aa(0x26a)]&&_0x5f125f['preventDefault']();_0x214a78=_0x5c87ce-_0x37c166[_0x2910aa(0x9a6)],_0x1ba918=_0x25b519-_0x37c166['clientY'],_0x5c87ce=_0x37c166[_0x2910aa(0x9a6)],_0x25b519=_0x37c166[_0x2910aa(0x6b7)];let _0x5774ad=_0x4a7619[_0x2910aa(0x7e3)]-_0x1ba918,_0x3817a0=_0x4a7619['offsetLeft']-_0x214a78;const _0x43bf86=_0x19cc75[_0x2910aa(0x144f)]-_0x4a7619[_0x2910aa(0x720)]-0xa,_0x4880f3=_0x19cc75[_0x2910aa(0xa41)]-_0x4a7619['offsetWidth']-0xa;_0x5774ad=Math[_0x2910aa(0xb70)](0xa,Math[_0x2910aa(0x28a)](_0x5774ad,_0x43bf86)),_0x3817a0=Math['max'](0xa,Math[_0x2910aa(0x28a)](_0x3817a0,_0x4880f3)),_0x4a7619['style'][_0x2910aa(0x8ce)]=_0x5774ad+'px',_0x4a7619[_0x2910aa(0x63b)][_0x2910aa(0xcb1)]=_0x3817a0+'px';},_0x1cd15b=()=>{const _0x202b77=_0x4dbe7d;document[_0x202b77(0x73f)](_0x202b77(0xefe),_0x1cd15b),document[_0x202b77(0x73f)](_0x202b77(0x31f),_0x13a489),document[_0x202b77(0x73f)](_0x202b77(0x61e),_0x1cd15b),document[_0x202b77(0x73f)](_0x202b77(0x130b),_0x13a489);if(!_0x43f2f0)return;_0x43f2f0=![],!_0x31462a&&_0x4a7619[_0x202b77(0xb4a)]();};_0x581510[_0x4dbe7d(0x7b8)]('mousedown',_0x193da3),_0x581510['addEventListener'](_0x4dbe7d(0x7d3),_0x193da3,{'passive':![]});}function _0x21ccf2(){const _0x35f30d=_0x7c5117,_0x2b2aea=_0x44002c[_0x8f0871[_0x35f30d(0xac8)]];if(!_0x2b2aea||!_0x2b2aea[_0x35f30d(0x684)])return;document[_0x35f30d(0xfa0)](_0x35f30d(0xb72))[_0x35f30d(0x128f)][_0x35f30d(0x1327)](_0x35f30d(0x1461)),document['getElementById'](_0x35f30d(0x709))[_0x35f30d(0x63b)][_0x35f30d(0x1248)]=_0x35f30d(0x138c),_0x2b2aea[_0x35f30d(0x1295)]=!![];}function _0x52464f(){const _0x3c6ed0=_0x7c5117,_0x1684e3=_0x44002c[_0x8f0871[_0x3c6ed0(0xac8)]];if(!_0x1684e3||!_0x1684e3[_0x3c6ed0(0x684)])return;document[_0x3c6ed0(0xfa0)](_0x3c6ed0(0x709))[_0x3c6ed0(0x63b)][_0x3c6ed0(0x1248)]=_0x3c6ed0(0x11b5),document['getElementById']('reading-window')['classList'][_0x3c6ed0(0x443)](_0x3c6ed0(0x1461)),_0x1684e3[_0x3c6ed0(0x1295)]=![];}function _0x354702(_0x4128a1,_0x166c5d){let _0x92bbb0;return function(..._0x36fd5a){const _0xcfb7de=_0x5817,_0x1834df=this;clearTimeout(_0x92bbb0),_0x92bbb0=setTimeout(()=>_0x4128a1[_0xcfb7de(0x745)](_0x1834df,_0x36fd5a),_0x166c5d);};}function _0x1f7679(_0xe43297){const _0x3cb663=_0x7c5117,_0x5bbfe2=_0x44002c[_0xe43297];if(!_0x5bbfe2||!_0x5bbfe2[_0x3cb663(0x684)])return'';const _0x59a690=_0x5bbfe2['title']||_0x3cb663(0xf48);let _0x655cb4='',_0x45e329='';if(_0x5bbfe2['currentSnippet']&&_0x5bbfe2[_0x3cb663(0x5d3)]['trim']())_0x655cb4=_0x5bbfe2[_0x3cb663(0x5d3)],_0x45e329=_0x3cb663(0xa1c);else{if(_0x5bbfe2[_0x3cb663(0xa98)][_0x3cb663(0xac0)]>0x0){const _0x37f8d6=_0x5bbfe2[_0x3cb663(0xcd4)]*_0x5bbfe2[_0x3cb663(0xe81)],_0x57de2a=_0x37f8d6+_0x5bbfe2[_0x3cb663(0xe81)];_0x655cb4=_0x5bbfe2[_0x3cb663(0xa98)][_0x3cb663(0x59f)](_0x37f8d6,_0x57de2a)[_0x3cb663(0xcc2)]('\x0a')['substring'](0x0,0xc8),_0x45e329='当前页内容摘要';}else _0x655cb4=_0x3cb663(0xd5f),_0x45e329='内容';}return _0x3cb663(0x1538)+_0x59a690+_0x3cb663(0x5f5)+_0x45e329+_0x3cb663(0xdc4)+_0x655cb4+_0x3cb663(0x1116)+(_0x8f0871[_0x3cb663(0x1260)][_0xe43297]?.[_0x3cb663(0x93e)]||_0x3cb663(0x6ad))+')，正在和用户一起【阅读和讨论】这本书。\x0a\x20\x20\x20\x202.\x20\x20**行为准则**:\x20你的回复【必须】是作为读者的【感想、评论、提问或联想】。你可以：\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20分享你对当前段落的看法。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20对书中的角色或情节发表评论。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20向用户提问，询问TA对内容的看法。\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20\x20\x20根据书本内容，联想到你自己的经历或记忆。\x0a\x20\x20\x20\x203.\x20\x20**严禁**:\x20你的回复【绝对禁止】使用书中角色的口吻和人称！【绝对禁止】扮演书中的任何角色！【绝对禁止】续写或模仿书中的情节！你必须时刻记住，你只是一个读者。\x20\x20\x20\x20\x0a';}function _0x1ab0e9(){const _0x1de8aa=_0x7c5117,_0xd2c9e3=_0x8f0871['activeChatId'];if(!_0xd2c9e3||!_0x44002c[_0xd2c9e3])return;const _0x20832a=_0x44002c[_0xd2c9e3],_0x4ee854=document[_0x1de8aa(0xfa0)]('reading-content'),_0x373d93=_0x4ee854[_0x1de8aa(0x54d)],_0x55317e=_0x4ee854[_0x1de8aa(0x144f)],_0x3dcf97=_0x373d93+_0x55317e,_0x50d5b4=0xf*1.8,_0x591289=Math[_0x1de8aa(0x13e5)](_0x373d93/_0x50d5b4),_0x41a3b5=Math[_0x1de8aa(0x7a7)](_0x3dcf97/_0x50d5b4),_0x58d61e=_0x20832a[_0x1de8aa(0xcd4)]*_0x20832a['linesPerPage']+_0x591289,_0x3d81bc=_0x20832a[_0x1de8aa(0xcd4)]*_0x20832a[_0x1de8aa(0xe81)]+_0x41a3b5;if(_0x58d61e<0x0||_0x58d61e>=_0x20832a[_0x1de8aa(0xa98)]['length'])return;const _0x599a6e=_0x20832a['contentLines'][_0x1de8aa(0x59f)](Math[_0x1de8aa(0xb70)](0x0,_0x58d61e),Math['min'](_0x20832a[_0x1de8aa(0xa98)]['length'],_0x3d81bc))[_0x1de8aa(0xcc2)]('\x0a');_0x20832a[_0x1de8aa(0x5d3)]=_0x599a6e;}function _0x2f939c(){const _0x56e94f=_0x7c5117,_0x55b950=document[_0x56e94f(0xfa0)](_0x56e94f(0xcb5));if(_0x55b950){const _0x48d486=_0x55b950[_0x56e94f(0xfe3)]();_0x48d486!==undefined&&_0x48d486[_0x56e94f(0x3c1)](_0x4dc278=>{const _0x57024c=_0x56e94f;console[_0x57024c(0x4ee)](_0x57024c(0x1350));})[_0x56e94f(0xe37)](_0x424905=>{const _0x2144ea=_0x56e94f;console[_0x2144ea(0x7fa)](_0x2144ea(0xa8a),_0x424905);});}}function _0x339967(){const _0x1e0275=_0x7c5117,_0x523e49=document['getElementById'](_0x1e0275(0xcb5));_0x523e49&&!_0x523e49['paused']&&(_0x523e49[_0x1e0275(0x3a3)](),_0x523e49['currentTime']=0x0,console[_0x1e0275(0x4ee)]('静音音频已停止。'));}async function _0x16c185(_0x541f5f){const _0x3b1f99=_0x7c5117,_0x3e576e=decodeURIComponent(_0x541f5f[_0x3b1f99(0x8df)][_0x3b1f99(0xda3)]),_0x58a5a4=_0x541f5f[_0x3b1f99(0x8df)][_0x3b1f99(0xa80)],_0x53c76b=_0x541f5f[_0x3b1f99(0xfb1)](_0x3b1f99(0x1284)),_0x6344f=_0x541f5f[_0x3b1f99(0xfb1)](_0x3b1f99(0xad2)),_0x2f9932=document['getElementById'](_0x3b1f99(0xe5f));if(!_0x2f9932[_0x3b1f99(0xab7)]&&_0x2f9932['dataset'][_0x3b1f99(0xb73)]===_0x3e576e&&_0x2f9932[_0x3b1f99(0x8df)][_0x3b1f99(0x117e)]===_0x58a5a4){_0x2f9932[_0x3b1f99(0x3a3)]();return;}_0x2f9932['pause'](),document['querySelectorAll'](_0x3b1f99(0x1284))['forEach'](_0x47cc4a=>_0x47cc4a[_0x3b1f99(0xc62)]='▶');const _0x5fed33=_0x3b1f99(0x131a)+_0x58a5a4+'_'+_0x3e576e;let _0x16c756=_0x8f0871[_0x3b1f99(0x14dd)][_0x3b1f99(0x70d)](_0x5fed33);if(_0x16c756){console['log'](_0x3b1f99(0xd17)),await _0x2f27c2(_0x16c756[_0x3b1f99(0x3f5)],_0x16c756[_0x3b1f99(0x682)],_0x3e576e,_0x58a5a4,_0x541f5f);return;}console[_0x3b1f99(0x4ee)](_0x3b1f99(0x44b));if(_0x53c76b)_0x53c76b[_0x3b1f99(0x63b)]['display']=_0x3b1f99(0x11b5);_0x6344f[_0x3b1f99(0x63b)]['display']=_0x3b1f99(0x127c);const {minimaxGroupId:_0x76dfdd,minimaxApiKey:_0x26d0f7}=_0x8f0871[_0x3b1f99(0xa78)];if(!_0x76dfdd||!_0x26d0f7){await _0x4abd86(_0x3b1f99(0x14d3),'请先在API设置中填写您的\x20Minimax\x20Group\x20ID\x20和\x20API\x20Key。'),_0x6344f[_0x3b1f99(0x63b)]['display']=_0x3b1f99(0x11b5);if(_0x53c76b)_0x53c76b[_0x3b1f99(0x63b)][_0x3b1f99(0x1248)]=_0x3b1f99(0x138c);return;}try{const _0x585a30=await fetch('https://api.minimax.chat/v1/text_to_speech?GroupId='+_0x76dfdd,{'method':_0x3b1f99(0xb67),'headers':{'Authorization':_0x3b1f99(0x681)+_0x26d0f7,'Content-Type':_0x3b1f99(0x4b5)},'body':JSON[_0x3b1f99(0x7cc)]({'text':_0x3e576e,'voice_id':_0x58a5a4,'model':_0x8f0871[_0x3b1f99(0xa78)][_0x3b1f99(0xfea)]||_0x3b1f99(0x6dd),'speed':0x1,'vol':0x1,'pitch':0x0})});if(!_0x585a30['ok']){let _0x59e780=_0x3b1f99(0xe77)+_0x585a30[_0x3b1f99(0x103e)];try{const _0x1ae699=await _0x585a30['json']();_0x59e780=_0x1ae699['base_resp']?.['status_msg']||JSON[_0x3b1f99(0x7cc)](_0x1ae699);}catch(_0x5d4a72){_0x59e780=await _0x585a30[_0x3b1f99(0xda3)]();}throw new Error(_0x59e780);}const _0x2a90b0=await _0x585a30[_0x3b1f99(0x6ae)](),_0x112f68=URL[_0x3b1f99(0xe35)](_0x2a90b0);await _0x2f27c2(_0x112f68,_0x2a90b0['type'],_0x3e576e,_0x58a5a4,_0x541f5f);const _0x1bcffa=new FileReader();_0x1bcffa[_0x3b1f99(0x502)]=function(){const _0x4a899c=_0x3b1f99;_0x8f0871['ttsCache'][_0x4a899c(0xe5d)](_0x5fed33,{'url':_0x1bcffa[_0x4a899c(0x4fe)],'type':_0x2a90b0['type']}),console[_0x4a899c(0x4ee)]('TTS\x20音频已保存到缓存。');},_0x1bcffa[_0x3b1f99(0x101e)](_0x2a90b0);}catch(_0x3bca0b){console[_0x3b1f99(0x52b)]('Minimax\x20TTS\x20API\x20调用失败:',_0x3bca0b),await _0x4abd86('语音生成失败',_0x3b1f99(0x483)+_0x3bca0b['message']);}finally{_0x6344f[_0x3b1f99(0x63b)][_0x3b1f99(0x1248)]='none';if(_0x53c76b)_0x53c76b['style'][_0x3b1f99(0x1248)]=_0x3b1f99(0x138c);}}function _0x2f27c2(_0x3e0f7e,_0x1e1be9,_0x10d610,_0x4e8d13,_0x2eea37){return new Promise((_0x2c6558,_0x5e4621)=>{const _0x291c7a=_0x5817,_0x5147aa=document[_0x291c7a(0xfa0)](_0x291c7a(0xe5f));_0x5147aa[_0x291c7a(0x53e)]=_0x3e0f7e,_0x5147aa[_0x291c7a(0x682)]=_0x1e1be9,_0x5147aa[_0x291c7a(0x8df)][_0x291c7a(0xb73)]=_0x10d610,_0x5147aa['dataset'][_0x291c7a(0x117e)]=_0x4e8d13;const _0x2cd69c=_0x5147aa[_0x291c7a(0xfe3)]();_0x2cd69c!==undefined&&_0x2cd69c[_0x291c7a(0x3c1)](()=>{const _0x353f02=_0x291c7a,_0x25f1f5=_0x2eea37[_0x353f02(0xfb1)]('.voice-play-btn');if(_0x25f1f5)_0x25f1f5[_0x353f02(0xc62)]='❚❚';_0x2c6558();})[_0x291c7a(0xe37)](_0x56f7cf=>{const _0x5a29cb=_0x291c7a;console[_0x5a29cb(0x52b)]('音频播放失败:',_0x56f7cf),_0x5e4621(_0x56f7cf);}),_0x5147aa[_0x291c7a(0x8f2)]=()=>{const _0x3e99ad=_0x291c7a,_0x26fe7b=_0x2eea37[_0x3e99ad(0xfb1)](_0x3e99ad(0x1284));if(_0x26fe7b)_0x26fe7b[_0x3e99ad(0xc62)]='▶';},_0x5147aa[_0x291c7a(0x1083)]=()=>{const _0x52b286=_0x291c7a,_0x2d5b5f=_0x2eea37[_0x52b286(0xfb1)]('.voice-play-btn');if(_0x2d5b5f)_0x2d5b5f[_0x52b286(0xc62)]='▶';};});}function _0x1c7d1e(_0x1633dc){const _0x467387=_0x7c5117,_0x131b52=_0x1633dc[_0x467387(0x187)](_0x467387(0x11e5));if(!_0x131b52)return;const _0x286b1e=_0x131b52[_0x467387(0xfb1)]('.voice-transcript'),_0x5319b5=decodeURIComponent(_0x1633dc[_0x467387(0x8df)]['text']);_0x286b1e[_0x467387(0x63b)][_0x467387(0x1248)]===_0x467387(0x127c)?_0x286b1e[_0x467387(0x63b)][_0x467387(0x1248)]=_0x467387(0x11b5):(_0x286b1e[_0x467387(0xc62)]=_0x5319b5,_0x286b1e['style'][_0x467387(0x1248)]=_0x467387(0x127c));}async function _0x414939(){const _0x2ae3aa=_0x7c5117;await _0x4a6808(),document[_0x2ae3aa(0xfa0)](_0x2ae3aa(0x12b6))['classList'][_0x2ae3aa(0x1327)]('visible');}async function _0x4a6808(){const _0x1f46ce=_0x7c5117,_0x178030=document[_0x1f46ce(0xfa0)]('existing-product-categories-list'),_0x49e68=await _0x372b85[_0x1f46ce(0xe1b)][_0x1f46ce(0x3bc)]();_0x178030['innerHTML']='';if(_0x49e68['length']===0x0){_0x178030[_0x1f46ce(0x1331)]=_0x1f46ce(0x1189);return;}_0x49e68[_0x1f46ce(0x458)](_0x54b6ab=>{const _0x728024=_0x1f46ce,_0x98a548=document[_0x728024(0xb4e)](_0x728024(0xd53));_0x98a548[_0x728024(0x1287)]='existing-group-item',_0x98a548[_0x728024(0x1331)]=_0x728024(0x541)+_0x54b6ab[_0x728024(0x1023)]+_0x728024(0x12cf)+_0x54b6ab['id']+_0x728024(0xebd),_0x178030[_0x728024(0x1155)](_0x98a548);});}async function _0x253f78(){const _0x39b157=_0x7c5117,_0x47e169=document[_0x39b157(0xfa0)]('new-product-category-name-input'),_0x52fd3b=_0x47e169['value'][_0x39b157(0xa06)]();if(!_0x52fd3b)return alert(_0x39b157(0xda2));const _0x4a2ce7=await _0x372b85[_0x39b157(0xe1b)][_0x39b157(0xdc7)](_0x39b157(0x1023))[_0x39b157(0x8c2)](_0x52fd3b)[_0x39b157(0x102a)]();if(_0x4a2ce7)return alert('分类\x20\x22'+_0x52fd3b+_0x39b157(0x1200));await _0x372b85['shoppingCategories'][_0x39b157(0x1327)]({'name':_0x52fd3b}),_0x47e169[_0x39b157(0x4f6)]='',await _0x4a6808();}async function _0x9d46f7(_0x5387e2){const _0x15869d=_0x7c5117,_0x1c5a04=await _0x3f65ed(_0x15869d(0x1464),'删除分类后，该分类下的所有商品将变为“未分类”。确定吗？',{'confirmButtonClass':'btn-danger'});_0x1c5a04&&(await _0x372b85[_0x15869d(0xe1b)]['delete'](_0x5387e2),await _0x372b85['shoppingProducts']['where'](_0x15869d(0x6b2))['equals'](_0x5387e2)[_0x15869d(0x52c)]({'categoryId':null}),await _0x4a6808());}function _0x387f27(_0x5905c0={}){const _0x1cd3e4=_0x7c5117,_0x319732=document[_0x1cd3e4(0xfa0)](_0x1cd3e4(0xd55)),_0x16946=document[_0x1cd3e4(0xb4e)]('div');return _0x16946['className']=_0x1cd3e4(0x2a0),_0x16946['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-block-btn\x22\x20title=\x22删除此款式\x22>×</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20grid;\x20grid-template-columns:\x201fr\x201fr;\x20gap:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22font-size:\x200.8em;\x22>款式名称</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22variation-name-input\x22\x20placeholder=\x22例如:\x20红色\x22\x20value=\x22'+(_0x5905c0['name']||'')+_0x1cd3e4(0x113a)+(_0x5905c0[_0x1cd3e4(0x1168)]||'')+_0x1cd3e4(0x860)+(_0x5905c0[_0x1cd3e4(0x127b)]||_0x1cd3e4(0xa77))+_0x1cd3e4(0x477),_0x16946[_0x1cd3e4(0xfb1)](_0x1cd3e4(0x819))[_0x1cd3e4(0x7b8)](_0x1cd3e4(0xb4a),()=>_0x16946[_0x1cd3e4(0x443)]()),_0x16946[_0x1cd3e4(0xfb1)](_0x1cd3e4(0xbe1))[_0x1cd3e4(0x7b8)](_0x1cd3e4(0xb4a),()=>{const _0x1bbf4f=_0x1cd3e4;_0x16946[_0x1bbf4f(0xfb1)]('.variation-image-input')[_0x1bbf4f(0xb4a)]();}),_0x16946[_0x1cd3e4(0xfb1)](_0x1cd3e4(0x1325))[_0x1cd3e4(0x7b8)](_0x1cd3e4(0xca8),_0x6f32cd=>{const _0xcd06ba=_0x1cd3e4,_0x3f22c6=_0x6f32cd['target'][_0xcd06ba(0xca1)][0x0];if(_0x3f22c6){const _0x2943b0=new FileReader();_0x2943b0[_0xcd06ba(0x7c6)]=_0xd56e4=>{const _0x39521e=_0xcd06ba;_0x16946[_0x39521e(0xfb1)](_0x39521e(0x914))[_0x39521e(0x53e)]=_0xd56e4['target'][_0x39521e(0x4fe)];},_0x2943b0[_0xcd06ba(0x101e)](_0x3f22c6);}}),_0x319732[_0x1cd3e4(0x1155)](_0x16946),_0x16946;}async function _0x5a39cd(_0x2921d7){const _0x7e3b65=_0x7c5117,_0x71cbf8=await _0x372b85[_0x7e3b65(0x8ad)][_0x7e3b65(0x70d)](_0x2921d7);if(!_0x71cbf8||!_0x71cbf8[_0x7e3b65(0x12bd)]||_0x71cbf8[_0x7e3b65(0x12bd)][_0x7e3b65(0xac0)]===0x0)return;const _0x7baaf8=document[_0x7e3b65(0xfa0)](_0x7e3b65(0x11ab));document[_0x7e3b65(0xfa0)](_0x7e3b65(0x14c4))[_0x7e3b65(0x53e)]=_0x71cbf8['imageUrl'],document[_0x7e3b65(0xfa0)](_0x7e3b65(0x41d))['textContent']=_0x71cbf8[_0x7e3b65(0x1023)];const _0x35ec88=document['getElementById'](_0x7e3b65(0x12f2));_0x35ec88['innerHTML']='',_0x71cbf8[_0x7e3b65(0x12bd)][_0x7e3b65(0x458)]((_0x17c223,_0x1a711e)=>{const _0x3eca1d=_0x7e3b65,_0x55edca=document['createElement']('input');_0x55edca['type']=_0x3eca1d(0x36c),_0x55edca[_0x3eca1d(0x1023)]=_0x3eca1d(0x1157),_0x55edca['id']='var-'+_0x2921d7+'-'+_0x1a711e,_0x55edca[_0x3eca1d(0x4f6)]=_0x1a711e,_0x55edca[_0x3eca1d(0x63b)][_0x3eca1d(0x1248)]=_0x3eca1d(0x11b5);if(_0x1a711e===0x0)_0x55edca['checked']=!![];const _0x2005b8=document[_0x3eca1d(0xb4e)](_0x3eca1d(0x116a));_0x2005b8[_0x3eca1d(0xbaf)]=_0x3eca1d(0x946)+_0x2921d7+'-'+_0x1a711e,_0x2005b8['textContent']=_0x17c223[_0x3eca1d(0x1023)],_0x2005b8['style'][_0x3eca1d(0x283)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x206px\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#ccc;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20all\x200.2s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x35ec88['appendChild'](_0x55edca),_0x35ec88[_0x3eca1d(0x1155)](_0x2005b8);});const _0x33dcc7=()=>{const _0x180356=_0x7e3b65,_0x33d368=_0x35ec88[_0x180356(0xfb1)](_0x180356(0x13ff));_0x35ec88[_0x180356(0x2a1)](_0x180356(0x116a))[_0x180356(0x458)](_0x41e8b9=>{const _0x529591=_0x180356;_0x41e8b9[_0x529591(0x63b)][_0x529591(0x122c)]=_0x529591(0x290),_0x41e8b9[_0x529591(0x63b)][_0x529591(0xa68)]=_0x529591(0x50f),_0x41e8b9[_0x529591(0x63b)][_0x529591(0x11f8)]=_0x529591(0xa11);});if(_0x33d368){const _0x450bd3=_0x35ec88[_0x180356(0xfb1)](_0x180356(0xcf7)+_0x33d368['id']+'\x22]');_0x450bd3[_0x180356(0x63b)][_0x180356(0x122c)]=_0x180356(0x149b),_0x450bd3[_0x180356(0x63b)][_0x180356(0xa68)]=_0x180356(0x149b),_0x450bd3[_0x180356(0x63b)][_0x180356(0x11f8)]=_0x180356(0x112b);const _0x55ce4a=_0x71cbf8['variations'][parseInt(_0x33d368[_0x180356(0x4f6)])];document[_0x180356(0xfa0)](_0x180356(0x11a8))[_0x180356(0xc62)]='¥'+_0x55ce4a['price'][_0x180356(0x3b8)](0x2),_0x55ce4a[_0x180356(0x127b)]?document[_0x180356(0xfa0)](_0x180356(0x14c4))[_0x180356(0x53e)]=_0x55ce4a['imageUrl']:document['getElementById'](_0x180356(0x14c4))[_0x180356(0x53e)]=_0x71cbf8['imageUrl'];}};_0x35ec88[_0x7e3b65(0x7b8)](_0x7e3b65(0xca8),_0x33dcc7),_0x33dcc7(),document[_0x7e3b65(0xfa0)]('variation-quantity-display')[_0x7e3b65(0xc62)]='1';const _0x4f4436=document[_0x7e3b65(0xfa0)](_0x7e3b65(0x151b)),_0x3dbbcd=_0x4f4436[_0x7e3b65(0xb5c)](!![]);_0x4f4436[_0x7e3b65(0xcdd)]['replaceChild'](_0x3dbbcd,_0x4f4436),_0x3dbbcd[_0x7e3b65(0x7b8)](_0x7e3b65(0xb4a),async()=>{const _0x387f87=_0x7e3b65,_0x525e6a=_0x35ec88[_0x387f87(0xfb1)](_0x387f87(0x13ff)),_0x324832=parseInt(document['getElementById']('variation-quantity-display')[_0x387f87(0xc62)]);if(_0x525e6a){const _0x4cd426=_0x71cbf8['variations'][parseInt(_0x525e6a[_0x387f87(0x4f6)])];await _0x3efdd0(_0x2921d7,_0x324832,_0x4cd426),_0x7baaf8[_0x387f87(0x128f)][_0x387f87(0x443)](_0x387f87(0xdcc)),await _0x4abd86('成功',_0x387f87(0xefb));}}),_0x7baaf8[_0x7e3b65(0x128f)]['add']('visible');}function _0x126932(){const _0x125ed2=_0x7c5117,_0x165249=document['getElementById']('shopping-settings-modal');document[_0x125ed2(0xfa0)](_0x125ed2(0x9cf))[_0x125ed2(0x4f6)]=_0x8f0871[_0x125ed2(0x7b0)][_0x125ed2(0x140c)]||0x3,document[_0x125ed2(0xfa0)](_0x125ed2(0xf19))[_0x125ed2(0x4f6)]=_0x8f0871['globalSettings'][_0x125ed2(0x7b7)]||0x8,_0x165249[_0x125ed2(0x128f)][_0x125ed2(0x1327)]('visible');}async function _0x6d509a(){const _0x5c50e9=_0x7c5117,_0x49a8de=document[_0x5c50e9(0xfa0)](_0x5c50e9(0x9cf)),_0x43eb32=document[_0x5c50e9(0xfa0)]('shopping-product-count-input'),_0x27cdc1=parseInt(_0x49a8de['value']),_0x214d07=parseInt(_0x43eb32[_0x5c50e9(0x4f6)]);if(isNaN(_0x27cdc1)||isNaN(_0x214d07)||_0x27cdc1<0x1||_0x214d07<0x1){alert(_0x5c50e9(0x151c));return;}_0x8f0871['globalSettings'][_0x5c50e9(0x140c)]=_0x27cdc1,_0x8f0871['globalSettings']['shoppingProductCount']=_0x214d07,await _0x372b85[_0x5c50e9(0x7b0)][_0x5c50e9(0x11d5)](_0x8f0871[_0x5c50e9(0x7b0)]),document['getElementById'](_0x5c50e9(0x11a4))['classList']['remove'](_0x5c50e9(0xdcc)),await _0x4abd86('保存成功',_0x5c50e9(0xad8));}async function _0x50ef60(){const _0x28c3b1=_0x7c5117;if(!_0x8f0871[_0x28c3b1(0xac8)]){await _0x4abd86('操作失败','请先进入一个聊天页面，再返回购物中心进行生成，以便AI了解要为哪个角色生成商品。');return;}const _0x532603=_0x8f0871['chats'][_0x8f0871[_0x28c3b1(0xac8)]],_0x15a2ad=await _0x3f65ed('为“'+_0x532603['name']+_0x28c3b1(0x259),_0x28c3b1(0xc99),{'confirmText':_0x28c3b1(0x1336)});if(!_0x15a2ad)return;await _0x4abd86('请稍候...',_0x28c3b1(0xdf6)+_0x532603[_0x28c3b1(0x1023)]+_0x28c3b1(0x440));const _0x3b06ca=_0x8f0871['apiConfig'][_0x28c3b1(0xb0e)]&&_0x8f0871['apiConfig']['secondaryApiKey']&&_0x8f0871[_0x28c3b1(0xa78)][_0x28c3b1(0x1020)],{proxyUrl:_0x1931bb,apiKey:_0x2615dc,model:_0x3263ce}=_0x3b06ca?{'proxyUrl':_0x8f0871['apiConfig'][_0x28c3b1(0xb0e)],'apiKey':_0x8f0871[_0x28c3b1(0xa78)][_0x28c3b1(0x1539)],'model':_0x8f0871[_0x28c3b1(0xa78)][_0x28c3b1(0x1020)]}:_0x8f0871[_0x28c3b1(0xa78)];if(!_0x1931bb||!_0x2615dc||!_0x3263ce){await _0x4abd86(_0x28c3b1(0x10a1),_0x28c3b1(0x242));return;}const _0x141b10=_0x8f0871['globalSettings'][_0x28c3b1(0x140c)]||0x3,_0x276c25=_0x8f0871[_0x28c3b1(0x7b0)][_0x28c3b1(0x7b7)]||0x8,_0x2434ea=await _0x372b85[_0x28c3b1(0xe1b)][_0x28c3b1(0x3bc)]();let _0x1d5253='';_0x2434ea[_0x28c3b1(0xac0)]>0x0&&(_0x1d5253=_0x28c3b1(0x17e)+_0x2434ea[_0x28c3b1(0x556)](_0x59ce52=>'\x22'+_0x59ce52[_0x28c3b1(0x1023)]+'\x22')[_0x28c3b1(0xcc2)](',\x20')+']\x0a');const _0xa460a5=_0x8f0871[_0x28c3b1(0x9dd)]['nickname']||'我',_0x4d0650=_0x532603['longTermMemory']&&_0x532603[_0x28c3b1(0x1312)]['length']>0x0?_0x532603[_0x28c3b1(0x1312)][_0x28c3b1(0x556)](_0x26b05f=>_0x28c3b1(0x3cf)+_0x2368ae(_0x26b05f[_0x28c3b1(0xe55)])+')\x20'+_0x26b05f[_0x28c3b1(0x1469)])[_0x28c3b1(0xcc2)]('\x0a'):'无',_0x234b3f=_0x532603[_0x28c3b1(0xc88)][_0x28c3b1(0x59f)](-0xa)[_0x28c3b1(0x556)](_0x51d28b=>(_0x51d28b[_0x28c3b1(0xc92)]==='user'?_0xa460a5:_0x532603[_0x28c3b1(0x1023)])+':\x20'+String(_0x51d28b['content'])[_0x28c3b1(0x9fe)](0x0,0x1e)+_0x28c3b1(0x1111))[_0x28c3b1(0xcc2)]('\x0a');let _0x3d83be='';if(_0x532603[_0x28c3b1(0x12d7)][_0x28c3b1(0xaaf)]&&_0x532603[_0x28c3b1(0x12d7)][_0x28c3b1(0xaaf)][_0x28c3b1(0xac0)]>0x0){const _0x5d7683=_0x532603[_0x28c3b1(0x12d7)]['linkedWorldBookIds']['map'](_0x53d9a5=>{const _0x232871=_0x28c3b1,_0x37ea9a=_0x8f0871[_0x232871(0x739)]['find'](_0x1b0480=>_0x1b0480['id']===_0x53d9a5);if(!_0x37ea9a||!Array['isArray'](_0x37ea9a[_0x232871(0x1469)]))return'';const _0x3571c9=_0x37ea9a[_0x232871(0x1469)][_0x232871(0xde7)](_0x4e23c0=>_0x4e23c0[_0x232871(0x7af)]!==![])['map'](_0x4204bc=>'-\x20'+_0x4204bc['content'])[_0x232871(0xcc2)]('\x0a');return _0x3571c9?'\x0a##\x20来自《'+_0x37ea9a['name']+_0x232871(0xab2)+_0x3571c9:'';})[_0x28c3b1(0xde7)](Boolean)[_0x28c3b1(0xcc2)]('');_0x5d7683&&(_0x3d83be=_0x28c3b1(0xe58)+_0x5d7683+'\x0a');}const _0x32313b=_0x28c3b1(0x1055)+_0x532603[_0x28c3b1(0x1023)]+_0x28c3b1(0x4b7)+_0x141b10+_0x28c3b1(0xe0a)+_0x276c25+_0x28c3b1(0xa16)+_0x532603['name']+_0x28c3b1(0xd0b)+_0x532603[_0x28c3b1(0x12d7)][_0x28c3b1(0x200)]+_0x28c3b1(0x1436)+_0x4d0650+'\x0a-\x20**世界书设定**:\x20'+_0x3d83be+'\x0a'+_0x1d5253+_0x28c3b1(0xbdd)+_0x234b3f+_0x28c3b1(0xc89)+_0x532603[_0x28c3b1(0x1023)]+_0x28c3b1(0x13a8);try{const _0x20e0f0=[{'role':'user','content':_0x28c3b1(0x9f1)}];let _0x3e45d3=_0x1931bb[_0x28c3b1(0xf95)](_0x28c3b1(0x9a5)),_0x4369a3=_0x1e2f27(_0x3263ce,_0x2615dc,_0x32313b,_0x20e0f0);const _0x41cde2=_0x3e45d3?await fetch(_0x4369a3[_0x28c3b1(0x3f5)],_0x4369a3[_0x28c3b1(0x3cc)]):await fetch(_0x1931bb+_0x28c3b1(0x1011),{'method':_0x28c3b1(0xb67),'headers':{'Content-Type':_0x28c3b1(0x4b5),'Authorization':'Bearer\x20'+_0x2615dc},'body':JSON[_0x28c3b1(0x7cc)]({'model':_0x3263ce,'messages':[{'role':_0x28c3b1(0x1417),'content':_0x32313b},..._0x20e0f0],'temperature':_0x8f0871['globalSettings']['apiTemperature']||0.9})});if(!_0x41cde2['ok'])throw new Error(_0x28c3b1(0x395)+_0x41cde2[_0x28c3b1(0x37e)]);const _0x27a69e=await _0x41cde2[_0x28c3b1(0xa2e)](),_0x434ddb=getGeminiResponseText(_0x27a69e),_0x5e7d60=_0x434ddb[_0x28c3b1(0x1232)](/({[\s\S]*})/);if(!_0x5e7d60)throw new Error('AI返回的内容中未找到有效的JSON对象。');const _0x3b4d64=JSON[_0x28c3b1(0x4a0)](_0x5e7d60[0x0]);if(!_0x3b4d64[_0x28c3b1(0x253)]||!Array[_0x28c3b1(0x345)](_0x3b4d64[_0x28c3b1(0x253)]))throw new Error(_0x28c3b1(0xba5));await _0x372b85['transaction']('rw',_0x372b85[_0x28c3b1(0x8ad)],_0x372b85[_0x28c3b1(0xe1b)],async()=>{const _0x3fcd7a=_0x28c3b1;for(const _0x268ea6 of _0x3b4d64[_0x3fcd7a(0x253)]){let _0x14a6b5;const _0x224920=await _0x372b85[_0x3fcd7a(0xe1b)][_0x3fcd7a(0xdc7)]('name')['equalsIgnoreCase'](_0x268ea6[_0x3fcd7a(0x1023)])[_0x3fcd7a(0x102a)]();_0x224920?_0x14a6b5=_0x224920['id']:_0x14a6b5=await _0x372b85['shoppingCategories'][_0x3fcd7a(0x1327)]({'name':_0x268ea6[_0x3fcd7a(0x1023)]});const _0x275349=_0x268ea6[_0x3fcd7a(0x1128)][_0x3fcd7a(0x556)](_0x13093d=>{const _0x4b651e=_0x3fcd7a;return{'name':_0x13093d[_0x4b651e(0x1023)],'price':_0x13093d[_0x4b651e(0x1168)]||0x0,'description':_0x13093d[_0x4b651e(0x211)]||'','imageUrl':_0x4b651e(0xe88)+encodeURIComponent(_0x13093d[_0x4b651e(0xe0d)]),'variations':(_0x13093d[_0x4b651e(0x12bd)]||[])[_0x4b651e(0x556)](_0x3c6b32=>({..._0x3c6b32,'imageUrl':_0x4b651e(0xe88)+encodeURIComponent(_0x3c6b32[_0x4b651e(0xe0d)])})),'categoryId':_0x14a6b5};});_0x275349[_0x3fcd7a(0xac0)]>0x0&&await _0x372b85[_0x3fcd7a(0x8ad)]['bulkAdd'](_0x275349);}}),activeShoppingCategoryId=_0x28c3b1(0x8ab),await _0x31f214(),await _0x4abd86(_0x28c3b1(0x521),'为“'+_0x532603[_0x28c3b1(0x1023)]+_0x28c3b1(0xd35));}catch(_0x3df77d){console[_0x28c3b1(0x52b)]('生成购物中心商品失败:',_0x3df77d),await _0x4abd86(_0x28c3b1(0x1e6),'无法生成商品，请检查(主/副)API配置或稍后再试。\x0a错误:\x20'+_0x3df77d['message']);}}async function _0x105357(_0x594222){const _0x3d9cd0=_0x7c5117,_0xd53c5=document[_0x3d9cd0(0xfa0)](_0x594222);if(!_0xd53c5)return;const _0x508b87=await _0x2aedfc(_0x3d9cd0(0x11b6),[{'text':_0x3d9cd0(0x234),'value':_0x3d9cd0(0x8f4)},{'text':'🌐\x20使用网络URL','value':_0x3d9cd0(0x3f5)}]);let _0x423372=null;if(_0x508b87===_0x3d9cd0(0x8f4))_0x423372=await _0x468818();else _0x508b87===_0x3d9cd0(0x3f5)&&(_0x423372=await _0x131a69(_0x3d9cd0(0x11b6),'请输入新的图片URL：',_0xd53c5['src'],'url'));if(_0x423372&&_0x423372['trim']()){const _0x369bcd=_0x423372['trim']();_0xd53c5[_0x3d9cd0(0x53e)]=_0x369bcd,!_0x8f0871[_0x3d9cd0(0x7b0)]['widgetData']&&(_0x8f0871[_0x3d9cd0(0x7b0)][_0x3d9cd0(0x275)]={}),_0x8f0871['globalSettings'][_0x3d9cd0(0x275)][_0x594222]=_0x369bcd,await _0x372b85[_0x3d9cd0(0x7b0)]['put'](_0x8f0871[_0x3d9cd0(0x7b0)]),await _0x4abd86('成功','组件图片已更新！');}}window['handleWidgetImageChange']=_0x105357;async function _0x3b65ac(){const _0x5a5e6f=_0x7c5117;if(!window['streamSaver']||typeof JSZip===_0x5a5e6f(0x358)){await _0x4abd86(_0x5a5e6f(0xf50),_0x5a5e6f(0x523));return;}await _0x4abd86(_0x5a5e6f(0x1213),_0x5a5e6f(0x30d));const _0x293877=streamSaver[_0x5a5e6f(0xbfe)]('EPhone-Sliced-Backup-'+new Date()['toISOString']()[_0x5a5e6f(0x505)]('T')[0x0]+_0x5a5e6f(0x11c3)),_0x1b3ccb=new JSZip(),_0x20efa3=0x5f*0x400*0x400;let _0x35fd79=0x1,_0x5cbeb1={},_0x419676=0x0;const _0x25e636=new TextEncoder();try{const _0x1dab44=_0x372b85[_0x5a5e6f(0xd06)][_0x5a5e6f(0x556)](_0x585729=>_0x585729[_0x5a5e6f(0x1023)]);for(const _0x2dbefd of _0x1dab44){console[_0x5a5e6f(0x4ee)](_0x5a5e6f(0x5ad)+_0x2dbefd+_0x5a5e6f(0x1111));const _0x4d929f=await _0x372b85[_0x5a5e6f(0x810)](_0x2dbefd)[_0x5a5e6f(0x3bc)]();if(_0x4d929f['length']===0x0)continue;const _0x5e062c=JSON[_0x5a5e6f(0x7cc)](_0x4d929f),_0x1bc671=_0x25e636[_0x5a5e6f(0x118c)](_0x5e062c)[_0x5a5e6f(0xac0)];if(_0x1bc671>_0x20efa3){console[_0x5a5e6f(0x7fa)](_0x5a5e6f(0x11b1)+_0x2dbefd+_0x5a5e6f(0xe79)+(_0x1bc671/0x400/0x400)[_0x5a5e6f(0x3b8)](0x2)+_0x5a5e6f(0x382));_0x419676>0x0&&(_0x1b3ccb[_0x5a5e6f(0x13b4)](_0x5a5e6f(0x148d)+_0x35fd79++ +_0x5a5e6f(0x613),JSON[_0x5a5e6f(0x7cc)]({'version':0x4,'type':'slice','data':_0x5cbeb1})),_0x5cbeb1={},_0x419676=0x0);_0x5cbeb1[_0x2dbefd]=_0x4d929f,_0x1b3ccb['file'](_0x5a5e6f(0x148d)+_0x35fd79++ +_0x5a5e6f(0x613),JSON[_0x5a5e6f(0x7cc)]({'version':0x4,'type':_0x5a5e6f(0x59f),'data':_0x5cbeb1})),_0x5cbeb1={},_0x419676=0x0;continue;}_0x419676>0x0&&_0x419676+_0x1bc671>_0x20efa3&&(console[_0x5a5e6f(0x4ee)](_0x5a5e6f(0x105c)+_0x35fd79+_0x5a5e6f(0x13d4)+(_0x419676/0x400/0x400)['toFixed'](0x2)+'MB)，正在归档...'),_0x1b3ccb['file'](_0x5a5e6f(0x148d)+_0x35fd79++ +_0x5a5e6f(0x613),JSON[_0x5a5e6f(0x7cc)]({'version':0x4,'type':_0x5a5e6f(0x59f),'data':_0x5cbeb1})),_0x5cbeb1={},_0x419676=0x0),_0x5cbeb1[_0x2dbefd]=_0x4d929f,_0x419676+=_0x1bc671;}_0x419676>0x0&&(console[_0x5a5e6f(0x4ee)](_0x5a5e6f(0x47b)+_0x35fd79+_0x5a5e6f(0x1f0)+(_0x419676/0x400/0x400)['toFixed'](0x2)+'MB)...'),_0x1b3ccb[_0x5a5e6f(0x13b4)](_0x5a5e6f(0x148d)+_0x35fd79+_0x5a5e6f(0x613),JSON['stringify']({'version':0x4,'type':_0x5a5e6f(0x59f),'data':_0x5cbeb1})));console['log'](_0x5a5e6f(0x22e));const _0x73b74e=_0x1b3ccb['generateInternalStream']({'type':'blob','streamFiles':!![]}),_0x42071d=new ReadableStream({'start'(_0x6ed355){const _0x3c1011=_0x5a5e6f;_0x73b74e['on']('data',_0x27ba82=>{_0x6ed355['enqueue'](_0x27ba82);})['on']('end',()=>{const _0x8dd8bc=_0x5817;console[_0x8dd8bc(0x4ee)](_0x8dd8bc(0x22d)),_0x6ed355[_0x8dd8bc(0x1043)]();})['on']('error',_0x38d8dd=>{const _0x4b94e0=_0x5817;console[_0x4b94e0(0x52b)]('JSZip\x20流错误:',_0x38d8dd),_0x6ed355[_0x4b94e0(0x52b)](_0x38d8dd);})[_0x3c1011(0x14b2)]();}});await _0x42071d[_0x5a5e6f(0x88c)](_0x293877),await _0x4abd86('导出已开始','您的分片备份已开始下载。解压后，您可以使用“导入”功能，选择其中的\x20`slice_X.json`\x20文件进行增量恢复。');}catch(_0x3f20e4){console[_0x5a5e6f(0x52b)](_0x5a5e6f(0x140e),_0x3f20e4),await _0x4abd86(_0x5a5e6f(0xf83),'在打包或写入文件流时发生错误:\x20'+_0x3f20e4[_0x5a5e6f(0x790)]);try{const _0x31597b=_0x293877[_0x5a5e6f(0x14e6)]();_0x31597b[_0x5a5e6f(0xffa)](_0x3f20e4);}catch(_0x1bf84b){}}}async function _0x30b0aa(){const _0xe27cfd=_0x7c5117;if(!window[_0xe27cfd(0x1165)]){alert(_0xe27cfd(0xdca));return;}await _0x4abd86('正在准备...',_0xe27cfd(0x9b4));const _0x298e38=streamSaver[_0xe27cfd(0xbfe)](_0xe27cfd(0x56d)+new Date()[_0xe27cfd(0x23b)]()[_0xe27cfd(0x505)]('T')[0x0]+'.json'),_0x225ff7=_0x298e38[_0xe27cfd(0x14e6)](),_0x3ee45d=new TextEncoder();try{await _0x225ff7[_0xe27cfd(0x143d)](_0x3ee45d[_0xe27cfd(0x118c)]('{\x0a\x22version\x22:\x203,\x0a\x22timestamp\x22:\x20'+Date['now']()+',\x0a\x22data\x22:\x20{\x0a'));const _0x46cfcb=await _0x372b85[_0xe27cfd(0xd06)][_0xe27cfd(0x556)](_0x59e152=>_0x59e152[_0xe27cfd(0x1023)]);for(let _0x4c3eca=0x0;_0x4c3eca<_0x46cfcb[_0xe27cfd(0xac0)];_0x4c3eca++){const _0xb6c318=_0x46cfcb[_0x4c3eca],_0x31b1ac=_0x372b85[_0xe27cfd(0x810)](_0xb6c318);await _0x225ff7['write'](_0x3ee45d[_0xe27cfd(0x118c)]('\x22'+_0xb6c318+_0xe27cfd(0x102f)));let _0x5bd5e5=!![];await _0x31b1ac[_0xe27cfd(0x13d1)](_0x174268=>{const _0x27edc9=_0xe27cfd;!_0x5bd5e5&&_0x225ff7[_0x27edc9(0x143d)](_0x3ee45d[_0x27edc9(0x118c)](',\x0a')),_0x225ff7[_0x27edc9(0x143d)](_0x3ee45d['encode'](JSON[_0x27edc9(0x7cc)](_0x174268))),_0x5bd5e5=![];}),await _0x225ff7[_0xe27cfd(0x143d)](_0x3ee45d[_0xe27cfd(0x118c)]('\x0a]')),_0x4c3eca<_0x46cfcb[_0xe27cfd(0xac0)]-0x1&&await _0x225ff7['write'](_0x3ee45d[_0xe27cfd(0x118c)](',\x0a'));}await _0x225ff7[_0xe27cfd(0x143d)](_0x3ee45d[_0xe27cfd(0x118c)](_0xe27cfd(0x3bf)));}catch(_0x29f3c6){console[_0xe27cfd(0x52b)](_0xe27cfd(0x2f8),_0x29f3c6),await _0x4abd86('导出失败',_0xe27cfd(0x5dc)+_0x29f3c6[_0xe27cfd(0x790)]);}finally{await _0x225ff7[_0xe27cfd(0x1043)]();}}async function _0x409065(){const _0x38f028=_0x7c5117;await _0x4abd86('正在准备...',_0x38f028(0x1183));try{const _0x581a7f={'version':0x3,'timestamp':Date[_0x38f028(0xc22)](),'data':{}},_0x13081f=_0x372b85[_0x38f028(0xd06)]['map'](_0x728b6d=>_0x728b6d[_0x38f028(0x1023)]);for(const _0x2c6dc9 of _0x13081f){const _0x5ac335=await _0x372b85[_0x38f028(0x810)](_0x2c6dc9)[_0x38f028(0x3bc)]();_0x581a7f[_0x38f028(0x3cc)][_0x2c6dc9]=_0x5ac335,console['log']('已打包表:\x20'+_0x2c6dc9+',\x20记录数:\x20'+_0x5ac335[_0x38f028(0xac0)]);}const _0x1ed2c4=new Blob([JSON['stringify'](_0x581a7f,null,0x2)],{'type':'application/json'}),_0x359349=URL[_0x38f028(0xe35)](_0x1ed2c4),_0x4dd2d0=document[_0x38f028(0xb4e)]('a');_0x4dd2d0[_0x38f028(0x5e9)]=_0x359349,_0x4dd2d0[_0x38f028(0xb9e)]='EPhone-Full-Backup-Legacy-'+new Date()[_0x38f028(0x23b)]()[_0x38f028(0x505)]('T')[0x0]+_0x38f028(0x613),_0x4dd2d0['click'](),URL[_0x38f028(0x43c)](_0x359349),await _0x4abd86(_0x38f028(0x1057),'已成功导出所有数据！');}catch(_0xd1ab05){console[_0x38f028(0x52b)]('传统导出数据时出错:',_0xd1ab05),await _0x4abd86(_0x38f028(0xf83),_0x38f028(0x1407)+_0xd1ab05[_0x38f028(0x790)]);}}function _0x5415e3(){const _0x1024d1=_0x7c5117,_0x4a0e71=Object[_0x1024d1(0x142f)](_0x8f0871[_0x1024d1(0x1260)])[_0x1024d1(0xd68)]((_0x45875e,_0x248304)=>{const _0x58edf8=_0x1024d1;if(_0x248304['id']===_0x8f0871[_0x58edf8(0xac8)])return _0x45875e;return _0x45875e+(_0x248304[_0x58edf8(0x28d)]||0x0);},0x0),_0x304ab0=_0xab67da||0x0,_0x76936=_0x4a0e71+_0x304ab0,_0x4fc645=document['getElementById']('back-to-list-btn');if(!_0x4fc645)return;let _0x82e2e0=_0x4fc645[_0x1024d1(0xfb1)](_0x1024d1(0xd65));!_0x82e2e0&&(_0x82e2e0=document['createElement']('span'),_0x82e2e0[_0x1024d1(0x1287)]='unread-indicator',_0x4fc645['appendChild'](_0x82e2e0));let _0x4ba9c2=_0x4fc645[_0x1024d1(0xfb1)]('.unread-indicator.back-btn-indicator');_0x4ba9c2&&_0x4ba9c2[_0x1024d1(0x443)](),_0x76936>0x0?(_0x82e2e0[_0x1024d1(0xc62)]=_0x76936>0x63?_0x1024d1(0x65e):_0x76936,_0x82e2e0[_0x1024d1(0x63b)][_0x1024d1(0x1248)]=_0x1024d1(0x127c),_0x82e2e0['style'][_0x1024d1(0x1129)]='20',_0x82e2e0[_0x1024d1(0x63b)][_0x1024d1(0x1268)]='scale(0.8)'):_0x82e2e0[_0x1024d1(0x63b)]['display']='none';}async function _0x5af796(_0x5e11e2){const _0x4ab7fb=_0x7c5117,_0x508e81=_0x5e11e2===_0x4ab7fb(0x398)?{'id':'uncategorized','name':_0x4ab7fb(0x129e)}:await _0x372b85[_0x4ab7fb(0xdec)][_0x4ab7fb(0x70d)](_0x5e11e2);if(!_0x508e81){console['error'](_0x4ab7fb(0x1438),_0x5e11e2);return;}const _0x1c2b73=document['getElementById'](_0x4ab7fb(0xe1f)),_0x325f36=document[_0x4ab7fb(0xfa0)](_0x4ab7fb(0x81a)),_0xc7b8fb=_0x1c2b73['querySelector'](_0x4ab7fb(0x108c));_0x325f36[_0x4ab7fb(0x1331)]='',_0xc7b8fb[_0x4ab7fb(0xc62)]='将分类\x20“'+_0x508e81[_0x4ab7fb(0x1023)]+'”\x20绑定到...';const _0xa66f94=Object['values'](_0x8f0871['chats'])[_0x4ab7fb(0x1376)]((_0x3b5472,_0x4f83e5)=>_0x3b5472[_0x4ab7fb(0x1023)][_0x4ab7fb(0x124c)](_0x4f83e5[_0x4ab7fb(0x1023)],_0x4ab7fb(0xb43)));_0xa66f94['forEach'](_0x4b9e89=>{const _0x39555f=_0x4ab7fb,_0xcfa7ef=Array[_0x39555f(0x345)](_0x4b9e89['settings']?.['stickerCategoryIds'])&&_0x4b9e89[_0x39555f(0x12d7)]['stickerCategoryIds'][_0x39555f(0xf95)](_0x5e11e2),_0x2d5f4d=document[_0x39555f(0xb4e)](_0x39555f(0xd53));_0x2d5f4d[_0x39555f(0x1287)]='contact-picker-item',_0x2d5f4d[_0x39555f(0x1331)]=_0x39555f(0x5eb)+_0x4b9e89['id']+'\x22\x20'+(_0xcfa7ef?_0x39555f(0xb34):'')+_0x39555f(0xe54)+(_0x4b9e89[_0x39555f(0x1364)]?_0x4b9e89[_0x39555f(0x12d7)][_0x39555f(0x4a1)]:_0x4b9e89[_0x39555f(0x12d7)]['aiAvatar']||_0x1a2fc1)+'\x22\x20class=\x22avatar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>'+_0x4b9e89['name']+_0x39555f(0x616),_0x325f36['appendChild'](_0x2d5f4d);}),document[_0x4ab7fb(0xfa0)]('save-sticker-binding-btn')[_0x4ab7fb(0x9f0)]=()=>_0x4d7925(_0x5e11e2),document['getElementById'](_0x4ab7fb(0x806))[_0x4ab7fb(0x9f0)]=()=>_0x1c2b73[_0x4ab7fb(0x128f)][_0x4ab7fb(0x443)]('visible'),_0x1c2b73[_0x4ab7fb(0x128f)][_0x4ab7fb(0x1327)](_0x4ab7fb(0xdcc));}async function _0x4d7925(_0x2c82b2){const _0x12b477=_0x7c5117,_0x29efc1=new Set(Array['from'](document[_0x12b477(0x2a1)]('#sticker-binding-chat-list\x20.sticker-binding-checkbox:checked'))[_0x12b477(0x556)](_0x1e9d15=>_0x1e9d15['dataset']['chatId'])),_0x22d7a6=[];for(const _0x3f53bc in _0x8f0871['chats']){const _0x2656ab=_0x8f0871['chats'][_0x3f53bc];!Array['isArray'](_0x2656ab[_0x12b477(0x12d7)][_0x12b477(0x13c5)])&&(_0x2656ab[_0x12b477(0x12d7)]['stickerCategoryIds']=[]);const _0x1d9d32=_0x2656ab[_0x12b477(0x12d7)]['stickerCategoryIds']['includes'](_0x2c82b2),_0x224168=_0x29efc1[_0x12b477(0xd58)](_0x3f53bc);if(_0x1d9d32&&!_0x224168)_0x2656ab[_0x12b477(0x12d7)]['stickerCategoryIds']=_0x2656ab[_0x12b477(0x12d7)][_0x12b477(0x13c5)][_0x12b477(0xde7)](_0x32e896=>_0x32e896!==_0x2c82b2),_0x22d7a6[_0x12b477(0x481)](_0x2656ab);else!_0x1d9d32&&_0x224168&&(_0x2656ab[_0x12b477(0x12d7)][_0x12b477(0x13c5)]['push'](_0x2c82b2),_0x22d7a6['push'](_0x2656ab));}_0x22d7a6[_0x12b477(0xac0)]>0x0&&(await _0x372b85[_0x12b477(0x1260)][_0x12b477(0x65d)](_0x22d7a6),await _0x4abd86('保存成功','表情包分类绑定已更新！')),document[_0x12b477(0xfa0)](_0x12b477(0xe1f))[_0x12b477(0x128f)][_0x12b477(0x443)]('visible');}function _0x5e5e2b(_0x4e97ec){const _0x1078f0=_0x7c5117;if(!_0x4e97ec||!_0x4e97ec['settings']['stickerCategoryIds']||_0x4e97ec['settings']['stickerCategoryIds'][_0x1078f0(0xac0)]===0x0)return'';const _0x4dcde9=_0x4e97ec[_0x1078f0(0x12d7)]['stickerCategoryIds'];let _0x56e8f3=[];const _0xc1e775=new Set();_0x4dcde9[_0x1078f0(0x458)](_0xe479dc=>{const _0x48868d=_0x1078f0;let _0x5e5fdc;_0xe479dc===_0x48868d(0x398)?_0x5e5fdc=_0x8f0871[_0x48868d(0x413)][_0x48868d(0xde7)](_0x4c670f=>!_0x4c670f['categoryId']):_0x5e5fdc=_0x8f0871[_0x48868d(0x413)][_0x48868d(0xde7)](_0x11d51c=>_0x11d51c['categoryId']===_0xe479dc),_0x5e5fdc[_0x48868d(0x458)](_0x183ed6=>{const _0x490c50=_0x48868d;!_0xc1e775['has'](_0x183ed6['name'])&&(_0x56e8f3[_0x490c50(0x481)](_0x183ed6),_0xc1e775[_0x490c50(0x1327)](_0x183ed6[_0x490c50(0x1023)]));});});if(_0x56e8f3[_0x1078f0(0xac0)]===0x0)return'';const _0x440854=_0x56e8f3[_0x1078f0(0x556)](_0x5d5a0b=>'-\x20'+_0x5d5a0b['name'])['join']('\x0a');return _0x1078f0(0xd7d)+_0x440854+'\x0a';}function _0x548d4f(_0xfc7a03){const _0x39ae00=_0x7c5117;if(!_0xfc7a03||!_0xfc7a03['isGroup'])return'';let _0x3b15ac='\x0a#\x20可用表情包\x20(优先使用)\x0a每个AI角色都被设置了专属表情包，在需要发送表情时，他们应该【优先】从自己的专属列表中选择。尽量让你的表情丰富多样，避免重复。\x0a',_0x1bb02e=![];return _0xfc7a03[_0x39ae00(0x2cf)][_0x39ae00(0x458)](_0x24ea32=>{const _0x4ee5e1=_0x39ae00;if(_0x24ea32['id']===_0x4ee5e1(0xcb0))return;const _0x3ee836=_0x8f0871[_0x4ee5e1(0x1260)][_0x24ea32['id']];if(_0x3ee836&&_0x3ee836[_0x4ee5e1(0x12d7)][_0x4ee5e1(0x13c5)]&&_0x3ee836[_0x4ee5e1(0x12d7)]['stickerCategoryIds'][_0x4ee5e1(0xac0)]>0x0){const _0x327ebc=_0x3ee836[_0x4ee5e1(0x12d7)][_0x4ee5e1(0x13c5)];let _0x281bb5=[];const _0x359df3=new Set();_0x327ebc['forEach'](_0xf8f21f=>{const _0x42eaf6=_0x4ee5e1;let _0xf1d846;_0xf8f21f==='uncategorized'?_0xf1d846=_0x8f0871[_0x42eaf6(0x413)][_0x42eaf6(0xde7)](_0x564fc0=>!_0x564fc0[_0x42eaf6(0x6b2)]):_0xf1d846=_0x8f0871['userStickers'][_0x42eaf6(0xde7)](_0xbe705=>_0xbe705[_0x42eaf6(0x6b2)]===_0xf8f21f),_0xf1d846[_0x42eaf6(0x458)](_0xf59a41=>{const _0x8508c2=_0x42eaf6;!_0x359df3[_0x8508c2(0xd58)](_0xf59a41[_0x8508c2(0x1023)])&&(_0x281bb5[_0x8508c2(0x481)](_0xf59a41),_0x359df3[_0x8508c2(0x1327)](_0xf59a41[_0x8508c2(0x1023)]));});}),_0x281bb5[_0x4ee5e1(0xac0)]>0x0&&(_0x1bb02e=!![],_0x3b15ac+=_0x4ee5e1(0x859)+_0x24ea32['groupNickname']+_0x4ee5e1(0xcdf)+_0x24ea32['originalName']+_0x4ee5e1(0x323),_0x3b15ac+=_0x281bb5[_0x4ee5e1(0x556)](_0x5ac6e7=>'-\x20'+_0x5ac6e7[_0x4ee5e1(0x1023)])[_0x4ee5e1(0xcc2)]('\x0a'));}}),_0x1bb02e?_0x3b15ac:'';}function _0x1dfebb(_0x27f925){const _0x1e1414=_0x7c5117;if(!_0x27f925)return 0x0;return Math[_0x1e1414(0x7a7)](_0x27f925[_0x1e1414(0xac0)]/1.5);}async function _0xa3f425(){const _0x1023aa=_0x7c5117;if(!_0x8f0871[_0x1023aa(0xac8)])return 0x0;const _0x139c67=_0x8f0871[_0x1023aa(0x1260)][_0x8f0871[_0x1023aa(0xac8)]];if(!_0x139c67)return 0x0;const _0x3b486a=parseInt(document[_0x1023aa(0xfa0)](_0x1023aa(0x1317))[_0x1023aa(0x4f6)])||0xa,_0x1d117e=parseInt(document[_0x1023aa(0xfa0)]('linked-memory-count')[_0x1023aa(0x4f6)])||0xa,_0x38653e=document[_0x1023aa(0xfa0)](_0x1023aa(0x6e5))[_0x1023aa(0xb34)],_0x30b850=document[_0x1023aa(0xfa0)](_0x1023aa(0xef6))[_0x1023aa(0x4f6)],_0x6feb93=document[_0x1023aa(0xfa0)](_0x1023aa(0x791))[_0x1023aa(0x4f6)];let _0x513310='';const _0xec2d3e=Array['from'](document['querySelectorAll'](_0x1023aa(0x4a3)))[_0x1023aa(0x556)](_0x199ade=>_0x199ade[_0x1023aa(0x4f6)][_0x1023aa(0x128a)](_0x1023aa(0x77b),''));if(_0xec2d3e['length']>0x0){const _0x11bfad=_0xec2d3e[_0x1023aa(0x556)](_0x245e15=>{const _0x48d4cb=_0x1023aa,_0x40979d=_0x8f0871[_0x48d4cb(0x739)]['find'](_0x554049=>_0x554049['id']===_0x245e15);if(!_0x40979d||!Array[_0x48d4cb(0x345)](_0x40979d[_0x48d4cb(0x1469)]))return'';return _0x40979d[_0x48d4cb(0x1469)][_0x48d4cb(0xde7)](_0x429157=>_0x429157[_0x48d4cb(0x7af)]!==![])[_0x48d4cb(0x556)](_0x4a89aa=>_0x4a89aa[_0x48d4cb(0x1469)])[_0x48d4cb(0xcc2)]('\x0a');})[_0x1023aa(0xde7)](Boolean)['join']('\x0a');_0x513310+=_0x11bfad;}_0x139c67['longTermMemory']&&_0x139c67[_0x1023aa(0x1312)][_0x1023aa(0xac0)]>0x0&&(_0x513310+=_0x139c67[_0x1023aa(0x1312)][_0x1023aa(0x556)](_0x3c4e30=>_0x3c4e30['content'])['join']('\x0a'));const _0x217193=document[_0x1023aa(0xfa0)](_0x1023aa(0x2c0))[_0x1023aa(0xb34)];if(_0x217193){const _0x434633=Array['from'](document[_0x1023aa(0x2a1)](_0x1023aa(0x5c3)))[_0x1023aa(0x556)](_0x1f8988=>_0x1f8988[_0x1023aa(0x4f6)]);for(const _0x1a239a of _0x434633){const _0x2e7a14=_0x8f0871[_0x1023aa(0x1260)][_0x1a239a];_0x2e7a14&&_0x2e7a14[_0x1023aa(0xc88)][_0x1023aa(0xac0)]>0x0&&(_0x513310+=_0x2e7a14['history'][_0x1023aa(0x59f)](-_0x1d117e)['map'](_0x1d01e6=>String(_0x1d01e6[_0x1023aa(0x1469)]))[_0x1023aa(0xcc2)]('\x0a'));}}_0x139c67['isGroup']?_0x139c67[_0x1023aa(0x2cf)][_0x1023aa(0x458)](_0x2b6af9=>{const _0x2bfa07=_0x1023aa;_0x513310+=_0x2b6af9[_0x2bfa07(0x3fa)];}):_0x513310+=_0x30b850;_0x513310+=_0x6feb93,_0x513310+=_0x5e5e2b(_0x139c67);_0x139c67[_0x1023aa(0x1364)]&&(_0x513310+=_0x548d4f(_0x139c67));if(!_0x139c67[_0x1023aa(0x1364)]&&_0x38653e){const _0x106821=document['getElementById'](_0x1023aa(0x8a0))[_0x1023aa(0x4f6)];if(_0x106821){const _0x102c41=_0x8f0871['presets']['find'](_0x1a59b8=>_0x1a59b8['id']===_0x106821);_0x102c41&&(_0x513310+=_0x102c41['content'][_0x1023aa(0xde7)](_0x2b8422=>_0x2b8422['enabled']!==![])[_0x1023aa(0x556)](_0x1b755d=>_0x1b755d[_0x1023aa(0x1469)])[_0x1023aa(0xcc2)]('\x0a'));}}const _0x12f21b=_0x139c67[_0x1023aa(0xc88)][_0x1023aa(0x59f)](-_0x3b486a);return _0x513310+=_0x12f21b[_0x1023aa(0x556)](_0x387b23=>{const _0x567c79=_0x1023aa;if(typeof _0x387b23[_0x567c79(0x1469)]==='string')return _0x387b23[_0x567c79(0x1469)];if(Array[_0x567c79(0x345)](_0x387b23[_0x567c79(0x1469)]))return _0x387b23[_0x567c79(0x1469)]['map'](_0x53e5ca=>_0x53e5ca['text'])[_0x567c79(0xcc2)]('\x20');return'';})[_0x1023aa(0xcc2)]('\x0a'),_0x1dfebb(_0x513310);}const _0x119202=_0x354702(async()=>{const _0x1f064c=_0x7c5117,_0xb99e31=document[_0x1f064c(0xfa0)](_0x1f064c(0xaee));if(!_0xb99e31)return;_0xb99e31[_0x1f064c(0x1331)]=_0x1f064c(0x97f);try{const _0x153e5a=await _0xa3f425();_0xb99e31['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22token-count-label\x22>预估总上下文Token数:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22token-count-value\x22><strong>\x20'+_0x153e5a+_0x1f064c(0x51f);}catch(_0x171e14){console[_0x1f064c(0x52b)](_0x1f064c(0xb11),_0x171e14),_0xb99e31['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22token-count-label\x22>预估总上下文Token数:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22token-count-value\x22\x20style=\x22color:\x20red;\x22>计算出错</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}},0x12c);async function _0x590f46(){const _0x4f3b5e=_0x7c5117,_0x43232a=document['getElementById'](_0x4f3b5e(0x36f));_0x43232a['innerHTML']='',_0x5eff38=[],_0x380514=0x0,_0xc45f2a=![];const _0x1761f4=[];try{const _0xf675c2=await _0x372b85[_0x4f3b5e(0x1260)][_0x4f3b5e(0x3bc)]();for(const _0x3f02b5 of _0xf675c2){_0x3f02b5[_0x4f3b5e(0xc88)]&&_0x3f02b5[_0x4f3b5e(0xc88)]['length']>0x0&&_0x3f02b5[_0x4f3b5e(0xc88)][_0x4f3b5e(0x458)](_0xe5fa62=>{const _0x4ff38f=_0x4f3b5e;_0xe5fa62[_0x4ff38f(0x682)]===_0x4ff38f(0x1a0)&&_0xe5fa62['imageUrl']&&_0x1761f4['push']({'sourceType':_0x4ff38f(0xe5e),'imageUrl':_0xe5fa62['imageUrl'],'prompt':_0xe5fa62[_0x4ff38f(0xa62)]||_0xe5fa62['fullPrompt']||_0x4ff38f(0xd87),'chatId':_0x3f02b5['id'],'msgTimestamp':_0xe5fa62[_0x4ff38f(0xe55)]});});}}catch(_0x47c7a4){console[_0x4f3b5e(0x52b)]('扫描聊天记录失败:',_0x47c7a4);}try{const _0x2ec2cc=await _0x372b85[_0x4f3b5e(0x12c2)][_0x4f3b5e(0x3bc)]();_0x2ec2cc['forEach'](_0x62c008=>{const _0x459904=_0x4f3b5e;if(_0x62c008['type']===_0x459904(0x1a0)){const _0x3d67f0=_0x62c008['imageUrls']||(_0x62c008[_0x459904(0x127b)]?[_0x62c008['imageUrl']]:[]),_0x50bf12=Array[_0x459904(0x345)](_0x62c008['prompt'])?_0x62c008['prompt']:[_0x62c008[_0x459904(0xa62)]||_0x459904(0xd87)];_0x3d67f0['forEach']((_0x2df782,_0x2c4189)=>{const _0x3823e8=_0x459904;_0x1761f4[_0x3823e8(0x481)]({'sourceType':_0x3823e8(0x62a),'imageUrl':_0x2df782,'prompt':_0x50bf12[_0x2c4189]||_0x50bf12[0x0],'postId':_0x62c008['id'],'imageIndex':_0x2c4189});});}});}catch(_0xa2c98c){console['error']('扫描动态失败:',_0xa2c98c);}_0x5eff38=_0x1761f4['sort']((_0x5de821,_0x3b8103)=>(_0x3b8103[_0x4f3b5e(0x1041)]||_0x3b8103[_0x4f3b5e(0x3eb)]||0x0)-(_0x5de821[_0x4f3b5e(0x1041)]||_0x5de821['postId']||0x0)),_0x5eff38[_0x4f3b5e(0xac0)]===0x0?_0x43232a[_0x4f3b5e(0x1331)]=_0x4f3b5e(0x14f5):_0x5c53ac(),document[_0x4f3b5e(0xfa0)](_0x4f3b5e(0x13c7))['classList']['add'](_0x4f3b5e(0xdcc));}function _0x3bbe4d(_0x29d4e3){const _0x4f9f4c=_0x7c5117,_0x3e81f8=document['getElementById'](_0x4f9f4c(0x36f));if(_0x29d4e3[_0x4f9f4c(0xac0)]===0x0&&_0x380514===0x0){_0x3e81f8[_0x4f9f4c(0x1331)]=_0x4f9f4c(0x14f5);return;}const _0x994586=document[_0x4f9f4c(0x491)]();_0x29d4e3[_0x4f9f4c(0x458)]((_0x1add30,_0x560cf1)=>{const _0x3a736b=_0x4f9f4c,_0x4ebfec=document['createElement'](_0x3a736b(0xd53));_0x4ebfec[_0x3a736b(0x1287)]='nai-gallery-item',_0x4ebfec[_0x3a736b(0x1187)]=_0x1add30[_0x3a736b(0xa62)];const _0x3c0afc=_0x1add30['sourceType']+'_'+(_0x1add30[_0x3a736b(0xe94)]||_0x1add30[_0x3a736b(0x3eb)])+'_'+(_0x1add30['msgTimestamp']||_0x1add30['imageIndex']);_0x4ebfec['dataset'][_0x3a736b(0x1557)]=_0x3c0afc,_0x4ebfec[_0x3a736b(0x8df)][_0x3a736b(0x127b)]=_0x1add30[_0x3a736b(0x127b)],_0x4ebfec[_0x3a736b(0x8df)][_0x3a736b(0xa62)]=_0x1add30[_0x3a736b(0xa62)],_0x4ebfec[_0x3a736b(0x1331)]=_0x3a736b(0x1529)+_0x1add30['imageUrl']+_0x3a736b(0xb12)+_0x1add30['prompt']+_0x3a736b(0x616),_0x994586['appendChild'](_0x4ebfec);}),_0x3e81f8[_0x4f9f4c(0x1155)](_0x994586);}async function _0x5c53ac(){const _0x3b2331=_0x7c5117;if(_0xc45f2a||_0x380514>=_0x5eff38[_0x3b2331(0xac0)])return;_0xc45f2a=!![];const _0x35b61b=document['getElementById'](_0x3b2331(0x36f));_0x4da623(_0x35b61b,'bottom'),setTimeout(()=>{const _0x2ca7d7=_0x3b2331,_0x428a17=_0x5eff38['slice'](_0x380514,_0x380514+_0x4f8068);_0x10441d(_0x35b61b),_0x428a17[_0x2ca7d7(0xac0)]>0x0&&(_0x3bbe4d(_0x428a17),_0x380514+=_0x428a17['length']),_0xc45f2a=![];},0x1f4);}function _0x107766(){const _0x560fff=_0x7c5117;_0x2bc57d=!_0x2bc57d;const _0x29b63f=document[_0x560fff(0xfa0)]('nai-gallery-grid'),_0x22149a=document['getElementById'](_0x560fff(0x408)),_0x5a4f13=document[_0x560fff(0xfa0)](_0x560fff(0x1233)),_0x5373d4=document['getElementById'](_0x560fff(0x773));_0x29b63f['classList'][_0x560fff(0xb80)](_0x560fff(0x4cb),_0x2bc57d),_0x2bc57d?(_0x22149a['textContent']='完成',_0x5a4f13[_0x560fff(0x63b)][_0x560fff(0x1248)]=_0x560fff(0x138c),_0x290316['clear'](),_0x5373d4[_0x560fff(0xb34)]=![],_0x20ddff()):(_0x22149a[_0x560fff(0xc62)]='管理',_0x5a4f13[_0x560fff(0x63b)]['display']='none',_0x29b63f[_0x560fff(0x2a1)](_0x560fff(0xa21))[_0x560fff(0x458)](_0x2a46f5=>_0x2a46f5[_0x560fff(0x128f)]['remove'](_0x560fff(0xaa0))));}function _0x20ddff(){const _0x395368=_0x7c5117,_0x2bf112=document[_0x395368(0xfa0)](_0x395368(0x625)),_0x5ba847=document[_0x395368(0xfa0)]('download-selected-nai-gallery-btn'),_0x210cf4=_0x290316[_0x395368(0xbc3)];if(_0x2bf112)_0x2bf112['textContent']=_0x395368(0x668)+_0x210cf4+')';if(_0x5ba847)_0x5ba847[_0x395368(0xc62)]=_0x395368(0x8c6)+_0x210cf4+')';}function _0x3db511(_0x117631){const _0x24f4ad=_0x7c5117,_0x4edc06=_0x117631[_0x24f4ad(0x10c2)][_0x24f4ad(0x187)](_0x24f4ad(0x1a2));if(!_0x4edc06)return;const _0xd7f8b1=_0x4edc06['dataset'][_0x24f4ad(0x1557)],_0x3da5b1=_0x4edc06[_0x24f4ad(0x8df)][_0x24f4ad(0x127b)],_0x474706=_0x4edc06[_0x24f4ad(0x8df)]['prompt'];if(_0x117631[_0x24f4ad(0x10c2)][_0x24f4ad(0x187)]('.nai-gallery-download-btn')){_0x117631[_0x24f4ad(0x21b)](),_0x40fcec(_0x3da5b1,_0x474706);return;}if(_0x117631[_0x24f4ad(0x10c2)]['closest']('.nai-gallery-delete-btn')){_0x117631[_0x24f4ad(0x21b)](),_0xab534d(new Set([_0xd7f8b1]));return;}if(_0x2bc57d)_0x4edc06[_0x24f4ad(0x128f)]['toggle'](_0x24f4ad(0xaa0)),_0x290316[_0x24f4ad(0xd58)](_0xd7f8b1)?_0x290316[_0x24f4ad(0xf10)](_0xd7f8b1):_0x290316['add'](_0xd7f8b1),_0x20ddff();else{const _0x1f784a=_0x24f4ad(0x120b),_0x31725='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x3da5b1+_0x24f4ad(0x601);_0x4abd86(_0x1f784a,_0x31725);}}async function _0x44a544(){const _0x1ea362=_0x7c5117,_0x3e9c48=_0x290316;if(_0x3e9c48['size']===0x0){alert(_0x1ea362(0x152e));return;}if(typeof JSZip==='undefined'||!window[_0x1ea362(0x1165)]){await _0x4abd86('下载失败','核心库\x20(JSZip\x20或\x20StreamSaver)\x20未能成功加载，请检查您的网络连接并刷新页面后重试。');return;}await _0x4abd86(_0x1ea362(0x3e1),_0x1ea362(0x6b3)+_0x3e9c48['size']+_0x1ea362(0x31b));const _0x250522=new JSZip();let _0x163965=0x0;const _0x1d6965=[];_0x3e9c48[_0x1ea362(0x458)](_0x1b002e=>{const _0x3c8357=_0x1ea362,_0x28c464=document['querySelector'](_0x3c8357(0x8af)+_0x1b002e+'\x22]');if(!_0x28c464)return;const _0x4851ee=_0x28c464[_0x3c8357(0x8df)]['imageUrl'],_0x236480=_0x28c464[_0x3c8357(0x8df)][_0x3c8357(0xa62)],_0x41b9c2=_0x1c56b7(_0x236480),_0x4c5939=((async()=>{const _0x28b534=_0x3c8357;try{let _0x22b74a;if(_0x4851ee[_0x28b534(0x9b8)]('data:')){const _0x426305=await fetch(_0x4851ee);_0x22b74a=await _0x426305[_0x28b534(0x6ae)]();}else{let _0x26f34b;try{_0x26f34b=await fetch(_0x4851ee,{'mode':'cors'});if(!_0x26f34b['ok'])throw new Error(_0x28b534(0x589));}catch(_0xeffbc4){console[_0x28b534(0x7fa)]('直连失败,\x20尝试使用CORS代理...',_0xeffbc4['message']);const _0x29beb6=_0x338ee6();let _0x224236=_0x29beb6[_0x28b534(0xfc4)]==='custom'?_0x29beb6[_0x28b534(0x10d3)]:_0x29beb6['cors_proxy'];if(!_0x224236||_0x224236==='')_0x224236='https://corsproxy.io/?';const _0x43feea=_0x224236+encodeURIComponent(_0x4851ee);_0x26f34b=await fetch(_0x43feea);}if(!_0x26f34b['ok'])throw new Error(_0x28b534(0x762)+_0x26f34b['status']);_0x22b74a=await _0x26f34b[_0x28b534(0x6ae)]();}_0x250522[_0x28b534(0x13b4)](_0x41b9c2,_0x22b74a,{'binary':!![]});}catch(_0x5f5637){console[_0x28b534(0x52b)](_0x28b534(0x405)+_0x4851ee,_0x5f5637),_0x163965++;}})());_0x1d6965[_0x3c8357(0x481)](_0x4c5939);}),await Promise[_0x1ea362(0x8ab)](_0x1d6965);if(_0x163965===_0x3e9c48['size']){await _0x4abd86(_0x1ea362(0xa55),_0x1ea362(0x1030));return;}await _0x4abd86(_0x1ea362(0xf87),_0x1ea362(0x22b));try{const _0x5047c0=streamSaver['createWriteStream'](_0x1ea362(0xc36)+Date[_0x1ea362(0xc22)]()+_0x1ea362(0x11c3)),_0x5dd46b=_0x250522[_0x1ea362(0x8e6)]({'type':'blob','streamFiles':!![]}),_0x5e904b=new ReadableStream({'start'(_0x4d58bb){const _0x3709a9=_0x1ea362;_0x5dd46b['on'](_0x3709a9(0x3cc),_0xa23c60=>{_0x4d58bb['enqueue'](_0xa23c60);})['on'](_0x3709a9(0xbd2),()=>{const _0x4097fc=_0x3709a9;console['log'](_0x4097fc(0x22d)),_0x4d58bb[_0x4097fc(0x1043)]();})['on'](_0x3709a9(0x52b),_0x46118e=>{const _0x4165c7=_0x3709a9;console[_0x4165c7(0x52b)](_0x4165c7(0x757),_0x46118e),_0x4d58bb['error'](_0x46118e);})['resume']();}});await _0x5e904b['pipeTo'](_0x5047c0),_0x163965>0x0&&_0x4abd86(_0x1ea362(0x7dd),_0x1ea362(0x12e4)+(_0x3e9c48[_0x1ea362(0xbc3)]-_0x163965)+'\x20张图片。有\x20'+_0x163965+_0x1ea362(0x30e));}catch(_0x7fc9ea){console[_0x1ea362(0x52b)](_0x1ea362(0xcdb),_0x7fc9ea),await _0x4abd86('流式下载失败',_0x1ea362(0x583)+_0x7fc9ea[_0x1ea362(0x790)]);}}async function _0xab534d(_0x31697c=null){const _0x24bfab=_0x7c5117,_0x52d736=_0x31697c||_0x290316;if(_0x52d736[_0x24bfab(0xbc3)]===0x0)return;const _0x1c7ac3=await _0x3f65ed('确认删除','确定要从【聊天记录和动态】中永久删除这\x20'+_0x52d736[_0x24bfab(0xbc3)]+_0x24bfab(0x10e0),{'confirmButtonClass':'btn-danger'});if(!_0x1c7ac3)return;await _0x4abd86(_0x24bfab(0x3e1),_0x24bfab(0x7b4));let _0x58de70=0x0;const _0xc1e731=new Map(),_0x3010cb=new Set(),_0xc161d4=new Map(),_0x20e562=new Set();for(const _0x1170ff of _0x52d736){if(_0x1170ff[_0x24bfab(0x9b8)](_0x24bfab(0x10b5))){const _0x393b31=_0x1170ff[_0x24bfab(0x505)]('_'),_0x3359e6=parseInt(_0x393b31[0x1]);!isNaN(_0x3359e6)&&_0x20e562[_0x24bfab(0x1327)](_0x3359e6);}}const _0x293fc5=new Map();if(_0x20e562[_0x24bfab(0xbc3)]>0x0){const _0x4289ad=await _0x372b85[_0x24bfab(0x12c2)][_0x24bfab(0xdc7)]('id')['anyOf'](Array[_0x24bfab(0x3aa)](_0x20e562))[_0x24bfab(0x3bc)]();_0x4289ad[_0x24bfab(0x458)](_0x2945a7=>_0x293fc5[_0x24bfab(0xe5d)](_0x2945a7['id'],_0x2945a7));}for(const _0x11927a of _0x52d736){const _0x26eb27=_0x11927a[_0x24bfab(0x505)]('_');if(_0x26eb27[_0x24bfab(0xac0)]<0x3){console['warn'](_0x24bfab(0xaa6),_0x11927a);continue;}const _0x53ad3b=_0x26eb27[0x0],_0x2059b8=_0x26eb27[_0x24bfab(0x217)](),_0x4edd8a=_0x26eb27[_0x24bfab(0x59f)](0x1)[_0x24bfab(0xcc2)]('_');if(_0x53ad3b==='chat'){const _0x381f1c=_0x4edd8a,_0x445953=parseInt(_0x2059b8);if(!_0xc1e731[_0x24bfab(0xd58)](_0x381f1c)){const _0x5f1bd4=await _0x372b85[_0x24bfab(0x1260)]['get'](_0x381f1c);if(_0x5f1bd4)_0xc1e731['set'](_0x381f1c,_0x5f1bd4);else{console[_0x24bfab(0x7fa)](_0x24bfab(0x115e)+_0x381f1c+_0x24bfab(0xadf));continue;}}const _0xea117c=_0xc1e731[_0x24bfab(0x70d)](_0x381f1c);if(_0xea117c&&_0xea117c['history']){const _0x21e20b=_0xea117c[_0x24bfab(0xc88)]['length'];_0xea117c[_0x24bfab(0xc88)]=_0xea117c[_0x24bfab(0xc88)][_0x24bfab(0xde7)](_0x2e77a9=>_0x2e77a9[_0x24bfab(0xe55)]!==_0x445953),_0xea117c['history']['length']<_0x21e20b&&(_0x58de70++,_0xc1e731[_0x24bfab(0xe5d)](_0x381f1c,_0xea117c));}}else{if(_0x53ad3b===_0x24bfab(0x62a)){const _0x4000d1=parseInt(_0x4edd8a),_0x12222e=parseInt(_0x2059b8),_0x382f89=_0xc161d4[_0x24bfab(0x70d)](_0x4000d1)||_0x293fc5[_0x24bfab(0x70d)](_0x4000d1);if(!_0x382f89){console[_0x24bfab(0x7fa)](_0x24bfab(0x1519)+_0x4000d1+_0x24bfab(0xadf));continue;}const _0x516057=_0x382f89['imageUrls']||(_0x382f89[_0x24bfab(0x127b)]?[_0x382f89['imageUrl']]:[]);if(_0x516057[_0x24bfab(0xac0)]<=0x1)_0x3010cb[_0x24bfab(0x1327)](_0x4000d1),_0xc161d4[_0x24bfab(0xd58)](_0x4000d1)&&_0xc161d4['delete'](_0x4000d1);else{const _0x26b53d=_0x516057[_0x12222e];_0x382f89[_0x24bfab(0xe5c)]=_0x382f89[_0x24bfab(0xe5c)][_0x24bfab(0xde7)](_0x518951=>_0x518951!==_0x26b53d),_0x382f89[_0x24bfab(0xa62)]&&Array['isArray'](_0x382f89['prompt'])&&_0x382f89[_0x24bfab(0xa62)][_0x12222e]&&_0x382f89[_0x24bfab(0xa62)]['splice'](_0x12222e,0x1),_0x382f89[_0x24bfab(0x127b)]=_0x382f89['imageUrls'][0x0]||null,_0xc161d4[_0x24bfab(0xe5d)](_0x4000d1,_0x382f89);}_0x58de70++;}}}try{await _0x372b85[_0x24bfab(0xf81)]('rw',_0x372b85['chats'],_0x372b85['qzonePosts'],async()=>{const _0x522c8b=_0x24bfab;_0xc1e731[_0x522c8b(0xbc3)]>0x0&&await _0x372b85[_0x522c8b(0x1260)]['bulkPut'](Array[_0x522c8b(0x3aa)](_0xc1e731[_0x522c8b(0x142f)]())),_0xc161d4[_0x522c8b(0xbc3)]>0x0&&await _0x372b85[_0x522c8b(0x12c2)]['bulkPut'](Array[_0x522c8b(0x3aa)](_0xc161d4['values']())),_0x3010cb[_0x522c8b(0xbc3)]>0x0&&await _0x372b85[_0x522c8b(0x12c2)][_0x522c8b(0x504)](Array['from'](_0x3010cb));}),_0x107766(),await _0x590f46(),await _0x4abd86(_0x24bfab(0xdd4),_0x24bfab(0x24e)+_0x58de70+_0x24bfab(0xdeb)),document['getElementById']('chat-interface-screen')[_0x24bfab(0x128f)]['contains'](_0x24bfab(0xa37))&&_0x54d32b(_0x8f0871[_0x24bfab(0xac8)]),document[_0x24bfab(0xfa0)]('qzone-screen')[_0x24bfab(0x128f)]['contains'](_0x24bfab(0xa37))&&_0x1098dc();}catch(_0x3c6537){console[_0x24bfab(0x52b)](_0x24bfab(0x576),_0x3c6537),await _0x4abd86('删除失败','操作失败:\x20'+_0x3c6537[_0x24bfab(0x790)]);}}function _0x1c56b7(_0x6f3c64){const _0x113c37=_0x7c5117,_0x52607a=_0x6f3c64||_0x113c37(0x9fc);let _0xb936df=_0x52607a['replace'](/[^a-zA-Z0-9\u4e00-\u9fa5\s]/g,'_')[_0x113c37(0x128a)](/\s+/g,'_')['substring'](0x0,0x1e);!_0xb936df&&(_0xb936df=_0x113c37(0x9fc));const _0x21ab4b=new Date()[_0x113c37(0x23b)]()[_0x113c37(0x128a)](/[-:]/g,'')[_0x113c37(0x128a)]('T','_')[_0x113c37(0x505)]('.')[0x0];return _0xb936df+'_'+_0x21ab4b+'.png';}async function _0x4e42f6(){const _0x2d2252=_0x7c5117;initLanguage();async function _0x16e5e8(_0x1666f0){const _0xb8a726=_0x5817;if(!_0x1666f0)return;try{const _0x14ddcf=await _0x1666f0[_0xb8a726(0xda3)](),_0x5d53df=JSON[_0xb8a726(0x4a0)](_0x14ddcf);if(_0x5d53df[_0xb8a726(0x682)]==='EPhoneWorldBookBackup')console[_0xb8a726(0x4ee)](_0xb8a726(0x41f)),await _0x25423c(_0x5d53df);else{if(_0x5d53df[_0xb8a726(0x545)]&&typeof _0x5d53df['entries']===_0xb8a726(0xf2e))console[_0xb8a726(0x4ee)](_0xb8a726(0xa6c)),await _0x1f697d(_0x5d53df,_0x1666f0[_0xb8a726(0x1023)]);else throw new Error('文件格式无法识别。请确保您选择的是有效的\x20EPhone\x20世界书备份或\x20Tavern\x20AI\x20世界书文件。');}}catch(_0x1dcb26){console[_0xb8a726(0x52b)](_0xb8a726(0x1cb),_0x1dcb26),await _0x4abd86(_0xb8a726(0x11c5),_0xb8a726(0x6b8)+_0x1dcb26['message']);}}async function _0x1f697d(_0x434975,_0x1b2502){const _0x5eae5a=_0x5817,_0x334c8d=_0x1b2502['replace'](/\.json$/i,''),_0x4c33c2=await _0x131a69('导入\x20Tavern\x20AI\x20世界书',_0x5eae5a(0xc7d),_0x334c8d);if(!_0x4c33c2||!_0x4c33c2[_0x5eae5a(0xa06)]()){alert(_0x5eae5a(0x972));return;}const _0x10300a=Object[_0x5eae5a(0x142f)](_0x434975[_0x5eae5a(0x545)])[_0x5eae5a(0x556)](_0x3cc156=>{const _0x46b295=_0x5eae5a;return{'keys':_0x3cc156[_0x46b295(0x1557)]||[],'comment':_0x3cc156[_0x46b295(0x7ab)]||_0x46b295(0x13e2),'content':_0x3cc156[_0x46b295(0x1469)]||'','enabled':!_0x3cc156[_0x46b295(0xc0d)]};})[_0x5eae5a(0xde7)](_0x5d324e=>_0x5d324e[_0x5eae5a(0x1469)]);if(_0x10300a[_0x5eae5a(0xac0)]===0x0){alert(_0x5eae5a(0xe19));return;}const _0x4f0d76={'id':'wb_'+Date['now'](),'name':_0x4c33c2[_0x5eae5a(0xa06)](),'content':_0x10300a,'categoryId':null};await _0x372b85['worldBooks']['add'](_0x4f0d76),_0x8f0871[_0x5eae5a(0x739)][_0x5eae5a(0x481)](_0x4f0d76),await _0xc4183b(),await _0x4abd86('导入成功！',_0x5eae5a(0x7cd)+_0x4c33c2+'》。');}async function _0x21961a(){const _0x38ad6d=_0x5817;try{const _0x22fd98=await _0x372b85[_0x38ad6d(0x739)][_0x38ad6d(0x3bc)](),_0x1a65bf=await _0x372b85[_0x38ad6d(0xa7a)][_0x38ad6d(0x3bc)]();if(_0x22fd98[_0x38ad6d(0xac0)]===0x0&&_0x1a65bf['length']===0x0){alert('没有可导出的世界书数据。');return;}const _0x22f5c2={'type':_0x38ad6d(0xfb4),'version':0x1,'timestamp':Date['now'](),'books':_0x22fd98,'categories':_0x1a65bf},_0x339547=new Blob([JSON[_0x38ad6d(0x7cc)](_0x22f5c2,null,0x2)],{'type':_0x38ad6d(0x4b5)}),_0x3ab02d=URL[_0x38ad6d(0xe35)](_0x339547),_0x2d0a0a=document[_0x38ad6d(0xb4e)]('a');_0x2d0a0a[_0x38ad6d(0x5e9)]=_0x3ab02d,_0x2d0a0a['download']=_0x38ad6d(0xf85)+new Date()[_0x38ad6d(0x23b)]()[_0x38ad6d(0x505)]('T')[0x0]+'.json',_0x2d0a0a['click'](),URL['revokeObjectURL'](_0x3ab02d),await _0x4abd86(_0x38ad6d(0x1057),_0x38ad6d(0xc4a));}catch(_0x217207){console['error'](_0x38ad6d(0xb36),_0x217207),await _0x4abd86('导出失败','发生了一个错误:\x20'+_0x217207['message']);}}async function _0x25423c(_0x336550){const _0x2b4a31=_0x5817;try{if(_0x336550[_0x2b4a31(0x682)]!==_0x2b4a31(0xfb4)||!_0x336550[_0x2b4a31(0x486)])throw new Error('文件格式不正确，这不是一个有效的世界书备份文件。');const _0x2f28f0=await _0x3f65ed(_0x2b4a31(0x783),_0x2b4a31(0x341),{'confirmButtonClass':_0x2b4a31(0x611),'confirmText':_0x2b4a31(0xe68)});if(!_0x2f28f0)return;await _0x372b85[_0x2b4a31(0xf81)]('rw',_0x372b85[_0x2b4a31(0x739)],_0x372b85[_0x2b4a31(0xa7a)],async()=>{const _0x96f332=_0x2b4a31;await _0x372b85[_0x96f332(0x739)][_0x96f332(0xf7d)](),await _0x372b85[_0x96f332(0xa7a)][_0x96f332(0xf7d)](),Array[_0x96f332(0x345)](_0x336550['books'])&&await _0x372b85['worldBooks'][_0x96f332(0x65d)](_0x336550[_0x96f332(0x486)]),Array['isArray'](_0x336550[_0x96f332(0x253)])&&await _0x372b85[_0x96f332(0xa7a)][_0x96f332(0x65d)](_0x336550[_0x96f332(0x253)]);}),_0x8f0871['worldBooks']=await _0x372b85[_0x2b4a31(0x739)][_0x2b4a31(0x3bc)](),await _0xc4183b(),await _0x4abd86(_0x2b4a31(0x1471),_0x2b4a31(0xbe5));}catch(_0x5cecf0){console[_0x2b4a31(0x52b)]('导入世界书时出错:',_0x5cecf0),await _0x4abd86(_0x2b4a31(0x11c5),_0x2b4a31(0x6b8)+_0x5cecf0['message']);}}const _0x1018b7=localStorage[_0x2d2252(0xe2e)](_0x2d2252(0x131d));if(_0x1018b7){const _0x513b00=(Date[_0x2d2252(0xc22)]()-parseInt(_0x1018b7))/(0x3e8*0x3c);_0x513b00>0x5&&_0x2911d4(_0x513b00);}_0x50e005(),window[_0x2d2252(0x1d3)]=_0x2d25e5,window['openRenderingRulesScreen']=_0x281fd4,window['handleListenTogetherClick']=_0xe27660,window[_0x2d2252(0x6af)]=_0x21e16c,window[_0x2d2252(0x8f1)]=_0xa5664b,window['switchToMyPhone']=_0x57492a,window[_0x2d2252(0x1b8)]=_0x45724d,window[_0x2d2252(0x9b7)]=_0x299137,window[_0x2d2252(0x7ae)]=_0x92a78c;const _0x31b521=document[_0x2d2252(0xb4e)](_0x2d2252(0xd53));_0x31b521['id']=_0x2d2252(0x5f4),_0x31b521[_0x2d2252(0x1331)]=_0x2d2252(0x4f8),document[_0x2d2252(0xfa0)](_0x2d2252(0xd9f))[_0x2d2252(0x1155)](_0x31b521);const _0x248f02=document['createElement'](_0x2d2252(0x63b));_0x248f02['id']=_0x2d2252(0x1084),document[_0x2d2252(0xdf2)]['appendChild'](_0x248f02),_0x5cbe86[_0x2d2252(0x120c)]=document[_0x2d2252(0xfa0)](_0x2d2252(0x3cb)),_0x5cbe86[_0x2d2252(0xfc9)]=document['getElementById']('qzone-sticker-grid');const _0x4b0823=localStorage['getItem']('ephone-theme')||'light';_0x2113bd(_0x4b0823);const _0x595242=document[_0x2d2252(0xb4e)](_0x2d2252(0x63b));_0x595242['id']=_0x2d2252(0x1558),document[_0x2d2252(0xdf2)]['appendChild'](_0x595242);const _0x5ac96c=document[_0x2d2252(0xb4e)](_0x2d2252(0x63b));_0x5ac96c['id']=_0x2d2252(0x10a7),document[_0x2d2252(0xdf2)][_0x2d2252(0x1155)](_0x5ac96c),_0x512130('',_0x2d2252(0x953),_0x2d2252(0x1558)),_0x512130('',_0x2d2252(0x79a),_0x2d2252(0x10a7)),window['openRenderingRulesScreen']=_0x281fd4,window[_0x2d2252(0x1d3)]=_0x2d25e5,window[_0x2d2252(0x82b)]=_0x2d75fb,window[_0x2d2252(0x196)]=_0x5dc909,window[_0x2d2252(0xd47)]=_0x147987,window[_0x2d2252(0x904)]=_0xc4183b,await _0x3fa188(),_0x34979a(),await _0x10f4a4(),_0xcbf629(_0x8f0871[_0x2d2252(0x7b0)][_0x2d2252(0x901)]);const _0x14c4b0=parseInt(localStorage[_0x2d2252(0xe2e)](_0x2d2252(0x8cc)))||0x0;_0x11aa82(_0x14c4b0);_0x8f0871[_0x2d2252(0x7b0)]&&_0x8f0871[_0x2d2252(0x7b0)][_0x2d2252(0x1208)]&&_0x2dccde(_0x8f0871[_0x2d2252(0x7b0)][_0x2d2252(0x1208)]);_0x4008f8(),setInterval(_0x4008f8,0x3e8*0x1e),_0x22b1db(),_0x179c09(),_0x5c238f(),_0x5aedc2(),document[_0x2d2252(0xfa0)](_0x2d2252(0x13db))['addEventListener'](_0x2d2252(0xb4a),_0x32f664=>{const _0x24bf26=_0x2d2252;_0x32f664['target'][_0x24bf26(0x128f)]['contains'](_0x24bf26(0x13af))&&_0x5acd2e(_0x32f664[_0x24bf26(0x10c2)][_0x24bf26(0x8df)][_0x24bf26(0x6b2)]);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x587))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>_0x56e253(null)),document[_0x2d2252(0xfa0)]('cancel-rule-editor-btn')[_0x2d2252(0x7b8)]('click',()=>{const _0x532be4=_0x2d2252;document['getElementById'](_0x532be4(0xee4))['classList'][_0x532be4(0x443)]('visible');}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1280))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x9e5afb),document[_0x2d2252(0xfa0)](_0x2d2252(0x48f))['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x95868e=_0x2d2252;if(_0x8f0871[_0x95868e(0xac8)]&&!_0x8f0871[_0x95868e(0x1260)][_0x8f0871['activeChatId']]['isGroup']){const _0x3223a0=_0x8f0871[_0x95868e(0x1260)][_0x8f0871['activeChatId']];_0x2e122d(_0x3223a0['id'],_0x3223a0[_0x95868e(0x93e)]);}});let _0x5321ff=null;function _0x5059ff(_0x2bd9e5){const _0x3f75e7=_0x2d2252;_0x5321ff=_0x2bd9e5;const _0x738536=_0x8f0871[_0x3f75e7(0x1260)][_0x8f0871[_0x3f75e7(0xac8)]],_0xe1c468=_0x738536['announcements']['find'](_0x1f9c75=>_0x1f9c75['id']===_0x2bd9e5);if(!_0xe1c468)return;const _0x580a50=document['getElementById'](_0x3f75e7(0x375));_0x580a50[_0x3f75e7(0xc62)]=_0xe1c468[_0x3f75e7(0x67d)]?'取消置顶':_0x3f75e7(0xfdb),document[_0x3f75e7(0xfa0)]('announcement-actions-modal')['classList']['add']('visible');}async function _0x1bc4bb(){const _0x308764=_0x2d2252;if(!_0x5321ff)return;const _0x14589c=_0x8f0871[_0x308764(0x1260)][_0x8f0871[_0x308764(0xac8)]],_0x342bb4=_0x14589c[_0x308764(0x804)][_0x308764(0x7ed)](_0x102c16=>_0x102c16['id']===_0x5321ff);_0x342bb4&&(_0x342bb4['isPinned']=!_0x342bb4[_0x308764(0x67d)],await _0x372b85[_0x308764(0x1260)][_0x308764(0x11d5)](_0x14589c),_0x12e53c()),document['getElementById'](_0x308764(0x58d))[_0x308764(0x128f)][_0x308764(0x443)](_0x308764(0xdcc));}async function _0x1f981c(){const _0xd62ce9=_0x2d2252;if(!_0x5321ff)return;const _0x2aee1f=await _0x3f65ed(_0xd62ce9(0x1464),_0xd62ce9(0x588),{'confirmButtonClass':'btn-danger'});if(_0x2aee1f){const _0x46fc1d=_0x8f0871[_0xd62ce9(0x1260)][_0x8f0871[_0xd62ce9(0xac8)]];_0x46fc1d[_0xd62ce9(0x804)]=_0x46fc1d[_0xd62ce9(0x804)][_0xd62ce9(0xde7)](_0x592eb5=>_0x592eb5['id']!==_0x5321ff),await _0x372b85['chats']['put'](_0x46fc1d),_0x12e53c();}document[_0xd62ce9(0xfa0)](_0xd62ce9(0x58d))[_0xd62ce9(0x128f)][_0xd62ce9(0x443)](_0xd62ce9(0xdcc));}document[_0x2d2252(0xfa0)]('custom-modal-cancel')['addEventListener'](_0x2d2252(0xb4a),_0x117f1e),document[_0x2d2252(0xfa0)](_0x2d2252(0x1463))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x423ef1=>{const _0x3e1f07=_0x2d2252;if(_0x423ef1[_0x3e1f07(0x10c2)]===_0x171bab)_0x117f1e();}),document[_0x2d2252(0xfa0)]('export-data-btn')['addEventListener'](_0x2d2252(0xb4a),async()=>{const _0x5a9f66=_0x2d2252,_0x16bbcc=await _0x2aedfc(_0x5a9f66(0x4fb),[{'text':_0x5a9f66(0x9e0),'value':_0x5a9f66(0x59f)},{'text':_0x5a9f66(0x144c),'value':_0x5a9f66(0x453)},{'text':'传统导出\x20(兼容旧版或内存小的浏览器)','value':_0x5a9f66(0x6ae)}]);if(_0x16bbcc===_0x5a9f66(0x59f))_0x3b65ac();else{if(_0x16bbcc===_0x5a9f66(0x453))_0x30b0aa();else _0x16bbcc===_0x5a9f66(0x6ae)&&_0x409065();}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x9db))['addEventListener'](_0x2d2252(0xb4a),_0x1aecb6),document[_0x2d2252(0xfa0)](_0x2d2252(0x6e5))['addEventListener'](_0x2d2252(0xca8),_0x589666=>{const _0x15d281=_0x2d2252;document['getElementById'](_0x15d281(0x6c2))[_0x15d281(0x63b)][_0x15d281(0x1248)]=_0x589666[_0x15d281(0x10c2)][_0x15d281(0xb34)]?'block':'none';}),document[_0x2d2252(0xfa0)](_0x2d2252(0xd9a))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>document[_0x2d2252(0xfa0)](_0x2d2252(0x7bc))[_0x2d2252(0xb4a)]()),document[_0x2d2252(0xfa0)](_0x2d2252(0xb56))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x2d10f6=>{const _0xaba707=_0x2d2252;document['getElementById'](_0xaba707(0x1203))[_0xaba707(0x63b)][_0xaba707(0x1248)]=_0x2d10f6[_0xaba707(0x10c2)][_0xaba707(0xb34)]?_0xaba707(0x127c):_0xaba707(0x11b5);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x7bc))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x2fc250=>_0x16abaa(_0x2fc250[_0x2d2252(0x10c2)][_0x2d2252(0xca1)][0x0])),document['getElementById'](_0x2d2252(0x64b))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x357973),document[_0x2d2252(0xfa0)](_0x2d2252(0xb02))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x44bbcb=_0x2d2252;_0x37f63f={},_0x512130('',_0x44bbcb(0x953),_0x44bbcb(0x1558)),_0x512130('',_0x44bbcb(0x79a),_0x44bbcb(0x10a7)),_0x17a1e5(),_0x8f0871[_0x44bbcb(0xac8)]=null,_0x2d25e5('chat-list-screen');}),document[_0x2d2252(0xfa0)]('add-chat-btn')['addEventListener']('click',async()=>{const _0x844a58=_0x2d2252,_0x483b43=await _0x2aedfc('创建新聊天',[{'text':'手动创建角色','value':_0x844a58(0xb68)},{'text':_0x844a58(0xfdc),'value':_0x844a58(0x89f)}]);if(_0x483b43===_0x844a58(0xb68)){const _0x1adef6=await _0x131a69(_0x844a58(0xd1e),_0x844a58(0xaa5));if(!_0x1adef6||!_0x1adef6[_0x844a58(0xa06)]())return;const _0x177ee9=await _0x131a69('创建新聊天\x20(第2/2步)',_0x844a58(0x55d));if(!_0x177ee9||!_0x177ee9[_0x844a58(0xa06)]())return;const _0x380776='chat_'+Date['now'](),_0x2d9819={'id':_0x380776,'name':_0x1adef6[_0x844a58(0xa06)](),'originalName':_0x177ee9[_0x844a58(0xa06)](),'isGroup':![],'isPinned':![],'unreadCount':0x0,'relationship':{'status':_0x844a58(0x14b5),'blockedTimestamp':null,'applicationReason':''},'status':{'text':'在线','lastUpdate':Date[_0x844a58(0xc22)](),'isBusy':![]},'settings':{'aiPersona':_0x844a58(0x8cb),'myPersona':'我是谁呀。','myNickname':'我','maxMemory':0xa,'aiAvatar':_0x1a2fc1,'myAvatar':_0x1a2fc1,'background':'','theme':'default','fontSize':0xd,'customCss':'','linkedWorldBookIds':[],'aiAvatarLibrary':[],'myAvatarLibrary':[],'enableBackgroundActivity':!![],'actionCooldownMinutes':0xf,'enableTimePerception':!![],'isOfflineMode':![],'offlineMinLength':0x64,'offlineMaxLength':0x12c,'offlinePresetId':null,'timeZone':'Asia/Shanghai'},'history':[],'musicData':{'totalTime':0x0},'longTermMemory':[],'thoughtsHistory':[]};_0x8f0871['chats'][_0x380776]=_0x2d9819,await _0x372b85[_0x844a58(0x1260)][_0x844a58(0x11d5)](_0x2d9819),_0x2d75fb();}else _0x483b43===_0x844a58(0x89f)&&document['getElementById'](_0x844a58(0x64b))[_0x844a58(0xb4a)]();}),document['getElementById'](_0x2d2252(0xf99))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x2116d4),document[_0x2d2252(0xfa0)](_0x2d2252(0x52d))['addEventListener'](_0x2d2252(0xb4a),()=>document['getElementById'](_0x2d2252(0x1415))[_0x2d2252(0x128f)][_0x2d2252(0x443)](_0x2d2252(0xdcc))),document['getElementById'](_0x2d2252(0x1176))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x4b2cbb),document[_0x2d2252(0xfa0)](_0x2d2252(0x2c2))[_0x2d2252(0x7b8)]('click',_0xe27660),document['getElementById'](_0x2d2252(0x4ec))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>_0x2530aa(!![])),document[_0x2d2252(0xfa0)](_0x2d2252(0x530))['addEventListener'](_0x2d2252(0xb4a),_0x12adb8),document['getElementById'](_0x2d2252(0x4c4))[_0x2d2252(0x7b8)]('click',_0xcebb84),document['getElementById'](_0x2d2252(0x4bd))['addEventListener']('click',_0xcf66fc),document[_0x2d2252(0xfa0)](_0x2d2252(0x1520))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x48c4e0),document[_0x2d2252(0xfa0)](_0x2d2252(0x59d))[_0x2d2252(0x7b8)]('click',_0x571a02),document['getElementById'](_0x2d2252(0xf16))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x40188d=_0x2d2252;_0x45ef07(),document[_0x40188d(0xfa0)](_0x40188d(0xd8c))[_0x40188d(0x128f)][_0x40188d(0x1327)](_0x40188d(0xdcc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0xeda))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>document[_0x2d2252(0xfa0)](_0x2d2252(0xd8c))[_0x2d2252(0x128f)][_0x2d2252(0x443)]('visible')),document[_0x2d2252(0xfa0)](_0x2d2252(0x821))['addEventListener'](_0x2d2252(0xb4a),_0x4d7581),document['getElementById']('add-song-local-btn')[_0x2d2252(0x7b8)]('click',()=>document[_0x2d2252(0xfa0)](_0x2d2252(0x6ab))[_0x2d2252(0xb4a)]()),document[_0x2d2252(0xfa0)](_0x2d2252(0x6ab))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x31a5e6),document[_0x2d2252(0xfa0)]('playlist-body')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x53b763=>{const _0x533873=_0x2d2252,_0x565789=_0x53b763[_0x533873(0x10c2)],_0x54a248=parseInt(_0x565789[_0x533873(0x8df)][_0x533873(0x874)]);if(isNaN(_0x54a248))return;if(_0x565789[_0x533873(0x128f)]['contains'](_0x533873(0x9b3)))_0x4f232a(_0x54a248);else{if(_0x565789[_0x533873(0x128f)][_0x533873(0xea7)](_0x533873(0x1e0)))_0x19e41e(_0x54a248);else{if(_0x565789[_0x533873(0x128f)][_0x533873(0xea7)](_0x533873(0x1090)))_0x4f0df7(_0x54a248);else _0x565789[_0x533873(0x128f)][_0x533873(0xea7)]('delete-track-btn')&&_0xaf2707(_0x54a248);}}}),_0x447ac1[_0x2d2252(0x7b8)](_0x2d2252(0x474),()=>{const _0x182c07=_0x2d2252;document[_0x182c07(0xfa0)]('vinyl-view')[_0x182c07(0x128f)][_0x182c07(0x443)](_0x182c07(0xf5e)),_0xcf66fc();});const _0xed08a=document['getElementById'](_0x2d2252(0x127a));document[_0x2d2252(0xfa0)](_0x2d2252(0x146f))[_0x2d2252(0x7b8)]('click',()=>{const _0x2991a0=_0x2d2252;_0x2f939c();const _0x4ee481=_0xed08a[_0x2991a0(0x4f6)]['trim']();if(!_0x4ee481||!_0x8f0871['activeChatId'])return;const _0x202484=_0x8f0871['chats'][_0x8f0871[_0x2991a0(0xac8)]],_0x3016cc={'role':_0x2991a0(0xcb0),'content':_0x4ee481,'timestamp':Date[_0x2991a0(0xc22)]()};_0x143fbf&&(_0x3016cc[_0x2991a0(0x12da)]=_0x143fbf),_0x25d29f(_0x3016cc,_0x202484),((async()=>{const _0x437ed4=_0x2991a0;_0x202484[_0x437ed4(0xc88)][_0x437ed4(0x481)](_0x3016cc),await _0x372b85[_0x437ed4(0x1260)][_0x437ed4(0x11d5)](_0x202484),_0x2d75fb();})()),_0xed08a['value']='',_0xed08a['style'][_0x2991a0(0x886)]='auto',_0xed08a[_0x2991a0(0x10c7)](),_0x339877();}),document[_0x2d2252(0xfa0)]('wait-reply-btn')[_0x2d2252(0x7b8)]('click',_0x2264b2),_0xed08a['addEventListener'](_0x2d2252(0x803),_0x4f8313=>{const _0x1cc8be=_0x2d2252;_0x4f8313['key']==='Enter'&&!_0x4f8313[_0x1cc8be(0xe6d)]&&(_0x4f8313[_0x1cc8be(0xdc1)](),document[_0x1cc8be(0xfa0)](_0x1cc8be(0x146f))['click']());}),document[_0x2d2252(0xfa0)](_0x2d2252(0x462))['addEventListener'](_0x2d2252(0xca8),async _0x4b72e4=>{const _0x19ac7c=_0x2d2252,_0x138016=_0x4b72e4[_0x19ac7c(0x10c2)][_0x19ac7c(0xca1)][0x0];if(_0x138016){const _0x50364=await new Promise((_0x136912,_0x43202b)=>{const _0x422fbb=_0x19ac7c,_0x29a087=new FileReader();_0x29a087[_0x422fbb(0x7c6)]=()=>_0x136912(_0x29a087[_0x422fbb(0x4fe)]),_0x29a087[_0x422fbb(0x14b0)]=()=>_0x43202b(_0x29a087['error']),_0x29a087[_0x422fbb(0x101e)](_0x138016);});_0x49d8a7=_0x50364,_0x147987();}}),document[_0x2d2252(0xfa0)](_0x2d2252(0xc57))['addEventListener'](_0x2d2252(0xb4a),async()=>{const _0x813098=_0x2d2252;_0x49d8a7&&(_0x8f0871[_0x813098(0x7b0)][_0x813098(0xf61)]=_0x49d8a7),_0x8f0871[_0x813098(0x7b0)][_0x813098(0x901)]=document['getElementById'](_0x813098(0x10a8))[_0x813098(0x4f6)]['trim'](),_0x8f0871[_0x813098(0x7b0)]['notificationSoundUrl']=document[_0x813098(0xfa0)]('notification-sound-url-input')[_0x813098(0x4f6)][_0x813098(0xa06)](),_0x8f0871[_0x813098(0x7b0)][_0x813098(0x7f3)]=document[_0x813098(0xfa0)](_0x813098(0x4a7))[_0x813098(0xb34)],await _0x372b85[_0x813098(0x7b0)]['put'](_0x8f0871[_0x813098(0x7b0)]),_0x22b1db(),_0x4fca03(),_0x49d8a7=null,_0x5c238f(),_0x57ce71(),_0xcbf629(_0x8f0871[_0x813098(0x7b0)][_0x813098(0x901)]),_0x34979a(),alert(_0x813098(0x503)),_0x2d25e5(_0x813098(0x117a));});const _0x296975=document['getElementById'](_0x2d2252(0x230));_0x296975[_0x2d2252(0x7b8)](_0x2d2252(0xcaf),()=>{const {scrollTop:_0x53d766,scrollHeight:_0x536a39,clientHeight:_0x4152ef}=_0x296975;_0x536a39-_0x53d766-_0x4152ef<_0x4152ef&&(!_0x4ed3d1&&_0x2ac8d4());}),document['getElementById'](_0x2d2252(0x1074))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x3770ef=_0x2d2252;_0x8f0871['apiConfig'][_0x3770ef(0x1ce)]=document[_0x3770ef(0xfa0)]('proxy-url')[_0x3770ef(0x4f6)][_0x3770ef(0xa06)](),_0x8f0871[_0x3770ef(0xa78)]['apiKey']=document['getElementById'](_0x3770ef(0x12f7))['value'][_0x3770ef(0xa06)](),_0x8f0871[_0x3770ef(0xa78)][_0x3770ef(0xa28)]=document[_0x3770ef(0xfa0)](_0x3770ef(0x4d5))[_0x3770ef(0x4f6)],_0x8f0871[_0x3770ef(0xa78)]['minimaxGroupId']=document[_0x3770ef(0xfa0)](_0x3770ef(0xf3b))[_0x3770ef(0x4f6)][_0x3770ef(0xa06)](),_0x8f0871['apiConfig']['minimaxApiKey']=document[_0x3770ef(0xfa0)](_0x3770ef(0xd4c))[_0x3770ef(0x4f6)]['trim'](),_0x8f0871[_0x3770ef(0xa78)][_0x3770ef(0xfea)]=document['getElementById'](_0x3770ef(0x7d6))[_0x3770ef(0x4f6)],_0x8f0871[_0x3770ef(0xa78)][_0x3770ef(0xb0e)]=document['getElementById']('secondary-proxy-url')[_0x3770ef(0x4f6)][_0x3770ef(0xa06)](),_0x8f0871[_0x3770ef(0xa78)]['secondaryApiKey']=document[_0x3770ef(0xfa0)](_0x3770ef(0x2a9))[_0x3770ef(0x4f6)][_0x3770ef(0xa06)](),_0x8f0871[_0x3770ef(0xa78)][_0x3770ef(0x1020)]=document[_0x3770ef(0xfa0)](_0x3770ef(0x109c))['value'],await _0x372b85[_0x3770ef(0xa78)][_0x3770ef(0x11d5)](_0x8f0871[_0x3770ef(0xa78)]);const _0x1c6d8f=document['getElementById'](_0x3770ef(0xb17)),_0x54a231=document['getElementById'](_0x3770ef(0x786)),_0x52bc4d=document[_0x3770ef(0xfa0)](_0x3770ef(0xb9b));_0x8f0871[_0x3770ef(0x7b0)][_0x3770ef(0xb20)]=_0x1c6d8f[_0x3770ef(0xb34)],_0x8f0871['globalSettings'][_0x3770ef(0x3f2)]=parseInt(_0x54a231['value'])||0x3c,_0x8f0871[_0x3770ef(0x7b0)][_0x3770ef(0x14a2)]=parseFloat(_0x52bc4d[_0x3770ef(0x4f6)])||0x1,_0x8f0871[_0x3770ef(0x7b0)][_0x3770ef(0x1418)]=document['getElementById']('enable-ai-drawing-switch')[_0x3770ef(0xb34)],_0x8f0871[_0x3770ef(0x7b0)]['chatRenderWindow']=parseInt(document[_0x3770ef(0xfa0)](_0x3770ef(0x8ba))[_0x3770ef(0x4f6)])||0x32,_0x8f0871[_0x3770ef(0x7b0)][_0x3770ef(0xd76)]=parseInt(document[_0x3770ef(0xfa0)](_0x3770ef(0x99a))[_0x3770ef(0x4f6)])||0x1e,_0x8f0871[_0x3770ef(0x7b0)][_0x3770ef(0x14a5)]=parseFloat(document['getElementById'](_0x3770ef(0x14ac))[_0x3770ef(0x4f6)]),await _0x372b85[_0x3770ef(0x7b0)][_0x3770ef(0x11d5)](_0x8f0871[_0x3770ef(0x7b0)]),_0x5f2c38();_0x8f0871[_0x3770ef(0x7b0)][_0x3770ef(0xb20)]?(_0xc2280d(),console['log'](_0x3770ef(0x1262)+_0x8f0871['globalSettings'][_0x3770ef(0x3f2)]+'秒')):console[_0x3770ef(0x4ee)](_0x3770ef(0x75a));const _0xd46577=document[_0x3770ef(0xfa0)](_0x3770ef(0x78c))['checked'],_0x4f492b=document[_0x3770ef(0xfa0)](_0x3770ef(0xb75))[_0x3770ef(0x4f6)],_0x539141=document[_0x3770ef(0xfa0)](_0x3770ef(0x2cd))[_0x3770ef(0x4f6)]['trim']();localStorage[_0x3770ef(0x86f)](_0x3770ef(0x11c2),_0xd46577),localStorage['setItem']('novelai-model',_0x4f492b),localStorage[_0x3770ef(0x86f)](_0x3770ef(0x2cd),_0x539141),alert(_0x3770ef(0x968));});const _0x3b3bac=document['getElementById'](_0x2d2252(0x12f7));_0x3b3bac[_0x2d2252(0x7b8)](_0x2d2252(0x10c7),_0x240ec7=>{const _0x25dabc=_0x2d2252;_0x240ec7['target'][_0x25dabc(0x1304)](_0x25dabc(0x682),_0x25dabc(0xda3));}),_0x3b3bac[_0x2d2252(0x7b8)]('blur',_0x216ed3=>{const _0x2cf560=_0x2d2252;_0x216ed3['target']['setAttribute'](_0x2cf560(0x682),_0x2cf560(0xc66));});async function _0x3aaafe(_0x102d25,_0x1243fb,_0x1e5335){const _0x48dd97=_0x2d2252,_0x4abc58=document[_0x48dd97(0xfa0)](_0x102d25)[_0x48dd97(0x4f6)][_0x48dd97(0xa06)](),_0x50a6a6=document[_0x48dd97(0xfa0)](_0x1243fb)['value'][_0x48dd97(0xa06)]();if(!_0x4abc58||!_0x50a6a6)return alert('请先填写对应的反代地址和密钥');try{let _0x4ab734=_0x4abc58===GEMINI_API_URL;const _0x3c1077=await fetch(_0x4ab734?GEMINI_API_URL+_0x48dd97(0x96d)+getRandomValue(_0x50a6a6):_0x4abc58+_0x48dd97(0x12aa),_0x4ab734?undefined:{'headers':{'Authorization':_0x48dd97(0x681)+_0x50a6a6}});if(!_0x3c1077['ok'])throw new Error(_0x48dd97(0xaa3));const _0x14ef55=await _0x3c1077[_0x48dd97(0xa2e)]();let _0x3a0153=_0x4ab734?_0x14ef55['models'][_0x48dd97(0x556)](_0x4e271d=>({'id':_0x4e271d[_0x48dd97(0x1023)][_0x48dd97(0x505)]('/')[0x1]||_0x4e271d[_0x48dd97(0x1023)]})):_0x14ef55[_0x48dd97(0x3cc)];const _0x334d8c=document[_0x48dd97(0xfa0)](_0x1e5335);_0x334d8c[_0x48dd97(0x1331)]='';const _0x2221c7=_0x1e5335===_0x48dd97(0x4d5)?_0x8f0871['apiConfig']['model']:_0x8f0871['apiConfig'][_0x48dd97(0x1020)];_0x3a0153[_0x48dd97(0x458)](_0x5f4e1b=>{const _0x333a21=_0x48dd97,_0x1ed4f6=document[_0x333a21(0xb4e)](_0x333a21(0x327));_0x1ed4f6[_0x333a21(0x4f6)]=_0x5f4e1b['id'],_0x1ed4f6['textContent']=_0x5f4e1b['id'];if(_0x5f4e1b['id']===_0x2221c7)_0x1ed4f6[_0x333a21(0xaa0)]=!![];_0x334d8c['appendChild'](_0x1ed4f6);}),alert(_0x48dd97(0x10cf));}catch(_0x9d739e){alert(_0x48dd97(0xde4)+_0x9d739e[_0x48dd97(0x790)]);}}document['getElementById']('fetch-models-btn')[_0x2d2252(0x7b8)]('click',()=>{const _0x1dd7dd=_0x2d2252;_0x3aaafe(_0x1dd7dd(0xa63),'api-key',_0x1dd7dd(0x4d5));}),document[_0x2d2252(0xfa0)](_0x2d2252(0xace))[_0x2d2252(0x7b8)]('click',()=>{const _0xa47e87=_0x2d2252;_0x3aaafe(_0xa47e87(0xca5),'secondary-api-key','secondary-model-select');}),document['getElementById'](_0x2d2252(0xbe8))[_0x2d2252(0x7b8)]('click',async()=>{const _0x287902=_0x2d2252,_0xee19e0=await _0x131a69(_0x287902(0x1259),_0x287902(0x540));if(_0xee19e0&&_0xee19e0[_0x287902(0xa06)]()){const _0x26ecea={'id':_0x287902(0x156f)+Date['now'](),'name':_0xee19e0[_0x287902(0xa06)](),'content':''};await _0x372b85[_0x287902(0x739)][_0x287902(0x1327)](_0x26ecea),_0x8f0871[_0x287902(0x739)]['push'](_0x26ecea),_0xc4183b(),_0x320030(_0x26ecea['id']);}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x8db))['addEventListener'](_0x2d2252(0xb4a),async()=>{const _0x3de205=_0x2d2252;if(!_0x4fd9a7)return;const _0x279df1=_0x8f0871[_0x3de205(0x739)][_0x3de205(0x7ed)](_0x30bc1b=>_0x30bc1b['id']===_0x4fd9a7);if(!_0x279df1)return;const _0x1be475=document[_0x3de205(0xfa0)](_0x3de205(0x1022))[_0x3de205(0x4f6)][_0x3de205(0xa06)]();if(!_0x1be475){alert(_0x3de205(0xd5e));return;}_0x279df1[_0x3de205(0x1023)]=_0x1be475;const _0x5a878e=document['getElementById'](_0x3de205(0x11f1))[_0x3de205(0x4f6)];_0x279df1[_0x3de205(0x6b2)]=_0x5a878e?parseInt(_0x5a878e):null;const _0x5c693c=document[_0x3de205(0xfa0)](_0x3de205(0xa1a)),_0x2c351d=_0x5c693c[_0x3de205(0x2a1)]('.message-editor-block'),_0x463f28=[];_0x2c351d[_0x3de205(0x458)](_0x2e7bb5=>{const _0x204ef9=_0x3de205,_0x1f7181=_0x2e7bb5['querySelector'](_0x204ef9(0x10f8))[_0x204ef9(0x4f6)][_0x204ef9(0xa06)](),_0x2c3ee4=_0x2e7bb5[_0x204ef9(0xfb1)](_0x204ef9(0x12ca))['value'][_0x204ef9(0xa06)](),_0xe9887b=_0x2e7bb5[_0x204ef9(0xfb1)](_0x204ef9(0xe66))['checked'];_0x2c3ee4&&_0x463f28[_0x204ef9(0x481)]({'comment':_0x2e7bb5['querySelector']('.entry-comment-input')[_0x204ef9(0x4f6)][_0x204ef9(0xa06)](),'keys':_0x1f7181?_0x1f7181[_0x204ef9(0x505)](',')[_0x204ef9(0x556)](_0x5ed66e=>_0x5ed66e[_0x204ef9(0xa06)]())[_0x204ef9(0xde7)](_0x464c84=>_0x464c84):[],'content':_0x2c3ee4,'enabled':_0xe9887b});}),_0x279df1[_0x3de205(0x1469)]=_0x463f28,await _0x372b85[_0x3de205(0x739)]['put'](_0x279df1),document[_0x3de205(0xfa0)](_0x3de205(0x8c9))[_0x3de205(0xc62)]=_0x1be475,_0x4fd9a7=null,_0x2d25e5(_0x3de205(0x25f)),await _0xc4183b();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x142d))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async _0xeac850=>{const _0x2de574=_0x2d2252,_0x19163c=_0xeac850['target']['closest']('.voice-message-body[data-text]');if(_0x19163c){const _0x569662=_0x8f0871[_0x2de574(0x1260)][_0x8f0871[_0x2de574(0xac8)]];if(!_0x569662)return;_0x1c7d1e(_0x19163c);const _0x3cff75=_0x19163c[_0x2de574(0x187)]('.message-bubble'),_0x34e869=_0x3cff75?_0x3cff75[_0x2de574(0xfb1)](_0x2de574(0x1311)):null;if(_0x19163c[_0x2de574(0x8df)][_0x2de574(0xa80)]&&_0x34e869&&_0x34e869[_0x2de574(0x63b)][_0x2de574(0x1248)]===_0x2de574(0x127c)){if(_0x569662[_0x2de574(0x1364)]){console['log']('这是一条群聊语音消息，已禁止发起TTS请求。');return;}if(_0x569662[_0x2de574(0x12d7)]['enableTts']===![]){console[_0x2de574(0x4ee)]('“'+_0x569662[_0x2de574(0x1023)]+_0x2de574(0x289));return;}_0x16c185(_0x19163c);}return;}const _0x171089=_0xeac850[_0x2de574(0x10c2)][_0x2de574(0x187)](_0x2de574(0x293));if(_0x171089){const _0x157f7c=_0x171089['closest'](_0x2de574(0x11e5));if(_0x157f7c){const _0x4abbde=parseInt(_0x157f7c['dataset'][_0x2de574(0xe55)]);if(!isNaN(_0x4abbde)){_0x23b0c1(_0x4abbde);return;}}}const _0xc66383=_0xeac850[_0x2de574(0x10c2)][_0x2de574(0x187)](_0x2de574(0xdd9));if(_0xc66383){const _0x19edfb=_0xc66383['closest'](_0x2de574(0x11e5));if(_0x19edfb){const _0x2f9036=parseInt(_0x19edfb['dataset']['timestamp']),_0x52a9d6=_0xc66383['dataset'][_0x2de574(0x13f4)];if(!isNaN(_0x2f9036)&&_0x52a9d6){await _0x139238(_0x2f9036,_0x52a9d6);return;}}}const _0x3f6833=_0xeac850[_0x2de574(0x10c2)][_0x2de574(0x187)](_0x2de574(0xac7));if(_0x3f6833){const _0x4e9239=parseInt(_0x3f6833['dataset'][_0x2de574(0x3eb)]);if(!isNaN(_0x4e9239)){const _0x91982a=await _0x372b85[_0x2de574(0x12c2)][_0x2de574(0x70d)](_0x4e9239);if(_0x91982a){let _0x25a432='';const _0x4d7815=_0x91982a[_0x2de574(0x11dd)]===_0x2de574(0xcb0)?_0x8f0871[_0x2de574(0x9dd)][_0x2de574(0xff8)]:_0x8f0871[_0x2de574(0x1260)][_0x91982a[_0x2de574(0x11dd)]]?.[_0x2de574(0x1023)]||'未知作者';if(_0x91982a[_0x2de574(0x682)]===_0x2de574(0x134d))_0x25a432=_0x91982a[_0x2de574(0x1469)];else{_0x25a432=_0x91982a[_0x2de574(0x137f)]||'';if(_0x91982a[_0x2de574(0x127b)])_0x25a432+='\x0a[图片]';if(_0x91982a[_0x2de574(0x59a)])_0x25a432+=_0x2de574(0x2f5)+_0x91982a['hiddenContent']+']';}_0x4abd86('来自\x20'+_0x4d7815+_0x2de574(0x1544),_0x25a432[_0x2de574(0x128a)](/\n/g,'<br>'));}else _0x4abd86('提示',_0x2de574(0xa49));}return;}const _0x3a3ed1=_0xeac850[_0x2de574(0x10c2)][_0x2de574(0x187)]('.ai-generated-image');if(_0x3a3ed1){const _0x53eda9=_0x3a3ed1[_0x2de574(0x8df)][_0x2de574(0x211)];if(_0x53eda9)_0x4abd86(_0x2de574(0x1161),_0x53eda9);return;}const _0x20ca8d=_0xeac850[_0x2de574(0x10c2)][_0x2de574(0x187)](_0x2de574(0x53c));if(_0x20ca8d&&_0x20ca8d[_0x2de574(0x8df)][_0x2de574(0xc35)]){const _0x5937e8=parseInt(_0x20ca8d[_0x2de574(0x8df)][_0x2de574(0xc35)]);!isNaN(_0x5937e8)&&_0x425456(_0x5937e8);}const _0xa50437=_0xeac850[_0x2de574(0x10c2)][_0x2de574(0x187)]('.gift-card');if(_0xa50437){const _0x5c5140=_0xa50437[_0x2de574(0x187)]('.message-bubble');_0x5c5140&&_0x171a1e(parseInt(_0x5c5140['dataset'][_0x2de574(0xe55)]));}const _0x3b0c66=_0xeac850['target'][_0x2de574(0x187)]('.red-packet-card');if(_0x3b0c66){const _0x49db93=_0x3b0c66[_0x2de574(0x187)]('.message-bubble');if(_0x49db93&&_0x49db93[_0x2de574(0x8df)]['timestamp']){const _0x2bad17=parseInt(_0x49db93['dataset'][_0x2de574(0xe55)]);_0x5d3546(_0x2bad17);}}const _0x52322b=_0xeac850[_0x2de574(0x10c2)][_0x2de574(0x187)](_0x2de574(0x381));if(_0x52322b){const _0xc1b59e=parseInt(_0x52322b['dataset'][_0x2de574(0xe60)]);if(isNaN(_0xc1b59e))return;const _0x5314c7=_0xeac850[_0x2de574(0x10c2)][_0x2de574(0x187)](_0x2de574(0x797));if(_0x5314c7&&!_0x52322b[_0x2de574(0x128f)]['contains'](_0x2de574(0xf6e))){_0x12d40b(_0xc1b59e,_0x5314c7['dataset']['option']);return;}const _0x19ff5e=_0xeac850[_0x2de574(0x10c2)][_0x2de574(0x187)](_0x2de574(0x9df));if(_0x19ff5e){_0x52322b[_0x2de574(0x128f)][_0x2de574(0xea7)](_0x2de574(0xf6e))?_0x5449d1(_0xc1b59e):_0x25e072(_0xc1b59e);return;}_0x52322b[_0x2de574(0x128f)][_0x2de574(0xea7)](_0x2de574(0xf6e))&&_0x5449d1(_0xc1b59e);}const _0xd2dbd3=_0xeac850[_0x2de574(0x10c2)][_0x2de574(0x187)]('.recalled-message-placeholder');if(_0xd2dbd3){const _0x204b5b=_0x8f0871['chats'][_0x8f0871[_0x2de574(0xac8)]],_0x28090b=_0xd2dbd3['closest'](_0x2de574(0xf77));if(_0x204b5b&&_0x28090b){const _0x3fe179=parseInt(_0x28090b[_0x2de574(0x8df)][_0x2de574(0xe55)]),_0x4d2420=_0x204b5b['history'][_0x2de574(0x7ed)](_0x197b2a=>_0x197b2a[_0x2de574(0xe55)]===_0x3fe179);if(_0x4d2420&&_0x4d2420['recalledData']){let _0x16383c='';const _0x2d7674=_0x4d2420[_0x2de574(0xc98)];_0x2d7674['originalType']===_0x2de574(0xda3)?_0x16383c=_0x2de574(0x907)+_0x2d7674['originalContent']+'\x22':_0x16383c=_0x2de574(0x10a2)+_0x2d7674['originalType']+_0x2de574(0x56c),_0x4abd86(_0x2de574(0xeab),_0x16383c);}}}const _0x2999dc=_0xeac850['target']['closest'](_0x2de574(0xb23));if(_0x2999dc&&_0x2999dc[_0x2de574(0x187)]('.message-bubble.is-link-share')){const _0x39af63=parseInt(_0x2999dc[_0x2de574(0x8df)][_0x2de574(0xe55)]);_0x14e732(_0x39af63);}const _0xb8f697=_0xeac850[_0x2de574(0x10c2)][_0x2de574(0x187)](_0x2de574(0x11e5));if(_0xb8f697&&_0xb8f697[_0x2de574(0x128f)][_0x2de574(0xea7)]('ai')&&_0xb8f697[_0x2de574(0x128f)][_0x2de574(0xea7)](_0x2de574(0xd27))&&_0xb8f697[_0x2de574(0x8df)][_0x2de574(0x103e)]===_0x2de574(0x2ea)){const _0x3bff31=parseInt(_0xb8f697[_0x2de574(0x8df)][_0x2de574(0xe55)]);!isNaN(_0x3bff31)&&_0x3a88c1(_0x3bff31);}});const _0x133500=document[_0x2d2252(0xfa0)](_0x2d2252(0xd8f)),_0x41992a=document[_0x2d2252(0xfb1)](_0x2d2252(0x764)),_0x34d1da=document[_0x2d2252(0xfa0)](_0x2d2252(0x1146));function _0x139886(){const _0x728b1c=_0x2d2252,_0x5c4f3b=_0x34d1da[_0x728b1c(0x2a1)](_0x728b1c(0xcac)),_0x2f9d09=document[_0x728b1c(0xfb1)](_0x728b1c(0xcad));if(_0x5c4f3b[_0x728b1c(0xac0)]===0x0)_0x2f9d09['textContent']=_0x728b1c(0x33a);else{if(_0x5c4f3b[_0x728b1c(0xac0)]>0x2)_0x2f9d09[_0x728b1c(0xc62)]='已选择\x20'+_0x5c4f3b[_0x728b1c(0xac0)]+_0x728b1c(0x776);else{const _0x3dcc63=Array[_0x728b1c(0x3aa)](_0x5c4f3b)[_0x728b1c(0x556)](_0x2253f9=>{const _0x4933fd=_0x728b1c;return _0x2253f9[_0x4933fd(0xa31)][_0x4933fd(0xc62)]['trim']();});_0x2f9d09['textContent']=_0x3dcc63[_0x728b1c(0xcc2)](',\x20');}}}_0x41992a['addEventListener'](_0x2d2252(0xb4a),_0x14dbd0=>{const _0x5098d8=_0x2d2252;_0x14dbd0[_0x5098d8(0x21b)](),_0x34d1da[_0x5098d8(0x128f)]['toggle'](_0x5098d8(0xdcc)),_0x41992a['classList'][_0x5098d8(0xb80)](_0x5098d8(0x456));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1146))['addEventListener']('change',_0x139886),window['addEventListener'](_0x2d2252(0xb4a),_0x22521e=>{const _0x496ccf=_0x2d2252;!document[_0x496ccf(0xfb1)](_0x496ccf(0x9ea))[_0x496ccf(0xea7)](_0x22521e[_0x496ccf(0x10c2)])&&(_0x34d1da[_0x496ccf(0x128f)]['remove'](_0x496ccf(0xdcc)),_0x41992a['classList'][_0x496ccf(0x443)]('expanded'));}),document['getElementById']('chat-settings-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x38d292=_0x2d2252;_0x40cb1d();if(!_0x8f0871[_0x38d292(0xac8)])return;const _0x2f3bb5=_0x8f0871[_0x38d292(0x1260)][_0x8f0871[_0x38d292(0xac8)]],_0x2e63e1=_0x2f3bb5['isGroup'],_0x2107c1=document[_0x38d292(0xfa0)](_0x38d292(0x12a7));!_0x2e63e1&&_0x2f3bb5[_0x38d292(0x12d7)]['alternateGreetings']&&_0x2f3bb5[_0x38d292(0x12d7)][_0x38d292(0xbbf)][_0x38d292(0xac0)]>0x0?_0x2107c1[_0x38d292(0x63b)][_0x38d292(0x1248)]=_0x38d292(0x127c):_0x2107c1[_0x38d292(0x63b)]['display']='none';document[_0x38d292(0xfa0)](_0x38d292(0x4ba))[_0x38d292(0x63b)][_0x38d292(0x1248)]=_0x38d292(0x127c),document[_0x38d292(0xfa0)](_0x38d292(0x1db))[_0x38d292(0x63b)][_0x38d292(0x1248)]='block',document[_0x38d292(0xfa0)](_0x38d292(0x3bb))['style'][_0x38d292(0x1248)]=_0x38d292(0x127c),document[_0x38d292(0xfa0)](_0x38d292(0x85f))[_0x38d292(0x63b)][_0x38d292(0x1248)]=_0x2e63e1?_0x38d292(0x127c):_0x38d292(0x11b5),document[_0x38d292(0xfa0)](_0x38d292(0x648))[_0x38d292(0x63b)][_0x38d292(0x1248)]=_0x2e63e1?'none':_0x38d292(0x127c),document[_0x38d292(0xfa0)](_0x38d292(0x122f))['style'][_0x38d292(0x1248)]=_0x2e63e1?_0x38d292(0x127c):'none',document[_0x38d292(0xfa0)](_0x38d292(0x10aa))['style']['display']=_0x2e63e1?_0x38d292(0x127c):_0x38d292(0x11b5),document[_0x38d292(0xfa0)](_0x38d292(0xb39))[_0x38d292(0x63b)][_0x38d292(0x1248)]=_0x2e63e1?'none':_0x38d292(0x127c),document[_0x38d292(0xfa0)](_0x38d292(0x628))[_0x38d292(0x63b)][_0x38d292(0x1248)]=_0x2e63e1?_0x38d292(0x11b5):_0x38d292(0x127c),document[_0x38d292(0xfa0)](_0x38d292(0xca2))['style'][_0x38d292(0x1248)]=_0x2e63e1?'none':'block',document[_0x38d292(0xfa0)](_0x38d292(0x139d))[_0x38d292(0x63b)][_0x38d292(0x1248)]=_0x2e63e1?_0x38d292(0x11b5):_0x38d292(0x127c),document[_0x38d292(0xfa0)](_0x38d292(0xb3e))['style']['display']=_0x2e63e1?_0x38d292(0x11b5):_0x38d292(0x127c),document[_0x38d292(0xfa0)](_0x38d292(0x126a))[_0x38d292(0x63b)][_0x38d292(0x1248)]=_0x2e63e1?_0x38d292(0x11b5):_0x38d292(0x127c),document[_0x38d292(0xfa0)](_0x38d292(0x820))[_0x38d292(0x63b)][_0x38d292(0x1248)]=_0x2e63e1?'none':'block',document['getElementById']('ai-cooldown-group')['style'][_0x38d292(0x1248)]=_0x2e63e1?_0x38d292(0x11b5):'block',document[_0x38d292(0xfa0)](_0x38d292(0x310))['style']['display']=_0x2e63e1?_0x38d292(0x127c):_0x38d292(0x11b5),document[_0x38d292(0xfa0)](_0x38d292(0xd39))[_0x38d292(0x4f6)]=_0x2f3bb5['name'],document[_0x38d292(0xfa0)](_0x38d292(0x791))['value']=_0x2f3bb5[_0x38d292(0x12d7)][_0x38d292(0xbbe)],document[_0x38d292(0xfa0)]('my-avatar-preview')[_0x38d292(0x53e)]=_0x2f3bb5[_0x38d292(0x12d7)][_0x38d292(0x38a)]||(_0x2e63e1?_0x2c882e:_0x1a2fc1),document[_0x38d292(0xfa0)]('max-memory')[_0x38d292(0x4f6)]=_0x2f3bb5[_0x38d292(0x12d7)]['maxMemory'],document[_0x38d292(0xfa0)](_0x38d292(0x1154))[_0x38d292(0x4f6)]=_0x2f3bb5['settings'][_0x38d292(0x79c)]||0xa;const _0x4eea53=document[_0x38d292(0xfa0)](_0x38d292(0xf1e)),_0x2f07a4=document[_0x38d292(0xfa0)](_0x38d292(0xd08));_0x2f3bb5[_0x38d292(0x12d7)][_0x38d292(0x1113)]?(_0x4eea53[_0x38d292(0x53e)]=_0x2f3bb5[_0x38d292(0x12d7)]['background'],_0x4eea53['style'][_0x38d292(0x1248)]='block',_0x2f07a4['style'][_0x38d292(0x1248)]=_0x38d292(0x1145)):(_0x4eea53[_0x38d292(0x63b)][_0x38d292(0x1248)]=_0x38d292(0x11b5),_0x2f07a4[_0x38d292(0x63b)][_0x38d292(0x1248)]=_0x38d292(0x11b5));document[_0x38d292(0xfa0)](_0x38d292(0xdf5))[_0x38d292(0x63b)][_0x38d292(0x1248)]=_0x2e63e1?_0x38d292(0x11b5):_0x38d292(0x127c),document['getElementById'](_0x38d292(0xf46))[_0x38d292(0x63b)][_0x38d292(0x1248)]=_0x2e63e1?_0x38d292(0x11b5):_0x38d292(0x127c),document[_0x38d292(0xfa0)](_0x38d292(0x357))[_0x38d292(0x63b)]['display']=_0x2e63e1?'block':_0x38d292(0x11b5);const _0x40506f=document[_0x38d292(0xfa0)](_0x38d292(0xb56)),_0x22774f=document['getElementById'](_0x38d292(0x1203));_0x40506f['checked']=_0x2f3bb5[_0x38d292(0x12d7)][_0x38d292(0x533)],_0x22774f[_0x38d292(0x63b)][_0x38d292(0x1248)]=_0x40506f['checked']?_0x38d292(0x127c):_0x38d292(0x11b5);const _0x2df599=document[_0x38d292(0xfa0)]('time-zone-select'),_0x628740=Intl[_0x38d292(0x14b9)](_0x38d292(0xf1c));_0x2df599[_0x38d292(0x1331)]='',_0x628740['forEach'](_0x1686dc=>{const _0x47ab1a=_0x38d292,_0x3b8431=document[_0x47ab1a(0xb4e)](_0x47ab1a(0x327));_0x3b8431[_0x47ab1a(0x4f6)]=_0x1686dc,_0x3b8431[_0x47ab1a(0xc62)]=_0x1686dc,_0x2df599[_0x47ab1a(0x1155)](_0x3b8431);}),_0x2df599[_0x38d292(0x4f6)]=_0x2f3bb5[_0x38d292(0x12d7)][_0x38d292(0xf1c)]||_0x38d292(0x726);if(_0x2e63e1)document[_0x38d292(0xfa0)](_0x38d292(0x10dc))[_0x38d292(0xb34)]=_0x2f3bb5[_0x38d292(0x12d7)][_0x38d292(0xb20)],document[_0x38d292(0xfa0)](_0x38d292(0xb1e))[_0x38d292(0x4f6)]=_0x2f3bb5['settings']['myNickname']||'',document[_0x38d292(0xfa0)](_0x38d292(0x633))[_0x38d292(0x53e)]=_0x2f3bb5[_0x38d292(0x12d7)]['groupAvatar']||_0x3503aa,document[_0x38d292(0xfa0)](_0x38d292(0xfda))[_0x38d292(0x4f6)]=_0x2f3bb5['settings'][_0x38d292(0x1158)]||0xa,document['getElementById'](_0x38d292(0xf46))[_0x38d292(0x63b)][_0x38d292(0x1248)]='none',_0xf96dc1(_0x2f3bb5['members']);else{document[_0x38d292(0xfa0)](_0x38d292(0xf46))[_0x38d292(0x63b)][_0x38d292(0x1248)]=_0x38d292(0x127c),document[_0x38d292(0xfa0)](_0x38d292(0xbf1))[_0x38d292(0xb34)]=_0x2f3bb5[_0x38d292(0x12d7)]['enableBackgroundActivity'],document[_0x38d292(0xfa0)](_0x38d292(0xeee))['checked']=_0x2f3bb5[_0x38d292(0x12d7)][_0x38d292(0x482)];const _0x22e414=document[_0x38d292(0xfa0)](_0x38d292(0x6e5)),_0x93731e=document['getElementById']('offline-mode-options'),_0x17f0e=document[_0x38d292(0xfa0)](_0x38d292(0x1390)),_0x2f86c8=document[_0x38d292(0xfa0)](_0x38d292(0x3f3));_0x22e414[_0x38d292(0xb34)]=_0x2f3bb5[_0x38d292(0x12d7)]['isOfflineMode']||![],_0x93731e['style'][_0x38d292(0x1248)]=_0x22e414['checked']?'block':_0x38d292(0x11b5),_0x17f0e[_0x38d292(0x4f6)]=_0x2f3bb5[_0x38d292(0x12d7)]['offlineMinLength']||0x64,_0x2f86c8[_0x38d292(0x4f6)]=_0x2f3bb5[_0x38d292(0x12d7)][_0x38d292(0xcd6)]||0x12c,await _0x5a7f83(_0x2f3bb5),document[_0x38d292(0xfa0)]('ai-original-name-input')[_0x38d292(0x4f6)]=_0x2f3bb5['originalName'],document[_0x38d292(0xfa0)](_0x38d292(0x12e3))[_0x38d292(0x4f6)]=_0x2f3bb5[_0x38d292(0x12d7)]['minimaxVoiceId']||'',document[_0x38d292(0xfa0)](_0x38d292(0x2cb))[_0x38d292(0xb34)]=_0x2f3bb5['settings']['enableTts']!==![],document['getElementById'](_0x38d292(0xef6))['value']=_0x2f3bb5['settings'][_0x38d292(0x200)],document[_0x38d292(0xfa0)](_0x38d292(0xc5a))['src']=_0x2f3bb5[_0x38d292(0x12d7)][_0x38d292(0xce8)]||_0x1a2fc1,document[_0x38d292(0xfa0)](_0x38d292(0x5a1))['value']=_0x2f3bb5[_0x38d292(0x12d7)][_0x38d292(0xda5)]||'我',document[_0x38d292(0xfa0)](_0x38d292(0x107d))[_0x38d292(0x4f6)]=_0x2f3bb5[_0x38d292(0x12d7)][_0x38d292(0x1158)]||0xa;const _0x20eb57=document[_0x38d292(0xfa0)]('assign-group-select');_0x20eb57[_0x38d292(0x1331)]='<option\x20value=\x22\x22>未分组</option>';const _0x1c5657=await _0x372b85[_0x38d292(0xdc8)][_0x38d292(0x3bc)]();_0x1c5657['forEach'](_0x2855ef=>{const _0x3ed9cd=_0x38d292,_0x135fdf=document[_0x3ed9cd(0xb4e)](_0x3ed9cd(0x327));_0x135fdf[_0x3ed9cd(0x4f6)]=_0x2855ef['id'],_0x135fdf[_0x3ed9cd(0xc62)]=_0x2855ef[_0x3ed9cd(0x1023)];if(_0x2f3bb5[_0x3ed9cd(0xdbf)]===_0x2855ef['id'])_0x135fdf[_0x3ed9cd(0xaa0)]=!![];_0x20eb57[_0x3ed9cd(0x1155)](_0x135fdf);});const _0x5660ae=_0x2f3bb5['settings'][_0x38d292(0xb7d)]||{'vertical':'top','horizontal':_0x38d292(0x1117),'offset':0xa};document[_0x38d292(0xfa0)](_0x38d292(0x7f0))['value']=_0x5660ae[_0x38d292(0xa9d)],document[_0x38d292(0xfa0)](_0x38d292(0x1109))[_0x38d292(0x4f6)]=_0x5660ae[_0x38d292(0x10e2)],document[_0x38d292(0xfa0)](_0x38d292(0x10d5))[_0x38d292(0x4f6)]=_0x5660ae[_0x38d292(0x315)];}const _0x2b2b14=document[_0x38d292(0xfa0)](_0x38d292(0x1146));_0x2b2b14[_0x38d292(0x1331)]='';const [_0xa64484,_0x42d73e]=await Promise[_0x38d292(0x8ab)]([_0x372b85[_0x38d292(0xa7a)][_0x38d292(0x3bc)](),_0x372b85[_0x38d292(0x739)][_0x38d292(0x3bc)]()]),_0x54fa14=new Set(_0x2f3bb5[_0x38d292(0x12d7)]['linkedWorldBookIds']||[]);if(_0x42d73e['length']===0x0)_0x2b2b14['innerHTML']='<p\x20style=\x22text-align:center;\x20color:\x20#8a8a8a;\x22>还没有创建任何世界书</p>';else{_0xa64484[_0x38d292(0x458)](_0x71f578=>{const _0x4522e7=_0x38d292,_0x56ba68=_0x42d73e['filter'](_0x26b92e=>_0x26b92e[_0x4522e7(0x6b2)]===_0x71f578['id']);if(_0x56ba68['length']>0x0){const _0xc5792a=document[_0x4522e7(0xb4e)]('h4');_0xc5792a[_0x4522e7(0xc62)]=_0x71f578['name'],_0xc5792a[_0x4522e7(0x63b)][_0x4522e7(0x283)]='margin:\x2010px\x200\x205px;\x20color:\x20#555;\x20border-bottom:\x201px\x20solid\x20#eee;\x20padding-bottom:\x203px;',_0x2b2b14[_0x4522e7(0x1155)](_0xc5792a),_0x56ba68[_0x4522e7(0x458)](_0x46dc5d=>{const _0x52809e=_0x4522e7,_0x2b3406=_0x54fa14[_0x52809e(0xd58)](_0x46dc5d['id']),_0x5be038=document[_0x52809e(0xb4e)](_0x52809e(0x116a));_0x5be038['innerHTML']=_0x52809e(0x567)+_0x46dc5d['id']+'\x22\x20'+(_0x2b3406?'checked':'')+'>\x20'+_0x46dc5d[_0x52809e(0x1023)],_0x2b2b14['appendChild'](_0x5be038);});}});const _0x740859=_0x42d73e[_0x38d292(0xde7)](_0x1fb55a=>!_0x1fb55a[_0x38d292(0x6b2)]);if(_0x740859[_0x38d292(0xac0)]>0x0){const _0x1e6da8=document[_0x38d292(0xb4e)]('h4');_0x1e6da8[_0x38d292(0xc62)]=_0x38d292(0x129e),_0x1e6da8['style'][_0x38d292(0x283)]=_0x38d292(0x6bd),_0x2b2b14[_0x38d292(0x1155)](_0x1e6da8),_0x740859[_0x38d292(0x458)](_0x53c9bb=>{const _0x27295f=_0x38d292,_0x29cf7a=_0x54fa14[_0x27295f(0xd58)](_0x53c9bb['id']),_0x800ef9=document[_0x27295f(0xb4e)](_0x27295f(0x116a));_0x800ef9[_0x27295f(0x1331)]=_0x27295f(0x567)+_0x53c9bb['id']+'\x22\x20'+(_0x29cf7a?_0x27295f(0xb34):'')+'>\x20'+_0x53c9bb[_0x27295f(0x1023)],_0x2b2b14[_0x27295f(0x1155)](_0x800ef9);});}}_0x139886();const _0xb714ef=document[_0x38d292(0xfa0)](_0x38d292(0x2c0)),_0x52d34d=document[_0x38d292(0xfa0)]('linked-memory-selection'),_0x1fee66=document[_0x38d292(0xfa0)]('linked-chats-checkboxes-container'),_0x4ec19a=_0x2f3bb5['settings'][_0x38d292(0x6e0)]||[];_0xb714ef[_0x38d292(0xb34)]=_0x4ec19a[_0x38d292(0xac0)]>0x0,_0x52d34d[_0x38d292(0x63b)][_0x38d292(0x1248)]=_0xb714ef['checked']?_0x38d292(0x127c):_0x38d292(0x11b5),_0x1fee66['innerHTML']='',Object[_0x38d292(0x142f)](_0x8f0871[_0x38d292(0x1260)])[_0x38d292(0x458)](_0x2d99d3=>{const _0xc6ee2=_0x38d292;if(_0x2d99d3['id']===_0x2f3bb5['id'])return;const _0x5e0e02=_0x4ec19a[_0xc6ee2(0xf95)](_0x2d99d3['id']),_0x313dac=_0x2d99d3[_0xc6ee2(0x1364)]?_0xc6ee2(0x8e7):_0xc6ee2(0x908),_0x23d88e=document[_0xc6ee2(0xb4e)](_0xc6ee2(0x116a));_0x23d88e[_0xc6ee2(0x1331)]=_0xc6ee2(0x13f3)+_0x2d99d3['id']+'\x22\x20'+(_0x5e0e02?_0xc6ee2(0xb34):'')+'>\x20'+_0x313dac+'\x20'+_0x2d99d3['name'],_0x1fee66[_0xc6ee2(0x1155)](_0x23d88e);});function _0xa110a2(){const _0x34e864=_0x38d292,_0x206ee9=_0x1fee66[_0x34e864(0x2a1)]('input:checked'),_0x97e4b3=_0x52d34d['querySelector'](_0x34e864(0xcad));if(_0x206ee9[_0x34e864(0xac0)]===0x0)_0x97e4b3[_0x34e864(0xc62)]='--\x20点击选择\x20--';else _0x206ee9[_0x34e864(0xac0)]>0x2?_0x97e4b3[_0x34e864(0xc62)]=_0x34e864(0xb40)+_0x206ee9[_0x34e864(0xac0)]+'\x20项':_0x97e4b3[_0x34e864(0xc62)]=Array['from'](_0x206ee9)['map'](_0x7d162b=>_0x7d162b[_0x34e864(0xa31)][_0x34e864(0xc62)]['trim']())[_0x34e864(0xcc2)](',\x20');}_0xa110a2(),_0xb714ef[_0x38d292(0x7b8)](_0x38d292(0xca8),()=>{const _0x22f164=_0x38d292;_0x52d34d[_0x22f164(0x63b)]['display']=_0xb714ef['checked']?_0x22f164(0x127c):_0x22f164(0x11b5);});const _0x49f5ba=_0x52d34d[_0x38d292(0xfb1)](_0x38d292(0x1479)),_0x39c30d=_0x49f5ba['cloneNode'](!![]);_0x49f5ba[_0x38d292(0xcdd)]['replaceChild'](_0x39c30d,_0x49f5ba),_0x39c30d[_0x38d292(0x7b8)](_0x38d292(0xb4a),_0x23ba8d=>{const _0x2f4d37=_0x38d292;_0x23ba8d[_0x2f4d37(0x21b)](),_0x1fee66[_0x2f4d37(0x128f)][_0x2f4d37(0xb80)](_0x2f4d37(0xdcc)),_0x39c30d[_0x2f4d37(0x128f)][_0x2f4d37(0xb80)](_0x2f4d37(0x456));}),_0x1fee66[_0x38d292(0x7b8)](_0x38d292(0xca8),_0xa110a2);const _0x4ed86a=document['querySelector'](_0x38d292(0x13d6)+(_0x2f3bb5[_0x38d292(0x12d7)]['theme']||'default')+'\x22]');if(_0x4ed86a)_0x4ed86a[_0x38d292(0xb34)]=!![];const _0x33297e=document['getElementById'](_0x38d292(0xf69));_0x33297e[_0x38d292(0x4f6)]=_0x2f3bb5[_0x38d292(0x12d7)]['fontSize']||0xd,document['getElementById'](_0x38d292(0x273))[_0x38d292(0xc62)]=_0x33297e[_0x38d292(0x4f6)]+'px';const _0x2bd4ae=document[_0x38d292(0xfa0)]('custom-css-input');_0x2bd4ae['value']=_0x2f3bb5['settings'][_0x38d292(0x688)]||'',_0xb69a7a(),document[_0x38d292(0xfa0)](_0x38d292(0xa60))[_0x38d292(0xb34)]=_0x2f3bb5[_0x38d292(0x12d7)][_0x38d292(0xa84)]||![],document[_0x38d292(0xfa0)](_0x38d292(0x582))[_0x38d292(0x4f6)]=_0x2f3bb5[_0x38d292(0x12d7)]['autoMemoryInterval']||0x14,setTimeout(()=>{const _0x16c8fe=_0x38d292;_0x119202();const _0xe810bd=[_0x16c8fe(0xef6),_0x16c8fe(0x791),_0x16c8fe(0x1317),_0x16c8fe(0x1154),_0x16c8fe(0xa60),'auto-memory-interval',_0x16c8fe(0x6e5),_0x16c8fe(0x1390),_0x16c8fe(0x3f3),_0x16c8fe(0x8a0)];_0xe810bd[_0x16c8fe(0x458)](_0x52b803=>{const _0x2b0ba2=_0x16c8fe,_0x4c4719=document[_0x2b0ba2(0xfa0)](_0x52b803);_0x4c4719&&_0x4c4719[_0x2b0ba2(0x7b8)]('input',_0x119202);}),document[_0x16c8fe(0xfa0)](_0x16c8fe(0x1146))[_0x16c8fe(0x7b8)]('change',_0x119202),document[_0x16c8fe(0xfa0)]('linked-chats-checkboxes-container')['addEventListener'](_0x16c8fe(0xca8),_0x119202),document[_0x16c8fe(0xfa0)](_0x16c8fe(0x2c0))['addEventListener'](_0x16c8fe(0xca8),_0x119202);},0x64),_0x2d25e5(_0x38d292(0xbb4));});function _0xf96dc1(_0x34329b){const _0x392817=_0x2d2252,_0x340681=document[_0x392817(0xfa0)](_0x392817(0x800));_0x340681[_0x392817(0x1331)]='',_0x34329b['forEach'](_0x40e528=>{const _0x1ef806=_0x392817,_0x194f67=document[_0x1ef806(0xb4e)]('div');_0x194f67['className']=_0x1ef806(0x79d),_0x194f67[_0x1ef806(0x8df)]['memberId']=_0x40e528['id'];const _0x4361d9=_0x40e528[_0x1ef806(0xc61)]||(_0x8f0871[_0x1ef806(0x1260)][_0x40e528['id']]?_0x8f0871[_0x1ef806(0x1260)][_0x40e528['id']][_0x1ef806(0x12d7)][_0x1ef806(0xce8)]:_0x29d47b);_0x194f67[_0x1ef806(0x1331)]='<img\x20src=\x22'+_0x4361d9+_0x1ef806(0x7cb)+_0x40e528['groupNickname']+_0x1ef806(0x245)+_0x40e528[_0x1ef806(0x5c9)]+'</div>',_0x194f67[_0x1ef806(0x7b8)](_0x1ef806(0xb4a),()=>_0x12ff79(_0x40e528['id'])),_0x340681[_0x1ef806(0x1155)](_0x194f67);});}document[_0x2d2252(0xfa0)](_0x2d2252(0x619))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x25089b=_0x2d2252;if(!_0x534a62)return;const _0x230c4e=_0x8f0871[_0x25089b(0x1260)][_0x8f0871['activeChatId']],_0xe7b4b1=_0x230c4e[_0x25089b(0x2cf)][_0x25089b(0x7ed)](_0x49fcdd=>_0x49fcdd['id']===_0x534a62);if(!_0xe7b4b1)return;const _0x4a7b90=document[_0x25089b(0xfa0)](_0x25089b(0x1579))[_0x25089b(0x4f6)][_0x25089b(0xa06)]();if(!_0x4a7b90){alert(_0x25089b(0x99d));return;}_0xe7b4b1[_0x25089b(0x5c9)]=_0x4a7b90,_0xe7b4b1[_0x25089b(0x3fa)]=document[_0x25089b(0xfa0)]('member-persona-input')[_0x25089b(0x4f6)];const _0x1a7f39=document[_0x25089b(0xfa0)](_0x25089b(0xa52))[_0x25089b(0x53e)];_0xe7b4b1[_0x25089b(0xc61)]=_0x1a7f39;const _0x15a052=_0x8f0871[_0x25089b(0x1260)][_0xe7b4b1['id']];_0x15a052&&(_0x15a052[_0x25089b(0x12d7)][_0x25089b(0xce8)]=_0x1a7f39,await _0x372b85[_0x25089b(0x1260)][_0x25089b(0x11d5)](_0x15a052)),await _0x372b85[_0x25089b(0x1260)][_0x25089b(0x11d5)](_0x230c4e),_0xf96dc1(_0x230c4e[_0x25089b(0x2cf)]),document['getElementById']('member-settings-modal')[_0x25089b(0x128f)][_0x25089b(0x443)](_0x25089b(0xdcc)),_0x534a62=null;});function _0x12ff79(_0x3ed390){const _0x312215=_0x2d2252;_0x534a62=_0x3ed390;const _0x279c64=_0x8f0871[_0x312215(0x1260)][_0x8f0871[_0x312215(0xac8)]],_0x159e4f=_0x279c64[_0x312215(0x2cf)][_0x312215(0x7ed)](_0x5baa5b=>_0x5baa5b['id']===_0x3ed390);if(!_0x159e4f)return;document[_0x312215(0xfa0)](_0x312215(0x1579))[_0x312215(0x4f6)]=_0x159e4f[_0x312215(0x5c9)],document['getElementById'](_0x312215(0x48d))[_0x312215(0x4f6)]=_0x159e4f['persona'];const _0x129ce1=_0x159e4f[_0x312215(0xc61)]||(_0x8f0871['chats'][_0x159e4f['id']]?_0x8f0871[_0x312215(0x1260)][_0x159e4f['id']]['settings'][_0x312215(0xce8)]:_0x29d47b);document[_0x312215(0xfa0)](_0x312215(0xa52))[_0x312215(0x53e)]=_0x129ce1,document[_0x312215(0xfa0)](_0x312215(0x122a))[_0x312215(0x128f)][_0x312215(0x1327)](_0x312215(0xdcc));}document['getElementById'](_0x2d2252(0x1252))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x4caa46=_0x2d2252;document[_0x4caa46(0xfa0)](_0x4caa46(0x122a))[_0x4caa46(0x128f)][_0x4caa46(0x443)](_0x4caa46(0xdcc)),_0x534a62=null;}),document[_0x2d2252(0xfa0)]('save-member-settings-btn')['addEventListener']('click',async()=>{const _0x16423a=_0x2d2252;if(!_0x534a62)return;const _0x265515=_0x8f0871[_0x16423a(0x1260)][_0x8f0871[_0x16423a(0xac8)]],_0x19c6b9=_0x265515['members'][_0x16423a(0x7ed)](_0x19743a=>_0x19743a['id']===_0x534a62);if(!_0x19c6b9)return;const _0x143798=document[_0x16423a(0xfa0)](_0x16423a(0x1579))[_0x16423a(0x4f6)]['trim']();if(!_0x143798){alert(_0x16423a(0x99d));return;}_0x19c6b9[_0x16423a(0x5c9)]=_0x143798,_0x19c6b9['persona']=document['getElementById'](_0x16423a(0x48d))[_0x16423a(0x4f6)];const _0x5ad537=document[_0x16423a(0xfa0)]('member-avatar-preview')[_0x16423a(0x53e)];_0x19c6b9[_0x16423a(0xc61)]=_0x5ad537;const _0x869e8f=_0x8f0871[_0x16423a(0x1260)][_0x19c6b9['id']];_0x869e8f&&(_0x869e8f[_0x16423a(0x12d7)][_0x16423a(0xce8)]=_0x5ad537,await _0x372b85[_0x16423a(0x1260)][_0x16423a(0x11d5)](_0x869e8f)),await _0x372b85[_0x16423a(0x1260)][_0x16423a(0x11d5)](_0x265515),_0xf96dc1(_0x265515[_0x16423a(0x2cf)]),document[_0x16423a(0xfa0)](_0x16423a(0x122a))['classList'][_0x16423a(0x443)](_0x16423a(0xdcc)),_0x534a62=null;}),document['getElementById']('reset-theme-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x257542=_0x2d2252;document[_0x257542(0xfa0)](_0x257542(0x319))[_0x257542(0xb34)]=!![];}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1015))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0xb73437=_0x2d2252;if(!_0x8f0871['activeChatId'])return;const _0x129424=_0x8f0871['chats'][_0x8f0871[_0xb73437(0xac8)]],_0x1cfd3c=_0x129424[_0xb73437(0x12d7)][_0xb73437(0x1516)]||![],_0x190914=document[_0xb73437(0xfa0)]('chat-name-input')[_0xb73437(0x4f6)][_0xb73437(0xa06)]();if(!_0x190914)return alert('备注名/群名不能为空！');if(!_0x129424['isGroup']&&_0x190914!==_0x129424['name']){if(!_0x129424[_0xb73437(0xba7)])_0x129424['nameHistory']=[];if(!_0x129424['nameHistory'][_0xb73437(0xf95)](_0x129424['name']))_0x129424[_0xb73437(0xba7)][_0xb73437(0x481)](_0x129424[_0xb73437(0x1023)]);}_0x129424['name']=_0x190914;const _0x5a5f8e=document[_0xb73437(0xfb1)](_0xb73437(0x1439));_0x129424[_0xb73437(0x12d7)]['theme']=_0x5a5f8e?_0x5a5f8e[_0xb73437(0x4f6)]:'default',_0x129424[_0xb73437(0x12d7)][_0xb73437(0xf0e)]=parseInt(document[_0xb73437(0xfa0)](_0xb73437(0xf69))[_0xb73437(0x4f6)]),_0x129424['settings']['customCss']=document['getElementById'](_0xb73437(0x96f))[_0xb73437(0x4f6)][_0xb73437(0xa06)](),_0x129424['settings'][_0xb73437(0xbbe)]=document['getElementById']('my-persona')[_0xb73437(0x4f6)],_0x129424[_0xb73437(0x12d7)][_0xb73437(0x38a)]=document['getElementById'](_0xb73437(0x27b))[_0xb73437(0x53e)],_0x129424[_0xb73437(0x12d7)][_0xb73437(0x266)]=parseInt(document[_0xb73437(0xfa0)](_0xb73437(0x1317))[_0xb73437(0x4f6)])||0xa,_0x129424['settings'][_0xb73437(0x79c)]=parseInt(document['getElementById'](_0xb73437(0x1154))['value'])||0xa;const _0x2c55de=document[_0xb73437(0x2a1)](_0xb73437(0xeea)),_0x3bc4ec=[];_0x2c55de[_0xb73437(0x458)](_0x3ca23c=>{const _0x447373=_0xb73437;_0x3ca23c[_0x447373(0x4f6)]['startsWith'](_0x447373(0x77b))&&_0x3bc4ec[_0x447373(0x481)](_0x3ca23c[_0x447373(0x4f6)][_0x447373(0x128a)](_0x447373(0x77b),''));}),_0x129424[_0xb73437(0x12d7)][_0xb73437(0xaaf)]=_0x3bc4ec;const _0x2955cb=document[_0xb73437(0xfa0)](_0xb73437(0x2c0))[_0xb73437(0xb34)];if(_0x2955cb){const _0x59ac52=document[_0xb73437(0x2a1)](_0xb73437(0x5c3));_0x129424[_0xb73437(0x12d7)][_0xb73437(0x6e0)]=Array[_0xb73437(0x3aa)](_0x59ac52)[_0xb73437(0x556)](_0xa1de8c=>_0xa1de8c[_0xb73437(0x4f6)]);}else _0x129424[_0xb73437(0x12d7)][_0xb73437(0x6e0)]=[];_0x129424['settings']['enableAutoMemory']=document[_0xb73437(0xfa0)](_0xb73437(0xa60))[_0xb73437(0xb34)],_0x129424[_0xb73437(0x12d7)][_0xb73437(0x87f)]=parseInt(document['getElementById'](_0xb73437(0x582))['value'])||0x14,_0x129424['settings'][_0xb73437(0x533)]=document['getElementById'](_0xb73437(0xb56))['checked'],_0x129424[_0xb73437(0x12d7)]['timeZone']=document[_0xb73437(0xfa0)](_0xb73437(0xa40))['value'];if(_0x129424[_0xb73437(0x1364)])_0x129424[_0xb73437(0x12d7)][_0xb73437(0xb20)]=document[_0xb73437(0xfa0)](_0xb73437(0x10dc))['checked'],_0x129424['settings'][_0xb73437(0xda5)]=document[_0xb73437(0xfa0)]('my-group-nickname-input')['value'][_0xb73437(0xa06)](),_0x129424[_0xb73437(0x12d7)]['groupAvatar']=document[_0xb73437(0xfa0)](_0xb73437(0x633))[_0xb73437(0x53e)],_0x129424['settings'][_0xb73437(0x1158)]=parseInt(document[_0xb73437(0xfa0)](_0xb73437(0xfda))[_0xb73437(0x4f6)])||0xa;else{_0x129424[_0xb73437(0x12d7)]['enableBackgroundActivity']=document['getElementById'](_0xb73437(0xbf1))['checked'];const _0x54b951=document[_0xb73437(0xfa0)](_0xb73437(0x6e5))[_0xb73437(0xb34)];_0x129424[_0xb73437(0x12d7)][_0xb73437(0x1516)]=_0x54b951;if(_0x1cfd3c===!![]&&_0x54b951===![]){const _0x2db113={'role':'system','content':'[系统指令：模式已切换！你现在回到了线上聊天模式。你的回复【必须】严格遵守线上模式的JSON数组格式，例如\x20[{\x22type\x22:\x20\x22text\x22,\x20\x22content\x22:\x20\x22你好\x22}]]','timestamp':Date[_0xb73437(0xc22)](),'isHidden':!![]};_0x129424['history'][_0xb73437(0x481)](_0x2db113),console[_0xb73437(0x4ee)](_0xb73437(0x1226));}_0x129424['settings'][_0xb73437(0x482)]=document['getElementById']('inject-thought-toggle')[_0xb73437(0xb34)],_0x129424[_0xb73437(0x12d7)][_0xb73437(0xae0)]=parseInt(document[_0xb73437(0xfa0)](_0xb73437(0x1390))[_0xb73437(0x4f6)])||0x64,_0x129424[_0xb73437(0x12d7)][_0xb73437(0xcd6)]=parseInt(document[_0xb73437(0xfa0)](_0xb73437(0x3f3))[_0xb73437(0x4f6)])||0x12c,_0x129424['settings'][_0xb73437(0xed7)]=document[_0xb73437(0xfa0)](_0xb73437(0x8a0))[_0xb73437(0x4f6)]||null;const _0x57a7bf=document[_0xb73437(0xfa0)](_0xb73437(0x35c))[_0xb73437(0x4f6)]['trim']();if(!_0x57a7bf)return alert(_0xb73437(0xaf8));_0x129424['originalName']=_0x57a7bf,_0x129424[_0xb73437(0x12d7)][_0xb73437(0x200)]=document[_0xb73437(0xfa0)](_0xb73437(0xef6))['value'],_0x129424[_0xb73437(0x12d7)]['minimaxVoiceId']=document[_0xb73437(0xfa0)](_0xb73437(0x12e3))[_0xb73437(0x4f6)][_0xb73437(0xa06)](),_0x129424[_0xb73437(0x12d7)][_0xb73437(0x26f)]=document[_0xb73437(0xfa0)](_0xb73437(0x2cb))[_0xb73437(0xb34)],_0x129424['settings'][_0xb73437(0xce8)]=document[_0xb73437(0xfa0)]('ai-avatar-preview')['src'],_0x129424[_0xb73437(0x12d7)]['myNickname']=document[_0xb73437(0xfa0)](_0xb73437(0x5a1))[_0xb73437(0x4f6)][_0xb73437(0xa06)]()||'我',_0x129424[_0xb73437(0x12d7)][_0xb73437(0x1158)]=parseInt(document[_0xb73437(0xfa0)](_0xb73437(0x107d))[_0xb73437(0x4f6)])||0xa,_0x129424[_0xb73437(0x12d7)][_0xb73437(0xb7d)]={'vertical':document[_0xb73437(0xfa0)]('lyrics-vertical-pos')[_0xb73437(0x4f6)],'horizontal':document[_0xb73437(0xfa0)](_0xb73437(0x1109))[_0xb73437(0x4f6)],'offset':parseInt(document[_0xb73437(0xfa0)](_0xb73437(0x10d5))[_0xb73437(0x4f6)])||0xa};const _0xef7ee3=document[_0xb73437(0xfa0)](_0xb73437(0x2aa))[_0xb73437(0x4f6)];_0x129424[_0xb73437(0xdbf)]=_0xef7ee3?parseInt(_0xef7ee3):null;}await _0x372b85[_0xb73437(0x1260)][_0xb73437(0x11d5)](_0x129424),!_0x129424['isGroup']&&(await _0xd7f0ec(_0x129424),await _0x3a6dc8(_0x129424)),_0x8a5503(_0x129424),_0x512130(_0x129424[_0xb73437(0x12d7)]['customCss'],_0xb73437(0x953),_0xb73437(0x1558)),_0x2d25e5('chat-interface-screen'),_0x54d32b(_0x8f0871[_0xb73437(0xac8)]),_0x2d75fb();}),document[_0x2d2252(0xfa0)](_0x2d2252(0xbb4))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x4492b1=>{const _0x163f13=_0x2d2252;_0x4492b1['target'][_0x163f13(0x128f)][_0x163f13(0xea7)](_0x163f13(0x1448))&&_0x417b52('chat');}),document[_0x2d2252(0xfa0)]('member-settings-modal')['addEventListener']('click',_0x1bd336=>{const _0x128bf0=_0x2d2252;_0x1bd336['target']['classList'][_0x128bf0(0xea7)](_0x128bf0(0x1448))&&_0x417b52(_0x128bf0(0x25d));});const _0x113ef3=document[_0x2d2252(0xfa0)]('avatar-frame-modal'),_0x184d44=document['getElementById'](_0x2d2252(0x13f8)),_0x32389e=document[_0x2d2252(0xfa0)](_0x2d2252(0x1345)),_0x1ce322=document[_0x2d2252(0xfa0)](_0x2d2252(0x1528)),_0x4818c9=document['getElementById']('my-frame-content');document['getElementById'](_0x2d2252(0x8d0))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x4e16e3),document['getElementById'](_0x2d2252(0x77d))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x726701=_0x2d2252;_0x113ef3[_0x726701(0x128f)][_0x726701(0x443)]('visible'),_0x4d11ef=![];}),_0x184d44[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x6e7142=_0x2d2252;_0x184d44['classList'][_0x6e7142(0x1327)](_0x6e7142(0xa37)),_0x32389e[_0x6e7142(0x128f)][_0x6e7142(0x443)](_0x6e7142(0xa37)),_0x1ce322[_0x6e7142(0x63b)]['display']=_0x6e7142(0x127c),_0x4818c9[_0x6e7142(0x63b)][_0x6e7142(0x1248)]=_0x6e7142(0x11b5);}),_0x32389e['addEventListener']('click',()=>{const _0x3496da=_0x2d2252;_0x32389e['classList'][_0x3496da(0x1327)](_0x3496da(0xa37)),_0x184d44[_0x3496da(0x128f)][_0x3496da(0x443)]('active'),_0x4818c9['style']['display']=_0x3496da(0x127c),_0x1ce322[_0x3496da(0x63b)][_0x3496da(0x1248)]=_0x3496da(0x11b5);}),document['getElementById'](_0x2d2252(0x1465))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x4c7c44=_0x2d2252;if(!_0x8f0871['activeChatId'])return;const _0x1d131a=_0x8f0871[_0x4c7c44(0x1260)][_0x8f0871[_0x4c7c44(0xac8)]],_0x59448c=await _0x3f65ed(_0x4c7c44(0x779),'此操作将永久删除此聊天的所有消息，无法恢复。确定要清空吗？',{'confirmButtonClass':_0x4c7c44(0x611)});_0x59448c&&(_0x1d131a['history']=[],_0x1d131a[_0x4c7c44(0xfb3)]=_0x4c7c44(0x1111),_0x1d131a[_0x4c7c44(0xa30)]='...',await _0x372b85[_0x4c7c44(0x1260)][_0x4c7c44(0x11d5)](_0x1d131a),_0x54d32b(_0x8f0871[_0x4c7c44(0xac8)]),_0x2d75fb(),_0x133500['classList'][_0x4c7c44(0x443)]('visible'));});const _0x52fc99=(_0x3737b9,_0x5957e4)=>{const _0x52d5ad=_0x2d2252;document[_0x52d5ad(0xfa0)](_0x3737b9)[_0x52d5ad(0x7b8)](_0x52d5ad(0xca8),async _0x275029=>{const _0x5bf4ce=_0x52d5ad,_0x4ee940=_0x275029[_0x5bf4ce(0x10c2)][_0x5bf4ce(0xca1)][0x0];if(_0x4ee940){const _0x48214b=await new Promise((_0x37f6c1,_0x3edff0)=>{const _0x45b2b1=_0x5bf4ce,_0x1bfe9f=new FileReader();_0x1bfe9f[_0x45b2b1(0x7c6)]=()=>_0x37f6c1(_0x1bfe9f[_0x45b2b1(0x4fe)]),_0x1bfe9f[_0x45b2b1(0x14b0)]=()=>_0x3edff0(_0x1bfe9f[_0x45b2b1(0x52b)]),_0x1bfe9f[_0x45b2b1(0x101e)](_0x4ee940);});_0x5957e4(_0x48214b),_0x275029[_0x5bf4ce(0x10c2)][_0x5bf4ce(0x4f6)]=null;}});};_0x52fc99(_0x2d2252(0x7e8),_0x33a555=>document[_0x2d2252(0xfa0)](_0x2d2252(0xc5a))[_0x2d2252(0x53e)]=_0x33a555),_0x52fc99('my-avatar-input',_0xea69ae=>document[_0x2d2252(0xfa0)]('my-avatar-preview')[_0x2d2252(0x53e)]=_0xea69ae),_0x52fc99('group-avatar-input',_0x4d2bea=>document[_0x2d2252(0xfa0)](_0x2d2252(0x633))[_0x2d2252(0x53e)]=_0x4d2bea),_0x52fc99(_0x2d2252(0x336),_0x503cb5=>document[_0x2d2252(0xfa0)](_0x2d2252(0xa52))['src']=_0x503cb5),_0x52fc99(_0x2d2252(0x643),_0x193614=>{const _0x4181c6=_0x2d2252;if(_0x8f0871['activeChatId']){_0x8f0871['chats'][_0x8f0871[_0x4181c6(0xac8)]]['settings'][_0x4181c6(0x1113)]=_0x193614;const _0x5d6163=document['getElementById'](_0x4181c6(0xf1e));_0x5d6163[_0x4181c6(0x53e)]=_0x193614,_0x5d6163[_0x4181c6(0x63b)][_0x4181c6(0x1248)]='block',document['getElementById'](_0x4181c6(0xd08))[_0x4181c6(0x63b)][_0x4181c6(0x1248)]='inline-block';}}),_0x52fc99(_0x2d2252(0x314),_0x443831=>document[_0x2d2252(0xfa0)](_0x2d2252(0xfc1))['src']=_0x443831),document[_0x2d2252(0xfa0)](_0x2d2252(0xd08))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x56699a=_0x2d2252;if(_0x8f0871['activeChatId']){_0x8f0871[_0x56699a(0x1260)][_0x8f0871[_0x56699a(0xac8)]][_0x56699a(0x12d7)][_0x56699a(0x1113)]='';const _0x24b79e=document[_0x56699a(0xfa0)](_0x56699a(0xf1e));_0x24b79e['src']='',_0x24b79e[_0x56699a(0x63b)][_0x56699a(0x1248)]=_0x56699a(0x11b5),document['getElementById']('remove-bg-btn')[_0x56699a(0x63b)][_0x56699a(0x1248)]='none';}});const _0xc51a6c=document['getElementById'](_0x2d2252(0xd9f));document[_0x2d2252(0xfa0)]('open-sticker-panel-btn')['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x3bc0bf=_0x2d2252,_0x28d1e1=_0x8f0871['chats'][_0x8f0871[_0x3bc0bf(0xac8)]];_0x28d1e1&&_0x28d1e1['settings'][_0x3bc0bf(0xc29)]?_0x41ab64=_0x28d1e1['settings'][_0x3bc0bf(0xc29)]:_0x41ab64=_0x3bc0bf(0x8ab),_0x431c0b(),_0xc51a6c[_0x3bc0bf(0x128f)][_0x3bc0bf(0x1327)](_0x3bc0bf(0xdcc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0xf25))[_0x2d2252(0x7b8)]('click',()=>_0xc51a6c[_0x2d2252(0x128f)][_0x2d2252(0x443)](_0x2d2252(0xdcc))),document[_0x2d2252(0xfa0)](_0x2d2252(0x7bb))[_0x2d2252(0x7b8)]('click',_0x52deea),document[_0x2d2252(0xfa0)]('upload-sticker-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>document['getElementById'](_0x2d2252(0x1049))['click']()),document[_0x2d2252(0xfa0)](_0x2d2252(0x1049))[_0x2d2252(0x7b8)]('change',async _0x471d66=>{const _0x3601e8=_0x2d2252,_0x1cb770=_0x471d66[_0x3601e8(0x10c2)][_0x3601e8(0xca1)][0x0];if(!_0x1cb770)return;const _0xc659da=new FileReader();_0xc659da[_0x3601e8(0x101e)](_0x1cb770),_0xc659da[_0x3601e8(0x7c6)]=async()=>{const _0x4820a9=_0x3601e8,_0x518218=_0xc659da[_0x4820a9(0x4fe)],_0x46aada=await _0x131a69('命名表情','请为这个表情命名\x20(例如：好耶、疑惑)');if(_0x46aada&&_0x46aada[_0x4820a9(0xa06)]()){const _0xcedc8a={'id':_0x4820a9(0x5dd)+Date[_0x4820a9(0xc22)](),'url':_0x518218,'name':_0x46aada[_0x4820a9(0xa06)](),'categoryId':_0x41ab64!==_0x4820a9(0x8ab)&&_0x41ab64!==_0x4820a9(0x398)?_0x41ab64:null};await _0x372b85[_0x4820a9(0x413)][_0x4820a9(0x1327)](_0xcedc8a),_0x8f0871[_0x4820a9(0x413)]['push'](_0xcedc8a),_0x431c0b();}else{if(_0x46aada!==null)alert(_0x4820a9(0x6aa));}},_0x471d66[_0x3601e8(0x10c2)][_0x3601e8(0x4f6)]=null;}),document['getElementById'](_0x2d2252(0xefc))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>document[_0x2d2252(0xfa0)](_0x2d2252(0x112e))[_0x2d2252(0xb4a)]()),document[_0x2d2252(0xfa0)](_0x2d2252(0x112e))[_0x2d2252(0x7b8)]('change',async _0x15a7d8=>{const _0x56c3=_0x2d2252,_0x5e82ae=_0x15a7d8['target'][_0x56c3(0xca1)][0x0];if(!_0x5e82ae||!_0x8f0871['activeChatId'])return;const _0x35445f=new FileReader();_0x35445f[_0x56c3(0x7c6)]=async _0x45af40=>{const _0x1c66ca=_0x56c3,_0x321143=_0x45af40[_0x1c66ca(0x10c2)][_0x1c66ca(0x4fe)],_0x5488a6=_0x8f0871[_0x1c66ca(0x1260)][_0x8f0871[_0x1c66ca(0xac8)]],_0x6f1960={'role':'user','content':[{'type':_0x1c66ca(0xa58),'image_url':{'url':_0x321143}}],'timestamp':Date[_0x1c66ca(0xc22)]()};_0x5488a6[_0x1c66ca(0xc88)]['push'](_0x6f1960),await _0x372b85[_0x1c66ca(0x1260)]['put'](_0x5488a6),_0x25d29f(_0x6f1960,_0x5488a6),_0x2d75fb();},_0x35445f['readAsDataURL'](_0x5e82ae),_0x15a7d8['target'][_0x56c3(0x4f6)]=null;}),document[_0x2d2252(0xfa0)](_0x2d2252(0x594))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x2e9d49=_0x2d2252;if(!_0x8f0871[_0x2e9d49(0xac8)])return;const _0x1db1a2=await _0x131a69(_0x2e9d49(0x232),'请输入你想说的内容：');if(_0x1db1a2&&_0x1db1a2[_0x2e9d49(0xa06)]()){const _0x1d542c=_0x8f0871[_0x2e9d49(0x1260)][_0x8f0871[_0x2e9d49(0xac8)]],_0xdd8d43={'role':'user','type':_0x2e9d49(0x412),'content':_0x1db1a2[_0x2e9d49(0xa06)](),'timestamp':Date[_0x2e9d49(0xc22)]()};_0x1d542c[_0x2e9d49(0xc88)][_0x2e9d49(0x481)](_0xdd8d43),await _0x372b85[_0x2e9d49(0x1260)][_0x2e9d49(0x11d5)](_0x1d542c),_0x25d29f(_0xdd8d43,_0x1d542c),_0x2d75fb();}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x6d5))[_0x2d2252(0x7b8)]('click',async()=>{const _0x144a63=_0x2d2252;if(!_0x8f0871[_0x144a63(0xac8)])return;const _0x5daffc=await _0x131a69(_0x144a63(0x103a),_0x144a63(0xe1e));if(_0x5daffc&&_0x5daffc[_0x144a63(0xa06)]()){const _0xce5d88=_0x8f0871[_0x144a63(0x1260)][_0x8f0871[_0x144a63(0xac8)]],_0x50ae7b={'role':'user','type':_0x144a63(0x838),'content':_0x5daffc[_0x144a63(0xa06)](),'timestamp':Date[_0x144a63(0xc22)]()};_0xce5d88[_0x144a63(0xc88)]['push'](_0x50ae7b),await _0x372b85[_0x144a63(0x1260)][_0x144a63(0x11d5)](_0xce5d88),_0x25d29f(_0x50ae7b,_0xce5d88),_0x2d75fb();}});const _0x352ed7=document['getElementById'](_0x2d2252(0xd48));document[_0x2d2252(0xfa0)](_0x2d2252(0xf57))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x212149=_0x2d2252;_0x352ed7[_0x212149(0x128f)][_0x212149(0x1327)]('visible');}),_0x352ed7[_0x2d2252(0x7b8)]('click',_0x5b3b9b=>{const _0x425cbb=_0x2d2252;_0x5b3b9b[_0x425cbb(0x10c2)]===_0x352ed7&&_0x352ed7[_0x425cbb(0x128f)][_0x425cbb(0x443)](_0x425cbb(0xdcc));}),document['getElementById'](_0x2d2252(0xf8d))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x543c05),document[_0x2d2252(0xfa0)](_0x2d2252(0x123b))['addEventListener'](_0x2d2252(0xb4a),async()=>{const _0x1db6e7=_0x2d2252;if(!_0x8f0871[_0x1db6e7(0xac8)])return;const _0x1c3cc4=document[_0x1db6e7(0xfa0)](_0x1db6e7(0x105a)),_0x31e3b8=document['getElementById'](_0x1db6e7(0xf73)),_0x3ff722=_0x1c3cc4[_0x1db6e7(0x4f6)]['trim'](),_0x374c11=parseFloat(_0x31e3b8[_0x1db6e7(0x4f6)]);if(!_0x3ff722||isNaN(_0x374c11)||_0x374c11<=0x0){alert(_0x1db6e7(0x39e));return;}const _0x16c890=_0x8f0871['chats'][_0x8f0871['activeChatId']],_0x4121b8=Date[_0x1db6e7(0xc22)](),_0x5c06e9=_0x16c890[_0x1db6e7(0x1364)]?_0x16c890[_0x1db6e7(0x12d7)][_0x1db6e7(0xda5)]||'我':'我',_0x34ee20={'role':'user','senderName':_0x5c06e9,'type':'waimai_request','productInfo':_0x3ff722,'amount':_0x374c11,'status':'pending','countdownEndTime':_0x4121b8+0xf*0x3c*0x3e8,'timestamp':_0x4121b8};_0x16c890[_0x1db6e7(0xc88)]['push'](_0x34ee20),await _0x372b85[_0x1db6e7(0x1260)][_0x1db6e7(0x11d5)](_0x16c890),_0x25d29f(_0x34ee20,_0x16c890),_0x2d75fb(),_0x1c3cc4[_0x1db6e7(0x4f6)]='',_0x31e3b8['value']='',_0x352ed7[_0x1db6e7(0x128f)]['remove'](_0x1db6e7(0xdcc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x9d9))['addEventListener'](_0x2d2252(0xb4a),_0x1b38df),document[_0x2d2252(0xfa0)](_0x2d2252(0xc12))['addEventListener'](_0x2d2252(0xb4a),_0x5ac1a3),document[_0x2d2252(0xfa0)]('add-persona-preset-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x1cc972),document['getElementById'](_0x2d2252(0x370))['addEventListener'](_0x2d2252(0xb4a),_0x5ef89c),document['getElementById'](_0x2d2252(0x638))['addEventListener'](_0x2d2252(0xb4a),_0x272641),document[_0x2d2252(0xfa0)]('preset-action-edit')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x5e381f),document[_0x2d2252(0xfa0)](_0x2d2252(0x1162))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x328678),document[_0x2d2252(0xfa0)](_0x2d2252(0xddc))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x50e711),document[_0x2d2252(0xfa0)](_0x2d2252(0x4c8))[_0x2d2252(0x7b8)]('click',_0x17a1e5),document[_0x2d2252(0xfa0)](_0x2d2252(0x777))[_0x2d2252(0x7b8)]('click',async()=>{const _0xc70648=_0x2d2252;if(_0x552199['size']===0x0)return;const _0x5d18b0=await _0x3f65ed(_0xc70648(0x10f5),'确定要删除选中的\x20'+_0x552199['size']+'\x20条消息吗？这会通知AI这些消息已被删除。',{'confirmButtonClass':'btn-danger'});if(_0x5d18b0){const _0x4c34a2=_0x8f0871[_0xc70648(0x1260)][_0x8f0871[_0xc70648(0xac8)]];let _0x4bc8c3=[];for(const _0x418cc6 of _0x552199){const _0x369132=_0x4c34a2[_0xc70648(0xc88)][_0xc70648(0x7ed)](_0x4256f8=>_0x4256f8[_0xc70648(0xe55)]===_0x418cc6);_0x369132&&_0x369132['type']==='poll'&&_0x4bc8c3[_0xc70648(0x481)](_0xc70648(0x1a6)+_0x369132[_0xc70648(0xc39)]+'”的投票(时间戳:\x20'+_0x369132[_0xc70648(0xe55)]+')');}_0x4c34a2[_0xc70648(0xc88)]=_0x4c34a2[_0xc70648(0xc88)][_0xc70648(0xde7)](_0x4ca98d=>!_0x552199['has'](_0x4ca98d['timestamp']));let _0x4f7805=_0xc70648(0xcf5);_0x4bc8c3[_0xc70648(0xac0)]>0x0&&(_0x4f7805+=_0xc70648(0x89b)+_0x4bc8c3['join']('；')+'。');_0x4f7805+=_0xc70648(0xb42);const _0x4a6ee6={'role':_0xc70648(0x1417),'content':'[系统提示：'+_0x4f7805+']','timestamp':Date[_0xc70648(0xc22)](),'isHidden':!![]};_0x4c34a2[_0xc70648(0xc88)][_0xc70648(0x481)](_0x4a6ee6),await _0x372b85[_0xc70648(0x1260)]['put'](_0x4c34a2),_0x54d32b(_0x8f0871[_0xc70648(0xac8)]),_0x2d75fb();}}),document[_0x2d2252(0xfa0)]('selection-erase-btn')['addEventListener'](_0x2d2252(0xb4a),async()=>{const _0x5b8eb4=_0x2d2252;if(_0x552199['size']===0x0)return;const _0x4aef6c=await _0x3f65ed(_0x5b8eb4(0xd4f),_0x5b8eb4(0xf0f)+_0x552199[_0x5b8eb4(0xbc3)]+_0x5b8eb4(0x14e5),{'confirmButtonClass':_0x5b8eb4(0x611),'confirmText':_0x5b8eb4(0xd03)});if(_0x4aef6c){const _0x2f8d5d=_0x8f0871[_0x5b8eb4(0x1260)][_0x8f0871[_0x5b8eb4(0xac8)]];_0x2f8d5d[_0x5b8eb4(0xc88)]=_0x2f8d5d[_0x5b8eb4(0xc88)][_0x5b8eb4(0xde7)](_0x440c9d=>!_0x552199[_0x5b8eb4(0xd58)](_0x440c9d[_0x5b8eb4(0xe55)])),await _0x372b85[_0x5b8eb4(0x1260)]['put'](_0x2f8d5d),_0x54d32b(_0x8f0871[_0x5b8eb4(0xac8)]),_0x2d75fb();}});const _0x37eae5=document[_0x2d2252(0xfa0)](_0x2d2252(0xe6e));_0x37eae5[_0x2d2252(0x7b8)]('input',()=>_0x2dccde(_0x37eae5[_0x2d2252(0x4f6)]['trim'](),!![])),document[_0x2d2252(0xfa0)](_0x2d2252(0x11ff))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x3c5df4=_0x2d2252,_0x28bd66=_0x37eae5[_0x3c5df4(0x4f6)][_0x3c5df4(0xa06)]();if(!_0x28bd66){alert(_0x3c5df4(0xb87));return;}_0x2dccde(_0x28bd66,![]),_0x8f0871[_0x3c5df4(0x7b0)][_0x3c5df4(0x1208)]=_0x28bd66,await _0x372b85[_0x3c5df4(0x7b0)][_0x3c5df4(0x11d5)](_0x8f0871[_0x3c5df4(0x7b0)]),alert(_0x3c5df4(0x8fc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x13df))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x2ae8a6),document['querySelectorAll'](_0x2d2252(0x59b))['forEach'](_0x597347=>{const _0x12a1a4=_0x2d2252;_0x597347[_0x12a1a4(0x7b8)](_0x12a1a4(0xb4a),()=>_0x33d681(_0x597347['dataset'][_0x12a1a4(0x28c)]));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x11f9))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>_0x33d681(_0x2d2252(0x230))),document[_0x2d2252(0xfa0)]('qzone-nickname')['addEventListener'](_0x2d2252(0xb4a),async()=>{const _0x3e0b62=_0x2d2252,_0x3de0d5=await _0x131a69(_0x3e0b62(0x403),'请输入新的昵称',_0x8f0871['qzoneSettings'][_0x3e0b62(0xff8)]);_0x3de0d5&&_0x3de0d5[_0x3e0b62(0xa06)]()&&(_0x8f0871[_0x3e0b62(0x9dd)][_0x3e0b62(0xff8)]=_0x3de0d5[_0x3e0b62(0xa06)](),await _0x32a702(),_0x2437d0());}),document['getElementById']('qzone-avatar-container')['addEventListener'](_0x2d2252(0xb4a),()=>document['getElementById'](_0x2d2252(0x74a))[_0x2d2252(0xb4a)]()),document[_0x2d2252(0xfa0)](_0x2d2252(0xceb))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>document[_0x2d2252(0xfa0)]('qzone-banner-input')[_0x2d2252(0xb4a)]()),document[_0x2d2252(0xfa0)](_0x2d2252(0x74a))[_0x2d2252(0x7b8)]('change',async _0x202960=>{const _0x55dcda=_0x2d2252,_0xebd764=_0x202960[_0x55dcda(0x10c2)][_0x55dcda(0xca1)][0x0];if(_0xebd764){const _0x4bdf3d=await new Promise(_0x1be06e=>{const _0x1395e9=_0x55dcda,_0x3bfcfd=new FileReader();_0x3bfcfd['onload']=()=>_0x1be06e(_0x3bfcfd[_0x1395e9(0x4fe)]),_0x3bfcfd['readAsDataURL'](_0xebd764);});_0x8f0871[_0x55dcda(0x9dd)][_0x55dcda(0xc61)]=_0x4bdf3d,await _0x32a702(),_0x2437d0();}_0x202960[_0x55dcda(0x10c2)][_0x55dcda(0x4f6)]=null;}),document[_0x2d2252(0xfa0)](_0x2d2252(0x4bf))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),async _0x58e5c3=>{const _0x3a83c9=_0x2d2252,_0x519f90=_0x58e5c3['target'][_0x3a83c9(0xca1)][0x0];if(_0x519f90){const _0x393a6b=await new Promise(_0x46dae1=>{const _0x30dcfa=_0x3a83c9,_0x2ec247=new FileReader();_0x2ec247[_0x30dcfa(0x7c6)]=()=>_0x46dae1(_0x2ec247['result']),_0x2ec247['readAsDataURL'](_0x519f90);});_0x8f0871['qzoneSettings'][_0x3a83c9(0x789)]=_0x393a6b,await _0x32a702(),_0x2437d0();}_0x58e5c3[_0x3a83c9(0x10c2)][_0x3a83c9(0x4f6)]=null;}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1d1))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x344f5f=_0x2d2252;_0x5de1bd();const _0x2a0a3c=document['getElementById'](_0x344f5f(0x421));_0x2a0a3c[_0x344f5f(0x8df)][_0x344f5f(0x9a1)]='shuoshuo',_0x2a0a3c[_0x344f5f(0xfb1)](_0x344f5f(0x81e))[_0x344f5f(0x63b)][_0x344f5f(0x1248)]=_0x344f5f(0x11b5),_0x2a0a3c[_0x344f5f(0xfb1)](_0x344f5f(0x1277))[_0x344f5f(0x63b)][_0x344f5f(0x1248)]=_0x344f5f(0x11b5),_0x2a0a3c['querySelector'](_0x344f5f(0x14c0))['style'][_0x344f5f(0x1248)]=_0x344f5f(0x11b5),_0x2a0a3c[_0x344f5f(0xfb1)]('#post-public-text')[_0x344f5f(0x14ca)]=_0x344f5f(0xe69);const _0x41cb89=document[_0x344f5f(0xfa0)](_0x344f5f(0xbdc));_0x41cb89[_0x344f5f(0x1331)]='';const _0x3a5e63=await _0x372b85['qzoneGroups'][_0x344f5f(0x3bc)]();_0x3a5e63[_0x344f5f(0xac0)]>0x0?_0x3a5e63[_0x344f5f(0x458)](_0x457ef9=>{const _0x11e26b=_0x344f5f,_0x4d1b08=document['createElement'](_0x11e26b(0x116a));_0x4d1b08[_0x11e26b(0x63b)][_0x11e26b(0x1248)]='block',_0x4d1b08['innerHTML']=_0x11e26b(0xbe4)+_0x457ef9['id']+'\x22>\x20'+_0x457ef9[_0x11e26b(0x1023)],_0x41cb89['appendChild'](_0x4d1b08);}):_0x41cb89[_0x344f5f(0x1331)]='<p\x20style=\x22color:\x20var(--text-secondary);\x22>没有可用的分组</p>',_0x2a0a3c[_0x344f5f(0x128f)]['add']('visible');}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1541))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0xfce7bd=_0x2d2252;_0x5de1bd();const _0x9d5236=document['getElementById'](_0xfce7bd(0x421));_0x9d5236[_0xfce7bd(0x8df)][_0xfce7bd(0x9a1)]=_0xfce7bd(0xee6),_0x9d5236['querySelector'](_0xfce7bd(0x81e))[_0xfce7bd(0x63b)][_0xfce7bd(0x1248)]='flex',_0x9d5236[_0xfce7bd(0xfb1)](_0xfce7bd(0x1277))[_0xfce7bd(0x128f)]['add'](_0xfce7bd(0xa37)),_0x9d5236['querySelector']('#text-image-mode-content')[_0xfce7bd(0x128f)][_0xfce7bd(0x443)](_0xfce7bd(0xa37)),_0x9d5236['querySelector'](_0xfce7bd(0x19d))[_0xfce7bd(0x14ca)]='分享新鲜事...（非必填的公开文字）';const _0x221e1e=document[_0xfce7bd(0xfa0)](_0xfce7bd(0xbdc));_0x221e1e[_0xfce7bd(0x1331)]='';const _0x346dcb=await _0x372b85['qzoneGroups'][_0xfce7bd(0x3bc)]();_0x346dcb['length']>0x0?_0x346dcb[_0xfce7bd(0x458)](_0x5c0693=>{const _0x22e4a4=_0xfce7bd,_0xac767=document['createElement']('label');_0xac767[_0x22e4a4(0x63b)][_0x22e4a4(0x1248)]='block',_0xac767['innerHTML']=_0x22e4a4(0xbe4)+_0x5c0693['id']+_0x22e4a4(0xc97)+_0x5c0693[_0x22e4a4(0x1023)],_0x221e1e[_0x22e4a4(0x1155)](_0xac767);}):_0x221e1e[_0xfce7bd(0x1331)]=_0xfce7bd(0x148e),_0x9d5236[_0xfce7bd(0x128f)][_0xfce7bd(0x1327)](_0xfce7bd(0xdcc));}),document[_0x2d2252(0xfa0)]('open-album-btn')[_0x2d2252(0x7b8)]('click',async()=>{const _0x4598df=_0x2d2252;await _0x1976ef(),_0x2d25e5(_0x4598df(0x5fb));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x14e0))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x4adb60=_0x2d2252;_0x2d25e5(_0x4adb60(0x9e1)),_0x33d681(_0x4adb60(0x337));}),document['getElementById']('album-photos-back-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0xdd3a73=_0x2d2252;_0x8f0871['activeAlbumId']=null,_0x2d25e5(_0xdd3a73(0x5fb));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x827))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>document[_0x2d2252(0xfa0)](_0x2d2252(0x3d9))[_0x2d2252(0xb4a)]()),document[_0x2d2252(0xfa0)]('album-photo-input')[_0x2d2252(0x7b8)](_0x2d2252(0xca8),async _0x2f52e0=>{const _0x279324=_0x2d2252;if(!_0x8f0871[_0x279324(0x1577)])return;const _0x54f572=_0x2f52e0['target'][_0x279324(0xca1)];if(!_0x54f572[_0x279324(0xac0)])return;const _0x226fb2=await _0x372b85['qzoneAlbums'][_0x279324(0x70d)](_0x8f0871[_0x279324(0x1577)]);for(const _0x4b4a91 of _0x54f572){const _0x2e2f55=await new Promise(_0x187d36=>{const _0x518c8f=_0x279324,_0x1b252f=new FileReader();_0x1b252f['onload']=()=>_0x187d36(_0x1b252f[_0x518c8f(0x4fe)]),_0x1b252f[_0x518c8f(0x101e)](_0x4b4a91);});await _0x372b85['qzonePhotos'][_0x279324(0x1327)]({'albumId':_0x8f0871[_0x279324(0x1577)],'url':_0x2e2f55,'createdAt':Date[_0x279324(0xc22)]()});}const _0x3e953f=await _0x372b85[_0x279324(0x363)][_0x279324(0xdc7)]('albumId')[_0x279324(0x8c2)](_0x8f0871[_0x279324(0x1577)])[_0x279324(0x1383)](),_0x4eccee={'photoCount':_0x3e953f};if(!_0x226fb2[_0x279324(0x1506)]||_0x226fb2[_0x279324(0xb5f)][_0x279324(0xf95)](_0x279324(0x14ca))){const _0x26aaa8=await _0x372b85[_0x279324(0x363)][_0x279324(0xdc7)]('albumId')[_0x279324(0x8c2)](_0x8f0871['activeAlbumId'])[_0x279324(0x102a)]();if(_0x26aaa8)_0x4eccee[_0x279324(0xb5f)]=_0x26aaa8[_0x279324(0x3f5)];}await _0x372b85[_0x279324(0x85c)][_0x279324(0x1477)](_0x8f0871[_0x279324(0x1577)],_0x4eccee),await _0x428770(),await _0x1976ef(),_0x2f52e0['target'][_0x279324(0x4f6)]=null,alert(_0x279324(0x12bc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0xb00))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async _0x35e747=>{const _0x4da5d8=_0x2d2252,_0xb54109=_0x35e747[_0x4da5d8(0x10c2)][_0x4da5d8(0x187)]('.photo-delete-btn'),_0xf46f90=_0x35e747[_0x4da5d8(0x10c2)]['closest'](_0x4da5d8(0xe80));if(_0xb54109){_0x35e747[_0x4da5d8(0x21b)]();const _0x125cf0=parseInt(_0xb54109[_0x4da5d8(0x8df)]['photoId']),_0x3bb28d=await _0x3f65ed(_0x4da5d8(0x220),_0x4da5d8(0x7df),{'confirmButtonClass':_0x4da5d8(0x611)});if(_0x3bb28d){const _0x565bef=await _0x372b85[_0x4da5d8(0x363)][_0x4da5d8(0x70d)](_0x125cf0);if(!_0x565bef)return;await _0x372b85[_0x4da5d8(0x363)][_0x4da5d8(0xf10)](_0x125cf0);const _0x9560f9=await _0x372b85[_0x4da5d8(0x85c)][_0x4da5d8(0x70d)](_0x8f0871[_0x4da5d8(0x1577)]),_0x45a72e=(_0x9560f9[_0x4da5d8(0x1506)]||0x1)-0x1,_0x22bc09={'photoCount':_0x45a72e};if(_0x9560f9[_0x4da5d8(0xb5f)]===_0x565bef[_0x4da5d8(0x3f5)]){const _0x294295=await _0x372b85[_0x4da5d8(0x363)][_0x4da5d8(0xdc7)](_0x4da5d8(0x74e))['equals'](_0x8f0871[_0x4da5d8(0x1577)])[_0x4da5d8(0x102a)]();_0x22bc09[_0x4da5d8(0xb5f)]=_0x294295?_0x294295['url']:_0x4da5d8(0x6a1);}await _0x372b85[_0x4da5d8(0x85c)][_0x4da5d8(0x1477)](_0x8f0871[_0x4da5d8(0x1577)],_0x22bc09),await _0x428770(),await _0x1976ef(),alert(_0x4da5d8(0x12eb));}}else _0xf46f90&&_0x4fa1a0(_0xf46f90[_0x4da5d8(0x53e)]);}),document[_0x2d2252(0xfa0)](_0x2d2252(0xa34))['addEventListener'](_0x2d2252(0xb4a),_0x3ab1b1),document[_0x2d2252(0xfa0)]('photo-viewer-next-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x50ded1),document[_0x2d2252(0xfa0)]('photo-viewer-prev-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0xadc4b3),document[_0x2d2252(0x7b8)](_0x2d2252(0x13dd),_0x47e884=>{const _0xc715c8=_0x2d2252;if(!_0x24396c[_0xc715c8(0xe21)])return;if(_0x47e884[_0xc715c8(0x1557)]===_0xc715c8(0x226))_0x50ded1();else{if(_0x47e884[_0xc715c8(0x1557)]===_0xc715c8(0x295))_0xadc4b3();else _0x47e884[_0xc715c8(0x1557)]===_0xc715c8(0xcee)&&_0x3ab1b1();}}),document['getElementById'](_0x2d2252(0x116e))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0xf85fb2=_0x2d2252,_0x2bb786=await _0x131a69(_0xf85fb2(0xc15),_0xf85fb2(0xcfe));if(_0x2bb786&&_0x2bb786[_0xf85fb2(0xa06)]()){const _0x29b08c={'name':_0x2bb786[_0xf85fb2(0xa06)](),'coverUrl':'https://i.postimg.cc/pT2xKzPz/album-cover-placeholder.png','photoCount':0x0,'createdAt':Date[_0xf85fb2(0xc22)]()};await _0x372b85[_0xf85fb2(0x85c)][_0xf85fb2(0x1327)](_0x29b08c),await _0x1976ef(),alert(_0xf85fb2(0x10fb)+_0x2bb786+'\x22\x20创建成功！');}else _0x2bb786!==null&&alert(_0xf85fb2(0x11bc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1164))['addEventListener'](_0x2d2252(0xb4a),()=>document[_0x2d2252(0xfa0)](_0x2d2252(0x421))[_0x2d2252(0x128f)][_0x2d2252(0x443)](_0x2d2252(0xdcc))),document['getElementById'](_0x2d2252(0x604))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>document['getElementById'](_0x2d2252(0x686))[_0x2d2252(0xb4a)]()),document[_0x2d2252(0xfa0)]('post-local-image-input')[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x2ddd4d=>{const _0x5ec887=_0x2d2252,_0x19c70b=_0x2ddd4d['target']['files'][0x0];if(_0x19c70b){const _0x2e7d0d=new FileReader();_0x2e7d0d['onload']=_0x9c5ca8=>{const _0x5bd489=_0x5817;document[_0x5bd489(0xfa0)](_0x5bd489(0x878))['src']=_0x9c5ca8[_0x5bd489(0x10c2)][_0x5bd489(0x4fe)],document['getElementById'](_0x5bd489(0xd33))[_0x5bd489(0x128f)][_0x5bd489(0x1327)](_0x5bd489(0xdcc)),document[_0x5bd489(0xfa0)](_0x5bd489(0xdba))[_0x5bd489(0x63b)][_0x5bd489(0x1248)]=_0x5bd489(0x127c);},_0x2e7d0d[_0x5ec887(0x101e)](_0x19c70b);}}),document[_0x2d2252(0xfa0)](_0x2d2252(0xf1f))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x527ac1=_0x2d2252,_0x5e268e=await _0x131a69(_0x527ac1(0xd42),'请输入网络图片的链接','',_0x527ac1(0x3f5));_0x5e268e&&(document[_0x527ac1(0xfa0)]('post-image-preview')[_0x527ac1(0x53e)]=_0x5e268e,document[_0x527ac1(0xfa0)](_0x527ac1(0xd33))[_0x527ac1(0x128f)][_0x527ac1(0x1327)]('visible'),document[_0x527ac1(0xfa0)]('post-image-desc-group')[_0x527ac1(0x63b)][_0x527ac1(0x1248)]='block');}),document[_0x2d2252(0xfa0)]('post-remove-image-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>_0x5de1bd());const _0x3a8a1f=document[_0x2d2252(0xfa0)](_0x2d2252(0x4d1)),_0x3db40e=document[_0x2d2252(0xfa0)]('switch-to-text-image-mode'),_0x507ea2=document[_0x2d2252(0xfa0)](_0x2d2252(0x36d)),_0x3c3043=document[_0x2d2252(0xfa0)](_0x2d2252(0x1149));_0x3a8a1f[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x264e28=_0x2d2252;_0x3a8a1f[_0x264e28(0x128f)][_0x264e28(0x1327)](_0x264e28(0xa37)),_0x3db40e[_0x264e28(0x128f)][_0x264e28(0x443)]('active'),_0x507ea2[_0x264e28(0x128f)][_0x264e28(0x1327)](_0x264e28(0xa37)),_0x3c3043[_0x264e28(0x128f)][_0x264e28(0x443)](_0x264e28(0xa37));}),_0x3db40e['addEventListener']('click',()=>{const _0x468473=_0x2d2252;_0x3db40e[_0x468473(0x128f)]['add'](_0x468473(0xa37)),_0x3a8a1f['classList'][_0x468473(0x443)]('active'),_0x3c3043[_0x468473(0x128f)][_0x468473(0x1327)](_0x468473(0xa37)),_0x507ea2[_0x468473(0x128f)][_0x468473(0x443)](_0x468473(0xa37));}),document[_0x2d2252(0xfa0)]('confirm-create-post-btn')['addEventListener']('click',async()=>{const _0x52a49b=_0x2d2252,_0x10a714=document[_0x52a49b(0xfa0)](_0x52a49b(0x421)),_0x1cbff4=_0x10a714[_0x52a49b(0x8df)]['mode'],_0x48ea9c=document[_0x52a49b(0xfb1)](_0x52a49b(0x35b))[_0x52a49b(0x4f6)];let _0x151c71=null;_0x48ea9c===_0x52a49b(0x8f8)&&(_0x151c71=Array[_0x52a49b(0x3aa)](document['querySelectorAll']('input[name=\x22visibility_group\x22]:checked'))[_0x52a49b(0x556)](_0x14dcaf=>parseInt(_0x14dcaf['value'])));let _0x224a99={};const _0x3fc811={'timestamp':Date[_0x52a49b(0xc22)](),'authorId':_0x52a49b(0xcb0),'visibleGroupIds':_0x151c71};if(_0x1cbff4===_0x52a49b(0x134d)){const _0x3d9ebb=document[_0x52a49b(0xfa0)](_0x52a49b(0xe0b))[_0x52a49b(0x4f6)]['trim']();if(!_0x3d9ebb){alert(_0x52a49b(0x6e8));return;}_0x224a99={..._0x3fc811,'type':'shuoshuo','content':_0x3d9ebb};}else{const _0x199cf1=document[_0x52a49b(0xfa0)]('post-public-text')[_0x52a49b(0x4f6)]['trim'](),_0x17e8b1=document[_0x52a49b(0xfa0)]('image-mode-content')[_0x52a49b(0x128f)][_0x52a49b(0xea7)](_0x52a49b(0xa37));if(_0x17e8b1){const _0x5c5f98=document[_0x52a49b(0xfa0)](_0x52a49b(0x878))[_0x52a49b(0x53e)],_0x305ed6=document[_0x52a49b(0xfa0)]('post-image-description')[_0x52a49b(0x4f6)]['trim']();if(!_0x5c5f98||!(_0x5c5f98[_0x52a49b(0x9b8)](_0x52a49b(0xce7))||_0x5c5f98[_0x52a49b(0x9b8)](_0x52a49b(0x83b)))){alert(_0x52a49b(0x1019));return;}if(!_0x305ed6){alert(_0x52a49b(0x10fe));return;}_0x224a99={..._0x3fc811,'type':_0x52a49b(0x76d),'publicText':_0x199cf1,'imageUrl':_0x5c5f98,'imageDescription':_0x305ed6};}else{const _0x1d22c5=document[_0x52a49b(0xfa0)]('post-hidden-text')['value'][_0x52a49b(0xa06)]();if(!_0x1d22c5){alert(_0x52a49b(0x6fe));return;}_0x224a99={..._0x3fc811,'type':_0x52a49b(0x12d0),'publicText':_0x199cf1,'hiddenContent':_0x1d22c5};}}const _0x589092=await _0x372b85[_0x52a49b(0x12c2)][_0x52a49b(0x1327)](_0x224a99);let _0x384e20=_0x224a99[_0x52a49b(0x1469)]||_0x224a99[_0x52a49b(0x137f)]||_0x224a99[_0x52a49b(0xf67)]||_0x224a99[_0x52a49b(0x59a)]||'（无文字内容）';_0x384e20=_0x384e20[_0x52a49b(0x9fe)](0x0,0x32)+(_0x384e20[_0x52a49b(0xac0)]>0x32?'...':'');for(const _0x309497 in _0x8f0871[_0x52a49b(0x1260)]){const _0x107fde=_0x8f0871[_0x52a49b(0x1260)][_0x309497];if(_0x107fde[_0x52a49b(0x1364)])continue;let _0x5837cc=![];const _0x5b0bbb=_0x224a99[_0x52a49b(0xc2c)];if(!_0x5b0bbb||_0x5b0bbb[_0x52a49b(0xac0)]===0x0)_0x5837cc=!![];else _0x107fde[_0x52a49b(0xdbf)]&&_0x5b0bbb[_0x52a49b(0xf95)](_0x107fde[_0x52a49b(0xdbf)])&&(_0x5837cc=!![]);if(_0x5837cc){const _0x525ae9={'role':'system','content':_0x52a49b(0x418)+_0x589092+')，内容摘要是：“'+_0x384e20+'”。请你【结合自己的角色设定、世界观和你们的最近聊天内容】，对这条动态发表一条自然的评论。]','timestamp':Date[_0x52a49b(0xc22)](),'isHidden':!![]};_0x107fde[_0x52a49b(0xc88)][_0x52a49b(0x481)](_0x525ae9),await _0x372b85['chats'][_0x52a49b(0x11d5)](_0x107fde);}}await _0x1098dc(),_0x10a714[_0x52a49b(0x128f)][_0x52a49b(0x443)](_0x52a49b(0xdcc)),alert(_0x52a49b(0xb16));});const _0x487b95=document['getElementById'](_0x2d2252(0x108e));let _0x291232={'isDragging':![],'startX':0x0,'startY':0x0,'currentX':0x0,'activeContainer':null,'swipeDirection':null,'isClick':!![]};function _0x3e1b4a(_0xfa63a9=null){const _0xfc1b73=_0x2d2252;document[_0xfc1b73(0x2a1)](_0xfc1b73(0x86c))[_0xfc1b73(0x458)](_0x3ededb=>{const _0x4c53f7=_0xfc1b73;_0x3ededb!==_0xfa63a9&&_0x3ededb[_0x4c53f7(0xfb1)]('.qzone-post-item')[_0x4c53f7(0x128f)]['remove']('swiped');});}async function _0x6f67d1(_0x21436b){const _0x18c6de=_0x2d2252;_0x21436b['stopPropagation']();const _0x11ee56=_0x21436b[_0x18c6de(0x10c2)],_0x511156=_0x11ee56[_0x18c6de(0x187)](_0x18c6de(0xab8));if(_0x511156){const _0x59dbe8=_0x511156[_0x18c6de(0x187)]('.qzone-post-container'),_0x470bcd=parseInt(_0x59dbe8[_0x18c6de(0x8df)][_0x18c6de(0x3eb)]),_0x13199d=parseInt(_0x511156[_0x18c6de(0x8df)][_0x18c6de(0x719)]);if(isNaN(_0x470bcd)||isNaN(_0x13199d))return;const _0x657b40=_0x4b4cc4[_0x18c6de(0x7ed)](_0x22ab69=>_0x22ab69['id']===_0x470bcd);if(!_0x657b40||!_0x657b40[_0x18c6de(0xbab)]||!_0x657b40[_0x18c6de(0xbab)][_0x13199d])return;const _0x20db87=_0x657b40[_0x18c6de(0xbab)][_0x13199d],_0xe6fcf5=await _0x3f65ed(_0x18c6de(0xa99),_0x18c6de(0x5a2),{'confirmButtonClass':_0x18c6de(0x611)});if(_0xe6fcf5){_0x657b40[_0x18c6de(0xbab)][_0x18c6de(0x11ac)](_0x13199d,0x1),await _0x372b85[_0x18c6de(0x12c2)][_0x18c6de(0x1477)](_0x470bcd,{'comments':_0x657b40[_0x18c6de(0xbab)]});if(_0x20db87&&_0x20db87[_0x18c6de(0xa7e)]===_0x8f0871[_0x18c6de(0x9dd)]['nickname']){console[_0x18c6de(0x4ee)]('用户删除了自己的评论，开始清理AI记忆...');const _0x53d533=new Set();_0x657b40[_0x18c6de(0x11dd)]!==_0x18c6de(0xcb0)&&_0x53d533['add'](_0x657b40[_0x18c6de(0x11dd)]);if(_0x20db87[_0x18c6de(0x5ee)]){const _0x36224d=Object[_0x18c6de(0x142f)](_0x8f0871[_0x18c6de(0x1260)])['find'](_0x386e52=>_0x386e52[_0x18c6de(0x93e)]===_0x20db87[_0x18c6de(0x5ee)]);_0x36224d&&_0x53d533['add'](_0x36224d['id']);}const _0x5bfd72=(_0x657b40[_0x18c6de(0x137f)]||_0x657b40[_0x18c6de(0x1469)]||'')[_0x18c6de(0x9fe)](0x0,0x1e),_0x1882e2=_0x8f0871[_0x18c6de(0x9dd)][_0x18c6de(0xff8)];let _0x37c3aa;const _0xc133a9=_0x8f0871[_0x18c6de(0x413)][_0x18c6de(0x7ed)](_0x2b37a3=>_0x2b37a3[_0x18c6de(0x3f5)]===_0x20db87[_0x18c6de(0xda3)]);if(_0xc133a9)_0x37c3aa=_0x18c6de(0xeba)+_0x1882e2+_0x18c6de(0x138e)+_0x5bfd72+_0x18c6de(0xf9b)+_0xc133a9[_0x18c6de(0x1023)]+'”。';else{if(_0x20db87['replyTo']){const _0x9c751b=_0xc4efbd(_0x20db87['replyTo']);_0x37c3aa=_0x18c6de(0xeba)+_0x1882e2+_0x18c6de(0x138e)+_0x5bfd72+'”下，回复了\x27'+_0x9c751b+'\x27的评论，内容是：“'+_0x20db87[_0x18c6de(0xda3)]+'”。';}else _0x37c3aa=_0x18c6de(0xeba)+_0x1882e2+_0x18c6de(0xab1)+_0x5bfd72+_0x18c6de(0xa00)+_0x20db87[_0x18c6de(0xda3)]+'”。';}const _0x189a12='[系统提示：'+_0x37c3aa+_0x18c6de(0x14c7);for(const _0x4fdf66 of _0x53d533){const _0x15ab0c=_0x8f0871['chats'][_0x4fdf66];if(_0x15ab0c){const _0x36624a=_0x15ab0c[_0x18c6de(0xc88)]['length'];_0x15ab0c['history']=_0x15ab0c['history'][_0x18c6de(0xde7)](_0x4de837=>!(_0x4de837[_0x18c6de(0x1559)]&&_0x4de837['role']===_0x18c6de(0x1417)&&_0x4de837['content']===_0x189a12)),_0x15ab0c['history'][_0x18c6de(0xac0)]<_0x36624a&&(console[_0x18c6de(0x4ee)](_0x18c6de(0x4a6)+_0x15ab0c[_0x18c6de(0x1023)]+_0x18c6de(0xdee)),await _0x372b85[_0x18c6de(0x1260)][_0x18c6de(0x11d5)](_0x15ab0c));}}}await _0x2ed925(_0x470bcd);}return;}const _0x48d7c0=_0x11ee56[_0x18c6de(0x187)](_0x18c6de(0x135b));if(_0x48d7c0){const _0x569fa6=_0x48d7c0[_0x18c6de(0x187)](_0x18c6de(0x86c));if(!_0x569fa6)return;const _0x4550c4=parseInt(_0x569fa6[_0x18c6de(0x8df)][_0x18c6de(0x3eb)]);_0x5cbe86['isOpen']&&_0x5cbe86[_0x18c6de(0xc78)]===_0x4550c4?_0x36b65a():_0xc124c(_0x4550c4,_0x48d7c0);return;}const _0x2b7a87=_0x11ee56[_0x18c6de(0x187)](_0x18c6de(0x2b6));if(_0x2b7a87){const _0x34b968=parseInt(_0x2b7a87[_0x18c6de(0x8df)]['postId']),_0x308120=_0x2b7a87[_0x18c6de(0x8df)][_0x18c6de(0x584)],_0x2f58d3=_0x2b7a87[_0x18c6de(0x8df)][_0x18c6de(0xdae)];if(!_0x308120||!_0x2f58d3||_0x308120===_0x8f0871[_0x18c6de(0x9dd)][_0x18c6de(0xff8)]){_0x4573f9(_0x2b7a87[_0x18c6de(0x187)]('.qzone-post-container'));return;}_0x5744d8={'postId':_0x34b968,'replyToName':_0x308120,'replyToDisplayName':_0x2f58d3};const _0x43cbdc=_0x2b7a87[_0x18c6de(0x187)](_0x18c6de(0x86c)),_0x576d86=_0x43cbdc['querySelector']('.comment-input');_0x576d86[_0x18c6de(0x14ca)]='回复\x20'+_0x2f58d3+':',_0x576d86[_0x18c6de(0x10c7)]();return;}if(_0x11ee56[_0x18c6de(0x128f)][_0x18c6de(0xea7)](_0x18c6de(0x93c))){const _0x330582=_0x11ee56['closest'](_0x18c6de(0x86c));if(_0x330582&&_0x330582['dataset'][_0x18c6de(0x3eb)])_0x75aa55(parseInt(_0x330582[_0x18c6de(0x8df)][_0x18c6de(0x3eb)]));return;}if(_0x11ee56['tagName']==='IMG'&&_0x11ee56[_0x18c6de(0x8df)][_0x18c6de(0xa0e)]){_0x4abd86(_0x18c6de(0x21d),_0x11ee56[_0x18c6de(0x8df)][_0x18c6de(0xa0e)]['replace'](/<br>/g,'\x0a'));return;}const _0x211a2e=_0x11ee56[_0x18c6de(0x187)](_0x18c6de(0x86c));if(!_0x211a2e)return;const _0x489667=parseInt(_0x211a2e[_0x18c6de(0x8df)]['postId']);if(isNaN(_0x489667))return;if(_0x11ee56['closest'](_0x18c6de(0xb9a))){const _0x4491dc=await _0x3f65ed(_0x18c6de(0xd21),_0x18c6de(0x6c0),{'confirmButtonClass':_0x18c6de(0x611)});_0x4491dc&&(_0x211a2e['style'][_0x18c6de(0x6a2)]=_0x18c6de(0xaa2),_0x211a2e[_0x18c6de(0x63b)]['transform']=_0x18c6de(0x153b),_0x211a2e[_0x18c6de(0x63b)][_0x18c6de(0xe7b)]='0',setTimeout(async()=>{const _0x9d54b0=_0x18c6de;await _0x372b85[_0x9d54b0(0x12c2)][_0x9d54b0(0xf10)](_0x489667);const _0x51f194=_0x9d54b0(0x82d)+_0x489667+')';for(const _0x516928 in _0x8f0871[_0x9d54b0(0x1260)]){const _0xa850eb=_0x8f0871['chats'][_0x516928],_0x1bc4eb=_0xa850eb[_0x9d54b0(0xc88)][_0x9d54b0(0xac0)];_0xa850eb[_0x9d54b0(0xc88)]=_0xa850eb[_0x9d54b0(0xc88)][_0x9d54b0(0xde7)](_0x39c915=>!(_0x39c915['role']===_0x9d54b0(0x1417)&&_0x39c915[_0x9d54b0(0x1469)]['includes'](_0x51f194)));if(_0xa850eb[_0x9d54b0(0xc88)][_0x9d54b0(0xac0)]<_0x1bc4eb)await _0x372b85[_0x9d54b0(0x1260)][_0x9d54b0(0x11d5)](_0xa850eb);}await _0x1098dc(),alert(_0x9d54b0(0xfd8));},0x12c));return;}const _0x7e303f=_0x11ee56[_0x18c6de(0x187)](_0x18c6de(0x80b));if(_0x7e303f){if(_0x7e303f[_0x18c6de(0x128f)][_0x18c6de(0xea7)](_0x18c6de(0xf20))){_0x114736(_0x489667);return;}if(_0x7e303f['classList'][_0x18c6de(0xea7)]('like')){const _0xb445e2=_0x4b4cc4['find'](_0x449c3e=>_0x449c3e['id']===_0x489667);if(!_0xb445e2)return;if(!_0xb445e2[_0x18c6de(0x48b)])_0xb445e2[_0x18c6de(0x48b)]=[];const _0xd6e042=_0x8f0871[_0x18c6de(0x9dd)][_0x18c6de(0xff8)],_0x306e35=_0xb445e2[_0x18c6de(0x48b)][_0x18c6de(0xdf3)](_0xd6e042);_0x306e35>-0x1?_0xb445e2[_0x18c6de(0x48b)][_0x18c6de(0x11ac)](_0x306e35,0x1):(_0xb445e2['likes'][_0x18c6de(0x481)](_0xd6e042),_0x7e303f['classList']['add'](_0x18c6de(0xae8)),_0x7e303f[_0x18c6de(0x7b8)](_0x18c6de(0xc9b),()=>_0x7e303f[_0x18c6de(0x128f)]['remove'](_0x18c6de(0xae8)),{'once':!![]})),await _0x372b85['qzonePosts'][_0x18c6de(0x1477)](_0x489667,{'likes':_0xb445e2[_0x18c6de(0x48b)]}),await _0x2ed925(_0x489667);}if(_0x7e303f[_0x18c6de(0x128f)][_0x18c6de(0xea7)]('favorite')){const _0x1b6fae=await _0x372b85[_0x18c6de(0xb69)]['where']({'type':_0x18c6de(0x1b9),'content.id':_0x489667})[_0x18c6de(0x102a)]();if(_0x1b6fae)await _0x372b85[_0x18c6de(0xb69)]['delete'](_0x1b6fae['id']),await _0x4abd86('提示',_0x18c6de(0xaba));else{const _0x5d7e97=await _0x372b85[_0x18c6de(0x12c2)]['get'](_0x489667);_0x5d7e97&&(await _0x372b85['favorites'][_0x18c6de(0x1327)]({'type':_0x18c6de(0x1b9),'content':_0x5d7e97,'timestamp':Date['now']()}),await _0x4abd86('提示',_0x18c6de(0x2f9)));}await _0x2ed925(_0x489667);}return;}const _0x1c40d5=_0x11ee56[_0x18c6de(0x187)](_0x18c6de(0x958));if(_0x1c40d5){const _0x16dbdc=_0x211a2e['querySelector'](_0x18c6de(0xe89)),_0x1734c7=_0x16dbdc['value'][_0x18c6de(0xa06)]();if(!_0x1734c7)return alert(_0x18c6de(0x9c3));const _0x251873=_0x4b4cc4['find'](_0x294db0=>_0x294db0['id']===_0x489667);if(!_0x251873)return;if(!_0x251873[_0x18c6de(0xbab)])_0x251873[_0x18c6de(0xbab)]=[];const _0x5095ac={'commenterName':_0x8f0871[_0x18c6de(0x9dd)]['nickname'],'text':_0x1734c7,'timestamp':Date[_0x18c6de(0xc22)](),'replyTo':_0x5744d8&&_0x5744d8[_0x18c6de(0x3eb)]===_0x489667?_0x5744d8[_0x18c6de(0x9c8)]:null};_0x251873[_0x18c6de(0xbab)][_0x18c6de(0x481)](_0x5095ac),await _0x372b85[_0x18c6de(0x12c2)][_0x18c6de(0x1477)](_0x489667,{'comments':_0x251873[_0x18c6de(0xbab)]});let _0x3f7a2e=(_0x251873[_0x18c6de(0x137f)]||_0x251873[_0x18c6de(0x1469)]||'')[_0x18c6de(0x9fe)](0x0,0x1e);const _0x4961fe=_0x8f0871['qzoneSettings'][_0x18c6de(0xff8)],_0x3f64d3=new Set();if(_0x251873[_0x18c6de(0x11dd)]!==_0x18c6de(0xcb0))_0x3f64d3['add'](_0x251873[_0x18c6de(0x11dd)]);if(_0x5095ac[_0x18c6de(0x5ee)]&&_0x5095ac[_0x18c6de(0x5ee)]!==_0x4961fe){const _0xb999d9=Object[_0x18c6de(0x142f)](_0x8f0871[_0x18c6de(0x1260)])[_0x18c6de(0x7ed)](_0x12823d=>_0x12823d[_0x18c6de(0x93e)]===_0x5095ac['replyTo']);if(_0xb999d9)_0x3f64d3[_0x18c6de(0x1327)](_0xb999d9['id']);}for(const _0x41a9fe of _0x3f64d3){const _0x36799e=_0x8f0871['chats'][_0x41a9fe];if(_0x36799e&&!_0x36799e[_0x18c6de(0x1364)]){const _0x566d2f=_0x8f0871[_0x18c6de(0x413)][_0x18c6de(0x7ed)](_0x37e4d3=>_0x37e4d3[_0x18c6de(0x3f5)]===_0x1734c7);let _0x2be609=_0x566d2f?'用户\x27'+_0x4961fe+_0x18c6de(0x138e)+_0x3f7a2e+_0x18c6de(0xf9b)+_0x566d2f[_0x18c6de(0x1023)]+'”。':_0x5095ac['replyTo']?_0x18c6de(0xeba)+_0x4961fe+_0x18c6de(0x138e)+_0x3f7a2e+_0x18c6de(0x12de)+_0x5744d8['replyToDisplayName']+_0x18c6de(0xea8)+_0x1734c7+'”。':'用户\x27'+_0x4961fe+_0x18c6de(0xab1)+_0x3f7a2e+_0x18c6de(0xa00)+_0x1734c7+'”。';const _0x836faf={'role':_0x18c6de(0x1417),'content':'[系统提示：'+_0x2be609+_0x18c6de(0x14c7),'timestamp':Date[_0x18c6de(0xc22)](),'isHidden':!![]};_0x36799e[_0x18c6de(0xc88)][_0x18c6de(0x481)](_0x836faf),await _0x372b85[_0x18c6de(0x1260)]['put'](_0x36799e);}}_0x16dbdc[_0x18c6de(0x4f6)]='',_0x4573f9(_0x211a2e),await _0x2ed925(_0x489667);return;}}const _0x4230f5=_0x48048d=>{const _0x785e8e=_0x2d2252,_0x100d89=_0x48048d[_0x785e8e(0x10c2)];if(_0x100d89[_0x785e8e(0x187)]('.post-footer,\x20.post-feedback-icons,\x20.post-actions-btn,\x20.post-comments-container,\x20.reposted-content-wrapper'))return;const _0x7e5bb2=_0x48048d[_0x785e8e(0x10c2)][_0x785e8e(0x187)](_0x785e8e(0x86c));if(!_0x7e5bb2)return;_0x3e1b4a(_0x7e5bb2),_0x291232['activeContainer']=_0x7e5bb2,_0x291232[_0x785e8e(0xdf1)]=!![],_0x291232[_0x785e8e(0x897)]=!![],_0x291232[_0x785e8e(0xf31)]=null,_0x291232[_0x785e8e(0x38f)]=_0x48048d['type'][_0x785e8e(0xf95)](_0x785e8e(0xb92))?_0x48048d['pageX']:_0x48048d[_0x785e8e(0x33f)][0x0][_0x785e8e(0xfc3)],_0x291232[_0x785e8e(0xe7f)]=_0x48048d['type']['includes'](_0x785e8e(0xb92))?_0x48048d[_0x785e8e(0x9f2)]:_0x48048d[_0x785e8e(0x33f)][0x0][_0x785e8e(0x9f2)],_0x291232[_0x785e8e(0x43e)]['querySelector'](_0x785e8e(0x150d))['style'][_0x785e8e(0x6a2)]=_0x785e8e(0x11b5),document[_0x785e8e(0x7b8)](_0x785e8e(0x31f),_0x360643),document['addEventListener'](_0x785e8e(0xefe),_0x61bfe9),document[_0x785e8e(0x7b8)](_0x785e8e(0x130b),_0x360643,{'passive':![]}),document['addEventListener'](_0x785e8e(0x61e),_0x61bfe9);},_0x360643=_0x2c88e1=>{const _0x292088=_0x2d2252;if(!_0x291232[_0x292088(0xdf1)]||!_0x291232['activeContainer'])return;const _0x3d6650=_0x2c88e1[_0x292088(0x682)]['includes'](_0x292088(0xb92))?_0x2c88e1[_0x292088(0xfc3)]:_0x2c88e1[_0x292088(0x33f)][0x0][_0x292088(0xfc3)],_0x3e0790=_0x2c88e1[_0x292088(0x682)][_0x292088(0xf95)]('mouse')?_0x2c88e1[_0x292088(0x9f2)]:_0x2c88e1[_0x292088(0x33f)][0x0]['pageY'],_0x171932=_0x3d6650-_0x291232[_0x292088(0x38f)],_0x2a1ace=_0x3e0790-_0x291232[_0x292088(0xe7f)];_0x291232[_0x292088(0x897)]&&(Math[_0x292088(0x705)](_0x171932)>0x5||Math['abs'](_0x2a1ace)>0x5)&&(_0x291232[_0x292088(0x897)]=![]);!_0x291232[_0x292088(0xf31)]&&(Math[_0x292088(0x705)](_0x171932)>Math['abs'](_0x2a1ace)?_0x291232[_0x292088(0xf31)]='horizontal':_0x291232[_0x292088(0xf31)]=_0x292088(0xa9d));if(_0x291232['swipeDirection']===_0x292088(0x10e2)){_0x2c88e1[_0x292088(0xdc1)](),_0x291232[_0x292088(0x132a)]=_0x3d6650;let _0x33326b=Math[_0x292088(0x28a)](0x0,Math[_0x292088(0xb70)](-0x5a,_0x171932));_0x291232[_0x292088(0x43e)]['querySelector'](_0x292088(0x150d))['style'][_0x292088(0x1268)]=_0x292088(0xcde)+_0x33326b+_0x292088(0x116f);}},_0x61bfe9=_0x153bd0=>{const _0x1744ad=_0x2d2252;document[_0x1744ad(0x73f)](_0x1744ad(0x31f),_0x360643),document[_0x1744ad(0x73f)](_0x1744ad(0xefe),_0x61bfe9),document['removeEventListener'](_0x1744ad(0x130b),_0x360643),document['removeEventListener']('touchend',_0x61bfe9);if(!_0x291232[_0x1744ad(0xdf1)]||!_0x291232['activeContainer'])return;const _0x1f2ba4=_0x291232[_0x1744ad(0x43e)]['querySelector']('.qzone-post-item');_0x1f2ba4[_0x1744ad(0x63b)][_0x1744ad(0x6a2)]=_0x1744ad(0x905);if(_0x291232['swipeDirection']===_0x1744ad(0x10e2)&&!_0x291232[_0x1744ad(0x897)]){const _0x37e907=_0x153bd0['type'][_0x1744ad(0xf95)](_0x1744ad(0x61e))?_0x153bd0[_0x1744ad(0xb47)][0x0][_0x1744ad(0xfc3)]:_0x153bd0[_0x1744ad(0xfc3)],_0x5b20e9=_0x37e907-_0x291232[_0x1744ad(0x38f)];_0x5b20e9<-0x28?_0x1f2ba4[_0x1744ad(0x128f)][_0x1744ad(0x1327)](_0x1744ad(0x1475)):_0x1f2ba4[_0x1744ad(0x128f)][_0x1744ad(0x443)](_0x1744ad(0x1475));}_0x1f2ba4[_0x1744ad(0x63b)]['transform']='',_0x291232[_0x1744ad(0xdf1)]=![],_0x291232[_0x1744ad(0x43e)]=null,_0x291232[_0x1744ad(0xf31)]=null,_0x291232['isClick']=!![];};_0x487b95[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x6f67d1),_0x487b95[_0x2d2252(0x7b8)]('mousedown',_0x4230f5),_0x487b95[_0x2d2252(0x7b8)](_0x2d2252(0x7d3),_0x4230f5,{'passive':!![]}),_0x487b95[_0x2d2252(0x7b8)]('click',_0x21b1ba=>{const _0x338a1f=_0x2d2252;_0x21b1ba[_0x338a1f(0x10c2)]&&_0x21b1ba[_0x338a1f(0x10c2)]['id']===_0x338a1f(0xe7e)&&_0x1656cf();}),document[_0x2d2252(0xfa0)]('refine-memory-btn-header')[_0x2d2252(0x7b8)]('click',()=>{const _0x463b9d=_0x2d2252;_0x8f0871[_0x463b9d(0xac8)]&&_0x14e61d(_0x8f0871[_0x463b9d(0xac8)]);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x6ea))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x415deb),document[_0x2d2252(0xfa0)](_0x2d2252(0xa74))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x4a6968),document[_0x2d2252(0xfa0)](_0x2d2252(0xec1))[_0x2d2252(0x7b8)]('click',_0x3de735),document[_0x2d2252(0xfa0)](_0x2d2252(0x738))['addEventListener']('click',()=>{const _0x1f14e7=_0x2d2252,_0xe38d18=document[_0x1f14e7(0xfa0)]('world-book-entries-container');_0xe38d18[_0x1f14e7(0xfb1)]('p')&&(_0xe38d18[_0x1f14e7(0x1331)]='');const _0x1bca03=_0x5bafca();_0xe38d18[_0x1f14e7(0x1155)](_0x1bca03),_0x1bca03[_0x1f14e7(0xfb1)](_0x1f14e7(0x12ca))[_0x1f14e7(0x10c7)]();}),document['getElementById'](_0x2d2252(0xbd0))[_0x2d2252(0x7b8)]('click',_0xe5717b),document['getElementById'](_0x2d2252(0xd54))[_0x2d2252(0x7b8)]('click',_0x42e1a9=>{const _0x1939a4=_0x2d2252;_0x42e1a9['target']&&_0x42e1a9['target']['id']===_0x1939a4(0xb0f)&&_0x9be5c2();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x64c))[_0x2d2252(0x7b8)]('click',_0x508c80),document['getElementById'](_0x2d2252(0x772))['addEventListener'](_0x2d2252(0xb4a),_0x4d2dbc),document[_0x2d2252(0xfa0)]('character-profile-modal')['addEventListener']('click',_0x18f83f=>{const _0xfa8611=_0x2d2252;_0x18f83f[_0xfa8611(0x10c2)]['id']==='character-profile-modal'&&_0x18f83f[_0xfa8611(0x10c2)][_0xfa8611(0x128f)][_0xfa8611(0x443)](_0xfa8611(0xdcc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1026))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x5295a1),document[_0x2d2252(0xfa0)]('delete-selected-stickers-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x79fae8),document[_0x2d2252(0xfa0)]('qzone-back-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>_0x33d681(_0x2d2252(0x230))),document[_0x2d2252(0xfa0)]('favorites-back-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>_0x33d681(_0x2d2252(0x230)));const _0x1ec33e=document[_0x2d2252(0xfa0)]('favorites-search-input'),_0x57e86d=document['getElementById'](_0x2d2252(0xd63));_0x1ec33e[_0x2d2252(0x7b8)](_0x2d2252(0x4cf),()=>{const _0x35c840=_0x2d2252,_0x50770d=_0x1ec33e[_0x35c840(0x4f6)][_0x35c840(0xa06)]()[_0x35c840(0x1f3)]();_0x57e86d[_0x35c840(0x63b)][_0x35c840(0x1248)]=_0x50770d?'block':_0x35c840(0x11b5);if(!_0x50770d){_0x2ca411(allFavoriteItems);return;}const _0x3c06cb=allFavoriteItems['filter'](_0x54948d=>{const _0x26f45f=_0x35c840;let _0x1edac8='',_0x57432d='';if(_0x54948d[_0x26f45f(0x682)]===_0x26f45f(0x1b9)){const _0x5b2746=_0x54948d['content'];_0x1edac8+=(_0x5b2746[_0x26f45f(0x137f)]||'')+'\x20'+(_0x5b2746[_0x26f45f(0x1469)]||'');if(_0x5b2746[_0x26f45f(0x11dd)]===_0x26f45f(0xcb0))_0x57432d=_0x8f0871['qzoneSettings'][_0x26f45f(0xff8)];else _0x8f0871[_0x26f45f(0x1260)][_0x5b2746['authorId']]&&(_0x57432d=_0x8f0871['chats'][_0x5b2746[_0x26f45f(0x11dd)]][_0x26f45f(0x1023)]);}else{if(_0x54948d[_0x26f45f(0x682)]===_0x26f45f(0x659)){const _0x25e8a1=_0x54948d['content'];typeof _0x25e8a1[_0x26f45f(0x1469)]===_0x26f45f(0x857)&&(_0x1edac8=_0x25e8a1[_0x26f45f(0x1469)]);const _0xb1cd23=_0x8f0871['chats'][_0x54948d[_0x26f45f(0xe94)]];_0xb1cd23&&(_0x25e8a1[_0x26f45f(0xc92)]===_0x26f45f(0xcb0)?_0x57432d=_0xb1cd23[_0x26f45f(0x1364)]?_0xb1cd23[_0x26f45f(0x12d7)][_0x26f45f(0xda5)]||'我':'我':_0x57432d=_0xb1cd23[_0x26f45f(0x1364)]?_0x25e8a1[_0x26f45f(0x213)]:_0xb1cd23[_0x26f45f(0x1023)]);}}return _0x1edac8['toLowerCase']()[_0x26f45f(0xf95)](_0x50770d)||_0x57432d[_0x26f45f(0x1f3)]()[_0x26f45f(0xf95)](_0x50770d);});_0x2ca411(_0x3c06cb);}),_0x57e86d[_0x2d2252(0x7b8)]('click',()=>{const _0x37f974=_0x2d2252;_0x1ec33e[_0x37f974(0x4f6)]='',_0x57e86d[_0x37f974(0x63b)]['display']=_0x37f974(0x11b5),_0x2ca411(allFavoriteItems),_0x1ec33e['focus']();}),document['getElementById']('selection-favorite-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x4529df=_0x2d2252;if(_0x552199['size']===0x0)return;const _0x33a4b7=_0x8f0871[_0x4529df(0x1260)][_0x8f0871[_0x4529df(0xac8)]];if(!_0x33a4b7)return;const _0x4e850b=[],_0x63f880=[..._0x552199];for(const _0x59812c of _0x63f880){const _0x43f6f0=await _0x372b85[_0x4529df(0xb69)][_0x4529df(0xdc7)](_0x4529df(0xc35))[_0x4529df(0x8c2)](_0x59812c)[_0x4529df(0x102a)]();if(!_0x43f6f0){const _0x1e9c82=_0x33a4b7[_0x4529df(0xc88)]['find'](_0x27d85b=>_0x27d85b['timestamp']===_0x59812c);_0x1e9c82&&_0x4e850b[_0x4529df(0x481)]({'type':'chat_message','content':_0x1e9c82,'chatId':_0x8f0871[_0x4529df(0xac8)],'timestamp':Date['now'](),'originalTimestamp':_0x1e9c82[_0x4529df(0xe55)]});}}_0x4e850b[_0x4529df(0xac0)]>0x0?(await _0x372b85[_0x4529df(0xb69)][_0x4529df(0x9b9)](_0x4e850b),allFavoriteItems=await _0x372b85[_0x4529df(0xb69)][_0x4529df(0x1554)](_0x4529df(0xe55))[_0x4529df(0xaf5)]()[_0x4529df(0x3bc)](),await _0x4abd86(_0x4529df(0x3c4),_0x4529df(0x7ca)+_0x4e850b[_0x4529df(0xac0)]+_0x4529df(0x64e))):await _0x4abd86('提示','选中的消息均已收藏过。'),_0x17a1e5();});const _0x443d66=document[_0x2d2252(0xfa0)]('favorites-edit-btn'),_0x9be757=document[_0x2d2252(0xfa0)](_0x2d2252(0x5cd)),_0x340feb=document[_0x2d2252(0xfa0)](_0x2d2252(0x7f2)),_0x1736c1=document['getElementById']('chat-list-bottom-nav'),_0x37a97e=document[_0x2d2252(0xfa0)](_0x2d2252(0x14fa));_0x443d66[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x1fa239=_0x2d2252;_0x2625e2=!_0x2625e2,_0x9be757[_0x1fa239(0x128f)][_0x1fa239(0xb80)](_0x1fa239(0x1503),_0x2625e2),_0x2625e2?(_0x443d66['textContent']='完成',_0x340feb[_0x1fa239(0x63b)][_0x1fa239(0x1248)]=_0x1fa239(0x127c),_0x1736c1[_0x1fa239(0x63b)][_0x1fa239(0x1248)]=_0x1fa239(0x11b5),_0x37a97e[_0x1fa239(0x63b)][_0x1fa239(0xe11)]=_0x1fa239(0xbfd)):(_0x443d66[_0x1fa239(0xc62)]='编辑',_0x340feb[_0x1fa239(0x63b)][_0x1fa239(0x1248)]=_0x1fa239(0x11b5),_0x1736c1[_0x1fa239(0x63b)][_0x1fa239(0x1248)]=_0x1fa239(0x138c),_0x37a97e[_0x1fa239(0x63b)][_0x1fa239(0xe11)]='',_0x88cc5e['clear'](),document[_0x1fa239(0x2a1)](_0x1fa239(0x1279))['forEach'](_0x110799=>_0x110799[_0x1fa239(0x128f)][_0x1fa239(0x443)](_0x1fa239(0xaa0))),document[_0x1fa239(0xfa0)](_0x1fa239(0x30a))['textContent']=_0x1fa239(0x63e));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x14fa))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x5a21bf=>{const _0x3e269c=_0x2d2252,_0x23e3d8=_0x5a21bf['target'],_0x738327=_0x23e3d8[_0x3e269c(0x187)](_0x3e269c(0x93d));if(_0x23e3d8[_0x3e269c(0x1351)]===_0x3e269c(0xfd0)&&_0x23e3d8[_0x3e269c(0x8df)][_0x3e269c(0xa0e)]){const _0x355437=_0x23e3d8[_0x3e269c(0x8df)][_0x3e269c(0xa0e)];_0x4abd86(_0x3e269c(0x21d),_0x355437[_0x3e269c(0x128a)](/<br>/g,'\x0a'));return;}if(!_0x2625e2)return;if(!_0x738327)return;const _0x2a2392=parseInt(_0x738327['dataset'][_0x3e269c(0xffb)]);if(isNaN(_0x2a2392))return;_0x88cc5e[_0x3e269c(0xd58)](_0x2a2392)?(_0x88cc5e[_0x3e269c(0xf10)](_0x2a2392),_0x738327[_0x3e269c(0x128f)]['remove'](_0x3e269c(0xaa0))):(_0x88cc5e[_0x3e269c(0x1327)](_0x2a2392),_0x738327[_0x3e269c(0x128f)][_0x3e269c(0x1327)]('selected')),document[_0x3e269c(0xfa0)](_0x3e269c(0x30a))['textContent']=_0x3e269c(0x668)+_0x88cc5e['size']+')';}),document[_0x2d2252(0xfa0)](_0x2d2252(0x30a))[_0x2d2252(0x7b8)]('click',async()=>{const _0x1b7546=_0x2d2252;if(_0x88cc5e[_0x1b7546(0xbc3)]===0x0)return;const _0xcbbc4a=await _0x3f65ed('确认删除','确定要从收藏夹中移除这\x20'+_0x88cc5e[_0x1b7546(0xbc3)]+_0x1b7546(0x14dc),{'confirmButtonClass':'btn-danger'});if(_0xcbbc4a){const _0x52f60e=[..._0x88cc5e];await _0x372b85[_0x1b7546(0xb69)][_0x1b7546(0x504)](_0x52f60e),await _0x4abd86(_0x1b7546(0xdd4),_0x1b7546(0xc52)),allFavoriteItems=allFavoriteItems[_0x1b7546(0xde7)](_0x2a9ba1=>!_0x52f60e[_0x1b7546(0xf95)](_0x2a9ba1['id'])),_0x2ca411(allFavoriteItems),_0x443d66[_0x1b7546(0xb4a)]();}});_0x8f0871['globalSettings'][_0x2d2252(0xb20)]&&(_0xc2280d(),console[_0x2d2252(0x4ee)](_0x2d2252(0x70f)));document[_0x2d2252(0x2a1)](_0x2d2252(0xdbc))['forEach'](_0x1fb1da=>{const _0x18f154=_0x2d2252;_0x1fb1da['addEventListener'](_0x18f154(0xca8),_0xb69a7a);});const _0x1d4ac7=document[_0x2d2252(0xfa0)](_0x2d2252(0xf69));_0x1d4ac7[_0x2d2252(0x7b8)](_0x2d2252(0x4cf),()=>{document['getElementById']('font-size-value')['textContent']=_0x1d4ac7['value']+'px',_0xb69a7a();});const _0x5de064=document[_0x2d2252(0xfa0)](_0x2d2252(0x96f));_0x5de064['addEventListener']('input',_0xb69a7a),document[_0x2d2252(0xfa0)](_0x2d2252(0x3ca))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0xd1c6e5=_0x2d2252;document['getElementById'](_0xd1c6e5(0x319))[_0xd1c6e5(0xb34)]=!![],_0xb69a7a();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x14a1))['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x5a3a0f=_0x2d2252;document[_0x5a3a0f(0xfa0)](_0x5a3a0f(0x96f))[_0x5a3a0f(0x4f6)]='',_0xb69a7a();}),document[_0x2d2252(0xfa0)]('lyrics-vertical-pos')['addEventListener'](_0x2d2252(0xca8),_0xb69a7a),document[_0x2d2252(0xfa0)](_0x2d2252(0x1109))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0xb69a7a),document[_0x2d2252(0xfa0)](_0x2d2252(0x10d5))[_0x2d2252(0x7b8)](_0x2d2252(0x4cf),_0xb69a7a),document[_0x2d2252(0x2a1)](_0x2d2252(0x1348))['forEach'](_0x2e52a0=>{const _0x45dbc3=_0x2d2252;_0x2e52a0[_0x45dbc3(0x7b8)](_0x45dbc3(0xca8),function(){const _0x4c8695=_0x45dbc3,_0x34a833=document[_0x4c8695(0xfa0)]('post-visibility-groups');this['value']===_0x4c8695(0x8f8)||this[_0x4c8695(0x4f6)]===_0x4c8695(0x561)?_0x34a833[_0x4c8695(0x63b)][_0x4c8695(0x1248)]=_0x4c8695(0x127c):_0x34a833['style'][_0x4c8695(0x1248)]=_0x4c8695(0x11b5);});}),document[_0x2d2252(0xfa0)](_0x2d2252(0x156e))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x1bb34a),document[_0x2d2252(0xfa0)]('close-group-manager-btn')['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x8659ee=_0x2d2252;document['getElementById'](_0x8659ee(0xfb9))['classList'][_0x8659ee(0x443)](_0x8659ee(0xdcc));const _0x3bfeb3=document[_0x8659ee(0xfa0)](_0x8659ee(0x6c6));document[_0x8659ee(0xfa0)](_0x8659ee(0xd8f))[_0x8659ee(0x128f)][_0x8659ee(0xea7)](_0x8659ee(0xdcc))&&_0x3bfeb3[_0x8659ee(0xb4a)]();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1042))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x3fa04b),document[_0x2d2252(0xfa0)](_0x2d2252(0x58e))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x2ab02c=>{const _0x22cb5f=_0x2d2252;if(_0x2ab02c['target']['classList']['contains'](_0x22cb5f(0x125c))){const _0x26ffb1=parseInt(_0x2ab02c['target'][_0x22cb5f(0x8df)]['id']);_0xb66be4(_0x26ffb1);}}),document[_0x2d2252(0xfa0)](_0x2d2252(0xd80))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x5b8bb0),document[_0x2d2252(0xfa0)](_0x2d2252(0x758))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x3d622d),document[_0x2d2252(0xfa0)](_0x2d2252(0xf27))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0xdc7534),document[_0x2d2252(0xfa0)](_0x2d2252(0x13f6))[_0x2d2252(0x7b8)]('click',_0xe0323b),document[_0x2d2252(0xfa0)]('select-message-btn')['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x4b8263=_0x5f3517;_0x5b8bb0(),_0x4b8263&&_0x278d51(_0x4b8263);}),document[_0x2d2252(0xfa0)]('chat-messages')[_0x2d2252(0x7b8)]('click',_0x525148=>{const _0x15d54d=_0x2d2252,_0x49e6e1=_0x525148[_0x15d54d(0x10c2)][_0x15d54d(0x187)](_0x15d54d(0x11e5));if(!_0x49e6e1)return;if(_0x49e6e1[_0x15d54d(0x128f)][_0x15d54d(0xea7)]('ai')&&_0x49e6e1['classList']['contains'](_0x15d54d(0xd27))&&_0x49e6e1[_0x15d54d(0x8df)][_0x15d54d(0x103e)]===_0x15d54d(0x2ea)){const _0x33a842=parseInt(_0x49e6e1['dataset'][_0x15d54d(0xe55)]);!isNaN(_0x33a842)&&_0x3a88c1(_0x33a842);}}),document['getElementById'](_0x2d2252(0x11b2))['addEventListener'](_0x2d2252(0xb4a),()=>_0x3502c7(_0x2d2252(0x13fd))),document[_0x2d2252(0xfa0)]('transfer-action-decline')['addEventListener']('click',()=>_0x3502c7('declined')),document[_0x2d2252(0xfa0)]('transfer-action-cancel')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x4fe60b),document[_0x2d2252(0xfa0)](_0x2d2252(0x1521))['addEventListener'](_0x2d2252(0xb4a),_0x404161),document[_0x2d2252(0xfa0)](_0x2d2252(0x103d))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x1db536),document[_0x2d2252(0xfa0)](_0x2d2252(0xfee))['addEventListener'](_0x2d2252(0xb4a),_0x28b37b),document['getElementById'](_0x2d2252(0xba8))['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x29c118=_0x2d2252;_0x2d25e5(_0x29c118(0x9e1));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x5aa))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x179e7d=>{const _0x2b5007=_0x2d2252,_0xa66e0e=_0x179e7d[_0x2b5007(0x10c2)][_0x2b5007(0x187)](_0x2b5007(0x10d2));if(!_0xa66e0e)return;const _0x2d262c=_0xa66e0e[_0x2b5007(0x8df)][_0x2b5007(0xdb5)];_0xa66e0e[_0x2b5007(0x128f)][_0x2b5007(0xb80)]('selected'),_0x29b69b[_0x2b5007(0xd58)](_0x2d262c)?_0x29b69b[_0x2b5007(0xf10)](_0x2d262c):_0x29b69b[_0x2b5007(0x1327)](_0x2d262c),_0x4ec665();}),document[_0x2d2252(0xfa0)]('manage-members-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{_0x4b7358();}),document['getElementById'](_0x2d2252(0xffe))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x1bb308=_0x2d2252;_0x2d25e5('chat-interface-screen'),document['getElementById'](_0x1bb308(0x6c6))[_0x1bb308(0xb4a)]();}),document[_0x2d2252(0xfa0)]('member-management-list')['addEventListener']('click',_0x55114b=>{const _0x2398e7=_0x2d2252;_0x55114b[_0x2398e7(0x10c2)]['classList'][_0x2398e7(0xea7)](_0x2398e7(0x938))&&_0x2fa3d7(_0x55114b['target'][_0x2398e7(0x8df)][_0x2398e7(0xb31)]);}),document[_0x2d2252(0xfa0)]('add-existing-contact-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x25ab36=_0x2d2252,_0x2a6c11=document[_0x25ab36(0xfa0)](_0x25ab36(0xd19)),_0x5313dc=_0x2a6c11['cloneNode'](!![]);_0x2a6c11[_0x25ab36(0xcdd)][_0x25ab36(0x5d2)](_0x5313dc,_0x2a6c11),_0x5313dc[_0x25ab36(0x7b8)](_0x25ab36(0xb4a),_0x1ed988),await _0xbe84b9();}),document['getElementById'](_0x2d2252(0x1a7))['addEventListener'](_0x2d2252(0xb4a),_0x4fc809),document[_0x2d2252(0xfa0)](_0x2d2252(0x57e))['addEventListener'](_0x2d2252(0xb4a),_0x1e2bde),document[_0x2d2252(0xfa0)](_0x2d2252(0x10c8))['addEventListener']('click',_0x1e2bde),document[_0x2d2252(0xfa0)]('hang-up-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x5862f2),document[_0x2d2252(0xfa0)](_0x2d2252(0x876))['addEventListener']('click',()=>{const _0x3f9a0e=_0x2d2252;_0x1fd843[_0x3f9a0e(0x1531)]=![],_0x2d25e5('chat-interface-screen');}),document[_0x2d2252(0xfa0)](_0x2d2252(0xa56))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x3b232e),document['getElementById'](_0x2d2252(0xaec))[_0x2d2252(0x7b8)]('click',async()=>{const _0x410cf6=_0x2d2252;_0x30746b();const _0x1f2fab=_0x8f0871['chats'][_0x1fd843[_0x410cf6(0xac8)]];if(!_0x1f2fab)return;if(_0x1fd843[_0x410cf6(0x24f)]){_0x1fd843['isUserParticipating']=![];const _0x5be269={'role':'system','content':'[系统提示：用户拒绝了通话邀请，但你们可以自己开始。请你们各自决策是否加入。]','timestamp':Date[_0x410cf6(0xc22)](),'isHidden':!![]};_0x1f2fab[_0x410cf6(0xc88)][_0x410cf6(0x481)](_0x5be269),await _0x372b85[_0x410cf6(0x1260)][_0x410cf6(0x11d5)](_0x1f2fab),await _0x2264b2();}else{const _0x5423a5={'role':_0x410cf6(0xcb0),'content':_0x410cf6(0x8c3),'timestamp':Date[_0x410cf6(0xc22)]()};_0x1f2fab['history'][_0x410cf6(0x481)](_0x5423a5),await _0x372b85[_0x410cf6(0x1260)][_0x410cf6(0x11d5)](_0x1f2fab),_0x2d25e5(_0x410cf6(0xe95)),_0x25d29f(_0x5423a5,_0x1f2fab),_0x2264b2();}_0x1fd843[_0x410cf6(0x1531)]=![];}),document[_0x2d2252(0xfa0)](_0x2d2252(0x12f0))[_0x2d2252(0x7b8)]('click',async()=>{const _0x132906=_0x2d2252;_0x30746b(),_0x1fd843[_0x132906(0x307)]='ai',_0x1fd843[_0x132906(0x3ab)]=!![],_0x1fd843['activeChatId']=_0x8f0871[_0x132906(0xac8)];if(_0x1fd843[_0x132906(0x24f)]){const _0x5911de=_0x8f0871[_0x132906(0x1260)][_0x1fd843[_0x132906(0xac8)]],_0x32b6fd=_0x5911de[_0x132906(0x2cf)][_0x132906(0x7ed)](_0x1e141f=>_0x1e141f[_0x132906(0x1023)]===_0x1fd843[_0x132906(0xdd2)]);_0x32b6fd?_0x1fd843[_0x132906(0xa81)]=[_0x32b6fd]:_0x1fd843['participants']=[];}_0x1b78aa();}),document['getElementById']('user-speak-btn')[_0x2d2252(0x7b8)]('click',async()=>{const _0x5c1f76=_0x2d2252;if(!_0x1fd843[_0x5c1f76(0x684)])return;const _0x1fe3fa=document[_0x5c1f76(0xfb1)](_0x5c1f76(0x787));_0x1fe3fa&&_0x1fe3fa[_0x5c1f76(0x128f)]['add'](_0x5c1f76(0xbb5));const _0xecc4a2=await _0x131a69('你说',_0x5c1f76(0x60b));_0x1fe3fa&&_0x1fe3fa[_0x5c1f76(0x128f)][_0x5c1f76(0x443)]('speaking'),_0xecc4a2&&_0xecc4a2[_0x5c1f76(0xa06)]()&&_0x2a42d0(_0xecc4a2[_0x5c1f76(0xa06)]());}),document[_0x2d2252(0xfb1)]('.nav-item[data-view=\x22memories-view\x22]')['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x3a05ef=_0x2d2252;_0x2625e2&&document[_0x3a05ef(0xfa0)](_0x3a05ef(0x12af))['click'](),_0x33d681(_0x3a05ef(0x25a)),_0xe87969();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x969))['addEventListener'](_0x2d2252(0xb4a),()=>_0x33d681(_0x2d2252(0x230))),document[_0x2d2252(0xfa0)](_0x2d2252(0x9c2))['addEventListener']('click',async()=>{const _0x2012e2=_0x2d2252,_0x5e330e=document[_0x2012e2(0xfa0)]('countdown-title-input')[_0x2012e2(0x4f6)][_0x2012e2(0xa06)](),_0x4100ed=document[_0x2012e2(0xfa0)]('countdown-date-input')['value'];if(!_0x5e330e||!_0x4100ed){alert('请填写完整的约定标题和日期！');return;}const _0x5464c5=new Date(_0x4100ed);if(isNaN(_0x5464c5)||_0x5464c5<=new Date()){alert(_0x2012e2(0x281));return;}const _0x5e561={'authorId':_0x2012e2(0xcb0),'description':_0x5e330e,'timestamp':Date[_0x2012e2(0xc22)](),'type':_0x2012e2(0x11a7),'targetDate':_0x5464c5[_0x2012e2(0x261)]()};await _0x372b85[_0x2012e2(0x9ce)][_0x2012e2(0x1327)](_0x5e561),document[_0x2012e2(0xfa0)](_0x2012e2(0xc0f))[_0x2012e2(0x128f)][_0x2012e2(0x443)]('visible'),_0xe87969();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x115f))['addEventListener'](_0x2d2252(0xb4a),async()=>{const _0x5bd8f4=_0x2d2252;if(!_0x8f0871['activeChatId']||_0x8f0871[_0x5bd8f4(0x1260)][_0x8f0871[_0x5bd8f4(0xac8)]][_0x5bd8f4(0x1364)])return;const _0xf89e77=_0x8f0871['chats'][_0x8f0871[_0x5bd8f4(0xac8)]],_0x46d20a=await _0x3f65ed('确认拉黑',_0x5bd8f4(0x68b)+_0xf89e77[_0x5bd8f4(0x1023)]+_0x5bd8f4(0x81f),{'confirmButtonClass':_0x5bd8f4(0x611)});if(_0x46d20a){_0xf89e77['relationship'][_0x5bd8f4(0x103e)]=_0x5bd8f4(0x1217),_0xf89e77[_0x5bd8f4(0x1171)]['blockedTimestamp']=Date[_0x5bd8f4(0xc22)]();const _0x48b362={'role':_0x5bd8f4(0x1417),'content':_0x5bd8f4(0x114b),'timestamp':Date[_0x5bd8f4(0xc22)]()+0x1,'isHidden':!![]};_0xf89e77['history'][_0x5bd8f4(0x481)](_0x48b362),await _0x372b85[_0x5bd8f4(0x1260)][_0x5bd8f4(0x11d5)](_0xf89e77),document[_0x5bd8f4(0xfa0)](_0x5bd8f4(0xd8f))[_0x5bd8f4(0x128f)]['remove'](_0x5bd8f4(0xdcc)),_0x54d32b(_0x8f0871[_0x5bd8f4(0xac8)]),_0x2d75fb();}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x285))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async _0x1f02a4=>{const _0x3d528f=_0x2d2252,_0x160c10=_0x8f0871[_0x3d528f(0x1260)][_0x8f0871[_0x3d528f(0xac8)]];if(!_0x160c10)return;if(_0x1f02a4[_0x3d528f(0x10c2)]['id']===_0x3d528f(0x279)){alert(_0x3d528f(0x1212)),await _0x7d41bb(_0x160c10['id']),_0x54d32b(_0x160c10['id']);return;}if(_0x1f02a4[_0x3d528f(0x10c2)]['id']===_0x3d528f(0xed6)){_0x160c10[_0x3d528f(0x1171)]['status']='friend',_0x160c10[_0x3d528f(0x1171)][_0x3d528f(0x334)]=null;const _0x27eb30={'role':_0x3d528f(0x1417),'content':_0x3d528f(0x669),'timestamp':Date[_0x3d528f(0xc22)](),'isHidden':!![]};_0x160c10[_0x3d528f(0xc88)][_0x3d528f(0x481)](_0x27eb30),await _0x372b85[_0x3d528f(0x1260)][_0x3d528f(0x11d5)](_0x160c10),_0x54d32b(_0x160c10['id']),_0x2d75fb(),_0x2264b2();}else{if(_0x1f02a4[_0x3d528f(0x10c2)]['id']==='accept-friend-btn'){_0x160c10[_0x3d528f(0x1171)][_0x3d528f(0x103e)]=_0x3d528f(0x14b5),_0x160c10['relationship'][_0x3d528f(0x1163)]='';const _0x4e0bb5={'role':_0x3d528f(0x1417),'type':_0x3d528f(0x260),'content':_0x3d528f(0x5e8)+_0x160c10['name']+_0x3d528f(0xe17),'timestamp':Date[_0x3d528f(0xc22)]()};_0x160c10['history'][_0x3d528f(0x481)](_0x4e0bb5);const _0x15756d={'role':_0x3d528f(0x10af),'senderName':_0x160c10[_0x3d528f(0x1023)],'content':_0x3d528f(0x106a),'timestamp':Date[_0x3d528f(0xc22)]()+0x1};_0x160c10[_0x3d528f(0xc88)][_0x3d528f(0x481)](_0x15756d),await _0x372b85[_0x3d528f(0x1260)][_0x3d528f(0x11d5)](_0x160c10),_0x54d32b(_0x160c10['id']),_0x2d75fb();}else{if(_0x1f02a4[_0x3d528f(0x10c2)]['id']===_0x3d528f(0x14c5))_0x160c10[_0x3d528f(0x1171)][_0x3d528f(0x103e)]='blocked_by_user',_0x160c10[_0x3d528f(0x1171)][_0x3d528f(0x334)]=Date[_0x3d528f(0xc22)](),_0x160c10[_0x3d528f(0x1171)]['applicationReason']='',await _0x372b85['chats'][_0x3d528f(0x11d5)](_0x160c10),_0x54d32b(_0x160c10['id']);else{if(_0x1f02a4[_0x3d528f(0x10c2)]['id']===_0x3d528f(0xaea)){const _0x5a4a60=await _0x131a69('发送好友申请',_0x3d528f(0x127e)+_0x160c10['name']+_0x3d528f(0xd85),'我们和好吧！');_0x5a4a60!==null&&(_0x160c10[_0x3d528f(0x1171)][_0x3d528f(0x103e)]=_0x3d528f(0xa2d),_0x160c10[_0x3d528f(0x1171)][_0x3d528f(0x1163)]=_0x5a4a60,await _0x372b85[_0x3d528f(0x1260)][_0x3d528f(0x11d5)](_0x160c10),_0x54d32b(_0x160c10['id']),_0x2d75fb(),_0x2264b2());}}}}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x9cc))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x4744a3),document[_0x2d2252(0xfa0)]('cancel-red-packet-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x9c1029=_0x2d2252;document[_0x9c1029(0xfa0)](_0x9c1029(0x11dc))['classList'][_0x9c1029(0x443)](_0x9c1029(0xdcc));}),document['getElementById'](_0x2d2252(0xd81))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x57a958),document['getElementById']('send-direct-packet-btn')[_0x2d2252(0x7b8)]('click',_0x453b3f);const _0x5705cd=document[_0x2d2252(0xfa0)](_0x2d2252(0x1403)),_0x493c9b=document['getElementById']('rp-tab-direct'),_0x168db4=document[_0x2d2252(0xfa0)](_0x2d2252(0x895)),_0x48ebfc=document[_0x2d2252(0xfa0)]('rp-content-direct');_0x5705cd[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x2b2ca2=_0x2d2252;_0x5705cd[_0x2b2ca2(0x128f)][_0x2b2ca2(0x1327)]('active'),_0x493c9b[_0x2b2ca2(0x128f)]['remove'](_0x2b2ca2(0xa37)),_0x168db4[_0x2b2ca2(0x63b)][_0x2b2ca2(0x1248)]=_0x2b2ca2(0x127c),_0x48ebfc['style'][_0x2b2ca2(0x1248)]=_0x2b2ca2(0x11b5);}),_0x493c9b[_0x2d2252(0x7b8)]('click',()=>{const _0x57dd7d=_0x2d2252;_0x493c9b[_0x57dd7d(0x128f)]['add'](_0x57dd7d(0xa37)),_0x5705cd[_0x57dd7d(0x128f)][_0x57dd7d(0x443)](_0x57dd7d(0xa37)),_0x48ebfc[_0x57dd7d(0x63b)][_0x57dd7d(0x1248)]=_0x57dd7d(0x127c),_0x168db4[_0x57dd7d(0x63b)][_0x57dd7d(0x1248)]='none';}),document['getElementById'](_0x2d2252(0x1404))['addEventListener'](_0x2d2252(0x4cf),_0x40d27a=>{const _0x51696c=_0x2d2252,_0x2f1a78=parseFloat(_0x40d27a[_0x51696c(0x10c2)]['value'])||0x0;document[_0x51696c(0xfa0)](_0x51696c(0x5e7))[_0x51696c(0xc62)]='¥\x20'+_0x2f1a78[_0x51696c(0x3b8)](0x2);}),document[_0x2d2252(0xfa0)](_0x2d2252(0xa90))[_0x2d2252(0x7b8)](_0x2d2252(0x4cf),_0x4ddd27=>{const _0x3b0e82=_0x2d2252,_0xf46821=parseFloat(_0x4ddd27[_0x3b0e82(0x10c2)][_0x3b0e82(0x4f6)])||0x0;document[_0x3b0e82(0xfa0)](_0x3b0e82(0xf36))['textContent']='¥\x20'+_0xf46821['toFixed'](0x2);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x142d))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x15c115=>{const _0x543e5e=_0x2d2252,_0x5c889b=_0x15c115[_0x543e5e(0x10c2)][_0x543e5e(0x187)](_0x543e5e(0x598));if(!_0x5c889b)return;const _0x176272=_0x5c889b[_0x543e5e(0x187)]('.message-bubble');if(!_0x176272||!_0x176272[_0x543e5e(0x8df)][_0x543e5e(0xe55)])return;const _0x4e544e=parseInt(_0x176272[_0x543e5e(0x8df)]['timestamp']);_0x5d3546(_0x4e544e);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x69a))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x3c856b),document[_0x2d2252(0xfa0)](_0x2d2252(0xab5))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x1c9700),document[_0x2d2252(0xfa0)](_0x2d2252(0x649))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x212129=_0x2d2252;document['getElementById'](_0x212129(0xfce))[_0x212129(0x128f)][_0x212129(0x443)](_0x212129(0xdcc));}),document['getElementById'](_0x2d2252(0xf18))['addEventListener'](_0x2d2252(0xb4a),_0x542332),document[_0x2d2252(0xfa0)](_0x2d2252(0x142d))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x42623d=>{const _0x13d698=_0x2d2252,_0x5e85f4=_0x42623d[_0x13d698(0x10c2)][_0x13d698(0x187)]('.poll-card');if(!_0x5e85f4)return;const _0x4e9aad=parseInt(_0x5e85f4[_0x13d698(0x8df)]['pollTimestamp']);if(isNaN(_0x4e9aad))return;const _0x43e0ce=_0x42623d['target'][_0x13d698(0x187)]('.poll-option-item');if(_0x43e0ce&&!_0x5e85f4[_0x13d698(0x128f)][_0x13d698(0xea7)](_0x13d698(0xf6e))){_0x12d40b(_0x4e9aad,_0x43e0ce[_0x13d698(0x8df)][_0x13d698(0x327)]);return;}const _0x2c7582=_0x42623d[_0x13d698(0x10c2)][_0x13d698(0x187)](_0x13d698(0x9df));if(_0x2c7582){_0x5e85f4[_0x13d698(0x128f)][_0x13d698(0xea7)](_0x13d698(0xf6e))?_0x5449d1(_0x4e9aad):_0x25e072(_0x4e9aad);return;}_0x5e85f4[_0x13d698(0x128f)][_0x13d698(0xea7)](_0x13d698(0xf6e))&&_0x5449d1(_0x4e9aad);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x12e5))['addEventListener']('click',_0x4f0778),document['getElementById']('add-ai-avatar-batch-btn')['addEventListener'](_0x2d2252(0xb4a),()=>_0x36fa48('ai')),document[_0x2d2252(0xfa0)]('add-group-avatar-batch-btn')['addEventListener'](_0x2d2252(0xb4a),()=>_0x36fa48(_0x2d2252(0x14ae))),document[_0x2d2252(0xfa0)]('add-ai-avatar-url-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x12c2a0),document['getElementById']('add-ai-avatar-upload-btn')[_0x2d2252(0x7b8)]('click',()=>{const _0x23cc4c=_0x2d2252;document[_0x23cc4c(0xfa0)](_0x23cc4c(0xea4))[_0x23cc4c(0xb4a)]();}),document[_0x2d2252(0xfa0)](_0x2d2252(0xea4))['addEventListener'](_0x2d2252(0xca8),_0x2f1843),document[_0x2d2252(0xfa0)](_0x2d2252(0x10fd))['addEventListener']('click',_0x3e9149),document[_0x2d2252(0xfa0)](_0x2d2252(0xe46))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x3a0ed1),document[_0x2d2252(0xfa0)](_0x2d2252(0xe41))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x101f44),document[_0x2d2252(0xfa0)](_0x2d2252(0x7a5))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x3f4e2d=_0x2d2252;document[_0x3f4e2d(0xfa0)]('group-avatar-upload-input')[_0x3f4e2d(0xb4a)]();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x152a))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x572acd),document[_0x2d2252(0xfa0)](_0x2d2252(0xc30))['addEventListener'](_0x2d2252(0xb4a),_0x1b7c4c),document[_0x2d2252(0xfa0)]('icon-settings-grid')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x5d9927=>{const _0x1877b5=_0x2d2252;if(_0x5d9927[_0x1877b5(0x10c2)]['classList'][_0x1877b5(0xea7)]('change-icon-btn')){const _0x5e37f9=_0x5d9927[_0x1877b5(0x10c2)][_0x1877b5(0x187)](_0x1877b5(0xd0a)),_0x35e2ae=_0x5e37f9['dataset']['iconId'];_0x35e2ae&&_0x4745b8(_0x35e2ae,_0x1877b5(0x118d),_0x5e37f9);}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x142d))['addEventListener'](_0x2d2252(0xb4a),_0x12382c=>{const _0x170c79=_0x2d2252,_0x3aba6b=_0x12382c[_0x170c79(0x10c2)]['closest']('.link-share-card');if(_0x3aba6b){const _0x34e602=parseInt(_0x3aba6b[_0x170c79(0x8df)]['timestamp']);!isNaN(_0x34e602)&&_0x49d5c4(_0x34e602);}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x9f8))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{_0x2d25e5('chat-interface-screen');}),_0x5cbe86[_0x2d2252(0x120c)]['addEventListener'](_0x2d2252(0xb4a),async _0x4e436d=>{const _0x1b45ca=_0x2d2252,_0x31fbb5=_0x4e436d[_0x1b45ca(0x10c2)][_0x1b45ca(0x187)](_0x1b45ca(0x91a));if(_0x31fbb5&&_0x5cbe86[_0x1b45ca(0xc78)]!==null){const _0x199eac=_0x31fbb5[_0x1b45ca(0x63b)]['backgroundImage'][_0x1b45ca(0x59f)](0x5,-0x2),_0x5f068d=_0x8f0871['userStickers'][_0x1b45ca(0x7ed)](_0x47ea41=>_0x47ea41['url']===_0x199eac);_0x5f068d?await _0x4ff289(_0x5cbe86['activePostId'],_0x5f068d):console[_0x1b45ca(0x7fa)](_0x1b45ca(0x35e),_0x199eac);}}),document[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x5cde2c=>{const _0x2bda08=_0x2d2252;_0x5cbe86['isOpen']&&!_0x5cbe86[_0x2bda08(0x120c)][_0x2bda08(0xea7)](_0x5cde2c[_0x2bda08(0x10c2)])&&!_0x5cde2c[_0x2bda08(0x10c2)]['closest'](_0x2bda08(0x135b))&&_0x36b65a();}),document[_0x2d2252(0xfa0)](_0x2d2252(0xfc7))[_0x2d2252(0x7b8)]('click',_0x55634c),document[_0x2d2252(0xfa0)](_0x2d2252(0xb88))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x1ebcfc=_0x2d2252;document[_0x1ebcfc(0xfa0)](_0x1ebcfc(0x14f3))[_0x1ebcfc(0x128f)][_0x1ebcfc(0x443)](_0x1ebcfc(0xdcc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0xb37))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x879285),document[_0x2d2252(0xfa0)](_0x2d2252(0x11fc))['addEventListener'](_0x2d2252(0xca8),_0x3102b5),document[_0x2d2252(0xfa0)]('share-location-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x143a64),document[_0x2d2252(0xfa0)](_0x2d2252(0x912))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x2e99cb),document[_0x2d2252(0xfa0)](_0x2d2252(0xd9b))[_0x2d2252(0x7b8)]('click',()=>{const _0x321f00=_0x2d2252;_0x2d25e5(_0x321f00(0x9e1));}),document[_0x2d2252(0xfa0)](_0x2d2252(0xa04))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x5a8d97=>{const _0x34d1a2=_0x2d2252,_0x5b3387=_0x5a8d97[_0x34d1a2(0x10c2)][_0x34d1a2(0x187)](_0x34d1a2(0x1c6));_0x5b3387&&_0x5b3387[_0x34d1a2(0x8df)][_0x34d1a2(0x615)]&&_0x20bdf6(parseInt(_0x5b3387[_0x34d1a2(0x8df)][_0x34d1a2(0x615)]));}),document['getElementById'](_0x2d2252(0x344))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x304602=_0x2d2252;document['getElementById'](_0x304602(0x287))['classList'][_0x304602(0x443)](_0x304602(0xdcc));}),document['getElementById'](_0x2d2252(0x3c0))[_0x2d2252(0x7b8)]('click',_0x3b6b01),document['getElementById'](_0x2d2252(0x20c))[_0x2d2252(0x7b8)]('click',()=>{const _0x520b72=_0x2d2252;_0x552199[_0x520b72(0xbc3)]>0x0&&_0x4d3096();}),document[_0x2d2252(0xfa0)]('selection-screenshot-btn')[_0x2d2252(0x7b8)]('click',_0x215390),document[_0x2d2252(0xfa0)](_0x2d2252(0x8c7))['addEventListener'](_0x2d2252(0xb4a),async()=>{const _0x297a23=_0x2d2252,_0x2f600b=_0x8f0871['chats'][_0x8f0871[_0x297a23(0xac8)]],_0x19caec=Array['from'](document[_0x297a23(0x2a1)](_0x297a23(0x1222)))[_0x297a23(0x556)](_0x7d8172=>_0x7d8172[_0x297a23(0x8df)][_0x297a23(0xe94)]);if(_0x19caec[_0x297a23(0xac0)]===0x0){alert(_0x297a23(0xca9));return;}const _0x17924c=[],_0x4baf73=[..._0x552199][_0x297a23(0x1376)]((_0x4f185e,_0x158988)=>_0x4f185e-_0x158988);for(const _0x477468 of _0x4baf73){const _0x5cfe27=_0x2f600b[_0x297a23(0xc88)][_0x297a23(0x7ed)](_0x12997d=>_0x12997d[_0x297a23(0xe55)]===_0x477468);_0x5cfe27&&_0x17924c['push'](_0x5cfe27);}const _0x27ee7f={'role':_0x297a23(0xcb0),'senderName':_0x2f600b['isGroup']?_0x2f600b[_0x297a23(0x12d7)][_0x297a23(0xda5)]||'我':'我','type':_0x297a23(0x5c7),'timestamp':Date[_0x297a23(0xc22)](),'payload':{'sourceChatName':_0x2f600b[_0x297a23(0x1023)],'title':_0x297a23(0xd98)+_0x2f600b['name']+_0x297a23(0xc50),'sharedHistory':_0x17924c}};for(const _0x486763 of _0x19caec){const _0x431336=_0x8f0871[_0x297a23(0x1260)][_0x486763];_0x431336&&(_0x431336['history'][_0x297a23(0x481)](_0x27ee7f),await _0x372b85['chats'][_0x297a23(0x11d5)](_0x431336));}document['getElementById'](_0x297a23(0xafa))[_0x297a23(0x128f)][_0x297a23(0x443)](_0x297a23(0xdcc)),_0x17a1e5(),await _0x4abd86('分享成功',_0x297a23(0x82a)+_0x19caec[_0x297a23(0xac0)]+_0x297a23(0x6f8)),_0x2d75fb();}),document[_0x2d2252(0xfa0)]('cancel-share-target-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x73ad8b=_0x2d2252;document[_0x73ad8b(0xfa0)](_0x73ad8b(0xafa))[_0x73ad8b(0x128f)]['remove']('visible');}),document[_0x2d2252(0xfa0)](_0x2d2252(0x142d))[_0x2d2252(0x7b8)]('click',_0x1b967d=>{const _0x37ba08=_0x2d2252,_0x2379ec=_0x1b967d[_0x37ba08(0x10c2)][_0x37ba08(0x187)](_0x37ba08(0x3a1));if(_0x2379ec&&_0x2379ec[_0x37ba08(0x187)]('.message-bubble.is-link-share')){const _0x3e95cc=parseInt(_0x2379ec[_0x37ba08(0x8df)][_0x37ba08(0xe55)]);_0x14e732(_0x3e95cc);}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x8b8))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x3413fa=_0x2d2252;document[_0x3413fa(0xfa0)](_0x3413fa(0x1564))[_0x3413fa(0x128f)][_0x3413fa(0x443)](_0x3413fa(0xdcc));});async function _0x14e732(_0x2508c8){const _0x4eae0d=_0x2d2252,_0x5cbecc=_0x8f0871[_0x4eae0d(0x1260)][_0x8f0871[_0x4eae0d(0xac8)]];if(!_0x5cbecc)return;const _0x2e346f=_0x5cbecc[_0x4eae0d(0xc88)][_0x4eae0d(0x7ed)](_0x5a4dee=>_0x5a4dee[_0x4eae0d(0xe55)]===_0x2508c8);if(!_0x2e346f){console[_0x4eae0d(0x52b)](_0x4eae0d(0xf44),_0x2508c8),await _0x4abd86(_0x4eae0d(0x12cc),'无法找到对应的分享记录或记录已损坏。');return;}if(_0x2e346f['type']===_0x4eae0d(0x8c1)){_0x49d5c4(_0x2508c8);return;}if(_0x2e346f['type']===_0x4eae0d(0x5c7)){if(!_0x2e346f[_0x4eae0d(0xd0d)]||!_0x2e346f[_0x4eae0d(0xd0d)][_0x4eae0d(0xe36)]){console['error'](_0x4eae0d(0x442),_0x2e346f),await _0x4abd86(_0x4eae0d(0x12cc),'分享的聊天记录已损坏。');return;}}else{console['error']('未知的分享卡片类型:',_0x2e346f['type']),await _0x4abd86('查看失败','不支持的分享类型。');return;}const _0x24b0f9=document['getElementById']('shared-history-viewer-modal'),_0x2c479f=document[_0x4eae0d(0xfa0)]('shared-history-viewer-title'),_0x248c6d=document[_0x4eae0d(0xfa0)](_0x4eae0d(0x113f));_0x2c479f[_0x4eae0d(0xc62)]=_0x2e346f[_0x4eae0d(0xd0d)][_0x4eae0d(0x1187)],_0x248c6d[_0x4eae0d(0x1331)]='';const _0x80f9cd=document[_0x4eae0d(0x491)](),_0x48d271=Object[_0x4eae0d(0x142f)](_0x8f0871[_0x4eae0d(0x1260)])[_0x4eae0d(0x7ed)](_0x51b5f0=>_0x51b5f0[_0x4eae0d(0x1023)]===_0x2e346f[_0x4eae0d(0xd0d)]['sourceChatName'])||_0x5cbecc;for(const _0xf6f890 of _0x2e346f['payload'][_0x4eae0d(0xe36)]){const _0x20b512=await _0x20ac60(_0xf6f890,_0x48d271);_0x20b512&&_0x80f9cd[_0x4eae0d(0x1155)](_0x20b512);}_0x248c6d[_0x4eae0d(0x1155)](_0x80f9cd),_0x24b0f9[_0x4eae0d(0x128f)][_0x4eae0d(0x1327)]('visible');}_0x447ac1[_0x2d2252(0x7b8)]('timeupdate',_0xc54d74),_0x447ac1[_0x2d2252(0x7b8)]('pause',()=>{const _0x2fd19d=_0x2d2252;_0x46bc8b[_0x2fd19d(0x684)]&&(_0x46bc8b[_0x2fd19d(0xcc5)]=![],_0x139f8a());}),_0x447ac1['addEventListener'](_0x2d2252(0xfe3),()=>{const _0x9170ff=_0x2d2252;_0x46bc8b[_0x9170ff(0x684)]&&(_0x46bc8b['isPlaying']=!![],_0x139f8a());}),document['getElementById']('playlist-body')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async _0x132ba7=>{const _0x2062f1=_0x2d2252,_0x2e77db=_0x132ba7[_0x2062f1(0x10c2)],_0x4f9630=_0x2e77db[_0x2062f1(0x187)]('.album-art-btn');if(_0x4f9630){const _0x2bc31b=parseInt(_0x4f9630['dataset'][_0x2062f1(0x874)]);!isNaN(_0x2bc31b)&&await _0x4f232a(_0x2bc31b);return;}const _0x596fa9=_0x2e77db[_0x2062f1(0x187)](_0x2062f1(0x12db));if(_0x596fa9){const _0xd8a19a=parseInt(_0x596fa9['dataset'][_0x2062f1(0x874)]);if(isNaN(_0xd8a19a))return;await _0x19e41e(_0xd8a19a);return;}const _0x287848=_0x2e77db[_0x2062f1(0x187)](_0x2062f1(0x4d3));if(_0x287848){const _0x595865=parseInt(_0x287848['dataset'][_0x2062f1(0x874)]);if(isNaN(_0x595865))return;const _0xf11981=_0x46bc8b[_0x2062f1(0x84a)][_0x595865],_0x176a7e=await _0x3f65ed(_0x2062f1(0xfd9),_0x2062f1(0x133a)+_0xf11981[_0x2062f1(0x1023)]+_0x2062f1(0x53d));_0x176a7e&&_0xaf2707(_0x595865);return;}const _0x3e694a=_0x2e77db[_0x2062f1(0x187)](_0x2062f1(0xce5));if(_0x3e694a){const _0x54180c=_0x3e694a[_0x2062f1(0x187)](_0x2062f1(0x155c)),_0x19fe78=Array[_0x2062f1(0x3aa)](_0x54180c[_0x2062f1(0xa31)][_0x2062f1(0x360)])['indexOf'](_0x54180c);_0x19fe78>-0x1&&_0x3687be(_0x19fe78);}}),document[_0x2d2252(0xfb1)](_0x2d2252(0x672))[_0x2d2252(0x7b8)]('click',_0x1ac325=>{const _0x4428ae=_0x2d2252;if(!_0x447ac1[_0x4428ae(0x11c7)])return;const _0x17b08b=_0x1ac325[_0x4428ae(0x536)],_0x5e5ddd=_0x17b08b[_0x4428ae(0xa41)],_0x241b9b=_0x1ac325[_0x4428ae(0x74b)];_0x447ac1[_0x4428ae(0x1495)]=_0x241b9b/_0x5e5ddd*_0x447ac1[_0x4428ae(0x11c7)];}),document['getElementById']('chat-messages')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x3a52a7=>{const _0x24d834=_0x2d2252,_0x1064a4=_0x3a52a7[_0x24d834(0x10c2)][_0x24d834(0x187)](_0x24d834(0xa9a));if(_0x1064a4){const _0x379b75=_0x8f0871[_0x24d834(0x1260)][_0x8f0871[_0x24d834(0xac8)]],_0x18235b=_0x1064a4[_0x24d834(0x187)](_0x24d834(0xf77));if(_0x379b75&&_0x18235b){const _0x192d9b=parseInt(_0x18235b[_0x24d834(0x8df)][_0x24d834(0xe55)]),_0x46a802=_0x379b75['history'][_0x24d834(0x7ed)](_0x5b6462=>_0x5b6462[_0x24d834(0xe55)]===_0x192d9b);if(_0x46a802&&_0x46a802[_0x24d834(0xc98)]){let _0xdea6d8='';const _0x3daed9=_0x46a802[_0x24d834(0xc98)];switch(_0x3daed9[_0x24d834(0x1a3)]){case'text':_0xdea6d8='原文:\x20\x22'+_0x3daed9[_0x24d834(0x297)]+'\x22';break;case _0x24d834(0x838):case _0x24d834(0x8b0):case _0x24d834(0x12d0):_0xdea6d8=_0x24d834(0x991)+_0x3daed9['originalContent']+'\x22';break;case _0x24d834(0x412):_0xdea6d8=_0x24d834(0xff2)+_0x3daed9[_0x24d834(0x297)]+'\x22';break;case _0x24d834(0xf14):_0xdea6d8=_0x24d834(0x299)+(_0x3daed9['originalMeaning']||'(无)')+_0x24d834(0x989)+_0x3daed9[_0x24d834(0x297)];break;case _0x24d834(0x35f):_0xdea6d8='一条[转账]消息已被撤回。';break;default:_0xdea6d8=_0x24d834(0x10a2)+_0x3daed9[_0x24d834(0x1a3)]+_0x24d834(0x1125)+JSON[_0x24d834(0x7cc)](_0x3daed9[_0x24d834(0x297)]);break;}_0x4abd86('已撤回的消息',_0xdea6d8);}}}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x3a4))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x3338b2),document['getElementById'](_0x2d2252(0xff9))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x9c7ec3=_0x2d2252;document[_0x9c7ec3(0xfa0)]('world-book-category-manager-modal')[_0x9c7ec3(0x128f)][_0x9c7ec3(0x443)](_0x9c7ec3(0xdcc)),_0xc4183b();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x155e))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x5887c9),document[_0x2d2252(0xfa0)](_0x2d2252(0x143c))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x4102ea=>{const _0x40280e=_0x2d2252;if(_0x4102ea[_0x40280e(0x10c2)][_0x40280e(0x128f)][_0x40280e(0xea7)](_0x40280e(0x125c))){const _0x1720b5=parseInt(_0x4102ea['target'][_0x40280e(0x8df)]['id']);_0x48f0e4(_0x1720b5);}}),document[_0x2d2252(0xfa0)](_0x2d2252(0xdd8))['addEventListener']('click',_0x227d26),document[_0x2d2252(0xfa0)](_0x2d2252(0x2a6))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x88ec39),document[_0x2d2252(0xfa0)](_0x2d2252(0xa71))[_0x2d2252(0x7b8)]('click',_0x11541b),document[_0x2d2252(0xfa0)](_0x2d2252(0x1253))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x339877),document[_0x2d2252(0xfa0)](_0x2d2252(0x108e))[_0x2d2252(0x7b8)](_0x2d2252(0x4cf),_0x8ebef9=>{const _0x29479f=_0x2d2252;if(!_0x8ebef9[_0x29479f(0x10c2)]['matches']('.comment-input'))return;const _0x3f9b8c=_0x8ebef9[_0x29479f(0x10c2)],_0x4cb091=_0x3f9b8c[_0x29479f(0x187)](_0x29479f(0x86c));if(!_0x4cb091)return;const _0x5d1c12=_0x4cb091[_0x29479f(0xfb1)](_0x29479f(0x111f)),_0xe3c7b2=_0x3f9b8c['value'],_0x8251f9=_0xe3c7b2[_0x29479f(0x1232)](/@([\p{L}\w]*)$/u);if(_0x8251f9){const _0x2d6bb0=new Set(),_0x1799a0=_0x4cb091[_0x29479f(0xfb1)](_0x29479f(0x10a0))?.[_0x29479f(0xc62)];if(_0x1799a0)_0x2d6bb0[_0x29479f(0x1327)](_0x1799a0);_0x4cb091['querySelectorAll'](_0x29479f(0xe16))[_0x29479f(0x458)](_0x2bc735=>{const _0x416b00=_0x29479f;_0x2d6bb0[_0x416b00(0x1327)](_0x2bc735[_0x416b00(0xc62)][_0x416b00(0x128a)](':',''));}),_0x2d6bb0[_0x29479f(0xf10)](_0x8f0871['qzoneSettings'][_0x29479f(0xff8)]),_0x5d1c12['innerHTML']='';if(_0x2d6bb0['size']>0x0){const _0x429af1=_0x8251f9[0x1];_0x2d6bb0[_0x29479f(0x458)](_0x39889f=>{const _0x11dbf8=_0x29479f;if(_0x39889f[_0x11dbf8(0x1f3)]()[_0x11dbf8(0xf95)](_0x429af1['toLowerCase']())){const _0x3104ca=document['createElement']('div');_0x3104ca[_0x11dbf8(0x1287)]=_0x11dbf8(0x14fd),_0x3104ca[_0x11dbf8(0xc62)]=_0x39889f,_0x3104ca[_0x11dbf8(0x7b8)](_0x11dbf8(0xbea),_0x53db9f=>{const _0x1e2635=_0x11dbf8;_0x53db9f[_0x1e2635(0xdc1)]();const _0x24f63f=_0xe3c7b2['substring'](0x0,_0x8251f9[_0x1e2635(0x874)])+('@'+_0x39889f+'\x20');_0x3f9b8c[_0x1e2635(0x4f6)]=_0x24f63f,_0x5d1c12['style']['display']='none',_0x3f9b8c[_0x1e2635(0x10c7)]();}),_0x5d1c12['appendChild'](_0x3104ca);}}),_0x5d1c12[_0x29479f(0x63b)][_0x29479f(0x1248)]=_0x5d1c12[_0x29479f(0x360)][_0x29479f(0xac0)]>0x0?_0x29479f(0x127c):'none';}else _0x5d1c12[_0x29479f(0x63b)][_0x29479f(0x1248)]=_0x29479f(0x11b5);}else _0x5d1c12[_0x29479f(0x63b)][_0x29479f(0x1248)]=_0x29479f(0x11b5);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x108e))[_0x2d2252(0x7b8)](_0x2d2252(0x107c),_0x58e48d=>{const _0x36db2b=_0x2d2252;if(_0x58e48d['target']['matches'](_0x36db2b(0xe89))){const _0x3db67b=_0x58e48d[_0x36db2b(0x10c2)][_0x36db2b(0x187)](_0x36db2b(0x86c));if(_0x3db67b){const _0x23d249=_0x3db67b[_0x36db2b(0xfb1)]('.at-mention-popup');_0x23d249&&setTimeout(()=>{const _0x43c6c5=_0x36db2b;_0x23d249[_0x43c6c5(0x63b)][_0x43c6c5(0x1248)]=_0x43c6c5(0x11b5);},0xc8);}}});const _0x21d198=document[_0x2d2252(0xfa0)](_0x2d2252(0x127a)),_0x20384a=document[_0x2d2252(0xfa0)](_0x2d2252(0x7ff));_0x21d198[_0x2d2252(0x7b8)](_0x2d2252(0x4cf),()=>{const _0x54ace8=_0x2d2252;if(!_0x8f0871[_0x54ace8(0xac8)]||!_0x8f0871['chats'][_0x8f0871[_0x54ace8(0xac8)]][_0x54ace8(0x1364)]){_0x20384a[_0x54ace8(0x63b)]['display']=_0x54ace8(0x11b5);return;}const _0x3b491d=_0x8f0871[_0x54ace8(0x1260)][_0x8f0871[_0x54ace8(0xac8)]],_0x4231fd=_0x21d198['value'],_0x37bfea=_0x4231fd[_0x54ace8(0x1232)](/@([\p{L}\w]*)$/u);if(_0x37bfea){const _0x51d875=_0x3b491d[_0x54ace8(0x12d7)][_0x54ace8(0xda5)]||'我',_0x1c3e2a=_0x3b491d[_0x54ace8(0x2cf)][_0x54ace8(0x556)](_0x3cc277=>_0x3cc277[_0x54ace8(0x5c9)])['filter'](_0x3e1137=>_0x3e1137!==_0x51d875);_0x20384a[_0x54ace8(0x1331)]='';if(_0x1c3e2a['length']>0x0){const _0x1816f5=_0x37bfea[0x1];_0x1c3e2a[_0x54ace8(0x458)](_0xd25da3=>{const _0xe9c201=_0x54ace8;if(_0xd25da3[_0xe9c201(0x1f3)]()[_0xe9c201(0xf95)](_0x1816f5['toLowerCase']())){const _0x51d5c6=document[_0xe9c201(0xb4e)](_0xe9c201(0xd53));_0x51d5c6[_0xe9c201(0x1287)]=_0xe9c201(0x14fd),_0x51d5c6[_0xe9c201(0xc62)]=_0xd25da3,_0x51d5c6[_0xe9c201(0x7b8)]('mousedown',_0x4bd48b=>{const _0x34fcb0=_0xe9c201;_0x4bd48b['preventDefault']();const _0x5b7239=_0x4231fd[_0x34fcb0(0x9fe)](0x0,_0x37bfea[_0x34fcb0(0x874)])+('@'+_0xd25da3+'\x20');_0x21d198['value']=_0x5b7239,_0x20384a[_0x34fcb0(0x63b)]['display']=_0x34fcb0(0x11b5),_0x21d198[_0x34fcb0(0x10c7)]();}),_0x20384a[_0xe9c201(0x1155)](_0x51d5c6);}}),_0x20384a[_0x54ace8(0x63b)]['display']=_0x20384a['children'][_0x54ace8(0xac0)]>0x0?_0x54ace8(0x127c):'none';}else _0x20384a[_0x54ace8(0x63b)][_0x54ace8(0x1248)]=_0x54ace8(0x11b5);}else _0x20384a[_0x54ace8(0x63b)]['display']='none';}),_0x21d198[_0x2d2252(0x7b8)](_0x2d2252(0x7d4),()=>{setTimeout(()=>{const _0x24df78=_0x5817;_0x20384a['style']['display']=_0x24df78(0x11b5);},0xc8);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x7ac))[_0x2d2252(0x7b8)]('click',_0x344226),document[_0x2d2252(0xfa0)](_0x2d2252(0xb6d))['addEventListener'](_0x2d2252(0xb4a),_0x12e53c),document[_0x2d2252(0xfa0)](_0x2d2252(0xd94))['addEventListener']('click',()=>{const _0x22b79b=_0x2d2252;document[_0x22b79b(0xfa0)]('announcement-board-modal')[_0x22b79b(0x128f)][_0x22b79b(0x443)](_0x22b79b(0xdcc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0xea0))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x3a10a6=>{const _0x588952=_0x2d2252;if(_0x3a10a6[_0x588952(0x10c2)][_0x588952(0x128f)][_0x588952(0xea7)](_0x588952(0x145d))){const _0x3c96aa=_0x3a10a6[_0x588952(0x10c2)][_0x588952(0x8df)][_0x588952(0x1238)];_0x3c96aa&&_0x5059ff(_0x3c96aa);}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x375))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x1bc4bb),document['getElementById'](_0x2d2252(0x9d1))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x1f981c),document['getElementById'](_0x2d2252(0x18d))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x22e91d=_0x2d2252;document[_0x22e91d(0xfa0)](_0x22e91d(0x58d))[_0x22e91d(0x128f)]['remove'](_0x22e91d(0xdcc));}),document[_0x2d2252(0xfa0)]('reset-global-css-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x5620ca=_0x2d2252;document[_0x5620ca(0xfa0)]('global-css-input')[_0x5620ca(0x4f6)]='';}),document[_0x2d2252(0xfa0)](_0x2d2252(0x109d))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x424eca),document[_0x2d2252(0xfa0)](_0x2d2252(0x1565))[_0x2d2252(0x7b8)]('click',()=>{const _0x1a207d=_0x2d2252;_0x2d25e5(_0x1a207d(0xe95));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1126))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x11bd3a),document['getElementById'](_0x2d2252(0x729))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x26ad6a),document[_0x2d2252(0xfa0)](_0x2d2252(0x1422))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x5a72a5=>{const _0xa4cff6=_0x2d2252,_0x4b6f8a=_0x5a72a5[_0xa4cff6(0x10c2)][_0xa4cff6(0x187)]('.edit-memory-btn');if(_0x4b6f8a){_0xef91df(_0x4b6f8a[_0xa4cff6(0x8df)][_0xa4cff6(0x11dd)],parseInt(_0x4b6f8a[_0xa4cff6(0x8df)][_0xa4cff6(0x7ec)]));return;}const _0x522df9=_0x5a72a5[_0xa4cff6(0x10c2)][_0xa4cff6(0x187)](_0xa4cff6(0xc1a));if(_0x522df9){_0x43bfaf(_0x522df9[_0xa4cff6(0x8df)][_0xa4cff6(0x11dd)],parseInt(_0x522df9[_0xa4cff6(0x8df)][_0xa4cff6(0x7ec)]));return;}}),document['getElementById'](_0x2d2252(0x6eb))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x45425e),document[_0x2d2252(0xfa0)]('close-gomoku-btn')[_0x2d2252(0x7b8)]('click',_0x29e526);const _0x53d8d1=document['getElementById'](_0x2d2252(0x136a));_0x53d8d1['addEventListener']('mousemove',_0x586842),_0x53d8d1['addEventListener'](_0x2d2252(0x101b),()=>_0x50cd8f(_0x8f0871['activeChatId'])),_0x53d8d1[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x42881c),document[_0x2d2252(0xfa0)](_0x2d2252(0x61a))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x117b1a=_0x2d2252;document['getElementById'](_0x117b1a(0x843))[_0x117b1a(0x4f6)]='',document[_0x117b1a(0xfa0)]('countdown-date-input')[_0x117b1a(0x4f6)]='',document['getElementById'](_0x117b1a(0xc0f))[_0x117b1a(0x128f)]['add'](_0x117b1a(0xdcc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x153c))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x22d99a=_0x2d2252;document[_0x22d99a(0xfa0)](_0x22d99a(0xc0f))[_0x22d99a(0x128f)][_0x22d99a(0x443)](_0x22d99a(0xdcc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0xaed))[_0x2d2252(0x7b8)]('click',_0x16243c),document[_0x2d2252(0xfa0)](_0x2d2252(0x6b6))['addEventListener']('click',_0x5c45dc),document['getElementById'](_0x2d2252(0x1298))[_0x2d2252(0x7b8)]('click',_0x5cae71),document[_0x2d2252(0xfa0)]('edit-last-response-btn')[_0x2d2252(0x7b8)]('click',_0x17d368),document[_0x2d2252(0xfa0)](_0x2d2252(0x66e))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x5545db=_0x2d2252;document[_0x5545db(0xfa0)](_0x5545db(0x82e))[_0x5545db(0x128f)][_0x5545db(0x443)](_0x5545db(0xdcc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x534))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x370aa5),document[_0x2d2252(0xfa0)](_0x2d2252(0xdf9))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x1c89fc=_0x2d2252,_0x12d1d7=document['getElementById']('ai-response-editor-container'),_0x440971=_0x247878(_0x1c89fc(0xd56));_0x12d1d7[_0x1c89fc(0x1155)](_0x440971),_0x440971['querySelector'](_0x1c89fc(0x338))[_0x1c89fc(0x10c7)]();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x32b))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x2afe30),document[_0x2d2252(0xfa0)](_0x2d2252(0x527))['addEventListener'](_0x2d2252(0xb4a),_0x297a41),document[_0x2d2252(0xfa0)](_0x2d2252(0xd3f))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x2dd575),document[_0x2d2252(0xfa0)](_0x2d2252(0x22f))['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x431d8a=_0x2d2252;document[_0x431d8a(0xfa0)](_0x431d8a(0x335))[_0x431d8a(0xb4a)]();}),document[_0x2d2252(0xfa0)]('my-avatar-upload-input')['addEventListener']('change',_0x2de6a1),document[_0x2d2252(0xfa0)]('add-my-avatar-batch-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x48fa8c=_0x2d2252,_0x2f4edb=_0x48fa8c(0xb91),_0x168bd8=await _0x131a69('批量导入头像',_0x2f4edb,'','textarea');_0x168bd8&&_0x168bd8[_0x48fa8c(0xa06)]()&&await _0x225f34(_0x168bd8);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x9e2))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x24275c),document[_0x2d2252(0xfa0)](_0x2d2252(0x149a))[_0x2d2252(0x7b8)]('click',()=>_0x2d25e5(_0x2d2252(0xe95))),document[_0x2d2252(0xfa0)](_0x2d2252(0x885))['addEventListener'](_0x2d2252(0xb4a),_0x21be01),document['getElementById'](_0x2d2252(0xa36))['addEventListener']('click',_0x24275c),document[_0x2d2252(0xfa0)](_0x2d2252(0x8fd))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x2e2201),document[_0x2d2252(0xfa0)](_0x2d2252(0xc8f))['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x32cc62=_0x2d2252;document['getElementById'](_0x32cc62(0xc8b))[_0x32cc62(0x128f)][_0x32cc62(0x443)](_0x32cc62(0xdcc));}),document['getElementById'](_0x2d2252(0x6a3))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x29d5e8=_0x2d2252;_0x409cc1=!_0x409cc1;const _0x4abcc3=document[_0x29d5e8(0xfa0)](_0x29d5e8(0x6a3)),_0xe2d52d=document['getElementById'](_0x29d5e8(0x934)),_0x2be728=document[_0x29d5e8(0xfa0)](_0x29d5e8(0x1361));_0x4abcc3[_0x29d5e8(0x63b)][_0x29d5e8(0xa68)]=_0x409cc1?_0x29d5e8(0x149b):_0x29d5e8(0x32f),_0x409cc1?(_0xe2d52d[_0x29d5e8(0x63b)][_0x29d5e8(0x1248)]='flex',_0x2be728[_0x29d5e8(0x63b)][_0x29d5e8(0xe11)]=_0x29d5e8(0xbfd)):(_0xe2d52d['style'][_0x29d5e8(0x1248)]=_0x29d5e8(0x11b5),_0x2be728[_0x29d5e8(0x63b)][_0x29d5e8(0xe11)]='',_0x417f90[_0x29d5e8(0xf7d)](),document[_0x29d5e8(0x2a1)](_0x29d5e8(0x427))[_0x29d5e8(0x458)](_0x739360=>_0x739360[_0x29d5e8(0x128f)][_0x29d5e8(0x443)](_0x29d5e8(0xaa0))),document[_0x29d5e8(0xfa0)](_0x29d5e8(0x9f5))['textContent']=_0x29d5e8(0x63e),document[_0x29d5e8(0xfa0)]('select-all-products-checkbox')[_0x29d5e8(0xb34)]=![]),_0x31f214(),_0xfb7bf();}),document[_0x2d2252(0xfa0)](_0x2d2252(0xd83))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x4379ed=_0x2d2252;_0x409cc1?_0x514a03(null):alert(_0x4379ed(0x1306));}),document[_0x2d2252(0xfa0)]('product-grid')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async _0x33caf7=>{const _0x43a4ce=_0x2d2252,_0x5aa11c=_0x33caf7[_0x43a4ce(0x10c2)]['closest']('.product-item');if(!_0x5aa11c)return;const _0x20c4a4=parseInt(_0x5aa11c[_0x43a4ce(0x8df)]['id']);if(isNaN(_0x20c4a4))return;if(_0x409cc1){if(_0x33caf7[_0x43a4ce(0x10c2)][_0x43a4ce(0x128f)][_0x43a4ce(0xea7)](_0x43a4ce(0x5c5))){_0x514a03(_0x20c4a4);return;}if(_0x33caf7[_0x43a4ce(0x10c2)][_0x43a4ce(0x128f)]['contains'](_0x43a4ce(0xe1d))){const _0x38dfd4=await _0x372b85['shoppingProducts'][_0x43a4ce(0x70d)](_0x20c4a4);if(!_0x38dfd4)return;const _0x34bf42=await _0x3f65ed(_0x43a4ce(0x840),_0x43a4ce(0x1347)+_0x38dfd4[_0x43a4ce(0x1023)]+_0x43a4ce(0x1414),{'confirmButtonClass':'btn-danger'});_0x34bf42&&(await _0x372b85[_0x43a4ce(0x8ad)][_0x43a4ce(0xf10)](_0x20c4a4),await _0x31f214(),alert(_0x43a4ce(0xece)));return;}_0x5aa11c[_0x43a4ce(0x128f)][_0x43a4ce(0xb80)](_0x43a4ce(0xaa0));_0x417f90[_0x43a4ce(0xd58)](_0x20c4a4)?_0x417f90[_0x43a4ce(0xf10)](_0x20c4a4):_0x417f90[_0x43a4ce(0x1327)](_0x20c4a4);document['getElementById'](_0x43a4ce(0x9f5))[_0x43a4ce(0xc62)]='删除\x20('+_0x417f90['size']+')';return;}if(_0x33caf7[_0x43a4ce(0x10c2)][_0x43a4ce(0x128f)][_0x43a4ce(0xea7)]('add-to-cart-btn')){const _0x5f347f=await _0x372b85['shoppingProducts'][_0x43a4ce(0x70d)](_0x20c4a4);_0x5f347f[_0x43a4ce(0x12bd)]&&_0x5f347f['variations'][_0x43a4ce(0xac0)]>0x0?_0x5a39cd(_0x20c4a4):(await _0x3efdd0(_0x20c4a4),await _0x4abd86('成功',_0x43a4ce(0xefb)));return;}_0x5aa11c['contains'](_0x33caf7[_0x43a4ce(0x10c2)])&&console[_0x43a4ce(0x4ee)](_0x43a4ce(0x238)+_0x20c4a4);}),document['getElementById'](_0x2d2252(0x1334))['addEventListener'](_0x2d2252(0xb4a),_0x44b7d3=>{const _0xaf057b=_0x2d2252,_0x9949bc=_0x44b7d3['target'];_0x9949bc['classList'][_0xaf057b(0xea7)](_0xaf057b(0x6a5))&&_0x17c391(parseInt(_0x9949bc[_0xaf057b(0x8df)]['id']),-0x1),_0x9949bc[_0xaf057b(0x128f)][_0xaf057b(0xea7)]('increase-qty-btn')&&_0x17c391(parseInt(_0x9949bc[_0xaf057b(0x8df)]['id']),0x1),_0x9949bc[_0xaf057b(0x128f)][_0xaf057b(0xea7)]('cart-item-checkbox')&&_0x34d95a();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1033))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x39e447=_0x2d2252;if(_0x59a44d['length']===0x0)return;const _0x14a2f1=await _0x3f65ed(_0x39e447(0x6f7),_0x39e447(0x1cc));_0x14a2f1&&(_0x59a44d=[],_0x18a315(),_0x2b97ff());}),document[_0x2d2252(0xfa0)](_0x2d2252(0x246))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),function(_0x56806e){const _0x515701=_0x2d2252;document[_0x515701(0x2a1)](_0x515701(0x135f))[_0x515701(0x458)](_0x212875=>{const _0x12e242=_0x515701;_0x212875[_0x12e242(0xb34)]=_0x56806e['target']['checked'];}),_0x34d95a();}),document[_0x2d2252(0xfa0)](_0x2d2252(0xd8e))['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x35e39c=_0x2d2252;document[_0x35e39c(0xfa0)](_0x35e39c(0x1257))['classList'][_0x35e39c(0x443)](_0x35e39c(0xdcc));}),document[_0x2d2252(0xfa0)]('save-product-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x17e15a),document[_0x2d2252(0xfa0)](_0x2d2252(0x7f6))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x408bee=>{const _0x5a1d4f=_0x2d2252,_0x15954a=_0x408bee['target'][_0x5a1d4f(0xca1)][0x0];if(_0x15954a){const _0x4c3290=new FileReader();_0x4c3290[_0x5a1d4f(0x7c6)]=_0x1ca9be=>{const _0x54b9a6=_0x5a1d4f;document[_0x54b9a6(0xfa0)](_0x54b9a6(0x13ae))[_0x54b9a6(0x53e)]=_0x1ca9be[_0x54b9a6(0x10c2)][_0x54b9a6(0x4fe)];},_0x4c3290['readAsDataURL'](_0x15954a);}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x142d))['addEventListener'](_0x2d2252(0xb4a),_0x496785=>{const _0x310cb5=_0x2d2252,_0x5ccf8c=_0x496785[_0x310cb5(0x10c2)][_0x310cb5(0x187)]('.gift-card');if(_0x5ccf8c){const _0x56d860=_0x5ccf8c[_0x310cb5(0x187)](_0x310cb5(0x11e5));_0x56d860&&_0x171a1e(parseInt(_0x56d860[_0x310cb5(0x8df)][_0x310cb5(0xe55)]));}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1d8))['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x4e5f20=_0x2d2252;document['getElementById'](_0x4e5f20(0x113b))[_0x4e5f20(0x128f)][_0x4e5f20(0x443)](_0x4e5f20(0xdcc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x12f9))['addEventListener'](_0x2d2252(0xb4a),async()=>{const _0x3cb05b=_0x2d2252,_0x56bdb4=Array[_0x3cb05b(0x3aa)](document[_0x3cb05b(0x2a1)]('#gift-recipient-list\x20.contact-picker-item.selected'))[_0x3cb05b(0x556)](_0x1bb03e=>_0x1bb03e['dataset']['recipientName']);if(_0x56bdb4[_0x3cb05b(0xac0)]===0x0){alert('请至少选择一位收礼人。');return;}const _0x300a8b=_0x59a44d[_0x3cb05b(0xde7)](_0x3ea279=>document['querySelector'](_0x3cb05b(0xd34)+_0x3ea279[_0x3cb05b(0x516)]+_0x3cb05b(0x90c)));await _0x50a0d1(_0x300a8b,_0x56bdb4),document[_0x3cb05b(0xfa0)]('gift-recipient-modal')['classList']['remove'](_0x3cb05b(0xdcc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x3d3))[_0x2d2252(0x7b8)]('click',_0x1a66ff=>{const _0x1ebb7b=_0x2d2252,_0x4f107b=_0x1a66ff['target']['closest'](_0x1ebb7b(0x10d2));_0x4f107b&&_0x4f107b[_0x1ebb7b(0x128f)][_0x1ebb7b(0xb80)](_0x1ebb7b(0xaa0));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x721))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),function(_0x221853){const _0x26c247=_0x2d2252,_0x387828=_0x221853[_0x26c247(0x10c2)][_0x26c247(0xb34)];document[_0x26c247(0x2a1)](_0x26c247(0x1523))['forEach'](_0x2be0ad=>{const _0x1b58d4=_0x26c247;_0x2be0ad[_0x1b58d4(0x128f)]['toggle'](_0x1b58d4(0xaa0),_0x387828);});}),document[_0x2d2252(0xfa0)](_0x2d2252(0xfaa))[_0x2d2252(0x7b8)]('click',_0x323995),document[_0x2d2252(0xfa0)](_0x2d2252(0x1387))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x14b9d0),document[_0x2d2252(0xfa0)](_0x2d2252(0xe61))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x44a6a3),document[_0x2d2252(0xfa0)](_0x2d2252(0x417))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x2cc999=_0x2d2252,_0x22f510=document[_0x2cc999(0xfa0)](_0x2cc999(0xaa8)),_0x4f661c=document[_0x2cc999(0xfa0)]('notification-sound-url-input')[_0x2cc999(0x4f6)]['trim']()||_0x453327;_0x22f510[_0x2cc999(0x53e)]=_0x4f661c,_0x22f510[_0x2cc999(0xfe3)]()['catch'](_0x557c97=>alert(_0x2cc999(0xcb7)));}),document['getElementById']('reset-sound-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x2a6ed9=_0x2d2252;document[_0x2a6ed9(0xfa0)](_0x2a6ed9(0x64d))[_0x2a6ed9(0x4f6)]='',alert(_0x2a6ed9(0x5af));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x117a))[_0x2d2252(0x7b8)]('click',_0x531619=>{const _0x1e782f=_0x2d2252,_0x4df06a=_0x531619['target'];_0x4df06a[_0x1e782f(0x128f)][_0x1e782f(0xea7)](_0x1e782f(0x9ed))&&_0x1cd749(_0x4df06a),_0x4df06a['classList']['contains']('editable-image')&&_0x53b5c0(_0x4df06a);}),document['getElementById'](_0x2d2252(0xe62))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x1c3872),document[_0x2d2252(0xfa0)](_0x2d2252(0x80a))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x2eb405=_0x2d2252;document['getElementById'](_0x2eb405(0x112f))[_0x2eb405(0x128f)]['remove']('visible');}),document[_0x2d2252(0xfa0)](_0x2d2252(0xe62))['addEventListener'](_0x2d2252(0xb4a),_0x1c3872),document[_0x2d2252(0xfa0)](_0x2d2252(0x80a))[_0x2d2252(0x7b8)]('click',()=>{const _0x2fbe25=_0x2d2252;document['getElementById'](_0x2fbe25(0x112f))['classList'][_0x2fbe25(0x443)]('visible');}),document[_0x2d2252(0xfa0)]('select-all-music-search')['addEventListener'](_0x2d2252(0xca8),function(_0x391c39){const _0x26eb71=_0x2d2252;document[_0x26eb71(0x2a1)](_0x26eb71(0x61b))[_0x26eb71(0x458)](_0x26ef42=>{const _0xbb19b4=_0x26eb71;_0x26ef42[_0xbb19b4(0xb34)]=_0x391c39['target'][_0xbb19b4(0xb34)];});}),document[_0x2d2252(0xfa0)](_0x2d2252(0x4f1))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x8c99be=>{const _0x453977=_0x2d2252,_0xdbdde5=_0x8c99be['target'][_0x453977(0x187)](_0x453977(0xad5));if(_0xdbdde5){const _0x1d5591=_0xdbdde5[_0x453977(0xfb1)](_0x453977(0x139a));_0x1d5591&&(_0x8c99be[_0x453977(0x10c2)]!==_0x1d5591&&(_0x1d5591[_0x453977(0xb34)]=!_0x1d5591[_0x453977(0xb34)]));}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x8a7))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x3f960c=_0x2d2252,_0x3a7a35=document[_0x3f960c(0x2a1)](_0x3f960c(0xf3c));if(_0x3a7a35[_0x3f960c(0xac0)]===0x0){alert(_0x3f960c(0x63c));return;}document[_0x3f960c(0xfa0)]('music-search-results-modal')['classList'][_0x3f960c(0x443)]('visible'),await _0x4abd86('请稍候...',_0x3f960c(0x823)+_0x3a7a35[_0x3f960c(0xac0)]+'\x20首歌曲...');const _0x2108fc=Array['from'](_0x3a7a35)['map'](_0x2e91dc=>JSON[_0x3f960c(0x4a0)](_0x2e91dc['closest'](_0x3f960c(0xad5))[_0x3f960c(0x8df)][_0x3f960c(0x8ee)]));let _0x2f27f3=0x0,_0x4b7381=[];const _0x2191f9=_0x2108fc[_0x3f960c(0x556)](_0x32e9b8=>_0xd2205d(_0x32e9b8)),_0x40499d=await Promise[_0x3f960c(0x8ab)](_0x2191f9);_0x40499d[_0x3f960c(0x458)]((_0x5f27cd,_0x45a39c)=>{const _0x679d56=_0x3f960c;_0x5f27cd?(_0x46bc8b[_0x679d56(0x84a)]['push'](_0x5f27cd),_0x2f27f3++):_0x4b7381['push'](_0x2108fc[_0x45a39c][_0x679d56(0x1023)]);});_0x2f27f3>0x0&&(await _0x3373e0(),_0x45ef07(),_0x46bc8b['currentIndex']===-0x1&&(_0x46bc8b[_0x3f960c(0x715)]=_0x46bc8b['playlist'][_0x3f960c(0xac0)]-_0x2f27f3,_0x139f8a()));let _0xb0975e='添加完成！\x0a\x0a成功添加\x20'+_0x2f27f3+_0x3f960c(0xc04);_0x4b7381['length']>0x0&&(_0xb0975e+='\x0a\x0a'+_0x4b7381[_0x3f960c(0xac0)]+'\x20首歌曲获取失败:\x0a-\x20'+_0x4b7381[_0x3f960c(0xcc2)](_0x3f960c(0x76b))),await _0x4abd86(_0x3f960c(0x142e),_0xb0975e);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x498))[_0x2d2252(0x7b8)]('click',()=>{const _0x235ffe=_0x2d2252;document[_0x235ffe(0xfa0)](_0x235ffe(0x498))[_0x235ffe(0x128f)][_0x235ffe(0xb80)](_0x235ffe(0x76c));}),document[_0x2d2252(0xfa0)](_0x2d2252(0xe62))['addEventListener'](_0x2d2252(0xb4a),_0x1c3872),document[_0x2d2252(0xfa0)](_0x2d2252(0x80a))['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x4475be=_0x2d2252;document[_0x4475be(0xfa0)](_0x4475be(0x112f))[_0x4475be(0x128f)]['remove'](_0x4475be(0xdcc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x4f1))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x9de39c=>{const _0x2c6900=_0x2d2252,_0xcae097=_0x9de39c[_0x2c6900(0x10c2)]['closest'](_0x2c6900(0xad5));if(_0xcae097&&_0xcae097[_0x2c6900(0x8df)]['songJson']){const _0x55b1d6=JSON['parse'](_0xcae097[_0x2c6900(0x8df)][_0x2c6900(0x8ee)]);handleSearchResultClick(_0x55b1d6);}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x7d1))['addEventListener'](_0x2d2252(0xb4a),_0x3938ee),document[_0x2d2252(0xfa0)](_0x2d2252(0x90f))['addEventListener'](_0x2d2252(0xb4a),_0x561739),document[_0x2d2252(0xfa0)]('toggle-fullscreen-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x60064e),document[_0x2d2252(0xfa0)]('show-avatars-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x50368f),document[_0x2d2252(0xfa0)](_0x2d2252(0x4a7))['addEventListener'](_0x2d2252(0xca8),()=>{const _0x3601e0=_0x2d2252;_0x8f0871[_0x3601e0(0x7b0)][_0x3601e0(0x7f3)]=document[_0x3601e0(0xfa0)]('status-bar-toggle-switch')[_0x3601e0(0xb34)],_0x34979a();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x373))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x558736),document[_0x2d2252(0xfa0)](_0x2d2252(0xc09))['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x514a38=_0x2d2252;document[_0x514a38(0xfa0)](_0x514a38(0x137c))[_0x514a38(0x128f)][_0x514a38(0x443)](_0x514a38(0xdcc));}),document[_0x2d2252(0xfa0)]('confirm-clear-posts-btn')['addEventListener'](_0x2d2252(0xb4a),_0x2615d6),document[_0x2d2252(0xfa0)](_0x2d2252(0x13eb))[_0x2d2252(0x7b8)]('click',_0x3869bf=>{const _0x1b8f6d=_0x2d2252,_0x3cca4c=_0x3869bf['target']['closest'](_0x1b8f6d(0xfd6));_0x3cca4c&&_0x3cca4c[_0x1b8f6d(0x128f)][_0x1b8f6d(0xb80)]('selected');}),document[_0x2d2252(0xfa0)](_0x2d2252(0xb19))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),async _0x94d295=>{const _0x4ef28e=_0x2d2252,_0x832b0a=_0x94d295[_0x4ef28e(0x10c2)]['files'][0x0];if(_0x832b0a){const _0x41d284=await new Promise(_0x468650=>{const _0x2d27a1=_0x4ef28e,_0xcc444d=new FileReader();_0xcc444d['onload']=()=>_0x468650(_0xcc444d[_0x2d27a1(0x4fe)]),_0xcc444d[_0x2d27a1(0x101e)](_0x832b0a);});_0x8f0871[_0x4ef28e(0x7b0)]['globalChatBackground']=_0x41d284,_0x147987();}_0x94d295[_0x4ef28e(0x10c2)][_0x4ef28e(0x4f6)]=null;}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1127))['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x3f9f04=_0x2d2252;_0x8f0871[_0x3f9f04(0x7b0)][_0x3f9f04(0xf8b)]='',_0x147987();}),document[_0x2d2252(0xfa0)](_0x2d2252(0xc57))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x3efce3=_0x2d2252;_0x49d8a7&&(_0x8f0871[_0x3efce3(0x7b0)][_0x3efce3(0xf61)]=_0x49d8a7),_0x8f0871['globalSettings']['globalCss']=document[_0x3efce3(0xfa0)]('global-css-input')['value'][_0x3efce3(0xa06)](),_0x8f0871[_0x3efce3(0x7b0)][_0x3efce3(0x845)]=document['getElementById'](_0x3efce3(0x64d))['value']['trim'](),_0x8f0871[_0x3efce3(0x7b0)][_0x3efce3(0x7f3)]=document[_0x3efce3(0xfa0)](_0x3efce3(0x4a7))[_0x3efce3(0xb34)],await _0x372b85[_0x3efce3(0x7b0)]['put'](_0x8f0871['globalSettings']),_0x22b1db(),_0x49d8a7=null,_0x5c238f(),_0xcbf629(_0x8f0871[_0x3efce3(0x7b0)][_0x3efce3(0x901)]),_0x34979a(),alert('外观设置已保存并应用！'),_0x2d25e5(_0x3efce3(0x117a));}),document['getElementById'](_0x2d2252(0x49d))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x369bf6=_0x2d2252,_0x5a20ea=await _0x131a69('网络图片',_0x369bf6(0x1389),'',_0x369bf6(0x3f5));if(_0x5a20ea&&_0x5a20ea['trim']())_0x8f0871[_0x369bf6(0x7b0)][_0x369bf6(0xf8b)]=_0x5a20ea[_0x369bf6(0xa06)](),_0x147987();else _0x5a20ea!==null&&alert(_0x369bf6(0xaf1));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x9fb))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x3f4b73=_0x2d2252,_0x2a35de=await _0x131a69(_0x3f4b73(0x2ce),_0x3f4b73(0xe8c),'',_0x3f4b73(0x3f5));if(_0x2a35de&&_0x2a35de[_0x3f4b73(0xa06)]())_0x49d8a7=_0x2a35de[_0x3f4b73(0xa06)](),_0x147987();else _0x2a35de!==null&&alert(_0x3f4b73(0xaf1));}),document[_0x2d2252(0xfa0)](_0x2d2252(0xfe5))['addEventListener'](_0x2d2252(0xb4a),async()=>{const _0x6ce9d7=_0x2d2252,_0x470e83=await _0x131a69(_0x6ce9d7(0xc1b),'请输入CPhone的背景图片URL','',_0x6ce9d7(0x3f5));if(_0x470e83&&_0x470e83[_0x6ce9d7(0xa06)]())_0x8f0871[_0x6ce9d7(0x7b0)][_0x6ce9d7(0x9d4)]=_0x470e83[_0x6ce9d7(0xa06)](),_0x147987();else _0x470e83!==null&&alert(_0x6ce9d7(0xaf1));}),document[_0x2d2252(0xfa0)]('remove-ephone-bg-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x10a917=_0x2d2252;_0x49d8a7=null,_0x8f0871[_0x10a917(0x7b0)][_0x10a917(0xf61)]='',_0x147987();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x236))['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x533704=_0x2d2252;_0x8f0871[_0x533704(0x7b0)][_0x533704(0x9d4)]='',_0x147987();}),document[_0x2d2252(0xfa0)](_0x2d2252(0xed8))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x26461c),document[_0x2d2252(0xfa0)]('save-css-preset-btn')['addEventListener'](_0x2d2252(0xb4a),_0x21d05b),document[_0x2d2252(0xfa0)]('delete-css-preset-btn')['addEventListener'](_0x2d2252(0xb4a),_0x58c290),document[_0x2d2252(0xfa0)]('font-preset-select')[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x329d1f),document['getElementById'](_0x2d2252(0xabb))['addEventListener'](_0x2d2252(0xb4a),_0x202ff7),document[_0x2d2252(0xfa0)]('delete-font-preset-btn')[_0x2d2252(0x7b8)]('click',_0x5da0f3),document['getElementById']('theme-preset-select')[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x5240a7),document[_0x2d2252(0xfa0)](_0x2d2252(0x1179))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x5d71f2),document[_0x2d2252(0xfa0)]('delete-theme-preset-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0xa14ed0),document['getElementById'](_0x2d2252(0xe8d))[_0x2d2252(0x7b8)]('click',_0x2fce58),document['getElementById'](_0x2d2252(0x14e7))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x22f3f2=_0x2d2252;document[_0x22f3f2(0xfa0)](_0x22f3f2(0xabc))[_0x22f3f2(0x128f)][_0x22f3f2(0x443)]('visible'),_0x431c0b();}),document[_0x2d2252(0xfa0)]('add-new-sticker-category-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x30ff5f),document['getElementById'](_0x2d2252(0x139e))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x4398a6=>{const _0x355009=_0x2d2252;if(_0x4398a6['target'][_0x355009(0x128f)][_0x355009(0xea7)](_0x355009(0x125c))){const _0x290ba1=parseInt(_0x4398a6['target'][_0x355009(0x8df)]['id']);_0x2e6894(_0x290ba1);}}),document['getElementById'](_0x2d2252(0x86d))[_0x2d2252(0x7b8)]('click',_0x224a4c=>{const _0x458abe=_0x2d2252;if(_0x224a4c[_0x458abe(0x10c2)][_0x458abe(0x128f)]['contains'](_0x458abe(0x26d))){const _0x4798b2=_0x224a4c['target'][_0x458abe(0x8df)][_0x458abe(0x6b2)],_0x3ced73=_0x4798b2!=='all'&&_0x4798b2!==_0x458abe(0x398)?parseInt(_0x4798b2):_0x4798b2;_0x31dc3c(_0x3ced73);}}),document[_0x2d2252(0xfa0)]('select-all-stickers-checkbox')[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x2e816c),document['getElementById'](_0x2d2252(0xb62))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0xc079d0),document['getElementById'](_0x2d2252(0x8ff))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x1d4716=_0x2d2252;document[_0x1d4716(0xfa0)](_0x1d4716(0x201))[_0x1d4716(0xb4a)]();}),document['getElementById']('import-single-chat-input')['addEventListener'](_0x2d2252(0xca8),_0x1be805=>{const _0x1b45e7=_0x2d2252,_0x44cbac=_0x1be805[_0x1b45e7(0x10c2)]['files'][0x0];_0x44cbac&&_0x32b6ec(_0x44cbac),_0x1be805[_0x1b45e7(0x10c2)][_0x1b45e7(0x4f6)]=null;}),document[_0x2d2252(0xfa0)](_0x2d2252(0x145b))[_0x2d2252(0x7b8)]('click',()=>_0x19138e()),document[_0x2d2252(0xfa0)](_0x2d2252(0x1ee))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>openDiaryEditor()),document[_0x2d2252(0xfa0)](_0x2d2252(0xa5e))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x196deb),document[_0x2d2252(0xfa0)](_0x2d2252(0x940))['addEventListener'](_0x2d2252(0xb4a),_0x342eff),document[_0x2d2252(0xfa0)](_0x2d2252(0x13b6))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0xe78e7),document['getElementById']('copy-diary-content-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x3ea255=_0x2d2252,_0x47975d=document[_0x3ea255(0xfa0)]('char-diary-detail-content')['innerText'];_0x324dd6(_0x47975d,'日记内容已复制！');}),document[_0x2d2252(0xfa0)]('copy-memo-content-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x2ec06e=_0x2d2252,_0x56be7c=document[_0x2ec06e(0xfa0)](_0x2ec06e(0x701))[_0x2ec06e(0x4f6)];_0x324dd6(_0x56be7c,_0x2ec06e(0xc5b));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x3d7))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0xf9caf0=_0x2d2252,_0x4c2db2=document[_0xf9caf0(0xfa0)](_0xf9caf0(0x112d))[_0xf9caf0(0x262)];_0x324dd6(_0x4c2db2,'文章内容已复制！');}),document[_0x2d2252(0xfa0)](_0x2d2252(0xb5e))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x55bd26=_0x2d2252;_0x4abd86(_0x55bd26(0xe92),_0x55bd26(0x1432));try{await Promise[_0x55bd26(0x8ab)]([_0x59f7d0(),_0x59768e()]),console['log'](_0x55bd26(0xb7f));}catch(_0x444805){console[_0x55bd26(0x52b)](_0x55bd26(0x13d3),_0x444805),await _0x4abd86(_0x55bd26(0x457),_0x55bd26(0xc16)+_0x444805[_0x55bd26(0x790)]);}}),document[_0x2d2252(0xfa0)]('char-chat-list')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x96e304=>{const _0x1db5cd=_0x2d2252,_0x1e7432=_0x96e304['target'][_0x1db5cd(0x187)](_0x1db5cd(0x446));if(_0x1e7432&&_0x1e7432[_0x1db5cd(0x8df)][_0x1db5cd(0x6e7)]){const _0x44ad9f=parseInt(_0x1e7432[_0x1db5cd(0x8df)][_0x1db5cd(0x6e7)]);!isNaN(_0x44ad9f)&&_0x4e7455(_0x44ad9f);}}),document['getElementById'](_0x2d2252(0xf4d))[_0x2d2252(0x7b8)]('click',()=>{const _0x9987df=_0x2d2252;_0x49fa15(_0x9987df(0xd6c));});const _0x3fca56=document[_0x2d2252(0xfa0)](_0x2d2252(0x1188)),_0x39b4ad=()=>{const _0x54d009=_0x2d2252;if(_0x528906!==_0x54d009(0xe87))return;if(_0x3fca56[_0x54d009(0x54d)]<0x1&&!_0x155849){const _0x183c40=_0x8f0871[_0x54d009(0x1260)][_0xfd9ebf]?.[_0x54d009(0xc88)][_0x54d009(0xac0)]||0x0;_0x183c40>_0x45e6c2&&_0x562f98();}};_0x3fca56[_0x2d2252(0x7b8)]('scroll',_0x39b4ad),document['getElementById'](_0x2d2252(0xc9f))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x35b95a=_0x2d2252;alert(_0x35b95a(0x1173));}),document[_0x2d2252(0xfa0)](_0x2d2252(0xa51))[_0x2d2252(0x7b8)]('click',_0x1c7ce7),document['getElementById'](_0x2d2252(0x340))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x3e3ee6=>{const _0x5d4033=_0x2d2252,_0x1cedc4=_0x3e3ee6[_0x5d4033(0x10c2)][_0x5d4033(0x187)]('.char-photo-item');if(_0x1cedc4&&_0x1cedc4[_0x5d4033(0x8df)][_0x5d4033(0x211)]){const _0x4a1287=_0x1cedc4['dataset'][_0x5d4033(0x211)];_0x4abd86(_0x5d4033(0x471),_0x4a1287[_0x5d4033(0x128a)](/\n/g,'<br>'));}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x256))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0xf266fc),document[_0x2d2252(0xfa0)]('regenerate-char-taobao-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x1155a6),document[_0x2d2252(0xfa0)](_0x2d2252(0x270))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x1fda45=>{const _0x4af6b3=_0x2d2252,_0x2eb8a7=_0x1fda45[_0x4af6b3(0x10c2)][_0x4af6b3(0x187)](_0x4af6b3(0xb4c));if(_0x2eb8a7&&_0x2eb8a7[_0x4af6b3(0x8df)][_0x4af6b3(0x988)]){const _0x18d2ae=_0x2eb8a7[_0x4af6b3(0x8df)][_0x4af6b3(0x988)];_0x4abd86('TA的想法...',_0x18d2ae[_0x4af6b3(0x128a)](/\n/g,_0x4af6b3(0xd59)));}}),window[_0x2d2252(0x1b8)]=_0x45724d,document[_0x2d2252(0xfa0)]('regenerate-char-memo-btn')[_0x2d2252(0x7b8)]('click',_0x447c01),document[_0x2d2252(0xfa0)](_0x2d2252(0x2ef))['addEventListener'](_0x2d2252(0xb4a),()=>_0x49fa15(_0x2d2252(0x9b2))),document[_0x2d2252(0xfa0)](_0x2d2252(0xdb7))[_0x2d2252(0x7b8)]('click',_0x5570ff),document[_0x2d2252(0xfa0)]('add-char-diary-btn')[_0x2d2252(0x7b8)]('click',_0x3eee69),document[_0x2d2252(0xfa0)](_0x2d2252(0x929))[_0x2d2252(0x7b8)]('click',()=>_0x49fa15(_0x2d2252(0xce4))),document[_0x2d2252(0xfa0)](_0x2d2252(0xd6e))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x174861),document[_0x2d2252(0xfa0)](_0x2d2252(0x465))[_0x2d2252(0x7b8)]('click',_0x3d891b),document[_0x2d2252(0xfa0)](_0x2d2252(0x489))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x198e73),document['getElementById'](_0x2d2252(0xbb3))['addEventListener'](_0x2d2252(0xb4a),_0x4c91b6),document[_0x2d2252(0xfa0)](_0x2d2252(0x151e))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x444351),document['getElementById'](_0x2d2252(0x151e))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x444351),document[_0x2d2252(0xfa0)](_0x2d2252(0x1094))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>_0x2d25e5(_0x2d2252(0xbe7))),document[_0x2d2252(0xfa0)](_0x2d2252(0x125b))[_0x2d2252(0x7b8)]('click',_0x274674),document['getElementById'](_0x2d2252(0xbcd))['addEventListener'](_0x2d2252(0xb4a),_0x297ac9),document[_0x2d2252(0xfa0)](_0x2d2252(0x426))['addEventListener'](_0x2d2252(0xca8),async _0x1f4700=>{const _0x56427b=_0x2d2252,_0x4bbe51=_0x1f4700[_0x56427b(0x10c2)][_0x56427b(0xca1)][0x0];if(_0x4bbe51){const _0x3dbd18=await new Promise(_0x254cdf=>{const _0x4e0141=_0x56427b,_0x190f37=new FileReader();_0x190f37[_0x4e0141(0x7c6)]=()=>_0x254cdf(_0x190f37[_0x4e0141(0x4fe)]),_0x190f37[_0x4e0141(0x101e)](_0x4bbe51);});_0x8f0871[_0x56427b(0x7b0)][_0x56427b(0x9d4)]=_0x3dbd18,_0x147987();}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x10bc))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x1767ed=>{const _0xf2a034=_0x2d2252;if(_0x1767ed[_0xf2a034(0x10c2)][_0xf2a034(0x128f)][_0xf2a034(0xea7)](_0xf2a034(0x1170))){const _0xfde7c2=_0x1767ed[_0xf2a034(0x10c2)]['closest']('.icon-setting-item'),_0x545bbf=_0xfde7c2['dataset'][_0xf2a034(0x1095)];_0x545bbf&&_0x4745b8(_0x545bbf,_0xf2a034(0x7b5),_0xfde7c2);}}),document[_0x2d2252(0xfa0)]('import-appearance-btn')['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x4513a8=_0x2d2252;document[_0x4513a8(0xfa0)](_0x4513a8(0xd70))[_0x4513a8(0xb4a)]();}),document['getElementById'](_0x2d2252(0xd70))['addEventListener'](_0x2d2252(0xca8),_0x4a4130=>{const _0x1d7ca2=_0x2d2252,_0x1743d6=_0x4a4130[_0x1d7ca2(0x10c2)][_0x1d7ca2(0xca1)][0x0];_0x1743d6&&_0x24cea1(_0x1743d6),_0x4a4130['target'][_0x1d7ca2(0x4f6)]=null;}),document[_0x2d2252(0x7b8)](_0x2d2252(0x6cb),()=>{const _0x3466d2=_0x2d2252;document[_0x3466d2(0xeed)]===_0x3466d2(0x2d1)&&(localStorage[_0x3466d2(0x86f)](_0x3466d2(0x131d),Date[_0x3466d2(0xc22)]()),console[_0x3466d2(0x4ee)](_0x3466d2(0xb04)));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x9a4))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x21961a),document['getElementById']('import-world-book-btn')[_0x2d2252(0x7b8)]('click',()=>{const _0x3ad78e=_0x2d2252;document[_0x3ad78e(0xfa0)](_0x3ad78e(0xe2a))[_0x3ad78e(0xb4a)]();}),document['getElementById'](_0x2d2252(0xe2a))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x137fc5=>{const _0x136410=_0x2d2252,_0x5225b8=_0x137fc5[_0x136410(0x10c2)][_0x136410(0xca1)][0x0];_0x5225b8&&_0x16e5e8(_0x5225b8),_0x137fc5[_0x136410(0x10c2)]['value']=null;}),document['getElementById'](_0x2d2252(0x8f6))[_0x2d2252(0x7b8)]('change',async _0x71fe0d=>{const _0x5cd77e=_0x2d2252,_0x1bf833=_0x71fe0d['target'][_0x5cd77e(0xb34)];_0x8f0871[_0x5cd77e(0x7b0)][_0x5cd77e(0x1418)]=_0x1bf833,await _0x372b85[_0x5cd77e(0x7b0)][_0x5cd77e(0x11d5)](_0x8f0871['globalSettings']);const _0x516c8f=document[_0x5cd77e(0xfb1)]('.screen.active');if(_0x516c8f)switch(_0x516c8f['id']){case'chat-interface-screen':_0x54d32b(_0x8f0871[_0x5cd77e(0xac8)]);break;case _0x5cd77e(0x9e1):if(document[_0x5cd77e(0xfa0)](_0x5cd77e(0x337))[_0x5cd77e(0x128f)]['contains'](_0x5cd77e(0xa37)))_0x1098dc();if(document[_0x5cd77e(0xfa0)](_0x5cd77e(0x5cd))['classList'][_0x5cd77e(0xea7)](_0x5cd77e(0xa37)))_0x5164d8();break;case _0x5cd77e(0xbe7):_0x3b95fd();break;case _0x5cd77e(0x7cf):_0x4a4605(_0x52f18f);break;case _0x5cd77e(0xee3):const _0x20c3f3=document[_0x5cd77e(0xfb1)](_0x5cd77e(0x919));if(_0x20c3f3)switch(_0x20c3f3['id']){case'char-album-screen':_0x1a1446();break;case'char-taobao-screen':_0x4ddcfc();break;case _0x5cd77e(0x1411):const _0x3e6433=_0x8f0871['chats'][_0xfd9ebf],_0x4f6d97=_0x3e6433[_0x5cd77e(0x6c8)]||[],_0x365a83=_0x4f6d97[_0x5cd77e(0xac0)]>0x0?_0x4f6d97[_0x5cd77e(0xac0)]-0x1:0x0;_0x1a0427(_0x4f6d97[_0x365a83]);break;case _0x5cd77e(0x4d7):_0x369049();break;case _0x5cd77e(0xd6c):_0x3389f5();break;case _0x5cd77e(0xec3):const _0x5ea0da=document[_0x5cd77e(0xfb1)](_0x5cd77e(0x3f9))?.[_0x5cd77e(0x8df)][_0x5cd77e(0x6e7)]||0x0;_0x4e7455(parseInt(_0x5ea0da));break;}break;}_0x4abd86(_0x5cd77e(0x129f),'AI生图功能已'+(_0x1bf833?'开启':'关闭')+'。');}),document['getElementById'](_0x2d2252(0x70b))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x13f0e7),document[_0x2d2252(0xfa0)](_0x2d2252(0xd9d))[_0x2d2252(0x7b8)]('click',()=>{_0x2d25e5('chat-settings-screen');}),document[_0x2d2252(0xfa0)](_0x2d2252(0x91f))['addEventListener'](_0x2d2252(0xb4a),_0x17d36b),document[_0x2d2252(0xfa0)](_0x2d2252(0x1138))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x36579f),document[_0x2d2252(0xfa0)](_0x2d2252(0x46f))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x529dfd),document[_0x2d2252(0xfa0)](_0x2d2252(0x304))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x21e0b4),document[_0x2d2252(0xfb1)](_0x2d2252(0xec2))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x5f3207=>{const _0x5d0986=_0x2d2252;if(_0x5f3207[_0x5d0986(0x10c2)]['classList'][_0x5d0986(0xea7)](_0x5d0986(0x254))){const _0x4b486e=parseInt(_0x5f3207[_0x5d0986(0x10c2)][_0x5d0986(0x8df)]['id']);!isNaN(_0x4b486e)&&_0x482a9e(_0x4b486e);}}),_0x2d6a86(),window['openPresetScreen']=_0x2f8f24,document['getElementById'](_0x2d2252(0x1059))['addEventListener'](_0x2d2252(0xb4a),async()=>{const _0x5f5d51=_0x2d2252,_0x262590=await _0x131a69(_0x5f5d51(0x11fe),_0x5f5d51(0x22a));if(_0x262590&&_0x262590[_0x5f5d51(0xa06)]()){const _0x2b8595={'id':_0x5f5d51(0x11db)+Date['now'](),'name':_0x262590['trim'](),'content':[]};await _0x372b85[_0x5f5d51(0x1573)][_0x5f5d51(0x1327)](_0x2b8595),await _0x324525(),_0x16c702(_0x2b8595['id']);}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x82f))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x51d9fb),document['getElementById'](_0x2d2252(0x430))['addEventListener']('click',()=>{const _0x4c79aa=_0x2d2252,_0x3ca10a=document[_0x4c79aa(0xfa0)](_0x4c79aa(0x851));_0x3ca10a[_0x4c79aa(0xfb1)]('p')&&(_0x3ca10a[_0x4c79aa(0x1331)]='');const _0xe4645f=_0x120000();_0x3ca10a[_0x4c79aa(0x1155)](_0xe4645f),_0xe4645f[_0x4c79aa(0xfb1)](_0x4c79aa(0x12ca))[_0x4c79aa(0x10c7)]();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x7fe))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x15a811=_0x2d2252;if(!_0x35bcde)return;const _0x5a8325=await _0x372b85['presets']['get'](_0x35bcde);if(!_0x5a8325)return;const _0x5053aa=document[_0x15a811(0xfa0)]('preset-name-input')[_0x15a811(0x4f6)]['trim']();if(!_0x5053aa){alert(_0x15a811(0xfcb));return;}_0x5a8325[_0x15a811(0x1023)]=_0x5053aa,_0x5a8325[_0x15a811(0x6b2)]=parseInt(document[_0x15a811(0xfa0)](_0x15a811(0xce6))[_0x15a811(0x4f6)])||null;const _0x110c7f=document[_0x15a811(0xfa0)]('preset-entries-container'),_0x3cc536=_0x110c7f[_0x15a811(0x2a1)](_0x15a811(0x4f5)),_0x3303bb=[];_0x3cc536[_0x15a811(0x458)](_0x27a2a3=>{const _0x5d9b2d=_0x15a811,_0x4c1dbd=_0x27a2a3[_0x5d9b2d(0xfb1)](_0x5d9b2d(0x12ca))['value'][_0x5d9b2d(0xa06)]();_0x4c1dbd&&_0x3303bb['push']({'comment':_0x27a2a3['querySelector'](_0x5d9b2d(0x12fc))[_0x5d9b2d(0x4f6)][_0x5d9b2d(0xa06)](),'keys':(_0x27a2a3['querySelector']('.entry-keys-input')['value'][_0x5d9b2d(0xa06)]()||'')[_0x5d9b2d(0x505)](',')[_0x5d9b2d(0x556)](_0x2caa40=>_0x2caa40[_0x5d9b2d(0xa06)]())[_0x5d9b2d(0xde7)](Boolean),'content':_0x4c1dbd,'enabled':_0x27a2a3[_0x5d9b2d(0xfb1)]('.entry-enabled-switch')[_0x5d9b2d(0xb34)]});}),_0x5a8325[_0x15a811(0x1469)]=_0x3303bb,await _0x372b85[_0x15a811(0x1573)][_0x15a811(0x11d5)](_0x5a8325),_0x35bcde=null,_0x2d25e5(_0x15a811(0xdfe)),await _0x324525();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x26e))['addEventListener']('click',()=>{const _0x46614f=_0x2d2252;document[_0x46614f(0xfa0)](_0x46614f(0x1b0))[_0x46614f(0xb4a)]();}),document[_0x2d2252(0xfa0)]('import-preset-input')['addEventListener'](_0x2d2252(0xca8),_0x1deca5),document[_0x2d2252(0xfa0)]('reset-button-order-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0xafdf4d),document[_0x2d2252(0xfa0)](_0x2d2252(0xe13))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x510531),document[_0x2d2252(0xfa0)](_0x2d2252(0x1060))[_0x2d2252(0x7b8)]('click',()=>{const _0x5654d9=_0x2d2252;document['getElementById'](_0x5654d9(0x364))[_0x5654d9(0x128f)][_0x5654d9(0x443)]('visible');}),document[_0x2d2252(0xfa0)]('go-to-clear-step2-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x4c4a25),document[_0x2d2252(0xfa0)](_0x2d2252(0x9a0))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x3d4e73),document[_0x2d2252(0xfa0)]('cancel-clear-wizard-btn-step2')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x187164=_0x2d2252;document[_0x187164(0xfa0)](_0x187164(0x364))[_0x187164(0x128f)][_0x187164(0x443)](_0x187164(0xdcc));}),document['getElementById']('confirm-final-clear-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x56fb6e),document['getElementById']('data-clear-wizard-modal')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x429352=>{const _0x5aab41=_0x2d2252,_0x1f2a0b=_0x429352[_0x5aab41(0x10c2)][_0x5aab41(0x187)](_0x5aab41(0xfd6));_0x1f2a0b&&(_0x429352['stopPropagation'](),_0x1f2a0b[_0x5aab41(0x128f)][_0x5aab41(0xb80)](_0x5aab41(0xaa0)));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x364))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x2c2cc8=>{const _0x531506=_0x2d2252;if(_0x2c2cc8[_0x531506(0x10c2)]['id']===_0x531506(0x11e9)){const _0x234e1e=_0x2c2cc8[_0x531506(0x10c2)][_0x531506(0xb34)];document[_0x531506(0x2a1)](_0x531506(0x13ea))['forEach'](_0x32d8eb=>{const _0x1d3373=_0x531506;_0x32d8eb['classList'][_0x1d3373(0xb80)](_0x1d3373(0xaa0),_0x234e1e);});}else{if(_0x2c2cc8[_0x531506(0x10c2)]['id']===_0x531506(0x3c3)){const _0x95aa3d=_0x2c2cc8[_0x531506(0x10c2)][_0x531506(0xb34)];document[_0x531506(0x2a1)]('#data-clear-type-list\x20.clear-posts-item')[_0x531506(0x458)](_0x182628=>{const _0xff8db9=_0x531506;_0x182628[_0xff8db9(0x128f)][_0xff8db9(0xb80)](_0xff8db9(0xaa0),_0x95aa3d);});}}}),document['getElementById'](_0x2d2252(0x134e))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x5f3df4),document[_0x2d2252(0xfa0)](_0x2d2252(0xf27))[_0x2d2252(0x7b8)]('click',_0xdc7534),document[_0x2d2252(0xfa0)](_0x2d2252(0x148f))[_0x2d2252(0x7b8)]('click',_0x39dc92),document[_0x2d2252(0xfa0)]('npc-list-back-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x4b7290=_0x2d2252;_0x33d681(_0x4b7290(0x230));}),document['getElementById'](_0x2d2252(0x3b5))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>_0x92a78c(null)),document[_0x2d2252(0xfa0)](_0x2d2252(0x118a))['addEventListener'](_0x2d2252(0xb4a),_0x12867e),document[_0x2d2252(0xfa0)](_0x2d2252(0x727))['addEventListener']('click',_0x577453=>{const _0x217fa8=_0x2d2252;_0x577453[_0x217fa8(0x10c2)]['id']===_0x217fa8(0x14cf)&&_0x2b0bbf();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x10d8))[_0x2d2252(0x7b8)]('click',()=>{const _0x38c8c7=_0x2d2252;document[_0x38c8c7(0xfa0)](_0x38c8c7(0xb5a))[_0x38c8c7(0x128f)][_0x38c8c7(0x443)]('visible'),document['getElementById'](_0x38c8c7(0x727))[_0x38c8c7(0x128f)][_0x38c8c7(0xea7)](_0x38c8c7(0xdcc))&&_0x92a78c(editingNpcId);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x9a9))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x1257ef),document[_0x2d2252(0xfa0)](_0x2d2252(0x142b))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x20ecbb=>{const _0x30690e=_0x2d2252;_0x20ecbb[_0x30690e(0x10c2)][_0x30690e(0x128f)][_0x30690e(0xea7)](_0x30690e(0x125c))&&_0x5c6a00(parseInt(_0x20ecbb[_0x30690e(0x10c2)][_0x30690e(0x8df)]['id']));}),document['getElementById'](_0x2d2252(0x570))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x218feb=_0x2d2252;document[_0x218feb(0xfa0)](_0x218feb(0x727))[_0x218feb(0x128f)][_0x218feb(0x443)](_0x218feb(0xdcc));}),document['getElementById'](_0x2d2252(0x13f2))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x2d99bf=>{const _0x3baaa5=_0x2d2252,_0xd4faa2=_0x2d99bf['target'][_0x3baaa5(0xca1)][0x0];if(_0xd4faa2){const _0x2243b0=new FileReader();_0x2243b0[_0x3baaa5(0x7c6)]=_0x26d2a0=>{const _0x6e3467=_0x3baaa5;document[_0x6e3467(0xfa0)](_0x6e3467(0x883))[_0x6e3467(0x53e)]=_0x26d2a0[_0x6e3467(0x10c2)][_0x6e3467(0x4fe)];},_0x2243b0['readAsDataURL'](_0xd4faa2);}}),document['getElementById']('chat-lock-overlay')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x217086=>{const _0x4b9336=_0x2d2252;if(_0x217086[_0x4b9336(0x10c2)]['id']==='spectator-reroll-btn')_0xca4f84();else _0x217086['target']['id']==='spectator-edit-btn'&&_0x17d368();}),_0x53cdde(document[_0x2d2252(0xfa0)](_0x2d2252(0x498)),()=>{const _0x1d3b53=_0x2d2252;_0x46bc8b[_0x1d3b53(0x715)]>-0x1&&_0x4f232a(_0x46bc8b[_0x1d3b53(0x715)]);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x6ee))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x47ae99),document[_0x2d2252(0xfa0)](_0x2d2252(0x13b7))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x5ad807),document['getElementById'](_0x2d2252(0xfb5))['addEventListener']('click',()=>{const _0x3118a2=_0x2d2252;document[_0x3118a2(0xfa0)]('douban-settings-modal')[_0x3118a2(0x128f)][_0x3118a2(0x443)]('visible');}),document[_0x2d2252(0xfa0)](_0x2d2252(0x835))[_0x2d2252(0x7b8)](_0x2d2252(0x4cf),_0x1c9a39=>{const _0x15251f=_0x2d2252,_0x5df94e=_0x1c9a39[_0x15251f(0x10c2)][_0x15251f(0x4f6)]['toLowerCase'](),_0x248096=document[_0x15251f(0xfa0)](_0x15251f(0xa40));for(const _0x132740 of _0x248096[_0x15251f(0x1106)]){const _0x1cedfc=_0x132740[_0x15251f(0xc62)][_0x15251f(0x1f3)]();_0x1cedfc[_0x15251f(0xf95)](_0x5df94e)?_0x132740[_0x15251f(0x63b)][_0x15251f(0x1248)]='':_0x132740['style'][_0x15251f(0x1248)]=_0x15251f(0x11b5);}}),window[_0x2d2252(0x528)]=_0x829e54,document['getElementById']('werewolf-game-btn')[_0x2d2252(0x7b8)]('click',()=>_0x829e54(_0x2d2252(0x14ae))),document['getElementById'](_0x2d2252(0x4cc))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x45d62b=_0x2d2252;document['getElementById']('werewolf-lobby-modal')['classList']['remove'](_0x45d62b(0xdcc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x61f))['addEventListener'](_0x2d2252(0xb4a),_0x46ed0c),document[_0x2d2252(0xfa0)]('werewolf-role-confirm-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x4aba36=_0x2d2252;document['getElementById'](_0x4aba36(0x13ca))[_0x4aba36(0x128f)]['remove'](_0x4aba36(0xdcc)),_0x3de327();}),document[_0x2d2252(0xfa0)]('exit-werewolf-game-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{const _0x88daf7=_0x2d2252,_0x3d5929=await _0x3f65ed(_0x88daf7(0xbbb),'确定要退出当前这局狼人杀吗？游戏进度将不会被保存。',{'confirmButtonClass':_0x88daf7(0x611)});_0x3d5929&&(_0x212d1b['isActive']=![],_0x2d25e5(_0x212d1b[_0x88daf7(0xe94)]?_0x88daf7(0xe95):'home-screen'));}),document[_0x2d2252(0xfa0)]('werewolf-game-over-close-btn')[_0x2d2252(0x7b8)]('click',()=>{const _0x15ec42=_0x2d2252;document[_0x15ec42(0xfa0)](_0x15ec42(0x600))[_0x15ec42(0x128f)][_0x15ec42(0x443)](_0x15ec42(0xdcc)),_0x2d25e5(_0x212d1b[_0x15ec42(0xe94)]?_0x15ec42(0x9e1):_0x15ec42(0x117a));}),document['getElementById'](_0x2d2252(0xad1))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x248cec=_0x2d2252;document['getElementById']('werewolf-kill-modal')[_0x248cec(0x128f)][_0x248cec(0x443)](_0x248cec(0xdcc));}),document['getElementById'](_0x2d2252(0x4cc))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x52204a=_0x2d2252;document['getElementById'](_0x52204a(0xe30))[_0x52204a(0x128f)][_0x52204a(0x443)]('visible');}),document['getElementById'](_0x2d2252(0x73a))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x46ca9c),document['getElementById'](_0x2d2252(0xa12))[_0x2d2252(0x7b8)]('click',_0x53a447),document[_0x2d2252(0xfa0)]('check-and-fix-data-btn')['addEventListener'](_0x2d2252(0xb4a),_0x3de20e),document[_0x2d2252(0xfa0)](_0x2d2252(0xb0c))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x47f86d),document['getElementById'](_0x2d2252(0x29d))['addEventListener']('click',()=>{const _0x68a346=_0x2d2252;document['getElementById'](_0x68a346(0x10e3))[_0x68a346(0x128f)][_0x68a346(0x443)](_0x68a346(0xdcc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0xe65))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x28a7f8),document['getElementById'](_0x2d2252(0x10e3))['addEventListener'](_0x2d2252(0xb4a),_0x26b613=>{const _0xe288ba=_0x2d2252,_0x42e288=_0x26b613[_0xe288ba(0x10c2)][_0xe288ba(0x187)](_0xe288ba(0xfd6));_0x42e288&&_0x42e288[_0xe288ba(0x128f)][_0xe288ba(0xb80)](_0xe288ba(0xaa0));if(_0x26b613[_0xe288ba(0x10c2)]['id']===_0xe288ba(0x490)){const _0xd98f91=_0x26b613['target'][_0xe288ba(0xb34)];document[_0xe288ba(0x2a1)]('#delete-world-books-list\x20.clear-posts-item')[_0xe288ba(0x458)](_0x532da7=>{const _0xb70671=_0xe288ba;_0x532da7[_0xb70671(0x128f)][_0xb70671(0xb80)](_0xb70671(0xaa0),_0xd98f91);});}}),document[_0x2d2252(0xfa0)](_0x2d2252(0xf88))['addEventListener'](_0x2d2252(0x4cf),()=>{_0x431c0b(![]);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x86d))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x226455=>{const _0x372c1c=_0x2d2252;if(_0x226455['target'][_0x372c1c(0x128f)][_0x372c1c(0xea7)](_0x372c1c(0x26d))){const _0x19b55b=_0x226455[_0x372c1c(0x10c2)][_0x372c1c(0x8df)][_0x372c1c(0x6b2)],_0xee8ff=_0x19b55b!==_0x372c1c(0x8ab)&&_0x19b55b!==_0x372c1c(0x398)?parseInt(_0x19b55b):_0x19b55b;document['getElementById']('sticker-search-input')[_0x372c1c(0x4f6)]='',_0x31dc3c(_0xee8ff);}});const _0x193a18=document['getElementById'](_0x2d2252(0x142d));_0x193a18[_0x2d2252(0x7b8)](_0x2d2252(0xcaf),()=>{const _0x3a16d1=_0x2d2252;if(_0x193a18[_0x3a16d1(0x54d)]<0x1&&!_0x50a527){const _0x42a359=_0x8f0871[_0x3a16d1(0x1260)][_0x8f0871[_0x3a16d1(0xac8)]]?.['history']['length']||0x0;_0x42a359>_0x3d7932&&_0x50fac8();}});const _0x5ae046=document[_0x2d2252(0xfa0)](_0x2d2252(0xd54));_0x5ae046['addEventListener']('scroll',()=>{const _0x2ce851=_0x2d2252,{scrollTop:_0x18abed,scrollHeight:_0x597e6f,clientHeight:_0x50bfd5}=_0x5ae046;if(_0x597e6f-_0x18abed<=_0x50bfd5+0x32&&!_0x5f661d){const _0x3f9b1e=_0x8f0871[_0x2ce851(0x1260)][_0x8f0871[_0x2ce851(0xac8)]]?.[_0x2ce851(0x1378)][_0x2ce851(0xac0)]||0x0;_0x3f9b1e>_0x316fd1&&_0x9be5c2();}});const _0x390980=document['querySelector']('#qzone-screen\x20.qzone-content');_0x390980[_0x2d2252(0x7b8)](_0x2d2252(0xcaf),()=>{const _0x47dc71=_0x2d2252,{scrollTop:_0x21c192,scrollHeight:_0x2e9092,clientHeight:_0x23349e}=_0x390980;_0x2e9092-_0x21c192<=_0x23349e+0x64&&!_0x2f5bce&&(_0x4b4cc4[_0x47dc71(0xac0)]>_0x4a9d1d&&_0x1656cf());});const _0xfe1c4b=document[_0x2d2252(0xfa0)](_0x2d2252(0x36f));_0xfe1c4b['addEventListener'](_0x2d2252(0xcaf),()=>{const {scrollTop:_0x570211,scrollHeight:_0x13e957,clientHeight:_0x550c3f}=_0xfe1c4b;_0x13e957-_0x570211<=_0x550c3f+0x64&&!_0xc45f2a&&(_0x5eff38['length']>_0x380514&&_0x5c53ac());}),document[_0x2d2252(0xfa0)]('read-together-btn')['addEventListener'](_0x2d2252(0xb4a),_0x3142b3);const _0x463dca=document[_0x2d2252(0xfa0)](_0x2d2252(0x709));_0x4e8426(_0x463dca,_0x463dca),document[_0x2d2252(0xfa0)](_0x2d2252(0x548))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0xb7244b),document['getElementById'](_0x2d2252(0x152d))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x17ed13),document[_0x2d2252(0xfa0)](_0x2d2252(0x1f5))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x26a0e8),document[_0x2d2252(0xfa0)](_0x2d2252(0x17d))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x5e13ba),document[_0x2d2252(0xfa0)]('book-upload-input')[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x174471),document['getElementById'](_0x2d2252(0xe7d))['addEventListener'](_0x2d2252(0xb4a),_0x21ccf2),document[_0x2d2252(0xfa0)](_0x2d2252(0x709))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x52464f),_0x4e8426(document[_0x2d2252(0xfa0)]('reading-window'),document[_0x2d2252(0xfb1)](_0x2d2252(0x7da))),document['getElementById']('open-reading-library-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x17ed13),document[_0x2d2252(0xfa0)]('close-reading-library-btn-header')[_0x2d2252(0x7b8)]('click',()=>{const _0x1ed3e2=_0x2d2252;document[_0x1ed3e2(0xfa0)](_0x1ed3e2(0x97a))[_0x1ed3e2(0x128f)][_0x1ed3e2(0x443)](_0x1ed3e2(0xdcc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1079))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x1736ea),document[_0x2d2252(0xfa0)](_0x2d2252(0x475))['addEventListener']('click',_0x574bd0=>{const _0x364090=_0x2d2252,_0x1cbbad=_0x574bd0[_0x364090(0x10c2)];if(_0x1cbbad[_0x364090(0x128f)]['contains'](_0x364090(0x85a))){const _0x1ae62e=parseInt(_0x1cbbad[_0x364090(0x8df)][_0x364090(0xb03)]);_0x15729b(_0x1ae62e);}else{if(_0x1cbbad[_0x364090(0x128f)][_0x364090(0xea7)](_0x364090(0x125c))){const _0x5810eb=parseInt(_0x1cbbad[_0x364090(0x8df)][_0x364090(0xb03)]);_0x10b896(_0x5810eb);}}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x195))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0xc3b4e),document['getElementById'](_0x2d2252(0xca7))['addEventListener'](_0x2d2252(0x4cf),_0x915777=>{const _0x42e1ea=_0x2d2252;_0x1da6d6(_0x915777[_0x42e1ea(0x10c2)][_0x42e1ea(0x4f6)]);});const _0x167026=_0x354702(_0x1ab0e9,0x12c);document[_0x2d2252(0xfa0)](_0x2d2252(0xc7a))['addEventListener'](_0x2d2252(0xcaf),_0x167026),document[_0x2d2252(0xfa0)](_0x2d2252(0x14ac))[_0x2d2252(0x7b8)]('input',_0x500e02=>{const _0x195295=_0x2d2252;document[_0x195295(0xfa0)]('api-temperature-value')[_0x195295(0xc62)]=_0x500e02[_0x195295(0x10c2)][_0x195295(0x4f6)];});const _0xf10328=document[_0x2d2252(0xfa0)]('messages-view');_0xf10328[_0x2d2252(0x7b8)](_0x2d2252(0xcaf),()=>{const {scrollTop:_0x4bb748,scrollHeight:_0x35d9c2,clientHeight:_0x2ac51f}=_0xf10328;_0x35d9c2-_0x4bb748<=_0x2ac51f+0x96&&!_0x4ed3d1&&_0x2ac8d4();}),document[_0x2d2252(0xfa0)](_0x2d2252(0xf7b))[_0x2d2252(0x7b8)]('click',_0x414939),document[_0x2d2252(0xfa0)](_0x2d2252(0x151f))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x57b217=_0x2d2252;document['getElementById'](_0x57b217(0x12b6))['classList'][_0x57b217(0x443)]('visible'),_0x514a03(_0x5061b6);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x5d4))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x253f78),document[_0x2d2252(0xfa0)](_0x2d2252(0x507))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x4a9df5=>{const _0x53d978=_0x2d2252;_0x4a9df5['target']['classList'][_0x53d978(0xea7)]('delete-group-btn')&&_0x9d46f7(parseInt(_0x4a9df5[_0x53d978(0x10c2)]['dataset']['id']));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1527))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>_0x387f27()),document[_0x2d2252(0xfa0)](_0x2d2252(0x3cd))['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x49f426=_0x2d2252;document['getElementById'](_0x49f426(0x11ab))['classList'][_0x49f426(0x443)]('visible');}),document['getElementById'](_0x2d2252(0x1103))['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x4b1a1f=_0x2d2252,_0x3e7e38=document['getElementById'](_0x4b1a1f(0xfe6));let _0x2a6839=parseInt(_0x3e7e38[_0x4b1a1f(0xc62)]);if(_0x2a6839>0x1)_0x3e7e38[_0x4b1a1f(0xc62)]=_0x2a6839-0x1;}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1458))[_0x2d2252(0x7b8)]('click',()=>{const _0x429db7=_0x2d2252,_0x1b250e=document[_0x429db7(0xfa0)](_0x429db7(0xfe6));_0x1b250e[_0x429db7(0xc62)]=parseInt(_0x1b250e['textContent'])+0x1;}),document['getElementById'](_0x2d2252(0x14f0))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x539576=>{const _0x505b20=_0x2d2252;if(_0x539576[_0x505b20(0x10c2)][_0x505b20(0x128f)]['contains'](_0x505b20(0x1070))){const _0x2f1e1c=_0x539576[_0x505b20(0x10c2)][_0x505b20(0x8df)][_0x505b20(0x6b2)]===_0x505b20(0x8ab)?_0x505b20(0x8ab):parseInt(_0x539576[_0x505b20(0x10c2)][_0x505b20(0x8df)]['categoryId']);_0x3966aa(_0x2f1e1c);}}),document[_0x2d2252(0xfa0)](_0x2d2252(0x2de))['addEventListener'](_0x2d2252(0xb4a),_0x50ef60),document[_0x2d2252(0xfa0)](_0x2d2252(0x871))[_0x2d2252(0x7b8)]('click',_0x126932),document[_0x2d2252(0xfa0)]('save-shopping-settings-btn')['addEventListener'](_0x2d2252(0xb4a),_0x6d509a),document[_0x2d2252(0xfa0)](_0x2d2252(0x1007))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x8d316b=_0x2d2252;document[_0x8d316b(0xfa0)]('shopping-settings-modal')[_0x8d316b(0x128f)][_0x8d316b(0x443)](_0x8d316b(0xdcc));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x9e7))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x15ae7b=>{const _0x1c5e27=_0x2d2252,_0x5a1f9e=_0x15ae7b['target'][_0x1c5e27(0xb34)],_0x38312d=document[_0x1c5e27(0x2a1)](_0x1c5e27(0x110e));_0x38312d[_0x1c5e27(0x458)](_0x383655=>{const _0x130262=_0x1c5e27,_0x3475f4=parseInt(_0x383655['dataset']['id']);_0x383655['classList'][_0x130262(0xb80)](_0x130262(0xaa0),_0x5a1f9e),_0x5a1f9e?_0x417f90[_0x130262(0x1327)](_0x3475f4):_0x417f90['delete'](_0x3475f4);}),document[_0x1c5e27(0xfa0)](_0x1c5e27(0x9f5))['textContent']=_0x1c5e27(0x668)+_0x417f90[_0x1c5e27(0xbc3)]+')';}),document[_0x2d2252(0xfa0)](_0x2d2252(0x9f5))['addEventListener']('click',async()=>{const _0x55f08f=_0x2d2252;if(_0x417f90['size']===0x0){alert('请先选择要删除的商品。');return;}const _0x50d323=await _0x3f65ed(_0x55f08f(0x1464),_0x55f08f(0xc1c)+_0x417f90['size']+_0x55f08f(0x130d),{'confirmButtonClass':_0x55f08f(0x611)});_0x50d323&&(await _0x372b85[_0x55f08f(0x8ad)]['bulkDelete']([..._0x417f90]),document[_0x55f08f(0xfa0)](_0x55f08f(0x6a3))[_0x55f08f(0xb4a)](),await _0x31f214(),await _0x4abd86('成功','选中的商品已成功删除。'));}),document[_0x2d2252(0xfa0)](_0x2d2252(0xe6b))[_0x2d2252(0x7b8)]('change',_0x2a588f),document[_0x2d2252(0xfa0)](_0x2d2252(0xc08))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x1eafe9),document[_0x2d2252(0xfa0)](_0x2d2252(0x7c4))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x408f06),document[_0x2d2252(0xfa0)](_0x2d2252(0x78c))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x2d2f70=>{const _0x2a7f2b=_0x2d2252,_0x48fd48=document[_0x2a7f2b(0xfa0)](_0x2a7f2b(0x11ea));_0x48fd48['style']['display']=_0x2d2f70[_0x2a7f2b(0x10c2)][_0x2a7f2b(0xb34)]?'block':'none';}),document[_0x2d2252(0xfa0)]('novelai-key-toggle')[_0x2d2252(0x7b8)]('click',function(){const _0x6cc201=_0x2d2252,_0x1d7092=document[_0x6cc201(0xfa0)](_0x6cc201(0x2cd));_0x1d7092[_0x6cc201(0x682)]==='password'?(_0x1d7092[_0x6cc201(0x682)]=_0x6cc201(0xda3),this[_0x6cc201(0xc62)]='😌'):(_0x1d7092[_0x6cc201(0x682)]=_0x6cc201(0xc66),this[_0x6cc201(0xc62)]='🧐');}),document[_0x2d2252(0xfa0)](_0x2d2252(0x155d))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x27e9e9=_0x2d2252;_0x37f61f(),document[_0x27e9e9(0xfa0)]('novelai-settings-modal')[_0x27e9e9(0x63b)]['display']=_0x27e9e9(0x138c);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1392))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x1227b0=>{const _0x4d50c9=_0x2d2252,_0x148259=document[_0x4d50c9(0xfa0)](_0x4d50c9(0xc23));_0x1227b0[_0x4d50c9(0x10c2)]['value']===_0x4d50c9(0xd3c)?_0x148259['style'][_0x4d50c9(0x1248)]=_0x4d50c9(0x127c):_0x148259[_0x4d50c9(0x63b)][_0x4d50c9(0x1248)]=_0x4d50c9(0x11b5);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x660))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x8dd50d=_0x2d2252;document[_0x8dd50d(0xfa0)](_0x8dd50d(0x13f5))['style'][_0x8dd50d(0x1248)]=_0x8dd50d(0x11b5);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x11c1))['addEventListener'](_0x2d2252(0xb4a),()=>{const _0x44262e=_0x2d2252;_0x51a16f(),document[_0x44262e(0xfa0)](_0x44262e(0x13f5))[_0x44262e(0x63b)][_0x44262e(0x1248)]=_0x44262e(0x11b5),alert(_0x44262e(0x1119));}),document[_0x2d2252(0xfa0)](_0x2d2252(0x14fc))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x48a9ff=_0x2d2252;confirm(_0x48a9ff(0x126c))&&_0x373008();}),document['getElementById'](_0x2d2252(0xde0))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x1e3757=_0x2d2252,_0x24ac1f=document['getElementById'](_0x1e3757(0x2cd))[_0x1e3757(0x4f6)][_0x1e3757(0xa06)]();if(!_0x24ac1f){alert(_0x1e3757(0x595));return;}document['getElementById'](_0x1e3757(0x90a))['style'][_0x1e3757(0x1248)]=_0x1e3757(0x138c),document[_0x1e3757(0xfa0)](_0x1e3757(0x1016))[_0x1e3757(0x63b)][_0x1e3757(0x1248)]=_0x1e3757(0x11b5),document[_0x1e3757(0xfa0)](_0x1e3757(0xff7))[_0x1e3757(0x63b)][_0x1e3757(0x1248)]=_0x1e3757(0x11b5);}),document[_0x2d2252(0xfa0)]('close-novelai-test')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x282fe2=_0x2d2252;document[_0x282fe2(0xfa0)](_0x282fe2(0x90a))[_0x282fe2(0x63b)][_0x282fe2(0x1248)]=_0x282fe2(0x11b5);}),document[_0x2d2252(0xfa0)]('close-nai-test-btn')[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x5eb3cf=_0x2d2252;document[_0x5eb3cf(0xfa0)](_0x5eb3cf(0x90a))[_0x5eb3cf(0x63b)][_0x5eb3cf(0x1248)]=_0x5eb3cf(0x11b5);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x2fe))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),async()=>{await _0x4092ce();}),document['getElementById'](_0x2d2252(0x2a4))[_0x2d2252(0x7b8)]('click',()=>{const _0x113730=_0x2d2252,_0xd1f224=document[_0x113730(0xfa0)](_0x113730(0x1174)),_0x59f8b5=document[_0x113730(0xb4e)]('a');_0x59f8b5[_0x113730(0x5e9)]=_0xd1f224[_0x113730(0x53e)],_0x59f8b5[_0x113730(0xb9e)]=_0x113730(0x10ff)+Date[_0x113730(0xc22)]()+'.png',_0x59f8b5[_0x113730(0xb4a)]();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x76a))[_0x2d2252(0x7b8)]('click',()=>{const _0x3a91ad=_0x2d2252;if(!_0x8f0871[_0x3a91ad(0xac8)])return;const _0x220ef8=_0x8f0871['chats'][_0x8f0871[_0x3a91ad(0xac8)]],_0x293301=_0x220ef8['settings'][_0x3a91ad(0x39c)]||{'promptSource':_0x3a91ad(0x1417),'characterPositivePrompt':'','characterNegativePrompt':''};document[_0x3a91ad(0xfa0)](_0x3a91ad(0x14d2))[_0x3a91ad(0x4f6)]=_0x293301['characterPositivePrompt']||'',document[_0x3a91ad(0xfa0)](_0x3a91ad(0x1ad))[_0x3a91ad(0x4f6)]=_0x293301[_0x3a91ad(0x1d0)]||'',document[_0x3a91ad(0xfa0)](_0x3a91ad(0x23d))['style'][_0x3a91ad(0x1248)]=_0x3a91ad(0x138c);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x4b2))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x3aa209=_0x2d2252;document[_0x3aa209(0xfa0)]('character-nai-prompts-modal')[_0x3aa209(0x63b)][_0x3aa209(0x1248)]='none';}),document[_0x2d2252(0xfa0)](_0x2d2252(0x1355))[_0x2d2252(0x7b8)]('click',async()=>{const _0x4d9732=_0x2d2252;if(!_0x8f0871[_0x4d9732(0xac8)])return;const _0x3ee394=_0x8f0871[_0x4d9732(0x1260)][_0x8f0871['activeChatId']];!_0x3ee394[_0x4d9732(0x12d7)][_0x4d9732(0x39c)]&&(_0x3ee394[_0x4d9732(0x12d7)][_0x4d9732(0x39c)]={'promptSource':'system'}),_0x3ee394[_0x4d9732(0x12d7)][_0x4d9732(0x39c)][_0x4d9732(0x3e7)]=document[_0x4d9732(0xfa0)]('character-nai-positive')[_0x4d9732(0x4f6)][_0x4d9732(0xa06)](),_0x3ee394[_0x4d9732(0x12d7)][_0x4d9732(0x39c)][_0x4d9732(0x1d0)]=document['getElementById']('character-nai-negative')[_0x4d9732(0x4f6)]['trim'](),console[_0x4d9732(0x4ee)](_0x4d9732(0x1218)),console[_0x4d9732(0x4ee)](_0x4d9732(0xc1f),_0x3ee394[_0x4d9732(0x12d7)]['naiSettings'][_0x4d9732(0x3e7)]),console[_0x4d9732(0x4ee)](_0x4d9732(0x91b),_0x3ee394['settings']['naiSettings'][_0x4d9732(0x1d0)]),console[_0x4d9732(0x4ee)](_0x4d9732(0xb78),_0x3ee394['settings'][_0x4d9732(0x39c)]['promptSource']),await _0x372b85['chats'][_0x4d9732(0x11d5)](_0x3ee394),document[_0x4d9732(0xfa0)](_0x4d9732(0x23d))['style'][_0x4d9732(0x1248)]=_0x4d9732(0x11b5),alert(_0x4d9732(0x87a));}),document[_0x2d2252(0xfa0)](_0x2d2252(0xef7))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x46f479=_0x2d2252;confirm('确定要清空当前角色的NAI提示词配置吗？')&&(document[_0x46f479(0xfa0)](_0x46f479(0x14d2))[_0x46f479(0x4f6)]='',document[_0x46f479(0xfa0)]('character-nai-negative')[_0x46f479(0x4f6)]='');}),document[_0x2d2252(0xfa0)](_0x2d2252(0xfc2))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{const _0x347cea=_0x2d2252;if(!_0x8f0871[_0x347cea(0xac8)])return;const _0xdf7012=_0x8f0871['chats'][_0x8f0871[_0x347cea(0xac8)]],_0x45a6f5=_0xdf7012[_0x347cea(0x12d7)][_0x347cea(0x39c)]||{'promptSource':_0x347cea(0x1417),'characterPositivePrompt':'','characterNegativePrompt':''};document['getElementById'](_0x347cea(0x14d2))[_0x347cea(0x4f6)]=_0x45a6f5[_0x347cea(0x3e7)]||'',document[_0x347cea(0xfa0)](_0x347cea(0x1ad))[_0x347cea(0x4f6)]=_0x45a6f5[_0x347cea(0x1d0)]||'',document[_0x347cea(0xfa0)](_0x347cea(0x23d))['style'][_0x347cea(0x1248)]=_0x347cea(0x138c);}),document[_0x2d2252(0xfa0)]('manage-frames-btn')['addEventListener'](_0x2d2252(0xb4a),_0x1b2ad1),document[_0x2d2252(0xfa0)](_0x2d2252(0x9c4))[_0x2d2252(0x7b8)](_0x2d2252(0xca8),_0x2faa84),document[_0x2d2252(0xfa0)](_0x2d2252(0xea3))[_0x2d2252(0x7b8)]('click',_0x489716),document[_0x2d2252(0xfa0)](_0x2d2252(0xf28))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x5965fe),document[_0x2d2252(0xfa0)](_0x2d2252(0x99b))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>{_0x49fa15('char-taobao-screen');}),document[_0x2d2252(0xfa0)](_0x2d2252(0x81a))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x100405=>{const _0x148485=_0x2d2252,_0x115e7e=_0x100405['target'][_0x148485(0x187)](_0x148485(0x10d2));if(_0x115e7e){const _0x489000=_0x115e7e[_0x148485(0xfb1)](_0x148485(0x1491));_0x489000&&_0x100405[_0x148485(0x10c2)]!==_0x489000&&(_0x489000[_0x148485(0xb34)]=!_0x489000[_0x148485(0xb34)]);}});const _0x474c93=document[_0x2d2252(0xfa0)]('sticker-category-tabs');_0x53cdde(_0x474c93,_0x18ce49=>{const _0x28169c=_0x2d2252,_0x2438a0=_0x18ce49['target'][_0x28169c(0x187)]('.sticker-category-tab');if(_0x2438a0){_0x18ce49[_0x28169c(0xdc1)]();const _0x1d717e=_0x2438a0['dataset'][_0x28169c(0x6b2)];if(_0x1d717e===_0x28169c(0x8ab)){_0x4abd86('提示','“全部”分类无法被绑定。');return;}const _0x29cd97=_0x1d717e===_0x28169c(0x398)?_0x28169c(0x398):parseInt(_0x1d717e);_0x5af796(_0x29cd97);}}),document[_0x2d2252(0xfa0)](_0x2d2252(0xfd5))[_0x2d2252(0x7b8)]('click',_0x590f46),document['getElementById'](_0x2d2252(0x40b))[_0x2d2252(0x7b8)]('click',()=>{const _0x58e5bf=_0x2d2252;document['getElementById'](_0x58e5bf(0x13c7))[_0x58e5bf(0x128f)][_0x58e5bf(0x443)](_0x58e5bf(0xdcc));}),document['getElementById'](_0x2d2252(0x408))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),_0x107766),document[_0x2d2252(0xfa0)](_0x2d2252(0x36f))[_0x2d2252(0x7b8)]('click',_0x2599be=>{_0x3db511(_0x2599be);}),document[_0x2d2252(0xfa0)](_0x2d2252(0x773))['addEventListener'](_0x2d2252(0xca8),_0x583268=>{const _0x39a1c5=_0x2d2252,_0x13b96f=_0x583268['target'][_0x39a1c5(0xb34)];document['querySelectorAll'](_0x39a1c5(0x1430))[_0x39a1c5(0x458)](_0x4197f2=>{const _0x299125=_0x39a1c5;_0x4197f2[_0x299125(0x128f)][_0x299125(0xb80)](_0x299125(0xaa0),_0x13b96f);const _0x42e5b9=_0x4197f2[_0x299125(0x8df)][_0x299125(0x1557)];_0x13b96f?_0x290316[_0x299125(0x1327)](_0x42e5b9):_0x290316[_0x299125(0xf10)](_0x42e5b9);}),_0x20ddff();}),document[_0x2d2252(0xfa0)](_0x2d2252(0x13cd))['addEventListener'](_0x2d2252(0xb4a),()=>_0x44a544()),document[_0x2d2252(0xfa0)](_0x2d2252(0x625))[_0x2d2252(0x7b8)](_0x2d2252(0xb4a),()=>_0xab534d()),_0x15fa2c(),_0x2d25e5(_0x2d2252(0x117a));}_0x4e42f6();});
